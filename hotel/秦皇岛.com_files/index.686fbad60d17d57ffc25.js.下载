(function(){var __webpack_modules__={2020:function(e,_,k){const{config:I,AppID:C}=k(60306),{page:R}=k(37595);e.exports={serverPort:I.port,clientPort:9999,qconfig:["hotels.properties"],Env:"fat"===I.env.toLowerCase()?"fws":I.env.toLowerCase(),isProd:["prd","prod","pro"].includes(I.env.toLowerCase()),isFat:["fat","fws"].includes(I.env.toLowerCase()),isUat:"uat"===I.env.toLowerCase(),AppID:C,SharkUpdateInterval:1e4,AresJSON:"a path",AresConfig:"",platform:"online",sharkID:100018131,vd:I.vd,ctripvd:I.ctripvd,Ares:{interval:3e5,env:I.env},startPath:R[0]?R[0]:`/${I.vd}/complete/1234`,isDev:!1,ABTest:{},distDirectorys:["hbusmart","smart"],"SOA.HandleServiceErrorManually":!0,frontVersion:"1.10.0"}},37595:function(e){e.exports={dev:["/client/cross/flight"],page:[]}},67228:function(e){e.exports=function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}},22858:function(e){e.exports=function _arrayWithHoles(e){if(Array.isArray(e))return e}},23646:function(e,_,k){var I=k(67228);e.exports=function _arrayWithoutHoles(e){if(Array.isArray(e))return I(e)}},81506:function(e){e.exports=function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},48926:function(e){function asyncGeneratorStep(e,_,k,I,C,R,j){try{var B=e[R](j),H=B.value}catch(e){return void k(e)}B.done?_(H):Promise.resolve(H).then(I,C)}e.exports=function _asyncToGenerator(e){return function(){var _=this,k=arguments;return new Promise((function(I,C){var R=e.apply(_,k);function _next(e){asyncGeneratorStep(R,I,C,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(R,I,C,_next,_throw,"throw",e)}_next(void 0)}))}}},34575:function(e){e.exports=function _classCallCheck(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}},93913:function(e){function _defineProperties(e,_){for(var k=0;k<_.length;k++){var I=_[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(e,I.key,I)}}e.exports=function _createClass(e,_,k){return _&&_defineProperties(e.prototype,_),k&&_defineProperties(e,k),e}},59713:function(e){e.exports=function _defineProperty(e,_,k){return _ in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}},96156:function(e,_,k){"use strict";function _defineProperty(e,_,k){return _ in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}k.d(_,{Z:function(){return _defineProperty}})},22122:function(e,_,k){"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var _=1;_<arguments.length;_++){var k=arguments[_];for(var I in k)Object.prototype.hasOwnProperty.call(k,I)&&(e[I]=k[I])}return e}).apply(this,arguments)}k.d(_,{Z:function(){return _extends}})},41788:function(e,_,k){"use strict";function _inheritsLoose(e,_){e.prototype=Object.create(_.prototype),e.prototype.constructor=e,e.__proto__=_}k.d(_,{Z:function(){return _inheritsLoose}})},19756:function(e,_,k){"use strict";function _objectWithoutPropertiesLoose(e,_){if(null==e)return{};var k,I,C={},R=Object.keys(e);for(I=0;I<R.length;I++)k=R[I],_.indexOf(k)>=0||(C[k]=e[k]);return C}k.d(_,{Z:function(){return _objectWithoutPropertiesLoose}})},67154:function(e){function _extends(){return e.exports=_extends=Object.assign||function(e){for(var _=1;_<arguments.length;_++){var k=arguments[_];for(var I in k)Object.prototype.hasOwnProperty.call(k,I)&&(e[I]=k[I])}return e},_extends.apply(this,arguments)}e.exports=_extends},29754:function(e){function _getPrototypeOf(_){return e.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(_)}e.exports=_getPrototypeOf},2205:function(e,_,k){var I=k(99489);e.exports=function _inherits(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(_&&_.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_&&I(e,_)}},85354:function(e){e.exports=function _inheritsLoose(e,_){e.prototype=Object.create(_.prototype),e.prototype.constructor=e,e.__proto__=_}},95318:function(e){e.exports=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},46860:function(e){e.exports=function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},13884:function(e){e.exports=function _iterableToArrayLimit(e,_){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var k=[],I=!0,C=!1,R=void 0;try{for(var j,B=e[Symbol.iterator]();!(I=(j=B.next()).done)&&(k.push(j.value),!_||k.length!==_);I=!0);}catch(e){C=!0,R=e}finally{try{I||null==B.return||B.return()}finally{if(C)throw R}}return k}}},80521:function(e){e.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},98206:function(e){e.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},6479:function(e,_,k){var I=k(37316);e.exports=function _objectWithoutProperties(e,_){if(null==e)return{};var k,C,R=I(e,_);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(e);for(C=0;C<j.length;C++)k=j[C],_.indexOf(k)>=0||Object.prototype.propertyIsEnumerable.call(e,k)&&(R[k]=e[k])}return R}},37316:function(e){e.exports=function _objectWithoutPropertiesLoose(e,_){if(null==e)return{};var k,I,C={},R=Object.keys(e);for(I=0;I<R.length;I++)k=R[I],_.indexOf(k)>=0||(C[k]=e[k]);return C}},78585:function(e,_,k){var I=k(50008),C=k(81506);e.exports=function _possibleConstructorReturn(e,_){return!_||"object"!==I(_)&&"function"!=typeof _?C(e):_}},90103:function(e){e.exports=function _readOnlyError(e){throw new Error('"'+e+'" is read-only')}},99489:function(e){function _setPrototypeOf(_,k){return e.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,_){return e.__proto__=_,e},_setPrototypeOf(_,k)}e.exports=_setPrototypeOf},63038:function(e,_,k){var I=k(22858),C=k(13884),R=k(60379),j=k(80521);e.exports=function _slicedToArray(e,_){return I(e)||C(e,_)||R(e,_)||j()}},319:function(e,_,k){var I=k(23646),C=k(46860),R=k(60379),j=k(98206);e.exports=function _toConsumableArray(e){return I(e)||C(e)||R(e)||j()}},50008:function(e){function _typeof(_){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=_typeof=function _typeof(e){return typeof e}:e.exports=_typeof=function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(_)}e.exports=_typeof},60379:function(e,_,k){var I=k(67228);e.exports=function _unsupportedIterableToArray(e,_){if(e){if("string"==typeof e)return I(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);return"Object"===k&&e.constructor&&(k=e.constructor.name),"Map"===k||"Set"===k?Array.from(e):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?I(e,_):void 0}}},87757:function(e,_,k){e.exports=k(35666)},21434:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});const k="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";_.default=function genRandomStr(e){try{let C=Math.random().toString(16).slice(-4);if(e<=4)return C.slice(0,e);let R="";for(var _=0;_<e-C.length;_++){var I=Math.ceil(Math.random()*(k.length-1));R+=k[I]}return C+R}catch(e){}}},96614:function(e){"use strict";var _={HTML_DATA_ATTRIBUTE_NAME:"data-cargo",H5:"h5",ONLINE:"online",PADS:["ipad","playbook","tablet"],MOBILES:["mobile","iphone","android","phone","wap","opera","opera mini","ucweb","windows ce","symbian","series","webos","sony","blackberry","dopod","nokia","samsung","palmsource","meizu","midp","cldc","motorola"],ENV_LIST:[{value:"sandbox",keywords:["sandbox"]},{value:"fws",keywords:["fws","fat","dev"]},{value:"uat",keywords:["uat"]},{value:"lpt",keywords:["lpt"]}]},k="locale",I="language",C="currency",R="site",j="group",B="contextType",H=function getCargoContext(e){var k={};return(window.document.getElementsByTagName("html")[0].getAttribute(_.HTML_DATA_ATTRIBUTE_NAME)||"").split(",").forEach((function(e){var _=e.split(":");2===_.length&&(k[_[0]]=_[1])})),e?k[e]||"":k},U=function setCargoContext(e,k){if(e&&k){var I=H();I[e]=k,window.document.getElementsByTagName("html")[0].setAttribute(_.HTML_DATA_ATTRIBUTE_NAME,Object.entries(I).map((function(e){return e.join(":")})).join())}},V=function getCookie(e){var _="";return e&&(_="; ".concat(window.document.cookie).split("; ".concat(e,"=")).pop().split(";")[0]),_},G=function isH5(e){var k=e||H(B);return k?k.toLowerCase()===_.H5:function getClientType(){var e=(window.navigator.userAgent||"").toLowerCase();return e?!_.MOBILES.some((function(_){return-1!==e.indexOf(_)}))||_.PADS.some((function(_){return-1!==e.indexOf(_)}))||/android/.test(e)&&!/mobile/.test(e)?_.ONLINE:_.H5:_.ONLINE}()===_.H5||"m"===window.location.pathname.split("/")[1]},q=function normalizeLocale(e){if(/^[a-z]{2}(-|_)[a-z]{2}$/i.test(e)){var _=e.match(/[a-z]{2}/gi);return"".concat(_[0].toLowerCase(),"-").concat(_[1].toUpperCase())}},z={getLocale:function getLocale(e,_){var I=q(H(k));return I||_||(I=q(window.document.getElementsByTagName("html")[0].getAttribute("lang"))),I||(I=G(e)?q(V("ibu_h5_local")):q(V("ibulocale")||V("ibu_h5_local"))),I||""},setLocale:function setLocale(e){var _=q(e);_&&U(k,_)},getLanguage:function getLanguage(e){var _=H(I);return _||(_=G(e)?V("ibu_h5_lang"):V("ibulanguage")),(_||"").toLowerCase()},setLanguage:function setLanguage(e){e&&/^([a-z]{2}){1,2}$/i.test(e)&&U(I,e.toLowerCase())},getCurrency:function getCurrency(e){var _=H(C);return _||(_=G(e)&&V("ibu_h5_curr")||V("cookiePricesDisplayed")),(_||"").toUpperCase()},setCurrency:function setCurrency(e){e&&/^[a-z]{3}$/i.test(e)&&U(C,e.toUpperCase())},getSite:function getSite(){var e=H(R);return e||(e=V("ibu_h5_site")),(e||"").toUpperCase()},setSite:function setSite(e){e&&/^[a-z]{2}$/i.test(e)&&U(R,e.toUpperCase())},getGroup:function getGroup(){var e=H(j);return e||(e=V("ibu_h5_group")),e||""},setGroup:function setGroup(e){e&&U(j,e)},getContextType:function getContextType(){return G()?_.H5:_.ONLINE},setContextType:function setContextType(e){e&&[_.H5,_.ONLINE].includes(e.toLowerCase())&&U(B,e.toLowerCase())},getEnv:function getEnv(){var e="prod",k=window.location.hostname||window.location.host;return _.ENV_LIST.forEach((function(_){if(_.keywords.forEach((function(I){if(k.indexOf(I)>-1)return e=_.value,!0})),e)return!0})),e}};"undefined"!=typeof window&&(window.cargo=z),e.exports=z},96334:function(e,_,k){"use strict";k.d(_,{JS:function(){return I},b6:function(){return C},RD:function(){return R},pQ:function(){return j},NQ:function(){return B},wp:function(){return H}});var I=4,C="component-sub_env",R="_dev_force_request_host_",j="subEnv",B="x-traceID",H="trip-trace-id"},15474:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{W:function(){return request}});var _ctrip_cloud_foxpage_trip_utils_lib_browser_cookie__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39898),_shared_constant__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69684),_shared_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6435),_shared_cache__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(42299),_track__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(32726),_helper__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(70301),_shared_errors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(74135),_constant__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96334),_shared_default_error_handler__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(99189),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6447);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WIN_KEY="__TRIP_COMPONENT_REQUEST_CACHE__",cacheManager=window[WIN_KEY]=window[WIN_KEY]||new _shared_cache__WEBPACK_IMPORTED_MODULE_0__.L;function noop(){}function getRandom(e){return parseInt("".concat((Math.random()+1)*Math.pow(10,e-1)))}function getVid(){var e=((0,_ctrip_cloud_foxpage_trip_utils_lib_browser_cookie__WEBPACK_IMPORTED_MODULE_1__.ej)("_bfa")||"").split(".");return e[1]&&e[2]?"".concat(e[1],".").concat(e[2]):""}function getSubEnv(){try{if("object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage))&&window.localStorage&&"function"==typeof localStorage.getItem)return window.localStorage.getItem(_constant__WEBPACK_IMPORTED_MODULE_2__.b6)}catch(e){return null}}function getForceHost(){try{return(0,_ctrip_cloud_foxpage_trip_utils_lib_browser_cookie__WEBPACK_IMPORTED_MODULE_1__.ej)(_constant__WEBPACK_IMPORTED_MODULE_2__.RD)}catch(e){return null}}function isDevOrFat(){var e=window.location.host;return e.indexOf(".qa.nt")>-1||e.indexOf("localhost")>-1}function getResponseDataType(e){if(e){var _=e.split(";",1)[0];return _shared_constant__WEBPACK_IMPORTED_MODULE_3__.J[_]}}function trim(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function getResponseHeaders(e){var _=trim(e.getAllResponseHeaders()).split(/[\r\n]+/),k={};return _.forEach((function(e){var _=e.split(": "),I=_.shift(),C=_.join(": ");I&&(k[I]=C)})),k}var decodeResponse=function decodeResponse(xhr,dataType){var response;if("arraybuffer"===xhr.responseType||"blob"===xhr.responseType)response=xhr.response;else{response=xhr.responseText;var responseDataType=dataType||getResponseDataType(xhr.getResponseHeader("content-type"));"script"===responseDataType?eval(response):"json"===responseDataType&&(response=""===trim(response)?null:JSON.parse(response))}return response};function _ajax(e){var _=e.url,k=e.method,I=void 0===k?"GET":k,C=e.params,R=e.data,j=void 0===R?null:R,B=e.contentType,H=void 0===B?null:B,U=e.dataType,V=void 0===U?null:U,G=e.__success,q=void 0===G?noop:G,z=e.__error,J=void 0===z?noop:z,Q=e.timeout,ee=void 0===Q?0:Q,te=e.withCredentials,ne=e.headers,re=void 0===ne?{}:ne;I=I.toUpperCase(),C=C||{};var oe=new XMLHttpRequest,ie=isDevOrFat(),ae=/^([\w-]+:)\/\//.test(_)?RegExp.$1:window.location.protocol,le=!1,se=function done(k,I){if(!le){if(k){var C=(0,_shared_errors__WEBPACK_IMPORTED_MODULE_4__.$O)((0,_utils__WEBPACK_IMPORTED_MODULE_5__.A)(k),e,{status:oe.status,statusText:oe.statusText,data:oe.responseText||oe.response,headers:getResponseHeaders(oe)});J(C,oe)}else{q({url:_,response:I,xhr:oe},oe)}le=!0}},ce=function handleLoad(){if((0,_shared_utils__WEBPACK_IMPORTED_MODULE_6__.F1)(oe.status,ae))try{var e=decodeResponse(oe,V);se(null,e)}catch(e){se(e)}else{var k=new Error('url "'.concat(_,'" response status "').concat(oe.status,'" is not correct'));se(k)}},ue=function handleError(e){se(e)};if(ie){var de=getForceHost();if(de)try{var pe=/^[\w-]+:\/\//.test(de)?de:"".concat(ae,"//").concat(de);_=new URL(_,pe).href}catch(e){}var he=getSubEnv();he&&(C[_constant__WEBPACK_IMPORTED_MODULE_2__.pQ]=he)}var fe="".concat(getVid()||getRandom(10),"-").concat((new Date).getTime(),"-").concat(getRandom(10));C[_constant__WEBPACK_IMPORTED_MODULE_2__.NQ]=fe,C&&(_+=(_.indexOf("?")>-1?"&":"?")+(0,_shared_utils__WEBPACK_IMPORTED_MODULE_6__.XP)(C)),oe.onreadystatechange=function onreadystatechange(){oe.readyState===_constant__WEBPACK_IMPORTED_MODULE_2__.JS&&(oe.onreadystatechange=noop,setTimeout((function(){le||ce()}),0))},oe.onload=ce,oe.onerror=function(e){return ue(e)},oe.ontimeout=function(){return ue(new _shared_errors__WEBPACK_IMPORTED_MODULE_4__.W5(ee))},oe.onabort=function(){oe.__abortByUser?ue(_shared_errors__WEBPACK_IMPORTED_MODULE_4__._L.MANUAL_ABORT_ERROR()):ue(new _shared_errors__WEBPACK_IMPORTED_MODULE_4__._L)},oe.open(I,_,!0,null,null),oe.setRequestHeader(_constant__WEBPACK_IMPORTED_MODULE_2__.NQ,fe),oe.setRequestHeader(_constant__WEBPACK_IMPORTED_MODULE_2__.wp,fe);for(var me=0,ge=Object.keys(re);me<ge.length;me++){var ve=ge[me],ye=re[ve];oe.setRequestHeader(ve,ye)}return"POST"!==I||re["Content-Type"]||oe.setRequestHeader("Content-Type",H||"application/json"),ee>0&&(oe.timeout=ee),te&&(oe.withCredentials=!0),oe.send(j&&"GET"!==I?JSON.stringify(j):null),oe}var _request=function _request(e){if(e.cache){var _=cacheManager.get(e);if(_&&(0,_shared_utils__WEBPACK_IMPORTED_MODULE_6__.Rw)(_))return _}var k,I=new Promise((function(_,I){var C=e;C.__success=_,C.__error=I,k=_ajax(C)})).then((function(_){var k=_.response,I=_.url,C=_.xhr;if((0,_track__WEBPACK_IMPORTED_MODULE_7__.Eq)(k,{url:I},C),"function"==typeof e.transformResponse)try{return e.transformResponse(k,{headers:getResponseHeaders(C)})}catch(e){return k}return k})).catch((function(_){var I=(0,_shared_errors__WEBPACK_IMPORTED_MODULE_4__.$O)(_,e);if(e.trackError&&(0,_track__WEBPACK_IMPORTED_MODULE_7__.ME)(_,e,k),!_shared_default_error_handler__WEBPACK_IMPORTED_MODULE_8__.V)throw I;(0,_shared_default_error_handler__WEBPACK_IMPORTED_MODULE_8__.V)(I)}));return I.abort=function(){k&&(k.__abortByUser=!0,k.abort())},Object.defineProperty(I,"_xhr",{get:function get(){return k}}),e.cache&&cacheManager.add(e,I),I},request=(0,_helper__WEBPACK_IMPORTED_MODULE_9__.P)(_request)},32726:function(e,_,k){"use strict";k.d(_,{ME:function(){return trackAjaxFail},Eq:function(){return trackAjaxSuccess}});var I=k(73584),C=["xIbuTripRegion"];function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties(e,_){if(null==e)return{};var k,I,C=function _objectWithoutPropertiesLoose(e,_){if(null==e)return{};var k,I,C={},R=Object.keys(e);for(I=0;I<R.length;I++)k=R[I],_.indexOf(k)>=0||(C[k]=e[k]);return C}(e,_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(e);for(I=0;I<R.length;I++)k=R[I],_.indexOf(k)>=0||Object.prototype.propertyIsEnumerable.call(e,k)&&(C[k]=e[k])}return C}function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){_defineProperty(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function _defineProperty(e,_,k){return(_=function _toPropertyKey(e){var _=function _toPrimitive(e,_){if("object"!==_typeof(e)||null===e)return e;var k=e[Symbol.toPrimitive];if(void 0!==k){var I=k.call(e,_||"default");if("object"!==_typeof(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"===_typeof(_)?_:String(_)}(_))in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}var R="ibu_ajax_perf";function validTiming(e){var _={};return Object.keys(e).forEach((function(k){if("string"==typeof k&&"number"==typeof e[k]){var I=Math.max(e[k],0);_[k]=I}})),_}function trackAjaxPerformance(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},C=_objectSpread({url:e},validTiming(_));"string"==typeof k.region&&(C.region=k.region);var j={name:R,value:_.duration,sample:100,tag:C};return(0,I.fW)(j)}function diff(e,_){return _>0&&e>_?e-_:0}function trackAjaxMessageTraceID(e,_){if(e&&0!==Object.keys(e).length){var k=_.xIbuTripRegion,R=_objectWithoutProperties(_,C),j=[];k&&j.push("x-ibu-trip-region:".concat(k));var B=j.join(";"),H={name:"JS.Lizard.AjaxReady",tag:_objectSpread(_objectSpread(_objectSpread({},R),e),{},{collection:B}),value:_.duration||0};return(0,I.fW)(H)}}var j="x-gate-region",B="x-originating-url",H="x-ibu-trip-region",U=k(74135),V=k(53666),G=k(6447);function findResourcePerfEntry(e){for(var _=function getEntries(e){return"function"==typeof performance.getEntriesByName?performance.getEntriesByName(e):"function"==typeof performance.getEntriesByType?performance.getEntriesByType("resource"):[]}(e),k=null,I=-1,C=_.length-1;C>=0;C--){var R=_[C];"xmlhttprequest"!==R.initiatorType&&"fetch"!==R.initiatorType||R.name===e&&R.responseEnd>I&&(I=R.responseEnd,k=R)}return k}function trackAjaxFail(e,_,k){try{!function trackAjaxError(e){var _=e.originError,k={message:e.message,stack:e.stack,line:null==_?void 0:_.lineNumber,column:null==_?void 0:_.columnNumber,file:null==_?void 0:_.fileName};(0,I.tz)(k)}((0,U.$O)((0,G.A)(e),_))}catch(e){}}function trackAjaxSuccess(e,_,k){var I=_.url,C=_.responseHeaders;try{var R=function getCompleteUrl(e){var _="",k=window.location,I=k.protocol,C=k.host;if(!e)return"";_=/^http/.test(e)?e:/^\/\//.test(e)?I+e:/^\//.test(e)?I+"//"+C+e:I+"//"+e;return _}(I),U=findResourcePerfEntry(R);if(!U)throw new Error("[track ajax] can't find ResourceTiming, url \"".concat(R,'" may not correct'));var q=(0,V.Y)(e),z=C&&C["x-gate-region"]||k&&k.getResponseHeader(j)||"",J=C&&C["x-originating-url"]||k&&k.getResponseHeader(B)||"";return function trackAjaxTiming(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=arguments.length>2?arguments[2]:void 0,I={DNSTime:diff(e.domainLookupEnd,e.domainLookupStart),TCPTime:diff(e.connectEnd,e.connectStart),SSLTime:diff(e.connectEnd,e.secureConnectionStart),requestTime:diff(e.responseStart,e.requestStart||e.fetchStart||e.startTime),responseTime:diff(e.responseEnd,e.responseStart),duration:e.duration||diff(e.responseEnd,e.fetchStart)};return Promise.all([trackAjaxPerformance(e.name,I,_),k?trackAjaxMessageTraceID(k,{url:e.name,duration:I.duration,"ak-region":_["ak-region"]||""}):Promise.reject()]).then((function(e){return _slicedToArray(e,1)[0]}))}(U,{region:z,"ak-region":(0,G.h)(J)||"",xIbuTripRegion:C&&C[H]||k&&k.getResponseHeader(H)||""},q)}catch(e){return Promise.resolve(-1)}}},6447:function(e,_,k){"use strict";function transformEventToError(e){if(e instanceof Error)return e;var _=new Error("");return _.event=e,_}k.d(_,{A:function(){return transformEventToError},h:function(){return I}});var I=function parseXOriginUrlToAkRegion(e){if(e)try{return new URL(e).searchParams.get("region")||""}catch(e){}}},70301:function(e,_,k){"use strict";k.d(_,{P:function(){return I}});var I=function bindRequestMethods(e){var _=e;return _.get=_.get||function(e){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k.method="GET",k.url=e,_(k)},_.post=_.post||function(e,k){var I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return I.method="POST",I.url=e,I.data=k,_(I)},_.put=_.put||function(e,k){var I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return I.method="PUT",I.url=e,I.data=k,_(I)},_}},42299:function(e,_,k){"use strict";function _defineProperties(e,_){for(var k=0;k<_.length;k++){var I=_[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(e,_toPropertyKey(I.key),I)}}function _defineProperty(e,_,k){return(_=_toPropertyKey(_))in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}function _toPropertyKey(e){var _=function _toPrimitive(e,_){if("object"!==_typeof(e)||null===e)return e;var k=e[Symbol.toPrimitive];if(void 0!==k){var I=k.call(e,_||"default");if("object"!==_typeof(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"===_typeof(_)?_:String(_)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sameOption(e,_){return function sameMethod(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET";return e&&_&&e.toUpperCase()===_.toUpperCase()}(e.method,_.method)&&e.url===_.url&&function isEqual(e,_){if(_typeof(e)===_typeof(_)){if("object"===_typeof(e)&&null!==e)try{return JSON.stringify(e)===JSON.stringify(_)}catch(e){return!1}return e===_}return!1}(e.data,_.data)}k.d(_,{L:function(){return I}});var I=function(){function CacheManager(){!function _classCallCheck(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}(this,CacheManager),_defineProperty(this,"maxSize",void 0),_defineProperty(this,"cacheList",void 0),this.maxSize=30,this.cacheList=[]}return function _createClass(e,_,k){return _&&_defineProperties(e.prototype,_),k&&_defineProperties(e,k),Object.defineProperty(e,"prototype",{writable:!1}),e}(CacheManager,[{key:"exist",value:function exist(e){return!!this.get(e)}},{key:"get",value:function get(e){for(var _=this.cacheList,k=0;k<_.length;k++){var I=_[k],C=I.option,R=I.promise;if(sameOption(C,e))return R}}},{key:"add",value:function add(e,_){this.exist(e)||(this.cacheList.push({option:e,promise:_}),this.cacheList.length>this.maxSize&&this.cacheList.shift())}}]),CacheManager}()},69684:function(e,_,k){"use strict";k.d(_,{J:function(){return I}});var I={"text/javascript":"script","application/javascript":"script","application/x-javascript":"script","application/json":"json","text/html":"document","text/plain":"text","application/octet-stream":"blob"}},99189:function(e,_,k){"use strict";var I;k.d(_,{V:function(){return I}})},74135:function(e,_,k){"use strict";k.d(_,{$O:function(){return R},W5:function(){return j},_L:function(){return B}});var I=k(53666);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,_){for(var k=0;k<_.length;k++){var I=_[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(e,_toPropertyKey(I.key),I)}}function _createClass(e,_,k){return _&&_defineProperties(e.prototype,_),k&&_defineProperties(e,k),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}function _inherits(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(_&&_.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),_&&_setPrototypeOf(e,_)}function _createSuper(e){var _=_isNativeReflectConstruct();return function _createSuperInternal(){var k,I=_getPrototypeOf(e);if(_){var C=_getPrototypeOf(this).constructor;k=Reflect.construct(I,arguments,C)}else k=I.apply(this,arguments);return _possibleConstructorReturn(this,k)}}function _possibleConstructorReturn(e,_){if(_&&("object"===_typeof(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var _="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function _wrapNativeSuper(e){if(null===e||!function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==_){if(_.has(e))return _.get(e);_.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}function _construct(e,_,k){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(e,_,k){var I=[null];I.push.apply(I,_);var C=new(Function.bind.apply(e,I));return k&&_setPrototypeOf(C,k.prototype),C}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(e,_){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,_){return e.__proto__=_,e})(e,_)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,_,k){return(_=_toPropertyKey(_))in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}function _toPropertyKey(e){var _=function _toPrimitive(e,_){if("object"!==_typeof(e)||null===e)return e;var k=e[Symbol.toPrimitive];if(void 0!==k){var I=k.call(e,_||"default");if("object"!==_typeof(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"===_typeof(_)?_:String(_)}var C=function(e){_inherits(RequestError,e);var _=_createSuper(RequestError);function RequestError(e,k){var I,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,RequestError),_defineProperty(_assertThisInitialized(I=_.call(this,"")),"url",void 0),_defineProperty(_assertThisInitialized(I),"option",void 0),_defineProperty(_assertThisInitialized(I),"status",void 0),_defineProperty(_assertThisInitialized(I),"statusText",void 0),_defineProperty(_assertThisInitialized(I),"headers",void 0),_defineProperty(_assertThisInitialized(I),"data",void 0),_defineProperty(_assertThisInitialized(I),"originError",void 0),_defineProperty(_assertThisInitialized(I),"isRequestError",void 0),_defineProperty(_assertThisInitialized(I),"event",void 0),formateError(e,k,C),Object.assign(_assertThisInitialized(I),e),I.message=e.message,I.stack=e.stack,I.originError=e,I.url=k.url||"",I.option=k,I.status=C.status,I.statusText=C.statusText,I.headers=C.headers,I.data=C.data,I.isRequestError=!0,I}return _createClass(RequestError)}(_wrapNativeSuper(Error));function formateError(e,_,k){if(e.message="request ".concat(_.method,' "').concat(_.url,'" ').concat(k.status||"fail",": ").concat(e.message),e.stack=e.stack||"empty stack",k.data){var C=(0,I.Y)(k.data);C.CLOGGING_TRACE_ID&&(e.message+='\nCLOGGING_TRACE_ID: "'.concat(C.CLOGGING_TRACE_ID,'"')),C.RootMessageId&&(e.message+='\nRootMessageId: "'.concat(C.RootMessageId,'"'))}}var R=function createRequestError(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=isRequestError(e)?e:new C(e,_,k);return I},j=function(e){_inherits(TimeoutError,e);var _=_createSuper(TimeoutError);function TimeoutError(e,k){var I;return _classCallCheck(this,TimeoutError),I=_.call(this,"promise timeout of ".concat(e,"ms exceeded")),k&&(I.stack=k),I}return _createClass(TimeoutError)}(_wrapNativeSuper(Error)),B=function(e){_inherits(AbortError,e);var _=_createSuper(AbortError);function AbortError(){var e,k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",I=arguments.length>1?arguments[1]:void 0,C=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,AbortError),_defineProperty(_assertThisInitialized(e=_.call(this,"request aborted".concat(k?", because: ".concat(k):""))),"isCancelByUser",void 0),I&&(e.stack=I),e.isCancelByUser=null!=C?C:k===AbortError.MANUAL_ABORT_MESSAGE,e}return _createClass(AbortError)}(_wrapNativeSuper(Error));_defineProperty(B,"MANUAL_ABORT_MESSAGE","user manual abort request"),_defineProperty(B,"MANUAL_ABORT_ERROR",(function(){return new B(B.MANUAL_ABORT_MESSAGE,void 0,!0)}));Error;function isRequestError(e){return"boolean"==typeof e.isRequestError}},53666:function(e,_,k){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}k.d(_,{Y:function(){return findMessageTraceId}});var I={RootMessageId:!0,CLOGGING_TRACE_ID:!0};function findMessageTraceId(e){var _={};try{if("object"===_typeof(e)){var k=e.ResponseStatus||e.responseStatus||e.ResponseStatusType,C=k&&(k.Extension||k.extension);if(C)for(var R=0;R<C.length;R++){var j=C[R],B=j.Id||j.id,H=j.Value||j.value;B&&H&&B in I&&(_[B]=H)}}}catch(e){}return _}},6435:function(e,_,k){"use strict";k.d(_,{XP:function(){return I},Rw:function(){return isAbortable},F1:function(){return validStatus}});var I=function buildQuery(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:encodeURIComponent,I=[];for(var C in e)if(Object.hasOwnProperty.call(e,C)){var R=e[C];if(_&&null==R)continue;"function"==typeof R?R=R():null===R&&(R=""),I.push("".concat(C,"=").concat(k(void 0===R?"":String(R))))}return I.join("&")};function isAbortable(e){return"function"==typeof e.abort}function validStatus(e,_){return e>=200&&e<300||304===e||"file:"===_&&0===e}},73584:function(e,_,k){"use strict";k.d(_,{lR:function(){return getStatus},tz:function(){return trackError},v4:function(){return trackLog},fW:function(){return trackMetric}});var I=k(9830),isMobileAgent=function(){if("undefined"==typeof window)return!1;var e=window.location.pathname;return/^\/m/.test(e)||function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent.toLowerCase();return/(ctrip|android|iphone|mobile|webos)/.test(e)&&!/(ipad|pad)/.test(e)}()};function findUBTScriptElement(){for(var e=document.getElementsByTagName("script"),_=0;_<e.length;_++){var k=e[_],I=k.src;if(I&&(I.indexOf("/code/ubt")>-1||I.indexOf("/sysdev/ubt")>-1||I.indexOf("/modules/ubt/trip")>-1))return k}return null}function createUBTScriptElement(e){void 0===e&&(e=function getUBTScriptLink(e){var _=void 0===e?{}:e,k=_.isOnline,C=void 0===k?!isMobileAgent():k,R=_.isDomestic,j=void 0===R?"ctrip"===(0,I.ex)():R;return C?j?"//webresource.c-ctrip.com/code/ubt/_bfa.min.js":"//webresource.tripcdn.com/ares2/sysdev/ubt/*/default/_bfa.min.js":j?"//webresource.c-ctrip.com/code/ubt/_mubt.min.js":"//webresource.tripcdn.com/ares2/sysdev/ubt/*/default/_mubt.min.js"}());var _=new Date,k="?v="+_.getFullYear()+_.getMonth()+"_"+_.getDate(),C=document.createElement("script");C.type="text/javascript",C.charset="utf-8",C.async=!0,C.src=e+k;var R=document.getElementsByTagName("script")[0];return R&&R.parentElement?R.parentElement.insertBefore(C,R):document.body.appendChild(C),C}function hasLoadedUBT(){return"undefined"!=typeof window&&(void 0!==window.$_bf||window.__bfi&&"function"==typeof window.__bfi.push&&window.__bfi.push!==Array.prototype.push||!!window.__BF_LOADING_FLAG__)}function _load(e){return hasLoadedUBT()?Promise.resolve():function waitUBTScriptLoad(e){return new Promise((function(_,k){e.addEventListener("error",(function(e){k(e)})),e.addEventListener("load",(function(){_()})),e.addEventListener("readystatechange",(function(){"loaded"!==e.readyState&&"complete"!==e.readyState||_()}))}))}(findUBTScriptElement()||createUBTScriptElement(e))}var checkUBTLoaded=function(){"object"==typeof window&&window.__BF_CUSTOM_LOAD_FLAG__||(hasLoadedUBT()||findUBTScriptElement()?checkUBTLoaded=function(){}:function loadUBTScript(e){if("undefined"==typeof window)return Promise.resolve();if(window.__BF_LOAD_PROMISE__)return window.__BF_LOAD_PROMISE__;var _=_load(e);return window.__BF_LOAD_PROMISE__=_,_}().then((function(){checkUBTLoaded=function(){}})))};function addJob(e,_){var k=function getQueue(){return checkUBTLoaded(),window.__bfi||(window.__bfi=[]),window.__bfi}();_.unshift(e),k.push(_)}function addGetJob(e){return new Promise((function(_){addJob(e,[_])}))}function getStatus(){return addGetJob("_getStatus")}function trackLog(e,_){return new Promise((function(k){addJob("_tracklog",[e,_,k])}))}function trackMetric(e){return new Promise((function(_){var k=e;k.callback=function(e){_(e)},addJob("_trackMetric",[k])}))}function trackError(e){addJob("_trackError",[e])}},9830:function(e,_,k){"use strict";function includes(e,_){return e.indexOf(_)>-1}k.d(_,{ex:function(){return I},U:function(){return C}});var I=function getGroup(){return"undefined"==typeof window?"trip":includes(window.location.hostname||window.location.host,"ctrip")?"ctrip":"trip"},C=function getTripEnv(){if("undefined"==typeof window)return"prod";var e=window.location.hostname||window.location.host,_=function find(_,k){for(var I=0;I<_.length;I++){var C=_[I];if(includes(e,C))return k}};return _(["fws","fat","dev"],"fws")||_(["uat"],"uat")||_(["lpt"],"lpt")||"prod"}},72787:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.COOKIE_UNION=_.COOKIE_ONLINE_LOCALE=_.COOKIE_ONLINE_CURRENCY=_.COOKIE_H5_LOCALE=_.COOKIE_H5_CURRENCY=_.COOKIE_BFA=void 0;_.COOKIE_ONLINE_LOCALE="ibulocale";_.COOKIE_ONLINE_CURRENCY="cookiePricesDisplayed";_.COOKIE_H5_LOCALE="ibu_h5_local";_.COOKIE_H5_CURRENCY="ibu_h5_curr";_.COOKIE_BFA="_bfa";_.COOKIE_UNION="Union"},39898:function(e,_,k){"use strict";_.ej=void 0;var I=k(72787);function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}var C=function isMobileAgent(){var e=window.location.pathname;return/^\/m\//.test(e)||function isH5ByUserAgent(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent.toLowerCase();return/(ctrip|android|iphone|mobile|webos)/.test(e)&&!/(ipad|pad)/.test(e)}()},R=function getCookie(e){if("undefined"==typeof document)return"";var _=document.cookie,k=new RegExp("".concat(e,"=([^;]+);?")),I=_.match(k);return I?I[1]:""};function getOnlineH5Cookie(e,_,k){if("undefined"==typeof document)return k;var I=C();return R(I?_:e)||k}_.ej=R;function tryDecodeURIComponent(e){if(!e)return"";try{return decodeURIComponent(e)}catch(_){return e}}},51682:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.LOCALE_MAP_SITE=void 0;_.LOCALE_MAP_SITE={en_us:"EN",en_xx:"EN",ar_xx:"AR"}},68926:function(e,_,k){"use strict";_.FF=formatLocale,_.Md=function getLangFromLocale(e){return formatLocale(e,"aa-bb").split("-")[0]},_.$c=function getRuntimeType(){var e="undefined"!=typeof window;return{type:e?"browser":"node",isBrowser:e,isNode:!e}},_.PB=function getSiteByLocale(e){var _=formatLocale(e,"aa_bb");return I.LOCALE_MAP_SITE[_]||_.split("_")[1].toUpperCase()};var I=k(51682);function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}function includes(e,_){return e.indexOf(_)>-1}function formatLocale(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"aa-BB",k=includes(e,"-")?"-":"_",I=e.split(k),C=_slicedToArray(I,2),R=C[0],j=void 0===R?"en":R,B=C[1],H=void 0===B?"US":B;return _.replace("aa",j.toLowerCase()).replace("AA",j.toUpperCase()).replace("bb",H.toLowerCase()).replace("BB",H.toUpperCase())}},44850:function(e){var _=null,k="exposure",I="expitem",C=new Map,R="",j=500,B=null,ubtPush=function(e,_,k){void 0===k&&(k="exposure");try{"undefined"!=typeof window&&(window.UBT_API||(window.UBT_API=[]),window.UBT_API.push({type:"send",data:{type:k,key:e,data:_}}))}catch(e){}},observe=function(){try{_&&document.querySelectorAll("[data-".concat(k,"]")).forEach((function(e){_.observe(e)}))}catch(e){}},disconnect=function(){try{_&&(_.disconnect(),_=null),B&&clearInterval(B),C.clear()}catch(e){}};e.exports={init:function(e){try{var H=e.threshold||1,U=e.pageId;if(k=e.target||"exposure",I=e.targetItemKey||I,R=e.ubtKey,j=e.exposeTime||500,e.multiTrigger||!1,!R)return;if("number"!=typeof H||H<0||H>1)return;var V={threshold:H};disconnect(),B=setInterval((function(){C.forEach((function(e,_){if(Date.now()-e.sTime>=j&&!e.removed){var k=e.val,I="exposure";try{var B=JSON.parse(k);B.ubtKey?(R=B.ubtKey,k=B.data,I=B.type||"exposure"):k=B,U&&(k.page=U),ubtPush(R,k,I),C.set(_,{sTime:Date.now(),val:k,removed:!0})}catch(e){}}}))}),500),_=new IntersectionObserver((function(e,_){for(var B=0;B<e.length;B++){var V=e[B];if(V.intersectionRatio<0)return;var G=V.target,q=C.get(G);if(C.has(G)&&q.removed)_.unobserve(G),C.delete(G);else if(V.intersectionRatio>=H){if(V.isIntersecting&&!C.has(G)){var z=V.target.dataset&&V.target.dataset[k]||{};C.set(G,{sTime:Date.now(),val:z,removed:!1})}}else if(C.has(G)&&!V.isIntersecting)if(Date.now()-q.sTime>=j){var J=q.val,Q="exposure";try{var ee=JSON.parse(J);ee.ubtKey?(R=ee.ubtKey,J=ee.data,Q=ee.type||"exposure"):J=ee}catch(e){J={}}for(var te=V.target.querySelectorAll("[data-"+I+"]"),ne=0;ne<te.length;ne++)try{var re=te[ne],oe=re&&re.dataset&&re.dataset[I];z=re&&re.innerText||"";oe&&z&&(J[oe]=z)}catch(e){}U&&(J.page=U),ubtPush(R,J,Q),C.delete(G),_.unobserve(G)}else C.delete(G)}}),V),observe()}catch(e){}},observe:observe,disconnect:disconnect}},17735:function(e,_){"use strict";_.g_=void 0;_.g_=function(e){if(void 0===e&&(e=""),"undefined"==typeof navigator&&!e)return"Others";var _=e||navigator.userAgent,k="",I="Others";try{if(/MicroMessenger/i.test(_))I="WechatBrowser",_.indexOf("miniprogram")>-1&&(I="Wechat_MiniApp");else if(_.indexOf("toutiaomicroapp")>-1)I="Toutiao_MiniApp";else if(/(CtripWireless|sml_wireless|gs_wireless|we_wireless|TieyouWireless|CBP_Wireless)/i.test(_))I="CtripApp";else if(_.indexOf("mode-quickapp")>-1||/(hap|OPPO\/Hybrid)\/\d/i.test(_))I="Quick_App";else if(_.indexOf("miniprogram")>-1&&!(_.indexOf("micromessenger")>-1)||_.indexOf("aliapp")>-1&&(_.indexOf("uc")>-1||_.indexOf("quark")>-1)||_.indexOf("aliapp")>-1&&_.indexOf("amapclient")>-1)I="Ali_App";else if(/(swan\/)|baiduboxapp/.test(_))I="Baidu_App";else if(k=/(?:Chrome|CrMo|CriOS)\/([0-9.]*)/.exec(_)){I=(k[1]&&k[1].split(".")[0]||"")>=44?"Chrome_Browser>=44":"Chrome_Browser<44"}else/UBrowser|UCBrowser|UCWEB/.test(_)?I="UC_Browser":/Edge/.test(_)?I="Edge_Browser":/Firefox/.test(_)?I="Firefox_Browser":/Version[|\/]([\w.]+)(\s\w.+)?\s?Safari|like\sGecko\)\sMobile\/\w{3,}$/.test(_)?I="Safari_Browser":_.indexOf("rv:11")>1||_.indexOf("MSIE 10")>-1||_.indexOf("MSIE 9")>-1?I="IE":/_trainpal_/i.test(_)?I="TrainPalApp":/IBUCtrip|_Trip.com_/i.test(_)?I="TripApp":/CTRIPPER|_tripPal_CtripWireless/i.test(_)&&(I="Trippal")}catch(e){I="Others"}return I||"Others"},(0,_.g_)()},47360:function(e,_,k){"use strict";var I=k(95318);_.Z=void 0;var C=I(k(67294)),R=I(k(94184));k(11677);var j=function IdTag(e){var _=e.text,k=e.large,I=void 0!==k&&k,j=e.className,B=e.style;return C.default.createElement("div",{className:(0,R.default)("id-tag",j,{"id-tag_large":I}),style:B},C.default.createElement("span",{className:"id-tag_logo"}),C.default.createElement("span",{className:"id-tag_discount"},_))};_.Z=j},16234:function(e,_,k){"use strict";k.d(_,{Lf:function(){return Q},v4:function(){return re}});var I=k(87757),C=k.n(I),R=k(48926),j=k.n(R),B=k(59713),H=k.n(B),U=k(58714),V=k(55733),G=k(88263),q=k(19045),z=k(9676),J=k(8938),Q=function simpleValidateCheckDate(e){var _=e||{},k=_.checkIn,I=_.checkOut,C=_.timeOffset,R=_.minNights,j=void 0===R?1:R,B=_.maxNights,H=void 0===B?28:B,V=(0,U.J_)(k)?k:(0,z.pz)(k),G=(0,U.J_)(I)?I:(0,z.pz)(I),q=(0,U.hj)(C)?Number(C):null,Q=!1,ee=(0,J.SQ)(q),te=ee.date;if((0,U.hj)(C)){var ne=V?(0,J.e3)(te,V):null;(!ne||ne<0)&&(V=te,Q=!0),(!(ne=G?(0,J.e3)(V,G):null)||ne<j||ne>H)&&(G=(0,J.bU)(V,1).date,Q=!0)}return{today:te,todayStr:ee.dateStr,timeOffset:q||null,checkIn:V,checkInStr:(0,z._W)(V),checkOut:G,checkOutStr:(0,z._W)(G),nights:(0,J.e3)(V,G)||0,isCorrected:Q}},ee=function saveTimeOffset(e,_){var k=q.y7.get("cityTimeOffset")||{};k=Object.assign(k,H()({},e,_)),q.y7.setDirect("cityTimeOffset",k)},te=function(){var e=j()(C().mark((function _callee(e){var _,k;return C().wrap((function _callee$(I){for(;;)switch(I.prev=I.next){case 0:if(!V.C){I.next=7;break}if(k=q.y7.get("cityTimeOffset")||{},_=Number(k[e]),(0,U.hj)(_)){I.next=7;break}return _=void 0,I.next=7,(0,G.Z)({serverNum:"16708",url:"/CityTimeoffset",data:{cityId:e},silence:!0}).then((function(k){var I=k.data;(0,k.success)((function(){(0,U.hj)(I.Timeoffset)&&(_=I.Timeoffset,ee(e,_))}))})).catch((function(){}));case 7:return I.abrupt("return",_);case 8:case"end":return I.stop()}}),_callee)})));return function getTimeOffset(_){return e.apply(this,arguments)}}(),ne=function(){var e=j()(C().mark((function _callee2(e){var _,k,I,R,j,B,H;return C().wrap((function _callee2$(C){for(;;)switch(C.prev=C.next){case 0:if(k=(_=e||{}).checkIn,I=_.cityId,R=(e||{}).timeOffset,R=Number(R),j=(0,J.SQ)(R).date,B=!0,(H=k?(0,J.e3)(j,k):null)&&H>0&&(B=!1),(0,U.hj)(R)||!I){C.next=13;break}return C.next=10,te(I);case 10:R=C.sent,C.next=14;break;case 13:(0,U.hj)(R)&&I&&ee(I,R);case 14:return(0,U.hj)(R)||(R=(0,J.yc)()),C.abrupt("return",{needValidCheckIn:B,timeOffset:R||null});case 16:case"end":return C.stop()}}),_callee2)})));return function validTimeOffset(_){return e.apply(this,arguments)}}(),re=function(){var e=j()(C().mark((function _callee3(e){var _,k,I,R,j,B,H,V,G,q,Q,ee,te,re,oe,ie,ae,le,se,ce,ue,de;return C().wrap((function _callee3$(C){for(;;)switch(C.prev=C.next){case 0:return k=(_=e||{}).checkIn,I=_.checkOut,R=_.cityId,j=_.timeOffset,B=_.minNights,H=void 0===B?1:B,V=_.maxNights,G=void 0===V?28:V,q=_.addStep,Q=void 0===q?0:q,ee=(0,U.J_)(k)?k:(0,z.pz)(k),te=ee,re=(0,U.J_)(I)?I:(0,z.pz)(I),oe=re,C.next=7,ne({checkIn:ee,cityId:R,timeOffset:j});case 7:return ie=C.sent,ae=ie.needValidCheckIn,le=ie.timeOffset,se=(0,J.SQ)(le),ce=se.date,ue=null,ae&&(null===(ue=ee?(0,J.e3)(ce,ee):null)||ue<0)&&(ee=Q?(0,J.bU)(ce,Q).date:ce),(!(ue=re?(0,J.e3)(ee,re):null)||ue<H||ue>G)&&(re=(0,J.bU)(ee,1).date),de=!1,te&&te.getTime()===ee.getTime()&&oe&&oe.getTime()===re.getTime()||(de=!0),C.abrupt("return",{today:ce,todayStr:se.dateStr,timeOffset:le||null,checkIn:ee,checkInStr:(0,z._W)(ee),checkOut:re,checkOutStr:(0,z._W)(re),nights:(0,J.e3)(ee,re)||0,isCorrected:de});case 19:case"end":return C.stop()}}),_callee3)})));return function safeValidateCheckDate(_){return e.apply(this,arguments)}}()},55733:function(e,_,k){"use strict";k.d(_,{C:function(){return I}});var I="undefined"!=typeof window},58714:function(e,_,k){"use strict";k.d(_,{hj:function(){return C},J_:function(){return R}});k(50008);var I=function isType(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return function(e){return!!_.filter((function(_){return Object.prototype.toString.call(e)==="[object ".concat(_,"]")})).length}},C=(I("String"),I("Boolean"),I("Object"),I("Array"),I("Function","AsyncFunction"),I("Undefined"),function isNumber(e){return!(!I("Number")(e)||Number.isNaN(e))}),R=function isDate(e){return!(!I("Date")(e)||!Date.parse(e))}},8938:function(e,_,k){"use strict";k.d(_,{iT:function(){return R},yc:function(){return j},e3:function(){return B},gD:function(){return H},SQ:function(){return U},bU:function(){return V}});var I=k(76243),C=k(9676),R=function getLocalTimeZone(){return(new Date).getTimezoneOffset()/-60},j=function getLocalTimeOffset(){return-60*(new Date).getTimezoneOffset()},B=function computeDayStep(e,_){var k=(0,I.J_)(e)?e:(0,C.pz)(e);k&&(k=(0,C.fm)(k));var R=(0,I.J_)(_)?_:(0,C.pz)(_);return R&&(R=(0,C.fm)(R)),k&&R?Math.round((R.getTime()-k.getTime())/864e5):null},H=function computeTimeStep(e,_){var k=(0,I.J_)(e)?e:(0,C.pz)(e),R=(0,I.J_)(_)?_:(0,C.pz)(_);return k&&R?R.getTime()-k.getTime():null},U=function getLocalToday(e){var _=new Date;(0,I.hj)(e)||(e=-60*(new Date).getTimezoneOffset()),e*=1e3;var k=new Date(_.getTime()+(e+60*_.getTimezoneOffset()*1e3)),R=(0,C.fm)(k)||k;return{date:R,dateStr:(0,C._W)(R)}},V=function setDateByAdd(e,_){var k=(0,I.J_)(e)?e:(0,C.pz)(e)||new Date,R=new Date(k.getTime());return R.setDate(R.getDate()+_),{date:new Date(R),dateStr:(0,C._W)(R)}}},9676:function(e,_,k){"use strict";k.d(_,{pz:function(){return C},_W:function(){return R},fm:function(){return j}});var I=k(76243),C=function formatToDate(e){var _;if(!e&&!(0,I.hj)(e))return null;if((0,I.HD)(e)){if(/^\d{2}[\/-]\d{2}[\/-]\d{4}$/.test(e)||/^\d{4}[\/-]\d{2}[\/-]\d{2}$/.test(e))e=e.replace(/-/g,"/");else if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)&&!/^\d{4}[\/-]\d{2}[\/-]\d{2} \d{2}:\d{2}:\d{2}$/.test(e))return null}return _=new Date(e),(0,I.J_)(_)?_:null},R=function formatToYMDStr(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",k=(0,I.J_)(e)?e:C(e);if(k){var R=function formatNumber(e){return e<10?"0".concat(e):"".concat(e)},j=k.getFullYear(),B=R(k.getMonth()+1),H=R(k.getDate());return"".concat(j).concat(_).concat(B).concat(_).concat(H)}return""},j=function removeDateTime(e){var _=(0,I.J_)(e)?e:C(e);return _?new Date(_.getFullYear(),_.getMonth(),_.getDate()):null}},6729:function(e,_,k){"use strict";_.formatToYMDStr=void 0;var I=k(28065),C=function formatToDate(e){var _;if(!e&&!(0,I.isNumber)(e))return null;if((0,I.isString)(e)){if(/^\d{2}[\/-]\d{2}[\/-]\d{4}$/.test(e)||/^\d{4}[\/-]\d{2}[\/-]\d{2}$/.test(e))e=e.replace(/-/g,"/");else if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)&&!/^\d{4}[\/-]\d{2}[\/-]\d{2} \d{2}:\d{2}:\d{2}$/.test(e))return null}return _=new Date(e),(0,I.isDate)(_)?_:null};_.formatToYMDStr=function formatToYMDStr(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",k=(0,I.isDate)(e)?e:C(e);if(k){var R=function formatNumber(e){return e<10?"0".concat(e):"".concat(e)},j=k.getFullYear(),B=R(k.getMonth()+1),H=R(k.getDate());return"".concat(j).concat(_).concat(B).concat(_).concat(H)}return""}},61656:function(e,_,k){"use strict";var I=k(95318);_.ZP=_.iw=void 0;var C,R=I(k(67294));k(38894),_.iw=C,function(e){e.PC="online",e.H5="h5"}(C||(_.iw=C={}));var j="fb-msger-retain_",B=function FbMsger(e){var _=e.title,k=e.content,I=e.ctaInnerHtml,B=e.handleCloseClick,H=e.platform,U=void 0===H?C.H5:H,V=e.renderIcon;return R.default.createElement("div",{className:"".concat(j,"container")},V&&R.default.createElement("div",{className:"".concat(j,"close-btn ").concat(U===C.PC?"online":""),onClick:function onClick(){B&&B()}},V()),R.default.createElement("div",{className:"".concat(j,"header ").concat(U===C.H5?"h5":"online")}),R.default.createElement("div",{className:"".concat(j,"title ").concat(U===C.PC?"online":"")},_),R.default.createElement("div",{className:"".concat(j,"subtitle ").concat(U===C.PC?"online":"")},k),I&&R.default.createElement("div",{className:"".concat(j,"fbbody"),dangerouslySetInnerHTML:I}))};_.ZP=B},17945:function(e,_,k){"use strict";k.d(_,{Z:function(){return we}});var I=k(63038),C=k.n(I),R=k(67294),j=k.n(R),B=k(61513),H=k(87757),U=k.n(H),V=k(48926),G=k.n(V),q=k(7992),z={},J=function logDiffImg(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&e.match){var I=e.match(/\w_(\d+)_(\d+)/);I&&3===I.length&&(Number(I[1])>Number(_)||Number(I[2])>Number(k))&&(0,q.fU)({logKey:"img_load_diff",logValue:{url:e,width:_,height:k}})}};const Q=function fetchImg(e,_){return e&&_?z[e]?Promise.resolve({src:e,width:z[e].width,height:z[e].height}):new Promise((function(_,k){var I=new Image;I.src=e,I.onerror=function(e){k(e)},I.onload=function(){z[e]={width:I.width,height:I.height},_({src:e,width:I.width,height:I.height,naturalWidth:I.naturalWidth,naturalHeight:I.naturalHeight})}})):Promise.reject({})};var ee="PIC_LOADING",te="PIC_LOADED",ne="NO_PIC_LOADED";const re=function getImgFetchOrder(e){var _=[];return e.src&&_.push({type:te,url:e.src||""}),e.errorSrc&&_.push({type:"ERROR_PIC_LOADED",url:e.errorSrc||""}),e.noPictureMode&&_.push({type:"DEFAULT_PIC_LOADED",url:e.defaultSrc||""}),_};var oe=k(91374),ie=k(73935),ae=function getElementTop(e){if(!(e instanceof HTMLElement))return 0;for(var _=e.offsetTop||0;e=e.offsetParent;)_+=e.offsetTop||0;return _},le=function getElementLeft(e){if(!(e instanceof HTMLElement))return 0;for(var _=e.offsetLeft||0;e=e.offsetParent;)_+=e.offsetLeft||0;return _};function getBoundingClientRect(e){if(e.getBoundingClientRect)return e.getBoundingClientRect();var _=e.offsetWidth||0,k=e.offsetHeight||0,I=ae(e)-window.pageYOffset,C=le(e)-window.pageXOffset;return{top:I,right:C+_,bottom:I+k,left:C,width:_,height:k}}var se=function isVisibleAreaInGlobal(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=window.innerHeight||document.documentElement.clientHeight,I=window.innerWidth||document.documentElement.clientWidth,C=getBoundingClientRect(e);return C.top<=k+_&&C.bottom>=0&&C.left<=I+_&&C.right>=0},ce=function getHtmlDomElement(e){if(!e)return null;if(e instanceof HTMLElement)return e;if(null==e?void 0:e.current)return e.current;var _=null;try{return(_=(0,ie.findDOMNode)(e))instanceof HTMLElement?_:null}catch(e){return null}};const ue=function isVisibleArea(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,I=ce(e);if(!I||!I.offsetHeight&&!I.offsetWidth)return!1;var C=null===k?document.documentElement||document.body:ce(k),R=document.documentElement||document.body,j=!C||C===R;if(j)return se(I,_);if(null===C)return!0;var B=se(C),H=getBoundingClientRect(I),U=getBoundingClientRect(C),V=H.bottom+_-U.top>0&&U.bottom+_>H.top,G=H.right+_-U.left>0&&H.left<U.right;return B&&V&&G};function throttle(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,k=0,I=null;return function(){for(var C=arguments.length,R=new Array(C),j=0;j<C;j++)R[j]=arguments[j];var B=Date.now();B-k>=_||B<k?(k=B,e.apply(void 0,R)):(clearTimeout(I),I=setTimeout((function(){I=null,e.apply(void 0,R)}),_))}}function addEventListener(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",k=arguments.length>2?arguments[2]:void 0,I=arguments.length>3?arguments[3]:void 0,C=de(e);if(!C||!C.addEventListener)return null;var R=function remove(){C.removeEventListener(_,j,H)},j=function handleListener(e){H.once&&!B&&R(),k&&k(e)},B=iSupportedOptionsObject(),H=pe(I,B);return C.addEventListener(_,j,H),{remove:R}}var de=function getTarget(e){return e?e.addEventListener?e:ce(e):null},pe=function getOptions(e,_){return void 0===e?_?{capture:!1,passive:!0}:{capture:!1}:"boolean"==typeof e?_?{capture:e,passive:!0}:{capture:e}:(_||delete e.passive,_?Object.assign({},{capture:!1,passive:!0,once:!1},e):Object.assign({},{capture:!1,once:!1},e))};function iSupportedOptionsObject(){var e=!1,_=!1;try{var k=Object.defineProperties({},{passive:{get:function get(){e=!0}},once:{get:function get(){_=!0}}});window.addEventListener("click",(function(){}),k),window.removeEventListener("click",(function(){}),k)}catch(_){e=!1}return e&&_}k(50008);var he=function isType(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return function(e){return!!_.filter((function(_){return Object.prototype.toString.call(e)==="[object ".concat(_,"]")})).length}};he("String"),he("Boolean"),he("Object"),he("Array"),he("Function","AsyncFunction"),he("Undefined");function _setArray(e,_){_.length&&_.forEach((function(_){!function _setAll(e,_){if(!_)return;switch(function getType(e){var _=Object.prototype.toString.call(e).toLowerCase();return _.slice(8,_.length-1)}(_)){case"string":!function _setString(e,_){_.split(/\s+/).forEach((function(_){_&&(e[_]=!0)}))}(e,_);break;case"symbol":e[_.toString()]=!0;break;case"boolean":case"number":case"regexp":case"function":e[_]=!0;break;case"array":_setArray(e,_);break;case"object":!function _setObject(e,_){Object.keys(_).forEach((function(k){e[k]=!!_[k]}))}(e,_)}}(e,_)}))}const fe=function classNames(){for(var e=[],_={},k=arguments.length,I=new Array(k),C=0;C<k;C++)I[C]=arguments[C];return _setArray(_,I),Object.keys(_).forEach((function(k){_[k]&&e.push(k)})),e.join(" ")};var me=k(27907),ge="m-lazyImg",ve={isBg:!1,defaultSrc:(0,oe.isMobile)()?"//images3.tripcdn.com/hotel_h5_images/roomnopic_big.png":"//pic.tripcdn.com/common_v2/nophoto.png",bgColor:"#F0F2F5",bgImgSize:"cover",imgSize:"cover",bgImgPosition:"center",bgImgRepeat:"no-repeat",imgPosition:"center",offset:200,isOffLazyLoad:!1,noPictureMode:!0,ssr:!1},ye=function LazyImg(e){var _=e.isBg,k=e.src,I=e.bgColor,B=e.alt,H=e.offset,V=e.bgImgPosition,oe=e.bgImgSize,ie=e.imgSize,ae=e.imgPosition,le=e.isOffLazyLoad,se=e.scrollElement,ce=e.imgTip,de=e.className,pe=e.ssr,he=e.bgImgRepeat,ve=e.onSuccess,ye=e.onError,_e=e.lastEffectImg,we=e.defaultSrc,Ee=e.errorSrc,Se=(0,R.useRef)(null),Oe=!(!z[null!=k?k:""]&&!pe),Te=Oe?te:ee,ke=Oe?k:"",Ie=(0,R.useState)(ke),Ce=C()(Ie,2),Pe=Ce[0],Le=Ce[1],Ne=(0,R.useState)(Te),De=C()(Ne,2),Ae=De[0],Re=De[1],xe=(0,R.useMemo)((function(){return me.p.bind({ubtMapping:{logLazyImgLoad:function logLazyImgLoad(e){var _,k=e.url,I=e.status,C=e.reason,R=e.defaultImage,j=e.width,B=e.height,H=e.naturalHeight,U=e.naturalWidth;return{actionType:"load",logKey:"ibu_htl_lazyImage_load",logValue:{url:k,status:I,defaultImage:R,failReason:C,timeStamp:null==C?void 0:C.timeStamp,href:null===(_=location)||void 0===_?void 0:_.href,width:j,height:B,naturalHeight:H,naturalWidth:U}}}}})}),[]);(0,R.useEffect)((function(){var e=null;if(Oe&&k)Re(te),Le(k),ve&&ve(z[k]),pe&&Be();else if(le)Be();else{je(),ue(Se,H,se)?Be():e=function exposure(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"scroll",R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,j=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(!_)return!1;var B=document.documentElement||document.body,H=!I||I===B||I===window,U=H?B:I,V=H?window:I,G=function handleEvent(I){ue(_,k,U)&&q&&(q.remove(),q=null,z&&z.remove(),z=null,e&&e(I))},q=addEventListener(V,C,throttle(G,R),{capture:!1,once:!1}),z=null;return j&&!H&&(z=addEventListener(window,C,throttle(G,R),{capture:!1,once:!1})),q?{remove:function remove(){z&&z.remove(),q&&q.remove()}}:null}(Be,Se,H,se)}return function(){e&&e.remove()}}),[k]);var je=function resetStatus(){Pe&&Pe!==e.src&&(Re(ee),Le(_e||""))},Be=function(){var _=G()(U().mark((function _callee(){var _,I,C,R,j,B,H,V,G,z,oe,ie;return U().wrap((function _callee$(ae){for(;;)switch(ae.prev=ae.next){case 0:if(Se&&Se.current){ae.next=2;break}return ae.abrupt("return");case 2:_=re(e),C=ee,R=null,j=U().mark((function _loop(e){var j,B;return U().wrap((function _loop$(H){for(;;)switch(H.prev=H.next){case 0:if(B=_[e],Se){H.next=3;break}return H.abrupt("return","break");case 3:return H.next=5,Q(B.url,Se.current).catch((function(e){B.type===te&&((0,q.fU)({actionType:"load",logKey:"load_img_failed",logValue:{src:k,reason:e}}),xe("logLazyImgLoad",{url:k,status:"error",reason:e,defaultImage:we||Ee}),ye&&ye(e))}));case 5:if(R=H.sent,!(I=(null===(j=R)||void 0===j?void 0:j.src)||"")){H.next=10;break}return C=B.type,H.abrupt("return","break");case 10:case"end":return H.stop()}}),_loop)})),B=0;case 7:if(!(B<_.length)){ae.next=15;break}return ae.delegateYield(j(B),"t0",9);case 9:if("break"!==ae.t0){ae.next=12;break}return ae.abrupt("break",15);case 12:B++,ae.next=7;break;case 15:if(Se&&Se.current){ae.next=17;break}return ae.abrupt("return");case 17:I?(Le(I),Re(C)):Re(ne),C===te&&(J(I,null===(H=R)||void 0===H?void 0:H.width,null===(V=R)||void 0===V?void 0:V.height),xe("logLazyImgLoad",{url:k,status:"success",defaultImage:we||Ee,width:null===(G=R)||void 0===G?void 0:G.width,height:null===(z=R)||void 0===z?void 0:z.height,naturalWidth:null===(oe=R)||void 0===oe?void 0:oe.naturalWidth,naturalHeight:null===(ie=R)||void 0===ie?void 0:ie.naturalHeight}),ve&&ve(R));case 19:case"end":return ae.stop()}}),_callee)})));return function loadImg(){return _.apply(this,arguments)}}(),Me=be(e.width),Fe=be(e.height),He=_||Ae===ee&&!_e||Ae===ne,Ke=fe(ge,de);return j().createElement("div",{ref:Se,style:{width:Me,height:Fe},className:Ke},He?function renderBackgroundView(){return j().createElement("div",{className:"".concat(ge,"__bg"),style:{width:Me,height:Fe,backgroundColor:I,backgroundSize:oe,backgroundPosition:V,backgroundRepeat:he,backgroundImage:Pe?"url(".concat(Pe,")"):""}})}():function renderImgView(){return j().createElement("img",{className:"".concat(ge,"__img"),style:{width:Me,height:Fe,objectFit:ie,objectPosition:ae,backgroundColor:I},src:Pe||"",alt:B})}(),ce&&j().createElement("span",{className:"img-tip"},ce))},be=function getSideLength(e){return e?function isNumber(e){return!(!he("Number")(e)||Number.isNaN(e))}(e)?"".concat(e,"px"):e:"100%"};ye.defaultProps=ve;const _e=ye;const we=function LazyImgStepList(e){var _=e.isBg,k=e.style,I=e.srcList,H=void 0===I?[]:I,U=e.errorSrc,V=e.defaultSrc,G=e.bgColor,q=e.alt,z=e.offset,J=e.imgSize,Q=e.bgImgSize,ee=e.imgPosition,te=e.bgImgPosition,ne=e.bgImgRepeat,re=e.width,oe=e.height,ie=e.scrollElement,ae=e.isOffLazyLoad,le=e.noPictureMode,se=e.imgTip,ce=e.ssr,ue=e.onSuccess,de=void 0===ue?function(){}:ue,pe=e.onError,he=e.className,fe=(0,R.useState)(H[0]||""),me=C()(fe,2),ge=me[0],ve=me[1],ye=(0,R.useState)(0),be=C()(ye,2),we=be[0],Ee=be[1],Se=(0,R.useState)(""),Oe=C()(Se,2),Te=Oe[0],ke=Oe[1];return j().createElement(_e,{isBg:_,style:k,src:ge,errorSrc:U,defaultSrc:V,bgColor:G,alt:q,offset:z,imgSize:J,bgImgSize:Q,imgPosition:ee,bgImgPosition:te,bgImgRepeat:ne,width:re,height:oe,scrollElement:ie,isOffLazyLoad:ae&&!we,noPictureMode:le,imgTip:se,ssr:ce&&!we,onSuccess:function successLoaded(e){var _=we;B.C&&H[_+1]&&(Ee(_+1),ke(H[_]||""),ve(H[_+1]||"")),de(e)},onError:pe,className:he,lastEffectImg:Te})}},61513:function(e,_,k){"use strict";k.d(_,{C:function(){return I}});var I="undefined"!=typeof window},18586:function(){},91374:function(e,_,k){"use strict";k.d(_,{isMobile:function(){return C.tq}});var I=k(18586);k.o(I,"isMobile")&&k.d(_,{isMobile:function(){return I.isMobile}});var C=k(91983)},91983:function(e,_,k){"use strict";k.d(_,{tq:function(){return R}});var I=k(61513),C=function getUserAgent(e){return e||I.C?e?e.request.header["user-agent"]||"":navigator.userAgent:""},R=function isMobile(e){if(!e&&!I.C)return!1;var _=e?e.url:location.pathname;return"/m"===_||0===_.indexOf("/m/")||!(!function isAndroid(e){var _=C(e);return/(Android).*?([\d.]+)/i.test(_)||/(Adr)\s+([\d.]+)/i.test(_)}(e)&&!function isIOS(e){var _=C(e);return/(iPhone\sOS)\s([\d_]+)|(iPhone).*?(FxiOS)/i.test(_)}(e))}},16353:function(e,_,k){"use strict";k.d(_,{Z:function(){return se}});var I=k(87757),C=k.n(I),R=k(48926),j=k.n(R),B=k(63038),H=k.n(B),U=k(67294),V=k.n(U),G=k(38739),q=k(2746),z=k(56672),J=k(4750),Q=k(25178),ee=k(37026),te=k(95783),ne=k(27907),re=k(7992),oe="m-lazyImg",ie={isBg:!1,defaultSrc:(0,z.isMobile)()?"//images3.tripcdn.com/hotel_h5_images/roomnopic_big.png":"//pic.tripcdn.com/common_v2/nophoto.png",bgColor:"#F0F2F5",bgImgSize:"cover",imgSize:"cover",bgImgPosition:"center",bgImgRepeat:"no-repeat",imgPosition:"center",offset:200,isOffLazyLoad:!1,noPictureMode:!0,ssr:!1},ae=function LazyImg(e){var _=e.isBg,k=e.src,I=e.bgColor,R=e.alt,B=e.offset,z=e.bgImgPosition,te=e.bgImgSize,ie=e.imgSize,ae=e.imgPosition,se=e.isOffLazyLoad,ce=e.scrollElement,ue=e.imgTip,de=e.className,pe=e.ssr,he=e.bgImgRepeat,fe=e.onSuccess,me=e.onError,ge=e.lastEffectImg,ve=e.defaultSrc,ye=e.errorSrc,be=(0,U.useRef)(null),_e=!(!G.M2[null!=k?k:""]&&!pe),we=_e?q.hV:q.GU,Ee=_e?k:"",Se=(0,U.useState)(Ee),Oe=H()(Se,2),Te=Oe[0],ke=Oe[1],Ie=(0,U.useState)(we),Ce=H()(Ie,2),Pe=Ce[0],Le=Ce[1],Ne=(0,U.useMemo)((function(){return ne.p.bind({ubtMapping:{logLazyImgLoad:function logLazyImgLoad(e){var _,k=e.url,I=e.status,C=e.reason,R=e.defaultImage,j=e.width,B=e.height,H=e.naturalHeight,U=e.naturalWidth;return{actionType:"load",logKey:"ibu_htl_lazyImage_load",logValue:{url:k,status:I,defaultImage:R,failReason:C,timeStamp:null==C?void 0:C.timeStamp,href:null===(_=location)||void 0===_?void 0:_.href,width:j,height:B,naturalHeight:H,naturalWidth:U}}}}})}),[]);(0,U.useEffect)((function(){var e=null;if(_e&&k)Le(q.hV),ke(k),!pe&&fe&&fe(G.M2[k]),pe&&Ae();else if(se)Ae();else{De(),(0,J.Z)(be,B,ce)?Ae():e=(0,Q.Z)(Ae,be,B,ce)}return function(){e&&e.remove()}}),[k]);var De=function resetStatus(){Te&&Te!==e.src&&(Le(q.GU),ke(ge||""))},Ae=function(){var _=j()(C().mark((function _callee(){var _,I,R,j,B,H,U,V,z,J,Q,ee;return C().wrap((function _callee$(te){for(;;)switch(te.prev=te.next){case 0:if(be&&be.current){te.next=2;break}return te.abrupt("return");case 2:_=(0,q.ZP)(e),R=q.GU,j=null,B=C().mark((function _loop(e){var B,H;return C().wrap((function _loop$(C){for(;;)switch(C.prev=C.next){case 0:if(H=_[e],be){C.next=3;break}return C.abrupt("return","break");case 3:return C.next=5,(0,G.ZP)(H.url,be.current).catch((function(e){H.type===q.hV&&((0,re.fU)({actionType:"load",logKey:"load_img_failed",logValue:{src:k,reason:e}}),Ne("logLazyImgLoad",{url:k,status:"error",reason:e,defaultImage:ve||ye}),me&&me(e))}));case 5:if(j=C.sent,!(I=(null===(B=j)||void 0===B?void 0:B.src)||"")){C.next=10;break}return R=H.type,C.abrupt("return","break");case 10:case"end":return C.stop()}}),_loop)})),H=0;case 7:if(!(H<_.length)){te.next=15;break}return te.delegateYield(B(H),"t0",9);case 9:if("break"!==te.t0){te.next=12;break}return te.abrupt("break",15);case 12:H++,te.next=7;break;case 15:if(be&&be.current){te.next=17;break}return te.abrupt("return");case 17:I?(ke(I),Le(R)):Le(q.AZ),R===q.hV&&((0,G.jN)(I,null===(U=j)||void 0===U?void 0:U.width,null===(V=j)||void 0===V?void 0:V.height),Ne("logLazyImgLoad",{url:k,status:"success",defaultImage:ve||ye,width:null===(z=j)||void 0===z?void 0:z.width,height:null===(J=j)||void 0===J?void 0:J.height,naturalWidth:null===(Q=j)||void 0===Q?void 0:Q.naturalWidth,naturalHeight:null===(ee=j)||void 0===ee?void 0:ee.naturalHeight}),fe&&fe(j));case 19:case"end":return te.stop()}}),_callee)})));return function loadImg(){return _.apply(this,arguments)}}(),Re=le(e.width),xe=le(e.height),je=_||Pe===q.GU&&!ge||Pe===q.AZ,Be=(0,ee.Z)(oe,de);return V().createElement("div",{ref:be,style:{width:Re,height:xe},className:Be},je?function renderBackgroundView(){return V().createElement("div",{className:"".concat(oe,"__bg"),style:{width:Re,height:xe,backgroundColor:I,backgroundSize:te,backgroundPosition:z,backgroundRepeat:he,backgroundImage:Te?"url(".concat(Te,")"):""}})}():function renderImgView(){return V().createElement("img",{className:"".concat(oe,"__img"),style:{width:Re,height:xe,objectFit:ie,objectPosition:ae,backgroundColor:I},src:Te||"",alt:R})}(),ue&&V().createElement("span",{className:"img-tip"},ue))},le=function getSideLength(e){return e?(0,te.hj)(e)?"".concat(e,"px"):e:"100%"};ae.defaultProps=ie;const se=ae},38739:function(e,_,k){"use strict";k.d(_,{M2:function(){return C},jN:function(){return R},ZP:function(){return j}});var I=k(7992),C={},R=function logDiffImg(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&e.match){var C=e.match(/\w_(\d+)_(\d+)/);C&&3===C.length&&(Number(C[1])>Number(_)||Number(C[2])>Number(k))&&(0,I.fU)({logKey:"img_load_diff",logValue:{url:e,width:_,height:k}})}};const j=function fetchImg(e,_){return e&&_?C[e]?Promise.resolve({src:e,width:C[e].width,height:C[e].height}):new Promise((function(_,k){var I=new Image;I.src=e,I.onerror=function(e){k(e)},I.onload=function(){C[e]={width:I.width,height:I.height},_({src:e,width:I.width,height:I.height,naturalWidth:I.naturalWidth,naturalHeight:I.naturalHeight})}})):Promise.reject({})}},2746:function(e,_,k){"use strict";k.d(_,{GU:function(){return I},hV:function(){return C},AZ:function(){return R},ZP:function(){return j}});var I="PIC_LOADING",C="PIC_LOADED",R="NO_PIC_LOADED";const j=function getImgFetchOrder(e){var _=[];return e.src&&_.push({type:C,url:e.src||""}),e.errorSrc&&_.push({type:"ERROR_PIC_LOADED",url:e.errorSrc||""}),e.noPictureMode&&_.push({type:"DEFAULT_PIC_LOADED",url:e.defaultSrc||""}),_}},79164:function(e,_,k){"use strict";k.d(_,{Z:function(){return addEventListener}});var I=k(4750);function addEventListener(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",k=arguments.length>2?arguments[2]:void 0,I=arguments.length>3?arguments[3]:void 0,j=C(e);if(!j||!j.addEventListener)return null;var B=function remove(){j.removeEventListener(_,H,V)},H=function handleListener(e){V.once&&!U&&B(),k&&k(e)},U=iSupportedOptionsObject(),V=R(I,U);return j.addEventListener(_,H,V),{remove:B}}var C=function getTarget(e){return e?e.addEventListener?e:(0,I.Y)(e):null},R=function getOptions(e,_){return void 0===e?_?{capture:!1,passive:!0}:{capture:!1}:"boolean"==typeof e?_?{capture:e,passive:!0}:{capture:e}:(_||delete e.passive,_?Object.assign({},{capture:!1,passive:!0,once:!1},e):Object.assign({},{capture:!1,once:!1},e))};function iSupportedOptionsObject(){var e=!1,_=!1;try{var k=Object.defineProperties({},{passive:{get:function get(){e=!0}},once:{get:function get(){_=!0}}});window.addEventListener("click",(function(){}),k),window.removeEventListener("click",(function(){}),k)}catch(_){e=!1}return e&&_}},37026:function(e,_,k){"use strict";k.d(_,{Z:function(){return C}});var I=k(95783);function _setArray(e,_){_.length&&_.forEach((function(_){!function _setAll(e,_){if(!_)return;switch((0,I.oL)(_)){case"string":!function _setString(e,_){_.split(/\s+/).forEach((function(_){_&&(e[_]=!0)}))}(e,_);break;case"symbol":e[_.toString()]=!0;break;case"boolean":case"number":case"regexp":case"function":e[_]=!0;break;case"array":_setArray(e,_);break;case"object":!function _setObject(e,_){Object.keys(_).forEach((function(k){e[k]=!!_[k]}))}(e,_)}}(e,_)}))}const C=function classNames(){for(var e=[],_={},k=arguments.length,I=new Array(k),C=0;C<k;C++)I[C]=arguments[C];return _setArray(_,I),Object.keys(_).forEach((function(k){_[k]&&e.push(k)})),e.join(" ")}},33677:function(e,_,k){"use strict";k.d(_,{C:function(){return I}});var I="undefined"!=typeof window},86099:function(){},4750:function(e,_,k){"use strict";k.d(_,{Y:function(){return j},Z:function(){return B}});var I=k(73935),C=k(85933),R=function isVisibleAreaInGlobal(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=window.innerHeight||document.documentElement.clientHeight,I=window.innerWidth||document.documentElement.clientWidth,R=(0,C.Z)(e);return R.top<=k+_&&R.bottom>=0&&R.left<=I+_&&R.right>=0},j=function getHtmlDomElement(e){if(!e)return null;if(e instanceof HTMLElement)return e;if(null==e?void 0:e.current)return e.current;var _=null;try{return(_=(0,I.findDOMNode)(e))instanceof HTMLElement?_:null}catch(e){return null}};const B=function isVisibleArea(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,I=j(e);if(!I||!I.offsetHeight&&!I.offsetWidth)return!1;var B=null===k?document.documentElement||document.body:j(k),H=document.documentElement||document.body,U=!B||B===H;if(U)return R(I,_);if(null===B)return!0;var V=R(B),G=(0,C.Z)(I),q=(0,C.Z)(B),z=G.bottom+_-q.top>0&&q.bottom+_>G.top,J=G.right+_-q.left>0&&G.left<q.right;return V&&z&&J}},1645:function(e,_,k){"use strict";k.d(_,{U4:function(){return I},fJ:function(){return C}});var I=function getElementTop(e){if(!(e instanceof HTMLElement))return 0;for(var _=e.offsetTop||0;e=e.offsetParent;)_+=e.offsetTop||0;return _},C=function getElementLeft(e){if(!(e instanceof HTMLElement))return 0;for(var _=e.offsetLeft||0;e=e.offsetParent;)_+=e.offsetLeft||0;return _}},25178:function(e,_,k){"use strict";k.d(_,{Z:function(){return exposure}});var I=k(31766),C=k(4750),R=k(79164);function exposure(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"scroll",H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,U=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(!_)return!1;var V=document.documentElement||document.body,G=!j||j===V||j===window,q=G?V:j,z=G?window:j,J=function handleEvent(I){(0,C.Z)(_,k,q)&&Q&&(Q.remove(),Q=null,ee&&ee.remove(),ee=null,e&&e(I))},Q=(0,R.Z)(z,B,(0,I.Z)(J,H),{capture:!1,once:!1}),ee=null;return U&&!G&&(ee=(0,R.Z)(window,B,(0,I.Z)(J,H),{capture:!1,once:!1})),Q?{remove:function remove(){ee&&ee.remove(),Q&&Q.remove()}}:null}},85933:function(e,_,k){"use strict";k.d(_,{Z:function(){return getBoundingClientRect}});var I=k(1645);function getBoundingClientRect(e){if(e.getBoundingClientRect)return e.getBoundingClientRect();var _=e.offsetWidth||0,k=e.offsetHeight||0,C=(0,I.U4)(e)-window.pageYOffset,R=(0,I.fJ)(e)-window.pageXOffset;return{top:C,right:R+_,bottom:C+k,left:R,width:_,height:k}}},56672:function(e,_,k){"use strict";k.d(_,{isMobile:function(){return C.tq}});var I=k(86099);k.o(I,"isMobile")&&k.d(_,{isMobile:function(){return I.isMobile}});var C=k(52899)},52899:function(e,_,k){"use strict";k.d(_,{tq:function(){return R}});var I=k(33677),C=function getUserAgent(e){return e||I.C?e?e.request.header["user-agent"]||"":navigator.userAgent:""},R=function isMobile(e){if(!e&&!I.C)return!1;var _=e?e.url:location.pathname;return"/m"===_||0===_.indexOf("/m/")||!(!function isAndroid(e){var _=C(e);return/(Android).*?([\d.]+)/i.test(_)||/(Adr)\s+([\d.]+)/i.test(_)}(e)&&!function isIOS(e){var _=C(e);return/(iPhone\sOS)\s([\d_]+)|(iPhone).*?(FxiOS)/i.test(_)}(e))}},31766:function(e,_,k){"use strict";function throttle(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,k=0,I=null;return function(){for(var C=arguments.length,R=new Array(C),j=0;j<C;j++)R[j]=arguments[j];var B=Date.now();B-k>=_||B<k?(k=B,e.apply(void 0,R)):(clearTimeout(I),I=setTimeout((function(){I=null,e.apply(void 0,R)}),_))}}k.d(_,{Z:function(){return throttle}})},95783:function(e,_,k){"use strict";k.d(_,{hj:function(){return C},oL:function(){return R}});k(50008);var I=function isType(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return function(e){return!!_.filter((function(_){return Object.prototype.toString.call(e)==="[object ".concat(_,"]")})).length}},C=(I("String"),I("Boolean"),I("Object"),I("Array"),I("Function","AsyncFunction"),I("Undefined"),function isNumber(e){return!(!I("Number")(e)||Number.isNaN(e))}),R=function getType(e){var _=Object.prototype.toString.call(e).toLowerCase();return _.slice(8,_.length-1)}},93947:function(e,_,k){"use strict";k.d(_,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var I=k(48385),C=k(76243);const __WEBPACK_DEFAULT_EXPORT__=function(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},R=(0,I.$)(k),j=k.digit,B=k.currencyFormatCustomized,H=k.numberFormatCustomized,U=k.zeroNeedCurrency,V=void 0!==U&&U;return!R||!_&&!V||isNaN(_)?_:(_=Number(_),(0,C.hj)(j)?R.currencyString(_,e,!0,0,j,{currencyFormatCustomized:B,numberFormatCustomized:H}):R.currencyString(_,e,!0,void 0,void 0,{currencyFormatCustomized:B,numberFormatCustomized:H}))}},91899:function(e,_,k){"use strict";k.d(_,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var I=k(40567),C=k(76243),R=k(48385),j=k(91116),B=function getDateL10n(e){if(I.C&&window.i18n_6002)return new j.b(window.i18n_6002);if(e){var _=(0,R.K)(e);return e.req.shark.DateTimeFormat(_)}};const __WEBPACK_DEFAULT_EXPORT__=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mdShortString",_=arguments.length>1?arguments[1]:void 0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=B(k.ctx);return(0,C.HD)(_)&&(_=_.replace(/-/g,"/")),I?I[e](_):""}},56857:function(e,_,k){"use strict";k.d(_,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var I=k(76243),C=k(48385);const __WEBPACK_DEFAULT_EXPORT__=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=(0,C.$)(_);if(!k||isNaN(e))return e;e=Number(e);var R=_.short?"shortDecimalString":"decimalString";return(0,I.hj)(_.digit)?k[R](e,!0,_.digitMin||0,_.digit):k[R](e)}},48385:function(e,_,k){"use strict";k.d(_,{K:function(){return j},$:function(){return B}});var I=k(47419),C=k(40567),R=k(70079),j=function getLocale(e){return(I.default.getByKey("cargo",e)||{locale:"en-us"}).locale.toUpperCase().replace("_","-")},B=function getNumberL10n(e){var _=e.ctx;if(!C.C&&!_)return!1;var k=e.locale;return k=k||j(_),!(!_&&!C.C)&&(C.C&&window.i18n_6002?new R.e(window.i18n_6002):_&&_.req.shark.NumberFormat(k)||"")}},26212:function(e,_,k){"use strict";k.d(_,{ut:function(){return H}});var I=k(9676),C=k(47669),R=["hotelid","hotel"],j=["checkin","startdate","ci","checkout","depdate","co"],B=k(59538),H=function getDetailUrl(e){var _=e.data,k=e.style,C=e.platform,H=Object.keys(_||{}),V={},G="S"===k||"SW"===k,q={};if(!H.find((function(e){return-1!==R.indexOf(e.toLowerCase())})))throw new Error("HotelId is required.");H.forEach((function(e){var k=e.toLowerCase();if(j.indexOf(k)>-1){var C=(0,I._W)(String(_[e]),"-");C&&(V[e]=C)}else"cityenname".indexOf(k)>-1?q.cityEnName=_[e]:"hotelenname".indexOf(k)>-1?q.hotelEnName=_[e]:R.indexOf(k)>-1?(q.hotelId=_[e],V[e]=G?void 0:_[e]):V[e]=_[e]}));var z=q.hotelId,J=q.cityEnName,Q=q.hotelEnName;!(z&&J&&Q)&&G&&(V.hotelId=q.hotelId);var ee=U(q,k,C);return(0,B.mX)(ee,(0,B.Pz)(V))},U=function getDetailBaseUrl(e,_,k){var I=e||{},R=I.hotelId,j=I.hotelEnName,B=I.cityEnName,H=!(R&&B&&j),U="h5"===String(k).toLowerCase()||(0,C.isMobile)()&&!(0,C.isCT)()?"/m/hotels":"/hotels",V="",G=_||"D";switch("S"===G&&H&&(G="D"),"SW"===G&&H&&(G="DW"),"SW"!==G&&"DW"!==G||(U="/m/hotels"),G){case"S":V="/".concat(B,"-hotel-detail-").concat(R,"/").concat(j,"/");break;case"D":V="/detail/";break;case"SW":V="/w/".concat(B,"-hotel-detail-").concat(R,"/").concat(j,"/");break;case"DW":V="/w/detail/"}return"".concat(U).concat(V)}},8846:function(e,_,k){"use strict";k.d(_,{getDetailUrl:function(){return C.ut}});var I=k(90662);k.o(I,"SCENCE")&&k.d(_,{SCENCE:function(){return I.SCENCE}}),k.o(I,"getDetailSeoUrlFormList")&&k.d(_,{getDetailSeoUrlFormList:function(){return I.getDetailSeoUrlFormList}}),k.o(I,"getDetailUrl")&&k.d(_,{getDetailUrl:function(){return I.getDetailUrl}}),k.o(I,"getSeoUrl")&&k.d(_,{getSeoUrl:function(){return I.getSeoUrl}});var C=k(26212)},90662:function(){},95528:function(e,_,k){"use strict";k.d(_,{SCENCE:function(){return C.lk},getDetailSeoUrlFormList:function(){return C.ZE},getSeoUrl:function(){return C.vX}});var I=k(8846);k.o(I,"SCENCE")&&k.d(_,{SCENCE:function(){return I.SCENCE}}),k.o(I,"getDetailSeoUrlFormList")&&k.d(_,{getDetailSeoUrlFormList:function(){return I.getDetailSeoUrlFormList}}),k.o(I,"getDetailUrl")&&k.d(_,{getDetailUrl:function(){return I.getDetailUrl}}),k.o(I,"getSeoUrl")&&k.d(_,{getSeoUrl:function(){return I.getSeoUrl}});var C=k(59538);k.o(C,"getDetailUrl")&&k.d(_,{getDetailUrl:function(){return C.getDetailUrl}})},82464:function(e,_,k){"use strict";k.d(_,{l:function(){return I}});var I={LIST_SINGLE:1,LIST_POI:2,HOTEL_DETAIL:3,LIST_CITY:4}},52242:function(e,_,k){"use strict";k.d(_,{vX:function(){return J},ZE:function(){return ee}});var I=k(87757),C=k.n(I),R=k(48926),j=k.n(R),B=k(59713),H=k.n(B),U=k(88263),V=k(55283),G=k(82464);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){H()(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}var q={},z=function saveUrlListToCache(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.C;if(_&&e){var k=e.scence,I=e.urlList,C=I.reduce((function(e,_){return _objectSpread(_objectSpread({},e),{},H()({},_.id,_.url))}),{});return q[k]=q[k]?_objectSpread(_objectSpread({},q[k]),C):_objectSpread({},C),q}},J=function(){var e=j()(C().mark((function _callee(e,_,k){var I,R,j,B,H,V,G;return C().wrap((function _callee$(C){for(;;)switch(C.prev=C.next){case 0:return I=Q(e),C.prev=1,C.next=4,(0,U.Z)({serverNum:"16017",url:"/getHotelSeoUrl",data:I,silence:!0,seo:!0,ctx:k});case 4:if(R=C.sent,!k){C.next=11;break}return j=R.urlList||[],_&&_(j),C.abrupt("return",j);case 11:return H=(B=R).data,V=B.success,G=(null==H?void 0:H.urlList)||[],V((function(){z(H),_&&_(G)})),C.abrupt("return",G);case 15:C.next=19;break;case 17:C.prev=17,C.t0=C.catch(1);case 19:case"end":return C.stop()}}),_callee,null,[[1,17]])})));return function getSeoUrl(_,k,I){return e.apply(this,arguments)}}(),Q=function getRequestParam(e){if(e.hotelList||e.cityId||e.poiList)return e;var _=e.dataList,k=e.scence,I=[],C=[],R=[];return(_||[]).map((function(e){k==G.l.HOTEL_DETAIL?I.push({hotelId:e.hotelId,hotelName:e.hotelEname}):k==G.l.LIST_POI?R.push({optionId:e.optionId,optionName:e.optionName}):k==G.l.LIST_SINGLE&&R.push({optionId:e.hotelId}),k!=G.l.HOTEL_DETAIL&&C.push(e.cityId)})),{scence:k,hotelList:I,cityId:C,poiList:R}},ee=function getDetailSeoUrlFormList(e,_){if(!e)return"";if(_){var k=_.find((function(_){return"".concat(e)==="".concat(_.id)}));return(null==k?void 0:k.url)||""}var I=q[G.l.HOTEL_DETAIL];return(null==I?void 0:I[e])||""}},59538:function(e,_,k){"use strict";k.d(_,{ZE:function(){return I.ZE},vX:function(){return I.vX},lk:function(){return C.l},Pz:function(){return j},mX:function(){return B}});var I=k(52242),C=k(82464),R=k(44490);k.o(R,"getDetailUrl")&&k.d(_,{getDetailUrl:function(){return R.getDetailUrl}});var j=function stringify(e){var _="";return Object.keys(e).forEach((function(k){void 0!==e[k]&&(_+="".concat(k,"=").concat(e[k],"&"))})),"&"===_[_.length-1]&&(_=_.substr(0,_.length-1)),_},B=function concatBaseUrlWithParams(e,_){var k=e.slice(-1);return"?"===k||"&"===k?"".concat(e).concat(_):-1===e.indexOf("?")?"".concat(e).concat("/"!==k?"/":"","?").concat(_):e.indexOf("?")>-1&&"&"!==k?"".concat(e,"&").concat(_):"".concat(e)}},44490:function(){},55283:function(e,_,k){"use strict";k.d(_,{C:function(){return I}});var I="undefined"!=typeof window},14081:function(){},47669:function(e,_,k){"use strict";k.d(_,{isCT:function(){return C.Vk},isMobile:function(){return C.tq}});var I=k(14081);k.o(I,"isCT")&&k.d(_,{isCT:function(){return I.isCT}}),k.o(I,"isMobile")&&k.d(_,{isMobile:function(){return I.isMobile}});var C=k(63003)},63003:function(e,_,k){"use strict";k.d(_,{tq:function(){return R},Vk:function(){return j}});var I=k(55283),C=function getUserAgent(e){return e||I.C?e?e.request.header["user-agent"]||"":navigator.userAgent:""},R=function isMobile(e){if(!e&&!I.C)return!1;var _=e?e.url:location.pathname;return"/m"===_||0===_.indexOf("/m/")||!(!function isAndroid(e){var _=C(e);return/(Android).*?([\d.]+)/i.test(_)||/(Adr)\s+([\d.]+)/i.test(_)}(e)&&!function isIOS(e){var _=C(e);return/(iPhone\sOS)\s([\d_]+)|(iPhone).*?(FxiOS)/i.test(_)}(e))},j=function isCT(e){if(!e&&!I.C)return!1;var _=I.C?window.location.hostname||"":e&&e.request&&e.request.hostname||"";return/\bctrip.com.?$|\bctripcorp.com.?$/i.test(_)}},55878:function(e,_,k){"use strict";k.d(_,{Z:function(){return addEventListener}});var I=k(21015);function addEventListener(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",k=arguments.length>2?arguments[2]:void 0,I=arguments.length>3?arguments[3]:void 0,j=C(e);if(!j||!j.addEventListener)return null;var B=function remove(){j.removeEventListener(_,H,V)},H=function handleListener(e){V.once&&!U&&B(),k&&k(e)},U=iSupportedOptionsObject(),V=R(I,U);return j.addEventListener(_,H,V),{remove:B}}var C=function getTarget(e){return e?e.addEventListener?e:(0,I.Y)(e):null},R=function getOptions(e,_){return void 0===e?_?{capture:!1,passive:!0}:{capture:!1}:"boolean"==typeof e?_?{capture:e,passive:!0}:{capture:e}:(_||delete e.passive,_?Object.assign({},{capture:!1,passive:!0,once:!1},e):Object.assign({},{capture:!1,once:!1},e))};function iSupportedOptionsObject(){var e=!1,_=!1;try{var k=Object.defineProperties({},{passive:{get:function get(){e=!0}},once:{get:function get(){_=!0}}});window.addEventListener("click",(function(){}),k),window.removeEventListener("click",(function(){}),k)}catch(_){e=!1}return e&&_}},54460:function(e,_,k){"use strict";k.d(_,{Z:function(){return C}});var I=k(76243);function _setArray(e,_){_.length&&_.forEach((function(_){!function _setAll(e,_){if(!_)return;switch((0,I.oL)(_)){case"string":!function _setString(e,_){_.split(/\s+/).forEach((function(_){_&&(e[_]=!0)}))}(e,_);break;case"symbol":e[_.toString()]=!0;break;case"boolean":case"number":case"regexp":case"function":e[_]=!0;break;case"array":_setArray(e,_);break;case"object":!function _setObject(e,_){Object.keys(_).forEach((function(k){e[k]=!!_[k]}))}(e,_)}}(e,_)}))}const C=function classNames(){for(var e=[],_={},k=arguments.length,I=new Array(k),C=0;C<k;C++)I[C]=arguments[C];return _setArray(_,I),Object.keys(_).forEach((function(k){_[k]&&e.push(k)})),e.join(" ")}},40567:function(e,_,k){"use strict";k.d(_,{C:function(){return I}});var I="undefined"!=typeof window},69702:function(){},21015:function(e,_,k){"use strict";k.d(_,{Z:function(){return B},Y:function(){return j}});var I=k(73935),C=k(50450);function getBoundingClientRect(e){if(e.getBoundingClientRect)return e.getBoundingClientRect();var _=e.offsetWidth||0,k=e.offsetHeight||0,I=(0,C.U4)(e)-window.pageYOffset,R=(0,C.fJ)(e)-window.pageXOffset;return{top:I,right:R+_,bottom:I+k,left:R,width:_,height:k}}var R=function isVisibleAreaInGlobal(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=window.innerHeight||document.documentElement.clientHeight,I=window.innerWidth||document.documentElement.clientWidth,C=getBoundingClientRect(e);return C.top<=k+_&&C.bottom>=0&&C.left<=I+_&&C.right>=0},j=function getHtmlDomElement(e){if(!e)return null;if(e instanceof HTMLElement)return e;if(null==e?void 0:e.current)return e.current;var _=null;try{return(_=(0,I.findDOMNode)(e))instanceof HTMLElement?_:null}catch(e){return null}};const B=function isVisibleArea(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,I=j(e);if(!I||!I.offsetHeight&&!I.offsetWidth)return!1;var C=null===k?document.documentElement||document.body:j(k),B=document.documentElement||document.body,H=!C||C===B;if(H)return R(I,_);if(null===C)return!0;var U=R(C),V=getBoundingClientRect(I),G=getBoundingClientRect(C),q=V.bottom+_-G.top>0&&V.top<G.bottom,z=V.right+_-G.left>0&&V.left<G.right;return U&&q&&z}},50450:function(e,_,k){"use strict";k.d(_,{U4:function(){return I},fJ:function(){return C},fT:function(){return R},Hm:function(){return j}});var I=function getElementTop(e){if(!(e instanceof HTMLElement))return 0;for(var _=e.offsetTop||0;e=e.offsetParent;)_+=e.offsetTop||0;return _},C=function getElementLeft(e){if(!(e instanceof HTMLElement))return 0;for(var _=e.offsetLeft||0;e=e.offsetParent;)_+=e.offsetLeft||0;return _},R=function getElementBottom(e){if(!(e instanceof HTMLElement))return 0;var _=document.documentElement||document.body;return(window.innerHeight||_.clientHeight)-I(e)-e.clientHeight},j=function getElementRight(e){if(!(e instanceof HTMLElement))return 0;var _=document.documentElement||document.body;return(window.innerWidth||_.clientWidth)-C(e)-e.clientWidth}},89834:function(e,_,k){"use strict";k.d(_,{z:function(){return C},E:function(){return R}});var I=k(40567),C=function getEnvironment(){var e="prod",_=I.C?location.hostname:"";return/trip/.test(_)&&(e=/dev/.test(_)?"dev":/fat/.test(_)?"fat":"prod"),e},R=function getNodeEnvironment(){return k(1502)("".concat(process.cwd(),"/config/appSetting.js")).Env||"prod"}},17114:function(e,_,k){"use strict";k.d(_,{Z:function(){return exposure}});var I=k(79673),C=k(21015),R=k(55878);function exposure(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"scroll",H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,U=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(!_)return!1;var V=document.documentElement||document.body,G=!j||j===V||j===window,q=G?V:j,z=G?window:j,J=function handleEvent(I){(0,C.Z)(_,k,q)&&Q&&(Q.remove(),Q=null,ee&&ee.remove(),ee=null,e&&e(I))},Q=(0,R.Z)(z,B,(0,I.Z)(J,H),{capture:!1,once:!1}),ee=null;return U&&!G&&(ee=(0,R.Z)(window,B,(0,I.Z)(J,H),{capture:!1,once:!1})),Q?{remove:function remove(){ee&&ee.remove(),Q&&Q.remove()}}:null}},28065:function(e,_,k){"use strict";k.r(_),k.d(_,{isClient:function(){return U.C},getType:function(){return V.oL},isArray:function(){return V.kJ},isBoolean:function(){return V.jn},isDate:function(){return V.J_},isEmpty:function(){return V.xb},isExist:function(){return V.i9},isFunction:function(){return V.mf},isNumber:function(){return V.hj},isObject:function(){return V.Kn},isString:function(){return V.HD},isType:function(){return V.P9},isUndefined:function(){return V.o8},isValidNum:function(){return V.F2},getUserAgent:function(){return J.ij},isAndroid:function(){return J.Dt},isBot:function(){return J.Q0},isCT:function(){return J.Vk},isIOS:function(){return J.gn},isMobile:function(){return J.tq},isPC:function(){return J.Ro},isTripApp:function(){return J._R},getEnvironment:function(){return Q.z},getNodeEnvironment:function(){return Q.E},classNames:function(){return j.Z},throttle:function(){return I.Z},addEventListener:function(){return B.Z},exposure:function(){return H.Z},isVisibleArea:function(){return C.Z},getElementTop:function(){return R.U4},getElementLeft:function(){return R.fJ},getElementBottom:function(){return R.fT},getElementRight:function(){return R.Hm}});var I=k(79673),C=k(21015),R=k(50450),j=k(54460),B=k(55878),H=k(17114),U=k(40567),V=k(76243),G=k(69702),q={};for(var z in G)["default","classNames","throttle","addEventListener","exposure","isVisibleArea","getElementTop","getElementLeft","getElementBottom","getElementRight","isClient","getType","isArray","isBoolean","isDate","isEmpty","isExist","isFunction","isNumber","isObject","isString","isType","isUndefined","isValidNum"].indexOf(z)<0&&(q[z]=function(e){return G[e]}.bind(0,z));k.d(_,q);var J=k(86233),Q=k(89834)},86233:function(e,_,k){"use strict";k.d(_,{ij:function(){return C},Dt:function(){return R},Q0:function(){return j},gn:function(){return B},tq:function(){return H},Ro:function(){return U},_R:function(){return V},Vk:function(){return G}});var I=k(40567),C=function getUserAgent(e){return e||I.C?e?e.request.header["user-agent"]||"":navigator.userAgent:""},R=function isAndroid(e){var _=C(e);return/(Android).*?([\d.]+)/i.test(_)||/(Adr)\s+([\d.]+)/i.test(_)},j=function isBot(e){if(!e&&!I.C)return!1;var _=C(e);return/(Googlebot|AdsBot-Google|bot.html|HeadlessChrome)/gi.test(_)},B=function isIOS(e){var _=C(e);return/(iPhone\sOS)\s([\d_]+)|(iPhone).*?(FxiOS)/i.test(_)},H=function isMobile(e){if(!e&&!I.C)return!1;var _=e?e.url:location.pathname;return"/m"===_||0===_.indexOf("/m/")||!(!R(e)&&!B(e))},U=function isPC(e){for(var _=C(e),k=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],I=!0,R=0;R<k.length;R++)if(_.indexOf(k[R])>0){I=!1;break}return I},V=function isTripApp(e){var _=C(e);return/Trip\.com_CtripWireless/i.test(_)},G=function isCT(e){if(!e&&!I.C)return!1;var _=I.C?window.location.hostname||"":e&&e.request&&e.request.hostname||"";return/\bctrip.com.?$|\bctripcorp.com.?$/i.test(_)}},79673:function(e,_,k){"use strict";function throttle(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,k=0,I=null;return function(){for(var C=arguments.length,R=new Array(C),j=0;j<C;j++)R[j]=arguments[j];var B=Date.now();B-k>=_||B<k?(k=B,e.apply(void 0,R)):(clearTimeout(I),I=setTimeout((function(){I=null,e.apply(void 0,R)}),_))}}k.d(_,{Z:function(){return throttle}})},76243:function(e,_,k){"use strict";k.d(_,{P9:function(){return R},HD:function(){return j},jn:function(){return B},Kn:function(){return H},kJ:function(){return U},mf:function(){return V},o8:function(){return G},hj:function(){return q},J_:function(){return z},xb:function(){return J},oL:function(){return Q},i9:function(){return ee},F2:function(){return te}});var I=k(50008),C=k.n(I),R=function isType(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return function(e){return!!_.filter((function(_){return Object.prototype.toString.call(e)==="[object ".concat(_,"]")})).length}},j=R("String"),B=R("Boolean"),H=R("Object"),U=R("Array"),V=R("Function","AsyncFunction"),G=R("Undefined"),q=function isNumber(e){return!(!R("Number")(e)||Number.isNaN(e))},z=function isDate(e){return!(!R("Date")(e)||!Date.parse(e))},J=function isEmpty(e){return!e||0===Object.keys(e).length},Q=function getType(e){var _=Object.prototype.toString.call(e).toLowerCase();return _.slice(8,_.length-1)},ee=function isExist(e){return null!==e&&(!("object"!==C()(e)&&!V(e))||void 0!==e&&""!==e)},te=function isValidNum(e){return!Number.isNaN(Number(e))&&Number.isInteger(Number(e))}},1502:function(e){function webpackEmptyContext(e){var _=new Error("Cannot find module '"+e+"'");throw _.code="MODULE_NOT_FOUND",_}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=1502,e.exports=webpackEmptyContext},26243:function(e,_,k){"use strict";k.d(_,{Z:function(){return re}});var I=k(34575),C=k.n(I),R=k(93913),j=k.n(R),B=k(59713),H=k.n(B),U=k(47419),V=k(5613),G="undefined"!=typeof window,q=(k(50008),function isType(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return function(e){return!!_.filter((function(_){return Object.prototype.toString.call(e)==="[object ".concat(_,"]")})).length}}),z=q("String"),J=(q("Boolean"),q("Object"),q("Array")),Q=(q("Function","AsyncFunction"),q("Undefined")),ee=function isNumber(e){return!(!q("Number")(e)||Number.isNaN(e))},te=function isValidNum(e){return!Number.isNaN(Number(e))&&Number.isInteger(Number(e))},ne={"DA-DK":"–","DE-DE":"–","EL-GR":"–","EN-US":"–","ES-ES":"–","FI-FI":"–","FR-FR":" - ","ID-ID":"–","IT-IT":"-","JA-JP":"～","KO-KR":"~","MS-MY":"–","NL-NL":"–","PL-PL":"–","PT-BR":"–","RU-RU":"–","SV-SE":"–","TH-TH":"–","TR-TR":"–","UK-UA":"–","VI-VN":"-","ZH-HK":"-","ZH-TW":"-"},re=function(){function TripTranslate(e){C()(this,TripTranslate),H()(this,"getLocale",(function(e){return(U.default.getByKey("cargo",e)||{locale:"en-us"}).locale.toUpperCase().replace("_","-")})),this.appId=e}return j()(TripTranslate,null,[{key:"init",value:function init(){return TripTranslate.instance||(TripTranslate.instance=new TripTranslate),TripTranslate.instance}}]),j()(TripTranslate,[{key:"get",value:function get(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=_.ctx,I=_.model,C=_.value,R=e&&e.trim().replace(/[\r\n]/g,""),j=R.substring(0,4);if(!k&&!G)return j;var B=this.getAll(k),H=B[R]||("prod"!==I?j:"");return Q(C)||(ee(C)||z(C)?H=/{\/\d+}/.test(H)?H.replace(/%\d+\$s/g,C):H.replace(/\$?\{\d+\}|%\d+\$s/g,C):J(C)&&(H=/{\/\d+}/.test(H)?H.replace(/%(\d+)\$s/g,(function(e,_){return C[_-1]||""})):H.replace(/\{(\d+)\}/g,(function(e,_){return C[_]||""})).replace(/%(\d+)\$s/g,(function(e,_){return C[_-1]||""})))),H}},{key:"getAll",value:function getAll(e){var _=U.default.getByKey("translate",e);if(G){var k="i18n_".concat(this.appId);_=_||window[k]}return _||{}}},{key:"getPlural",value:function getPlural(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=k.ctx,C=k.prefixCls,R=k.regex,j=/\$?\{\d+\}|%\d+\$s/g,B=te(_);if(!e)throw new Error("Please pass in the required param: key");if(!B)throw new Error("Please pass in the valid param: num");(_=Number(_))<0&&(_=0);var H=this.getAll(I),U=this.getL10N(I),V=this.getLocale(I),G="";if(U&&V){var q=H[e];(G=H&&!I?U.getPluralTranslation(H,e,V,_)||"":U.getPluralTranslation(e,_)||"")||(G=q||"")}return C&&G&&(_='<span class="'.concat(C,'">').concat(_,"</span>")),G=R&&G?G.replace(R,_):G.replace(j,_)}},{key:"getL10N",value:function getL10N(e){return G?{getPluralTranslation:V._}:e?e.req.shark:void 0}},{key:"getTranslateDash",value:function getTranslateDash(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.ctx,k=this.getLocale(_);return void 0!==ne[k]?ne[k]:"–"}}]),TripTranslate}();H()(re,"instance",void 0);re.init()},64979:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.isCtrip=_.getTripAppInfo=_.getTripAppVersion=_.isIOS=_.isAndroid=_.isInTripApp=_.isEdge=_.isPC=_.isWAP=_.isClient=void 0;var k=function isClient(){return"undefined"!=typeof window&&"undefined"!=typeof navigator};_.isClient=k;var I=function isWAP(){if(!k())return!1;for(var e=navigator.userAgent,_=["Android","iPhone","webOS","BlackBerry","SymbianOS","Windows Phone","iPad","iPod"],I=!1,C=0;C<_.length;C++)if(e.indexOf(_[C])>0){I=!0;break}return I};_.isWAP=I;_.isPC=function isPC(){return!!k()&&!I()};_.isEdge=function isEdge(){return!!k()&&/edge\/([\d.]+)/.test(window.navigator.userAgent.toLowerCase())};_.isInTripApp=function isInTripApp(){if(!k())return!1;var e=navigator.userAgent;return!(!/IBUCtrip\/([0-9.]+) \((.*)\)/g.test(e)&&!/Trip\.com_CtripWireless/i.test(e))};_.isAndroid=function isAndroid(){return!!k()&&/(Android)/i.test(navigator.userAgent)};_.isIOS=function isIOS(){return!!k()&&/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)};_.getTripAppVersion=function getTripAppVersion(){if(!k())return null;var e=null,_=navigator.userAgent||"",I=/IBUCtrip\/([0-9.]+) \((.*)\)/g.exec(_);if(I)e=I[1];else{var C=/CtripWireless_([0-9.]+)/g.exec(_);if(C){var R=C[1].split(".").map((function(e){return Number(e)}));e=(100*R[0]+R[1]+R[2]/1e3).toFixed(3)}}return e};_.getTripAppInfo=function getTripAppInfo(){if(!k())return null;var e=navigator.userAgent,_=/IBUCtrip\/([0-9.]+) \((.*)\)/g.exec(e);return _&&_[2]?_[2].split("&").reduce((function(e,_){var k=_.split("=");return e[k[0]]=k[1],e}),{}):null};_.isCtrip=function isCtrip(e){if(!e&&!k())return!1;var _=k()?window.location.hostname||"":e&&e.request&&e.request.hostname||"";return/\bctrip.com.?$|\bctripcorp.com.?$/i.test(_)}},19848:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getLocalToday=_.getLocalTimeZone=_.setDateByAdd=_.computeDateStep=_.getDefaultCheckOut=_.getDefaultCheckIn=_.formatDateYMD=void 0;var k=function formatDateYMD(e,_){var k=function formatNumber(e){return e<10?"0".concat(e):"".concat(e)},I=e.getFullYear(),C=k(e.getMonth()+1),R=k(e.getDate());return _?"".concat(I).concat(_).concat(C).concat(_).concat(R):"".concat(I,"/").concat(C,"/").concat(R)};_.formatDateYMD=k;_.getDefaultCheckIn=function getDefaultCheckIn(e){var _=new Date(Date.now());return k(_,e)};_.getDefaultCheckOut=function getDefaultCheckOut(e){var _=new Date(Date.now()+864e5);return k(_,e)};_.computeDateStep=function computeDateStep(e,_){return Math.floor((_.getTime()-e.getTime())/864e5)};_.setDateByAdd=function setDateByAdd(e,_){return(e=new Date(e.getFullYear(),e.getMonth(),e.getDate())).setDate(e.getDate()+_),e};_.getLocalTimeZone=function getLocalTimeZone(){return(new Date).getTimezoneOffset()/-60};_.getLocalToday=function getLocalToday(e){e||0===e||(e=-60*(new Date).getTimezoneOffset()),e*=1e3;var _=new Date((new Date).getTime()+(e+60*(new Date).getTimezoneOffset()*1e3));return new Date(_.getFullYear(),_.getMonth(),_.getDate())}},70380:function(e,_,k){"use strict";_.ZP=void 0;var I=k(19848),C=k(64979),R=["hotelid","hotel","checkin","startdate","ci","checkout","depdate","co","cityid","city","page","minprice","mincurr","adult","children","ages","roomquantity","crn","travelpurpose","display","currency","curr","trv_curr","feature","fgt","from","stand","stdcode","hpaopts","roomid","mproom","allianceid","sid","ouid","shoppingid","swid","hasaidinurl","roomkey","from_page","tprate","tpshadowid","landmarkcode","zonecode","poicode","districtcode","latitude","longitude","poiname","optionid","optiontype","highprice","lowprice","barcurr","discounts","breakfast","immediate","freecancel","kingsize","twinbed","multibed","singlebed","showtotalamt","fg","pp","starlist","rating","module","pctoken","ltracelogid","tproom","rrToken","relindate","reloutdate","tagid","uniquekey","link","hoteluniquekey","relatedate","edmhoteldata"];var j="cityenname";var B="hotelenname";var H=["hotelid","hotel"];var U=["checkin","startdate","ci","checkout","depdate","co"];var V=function getDetailUrl(e){var _=e.data,k=e.style,I=e.platform,C=Object.keys(_),j={},B="S"===k||"SW"===k,V=G(_);if(!C.find((function(e){return-1!==H.indexOf(e.toLowerCase())})))throw new Error("Please pass on hotelId.");R.forEach((function(e){var k=C.find((function(_){return _.toLowerCase()===e}));if(k){var I=_[k];if(-1!==U.indexOf(e)){var R=z(String(I));R&&(j[k]=R)}else-1!==H.indexOf(e)?(!B||!V)&&(j[k]=I):null===I&&void 0===I&&""===I||(j[k]=I)}}));var Q=q(V,k,I);return"".concat(Q).concat(J(j))};var G=function getHotelInfo(e){var _,k,I;return Object.keys(e).forEach((function(C){-1!==j.indexOf(C.toLowerCase())&&(_=e[C]),-1!==B.indexOf(C.toLowerCase())&&(k=e[C]),-1!==H.indexOf(C.toLowerCase())&&(I=e[C])})),I&&_&&k?{cityEnName:_,hotelEnName:k,hotelId:I}:null};var q=function getBaseUrl(e,_,k){var I="h5"===String(k).toLowerCase()||(0,C.isWAP)()&&!(0,C.isCtrip)()?"/m/hotels":"/hotels",R="",j=_||"D";"S"!==j||e||(j="D"),"SW"!==j||e||(j="DW"),"SW"!==j&&"DW"!==j||(I="/m/hotels");var B=e||{},H=B.hotelId,U=B.hotelEnName,V=B.cityEnName;switch(j){case"S":R="/".concat(V,"-hotel-detail-").concat(H,"/").concat(U,"/?");break;case"D":R="/detail/?";break;case"SW":R="/w/".concat(V,"-hotel-detail-").concat(H,"/").concat(U,"/?");break;case"DW":R="/w/detail/?"}return"".concat(I).concat(R)};var z=function commonFormatDateString(e){var _=new Date(e.replace(/-/g,"/"));return-1!==_.toString().indexOf("Invalid")?"":(0,I.formatDateYMD)(_,"-")};var J=function stringify(e){var _="";return Object.keys(e).forEach((function(k){void 0!==e[k]&&(_+="".concat(k,"=").concat(e[k],"&"))})),"&"===_[_.length-1]&&(_=_.substr(0,_.length-1)),_};var Q=V;_.ZP=Q},52178:function(e,_,k){"use strict";k.d(_,{K:function(){return U}});var I=k(85354),C=k.n(I),R=k(67294),j=k.n(R),B=k(12325),H=function(e){function ErrorBoundary(){return e.apply(this,arguments)||this}C()(ErrorBoundary,e);var _=ErrorBoundary.prototype;return _.componentDidCatch=function componentDidCatch(e,_){var k={name:this.props.name,version:this.props.version,errorName:null==e?void 0:e.name,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,componentStack:null==_?void 0:_.componentStack,url:window.location.href};throw"undefined"!=typeof window&&(0,B.v4)("ibu_component_usage_onerror",JSON.stringify(k)),e},_.render=function render(){return this.props.children},ErrorBoundary}(R.Component),U=function AnalyticsWrapper(e,_,k){return void 0===k&&(k=!1),function(I){return(0,R.useEffect)((function(){V(_)}),[]),e.displayName=_.name+":"+_.version,k?j().createElement(H,{name:_.name,version:_.version},j().createElement(e,I)):j().createElement(e,I)}},V=function track(e){if(G()){var _=Object.assign({},e,{url:q()});(0,B.v4)("ibu_component_usage_onload",JSON.stringify(_))}},G=function reportOrNot(){var e=100*Math.random()<10;try{return!!window.location.href.includes("forceToReport=true")||e}catch(_){return e}},q=function getUrl(){var e,_=null==(e=window.location.href.split("?"))?void 0:e[0];return _.length>0&&"/"===_[_.length-1]&&(_=_.substring(0,_.length-1)),_}},93231:function(e,_,k){"use strict";k.d(_,{ZR:function(){return ue}});var I=k(48926),C=k.n(I),R=k(87757),j=k.n(R),B=k(67294),H=k(32407),U=k(75663),V=k(31968),G=k(36652),q=k.n(G),z={primaryBtnKey:"key_home_install"},J=function useModifiedConfig(e,_,k){var I=(0,B.useRef)({show:function show(){},timeout:0,scrollCb:function scrollCb(){},prevTimeStamp:-1e3}),C=function createConfig(){var C=function mergeDefaultContent(e,_){var k=Object.assign({},z,_||{}),I=e.mode,C=Object.assign({},k,(k.modes||{})[I]||{});delete C.modes;var R=Object.assign({},e);return R.content=Object.assign({},C,R.content),R}(e,_);return!0!==k&&(C=function rewriteShow(e,_){var k=e.content,I=k.showAfterXHeight,C=k.showAfterXSeconds;e.content=Object.assign({},e.content||{}),((I||-1)>0||(C||-1)>0)&&(e.content.show=!1);(0,H.getRuntimeType)().isBrowser&&("number"==typeof C&&C>0&&(clearTimeout(_.current.timeout),_.current.timeout=window.setTimeout((function(){_.current.show()}),1e3*C)),"number"==typeof I&&I>0&&(window.removeEventListener("scroll",_.current.scrollCb),_.current.scrollCb=function(e){var k=e.timeStamp-_.current.prevTimeStamp;k>120||k<5?_.current.prevTimeStamp=e.timeStamp:window.pageYOffset>window.innerHeight*I&&(_.current.show(),window.removeEventListener("scroll",_.current.scrollCb))},window.addEventListener("scroll",_.current.scrollCb)));return e}(C,I)),C},R=(0,B.useState)(C),j=R[0],U=R[1];return I.current.show=function(){var e=Object.assign({},j.content||{},{show:!0});U((function(_){return Object.assign({},_,{content:e})}))},(0,B.useEffect)((function(){U(C())}),[e]),j};var Q="/restapi/soa2/24884/json/getConfiguration",ee=(0,H.getRuntimeType)(),te=null,ne={content:{}},re=function generateCacheKey(e,_,k){var I,C,R=e.split("/"),j=R[R.length-1].toLowerCase(),B=Object.assign({},_,null!=k&&null!=(I=k.dev)&&I.version?{version:null==k||null==(C=k.dev)?void 0:C.version}:{});return B&&0!==Object.keys(B).length&&Object.keys(B).sort().forEach((function(e){"object"==typeof B[e]?j+=JSON.stringify(B[e]):void 0!==B[e]&&(j+=String(B[e]))})),j},oe=function isParamsValid(e){var _,k,I=!!(e.platform&&e.componentType&&e.version&&e.pageId&&null!=(_=e.head)&&_.locale&&null!=(k=e.head)&&k.currency);return I},ie=function getAPIGatewayHost(e){var _={fat:{server:"gateway.m.fws.qa.nt.ctripcorp.com",client:"gateway.m.fws.qa.nt.ctripcorp.com"},prod:{server:"apigateway.ctripcorp.com",client:ee.isBrowser&&window.location.host||"www.trip.com"}},k=(ee.isNode?(null==e?void 0:e.host)||"":window.location.host).replace(/\/$/,""),I=new RegExp("(tripcorp|tripqate|localhost)").test(k)?"fat":"prod",C=ee.isNode?"server":"client";return(ee.isNode?"http:":window.location.protocol)+"//"+_[I][C]},ae=function transform(e){for(var _=Object.assign({},e),k=["aid","sid","taskId","promotionId"],I=0;I<k.length;I++)void 0!==_[k[I]]&&(_[k[I]]=Number.parseInt(_[k[I]]||0,10));k=["pageId","customId"];for(var C=0;C<k.length;C++)void 0!==_[k[C]]&&(_[k[C]]=String(_[k[C]]||""));return _},le=function(){var e=C()(j().mark((function _callee(e,_,k){var I,C,R,B,H;return j().wrap((function _callee$(j){for(;;)switch(j.prev=j.next){case 0:if("undefined"!=typeof window){j.next=10;break}return j.prev=1,"string"==typeof(null==(I=((null==_?void 0:_.cookie)||"").match(/_bfa=([^;]+);/))?void 0:I[1])?(C=I[1].split("."),R=C[1]+"."+C[2],e.head.vID=R):k&&(B=null==q()?void 0:q().genVid4SSR(k),e.head.vID=B),j.abrupt("return",e);case 7:return j.prev=7,j.t0=j.catch(1),j.abrupt("return",e);case 10:return j.prev=10,H=(0,U.vQ)(),e.head.vID=H,j.abrupt("return",e);case 16:return j.prev=16,j.t1=j.catch(10),j.abrupt("return",e);case 19:case"end":return j.stop()}}),_callee,null,[[1,7],[10,16]])})));return function addVid(_,k,I){return e.apply(this,arguments)}}(),se=function(){var e=C()(j().mark((function _callee5(e,_,k,I){var R,B,H,U,G,q,z,J,se,ue;return j().wrap((function _callee5$(de){for(;;)switch(de.prev=de.next){case 0:if(R=e.customParams,B=Object.assign({},e,null!=_&&_.union?{aid:_.union.aid,sid:_.union.sid}:{},{customParam:R},null!=I&&I.version?{version:null==I?void 0:I.version}:{}),H=null==_?void 0:_.userAgent,null==_||delete _.userAgent,delete B.customParams,!oe(B)){de.next=20;break}return U=ae(B),G=re(Q,U),de.next=10,le(U,_,k);case 10:return q=de.sent,z={},de.next=14,C()(j().mark((function _callee4(){var e,I,R,B,U,G,q,J,ne;return j().wrap((function _callee4$(re){for(;;)switch(re.prev=re.next){case 0:if(k&&ee.isNode)try{z={uID:null==k||null==(e=k.request)||null==(I=e.header)?void 0:I.uid,ticket:(null==k||null==(R=k.request)||null==(B=R.header)||null==(U=B.cookie)?void 0:U.cticket)||(null==k||null==(G=k.request)||null==(q=G.header)?void 0:q.cticket)||ce((null==k||null==(J=k.request)||null==(ne=J.header)?void 0:ne.cookie)||"","cticket")}}catch(e){z={}}if(!ee.isNode||null==_||!_.RPC){re.next=7;break}if(te){re.next=6;break}return te=new _.RPC({serviceName:"appgrowthplatformservice",serviceCode:"24884"}),re.next=6,te.init();case 6:return re.abrupt("return",function(){var e=C()(j().mark((function _callee2(e){return j().wrap((function _callee2$(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,te.invoke({method:"getConfiguration",args:Object.assign({},e,{head:Object.assign({},null==e?void 0:e.head,z)}),reqEphemeralParams:{headers:{"User-Agent":H}}});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}}),_callee2)})));return function(_){return e.apply(this,arguments)}}());case 7:return re.abrupt("return",function(){var e=C()(j().mark((function _callee3(e){return j().wrap((function _callee3$(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,V.W)({url:ie(_)+Q,data:Object.assign({},e,{head:Object.assign({},null==e?void 0:e.head,z)}),contentType:"application/json",dataType:"json",method:"POST",withCredentials:!0});case 2:return k.abrupt("return",k.sent);case 3:case"end":return k.stop()}}),_callee3)})));return function(_){return e.apply(this,arguments)}}());case 8:case"end":return re.stop()}}),_callee4)})))();case 14:return J=de.sent,de.next=17,J(q).catch((function(e){return null}));case 17:return se=de.sent,ue=function(){if(se&&"Success"===se.ResponseStatus.Ack&&"Success"===se.responseHead.errorCode){var e=se.amounts?se.amounts.reduce((function(e,_){return e[_.key]=_,e}),{}):void 0;return Object.assign({},se.baseInfo,{content:JSON.parse(se.content),task:se.task,promotion:se.promotion,amounts:e,properties:se.properties,currencyAmounts:se.currencyAmounts})}return ne}(),de.abrupt("return",{cacheKey:G,rawConfig:ue});case 20:return de.abrupt("return",{cacheKey:"",rawConfig:ne});case 21:case"end":return de.stop()}}),_callee5)})));return function fetchConfig(_,k,I,C){return e.apply(this,arguments)}}();var ce=function getCookieItem(e,_){if(!e)return null;try{var k=function parseCookies(e){return e.split(";").reduce((function(e,_){var k=_.split("=").map((function(e){return e.trim()})),I=k[0],C=k[1];return e[I]=decodeURIComponent(C||""),e}),{})}(e);return(null==k?void 0:k[_])||null}catch(e){return null}},ue=function useConfig(e){var _=e.rawConfig,k=e.tcpCacheKey,I=e.options,C=void 0===I?{}:I,R=e.params,j=e.defaultContent,H=e.noOverwriteShow,U=(0,B.useMemo)((function(){return ae(R)}),[R]),V=(0,B.useMemo)((function(){return function cache(e){var _=e.tcpCacheKey,k=function setCache(e,k){if(ee.isBrowser&&e&&k){var I="string"==typeof k?k:JSON.stringify(k||{});window.sessionStorage.setItem(_+"."+e,I)}};return ee.isBrowser&&window[_]&&k(window[_].cacheKey,window[_].config),{setCache:k,getCache:function getCache(e,k){if(ee.isBrowser&&e){var I=window.sessionStorage.getItem(_+"."+e);return I?JSON.parse(I):k}return ne}}}({tcpCacheKey:k})}),[k]),G=V.getCache,q=V.setCache,z=(0,B.useMemo)((function(){var e,_,k;return!ee.isNode||null!=(e=C.dev)&&e.disableServerConfig||null==(_=C.ssr)||!_.rawConfig?oe(U)?re(Q,U,C):"":(null==(k=C.ssr)?void 0:k.cacheKey)||""}),[U]),te=(0,B.useState)((function(){var e,k,I;return _||(!ee.isNode||null!=(e=C.dev)&&e.disableServerConfig||null==(k=C.ssr)||!k.rawConfig?null!=(I=C.dev)&&I.rawConfig?C.dev.rawConfig:G(z,ne):C.ssr.rawConfig)})),ie=te[0],le=te[1],ce=J(ie,j,H),ue=(0,B.useState)((function(){var e,k;return!!_||(!(null==(e=C.dev)||!e.disableServerConfig)||!(null==(k=C.ssr)||!k.rawConfig))})),de=ue[0],pe=ue[1];return(0,B.useEffect)((function(){var e;if(!_&&(null==(e=C.dev)||!e.disableServerConfig)&&z){var k=G(z);(k?Promise.resolve({cacheKey:z,rawConfig:k}):se(Object.assign({},U),void 0,void 0,C.dev)).then((function(e){var _=e.cacheKey,k=e.rawConfig;le(k||ne),pe(!0),q(_,k)}))}}),[z]),{isInited:de,cacheKey:z,config:ce,rawConfig:ie}}},9230:function(e,_,k){"use strict";k.d(_,{ZT:function(){return I},v4:function(){return C}});var I=function noop(){},C=function isInViewport(e){if(!e)return!1;var _=e.getBoundingClientRect();return _.width>0&&_.height>0&&(_.top>=0&&_.top<window.innerHeight||_.bottom>0&&_.bottom<=window.innerHeight)}},6465:function(e,_,k){"use strict";k.d(_,{isInViewport:function(){return C.v4},noop:function(){return C.ZT}});var I=k(74341);k.o(I,"isInViewport")&&k.d(_,{isInViewport:function(){return I.isInViewport}}),k.o(I,"noop")&&k.d(_,{noop:function(){return I.noop}});var C=k(9230)},74341:function(e,_,k){"use strict";var I=k(89985);k.o(I,"isInViewport")&&k.d(_,{isInViewport:function(){return I.isInViewport}}),k.o(I,"noop")&&k.d(_,{noop:function(){return I.noop}})},69877:function(e,_,k){"use strict";k.d(_,{Z:function(){return Ge}});var I=k(52178),C=k(67154),R=k.n(C),j=k(67294),B=k.n(j),H=k(87074),U=k(43770),V=k(32407),G=k(93231),q=k(70079);var z=function proxyPolyfill(){var e;function isObject(e){return!!e&&("object"==typeof e||"function"==typeof e)}function validateProto(e){if(null!==e&&!isObject(e))throw new TypeError("Object prototype may only be an Object or null: "+e)}var _=Object,k=Boolean(_.create)||!({__proto__:null}instanceof _),I=_.create||(k?function create(e){return validateProto(e),{__proto__:e}}:function create(e){if(validateProto(e),null===e)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var _=function T(){};return _.prototype=e,new _}),C=function noop(){return null},R=_.getPrototypeOf||([].__proto__===Array.prototype?function getPrototypeOf(e){var _=e.__proto__;return isObject(_)?_:null}:C);function ProxyCreate(e,j,B){if(!isObject(e)||!isObject(j))throw new TypeError("Cannot create proxy with a non-object as target or handler");var H=function throwRevoked(e){},U=j;for(var V in j={get:null,set:null,apply:null,construct:null},U){if(!(V in j))throw new TypeError("Proxy polyfill does not support trap '"+V+"'");j[V]=U[V]}"function"==typeof U&&(j.apply=U.apply.bind(U));var G,q=R(e),z=!1,J=!1;"function"==typeof e?(G=function ProxyPolyfill(){var _=this&&this.constructor===G,k=Array.prototype.slice.call(arguments);if(H(_?"construct":"apply"),_&&j.construct)return j.construct.call(this,e,k);if(!_&&j.apply)return j.apply(e,this,k);if(_){k.unshift(e);var I=e.bind.apply(e,k);return new I}return e.apply(this,k)},z=!0):e instanceof Array?(G=[],J=!0):G=k||null!==q?I(q):{};var Q=j.get?function(e){return H("get"),j.get(this,e,G)}:function(e){return H("get"),this[e]},ee=j.set?function(e,_){H("set");j.set(this,e,_,G)}:function(e,_){H("set"),this[e]=_},te=_.getOwnPropertyNames(e),ne={};te.forEach((function(k){if(!z&&!J||!(k in G)){var I=_.getOwnPropertyDescriptor(e,k),C={enumerable:Boolean(I.enumerable),get:Q.bind(e,k),set:ee.bind(e,k)};_.defineProperty(G,k,C),ne[k]=!0}}));var re=!0;if(z||J){var oe=_.setPrototypeOf||([].__proto__===Array.prototype?function setPrototypeOf(e,_){return validateProto(_),e.__proto__=_,e}:C);q&&oe(G,q)||(re=!1)}if(j.get||!re)for(var ie in e)ne[ie]||_.defineProperty(G,ie,{get:Q.bind(e,ie)});return _.seal(e),_.seal(G),B?{proxy:G,revoke:function revoke(){e=null,H=function throwRevoked(e){throw new TypeError("Cannot perform '"+e+"' on a proxy that has been revoked")}}}:G}return(e=function ProxyPolyfill(_,k){if(void 0===(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");return ProxyCreate(_,k)}).revocable=function(e,_){return ProxyCreate(e,_,!0)},e}();const J="undefined"!=typeof Proxy?Proxy:z;var Q=function useParse(e){var _,k,I=e.i18n,C=void 0===I?{}:I,R=e.config,j=e.keys,B=R.customTexts||{};if(null!=R&&null!=(_=R.task)&&_.coins&&(B.coins=String(R.task.coins)),null!=R&&null!=(k=R.task)&&k.coinsAmountForShow&&(B.coinsAmountForShow=R.task.coinsAmountForShow.replace("$","$$$$")),null!=R&&R.promotion)for(var U in R.promotion)B[U]=String(R.promotion[U]);var V=(0,H.Q)({appId:"6002"}),G=new q.e(V),z=(null==R?void 0:R.amounts)||{};for(var Q in z){var ee=z[Q].rate?[z[Q].rate*z[Q].value,z[Q].termCurrency]:[z[Q].value,z[Q].baseCurrency],te=ee[0],ne=ee[1];B[Q]=G.currencyString(te,ne,!0,0,2,{})}return{i18n:new J(C,{get:function get(e,_){if(!j||j.includes(_)){var k=e[_]||"";return(k.match(/\{\w+\}/g)||[]).reduce((function(e,_){var k=_.replace(/^\{/,"").replace(/\}$/,"");return k in B?e.replace("{"+k+"}",B[k]):e}),k)}return e[_]}})}};var ee=k(44586),te=k(12325),ne=["debug","info","warn","error"],re=function findIndex(e){for(var _=0,k=0;k<ne.length;k++)ne[k]===e&&(_=k);return _},oe="info",ie=re(oe);function log(e){return re(e)<ie?function(){}:console[e]}var ae={setLevel:function setLevel(e){oe=e,ie=re(e)},debug:function debug(){return log("debug").apply(void 0,arguments)},info:function info(){return log("info").apply(void 0,arguments)},warn:function warn(){return log("warn").apply(void 0,arguments)},error:function error(){return log("error").apply(void 0,arguments)}};var le={h5:{exposure:"ibu_pub_h5_download_banner_exposure",download:"ibu_pub_h5_download_banner_action",close:"ibu_pub_h5_download_banner_close_action",wakeupStart:"H5_OpenApp_Click_Tracing",wakeupEnd:"H5_OpenApp_Redirect_Tracing"},online:{exposure:"ibu_pub_online_download_banner_exposure",download:"ibu_pub_online_download_banner_action",close:"ibu_pub_online_download_banner_close_action"}},se=function useTracelog(e){var _=e.source,k=void 0===_?"h5":_,I=e.configId,C=e.version,R=e.pageId,B=e.locale,H=e.position,U=e.mode,V=e.extraData,G=e.exposure,q=void 0===G?{}:G,z=q.el,J=q.checkEnabled,Q=q.listenScrollEnabled,ne=(0,j.useState)(!1),re=ne[0],oe=ne[1],ie=(0,j.useRef)(null),se=function traceExposure(e){var _=V?V():{},j=JSON.stringify(Object.assign({configid:I,version:C,pageid:R,locale:B,position:H,mode:U},_,e||{})),G=le[k].exposure;return ae.debug("[useTracelog] "+G+" is submitted: ",j),(0,te.v4)(G,j)},ue=(0,j.useCallback)((function(){J&&ce(null==z?void 0:z.current)&&oe(!0)}),[null==z?void 0:z.current,J]);return(0,j.useEffect)((function(){null!=z&&z.current&&J&&Q&&(re?window.removeEventListener("scroll",ie.current):(ie.current=ue,window.addEventListener("scroll",ie.current))),null!=z&&z.current&&J&&!re&&(ue(),setTimeout(ue,1e3)),setTimeout(ue,1e3)}),[null==z?void 0:z.current,J,Q,re]),(0,j.useEffect)((function(){re&&se()}),[re]),{traceExposure:se,traceDownload:function traceDownload(e){var _=V?V():{},j=JSON.stringify(Object.assign({configid:I,version:C,pageid:R,locale:B,position:H,mode:U},_,e)),G=le[k].download;return ae.debug("[useTracelog] "+G+" is submitted: ",j),(0,te.v4)(G,j)},traceWakeupStart:function traceWakeupStart(e){var _=e.ibuApplinkTraceId,k=e.targetLink,I=e.wakeUpMethod,C=new URL(k).host===window.location.host,R=JSON.stringify({isDomainCrossed:C,ibuApplinkTraceId:_,scenario:"agc",targetLink:k,wakeUpMethod:I,position:H}),j=le.h5.wakeupStart;return ae.debug("[useTracelog] "+j+" is submitted: ",R),(0,te.v4)(j,R)},traceWakeupEnd:function traceWakeupEnd(e){var _=e.ibuApplinkTraceId,k=e.length,I=JSON.stringify({ibuApplinkTraceId:_,scenario:"agc",length:k}),C=le.h5.wakeupEnd;return ae.debug("[useTracelog] "+C+" is submitted: ",I),(0,te.v4)(C,I)},traceClose:function traceClose(e){var _=V?V():{},j=JSON.stringify(Object.assign({configid:I,version:C,pageid:R,locale:B,position:H,mode:U},_,e||{})),G=le[k].close;return ae.debug("[useTracelog] "+G+" is submitted: ",j),(0,te.v4)(G,j)},checkExposure:ue,generateTraceId:ee.Z}},ce=function inViewport(e){if(!e)return!1;var _=e.getBoundingClientRect();return _.width>0&&_.height>0&&(_.top>=0&&_.top<window.innerHeight||_.bottom>0&&_.bottom<=window.innerHeight)};var ue=k(39339),de="6.0.4",pe={appId:"330153"},he="ibu_tcp_online_adc_bm",fe="ibu_tcp_online_adc_pop",me="https://itunes.apple.com/US/app/id681752345?mt=8",ge="https://app.appsflyer.com/ctrip.english?pid=internal&c=public&af_siteid=mlpgoogleplay",ve=["da-dk","de-ch","de-de","el-gr","en-au","en-gb","en-sg","en-us","es-es","es-mx","es-us","fi-fi","fr-be","fr-ch","fr-fr","id-id","it-it","ja-jp","ko-kr","ms-my","nl-be","nl-nl","pl-pl","pt-br","ru-ru","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-hk"],ye=k(31968),be=k(90809),_e={appId:"330153"},we="https://pages.trip.com/images/app-download/qrcode.png",Ee="4.2.1",Se=k(92592),Oe={logoUrl:"https://pages.trip.com/images/app-download/qrcode/logo.png",textKey:"key_online_adc_scan_qrcode",showText:!0};const Te=function OnlineAppDownloadQrcode(e){var _=e.pageId,k=e.kvs,I=e.customId,C=e.taskId,R=e.promotionId,V=e._config,q=e.options,z=void 0===q?{}:q,J=e.customParams,Q=void 0===J?{}:J,ee=e.deeplink,te=(0,j.useState)(""),ne=te[0],re=te[1],oe=(0,j.useRef)(null),ie=(0,j.useRef)(null),ae=(0,U.N)(),le=ae.locale,ce=ae.currency,de=(0,H.Q)(_e),pe=(0,ue.wZ)(),he=pe.aid,fe=pe.sid,me=pe.ouid,ge=(0,G.ZR)({rawConfig:V,tcpCacheKey:"__agc_online_adq",options:z,params:{head:{locale:le,currency:ce},platform:"Online",componentType:"online-app-download-qrcode",version:Ee,pageId:_,aid:Number.parseInt(he||"0",10),sid:Number.parseInt(fe||"0",10),customId:I,taskId:C,promotionId:R,customParams:Q},defaultContent:Oe}),ve=ge.config,Te=ge.isInited;se({source:"online",configId:ve.configId,version:Ee,pageId:_,locale:le,position:ve.position,mode:ve.mode,exposure:{el:oe,checkEnabled:!!ne,listenScrollEnabled:!0}});var ke=Te&&!!ve.content.show&&""!==ne,Ie=(0,j.useMemo)((function(){return!(ve.content.width&&ve.content.width<100)&&!!ve.content.showText}),[ke]);return(0,j.useEffect)((function(){if(Te){var e=(0,be.Ei)(),I=/(tripcorp|tripqate|localhost)/.test(window.location.host)?"https://m.fat.ctripqa.com/restapi/soa2/14877/queryOneLink":"https://m.ctrip.com/restapi/soa2/14877/queryOneLink";(0,ye.W)({url:I,method:"POST",data:{aid:he,sid:fe,kvs:k,downloadConfigId:ve.configId,downloadComponentVersion:Ee,mode:ve.mode,buType:ve.productLine,ext:ve.content.ext,deepLink:ve.content.deeplink||ee,locale:le,platform:"online",pageid:_,ouid:me,position:ve.position,webVid:e||"",generateQrcode:!0,linkId:/(tripcorp|tripqate|localhost)/.test(window.location.host)?782:4734}}).then((function(e){var _;!function generateQRCode(e){e?Se.hz(e,{width:200,margin:0,errorCorrectionLevel:"H"}).then((function(e){re(e||ve.content.defaultQrcodeUrl||we)})).catch((function(e){re(we)})):re(ve.content.defaultQrcodeUrl||we)}("20000"===(null==e||null==(_=e.messageStatus)?void 0:_.status)?null==e?void 0:e.oneLink:"")})).catch((function(){re(we)}))}}),[Te]),(0,j.useEffect)((function(){ke&&ie.current&&ve.content.width&&ve.content.width<100&&(ie.current.style.display="none")}),[ke]),ke?B().createElement("div",{ref:oe,className:"tcp-online-newadq default",style:ve.content.width?{width:ve.content.width}:{}},B().createElement("div",{className:"tcp-online-newadq__qrcode-wrapper"},B().createElement("img",{className:"tcp-online-newadq__qrcode",src:ne,alt:"qrcode"}),B().createElement("img",{className:"tcp-online-newadq__logo",src:ve.content.logoUrl,alt:"logo"})),Ie&&B().createElement("p",{style:ve.content.textStyle||{}},de[ve.content.textKey||""])):null};const ke=(0,I.K)(Te,{name:"@ctrip/trip-component-platform-online-app-download-qrcode",version:"4.2.1"});const Ie=function VerticalMode(e){var _,k=e.el,I=e.kvs,C=e.i18n,R=e.config,j=e.pageId,H=e.isRTL,U=e.deeplink,V=R.content;return B().createElement("div",{ref:k,className:"new-tcp-online-adc vertical",dir:H?"rtl":"ltr"},B().createElement("div",null,B().createElement("div",{className:"new-tcp-online-adc__content"},B().createElement("div",{className:"new-tcp-online-adc__content-title",dangerouslySetInnerHTML:{__html:C[null==V?void 0:V.titleKey]||""}}),B().createElement("div",{className:"new-tcp-online-adc__content-dsc"},null==V||null==(_=V.subList)?void 0:_.map((function(e,_){return B().createElement("div",{className:"new-tcp-online-adc__content-dsc-item"},B().createElement("img",{src:e.iconUrl,alt:"",className:"new-tcp-online-adc__content-dsc-item-img"}),B().createElement("div",null,C[null==e?void 0:e.textKey]||""))}))),B().createElement("div",{className:"new-tcp-online-adc__shadow"})),B().createElement("div",{className:"new-tcp-online-adc__qrcode"},B().createElement("div",{className:"new-tcp-online-adc__qrcode-wrapper"},B().createElement(ke,{kvs:I,pageId:j,_config:{configId:R.configId,mode:"default",position:R.position+"_qrcode",productLine:R.productLine,content:{show:!0,showText:!1}},deeplink:U})),B().createElement("div",{className:"new-tcp-online-adc__qrcode-sec"},(null==C?void 0:C[V.qrTextKey])||""))))};const Ce=function BannerMode(e){var _=e.el,k=e.i18n,I=(e.locale,e.pageId),C=e.kvs,R=e.config,H=e.isRTL,U=e.deeplink,V=R.content,G=(0,j.useState)((null==V?void 0:V.subtitleKeys)||[]),q=G[0],z=G[1],J=(0,j.useRef)(!1);return(0,j.useEffect)((function(){var e=function handleWindowResize(){var e=document.getElementById("new-tcp-online-adc__content-sub");((null==e?void 0:e.clientHeight)||0)>25&&(z(V.subtitleKeys.slice(0,1)),J.current=!0);var _=document.getElementById("new-tcp-online-adc__content"),k=document.querySelector(".new-tcp-online-adc__content-sub-item-dsc"),I=(null==_?void 0:_.clientWidth)||0;((null==k?void 0:k.clientWidth)||0)-100<I&&J.current&&(null==k||k.setAttribute("style","width:"+(I-100)+"px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"))};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),B().createElement("div",{ref:_,className:"new-tcp-online-adc banner",dir:H?"rtl":"ltr"},B().createElement("img",{className:"new-tcp-online-adc__img",src:V.coverUrl?V.coverUrl:"https://pages.trip.com/images/online-adu/banner_cover.png",alt:""}),B().createElement("div",{className:"new-tcp-online-adc__imgdiv"}),B().createElement("div",{className:"new-tcp-online-adc__content",id:"new-tcp-online-adc__content"},k[V.titleKey]&&B().createElement("div",{className:"new-tcp-online-adc__content-title",dangerouslySetInnerHTML:{__html:k[V.titleKey]}}),B().createElement("div",{className:"new-tcp-online-adc__content-sub",id:"new-tcp-online-adc__content-sub"},null==q?void 0:q.map((function(e,_){return k[e]?B().createElement("div",{key:_,className:"new-tcp-online-adc__content-sub-item"},B().createElement("img",{className:"new-tcp-online-adc__content-sub-item-img",src:"https://pages.trip.com/images/online-adu/filled_black.png",alt:""}),B().createElement("span",{className:"new-tcp-online-adc__content-sub-item-dsc",dangerouslySetInnerHTML:{__html:k[e]}})):null})))),B().createElement("div",{className:"new-tcp-online-adc__qrcode"},B().createElement("div",{className:"new-tcp-online-adc__qrcode-wrapper"},B().createElement(ke,{pageId:I,kvs:C,_config:{configId:R.configId,mode:"default",position:R.position+"_qrcode",productLine:R.productLine,content:{show:!0,showText:!1}},deeplink:U}))))};var Pe=k(73935),Le=k.n(Pe),Ne=k(5469);const De=function Icon(e){var _=e.children,k=e.className,I=void 0===k?"":k,C=e.onClick,R=e.style;return B().createElement("span",{className:"new-tcp-online-adc__icon "+I,style:R,onClick:C},_)};const Ae=function CloseOutlined(e){var _=e.width,k=void 0===_?"1em":_,I=e.height,C=void 0===I?"1em":I,R=e.color,j=void 0===R?"":R;return B().createElement(De,e,B().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:k,height:C,color:j,fill:"currentColor"},B().createElement("path",{d:"M451.669333 512l-298.666666-298.666667L213.333333 153.002667l298.666667 298.666666 298.666667-298.666666L870.997333 213.333333l-298.666666 298.666667 298.666666 298.666667L810.666667 870.997333l-298.666667-298.666666-298.666667 298.666666L153.002667 810.666667l298.666666-298.666667z",fill:"currentColor"})))};const Re=function Filled(e){return B().createElement(De,e,B().createElement("svg",{width:"48px",height:"48px",fill:"currentColor",viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},B().createElement("g",{id:"General-/-delete-/-filled",fill:"currentColor",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},B().createElement("g",{id:"hook",fill:"currentColor"},B().createElement("polygon",{points:"44.1455078 12.1503906 46.9653738 14.8369624 19.9914647 41.6483189 5.17157288 26.8284271 10.8284271 21.1715729 20.008 30.348"}),B().createElement("rect",{id:"Rectangle",fill:"#D8D8D8",opacity:"0",x:"0",y:"0",width:"48",height:"48"})))))};const xe=function BottomMode(e){var _=e.el,k=e.i18n,I=e.locale,C=e.pageId,R=e.visible,H=e.config,U=e.kvs,G=e.traceClose,q=e.checkExposure,z=e.isRTL,J=e.deeplink,Q=H.content,ee=(0,j.useState)("translateX(-100%)"),ne=ee[0],re=ee[1],oe=(0,j.useState)(!1),ie=oe[0],ae=oe[1],le=(0,j.useState)(!1),se=le[0],ce=le[1],ue="ibu_tcp_online_adc_bm_closed_{key}".replace("{key}",(0,V.formatLocale)(I,"aa_bb")+"_"+C),pe=(0,j.useRef)(!1),fe=(0,j.useMemo)((function(){return!(!1===R||!se||ie||(0,Ne.ej)(ue)||!Q.show)&&!!Q.show}),[Q,R,ie,se]),me=(0,j.useState)((null==Q?void 0:Q.subtitleKeys)||[]),ge=me[0],ve=me[1],ye=(0,j.useMemo)((function(){return""+(Q.wholeBg?Q.wholeBg:"#3e63f6")}),[Q]);(0,j.useEffect)((function(){if(C&&!(0,Ne.ej)(ue)){if(!document.getElementById(he)){var e=document.createElement("div");e.setAttribute("id",he),document.body.appendChild(e)}ce(!0)}}),[]),(0,j.useEffect)((function(){fe&&(setTimeout((function(){re("none")}),1e3),(0,te.v4)("ibu_pub_online_bottom_banner_load",JSON.stringify({pageid:C,position:H.position,locale:I,url:window.location.href,version:de})))}),[fe]),(0,j.useEffect)((function(){fe&&ne&&q()}),[fe,ne]),(0,j.useEffect)((function(){var e=function handleWindowResize(){var e=document.getElementById("new-tcp-online-adub__content-bottom");((null==e?void 0:e.clientHeight)||0)>25&&(ve(Q.subtitleKeys.slice(0,1)),pe.current=!0);var _=document.getElementById("new-tcp-online-adub__content"),k=document.querySelector(".new-tcp-online-adub__content-sub-item-dsc"),I=(null==_?void 0:_.clientWidth)||0;((null==k?void 0:k.clientWidth)||0)-100<I&&pe.current&&(null==k||k.setAttribute("style","width:"+(I-100)+"px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"))};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[fe]);return fe?Le().createPortal(B().createElement("div",{ref:_,className:"new-tcp-online-adub bottom",style:{transform:ne,background:ye},dir:z?"rtl":"ltr"},B().createElement("div",{className:"new-tcp-online-adub__left",style:{backgroundColor:Q.contentBg?Q.contentBg:"rgba(35,70,255,0.4)"}}),B().createElement("div",{className:"new-tcp-online-adub__center",style:{backgroundColor:Q.contentBg?Q.contentBg:"rgba(35,70,255,0.4)"}},B().createElement(Ae,{className:"new-tcp-online-adub__center-close",color:Q.closeColor?Q.closeColor:"#ffffff",height:"24px",width:"24px",onClick:function handleClose(){(0,Ne.d8)(ue,"1",1),ae(!0),(0,te.v4)("ibu_pub_online_bottom_banner_action",JSON.stringify({pageid:C,position:H.position,locale:I,url:window.location.href,version:de})),G()}}),B().createElement("img",{className:"new-tcp-online-adub__img",src:Q.coverUrl?Q.coverUrl:"https://pages.trip.com/images/online-adu/bottom_cover.png",alt:""}),B().createElement("div",{className:"new-tcp-online-adub__imgdiv"}),B().createElement("div",{className:"new-tcp-online-adub__content",id:"new-tcp-online-adub__content"},k[Q.titleKey]&&B().createElement("div",{className:"new-tcp-online-adub__content-title",dangerouslySetInnerHTML:{__html:k[Q.titleKey]}}),B().createElement("div",{className:"new-tcp-online-adub__content-sub",id:"new-tcp-online-adub__content-bottom"},null==ge?void 0:ge.map((function(e,_){return k[e]?B().createElement("div",{key:_,className:"new-tcp-online-adub__content-sub-item"},B().createElement(Re,{className:"new-tcp-online-adub__content-sub-item-img",style:{color:Q.iconColor?Q.iconColor:"#fff"}}),B().createElement("span",{className:"new-tcp-online-adub__content-sub-item-dsc",dangerouslySetInnerHTML:{__html:k[e]}})):null})))),B().createElement("div",{className:"new-tcp-online-adub__qrcode"},B().createElement("div",{className:"new-tcp-online-adub__qrcode-wrapper"},B().createElement(ke,{pageId:C,kvs:U,_config:{configId:H.configId,mode:"default",position:H.position+"_qrcode",productLine:H.productLine,content:{show:!0,showText:!1}},deeplink:J})))),B().createElement("div",{className:"new-tcp-online-adub__right"})),document.getElementById(he)):null};var je=k(96614),Be=k.n(je);function formatUrlWithCargo(e,_){if(!e)return"";try{var k=_||{},I=k.isCover,C=k.isOnline,R=k.isH5;return function formatUrlWithTripContext(e,_,k){if(!e)return"";try{var I=(k||{}).isCover,C=_.locale,R=_.currency,j=e,B={replaceStr:void 0};j.startsWith("//")?(B.replaceStr=/^https:/,j="https:"+j):j.startsWith("/")&&(j="https://www.trip.com"+j,B.replaceStr=/^https:\/\/www.trip.com/);var H=new URL(j),U=C,V=R;I||(U=H.searchParams.get("locale")||C,V=H.searchParams.get("curr")||H.searchParams.get("currency")||R),H.searchParams.set("locale","".concat(U)),H.searchParams.set("curr","".concat(V)),H.searchParams.delete("currency");var G=H.href;return B.replaceStr&&(G=G.replace(B.replaceStr,"")),G}catch(_){return e}}(e,{locale:function getLocaleWithCargoBrowser(e){var _=e||{},k=_.isOnline,I=_.isH5,C=k?"online":I?"h5":void 0;return Be().getLocale(C)}({isOnline:C,isH5:R}),currency:function getCurrencyWithCargoBrowser(e){var _=e||{},k=_.isOnline,I=_.isH5,C=k?"online":I?"h5":void 0;return Be().getCurrency(C)}({isOnline:C,isH5:R})},{isCover:I})}catch(_){return e}}var Me=function useAppMarket(e){var _=e.locale,k=e.pageId,I=e.iosUrl,C=e.androidUrl,R=e.position,j=ve.includes(_)?_:"en-us",B="https://pages.trip.com/images/download-button/{locale}/ios-{locale}.png".replace(/\{locale\}/g,j),H="https://pages.trip.com/images/download-button/{locale}/android-{locale}.png".replace(/\{locale\}/g,j),U=formatUrlWithCargo(I),V=formatUrlWithCargo(C);return{appMarketLocale:j,iosImageUrl:B,androidImageUrl:H,handleAppStoreClick:function handleAppStoreClick(){(0,te.v4)("ibu_pub_online_download_banner_action",JSON.stringify({pageid:k,locale:_,position:R,onelink:U})),window.open(U)},handleGooglePlayClick:function handleGooglePlayClick(){(0,te.v4)("ibu_pub_online_download_banner_action",JSON.stringify({pageid:k,locale:_,position:R,onelink:V})),window.open(V)}}},Fe=function Wrapper(e){var _,k,I=e.el,C=e.i18n,R=(e.locale,e.config),H=e.children,U=e.isRTL,V=R.content;return(0,j.useEffect)((function(){var e=document.getElementById("new-adu-text");if(((null==e?void 0:e.clientHeight)||0)>55){e.style.borderRadius="8px";var _=e.getElementsByClassName("text-new-adu-item"),k=Array.from(_),I=0;null==k||k.forEach((function(e){return I=Math.max(I,(null==e?void 0:e.clientWidth)||0)})),I>640&&(I=640),U?_[0].style.marginLeft="0px":_[0].style.marginRight="0px",e.style.width=I+40+"px"}}),[]),B().createElement("div",{id:"new-adu",ref:I},B().createElement("div",{id:"new-app-download-component",style:V.bgUrl?{backgroundImage:"url("+V.bgUrl+")"}:{},dir:U?"rtl":"ltr"},B().createElement("div",{className:"l-content"},B().createElement("div",{className:"l-content-round"})),B().createElement("div",{className:"c-content",style:{overflow:"hidden"}},B().createElement("div",{className:"r-content-download"},C[V.titleKey]&&B().createElement("div",{className:"title",dangerouslySetInnerHTML:{__html:C[V.titleKey]}}),B().createElement("div",{className:"text-wrap"},B().createElement("div",{className:"text",id:"new-adu-text"},null==(_=V.subtitleKeys)||null==(k=_.slice(0,2))?void 0:k.map((function(e,_){return C[e]?B().createElement("div",{key:_,className:"text-new-adu-item"},B().createElement("img",{src:"https://pages.trip.com/images/online-adu/filled.png",alt:""}),B().createElement("span",null,C[e])):null})),B().createElement("div",{style:{clear:"both"}}))),B().createElement("div",{className:"layout"},H))),B().createElement("div",{className:"r-content",style:{overflow:"hidden"}},B().createElement("div",{className:"r-content-img",style:V.coverUrl?{backgroundImage:"url("+V.coverUrl+")"}:{backgroundImage:"url(https://pages.trip.com/images/online-adu/showImg.png)"}}))))};const He=function OnlineADMode(e){var _=e.i18n,k=e.kvs,I=e.locale,C=e.pageId,R=e.config,j=e.onIosClick,H=e.onAndroidClick,V=e.deeplink,G=e.isRTL,q=R.content,z=(0,U.e)(q.iosUrl),J=(0,U.e)(q.androidUrl),Q=Me({locale:I,pageId:String(C),iosUrl:z,androidUrl:J,position:R.position}),ee=Q.iosImageUrl,te=Q.androidImageUrl,ne=[{title:_["key.mkt.agc.online.ad.adu.amount"]||"",dsc:_["key.mkt.agc.online.ad.downloads"]||""},{title:_["key.mkt.agc.online.ad.downloads.amount"]||"",dsc:_["key.mkt.agc.online.ad.dau"]||""},{title:_["key.mkt.agc.online.ad.rating.figure"]||"",dsc:_["key.mkt.agc.online.ad.appstore.rating"]||""}];return B().createElement(Fe,e,B().createElement("div",{className:"new-tcp-online-adc online-adl"},B().createElement("div",{className:"new-tcp-online-adc__qrcode"},B().createElement(ke,{pageId:C,kvs:k,_config:{configId:R.configId,mode:"default",position:R.position+"_qrcode",productLine:R.productLine,content:{show:!0,primaryBtnKey:R.content.primaryBtnKey,showText:!1,textStyle:{color:"#fff"}}},deeplink:V})),B().createElement("div",{className:"new-tcp-online-adc__app-market"},B().createElement("div",{className:"new-tcp-online-adc__market-appdata"},ne.map((function(e,_){return B().createElement("div",{key:_,className:"new-tcp-online-adc__market-appdata-info"},B().createElement("div",{className:"new-tcp-online-adc__market-appdata-info-title",style:G?{textAlign:"right"}:{},dir:"ltr"},e.title),B().createElement("div",{className:"new-tcp-online-adc__market-appdata-info-dsc"},e.dsc))}))),B().createElement("div",{className:"new-tcp-online-adc__market-download"},B().createElement("a",{target:"_blank",rel:"noreferrer",href:z,onClick:j},B().createElement("img",{src:q.iosImageUrl||ee,alt:"app store qrcode"})),B().createElement("a",{target:"_blank",rel:"noreferrer",href:J,onClick:H},B().createElement("img",{src:q.androidImageUrl||te,alt:"google play qrcode"}))),B().createElement("div",{className:"new-tcp-online-adc__market-qrcodedsc"},(null==_?void 0:_[q.qrTextKey])||""))))};var Ke=k(31771);const Ue=function PopMode(e){var _,k,I,C=e.el,R=e.kvs,H=e.i18n,V=e.locale,G=e.config,q=e.pageId,z=e.onClose,J=e.visible,Q=e.onIosClick,ee=e.onAndroidClick,te=e.traceClose,ne=e.checkExposure,re=e.isRTL,oe=e.deeplink,ie=G.content,ae=(0,j.useState)(!1),le=ae[0],se=ae[1],ce=(0,U.e)(ie.iosUrl),ue=(0,U.e)(ie.androidUrl),de=Me({locale:V,pageId:String(q),iosUrl:ce,androidUrl:ue,position:G.position}),pe=de.iosImageUrl,he=de.androidImageUrl,me=G.content,ge=me.showAfterXHeight,ve=void 0===ge?-1:ge,ye=me.showAfterXSeconds,be=(ve>0||(void 0===ye?-1:ye)>0)&&void 0===J,_e=null!=(_=ie.cookieName)?_:"ibu_online_appdownload_universal_pop",we=(0,j.useState)(!!be&&!(0,Ne.ej)(_e)),Ee=we[0],Se=we[1],Oe=(0,Ke.M)().setVisible;(0,j.useEffect)((function(){if(!document.getElementById(fe)){var e=document.createElement("div");e.setAttribute("id",fe),document.body.appendChild(e)}se(!0)}),[]),(0,j.useEffect)((function(){be||Se(!!J)}),[J]),(0,j.useEffect)((function(){Oe(Ee),Ee&&ne()}),[Ee]);return Ee&&le?Le().createPortal(B().createElement("div",{className:"new-tcp-online-adc pop",dir:re?"rtl":"ltr"},B().createElement("div",{className:"new-tcp-online-adc__wrapper"},B().createElement("div",{ref:C,className:"new-tcp-online-adc__main"},B().createElement(Ae,{className:"new-tcp-online-adc__close",height:"15px",width:"15px",onClick:function handleClose(){var e;(te(),z&&z(),be)&&(Se(!1),(0,Ne.d8)(_e,"1",null!=(e=ie.cookieDay)?e:365))}}),B().createElement("img",{className:"new-tcp-online-adc__trip-icon",src:"https://pages.trip.com/images/online-adu/trip_icon.png",alt:""}),B().createElement("div",{className:"new-tcp-online-adc__left"},B().createElement("div",{className:"new-tcp-online-adc__left-bgimg",style:{backgroundImage:"url("+(ie.coverUrl?ie.coverUrl:"https://pages.trip.com/images/online-adu/pop_cover.png")+")"}})),B().createElement("div",{className:"new-tcp-online-adc__right"},B().createElement("div",{className:"new-tcp-online-adc__content"},B().createElement("div",{className:"new-tcp-online-adc__content-title"},H[ie.titleKey]||""),B().createElement("div",{className:"new-tcp-online-adc__content-sub"},null==(k=ie.subtitleKeys)||null==(I=k.slice(0,3))?void 0:I.map((function(e,_){return H[e]?B().createElement("div",{key:_,className:"new-tcp-online-adc__content-sub-item"},B().createElement("div",{className:"new-tcp-online-adc__content-sub-item-img"},B().createElement("img",{src:"https://pages.trip.com/images/online-adu/filled.png",alt:""})),B().createElement("span",null,H[e])):null})))),B().createElement("div",{className:"new-tcp-online-adc__qrdsc"},(null==H?void 0:H[ie.qrTextKey])||""),B().createElement("div",{className:"new-tcp-online-adc__qrcode"},B().createElement("div",{className:"new-tcp-online-adc__qrcode-wrapper"},B().createElement(ke,{pageId:q,kvs:R,_config:{configId:G.configId,mode:"default",position:G.position+"_qrcode",productLine:G.productLine,content:{show:!0,showText:!1}},deeplink:oe})),B().createElement("div",{className:"new-tcp-online-adc__qrcode-download"},B().createElement("a",{target:"_blank",rel:"noreferrer",href:ce,onClick:Q},B().createElement("img",{src:ie.iosImageUrl||pe,alt:"app store qrcode"})),B().createElement("a",{target:"_blank",rel:"noreferrer",href:ue,onClick:ee},B().createElement("img",{src:ie.androidImageUrl||he,alt:"google play qrcode"})))))))),document.getElementById(fe)):null};var Ze={modes:{"online-ad":{iosUrl:me,androidUrl:ge},pop:{iosUrl:me,androidUrl:ge},vertical:{subList:[{iconUrl:"https://pages.trip.com/images/online-adu/vertical_icon1.png",textKey:"key.mkt.agc.online.usp.short.1"},{iconUrl:"https://pages.trip.com/images/online-adu/vertical_icon2.png",textKey:"key.mkt.agc.online.usp.short.2"},{iconUrl:"https://pages.trip.com/images/online-adu/vertical_icon4.png",textKey:"key.mkt.agc.online.usp.short.3"},{iconUrl:"https://pages.trip.com/images/online-adu/vertical_icon3.png",textKey:"key.mkt.agc.online.usp.short.4"}],qrTextKey:"key.mkt.agc.online.qrcode"}}},Ve=["ar-XX","ar-AE","ar-SA"];const We=function OnlineAppDownloadUniversal(e){var _=e.pageId,k=e.customId,I=e.promotionId,C=e.taskId,q=e.customTexts,z=e.onIosClick,J=e.onAndroidClick,ee=e.onClose,te=e.visible,ne=e.options,re=void 0===ne?{}:ne,oe=e.customParams,ie=void 0===oe?{}:oe,ae=e.deeplink,le=e.kvs,ce=(0,j.useRef)(null),he=(0,H.Q)(pe),fe=(0,U.N)(),me=fe.currency,ge=fe.locale,ve=(0,j.useState)(!1),ye=ve[0],be=ve[1],_e=(0,ue.wZ)(),we=_e.aid,Ee=_e.sid,Se=(_e.ouid,(0,G.ZR)({tcpCacheKey:"__agc_online_adu",options:re,params:{head:{locale:ge,currency:me},platform:"Online",componentType:"online-app-download-universal",version:de,pageId:_,aid:Number.parseInt(we||"0",10),sid:Number.parseInt(Ee||"0",10),customId:k,taskId:C,promotionId:I,customParams:ie},defaultContent:Ze,noOverwriteShow:void 0!==te})),Oe=Se.config,Te=Se.isInited,ke=Q({i18n:he,config:Object.assign({},Oe,{customTexts:q})}).i18n,Pe=se({source:"online",configId:Oe.configId,version:de,pageId:_,locale:ge,position:Oe.position,mode:Oe.mode,exposure:{el:ce,checkEnabled:ye,listenScrollEnabled:!0}}),Le=Pe.traceClose,Ne=Pe.checkExposure,De=Ve.includes((0,V.formatLocale)(ge,"aa-BB"));(0,j.useEffect)((function(){be(Te&&!1!==Oe.content.show)}),[Oe,Te]);var Ae={el:ce,i18n:ke,locale:V.formatLocale(ge,"aa-bb"),position:Oe.position,onIosClick:z,onAndroidClick:J,onClose:ee,onDownload:function onDownload(){return!1},pageId:_,kvs:le,config:Oe,isRTL:De,deeplink:ae};return ye?"vertical"===Oe.mode?B().createElement(Ie,Ae):"banner"===Oe.mode?B().createElement(Ce,Ae):"bottom"===Oe.mode?B().createElement(xe,R()({},Ae,{visible:te,traceClose:Le,checkExposure:Ne})):"pop"===Oe.mode?B().createElement(Ue,R()({},Ae,{visible:te,traceClose:Le,checkExposure:Ne})):"online-ad"===Oe.mode?B().createElement(He,Ae):null:null};const Ge=(0,I.K)(We,{name:"@ctrip/trip-component-platform-online-app-download-universal",version:"6.0.4"})},62159:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},27170:function(e,_,k){var I=k(69402)("unscopables"),C=k(28580),R=k(4782),j=Array.prototype;null==j[I]&&R(j,I,C(null)),e.exports=function(e){j[I][e]=!0}},68299:function(e,_,k){var I=k(43832);e.exports=function(e){if(!I(e))throw TypeError(String(e)+" is not an object");return e}},38698:function(e,_,k){"use strict";var I=[].forEach,C=k(51409)(0),R=k(84846)("forEach");e.exports=R?function forEach(e){return C(this,e,arguments[1])}:I},21733:function(e,_,k){"use strict";var I=k(37355),C=k(4498),R=k(76681),j=k(37275),B=k(48785),H=k(51046),U=k(28050);e.exports=function from(e){var _,k,V,G,q=C(e),z="function"==typeof this?this:Array,J=arguments.length,Q=J>1?arguments[1]:void 0,ee=void 0!==Q,te=0,ne=U(q);if(ee&&(Q=I(Q,J>2?arguments[2]:void 0,2)),null==ne||z==Array&&j(ne))for(k=new z(_=B(q.length));_>te;te++)H(k,te,ee?Q(q[te],te):q[te]);else for(G=ne.call(q),k=new z;!(V=G.next()).done;te++)H(k,te,ee?R(G,Q,[V.value,te],!0):V.value);return k.length=te,k}},98491:function(e,_,k){var I=k(94373),C=k(48785),R=k(27543);e.exports=function(e){return function(_,k,j){var B,H=I(_),U=C(H.length),V=R(j,U);if(e&&k!=k){for(;U>V;)if((B=H[V++])!=B)return!0}else for(;U>V;V++)if((e||V in H)&&H[V]===k)return e||V||0;return!e&&-1}}},99982:function(e,_,k){var I=k(40022),C=k(69402)("species");e.exports=function(e){return!I((function(){var _=[];return(_.constructor={})[C]=function(){return{foo:1}},1!==_[e](Boolean).foo}))}},51409:function(e,_,k){var I=k(37355),C=k(94933),R=k(4498),j=k(48785),B=k(64959);e.exports=function(e,_){var k=1==e,H=2==e,U=3==e,V=4==e,G=6==e,q=5==e||G,z=_||B;return function(_,B,J){for(var Q,ee,te=R(_),ne=C(te),re=I(B,J,3),oe=j(ne.length),ie=0,ae=k?z(_,oe):H?z(_,0):void 0;oe>ie;ie++)if((q||ie in ne)&&(ee=re(Q=ne[ie],ie,te),e))if(k)ae[ie]=ee;else if(ee)switch(e){case 3:return!0;case 5:return Q;case 6:return ie;case 2:ae.push(Q)}else if(V)return!1;return G?-1:U||V?V:ae}}},57982:function(e,_,k){var I=k(62159),C=k(4498),R=k(94933),j=k(48785);e.exports=function(e,_,k,B,H){I(_);var U=C(e),V=R(U),G=j(U.length),q=H?G-1:0,z=H?-1:1;if(k<2)for(;;){if(q in V){B=V[q],q+=z;break}if(q+=z,H?q<0:G<=q)throw TypeError("Reduce of empty array with no initial value")}for(;H?q>=0:G>q;q+=z)q in V&&(B=_(B,V[q],q,U));return B}},64959:function(e,_,k){var I=k(43832),C=k(80675),R=k(69402)("species");e.exports=function(e,_){var k;return C(e)&&("function"!=typeof(k=e.constructor)||k!==Array&&!C(k.prototype)?I(k)&&null===(k=k[R])&&(k=void 0):k=void 0),new(void 0===k?Array:k)(0===_?0:_)}},37355:function(e,_,k){var I=k(62159);e.exports=function(e,_,k){if(I(e),void 0===_)return e;switch(k){case 0:return function(){return e.call(_)};case 1:return function(k){return e.call(_,k)};case 2:return function(k,I){return e.call(_,k,I)};case 3:return function(k,I,C){return e.call(_,k,I,C)}}return function(){return e.apply(_,arguments)}}},76681:function(e,_,k){var I=k(68299);e.exports=function(e,_,k,C){try{return C?_(I(k)[0],k[1]):_(k)}catch(_){var R=e.return;throw void 0!==R&&I(R.call(e)),_}}},36692:function(e,_,k){var I=k(69402)("iterator"),C=!1;try{var R=0,j={next:function(){return{done:!!R++}},return:function(){C=!0}};j[I]=function(){return this},Array.from(j,(function(){throw 2}))}catch(e){}e.exports=function(e,_){if(!_&&!C)return!1;var k=!1;try{var R={};R[I]=function(){return{next:function(){return{done:k=!0}}}},e(R)}catch(e){}return k}},93981:function(e){var _={}.toString;e.exports=function(e){return _.call(e).slice(8,-1)}},88650:function(e,_,k){var I=k(93981),C=k(69402)("toStringTag"),R="Arguments"==I(function(){return arguments}());e.exports=function(e){var _,k,j;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(k=function(e,_){try{return e[_]}catch(e){}}(_=Object(e),C))?k:R?I(_):"Object"==(j=I(_))&&"function"==typeof _.callee?"Arguments":j}},76615:function(e,_,k){var I=k(29923),C=k(81723),R=k(33740),j=k(75487);e.exports=function(e,_){for(var k=C(_),B=j.f,H=R.f,U=0;U<k.length;U++){var V=k[U];I(e,V)||B(e,V,H(_,V))}}},92041:function(e,_,k){e.exports=!k(40022)((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},66600:function(e,_,k){"use strict";var I=k(67142).IteratorPrototype,C=k(28580),R=k(32499),j=k(67271),B=k(73456),returnThis=function(){return this};e.exports=function(e,_,k){var H=_+" Iterator";return e.prototype=C(I,{next:R(1,k)}),j(e,H,!1,!0),B[H]=returnThis,e}},32499:function(e){e.exports=function(e,_){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:_}}},51046:function(e,_,k){"use strict";var I=k(60680),C=k(75487),R=k(32499);e.exports=function(e,_,k){var j=I(_);j in e?C.f(e,j,R(0,k)):e[j]=k}},78224:function(e,_,k){"use strict";var I=k(49252),C=k(66600),R=k(84316),j=k(94914),B=k(67271),H=k(4782),U=k(54014),V=k(42413),G=k(69402)("iterator"),q=k(73456),z=k(67142),J=z.IteratorPrototype,Q=z.BUGGY_SAFARI_ITERATORS,ee="keys",te="values",ne="entries",returnThis=function(){return this};e.exports=function(e,_,k,z,re,oe,ie){C(k,_,z);var ae,le,se,getIterationMethod=function(e){if(e===re&&he)return he;if(!Q&&e in de)return de[e];switch(e){case ee:return function keys(){return new k(this,e)};case te:return function values(){return new k(this,e)};case ne:return function entries(){return new k(this,e)}}return function(){return new k(this)}},ce=_+" Iterator",ue=!1,de=e.prototype,pe=de[G]||de["@@iterator"]||re&&de[re],he=!Q&&pe||getIterationMethod(re),fe="Array"==_&&de.entries||pe;if(fe&&(ae=R(fe.call(new e)),J!==Object.prototype&&ae.next&&(V||R(ae)===J||(j?j(ae,J):"function"!=typeof ae[G]&&H(ae,G,returnThis)),B(ae,ce,!0,!0),V&&(q[ce]=returnThis))),re==te&&pe&&pe.name!==te&&(ue=!0,he=function values(){return pe.call(this)}),V&&!ie||de[G]===he||H(de,G,he),q[_]=he,re)if(le={values:getIterationMethod(te),keys:oe?he:getIterationMethod(ee),entries:getIterationMethod(ne)},ie)for(se in le)(Q||ue||!(se in de))&&U(de,se,le[se]);else I({target:_,proto:!0,forced:Q||ue},le);return le}},92128:function(e,_,k){e.exports=!k(40022)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},85327:function(e,_,k){var I=k(43832),C=k(99146).document,R=I(C)&&I(C.createElement);e.exports=function(e){return R?C.createElement(e):{}}},96300:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},32194:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},49252:function(e,_,k){var I=k(99146),C=k(33740).f,R=k(4782),j=k(54014),B=k(23232),H=k(76615),U=k(83528);e.exports=function(e,_){var k,V,G,q,z,J=e.target,Q=e.global,ee=e.stat;if(k=Q?I:ee?I[J]||B(J,{}):(I[J]||{}).prototype)for(V in _){if(q=_[V],G=e.noTargetGet?(z=C(k,V))&&z.value:k[V],!U(Q?V:J+(ee?".":"#")+V,e.forced)&&void 0!==G){if(typeof q==typeof G)continue;H(q,G)}(e.sham||G&&G.sham)&&R(q,"sham",!0),j(k,V,q,e)}}},40022:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},11242:function(e,_,k){e.exports=k(62171)("native-function-to-string",Function.toString)},28050:function(e,_,k){var I=k(88650),C=k(69402)("iterator"),R=k(73456);e.exports=function(e){if(null!=e)return e[C]||e["@@iterator"]||R[I(e)]}},99146:function(e){e.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},29923:function(e){var _={}.hasOwnProperty;e.exports=function(e,k){return _.call(e,k)}},77015:function(e){e.exports={}},4782:function(e,_,k){var I=k(75487),C=k(32499);e.exports=k(92128)?function(e,_,k){return I.f(e,_,C(1,k))}:function(e,_,k){return e[_]=k,e}},69549:function(e,_,k){var I=k(99146).document;e.exports=I&&I.documentElement},50011:function(e,_,k){e.exports=!k(92128)&&!k(40022)((function(){return 7!=Object.defineProperty(k(85327)("div"),"a",{get:function(){return 7}}).a}))},94933:function(e,_,k){var I=k(40022),C=k(93981),R="".split;e.exports=I((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==C(e)?R.call(e,""):Object(e)}:Object},242:function(e,_,k){var I,C,R,j=k(76829),B=k(43832),H=k(4782),U=k(29923),V=k(26388),G=k(77015),q=k(99146).WeakMap;if(j){var z=new q,J=z.get,Q=z.has,ee=z.set;I=function(e,_){return ee.call(z,e,_),_},C=function(e){return J.call(z,e)||{}},R=function(e){return Q.call(z,e)}}else{var te=V("state");G[te]=!0,I=function(e,_){return H(e,te,_),_},C=function(e){return U(e,te)?e[te]:{}},R=function(e){return U(e,te)}}e.exports={set:I,get:C,has:R,enforce:function(e){return R(e)?C(e):I(e,{})},getterFor:function(e){return function(_){var k;if(!B(_)||(k=C(_)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return k}}}},37275:function(e,_,k){var I=k(73456),C=k(69402)("iterator"),R=Array.prototype;e.exports=function(e){return void 0!==e&&(I.Array===e||R[C]===e)}},80675:function(e,_,k){var I=k(93981);e.exports=Array.isArray||function isArray(e){return"Array"==I(e)}},83528:function(e,_,k){var I=k(40022),C=/#|\.prototype\./,isForced=function(e,_){var k=j[R(e)];return k==H||k!=B&&("function"==typeof _?I(_):!!_)},R=isForced.normalize=function(e){return String(e).replace(C,".").toLowerCase()},j=isForced.data={},B=isForced.NATIVE="N",H=isForced.POLYFILL="P";e.exports=isForced},43832:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},42413:function(e){e.exports=!1},67142:function(e,_,k){"use strict";var I,C,R,j=k(84316),B=k(4782),H=k(29923),U=k(42413),V=k(69402)("iterator"),G=!1;[].keys&&("next"in(R=[].keys())?(C=j(j(R)))!==Object.prototype&&(I=C):G=!0),null==I&&(I={}),U||H(I,V)||B(I,V,(function(){return this})),e.exports={IteratorPrototype:I,BUGGY_SAFARI_ITERATORS:G}},73456:function(e){e.exports={}},79465:function(e,_,k){e.exports=!k(40022)((function(){String(Symbol())}))},76829:function(e,_,k){var I=k(11242),C=k(99146).WeakMap;e.exports="function"==typeof C&&/native code/.test(I.call(C))},36172:function(e,_,k){"use strict";var I=k(11790),C=k(92647),R=k(83639),j=k(4498),B=k(94933),H=Object.assign;e.exports=!H||k(40022)((function(){var e={},_={},k=Symbol(),C="abcdefghijklmnopqrst";return e[k]=7,C.split("").forEach((function(e){_[e]=e})),7!=H({},e)[k]||I(H({},_)).join("")!=C}))?function assign(e,_){for(var k=j(e),H=arguments.length,U=1,V=C.f,G=R.f;H>U;)for(var q,z=B(arguments[U++]),J=V?I(z).concat(V(z)):I(z),Q=J.length,ee=0;Q>ee;)G.call(z,q=J[ee++])&&(k[q]=z[q]);return k}:H},28580:function(e,_,k){var I=k(68299),C=k(21944),R=k(32194),j=k(69549),B=k(85327),H=k(26388)("IE_PROTO"),Empty=function(){},createDict=function(){var e,_=B("iframe"),k=R.length;for(_.style.display="none",j.appendChild(_),_.src=String("javascript:"),(e=_.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),createDict=e.F;k--;)delete createDict.prototype[R[k]];return createDict()};e.exports=Object.create||function create(e,_){var k;return null!==e?(Empty.prototype=I(e),k=new Empty,Empty.prototype=null,k[H]=e):k=createDict(),void 0===_?k:C(k,_)},k(77015)[H]=!0},21944:function(e,_,k){var I=k(92128),C=k(75487),R=k(68299),j=k(11790);e.exports=I?Object.defineProperties:function defineProperties(e,_){R(e);for(var k,I=j(_),B=I.length,H=0;B>H;)C.f(e,k=I[H++],_[k]);return e}},75487:function(e,_,k){var I=k(92128),C=k(50011),R=k(68299),j=k(60680),B=Object.defineProperty;_.f=I?B:function defineProperty(e,_,k){if(R(e),_=j(_,!0),R(k),C)try{return B(e,_,k)}catch(e){}if("get"in k||"set"in k)throw TypeError("Accessors not supported");return"value"in k&&(e[_]=k.value),e}},33740:function(e,_,k){var I=k(92128),C=k(83639),R=k(32499),j=k(94373),B=k(60680),H=k(29923),U=k(50011),V=Object.getOwnPropertyDescriptor;_.f=I?V:function getOwnPropertyDescriptor(e,_){if(e=j(e),_=B(_,!0),U)try{return V(e,_)}catch(e){}if(H(e,_))return R(!C.f.call(e,_),e[_])}},61617:function(e,_,k){var I=k(14252),C=k(32194).concat("length","prototype");_.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return I(e,C)}},92647:function(e,_){_.f=Object.getOwnPropertySymbols},84316:function(e,_,k){var I=k(29923),C=k(4498),R=k(26388)("IE_PROTO"),j=k(92041),B=Object.prototype;e.exports=j?Object.getPrototypeOf:function(e){return e=C(e),I(e,R)?e[R]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?B:null}},14252:function(e,_,k){var I=k(29923),C=k(94373),R=k(98491)(!1),j=k(77015);e.exports=function(e,_){var k,B=C(e),H=0,U=[];for(k in B)!I(j,k)&&I(B,k)&&U.push(k);for(;_.length>H;)I(B,k=_[H++])&&(~R(U,k)||U.push(k));return U}},11790:function(e,_,k){var I=k(14252),C=k(32194);e.exports=Object.keys||function keys(e){return I(e,C)}},83639:function(e,_){"use strict";var k={}.propertyIsEnumerable,I=Object.getOwnPropertyDescriptor,C=I&&!k.call({1:2},1);_.f=C?function propertyIsEnumerable(e){var _=I(this,e);return!!_&&_.enumerable}:k},94914:function(e,_,k){var I=k(16797);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,_=!1,k={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(k,[]),_=k instanceof Array}catch(e){}return function setPrototypeOf(k,C){return I(k,C),_?e.call(k,C):k.__proto__=C,k}}():void 0)},95467:function(e,_,k){var I=k(11790),C=k(94373),R=k(83639).f;e.exports=function(e,_){for(var k,j=C(e),B=I(j),H=B.length,U=0,V=[];H>U;)R.call(j,k=B[U++])&&V.push(_?[k,j[k]]:j[k]);return V}},81723:function(e,_,k){var I=k(61617),C=k(92647),R=k(68299),j=k(99146).Reflect;e.exports=j&&j.ownKeys||function ownKeys(e){var _=I.f(R(e)),k=C.f;return k?_.concat(k(e)):_}},54014:function(e,_,k){var I=k(99146),C=k(4782),R=k(29923),j=k(23232),B=k(11242),H=k(242),U=H.get,V=H.enforce,G=String(B).split("toString");k(62171)("inspectSource",(function(e){return B.call(e)})),(e.exports=function(e,_,k,B){var H=!!B&&!!B.unsafe,U=!!B&&!!B.enumerable,q=!!B&&!!B.noTargetGet;"function"==typeof k&&("string"!=typeof _||R(k,"name")||C(k,"name",_),V(k).source=G.join("string"==typeof _?_:"")),e!==I?(H?!q&&e[_]&&(U=!0):delete e[_],U?e[_]=k:C(e,_,k)):U?e[_]=k:j(_,k)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&U(this).source||B.call(this)}))},39220:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},23232:function(e,_,k){var I=k(99146),C=k(4782);e.exports=function(e,_){try{C(I,e,_)}catch(k){I[e]=_}return _}},67271:function(e,_,k){var I=k(75487).f,C=k(29923),R=k(69402)("toStringTag");e.exports=function(e,_,k){e&&!C(e=k?e:e.prototype,R)&&I(e,R,{configurable:!0,value:_})}},26388:function(e,_,k){var I=k(62171)("keys"),C=k(42870);e.exports=function(e){return I[e]||(I[e]=C(e))}},62171:function(e,_,k){var I=k(99146),C=k(23232),R="__core-js_shared__",j=I[R]||C(R,{});(e.exports=function(e,_){return j[e]||(j[e]=void 0!==_?_:{})})("versions",[]).push({version:"3.0.0",mode:k(42413)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},84846:function(e,_,k){"use strict";var I=k(40022);e.exports=function(e,_){var k=[][e];return!k||!I((function(){k.call(null,_||function(){throw Error()},1)}))}},27543:function(e,_,k){var I=k(39767),C=Math.max,R=Math.min;e.exports=function(e,_){var k=I(e);return k<0?C(k+_,0):R(k,_)}},94373:function(e,_,k){var I=k(94933),C=k(39220);e.exports=function(e){return I(C(e))}},39767:function(e){var _=Math.ceil,k=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?k:_)(e)}},48785:function(e,_,k){var I=k(39767),C=Math.min;e.exports=function(e){return e>0?C(I(e),9007199254740991):0}},4498:function(e,_,k){var I=k(39220);e.exports=function(e){return Object(I(e))}},60680:function(e,_,k){var I=k(43832);e.exports=function(e,_){if(!I(e))return e;var k,C;if(_&&"function"==typeof(k=e.toString)&&!I(C=k.call(e)))return C;if("function"==typeof(k=e.valueOf)&&!I(C=k.call(e)))return C;if(!_&&"function"==typeof(k=e.toString)&&!I(C=k.call(e)))return C;throw TypeError("Can't convert object to primitive value")}},42870:function(e){var _=0,k=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++_+k).toString(36))}},16797:function(e,_,k){var I=k(43832),C=k(68299);e.exports=function(e,_){if(C(e),!I(_)&&null!==_)throw TypeError("Can't set "+String(_)+" as a prototype")}},69402:function(e,_,k){var I=k(62171)("wks"),C=k(42870),R=k(99146).Symbol,j=k(79465);e.exports=function(e){return I[e]||(I[e]=j&&R[e]||(j?R:C)("Symbol."+e))}},50352:function(e,_,k){"use strict";var I=k(51409)(2),C=k(99982)("filter");k(49252)({target:"Array",proto:!0,forced:!C},{filter:function filter(e){return I(this,e,arguments[1])}})},88755:function(e,_,k){"use strict";var I=k(38698);k(49252)({target:"Array",proto:!0,forced:[].forEach!=I},{forEach:I})},63503:function(e,_,k){var I=!k(36692)((function(e){Array.from(e)}));k(49252)({target:"Array",stat:!0,forced:I},{from:k(21733)})},42268:function(e,_,k){"use strict";var I=k(94373),C=k(27170),R=k(73456),j=k(242),B=k(78224),H="Array Iterator",U=j.set,V=j.getterFor(H);e.exports=B(Array,"Array",(function(e,_){U(this,{type:H,target:I(e),index:0,kind:_})}),(function(){var e=V(this),_=e.target,k=e.kind,I=e.index++;return!_||I>=_.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==k?{value:I,done:!1}:"values"==k?{value:_[I],done:!1}:{value:[I,_[I]],done:!1}}),"values"),R.Arguments=R.Array,C("keys"),C("values"),C("entries")},70458:function(e,_,k){"use strict";var I=k(51409)(1),C=k(99982)("map");k(49252)({target:"Array",proto:!0,forced:!C},{map:function map(e){return I(this,e,arguments[1])}})},11909:function(e,_,k){"use strict";var I=k(57982),C=k(84846)("reduce");k(49252)({target:"Array",proto:!0,forced:C},{reduce:function reduce(e){return I(this,e,arguments.length,arguments[1],!1)}})},99605:function(e,_,k){var I=k(36172);k(49252)({target:"Object",stat:!0,forced:Object.assign!==I},{assign:I})},80954:function(e,_,k){var I=k(95467);k(49252)({target:"Object",stat:!0},{entries:function entries(e){return I(e,!0)}})},68559:function(e,_,k){var I=k(95467);k(49252)({target:"Object",stat:!0},{values:function values(e){return I(e)}})},57614:function(e,_,k){var I=k(96300),C=k(38698),R=k(4782),j=k(99146);for(var B in I){var H=j[B],U=H&&H.prototype;if(U&&U.forEach!==C)try{R(U,"forEach",C)}catch(e){U.forEach=C}}},29794:function(e,_,k){var I=k(96300),C=k(42268),R=k(99146),j=k(4782),B=k(69402),H=B("iterator"),U=B("toStringTag"),V=C.values;for(var G in I){var q=R[G],z=q&&q.prototype;if(z){if(z[H]!==V)try{j(z,H,V)}catch(e){z[H]=V}if(z[U]||j(z,U,G),I[G])for(var J in C)if(z[J]!==C[J])try{j(z,J,C[J])}catch(e){z[J]=C[J]}}}},56450:function(e,_,k){"use strict";_.__esModule=!0,_.default=void 0;var I=function _interopRequireWildcard(e,_){if(!_&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var k=_getRequireWildcardCache(_);if(k&&k.has(e))return k.get(e);var I={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in e)if("default"!==R&&Object.prototype.hasOwnProperty.call(e,R)){var j=C?Object.getOwnPropertyDescriptor(e,R):null;j&&(j.get||j.set)?Object.defineProperty(I,R,j):I[R]=e[R]}I.default=e,k&&k.set(e,I);return I}(k(67294)),C=k(57942),R=k(98876),j=k(47383),B=k(64050);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var _=new WeakMap,k=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?k:_})(e)}var H=function CookieBanner(e){var _=e.onConfirm,k=(0,C.useShowBanner)(_),H=k.shouldShowBanner,U=k.closeBanner;return(0,I.useEffect)((function(){H&&(0,B.track)(j.KEY_TRACK_EXPOSURE,{triggertype:"exposure"})}),[H]),I.default.createElement("div",{className:"cookie-banner"},H?I.default.createElement(R.BottomBanner,{onAccept:function onAccept(){return U(!1)},onDecline:function onDecline(){return U(!0)}}):null)};_.default=H},98876:function(e,_,k){"use strict";_.__esModule=!0,_.BottomBanner=void 0;var I=function _interopRequireWildcard(e,_){if(!_&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var k=_getRequireWildcardCache(_);if(k&&k.has(e))return k.get(e);var I={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in e)if("default"!==R&&Object.prototype.hasOwnProperty.call(e,R)){var j=C?Object.getOwnPropertyDescriptor(e,R):null;j&&(j.get||j.set)?Object.defineProperty(I,R,j):I[R]=e[R]}I.default=e,k&&k.set(e,I);return I}(k(67294)),C=k(2685),R=k(47383),j=k(64050);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var _=new WeakMap,k=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?k:_})(e)}_.BottomBanner=function BottomBanner(e){var _=e.onAccept,k=e.onDecline,B=(0,I.useState)(!1),H=B[0],U=B[1],V=(0,C.useI18n)(R.SHARK_ID);return I.default.createElement("div",{className:"cookie-banner-bottom"},I.default.createElement("div",{className:"cookie-banner-container"},I.default.createElement("section",{className:"cookie-banner-words"},I.default.createElement("div",{className:"cookie-banner-title",onClick:function onClick(){H?(0,j.track)(R.KEY_TRACK_BANNER,{triggertype:"action",click:"CLOSE_MORE"}):(0,j.track)(R.KEY_TRACK_BANNER,{triggertype:"action",click:"OPEN_MORE"}),U((function(e){return!e}))}},V.key_cookie_title,I.default.createElement("span",{className:"cookie-banner-expand "+(H?"cookie-banner-expand-up":"")})),H&&I.default.createElement("div",{className:"cookie-banner-content",onClick:function onClick(e){e.target.getAttribute("href")&&(0,j.track)(R.KEY_TRACK_BANNER,{operation:"Policy"})},dangerouslySetInnerHTML:{__html:V.key_cookie_content}})),I.default.createElement("div",{className:"cookie-banner-btn-group"},I.default.createElement("div",{className:"cookie-banner-btn-accept",onClick:function onClick(){_(),(0,j.track)(R.KEY_TRACK_BANNER,{triggertype:"action",operation:"OK"})}},V.key_cookie_btn_accept),I.default.createElement("div",{className:"cookie-banner-btn-more",onClick:function onClick(){k(),(0,j.track)(R.KEY_TRACK_BANNER,{triggertype:"action",operation:"Decline"})}},V.key_cookie_btn_decline||"Decline"))))}},47383:function(e,_){"use strict";_.__esModule=!0,_.KEY_TRACK_ACTION=_.KEY_TRACK_EXPOSURE=_.KEY_TRACK_POPUP=_.KEY_TRACK_BANNER=_.CONFIG_URL=_.NEED_SHOW_BANNER_URL_SYMBOL=_.ESSENTIAL_SYMBOL=_.SHARK_ID=void 0;_.SHARK_ID={appId:"330153"};_.ESSENTIAL_SYMBOL="ibu_enable_nonessential";_.NEED_SHOW_BANNER_URL_SYMBOL="ibu_need_show_banner";_.CONFIG_URL="/m/home/getStrictCookiePolicy";_.KEY_TRACK_BANNER="ibu_pub_online_cookie_banner_action";_.KEY_TRACK_POPUP="ibu_pub_online_cookie_popup_action";_.KEY_TRACK_EXPOSURE="ibu_pub_online_cookie_fold_exposure";_.KEY_TRACK_ACTION="ibu_pub_online_cookie_fold_action"},57942:function(e,_,k){"use strict";_.__esModule=!0,_.useShowBanner=void 0;var I=k(67294),C=k(64466),R=k(47383);_.useShowBanner=function useShowBanner(e){var _=(0,I.useState)(!1),k=_[0],j=_[1],B=(0,I.useCallback)((function(_){(0,C.setCookie)(R.ESSENTIAL_SYMBOL,_?"0":"1",365),j(!1),e&&e(_)}),[]);return(0,I.useEffect)((function(){if(""===(0,C.getCookie)(R.ESSENTIAL_SYMBOL)){var e=window.location.host+window.location.pathname;try{var _=window.sessionStorage.getItem(R.NEED_SHOW_BANNER_URL_SYMBOL)||"";if(""!==_&&e!==_)return}catch(e){}(0,C.createCachedRequest)("sessionStorage")(R.CONFIG_URL).then((function(_){if(_.enable){j(!0);try{window.sessionStorage.setItem(R.NEED_SHOW_BANNER_URL_SYMBOL,e)}catch(e){}}})).catch((function(){}))}}),[]),{shouldShowBanner:k,closeBanner:B}}},6779:function(e,_,k){"use strict";var I=k(95318);_.Z=void 0;var C=I(k(56450));_.Z=C.default},64050:function(e,_,k){"use strict";_.__esModule=!0,_.track=_.getEnableEssentialStatus=void 0;var I=k(89985),C=k(64466),R=k(47383),j=function getEnableEssentialStatus(){var e=(0,C.getCookie)(R.ESSENTIAL_SYMBOL);return""===e||void 0===e?"null":e};_.getEnableEssentialStatus=j;_.track=function track(e,_){(0,I.trackLog)(e,JSON.stringify(Object.assign({triggertype:"action",cookie_status:j()},_)))}},10138:function(e,_,k){"use strict";k.d(_,{Z:function(){return ne}});var I=k(52178),C=k(67294),R=k.n(C),j=k(32376),B=k(43770),H=k(65233),U=k(5469),V=k(57590),G="ibu_online_home_language_match",q={isFromTWNotZh:!1,isFromIPRedirect:!1,isFromLastVisited:!1,isRedirect:!1,isShowSuggestion:!1,lastVisited:""},z=k(87074),J=function onClick(e,_,k,I,C){var R=new RegExp("(tripcorp|tripqate)").test(window.location.host);if("others"!==I){var B="header"===I?{current_header_currency:_,click_header_currency:e.Key,header_areatype:k}:{current_footer_currency:_,click_footer_currency:e.Key,footer_areatype:k};(0,H.c)("ibu_pub_online_headerfooter_currency_action",Object.assign({triggertype:"action"},B))}if("/"===window.location.pathname){var V=(0,U.ej)(G),z=q;try{V&&(z=JSON.parse(V))}catch(e){}var J=R?window.location.host.replace(/\w+.\w+.qa.nt./,""):"trip.com";(0,U.d8)(G,JSON.stringify(Object.assign({},z,{isRedirect:!0})),365,J)}C(e,_,I),setTimeout((function(){!function redirectUrl(e){var _=window.location.search.length>0?(0,j.m)(window.location.search.substr(1),!0):{};_.curr=e,window.location.href=window.location.pathname+"?"+(0,j.X)(_)}(e.Key)}),200)},Q=function CurrencyItem(e){var _=e.currencies,k=e.currency,I=e.areaType,j=e.origin,B=e.onSelect,H=(0,C.useState)(!1),V=H[0],G=H[1];return R().createElement(R().Fragment,null,_.map((function(e,_){return R().createElement("li",{key:_,className:"mc-dropdown-currency__list-item ibu-header-currency-list-item"},R().createElement("div",{className:(0,U.ok)({"mc-dropdown-currency__item":!0,"is-active":e.Key===k,"disable-click__item":V}),onClick:function onClick(){return function handleClick(e){V||(G(!0),J(e,k,I,j,B))}(e)}},R().createElement("span",{className:"mc-dropdown-currency__code"},e.Key)," - ",R().createElement("span",{className:"mc-dropdown-currency__name"},e.Name)))})))},ee=function filterCurrencies(e,_,k){return void 0!==_&&(_=_.map((function(e){return e.toUpperCase()})),e=e.filter((function(e){return(_||[]).includes(e.Key)}))),void 0!==k&&k.length&&(k=k.map((function(e){return e.toUpperCase()})),e=e.filter((function(e){return!(k||[]).includes(e.Key)}))),e};const te=function CurrencySelector(e){var _=e.currency,k=e.whiteList,I=e.blackList,j=e.origin,H=void 0===j?"others":j,G=e.onSelect,q=void 0===G?function(){}:G,J=e.isRtl,te=e.apiHost,ne=void 0===te?"":te,re=function useI18nApp(){if("undefined"!=typeof window){var e=window.__SHARK_ARES_SDK_INTERNAL_RESOURCE__||{},_="i18n_33000001";return window[_]||e[_]?(0,z.Q)("33000001"):(0,z.Q)("100009239")}var k=(0,z.Q)("33000001");return k.ButtonText_Hotel||k.ButtonText_Flights?k:(0,z.Q)("100009239")}(),oe=(0,B.N)().locale,ie=(0,C.useState)([]),ae=ie[0],le=ie[1],se=(0,C.useState)([]),ce=se[0],ue=se[1];ne&&ne.lastIndexOf("/")===ne.length-1&&(ne=ne.slice(0,ne.lastIndexOf("/"))),(0,C.useEffect)((function(){(0,V.k)()(ne+"/m/home/getCurrencyAndTopCurrency?locale="+oe,{version:"v1"}).then((function(e){le(ee(e.currencies||[],k,I)),ue(ee(e.topCurrencies||[],k,I))})).catch((function(e){}))}),[]);var de=(0,U.eZ)(oe,J);return R().createElement("div",{className:(0,U.ok)({"mc-dropdown-currency":!0,"mc-dropdown-currency-rtl":de})},ce.length?R().createElement(R().Fragment,null,R().createElement("div",{className:"mc-dropdown-currency__tit"},re.PageHead_CurrencyFavoriteTxt),R().createElement("div",{className:"mc-dropdown-currency__cnt"},R().createElement("ul",{className:"mc-dropdown-currency__list curr_top u-clearfix"},R().createElement(Q,{currencies:ce,currency:_,areaType:"top",origin:H,onSelect:q})))):null,ce.length&&ae.length?R().createElement("div",{className:"mc-dropdown-currency-divider"}):null,ae.length?R().createElement(R().Fragment,null,R().createElement("div",{className:"mc-dropdown-currency__tit"},re.PageHead_CurrencyOtherTxt),R().createElement("div",{className:"mc-dropdown-currency__cnt mc-dropdown-currency__all"},R().createElement("div",{className:"mc-dropdown-currency__clip"},R().createElement("ul",{className:"mc-dropdown-currency__list u-clearfix"},R().createElement(Q,{currencies:ae,currency:_,areaType:"all",origin:H,onSelect:q}))))):null)};const ne=(0,I.K)(te,{name:"@ctrip/trip-component-platform-online-currency-selector",version:"5.1.0"})},90396:function(e,_,k){"use strict";k.d(_,{Z:function(){return se}});var I=k(52178),C=k(67294),R=k.n(C),j=k(32376),B=k(32407),H=k(65233),U=k(5469),V=k(57590),G=k(87074),q=k(93231),z=k(43770),J={platform:"Online",componentType:"online-locale-selector",version:"6.1.5"},Q=function useLocaleConfig(e){var _=e.pageId;_||(_=function getPageId(){if("undefined"!=typeof window){var e=document.querySelector("input#page_id");if(e)return e.value}return""}());var k=(0,z.N)(),I=k.locale,C=k.currency,R=(0,q.ZR)({tcpCacheKey:"__agc_online-locale-selector",params:Object.assign({},J,{head:{locale:I,currency:C},pageId:_||""}),defaultContent:{}}),j=R.rawConfig,B=R.config,H=R.isInited,U=[];B.content&&B.content.localeBlackList&&(U=B.content.localeBlackList);var V=[];return B.content&&B.content.localeLinks&&(V=B.content.localeLinks),{config:B,rawConfig:j,isLocaleConfigInited:H,localeBlackList:U,localeLinks:V}},ee="ibu_online_home_language_match",te={isFromTWNotZh:!1,isFromIPRedirect:!1,isFromLastVisited:!1,isRedirect:!1,isShowSuggestion:!1,lastVisited:""},ne=function getFlagPosition(e,_){if(Array.isArray(e)&&2===e.length){var k={backgroundPosition:"-"+21*e[0]+"px -"+14*e[1]+"px"};return _&&(k.backgroundImage="url("+_+")"),k}},re=function onClick(e,_,k,I,C){var R=new RegExp("(tripcorp|tripqate)").test(window.location.host);if("others"!==k){var B="header"===k?{current_header_locale:_,click_header_locale:e.locale}:{current_footer_locale:_,click_footer_locale:e.locale};(0,H.c)("ibu_pub_online_headerfooter_locale_action",Object.assign({triggertype:"action"},B))}if(["/","/index","/index/","/welcome","/welcome/"].includes(window.location.pathname)){var V=(0,U.ej)(ee),G=te;try{V&&(G=JSON.parse(V))}catch(e){}var q="https://"+e.domain+"?locale="+e.locale,z="trip.com";if(R){var J=window.location.host.search(/(tripcorp|tripqate)/);z=window.location.host.slice(J)}(0,U.d8)(ee,JSON.stringify(Object.assign({},G,{lastVisited:q,isRedirect:!0,isShowSuggestion:!1})),365,z)}I(e,_,k),setTimeout((function(){!function redirectUrl(e,_){var k=e.site,I=e.domain,C=e.locale,R=e.link,B=window.location.search.length>0?(0,j.m)(window.location.search.substr(1),!0):{};B.locale=C,"CN"!==k?R?0===R.indexOf("/")?window.location.href="//"+I+R+"?"+(0,j.X)({locale:C}):window.location.href=R:window.location.href=_?"//"+window.location.host+window.location.pathname+"?"+(0,j.X)(B):"//"+I+window.location.pathname+"?"+(0,j.X)(B):window.location.href="//"+I}(e,C)}),200)},oe=function HoverSelect(e){var _,k,I,C,j=e.item,B=e.normalizedLocale,H=e.handleClick,V=j.other;return null!=(_=j.other)&&_.languageName.hk&&(I={text:V.languageName.hk,onClick:function onClick(){H(j)},active:"zh_hk"===B}),null!=(k=j.other)&&k.languageName.tw&&(C={text:V.languageName.tw,onClick:function onClick(){H({domain:V.domain,icon:"flag-tc",languageName:V.languageName.zh,locale:V.locale,site:V.site,link:V.link})},active:"zh_tw"===B}),R().createElement("div",{className:"mc-dropdown-country__zh-container"},I?R().createElement("span",{className:(0,U.ok)("grouped-hk",{"is-active":I.active}),onClick:I.onClick},I.text):null,I&&C?R().createElement("div",{className:"divider"}):null,C?R().createElement("span",{className:(0,U.ok)("grouped-tw",{"is-active":C.active}),onClick:C.onClick},C.text):null,R().createElement("div",{className:"zh-triangle"}))},ie=function ClickSelect(e){var _,k,I=e.item,C=e.normalizedLocale,j=e.handleClick,B=I.other;return B.languageName.hk&&(_={text:B.languageName.hk,onClick:function onClick(){j(I)},active:"zh_hk"===C}),B.languageName.tw&&(k={text:B.languageName.tw,onClick:function onClick(){j({domain:B.domain,icon:"flag-tc",languageName:B.languageName.zh,locale:B.locale,site:B.site,link:B.link})},active:"zh_tw"===C}),R().createElement("ul",{className:"mc-dropdown-country__zh-container-click"},_?R().createElement("li",{className:(0,U.ok)("grouped-hk",{"is-active":_.active}),onClick:_.onClick},_.text):null,k?R().createElement("li",{className:(0,U.ok)("grouped-tw",{"is-active":k.active}),onClick:k.onClick},k.text):null)},ae=function H5CountryItem(e){var _,k,I,j,H=e.locale,V=e.item,G=e.handleItemClick,q=e.flagUrl,z=(0,B.formatLocale)(H,"aa_bb"),J="string"==typeof(null==(_=V.other)||null==(k=_.languageName)?void 0:k.zh),Q=(0,C.useState)(!0),ee=Q[0],te=Q[1],re=0;J&&(re=(null!=(I=V.other)&&I.languageName.tw?42:0)+(null!=(j=V.other)&&j.languageName.hk?42:0));var oe=J?V.other.languageName.zh:V.languageName;return R().createElement("div",{className:"mc-dropdown-country__item-h5"},R().createElement("div",{className:"mc-dropdown-country__item-h5-parent",onClick:function handleParentItemClick(e){J?(e.stopPropagation(),te(!ee)):G(V)}},R().createElement("i",{className:"ic-flag ic-"+(J?"flag-tc":V.icon),style:ne(J?[1,11]:V.flag,q)}),oe&&R().createElement("span",{className:"mc-dropdown-country__name",dangerouslySetInnerHTML:{__html:oe}}),J&&R().createElement("i",{className:(0,U.ok)({"fi fi-arrow-top":!0,"sub-items-collapse":ee})})),J&&R().createElement("div",{className:"sub-items",style:{overflow:"hidden",height:ee?"0px":re+"px"}},R().createElement(ie,{item:V,normalizedLocale:z,handleClick:G})))};const le=function LocaleSelector(e){var _=e.locale,k=e.whiteList,I=e.blackList,H=e.origin,q=void 0===H?"others":H,z=e.onSelect,J=void 0===z?function(){}:z,ee=e.isRtl,te=e.apiHost,ie=void 0===te?"":te,le=e.pageId,se=e.flagUrl,ce=function useI18nApp(){if("undefined"!=typeof window){var e=window.__SHARK_ARES_SDK_INTERNAL_RESOURCE__||{},_="i18n_33000001";return window[_]||e[_]?(0,G.Q)("33000001"):(0,G.Q)("100009239")}var k=(0,G.Q)("33000001");return k.ButtonText_Hotel||k.ButtonText_Flights?k:(0,G.Q)("100009239")}(),ue=(0,C.useState)([]),de=ue[0],pe=ue[1],he=(0,C.useState)([]),fe=he[0],me=he[1],ge=(0,C.useState)([]),ve=ge[0],ye=ge[1],be=(0,C.useState)(!1),_e=be[0],we=be[1],Ee=(0,C.useState)(!1),Se=Ee[0],Oe=Ee[1],Te=(0,C.useState)(!1),ke=Te[0],Ie=Te[1],Ce=(0,C.useMemo)((function(){for(var e=0;e<de.length;e++){var k=de[e],I=(0,B.formatLocale)(_,"aa_bb");if("zh_tw"===I&&k.other){var C,R=k.other||{};return Object.assign({},k,{languageName:null==R||null==(C=R.languageName)?void 0:C.tw,icon:"flag-tc",flag:[1,11]})}if("zh_hk"===I&&k.other){var j,H=k.other;return Object.assign({},k,{languageName:null==H||null==(j=H.languageName)?void 0:j.hk,icon:"flag-tc",flag:[1,11]})}if(de[e].locale===I)return de[e]}return{}}),[_,de]);ie&&ie.lastIndexOf("/")===ie.length-1&&(ie=ie.slice(0,ie.lastIndexOf("/")));var Pe=Q({pageId:le}),Le=Pe.localeLinks,Ne=Pe.localeBlackList;(0,C.useEffect)((function(){var e=function handleResize(){var e=document.body.clientWidth;Oe(e<768)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,C.useEffect)((function(){var e=(0,V.k)(),C={};"undefined"!=typeof window&&(C=(0,j.m)(window.location.search.substr(1),!0)),e(ie+"/m/home/getLocaleList?locale="+(0,B.formatLocale)(_,"aa_bb")+(C.__mockIp?"&__mockIp="+C.__mockIp:"")).then((function(e){var _=e.locales,C=e.enableReorder;Ie(C),void 0!==k&&(k=k.map((function(e){return(0,B.formatLocale)(e,"aa_bb")})),_=_.filter((function(e){if("zh_hk"===e.locale&&e.other){var _,I,C,R,j,B;if(!(null!=(_=k)&&_.includes("zh_hk")||null!=(I=k)&&I.includes("zh_tw")))return!1;if(null==(C=k)||!C.includes("zh_hk"))null==(j=e.other)||delete j.languageName.hk;if(null==(R=k)||!R.includes("zh_tw"))null==(B=e.other)||delete B.languageName.tw;return!0}return(k||[]).includes(e.locale)}))),void 0!==I&&I.length&&(I=I.map((function(e){return(0,B.formatLocale)(e,"aa_bb")})),_=_.filter((function(e){if("zh_hk"===e.locale&&e.other){var _,k,C,R,j,B;if(null!=(_=I)&&_.includes("zh_hk")&&null!=(k=I)&&k.includes("zh_tw"))return!1;if(null!=(C=I)&&C.includes("zh_hk"))null==(j=e.other)||delete j.languageName.hk;if(null!=(R=I)&&R.includes("zh_tw"))null==(B=e.other)||delete B.languageName.tw;return!0}return!(I||[]).includes(e.locale)}))),pe(_)})).catch((function(e){}))}),[]),(0,C.useEffect)((function(){if(de.length){var e=de;if(Ne.length){var _=Ne.map((function(e){return(0,B.formatLocale)(e,"aa_bb")}));e=e.filter((function(e){if("zh_hk"===e.locale&&e.other){if(null!=_&&_.includes("zh_hk")&&null!=_&&_.includes("zh_tw"))return!1;var k,I;if(null!=_&&_.includes("zh_hk"))null==(k=e.other)||delete k.languageName.hk;if(null!=_&&_.includes("zh_tw"))null==(I=e.other)||delete I.languageName.tw;return!0}return!(_||[]).includes(e.locale)}))}if(Le.length){var k={};Le.forEach((function(e){var _=(0,B.formatLocale)(e.locale,"aa_bb");k[_]=e})),e.forEach((function(e){var _=(0,B.formatLocale)(e.locale,"aa_bb");"zh_hk"===_&&e.other&&e.other.languageName&&e.other.languageName.tw&&k.zh_tw&&(e.other.link=k.zh_tw.link),k[_]&&(e.link=k[_].link)}))}if(me(e),ke){var I=function reorderLocale(e){for(var _=new Array(e.length),k=Math.ceil(e.length/3),I=0,C=0,R=0;R<e.length;R++){var j=void 0;I===k+1||3*I+C>=e.length?(j=++C,I=1):(j=3*I+C,++I),_[j]=e[R]}return _}(e);ye(I)}else ye(e)}}),[Le.length,Ne.length,de.length,Se,ke]);var De=function handleClick(e,_,k,I){_e||(we(!0),re(e,_,k,I,!!ie))},Ae=(0,U.eZ)(_,ee),Re=Se?fe:ve;return R().createElement("div",{className:(0,U.ok)({"mc-dropdown-country":!0,"mc-dropdown-country-rtl":Ae})},R().createElement("div",{className:"mc-dropdown-country__tit"},ce.PageHead_LocaleSelected),R().createElement("div",{className:"mc-dropdown-country__cnt"},R().createElement("ul",{className:"mc-dropdown-country__list_selected u-clearfix"},R().createElement("li",{className:"mc-dropdown-country__list-item li-country-click-able"},R().createElement("div",{className:(0,U.ok)("mc-dropdown-country__item js-country-item",{"is-active":!0})},R().createElement("div",{className:"mc-dropdown-country__item-online"},R().createElement("i",{className:"ic-flag ic-flag-"+Ce.locale,style:ne(Ce.flag,se)}),R().createElement("span",{className:"mc-dropdown-country__name",dangerouslySetInnerHTML:{__html:Ce.languageName}})),R().createElement("div",{className:"mc-dropdown-country__item-h5"},R().createElement("div",{className:"mc-dropdown-country__item-h5-parent"},R().createElement("i",{className:"ic-flag ic-flag-"+Ce.locale,style:ne(Ce.flag,se)}),R().createElement("span",{className:"mc-dropdown-country__name",dangerouslySetInnerHTML:{__html:Ce.languageName}}))))))),R().createElement("div",{className:"mc-dropdown-country-divider"}),R().createElement("div",{className:"mc-dropdown-country__tit"},ce.PageHead_LocaleAll),R().createElement("div",{className:"mc-dropdown-country__cnt mc-dropdown-country__all"},R().createElement("div",{className:"mc-dropdown-country__clip"},R().createElement("ul",{className:"mc-dropdown-country__list u-clearfix"},Re.map((function(e,k){var I,C,j=(0,B.formatLocale)(_,"aa_bb"),H="string"==typeof(null==(I=e.other)||null==(C=I.languageName)?void 0:C.zh),V=H?e.other.languageName.zh:e.languageName;return R().createElement("li",{key:k,className:"mc-dropdown-country__list-item li-country-click-able"},R().createElement("div",{className:(0,U.ok)("mc-dropdown-country__item js-country-item",{"is-active":H?"zh_hk"===j||"zh_tw"===j:e.locale===j,"disable-click__item":_e,"js-country-group-item":H}),onClick:function onClick(){H||De(e,_,q,J)}},R().createElement("div",{className:"mc-dropdown-country__item-online"},R().createElement("i",{className:"ic-flag ic-"+(H?"flag-tc":e.icon),style:Object.assign({},ne(H?[1,11]:e.flag,se))}),V&&R().createElement("span",{className:"mc-dropdown-country__name",dangerouslySetInnerHTML:{__html:V}}),R().createElement("span",{className:"mc-dropdown-country__zh-anchor"},H&&R().createElement(oe,{item:e,normalizedLocale:j,handleClick:function handleClick(e){De(e,_,q,J)}}))),R().createElement(ae,{locale:_,flagUrl:se,item:e,handleItemClick:function handleItemClick(e){De(e,_,q,J)}})))}))))))};const se=(0,I.K)(le,{name:"@ctrip/trip-component-platform-online-locale-selector",version:"6.2.0"})},74531:function(e,_,k){"use strict";var I=k(95318),C=k(50008);Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var R=I(k(34575)),j=I(k(93913)),B=I(k(81506)),H=I(k(2205)),U=I(k(78585)),V=I(k(29754)),G=I(k(59713)),q=function _interopRequireWildcard(e,_){if(!_&&e&&e.__esModule)return e;if(null===e||"object"!=C(e)&&"function"!=typeof e)return{default:e};var k=_getRequireWildcardCache(_);if(k&&k.has(e))return k.get(e);var I={__proto__:null},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in e)if("default"!==j&&Object.prototype.hasOwnProperty.call(e,j)){var B=R?Object.getOwnPropertyDescriptor(e,j):null;B&&(B.get||B.set)?Object.defineProperty(I,j,B):I[j]=e[j]}return I.default=e,k&&k.set(e,I),I}(k(67294)),z=I(k(73935)),J=k(64466),Q=k(92564);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var _=new WeakMap,k=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?k:_})(e)}function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,G.default)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function _createSuper(e){var _=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var k,I=(0,V.default)(e);if(_){var C=(0,V.default)(this).constructor;k=Reflect.construct(I,arguments,C)}else k=I.apply(this,arguments);return(0,U.default)(this,k)}}var ee=function(e){(0,H.default)(Tooltip,e);var _=_createSuper(Tooltip);function Tooltip(e){var k;return(0,R.default)(this,Tooltip),k=_.call(this,e),(0,G.default)((0,B.default)(k),"autoPopupTimeout",void 0),(0,G.default)((0,B.default)(k),"bodyClick",void 0),(0,G.default)((0,B.default)(k),"bodyElement",void 0),(0,G.default)((0,B.default)(k),"childNode",void 0),(0,G.default)((0,B.default)(k),"childNodeMouseEnter",void 0),(0,G.default)((0,B.default)(k),"childNodeMouseLeave",void 0),(0,G.default)((0,B.default)(k),"contentNode",void 0),(0,G.default)((0,B.default)(k),"contentNodeMouseEnter",void 0),(0,G.default)((0,B.default)(k),"contentNodeMouseLeave",void 0),(0,G.default)((0,B.default)(k),"contentNodeRenderDom",void 0),(0,G.default)((0,B.default)(k),"contentVisibleTimeout",void 0),(0,G.default)((0,B.default)(k),"tooltipArrowBorderStyle",void 0),(0,G.default)((0,B.default)(k),"tooltipArrowStyle",void 0),(0,G.default)((0,B.default)(k),"tooltipClsMap",void 0),(0,G.default)((0,B.default)(k),"tooltipPopContainerStyle",void 0),(0,G.default)((0,B.default)(k),"tooltipPopStyle",void 0),(0,G.default)((0,B.default)(k),"windowResize",void 0),(0,G.default)((0,B.default)(k),"tooltipPop",void 0),(0,G.default)((0,B.default)(k),"tooltipArrow",void 0),(0,G.default)((0,B.default)(k),"tooltipArrowBorder",void 0),(0,G.default)((0,B.default)(k),"tooltipPopContainer",void 0),(0,G.default)((0,B.default)(k),"bodyElementPosition",void 0),(0,G.default)((0,B.default)(k),"componentDidMount",(function(){k.bodyElement=document.body,k.childTriggerBinding(),k.initDom(),k.windowResize=(0,J.addEventListener)(window,"resize",k.listenResize)})),(0,G.default)((0,B.default)(k),"componentDidUpdate",(function(e){e.rerenderTrigger!==k.props.rerenderTrigger&&!k.props.isCacheContent&&k.contentNode&&k._render()})),(0,G.default)((0,B.default)(k),"getSnapshotBeforeUpdate",(function(e){var _=k.props,I=_.visible,C=_.onVisibleChange;return e.visible!==I&&(k.setDomStyle(k.tooltipPopContainer,{visibility:I?"visible":"hidden"}),C&&C(I)),null})),(0,G.default)((0,B.default)(k),"initDom",(function(){var e=k.calStyle(),_=e.tooltipPopContainerStyle,I=e.tooltipPopStyle,C=e.tooltipArrowStyle,R=e.tooltipArrowBorderStyle;k.tooltipPopContainerStyle=_,k.tooltipPopStyle=I,k.tooltipArrowStyle=C,k.tooltipArrowBorderStyle=R;var j=k.props.contentClass,B=k.tooltipClsMap,H=B.tooltipArrowCls,U=B.tooltipArrowBorderCls;k.tooltipPopContainer=k.createDivWithCls(["tooltip-pop-con",j||""]),k.tooltipPop=k.createDivWithCls(["tooltip-pop"]),k.tooltipArrow=k.createDivWithCls([H]),k.tooltipArrowBorder=k.createDivWithCls([U]),k.setDomStyle(k.tooltipPopContainer,k.tooltipPopContainerStyle),k.setDomStyle(k.tooltipPop,k.tooltipPopStyle),k.setDomStyle(k.tooltipArrow,k.tooltipArrowStyle),k.setDomStyle(k.tooltipArrowBorder,k.tooltipArrowBorderStyle),k.tooltipPopContainer.appendChild(k.tooltipPop),k.tooltipPopContainer.appendChild(k.tooltipArrow),k.tooltipPopContainer.appendChild(k.tooltipArrowBorder)})),(0,G.default)((0,B.default)(k),"componentWillUnmount",(function(){k.windowResize&&k.windowResize.remove(),k.bodyClick&&k.bodyClick.remove(),k.childNodeMouseEnter&&k.childNodeMouseEnter.remove(),k.childNodeMouseLeave&&k.childNodeMouseLeave.remove(),k.contentNodeMouseEnter&&k.contentNodeMouseEnter.remove(),k.contentNodeMouseLeave&&k.contentNodeMouseLeave.remove(),k.removeContent()})),(0,G.default)((0,B.default)(k),"listenResize",(function(){k.calPosition()})),(0,G.default)((0,B.default)(k),"childTriggerBinding",(function(){k.bodyElement&&k.childNode.current&&("hover"===k.props.trigger?(k.childNodeMouseEnter=(0,J.addEventListener)(k.childNode.current,"mouseenter",k.onMouseEnter),k.childNodeMouseLeave=(0,J.addEventListener)(k.childNode.current,"mouseleave",k.onMouseLeave),k.props.autoPopup&&(k.bodyClick=(0,J.addEventListener)(k.bodyElement,"click",k.onClickBodyAutoPopup))):"click"===k.props.trigger&&(k.bodyClick=(0,J.addEventListener)(k.bodyElement,"click",k.onClickBody)),k.autoPopupTimeout=setTimeout((function(){k.props.autoPopup&&k.onMouseEnter()}),k.props.autoPopupDelay))})),(0,G.default)((0,B.default)(k),"contentTriggerBinding",(function(){k.bodyElement&&k.contentNode&&"hover"===k.props.trigger&&(k.contentNodeMouseEnter=(0,J.addEventListener)(k.contentNode,"mouseenter",k.onMouseEnterContentNode),k.contentNodeMouseLeave=(0,J.addEventListener)(k.contentNode,"mouseleave",k.onMouseLeaveContentNode))})),(0,G.default)((0,B.default)(k),"getChildNodeRect",(function(){return k.childNode.current?k.childNode.current.getBoundingClientRect():null})),(0,G.default)((0,B.default)(k),"getChildNodeSize",(function(e){return e?{childWidth:e.width||e.right-e.left,childHeight:e.height||e.bottom-e.top}:{childWidth:0,childHeight:0}})),(0,G.default)((0,B.default)(k),"getChildNodeStyleWidth",(function(){if(k.childNode.current){var e=window.getComputedStyle(k.childNode.current).getPropertyValue("width");return parseInt(e,10)}return 0})),(0,G.default)((0,B.default)(k),"getOffset",(function(e){if(e){var _=document.body.clientWidth,k=document.body.clientHeight,I=document.documentElement.scrollLeft,C=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,R=e.left+I,j=e.top+C;return{left:R,top:j,bottom:k-j,right:_-R}}return{left:0,top:0,bottom:0,right:0}})),(0,G.default)((0,B.default)(k),"getMaxIndex",(function(){var e=0;return Array.prototype.forEach.call(document.getElementsByTagName("*"),(function(_){var k=+(0,J.getStyle)(_,"zIndex")||0;e=Math.max(k,e)})),e=e<2?20:e+100})),(0,G.default)((0,B.default)(k),"appendContent",(function(){k.bodyElement&&k.contentNode&&k.childNode.current&&(k.bodyElement.appendChild(k.contentNode),k.contentTriggerBinding())})),(0,G.default)((0,B.default)(k),"onClickChild",(function(){k.contentNode?k.removeContent():k._render()})),(0,G.default)((0,B.default)(k),"onClickBody",(function(e){return e.target===k.childNode.current||k.childNode.current&&k.childNode.current.contains(e.target)||k.props.isClickPackUp&&k.contentNode?k.onClickChild():(!k.contentNode||e.target!==k.contentNode&&!k.contentNode.contains(e.target))&&k.removeContent()})),(0,G.default)((0,B.default)(k),"onClickBodyAutoPopup",(function(e){return!(e.target===k.childNode.current||e.target===k.contentNode||!k.childNode.current||k.childNode.current.contains(e.target)||!k.contentNode||k.contentNode.contains(e.target))&&k.removeContent()})),(0,G.default)((0,B.default)(k),"onMouseEnterContentNode",(function(){clearTimeout(k.contentVisibleTimeout),clearTimeout(k.autoPopupTimeout)})),(0,G.default)((0,B.default)(k),"onMouseLeaveContentNode",(function(){k.contentVisibleTimeout=setTimeout((function(){k.removeContent()}),100)})),(0,G.default)((0,B.default)(k),"alignBottomLeft",(function(e,_,I){return k.tooltipPopContainer&&(k.tooltipPopContainer.style.left="".concat(e+k.props.tooltipHorizontalOffset,"px"),k.tooltipPopContainer.style.top="".concat(_+I,"px")),0})),(0,G.default)((0,B.default)(k),"alignBottomRight",(function(e,_,I,C){if(k.tooltipPopContainer){var R=document.body.clientWidth,j=k.tooltipPopContainer?k.tooltipPopContainer.scrollWidth:0,B=e-C+k.props.tooltipHorizontalOffset,H=0;return B+j>R&&(B-=H=B+j-R),k.tooltipPopContainer.style.right="".concat(B,"px"),k.tooltipPopContainer.style.top="".concat(_+I,"px"),H}return 0})),(0,G.default)((0,B.default)(k),"alignTopLeft",(function(e,_){return k.tooltipPopContainer&&(k.tooltipPopContainer.style.left="".concat(e+k.props.tooltipHorizontalOffset,"px"),k.tooltipPopContainer.style.bottom="".concat(_,"px")),0})),(0,G.default)((0,B.default)(k),"alignTopRight",(function(e,_,I){if(k.tooltipPopContainer){var C=document.body.clientWidth,R=k.tooltipPopContainer?k.tooltipPopContainer.scrollWidth:0,j=e-I+k.props.tooltipHorizontalOffset,B=0;return j+R>C&&(j-=B=j+R-C),k.tooltipPopContainer.style.right="".concat(j,"px"),k.tooltipPopContainer.style.bottom="".concat(_,"px"),B}return 0})),(0,G.default)((0,B.default)(k),"alignTopMiddle",(function(e,_,I,C){if(k.tooltipPopContainer){var R=document.body.clientWidth,j=k.tooltipPopContainer?k.tooltipPopContainer.scrollWidth:0,B=_-C+k.props.tooltipHorizontalOffset,H=0;return(B-=j-C>>1)+j>R&&(B-=H=B+j-R),k.tooltipPopContainer.style.right="".concat(B,"px"),k.tooltipPopContainer.style.bottom="".concat(I,"px"),k._fixAutoWidthForMiddleLayout(j),H}return 0})),(0,G.default)((0,B.default)(k),"alignBottomMiddle",(function(e,_,I,C,R){if(k.tooltipPopContainer){var j=document.body.clientWidth,B=k.tooltipPopContainer?k.tooltipPopContainer.scrollWidth:0,H=_-R+k.props.tooltipHorizontalOffset,U=0;return(H-=B-R>>1)+B>j&&(H-=U=H+B-j),k.tooltipPopContainer.style.right="".concat(H,"px"),k.tooltipPopContainer.style.top="".concat(I+C,"px"),k._fixAutoWidthForMiddleLayout(B),U}return 0})),(0,G.default)((0,B.default)(k),"_fixAutoWidthForMiddleLayout",(function(e){k.isAlignMiddle&&!k.tooltipPopContainer.style.width&&e&&(k.tooltipPopContainer.style.width="".concat(e+1,"px"))})),(0,G.default)((0,B.default)(k),"removeContent",(function(){if(k.bodyElement&&k.contentNode){try{k.bodyElement.removeChild(k.contentNode)}catch(e){}k.bodyElementPosition&&k.setDomStyle(k.bodyElement,{position:k.bodyElementPosition}),k.contentNode=null,k.props.onVisibleChange&&k.props.onVisibleChange(!1)}})),(0,G.default)((0,B.default)(k),"tooltipCls",(function(){var e=k.props.align,_=Q.tooltipAlignMap[e],I=_.arrowBorderColorDirection,C=_.arrowHorizontalOffsetDirection,R=_.arrowVerticalOffsetDirection,j=_.containerBoxShadow,B=_.containerPaddingDirection;return{tooltipArrowCls:"tooltip-pop-arrow-".concat(R),tooltipArrowBorderCls:"tooltip-pop-arrow-".concat(R,"-border"),arrowBorderColorDirection:I,arrowHorizontalOffsetDirection:C,containerPaddingDirection:B,containerBoxShadow:j,arrowVerticalOffsetDirection:R}})),(0,G.default)((0,B.default)(k),"calPosition",(function(){var e=k.props.align,_=k.getChildNodeRect(),I=k.getChildNodeSize(_),C=I.childWidth,R=I.childHeight;if(!C||!R)return k.removeContent();var j=k.getOffset(_),B=j.left,H=j.top,U=j.right,V=j.bottom;return{bottomLeft:function bottomLeft(){return k.alignBottomLeft(B,H,R)},bottomRight:function bottomRight(){return k.alignBottomRight(U,H,R,C)},topLeft:function topLeft(){return k.alignTopLeft(B,V)},topRight:function topRight(){return k.alignTopRight(U,V,C)},topMiddle:function topMiddle(){return k.alignTopMiddle(B,U,V,C)},bottomMiddle:function bottomMiddle(){return k.alignBottomMiddle(B,U,H,R,C)}}[e]()})),(0,G.default)((0,B.default)(k),"calStyle",(function(){var e=k.props,_=e.arrowBgColor,I=e.arrowHorizontalOffset,C=e.arrowSize,R=e.borderColor,j=e.tooltipVerticalOffset,B=e.customStyle,H=k.tooltipClsMap,U=H.arrowBorderColorDirection,V=H.arrowHorizontalOffsetDirection,q=H.containerPaddingDirection,z=H.containerBoxShadow,J=H.arrowVerticalOffsetDirection,Q=k.getChildNodeRect(),ee=k.getChildNodeSize(Q).childWidth,te=(k.tooltipPopContainer&&k.tooltipPopContainer.scrollWidth,j),ne=(0,G.default)((0,G.default)({position:"absolute",zIndex:"".concat(k.props.zIndex||k.getMaxIndex()||100)},q,"".concat(2*C-te,"px")),"visibility","visible"),re=B?_objectSpread({},B):{border:"1px solid ".concat(R),boxShadow:k.props.containerBoxShadow||z,backgroundColor:k.props.tooltipBgColor||"#fff"},oe=(0,G.default)((0,G.default)({},V,k.isAlignMiddle?"50%":"".concat(ee/2-C+I,"px")),"borderWidth","".concat(C,"px"));return k.isAlignMiddle&&Object.assign(oe,{transform:"translateX(50%)"}),{tooltipPopContainerStyle:ne,tooltipPopStyle:re,tooltipArrowStyle:_objectSpread((0,G.default)((0,G.default)({},U,_),J,"".concat(1-te,"px")),oe),tooltipArrowBorderStyle:_objectSpread((0,G.default)((0,G.default)({},U,R),J,"".concat(0-te,"px")),oe)}})),(0,G.default)((0,B.default)(k),"setDomStyle",(function(e,_){e&&Object.keys(_).forEach((function(k){e.style[k]=_[k]}))})),(0,G.default)((0,B.default)(k),"createDivWithCls",(function(e){var _=document.createElement("div");return e&&e.forEach((function(e){e&&_.classList.add(e)})),_})),(0,G.default)((0,B.default)(k),"_render",(function(e){var _=k.props,I=_.onVisibleChange,C=_.isCacheContent;k.setDomStyle(k.tooltipPopContainer,{visibility:"visible"}),k.calPosition(),k.contentNode=k.tooltipPopContainer,k.bodyElement&&(k.bodyElementPosition=(0,J.getStyle)(k.bodyElement,"position"),["absolute","fixed"].includes(k.bodyElementPosition)||k.setDomStyle(k.bodyElement,{position:"relative"})),C?!k.contentNodeRenderDom&&k.tooltipPop&&(k.contentNodeRenderDom=z.default.createPortal(k.props.content,k.tooltipPop)):k.tooltipPop&&(k.contentNodeRenderDom=z.default.createPortal(k.props.content,k.tooltipPop)),z.default.render(k.contentNodeRenderDom,k.tooltipPop,(function(){k.contentNode&&k.appendContent(),e&&e(),k._fixTooltipPositionAfterRender(),I&&I(!0)}))})),(0,G.default)((0,B.default)(k),"_fixTooltipPositionAfterRender",(function(){var e=k.calPosition();if(!k.isAlignMiddle){if(k.tooltipArrowStyle&&k.tooltipArrowStyle.right){var _=parseInt(k.tooltipArrowStyle.right,10)+e;k.setDomStyle(k.tooltipArrow,{right:"".concat(_,"px")})}if(k.tooltipArrowBorderStyle&&k.tooltipArrowBorderStyle.right){var I=parseInt(k.tooltipArrowBorderStyle.right,10)+e;k.setDomStyle(k.tooltipArrowBorder,{right:"".concat(I,"px")})}}})),(0,G.default)((0,B.default)(k),"onMouseEnter",(function(){clearTimeout(k.contentVisibleTimeout),clearTimeout(k.autoPopupTimeout),k.contentNode||k._render()})),(0,G.default)((0,B.default)(k),"onMouseLeave",(function(){k.contentVisibleTimeout=setTimeout((function(){k.removeContent()}),100)})),(0,G.default)((0,B.default)(k),"isValidElement",(function(e){return q.isValidElement(e)})),k.autoPopupTimeout=null,k.bodyClick=null,k.bodyElement=null,k.childNode=q.createRef(),k.childNodeMouseEnter=null,k.childNodeMouseLeave=null,k.contentNode=null,k.contentNodeMouseEnter=null,k.contentNodeMouseLeave=null,k.contentNodeRenderDom=null,k.contentVisibleTimeout=null,k.tooltipArrowBorderStyle={},k.tooltipArrowStyle={},k.tooltipClsMap=k.tooltipCls(),k.tooltipPopContainerStyle={},k.tooltipPopStyle={},k.windowResize=null,k.tooltipPop=null,k.tooltipArrow=null,k.tooltipArrowBorder=null,k.tooltipPopContainer=null,k.bodyElementPosition=null,k.isAlignMiddle=["topMiddle","bottomMiddle"].includes(e.align),k}return(0,j.default)(Tooltip,[{key:"render",value:function render(){var e=this.props.children;return this.isValidElement(e)?q.cloneElement(e,{ref:this.childNode}):null}}]),Tooltip}(q.Component);(0,G.default)(ee,"defaultProps",{align:"topLeft",arrowBgColor:"#fff",arrowHorizontalOffset:0,arrowSize:11,autoPopup:!1,autoPopupDelay:3e3,borderColor:"#ccc",content:null,contentClass:"",onVisibleChange:function onVisibleChange(){},tooltipHorizontalOffset:0,tooltipVerticalOffset:0,trigger:"hover",isCacheContent:!0,isClickPackUp:!1,visible:!0});_.default=ee},92564:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.tooltipAlignMap=void 0;_.tooltipAlignMap={topLeft:{arrowBorderColorDirection:"borderTopColor",arrowHorizontalOffsetDirection:"left",arrowVerticalOffsetDirection:"bottom",containerBoxShadow:"none",containerPaddingDirection:"paddingBottom"},topRight:{arrowBorderColorDirection:"borderTopColor",arrowHorizontalOffsetDirection:"right",arrowVerticalOffsetDirection:"bottom",containerBoxShadow:"none",containerPaddingDirection:"paddingBottom"},bottomLeft:{arrowBorderColorDirection:"borderBottomColor",arrowHorizontalOffsetDirection:"left",arrowVerticalOffsetDirection:"top",containerBoxShadow:"0 2px 4px rgba(0,0,0,.15)",containerPaddingDirection:"paddingTop"},bottomRight:{arrowBorderColorDirection:"borderBottomColor",arrowHorizontalOffsetDirection:"right",arrowVerticalOffsetDirection:"top",containerBoxShadow:"0 2px 4px rgba(0,0,0,.15)",containerPaddingDirection:"paddingTop"},topMiddle:{arrowBorderColorDirection:"borderTopColor",arrowHorizontalOffsetDirection:"right",arrowVerticalOffsetDirection:"bottom",containerBoxShadow:"none",containerPaddingDirection:"paddingBottom"},bottomMiddle:{arrowBorderColorDirection:"borderBottomColor",arrowHorizontalOffsetDirection:"right",arrowVerticalOffsetDirection:"top",containerBoxShadow:"0 2px 4px rgba(0,0,0,.15)",containerPaddingDirection:"paddingTop"}}},86722:function(e,_,k){"use strict";var I=k(95318);Object.defineProperty(_,"Z",{enumerable:!0,get:function get(){return C.default}});var C=I(k(74531))},86026:function(e,_,k){"use strict";k.d(_,{Z:function(){return z}});var I=k(52178),C=k(67294),R=k.n(C),j=k(87074),B={appId:"330153"},H={goodPrice:{topic:"Great Deals, good price",icon:"https://ak-d.tripcdn.com/images/05E4312000cqdha72E4E8.gif",title:"key_online_usp_title_deals_incredible",content:"key_online_usp_content_deals_incrdible"},serviceGuarantee:{topic:"Service, service guarantee",icon:"https://ak-d.tripcdn.com/images/05E1212000cqdjc3m0F0E.gif",title:"key_online_usp_title_service_worryFree",content:"key_online_usp_content_service_noRedirect_worryFree"},securePayment:{topic:"Trustworthiness, secure payment",icon:"https://ak-d.tripcdn.com/images/05E2k12000cqdj8a041D0.gif",title:"key_online_usp_title_trust_payment",content:"key_online_usp_content_trust_payment"},nearlyDone:{topic:"Trustworthiness, nearly done",icon:"https://ak-d.tripcdn.com/images/05E2k12000cqdj8a041D0.gif",title:"key_online_usp_title_trust_booking",content:"key_online_usp_content_trust_booking"},rewards:{topic:"Rewards, rewards",icon:"https://ak-d.tripcdn.com/images/05E3v12000cqdjfm6D03F.gif",title:"key_online_usp_title_reward",content:"key_online_usp_content_rewards_noRedirect"}},U=k(12325);const V=function usePageInit(e){var _=e.pageId,k=e.customSharkKey,I=e.customTopic,R=e.customIconUrl,j=e.loadingPreset,B=e.platform,V=(0,C.useState)({topic:"Great Deals, good price",icon:"https://ak-d.tripcdn.com/images/05E4312000cqdha72E4E8.gif",title:"key_online_usp_title_deals_incredible",content:"key_online_usp_content_deals_incrdible"}),G=V[0],q=V[1];return(0,C.useEffect)((function(){"custom"===j&&I&&R&&k&&k.title&&k.content?q({topic:""+I,icon:""+R,title:""+k.title,content:""+k.content}):"custom"!==j&&q(H[j]),(0,U.g4)("ibu_pub_"+B+"_uspLoading_exposure",{preset:j,topic:"custom"===j?""+I:""+H[j].topic,pageId:_,customTopic:I,customIconUrl:R,customSharkKey:k})}),[_,k,I,R,j]),G};const G=function LoadingCircle(e){var _=e.isLoadingFinished;return R().createElement("div",{className:"loading-svg-holder",style:{display:_?"inline-block":"none"}},R().createElement("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"loading-svg"},R().createElement("circle",{className:"loading-circle",cx:"50",cy:"50",r:"45"})))};const q=function UspLoading(e){var _=e.pageId,k=e.platform,I=e.loadingPreset,H=e.customTopic,U=e.customIconUrl,q=e.customSharkKey,z=e.isShowShader,J=void 0===z||z,Q=(0,C.useState)(!1),ee=Q[0],te=Q[1],ne=(0,j.Q)(B),re=V({pageId:_,platform:k,loadingPreset:I,customTopic:H,customIconUrl:U,customSharkKey:q});return R().createElement(R().Fragment,null,R().createElement("div",{className:k+"-usp-loading"},R().createElement("div",{className:k+"-usp-loading__container ",style:{boxShadow:J?"0 0 0 100vmax rgba(0,0,0,0.7)":"0"}},R().createElement(G,{isLoadingFinished:!ee}),R().createElement("img",{className:k+"-usp-loading__container__icon",src:""+re.icon,alt:""+re.topic,style:{display:ee?"block":"none"},onLoad:function onLoad(){te(!0)}}),!!ne[""+re.title]&&R().createElement("div",{className:k+"-usp-loading__container__title"},ne[re.title]),!!ne[""+re.content]&&R().createElement("div",{className:k+"-usp-loading__container__content"},ne[""+re.content]))))};const z=(0,I.K)(q,{name:"@ctrip/trip-component-platform-usp-loading",version:"4.0.2"})},85529:function(e,_,k){"use strict";k.d(_,{Z:function(){return z}});var I=k(52178),C=k(67154),R=k.n(C),j=k(59713),B=k.n(j),H=k(67294),U=k.n(H),V=k(43770),G=k(32407);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){B()(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const q=function OnlineButton(e){var _=e.autoSize,k=e.maxWidth,I=e.loading,C=void 0!==I&&I,j=e.htmlType,B=void 0===j?"button":j,H=e.disabled,q=void 0!==H&&H,z=e.size,J=void 0===z?"middle":z,Q=e.style,ee=void 0===Q?{}:Q,te=e.onClick,ne=e.children,re=e.type,oe=void 0===re?"solid-primary":re,ie=e.ellipsis,ae=void 0!==ie&&ie,le=e.block,se=void 0!==le&&le,ce=e.className,ue=void 0===ce?"":ce,de=e.prefixIcon,pe=e.suffixIcon,he=e.htmlContent,fe=void 0===he?"":he,me=e.loadingAutoSize,ge=void 0===me||me,ve=e.customProps,ye=void 0===ve?{}:ve,be=e.__dir_test,_e=void 0!==be&&be,we=e.is_icon_rotate,Ee=void 0!==we&&we,Se=e.locale,Oe=void 0===Se?"":Se,Te=(0,V.N)().locale,ke=_e||function isAradLocale(e){return["ar-XX","ar-SA","ar-AE"].includes((0,G.formatLocale)(e,"aa-BB"))}(Oe||Te);return U().createElement("button",R()({},ye,{className:"tripui-online-btn ".concat(_?"":"tripui-online-btn-".concat(J)," tripui-online-btn-").concat(oe," ").concat(q?"tripui-online-btn-".concat(oe,"-disabled"):""," ").concat(se?"tripui-online-btn-block":""," ").concat(ae?"tripui-online-btn-ellipsis":""," ").concat(ue),type:B,disabled:q,onClick:function handleClick(e){C||q?e.preventDefault():null==te||te(e)},style:_objectSpread(_objectSpread({},ee),{},{maxWidth:k}),dir:ke?"rtl":"ltr"}),C?U().createElement("div",{className:"".concat(ge?"":"tripui-online-btn-loading-autosize"," tripui-online-btn-loading-wrapper")},U().createElement("i",{className:"tripui-online-btn-".concat(oe,"-loading tripui-online-btn-loading")})):null,C?ge?null:U().createElement("div",{className:"tripui-online-btn-content ".concat(ge?"":"tripui-online-btn-content-visible")},de?"string"==typeof de?U().createElement("img",{src:de,alt:"",className:"tripui-online-btn-".concat(oe,"-icon tripui-online-btn-icon"),style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}}):U().createElement("span",{className:"tripui-online-btn-icon",style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}},de):null,fe?U().createElement("span",{className:"tripui-online-btn-content-children ".concat(ae?"tripui-online-btn-ellipsis":""),dangerouslySetInnerHTML:{__html:fe}}):U().createElement("span",{className:"tripui-online-btn-content-children ".concat(ae?"tripui-online-btn-ellipsis":"")},ne),pe?"string"==typeof pe?U().createElement("img",{src:pe,alt:"",className:"tripui-online-btn-".concat(oe,"-icon tripui-online-btn-icon"),style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}}):U().createElement("span",{className:"tripui-online-btn-icon",style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}},pe):null):U().createElement("div",{className:"tripui-online-btn-content"},de?"string"==typeof de?U().createElement("img",{src:de,alt:"",className:"tripui-online-btn-".concat(oe,"-icon tripui-online-btn-icon"),style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}}):U().createElement("span",{className:"tripui-online-btn-icon",style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}},de):null,fe?U().createElement("span",{className:"tripui-online-btn-content-children ".concat(ae?"tripui-online-btn-ellipsis":""),dangerouslySetInnerHTML:{__html:fe}}):U().createElement("span",{className:"tripui-online-btn-content-children ".concat(ae?"tripui-online-btn-ellipsis":"")},ne),pe?"string"==typeof pe?U().createElement("img",{src:pe,alt:"",className:"tripui-online-btn-".concat(oe,"-icon tripui-online-btn-icon"),style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}}):U().createElement("span",{className:"tripui-online-btn-icon",style:{transform:ke?"string"==typeof Ee?Ee:Ee?"rotateY(180deg)":"none":"none"}},pe):null))};const z=(0,I.K)(q,{name:"@ctrip/trip-component-tripui-online-button",version:"2.0.6"})},75663:function(e,_,k){"use strict";k.d(_,{zC:function(){return j},Kd:function(){return R},vQ:function(){return B}});var I=k(23687);var C=function getCookie(e){if("undefined"==typeof document)return"";var _=document.cookie,k=new RegExp("".concat(e,"=([^;]+);?")),I=_.match(k);return I?I[1]:""};var R=function getLocale(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_us",_=arguments.length>1?arguments[1]:void 0,k=(0,I.wd)(_);return k||e},j=function getCurrency(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD",_=arguments.length>1?arguments[1]:void 0,k=(0,I.XD)(_);return k||e},B=function getVid(){return C("_bfa").split(".").slice(1,3).join(".")}},23687:function(e,_,k){"use strict";k.d(_,{ex:function(){return j},U:function(){return B},wd:function(){return getLocaleWithCargoBrowser},XD:function(){return getCurrencyWithCargoBrowser},op:function(){return formatUrlWithCargo}});var I=k(96614),C=k.n(I),R=k(22020);function includes(e,_){return e.indexOf(_)>-1}var j=function getGroup(){return"undefined"==typeof window?"trip":includes(window.location.hostname||window.location.host,"ctrip")?"ctrip":"trip"},B=function getTripEnv(){if("undefined"==typeof window)return"prod";var e=window.location.hostname||window.location.host,_=function find(_,k){for(var I=0;I<_.length;I++){var C=_[I];if(includes(e,C))return k}};return _(["fws","fat","dev"],"fws")||_(["uat"],"uat")||_(["lpt"],"lpt")||"prod"};function getLocaleWithCargoBrowser(e){var _=e||{},k=_.isOnline,I=_.isH5,R=k?"online":I?"h5":void 0;return C().getLocale(R)}function getCurrencyWithCargoBrowser(e){var _=e||{},k=_.isOnline,I=_.isH5,R=k?"online":I?"h5":void 0;return C().getCurrency(R)}function formatUrlWithCargo(e,_){if(!e)return"";try{var k=_||{},I=k.isCover,C=k.isOnline,j=k.isH5,B=getLocaleWithCargoBrowser({isOnline:C,isH5:j}),H=getCurrencyWithCargoBrowser({isOnline:C,isH5:j});return(0,R.Uv)(e,{locale:B,currency:H},{isCover:I})}catch(_){return e}}},32376:function(e,_,k){"use strict";function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}k.d(_,{X:function(){return I},m:function(){return parseQuery}});var I=function buildQuery(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:encodeURIComponent,I=[];for(var C in e)if(Object.hasOwnProperty.call(e,C)){var R=e[C];if(_&&null==R)continue;"function"==typeof R?R=R():null===R&&(R=""),I.push("".concat(C,"=").concat(k(void 0===R?"":String(R))))}return I.join("&")};function tryDecodeURIComponent(e,_){if(!e)return"";try{return _(e)}catch(_){return e}}function parseQuery(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:decodeURIComponent;if("string"!=typeof e)return{};var I={};return e.split("&").forEach((function(e){var C=_slicedToArray(e.split("="),2),R=C[0],j=C[1];if(R){var B=tryDecodeURIComponent(j,k),H=I[R];H&&!_?isArray(H)?H.push(B):I[R]=[H,B]:I[R]=B}})),I}},22020:function(e,_,k){"use strict";k.d(_,{Uv:function(){return formatUrlWithTripContext}});var I=k(32376);function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}function formatUrlWithTripContext(e,_,k){if(!e)return"";if("string"!=typeof e)return"";var C,R,j="",B=e;if(e.indexOf("#")>-1){var H=_slicedToArray(B.split("#"),2);B=H[0],j=H[1]}var U=_slicedToArray(B.split("?"),2);if(C=U[0],R=U[1],!C)return e;try{var V=(k||{}).isCover,G=_.locale,q=_.currency,z=(R?(0,I.m)(R,!0):{})||{},J=G,Q=q;return V||(J=z.locale||G,Q=z.curr||z.currency||q),z.locale=J,z.curr=Q,delete z.currency,"".concat(C||"","?").concat((0,I.X)(z)).concat(j?"#".concat(j):"")}catch(_){return e}}},90698:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.COOKIE_UNION=_.COOKIE_ONLINE_LOCALE=_.COOKIE_ONLINE_CURRENCY=_.COOKIE_H5_LOCALE=_.COOKIE_H5_CURRENCY=_.COOKIE_BFA=void 0;_.COOKIE_ONLINE_LOCALE="ibulocale";_.COOKIE_ONLINE_CURRENCY="cookiePricesDisplayed";_.COOKIE_H5_LOCALE="ibu_h5_local";_.COOKIE_H5_CURRENCY="ibu_h5_curr";_.COOKIE_BFA="_bfa";_.COOKIE_UNION="Union"},83183:function(e,_,k){"use strict";_.ej=void 0;var I=k(90698),C=k(81885);function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}var R=function isMobileAgent(){var e=window.location.pathname;return/^\/m\//.test(e)||function isH5ByUserAgent(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent.toLowerCase();return/(ctrip|android|iphone|mobile|webos)/.test(e)&&!/(ipad|pad)/.test(e)}()},j=function getCookie(e){if("undefined"==typeof document)return"";var _=document.cookie,k=new RegExp("".concat(e,"=([^;]+);?")),I=_.match(k);return I?I[1]:""};function getOnlineH5Cookie(e,_,k){if("undefined"==typeof document)return k;var I=R();return j(I?_:e)||k}_.ej=j;function tryDecodeURIComponent(e){if(!e)return"";try{return decodeURIComponent(e)}catch(_){return e}}},81885:function(e,_,k){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.formatUrlWithCargo=function formatUrlWithCargo(e,_){if(!e)return"";try{var k=_||{},I=k.isCover,R=k.isOnline,j=k.isH5,B=getLocaleWithCargoBrowser({isOnline:R,isH5:j}),H=getCurrencyWithCargoBrowser({isOnline:R,isH5:j});return(0,C.formatUrlWithTripContext)(e,{locale:B,currency:H},{isCover:I})}catch(_){return e}},_.getCurrencyWithCargoBrowser=getCurrencyWithCargoBrowser,_.getGroup=void 0,_.getLocaleWithCargoBrowser=getLocaleWithCargoBrowser,_.getTripEnv=void 0,_.includes=includes;var I=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(k(96614)),C=k(81346);function includes(e,_){return e.indexOf(_)>-1}_.getGroup=function getGroup(){return"undefined"==typeof window?"trip":includes(window.location.hostname||window.location.host,"ctrip")?"ctrip":"trip"};function getLocaleWithCargoBrowser(e){var _=e||{},k=_.isOnline,C=_.isH5,R=k?"online":C?"h5":void 0;return I.default.getLocale(R)}function getCurrencyWithCargoBrowser(e){var _=e||{},k=_.isOnline,C=_.isH5,R=k?"online":C?"h5":void 0;return I.default.getCurrency(R)}_.getTripEnv=function getTripEnv(){if("undefined"==typeof window)return"prod";var e=window.location.hostname||window.location.host,_=function find(_,k){for(var I=0;I<_.length;I++){var C=_[I];if(includes(e,C))return k}};return _(["fws","fat","dev"],"fws")||_(["uat"],"uat")||_(["lpt"],"lpt")||"prod"}},81346:function(e,_,k){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var I=k(32407);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in _&&_[e]===I[e]||Object.defineProperty(_,e,{enumerable:!0,get:function get(){return I[e]}}))}));var C=k(36226);Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in _&&_[e]===C[e]||Object.defineProperty(_,e,{enumerable:!0,get:function get(){return C[e]}}))}))},34369:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.LOCALE_MAP_SITE=void 0;_.LOCALE_MAP_SITE={en_us:"EN",en_xx:"EN",ar_xx:"AR"}},36226:function(e,_){"use strict";function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}Object.defineProperty(_,"__esModule",{value:!0}),_.buildQuery=void 0,_.parseQuery=function parseQuery(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:decodeURIComponent;if("string"!=typeof e)return{};var I={};return e.split("&").forEach((function(e){var C=_slicedToArray(e.split("="),2),R=C[0],j=C[1];if(R){var B=tryDecodeURIComponent(j,k),H=I[R];H&&!_?isArray(H)?H.push(B):I[R]=[H,B]:I[R]=B}})),I};function tryDecodeURIComponent(e,_){if(!e)return"";try{return _(e)}catch(_){return e}}_.buildQuery=function buildQuery(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:encodeURIComponent,I=[];for(var C in e)if(Object.hasOwnProperty.call(e,C)){var R=e[C];if(_&&null==R)continue;"function"==typeof R?R=R():null===R&&(R=""),I.push("".concat(C,"=").concat(k(void 0===R?"":String(R))))}return I.join("&")}},32407:function(e,_,k){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.formatLocale=formatLocale,_.formatTripEnv=function formatTripEnv(e){switch(e){case"dev":case"fat":case"fws":return"fws";case"lpt":return"lpt";case"uat":return"uat";case"pro":case"prd":case"prod":default:return"prod"}},_.formatUrlWithTripContext=function formatUrlWithTripContext(e,_,k){if(!e)return"";if("string"!=typeof e)return"";var I,R,j="",B=e;if(e.indexOf("#")>-1){var H=_slicedToArray(B.split("#"),2);B=H[0],j=H[1]}var U=_slicedToArray(B.split("?"),2);if(I=U[0],R=U[1],!I)return e;try{var V=(k||{}).isCover,G=_.locale,q=_.currency,z=(R?(0,C.parseQuery)(R,!0):{})||{},J=G,Q=q;return V||(J=z.locale||G,Q=z.curr||z.currency||q),z.locale=J,z.curr=Q,delete z.currency,"".concat(I||"","?").concat((0,C.buildQuery)(z)).concat(j?"#".concat(j):"")}catch(_){return e}},_.getLangFromLocale=function getLangFromLocale(e){return formatLocale(e,"aa-bb").split("-")[0]},_.getRuntimeType=function getRuntimeType(){var e="undefined"!=typeof window;return{type:e?"browser":"node",isBrowser:e,isNode:!e}},_.getSiteByLocale=function getSiteByLocale(e){var _=formatLocale(e,"aa_bb");return I.LOCALE_MAP_SITE[_]||_.split("_")[1].toUpperCase()};var I=k(34369),C=k(36226);function _slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}function includes(e,_){return e.indexOf(_)>-1}function formatLocale(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"aa-BB",k=includes(e,"-")?"-":"_",I=e.split(k),C=_slicedToArray(I,2),R=C[0],j=void 0===R?"en":R,B=C[1],H=void 0===B?"US":B;return _.replace("aa",j.toLowerCase()).replace("AA",j.toUpperCase()).replace("bb",H.toLowerCase()).replace("BB",H.toUpperCase())}},7760:function(e){"use strict";e.exports={i8:"1.5.2"}},12380:function(e,_,k){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.sendPvSummary=_.updateLeaveTs=_.handleBeforeUnload=_.processUnhandledReqs=_.updateCacheConfig=_.setVid=_.genVidVal=_.injectUbtSdk=void 0;var I,C=k(65353),R=k(68301),j=k(38544),B=C.__importDefault(k(21434)),H=k(39414);function genVidVal(){return"".concat(Date.now(),".").concat((0,B.default)(R.VID_LENGTH))}function processUnhandledReqs(){if("[object Array]"==Object.prototype.toString.call(window[R.WIN_KEY.UBT_API])){var e=window[R.WIN_KEY.UBT_API]||[];!0===e[0]&&e.shift();var _=(0,j.getLocalStorage)(R.LOCAL_KEY.UBT_UNHANDLED,!0)||[];JSON.stringify(_).length;"[object Array]"==Object.prototype.toString.call(_)&&e.unshift.apply(e,C.__spreadArray([],C.__read(_),!1));for(var k=[],I=(0,j.getLsFreeSize)(new RegExp(R.LOCAL_KEY.UBT_UNHANDLED));e.length>0&&I>1048576;){var B=e.shift();"get"!=B.type&&("register"==B.type&&(B.options=B.options||{},B.options.context={url:j.clientInfo.url,referrer:j.clientInfo.referrer}),window[R.WIN_KEY.UBT_API_TEMP]?window[R.WIN_KEY.UBT_API_TEMP].push(B):(k.push(B),I-=JSON.stringify(B).length))}if(k.length>0){var H=Date.now().toString();k.forEach((function(e){e.options=e.options||{},e.options.cacheGroupKey=e.options.cacheGroupKey||H})),(0,j.setLocalStorage)(R.LOCAL_KEY.UBT_UNHANDLED,JSON.stringify(k))}else(0,j.removeLocalStorage)(R.LOCAL_KEY.UBT_UNHANDLED)}}_.injectUbtSdk=(I=!1,function(){try{if(I||window[R.WIN_KEY.UBT_GLOBAL])return;var e=function(e){var _=(0,R.getUbtSdkUrl)(j.clientInfo);_=_.replace("{VERSION}",e);var k=!1;try{var I=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);k=!!(I&&parseInt(I[2],10)<69)}catch(e){}if(_=_.replace("{LEVEL}",R._bizConfig.isLoadLowerSyntax||(null===j.clientInfo||void 0===j.clientInfo?void 0:j.clientInfo.isIE)||k?"l":"h"),"*"==e){var C=(new Date).toLocaleDateString("zh-cn").replace(/\//g,"");_="".concat(_,"?d=").concat(C)}return _}(function getVersion(){return j.clientInfo.isTravix?"*":R._bizConfig._sdkVersion||function getVersionFromCache(){try{var e=localStorage.getItem("UBT_CONFIG"),_=(0,j.JSONParse_Safe)(e);return(null==_?void 0:_.coreVer)||"*"}catch(e){return"*"}}()}()),_=document.createElement("script");_.type="text/javascript",_.charset="utf-8","sync"!=window[R.WIN_KEY.UBT_IMODE]&&(_.async=!0,_.setAttribute("defer","defer")),_.setAttribute("crossorigin","anonymous"),_.src=e;var k=document.getElementsByTagName("script")[0];k&&k.parentNode?k.parentNode.insertBefore(_,k):document.getElementsByTagName("body")[0].appendChild(_),I=!0}catch(e){}}),_.genVidVal=genVidVal,_.setVid=function setVid(){var e=(0,j.getCookie)(R.LOCAL_KEY.VID_COOKIE),_="";if(!e)if(_=(0,j.getCookie)(R.LOCAL_KEY.BFA_COOKIE),R.REGEX.BFA.test(_)){var k=_.split(".");e="".concat(k[1],".").concat(k[2])}else{e=((0,j.getLocalStorage)(R.LOCAL_KEY.BFA_LS,!0)||{}).vid}return e||(e=genVidVal(),(0,j.setCookie)(R.LOCAL_KEY.VID_COOKIE,e)),j.clientInfo.vid=e,e},_.updateCacheConfig=function updateCacheConfig(){return C.__awaiter(this,void 0,void 0,(function(){var e,_;return C.__generator(this,(function(k){if(j.clientInfo.isTravix)return[2];try{e={appId:"5278",categoryList:["ubtconfig"],head:{appid:"5278",cid:j.clientInfo.vid,cver:"000.001",sid:"8892"}},(_=new window.XMLHttpRequest).timeout=5e3,_.open("POST",(0,R.getAppConfigUrl)(j.clientInfo),!0),_.onerror=function(e){},_.onreadystatechange=function(){var e;try{if(_.readyState!==XMLHttpRequest.DONE||200!=_.status)return;var k=JSON.parse(_.responseText||""),I=null===(e=((null==k?void 0:k.configList)||[])[0])||void 0===e?void 0:e.configContent;if(!I)return;var C=JSON.parse(I);R.GLOBAL.ubtConfig=C,localStorage.setItem("UBT_CONFIG",JSON.stringify(C))}catch(e){}},_.send(JSON.stringify(e))}catch(e){}return[2]}))}))},_.processUnhandledReqs=processUnhandledReqs,_.handleBeforeUnload=function handleBeforeUnload(e,_){return C.__awaiter(this,void 0,void 0,(function(){return C.__generator(this,(function(e){try{sendPvSummary(_),processUnhandledReqs()}catch(e){}return[2]}))}))},_.updateLeaveTs=function updateLeaveTs(e){return C.__awaiter(this,void 0,void 0,(function(){var _,k;return C.__generator(this,(function(I){try{if(!e)return[2];_=Date.now(),"hidden"==(k=document.visibilityState)?e.lastLeaveTs=_:"visible"==k&&(e.leaveTime=(e.leaveTime||0)+(e.lastLeaveTs?_-e.lastLeaveTs:0),e.lastLeaveTs=null)}catch(e){}return[2]}))}))};var U=!1;function sendPvSummary(e){var _;if(e&&!U){var k=Date.now(),I=(null===(_=window[R.WIN_KEY.UBT_GLOBAL])||void 0===_?void 0:_.summary)||{},j=I.tag,B=C.__rest(I,["tag"]),V={type:H.UBT_TYPE.METRIC,data:{value:C.__assign({ttl:k-e.startTs,tp:(e.lastLeaveTs||k)-e.startTs-(e.leaveTime||0)},B),tag:j},key:"bbz_ubt_pv_summary"};window[R.WIN_KEY.UBT_API].push({type:"send",data:V,pvId:e.id,options:{triggerTs:k}}),U=!0}}_.sendPvSummary=sendPvSummary},38544:function(e,_,k){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.JSONParse_Safe=_.checkLsSupport=_.getLsFreeSize=_.getLocalStorage=_.setLocalStorage=_.removeLocalStorage=_.getRootDomain=_.setCookie=_.getCookie=_.clientInfo=void 0;var I,C=k(68301);function checkLsSupport(){if(Storage&&localStorage){try{localStorage.setItem("store_test","ok"),localStorage.getItem("store_test"),localStorage.removeItem("store_test")}catch(e){return!1}return!0}return!1}function JSONParse_Safe(e,_){void 0===_&&(_=null);try{if(!e)return _;var k=JSON.parse(e);return _&&Object.prototype.toString.call(_)!=Object.prototype.toString.call(k)?_:k}catch(e){return _}}_.clientInfo=C.IN_SERVER?{}:function(){var e,_=checkLsSupport(),k=null!=C._bizConfig.isOverseas?C._bizConfig.isOverseas:C.REGEX.TRIP.test(location.host),I=null!=C._bizConfig.isProd?C._bizConfig.isProd:!C.REGEX.TEST_ENV.test(location.host),R=!!C._bizConfig.isTravix,j=null!=C._bizConfig.isLAN?!!C._bizConfig.isLAN:C.REGEX.LAN.test(location.href),B=window.navigator.userAgent,H=B.indexOf("compatible")>-1&&B.indexOf("MSIE")>-1||B.indexOf("Trident")>-1&&B.indexOf("rv:11.0")>-1||B.indexOf("Edg")>-1,U=!!window.__ubt_ipv6,V=null===navigator||void 0===navigator?void 0:navigator.userAgent,G=C.REGEX.MOBILE.test(V),q=location.href,z=document.referrer,J="https:"!=location.protocol&&"http:"!=location.protocol;try{!z&&opener&&(z=null===(e=null===opener||void 0===opener?void 0:opener.location)||void 0===e?void 0:e.href)}catch(e){}return{isProd:I,isTrip:k,isTravix:R,isIE:H,isLAN:j,isSupportLS:_,isIPV6:U,isMobile:G,url:q,referrer:z,isFile:J}}(),_.getCookie=function getCookie(e,_,k){var I=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),C=document.cookie.match(I),R=_||"";return C&&(R=k?decodeURI(C[2]):C[2]),R},_.setCookie=function setCookie(e,k,I){void 0===I&&(I=C.EXPIRES.COOKIE_MAX);var R=(0,_.getRootDomain)(),j=R?";domain=".concat(R):"",B="";if(I>=0){var H=new Date((new Date).getTime()+I).toUTCString();B=";expires=".concat(H)}document.cookie="".concat(e,"=").concat(encodeURIComponent(k)).concat(j).concat(";path=/").concat(B)},_.getRootDomain=(I="",function findRoot(){if(I)return I;for(var e="",_="_bfp=cookie",k=location.hostname.split("."),C=k.length-1;C>=0;C--)if(e="."+k.slice(C).join("."),document.cookie="".concat(_,";domain=").concat(e,";"),document.cookie.indexOf(_)>-1)return document.cookie="".concat(_.split("=")[0],"=;domain=").concat(e,";expires=Thu, 01 Jan 1970 00:00:01 GMT;"),I=e}),_.removeLocalStorage=function removeLocalStorage(e){return!!(null===_.clientInfo||void 0===_.clientInfo?void 0:_.clientInfo.isSupportLS)&&(window.localStorage.removeItem(e),!0)},_.setLocalStorage=function setLocalStorage(e,k){return!!(null===_.clientInfo||void 0===_.clientInfo?void 0:_.clientInfo.isSupportLS)&&(window.localStorage.setItem(e,k),!0)},_.getLocalStorage=function getLocalStorage(e,k){if(!(null===_.clientInfo||void 0===_.clientInfo?void 0:_.clientInfo.isSupportLS))return null;var I=window.localStorage.getItem(e);return k?JSONParse_Safe(I):I},_.getLsFreeSize=function getLsFreeSize(e){try{var _=0;for(var k in window.localStorage)if(!(null==e?void 0:e.test(k))&&Object.prototype.hasOwnProperty.call(window.localStorage,k)){var I=window.localStorage.getItem(k);_+=(null==I?void 0:I.length)||0}return 5242880-_}catch(e){return 0}},_.checkLsSupport=checkLsSupport,_.JSONParse_Safe=JSONParse_Safe},68301:function(e,_,k){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_._bizConfig=_.GET_TIMEOUT=_.REGEX=_.EXPIRES=_.VID_LENGTH=_.getAppConfigUrl=_.getUbtSdkUrl=_.LOCAL_KEY=_.WIN_KEY=_.GLOBAL=_.IN_SERVER=void 0,_.IN_SERVER="undefined"==typeof window;var I=k(7760).i8;function getProtocol(e,_){return void 0===_&&(_=!1),e.isFile&&!_?"https:":""}_.GLOBAL={version:I,symbol:!0,ubtConfig:null,enterTs:Date.now()},_.WIN_KEY={INTERNAL_DEBUG:"INTERNAL_DEBUG",UBT_OLD:"$_bf",UBT_COMP:"UBT_COMP",UBT_API:"UBT_API",UBT_ITAG:"UBT_ITAG",UBT_INITTAG:"UBT_INITTAG",UBT_IMODE:"UBT_IMODE",UBT_API_TEMP:"UBT_API_TEMP",UBT_CTOR:"UBT_CTOR",UBT_BIZCONFIG:"UBT_BIZCONFIG",UBT_GLOBAL:"UBT_GLOBAL",UBT_LEAVING_TAG:"UBT_LEAVING_TAG"},_.LOCAL_KEY={BFA_COOKIE:"_bfa",BFA_LS:"UBT_BFA",VID_COOKIE:"UBT_VID",UBT_UNHANDLED:"UBT_UNHANDLED",UBT_CONFIG:"UBT_CONFIG"};_.getUbtSdkUrl=function(e){var _=getProtocol(e),k=_getUbtSdkUrl(e);return"".concat(_).concat(k)};var _getUbtSdkUrl=function(e){return e.isProd?e.isTravix?"//static-assets.travix.com/packages/ubt/websdk/{VERSION}/ubt.min{LEVEL}.js":e.isLAN?"//static.ares.ctripcorp.com/packages/ubt/websdk/{VERSION}/ubt.min{LEVEL}.js":"//static.tripcdn.com/packages/ubt/websdk/{VERSION}/ubt.min{LEVEL}.js":e.isTravix?"//static.assets.uat.trip.travix.com/packages/ubt/websdk/{VERSION}/ubt.min{LEVEL}.js":"//static.uat.qa.nt.ctripcorp.com/packages/ubt/websdk/{VERSION}/ubt.min{LEVEL}.js"};_.getAppConfigUrl=function(e){var _=_getAppConfigUrl(e),k=getProtocol(e,_.indexOf("http")>=0);return"".concat(k).concat(_)};var _getAppConfigUrl=function(e){return e.isProd?e.isTrip?"https://www.trip.com/restapi/soa2/18088/getAppConfig.json":e.isLAN?"//apigateway.ctripcorp.com/restapi/soa2/18088/getAppConfig.json":e.isIPV6?"//upgrade-m.ctrip.com/restapi/soa2/18088/getAppConfig.json":"//m.ctrip.com/restapi/soa2/18088/getAppConfig.json":"//gateway.m.fws.qa.nt.ctripcorp.com/restapi/soa2/18088/getAppConfig.json"};_.VID_LENGTH=12,_.EXPIRES={COOKIE_MAX:3456e7},_.REGEX={BFA:/^1\.\d+\..{3,12}\.1\.\d+\.\d+\.\d+\.\d+\..+$/,VID:/^\d{10,13}\.[a-zA-Z0-9]{3,12}$/,BFA_COOKIE_NAME:new RegExp("(^| )".concat(_.LOCAL_KEY.BFA_COOKIE,"=([^;]*)(;|$)")),VID_COOKIE_NAME:new RegExp("(^| )".concat(_.LOCAL_KEY.VID_COOKIE,"=([^;]*)(;|$)")),MOBILE:/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i,TEST_ENV:/(\.qa\.nt\.)|(localhost|172\.16|127\.0|10\.15|10\.32)|(\.uat\.)|(\.fws\.)|(\.fat\d*\.)|(\.tripqate\.)|(\.(beta|dev)\.qunar\.)/i,TRIP:/\.trip/gi,TRAVIX:/\.travix\./gi,LAN:/\.ctripcorp\./gi},_.GET_TIMEOUT=5e3,_._bizConfig=_.IN_SERVER?{}:window[_.WIN_KEY.UBT_BIZCONFIG]||{}},39414:function(e,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.UBT_TYPE=void 0,function(e){e.ACTION="action",e.METRIC="metric",e.MONITOR="monitor",e.TRACE="trace",e.DEV_TRACE="dev_trace",e.PRIVATE_TRACE="private_trace",e.ERROR="error",e.USER_BLOCK="user_block",e.EXPOSURE="exposure"}(_.UBT_TYPE||(_.UBT_TYPE={}))},36652:function(e,_,k){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var I=k(65353),C=k(68301),R=k(12380),j=I.__importDefault(k(21434)),B=function(){function UBT(){}return UBT.genInstKey=function(){return(0,j.default)(6)},UBT.handlePageLeave=function(){try{if(window[C.WIN_KEY.UBT_LEAVING_TAG])return;window[C.WIN_KEY.UBT_LEAVING_TAG]=!0,(0,R.sendPvSummary)(UBT.curPv),(0,R.processUnhandledReqs)()}catch(e){}},UBT.init=function(){try{if(C.IN_SERVER||window[C.WIN_KEY.UBT_INITTAG])return;if(window[C.WIN_KEY.UBT_BIZCONFIG]&&window[C.WIN_KEY.UBT_BIZCONFIG].isIframe)return;window[C.WIN_KEY.UBT_INITTAG]=!0,window[C.WIN_KEY.UBT_API]=window[C.WIN_KEY.UBT_API]||[],window[C.WIN_KEY.UBT_COMP]=C.GLOBAL,window.addEventListener("pagehide",(function(e){UBT.handlePageLeave()})),window.addEventListener("beforeunload",(function(e){UBT.handlePageLeave()})),document.addEventListener("visibilitychange",(function(e){(0,R.updateLeaveTs)(UBT.curPv)})),(0,R.setVid)(),window[C.WIN_KEY.UBT_ITAG]||((0,R.injectUbtSdk)(),window[C.WIN_KEY.UBT_ITAG]=!0),(0,R.updateCacheConfig)()}catch(e){}},UBT.register=function(e,_){if(!C.IN_SERVER)try{var k=_;return k||(k=UBT.genInstKey()),UBT.pushUbtApi({type:"register",data:e,pvId:k}),k}catch(e){}},UBT.send=function(e,_,k){try{return UBT.pushUbtApi({type:"send",data:e,pvId:_,options:k})}catch(e){return{success:!1,message:null==e?void 0:e.message}}},UBT.set=function(e,_){try{return UBT.pushUbtApi({type:"set",data:e,pvId:_})}catch(e){return{success:!1,message:null==e?void 0:e.message}}},UBT.get=function(e,_,k){return I.__awaiter(this,void 0,void 0,(function(){return I.__generator(this,(function(I){return[2,new Promise((function(I,R){try{var j=setTimeout((function(){I(null)}),null!=k?k:C.GET_TIMEOUT);UBT.pushUbtApi({type:"get",data:{name:e,timeout:k,handleResolve:function(e){clearTimeout(j),I(e)},handleReject:function(e){clearTimeout(j),R(e)}},pvId:_})}catch(e){I(null)}}))]}))}))},UBT.getSync=function(e,_){try{if(!window[C.WIN_KEY.UBT_API].rewrited)return;return UBT.pushUbtApi({type:"get",data:{name:e,sync:!0},pvId:_})}catch(e){}},UBT.destroy=function(e){try{UBT.pushUbtApi({type:"destroy",pvId:e})}catch(e){}},UBT.pushUbtApi=function(e){if(!C.IN_SERVER){if(!window[C.WIN_KEY.UBT_BIZCONFIG]||!window[C.WIN_KEY.UBT_BIZCONFIG].isIframe){var _=Date.now();return"register"==e.type&&(UBT.curPv&&(0,R.sendPvSummary)(UBT.curPv),UBT.curPv={startTs:_,id:e.pvId||""}),e.options=e.options||{},e.options.triggerTs=e.options.triggerTs||_,window[C.WIN_KEY.UBT_API].push(e)}window.parent.postMessage({type:e.type,data:e.data},"*")}},UBT.genVid4SSR=function(e,_){var k,I,j;if(C.IN_SERVER)try{var B=null===(k=null==e?void 0:e.req)||void 0===k?void 0:k.headers;if(!B||"function"!=typeof(null===(I=null==e?void 0:e.res)||void 0===I?void 0:I.setHeader))return;var H=B.cookie||"",U=(H.match(C.REGEX.BFA_COOKIE_NAME)||[])[2],V=null==U?void 0:U.split("."),G=void 0;if(C.REGEX.BFA.test(U)&&V.length>6&&(G="".concat(V[1],".").concat(V[2])),!G){var q=(H.match(C.REGEX.VID_COOKIE_NAME)||[])[2];C.REGEX.VID.test(q)&&(G=q)}var z=e.res.getHeader("Set-Cookie")||[];if("[object Array]"!=Object.prototype.toString.call(z)&&(z=[z]),!G)for(var J=0;J<z.length;J++){var Q=z[J];if(Q.indexOf(C.LOCAL_KEY.VID_COOKIE)>=0){G=(Q.match(C.REGEX.VID_COOKIE_NAME)||[])[2];break}}if(!G){G=(0,R.genVidVal)();var ee=null==_?void 0:_.domain;if(!ee){var te=(null===(j=B.host)||void 0===j?void 0:j.split(/:\d+/)[0])||"";if(/(\d{1,3}\.){3}\d{1,3}/g.test(te))ee=te;else{var ne=te.split(".");ee="".concat(ne.length>2?".":"").concat(ne.slice(-2).join("."))}}var re=new Date((new Date).getTime()+C.EXPIRES.COOKIE_MAX).toUTCString(),oe="".concat(C.LOCAL_KEY.VID_COOKIE,"=").concat(G,";domain=").concat(ee,";path=/;expires=").concat(re);z.push(oe),e.res.setHeader("Set-Cookie",z)}return G}catch(e){}},UBT}();B.init(),_.default=B,I.__exportStar(k(39414),_)},8116:function(e,_){var k;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var I={}.hasOwnProperty;function classNames(){for(var e="",_=0;_<arguments.length;_++){var k=arguments[_];k&&(e=appendClass(e,parseValue(k)))}return e}function parseValue(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return classNames.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var _="";for(var k in e)I.call(e,k)&&e[k]&&(_=appendClass(_,k));return _}function appendClass(e,_){return _?e?e+" "+_:e+_:e}e.exports?(classNames.default=classNames,e.exports=classNames):void 0===(k=function(){return classNames}.apply(_,[]))||(e.exports=k)}()},51888:function(e,_,k){"use strict";k.d(_,{Z:function(){return q}});var I=1e6,C=1e6,R="[big.js] ",j=R+"Invalid ",B=j+"decimal places",H=R+"Division by zero",U={},V=void 0,G=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function round(e,_,k,I){var C=e.c;if(k===V&&(k=e.constructor.RM),0!==k&&1!==k&&2!==k&&3!==k)throw Error("[big.js] Invalid rounding mode");if(_<1)I=3===k&&(I||!!C[0])||0===_&&(1===k&&C[0]>=5||2===k&&(C[0]>5||5===C[0]&&(I||C[1]!==V))),C.length=1,I?(e.e=e.e-_+1,C[0]=1):C[0]=e.e=0;else if(_<C.length){if(I=1===k&&C[_]>=5||2===k&&(C[_]>5||5===C[_]&&(I||C[_+1]!==V||1&C[_-1]))||3===k&&(I||!!C[0]),C.length=_,I)for(;++C[--_]>9;)if(C[_]=0,0===_){++e.e,C.unshift(1);break}for(_=C.length;!C[--_];)C.pop()}return e}function stringify(e,_,k){var I=e.e,C=e.c.join(""),R=C.length;if(_)C=C.charAt(0)+(R>1?"."+C.slice(1):"")+(I<0?"e":"e+")+I;else if(I<0){for(;++I;)C="0"+C;C="0."+C}else if(I>0)if(++I>R)for(I-=R;I--;)C+="0";else I<R&&(C=C.slice(0,I)+"."+C.slice(I));else R>1&&(C=C.charAt(0)+"."+C.slice(1));return e.s<0&&k?"-"+C:C}U.abs=function(){var e=new this.constructor(this);return e.s=1,e},U.cmp=function(e){var _,k=this,I=k.c,C=(e=new k.constructor(e)).c,R=k.s,j=e.s,B=k.e,H=e.e;if(!I[0]||!C[0])return I[0]?R:C[0]?-j:0;if(R!=j)return R;if(_=R<0,B!=H)return B>H^_?1:-1;for(j=(B=I.length)<(H=C.length)?B:H,R=-1;++R<j;)if(I[R]!=C[R])return I[R]>C[R]^_?1:-1;return B==H?0:B>H^_?1:-1},U.div=function(e){var _=this,k=_.constructor,C=_.c,R=(e=new k(e)).c,j=_.s==e.s?1:-1,U=k.DP;if(U!==~~U||U<0||U>I)throw Error(B);if(!R[0])throw Error(H);if(!C[0])return e.s=j,e.c=[e.e=0],e;var G,q,z,J,Q,ee=R.slice(),te=G=R.length,ne=C.length,re=C.slice(0,G),oe=re.length,ie=e,ae=ie.c=[],le=0,se=U+(ie.e=_.e-e.e)+1;for(ie.s=j,j=se<0?0:se,ee.unshift(0);oe++<G;)re.push(0);do{for(z=0;z<10;z++){if(G!=(oe=re.length))J=G>oe?1:-1;else for(Q=-1,J=0;++Q<G;)if(R[Q]!=re[Q]){J=R[Q]>re[Q]?1:-1;break}if(!(J<0))break;for(q=oe==G?R:ee;oe;){if(re[--oe]<q[oe]){for(Q=oe;Q&&!re[--Q];)re[Q]=9;--re[Q],re[oe]+=10}re[oe]-=q[oe]}for(;!re[0];)re.shift()}ae[le++]=J?z:++z,re[0]&&J?re[oe]=C[te]||0:re=[C[te]]}while((te++<ne||re[0]!==V)&&j--);return ae[0]||1==le||(ae.shift(),ie.e--,se--),le>se&&round(ie,se,k.RM,re[0]!==V),ie},U.eq=function(e){return 0===this.cmp(e)},U.gt=function(e){return this.cmp(e)>0},U.gte=function(e){return this.cmp(e)>-1},U.lt=function(e){return this.cmp(e)<0},U.lte=function(e){return this.cmp(e)<1},U.minus=U.sub=function(e){var _,k,I,C,R=this,j=R.constructor,B=R.s,H=(e=new j(e)).s;if(B!=H)return e.s=-H,R.plus(e);var U=R.c.slice(),V=R.e,G=e.c,q=e.e;if(!U[0]||!G[0])return G[0]?e.s=-H:U[0]?e=new j(R):e.s=1,e;if(B=V-q){for((C=B<0)?(B=-B,I=U):(q=V,I=G),I.reverse(),H=B;H--;)I.push(0);I.reverse()}else for(k=((C=U.length<G.length)?U:G).length,B=H=0;H<k;H++)if(U[H]!=G[H]){C=U[H]<G[H];break}if(C&&(I=U,U=G,G=I,e.s=-e.s),(H=(k=G.length)-(_=U.length))>0)for(;H--;)U[_++]=0;for(H=_;k>B;){if(U[--k]<G[k]){for(_=k;_&&!U[--_];)U[_]=9;--U[_],U[k]+=10}U[k]-=G[k]}for(;0===U[--H];)U.pop();for(;0===U[0];)U.shift(),--q;return U[0]||(e.s=1,U=[q=0]),e.c=U,e.e=q,e},U.mod=function(e){var _,k=this,I=k.constructor,C=k.s,R=(e=new I(e)).s;if(!e.c[0])throw Error(H);return k.s=e.s=1,_=1==e.cmp(k),k.s=C,e.s=R,_?new I(k):(C=I.DP,R=I.RM,I.DP=I.RM=0,k=k.div(e),I.DP=C,I.RM=R,this.minus(k.times(e)))},U.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},U.plus=U.add=function(e){var _,k,I,C=this,R=C.constructor;if(e=new R(e),C.s!=e.s)return e.s=-e.s,C.minus(e);var j=C.e,B=C.c,H=e.e,U=e.c;if(!B[0]||!U[0])return U[0]||(B[0]?e=new R(C):e.s=C.s),e;if(B=B.slice(),_=j-H){for(_>0?(H=j,I=U):(_=-_,I=B),I.reverse();_--;)I.push(0);I.reverse()}for(B.length-U.length<0&&(I=U,U=B,B=I),_=U.length,k=0;_;B[_]%=10)k=(B[--_]=B[_]+U[_]+k)/10|0;for(k&&(B.unshift(k),++H),_=B.length;0===B[--_];)B.pop();return e.c=B,e.e=H,e},U.pow=function(e){var _=this,k=new _.constructor("1"),I=k,R=e<0;if(e!==~~e||e<-1e6||e>C)throw Error(j+"exponent");for(R&&(e=-e);1&e&&(I=I.times(_)),e>>=1;)_=_.times(_);return R?k.div(I):I},U.prec=function(e,_){if(e!==~~e||e<1||e>I)throw Error(j+"precision");return round(new this.constructor(this),e,_)},U.round=function(e,_){if(e===V)e=0;else if(e!==~~e||e<-I||e>I)throw Error(B);return round(new this.constructor(this),e+this.e+1,_)},U.sqrt=function(){var e,_,k,I=this,C=I.constructor,j=I.s,B=I.e,H=new C("0.5");if(!I.c[0])return new C(I);if(j<0)throw Error(R+"No square root");0===(j=Math.sqrt(+stringify(I,!0,!0)))||j===1/0?((_=I.c.join("")).length+B&1||(_+="0"),B=((B+1)/2|0)-(B<0||1&B),e=new C(((j=Math.sqrt(_))==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+B)):e=new C(j+""),B=e.e+(C.DP+=4);do{k=e,e=H.times(k.plus(I.div(k)))}while(k.c.slice(0,B).join("")!==e.c.slice(0,B).join(""));return round(e,(C.DP-=4)+e.e+1,C.RM)},U.times=U.mul=function(e){var _,k=this,I=k.constructor,C=k.c,R=(e=new I(e)).c,j=C.length,B=R.length,H=k.e,U=e.e;if(e.s=k.s==e.s?1:-1,!C[0]||!R[0])return e.c=[e.e=0],e;for(e.e=H+U,j<B&&(_=C,C=R,R=_,U=j,j=B,B=U),_=new Array(U=j+B);U--;)_[U]=0;for(H=B;H--;){for(B=0,U=j+H;U>H;)B=_[U]+R[H]*C[U-H-1]+B,_[U--]=B%10,B=B/10|0;_[U]=B}for(B?++e.e:_.shift(),H=_.length;!_[--H];)_.pop();return e.c=_,e},U.toExponential=function(e,_){var k=this,C=k.c[0];if(e!==V){if(e!==~~e||e<0||e>I)throw Error(B);for(k=round(new k.constructor(k),++e,_);k.c.length<e;)k.c.push(0)}return stringify(k,!0,!!C)},U.toFixed=function(e,_){var k=this,C=k.c[0];if(e!==V){if(e!==~~e||e<0||e>I)throw Error(B);for(e=e+(k=round(new k.constructor(k),e+k.e+1,_)).e+1;k.c.length<e;)k.c.push(0)}return stringify(k,!1,!!C)},U[Symbol.for("nodejs.util.inspect.custom")]=U.toJSON=U.toString=function(){var e=this,_=e.constructor;return stringify(e,e.e<=_.NE||e.e>=_.PE,!!e.c[0])},U.toNumber=function(){var e=+stringify(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(R+"Imprecise conversion");return e},U.toPrecision=function(e,_){var k=this,C=k.constructor,R=k.c[0];if(e!==V){if(e!==~~e||e<1||e>I)throw Error(j+"precision");for(k=round(new C(k),e,_);k.c.length<e;)k.c.push(0)}return stringify(k,e<=k.e||k.e<=C.NE||k.e>=C.PE,!!R)},U.valueOf=function(){var e=this,_=e.constructor;if(!0===_.strict)throw Error(R+"valueOf disallowed");return stringify(e,e.e<=_.NE||e.e>=_.PE,!0)};const q=function _Big_(){function Big(e){var _=this;if(!(_ instanceof Big))return e===V?_Big_():new Big(e);if(e instanceof Big)_.s=e.s,_.e=e.e,_.c=e.c.slice();else{if("string"!=typeof e){if(!0===Big.strict&&"bigint"!=typeof e)throw TypeError(j+"value");e=0===e&&1/e<0?"-0":String(e)}!function parse(e,_){var k,I,C;if(!G.test(_))throw Error(j+"number");e.s="-"==_.charAt(0)?(_=_.slice(1),-1):1,(k=_.indexOf("."))>-1&&(_=_.replace(".",""));(I=_.search(/e/i))>0?(k<0&&(k=I),k+=+_.slice(I+1),_=_.substring(0,I)):k<0&&(k=_.length);for(C=_.length,I=0;I<C&&"0"==_.charAt(I);)++I;if(I==C)e.c=[e.e=0];else{for(;C>0&&"0"==_.charAt(--C););for(e.e=k-I-1,e.c=[],k=0;I<=C;)e.c[k++]=+_.charAt(I++)}return e}(_,e)}_.constructor=Big}return Big.prototype=U,Big.DP=20,Big.RM=1,Big.NE=-7,Big.PE=21,Big.strict=false,Big.roundDown=0,Big.roundHalfUp=1,Big.roundHalfEven=2,Big.roundUp=3,Big}()},99560:function(e,_,k){var I;!function(C){"use strict";function safeAdd(e,_){var k=(65535&e)+(65535&_);return(e>>16)+(_>>16)+(k>>16)<<16|65535&k}function md5cmn(e,_,k,I,C,R){return safeAdd(function bitRotateLeft(e,_){return e<<_|e>>>32-_}(safeAdd(safeAdd(_,e),safeAdd(I,R)),C),k)}function md5ff(e,_,k,I,C,R,j){return md5cmn(_&k|~_&I,e,_,C,R,j)}function md5gg(e,_,k,I,C,R,j){return md5cmn(_&I|k&~I,e,_,C,R,j)}function md5hh(e,_,k,I,C,R,j){return md5cmn(_^k^I,e,_,C,R,j)}function md5ii(e,_,k,I,C,R,j){return md5cmn(k^(_|~I),e,_,C,R,j)}function binlMD5(e,_){var k,I,C,R,j;e[_>>5]|=128<<_%32,e[14+(_+64>>>9<<4)]=_;var B=1732584193,H=-271733879,U=-1732584194,V=271733878;for(k=0;k<e.length;k+=16)I=B,C=H,R=U,j=V,B=md5ff(B,H,U,V,e[k],7,-680876936),V=md5ff(V,B,H,U,e[k+1],12,-389564586),U=md5ff(U,V,B,H,e[k+2],17,606105819),H=md5ff(H,U,V,B,e[k+3],22,-1044525330),B=md5ff(B,H,U,V,e[k+4],7,-176418897),V=md5ff(V,B,H,U,e[k+5],12,1200080426),U=md5ff(U,V,B,H,e[k+6],17,-1473231341),H=md5ff(H,U,V,B,e[k+7],22,-45705983),B=md5ff(B,H,U,V,e[k+8],7,1770035416),V=md5ff(V,B,H,U,e[k+9],12,-1958414417),U=md5ff(U,V,B,H,e[k+10],17,-42063),H=md5ff(H,U,V,B,e[k+11],22,-1990404162),B=md5ff(B,H,U,V,e[k+12],7,1804603682),V=md5ff(V,B,H,U,e[k+13],12,-40341101),U=md5ff(U,V,B,H,e[k+14],17,-1502002290),B=md5gg(B,H=md5ff(H,U,V,B,e[k+15],22,1236535329),U,V,e[k+1],5,-165796510),V=md5gg(V,B,H,U,e[k+6],9,-1069501632),U=md5gg(U,V,B,H,e[k+11],14,643717713),H=md5gg(H,U,V,B,e[k],20,-373897302),B=md5gg(B,H,U,V,e[k+5],5,-701558691),V=md5gg(V,B,H,U,e[k+10],9,38016083),U=md5gg(U,V,B,H,e[k+15],14,-660478335),H=md5gg(H,U,V,B,e[k+4],20,-405537848),B=md5gg(B,H,U,V,e[k+9],5,568446438),V=md5gg(V,B,H,U,e[k+14],9,-1019803690),U=md5gg(U,V,B,H,e[k+3],14,-187363961),H=md5gg(H,U,V,B,e[k+8],20,1163531501),B=md5gg(B,H,U,V,e[k+13],5,-1444681467),V=md5gg(V,B,H,U,e[k+2],9,-51403784),U=md5gg(U,V,B,H,e[k+7],14,1735328473),B=md5hh(B,H=md5gg(H,U,V,B,e[k+12],20,-1926607734),U,V,e[k+5],4,-378558),V=md5hh(V,B,H,U,e[k+8],11,-2022574463),U=md5hh(U,V,B,H,e[k+11],16,1839030562),H=md5hh(H,U,V,B,e[k+14],23,-35309556),B=md5hh(B,H,U,V,e[k+1],4,-1530992060),V=md5hh(V,B,H,U,e[k+4],11,1272893353),U=md5hh(U,V,B,H,e[k+7],16,-155497632),H=md5hh(H,U,V,B,e[k+10],23,-1094730640),B=md5hh(B,H,U,V,e[k+13],4,681279174),V=md5hh(V,B,H,U,e[k],11,-358537222),U=md5hh(U,V,B,H,e[k+3],16,-722521979),H=md5hh(H,U,V,B,e[k+6],23,76029189),B=md5hh(B,H,U,V,e[k+9],4,-640364487),V=md5hh(V,B,H,U,e[k+12],11,-421815835),U=md5hh(U,V,B,H,e[k+15],16,530742520),B=md5ii(B,H=md5hh(H,U,V,B,e[k+2],23,-995338651),U,V,e[k],6,-198630844),V=md5ii(V,B,H,U,e[k+7],10,1126891415),U=md5ii(U,V,B,H,e[k+14],15,-1416354905),H=md5ii(H,U,V,B,e[k+5],21,-57434055),B=md5ii(B,H,U,V,e[k+12],6,1700485571),V=md5ii(V,B,H,U,e[k+3],10,-1894986606),U=md5ii(U,V,B,H,e[k+10],15,-1051523),H=md5ii(H,U,V,B,e[k+1],21,-2054922799),B=md5ii(B,H,U,V,e[k+8],6,1873313359),V=md5ii(V,B,H,U,e[k+15],10,-30611744),U=md5ii(U,V,B,H,e[k+6],15,-1560198380),H=md5ii(H,U,V,B,e[k+13],21,1309151649),B=md5ii(B,H,U,V,e[k+4],6,-145523070),V=md5ii(V,B,H,U,e[k+11],10,-1120210379),U=md5ii(U,V,B,H,e[k+2],15,718787259),H=md5ii(H,U,V,B,e[k+9],21,-343485551),B=safeAdd(B,I),H=safeAdd(H,C),U=safeAdd(U,R),V=safeAdd(V,j);return[B,H,U,V]}function binl2rstr(e){var _,k="",I=32*e.length;for(_=0;_<I;_+=8)k+=String.fromCharCode(e[_>>5]>>>_%32&255);return k}function rstr2binl(e){var _,k=[];for(k[(e.length>>2)-1]=void 0,_=0;_<k.length;_+=1)k[_]=0;var I=8*e.length;for(_=0;_<I;_+=8)k[_>>5]|=(255&e.charCodeAt(_/8))<<_%32;return k}function rstr2hex(e){var _,k,I="0123456789abcdef",C="";for(k=0;k<e.length;k+=1)_=e.charCodeAt(k),C+=I.charAt(_>>>4&15)+I.charAt(15&_);return C}function str2rstrUTF8(e){return unescape(encodeURIComponent(e))}function rawMD5(e){return function rstrMD5(e){return binl2rstr(binlMD5(rstr2binl(e),8*e.length))}(str2rstrUTF8(e))}function rawHMACMD5(e,_){return function rstrHMACMD5(e,_){var k,I,C=rstr2binl(e),R=[],j=[];for(R[15]=j[15]=void 0,C.length>16&&(C=binlMD5(C,8*e.length)),k=0;k<16;k+=1)R[k]=909522486^C[k],j[k]=1549556828^C[k];return I=binlMD5(R.concat(rstr2binl(_)),512+8*_.length),binl2rstr(binlMD5(j.concat(I),640))}(str2rstrUTF8(e),str2rstrUTF8(_))}function md5(e,_,k){return _?k?rawHMACMD5(_,e):function hexHMACMD5(e,_){return rstr2hex(rawHMACMD5(e,_))}(_,e):k?rawMD5(e):function hexMD5(e){return rstr2hex(rawMD5(e))}(e)}void 0===(I=function(){return md5}.call(_,k,_,e))||(e.exports=I)}()},94184:function(e,_){var k;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var I={}.hasOwnProperty;function classNames(){for(var e=[],_=0;_<arguments.length;_++){var k=arguments[_];if(k){var C=typeof k;if("string"===C||"number"===C)e.push(k);else if(Array.isArray(k)&&k.length){var R=classNames.apply(null,k);R&&e.push(R)}else if("object"===C)for(var j in k)I.call(k,j)&&k[j]&&e.push(j)}}return e.join(" ")}e.exports?(classNames.default=classNames,e.exports=classNames):void 0===(k=function(){return classNames}.apply(_,[]))||(e.exports=k)}()},37310:function(module){"use strict";function cloneFunction(func){var out,str;try{str=func.toString(),out=/\[native code\]/.test(str)?func:eval("(function(){return "+str+"}());")}catch(e){throw new Error(e.message+"\r\n\r\n"+str)}return out}module.exports=cloneFunction},24963:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},17722:function(e,_,k){var I=k(86314)("unscopables"),C=Array.prototype;null==C[I]&&k(87728)(C,I,{}),e.exports=function(e){C[I][e]=!0}},27007:function(e,_,k){var I=k(55286);e.exports=function(e){if(!I(e))throw TypeError(e+" is not an object!");return e}},79315:function(e,_,k){var I=k(22110),C=k(10875),R=k(92337);e.exports=function(e){return function(_,k,j){var B,H=I(_),U=C(H.length),V=R(j,U);if(e&&k!=k){for(;U>V;)if((B=H[V++])!=B)return!0}else for(;U>V;V++)if((e||V in H)&&H[V]===k)return e||V||0;return!e&&-1}}},10050:function(e,_,k){var I=k(741),C=k(49797),R=k(20508),j=k(10875),B=k(16886);e.exports=function(e,_){var k=1==e,H=2==e,U=3==e,V=4==e,G=6==e,q=5==e||G,z=_||B;return function(_,B,J){for(var Q,ee,te=R(_),ne=C(te),re=I(B,J,3),oe=j(ne.length),ie=0,ae=k?z(_,oe):H?z(_,0):void 0;oe>ie;ie++)if((q||ie in ne)&&(ee=re(Q=ne[ie],ie,te),e))if(k)ae[ie]=ee;else if(ee)switch(e){case 3:return!0;case 5:return Q;case 6:return ie;case 2:ae.push(Q)}else if(V)return!1;return G?-1:U||V?V:ae}}},37628:function(e,_,k){var I=k(24963),C=k(20508),R=k(49797),j=k(10875);e.exports=function(e,_,k,B,H){I(_);var U=C(e),V=R(U),G=j(U.length),q=H?G-1:0,z=H?-1:1;if(k<2)for(;;){if(q in V){B=V[q],q+=z;break}if(q+=z,H?q<0:G<=q)throw TypeError("Reduce of empty array with no initial value")}for(;H?q>=0:G>q;q+=z)q in V&&(B=_(B,V[q],q,U));return B}},42736:function(e,_,k){var I=k(55286),C=k(4302),R=k(86314)("species");e.exports=function(e){var _;return C(e)&&("function"!=typeof(_=e.constructor)||_!==Array&&!C(_.prototype)||(_=void 0),I(_)&&null===(_=_[R])&&(_=void 0)),void 0===_?Array:_}},16886:function(e,_,k){var I=k(42736);e.exports=function(e,_){return new(I(e))(_)}},41488:function(e,_,k){var I=k(92032),C=k(86314)("toStringTag"),R="Arguments"==I(function(){return arguments}());e.exports=function(e){var _,k,j;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(k=function(e,_){try{return e[_]}catch(e){}}(_=Object(e),C))?k:R?I(_):"Object"==(j=I(_))&&"function"==typeof _.callee?"Arguments":j}},92032:function(e){var _={}.toString;e.exports=function(e){return _.call(e).slice(8,-1)}},25645:function(e){var _=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=_)},92811:function(e,_,k){"use strict";var I=k(99275),C=k(90681);e.exports=function(e,_,k){_ in e?I.f(e,_,C(0,k)):e[_]=k}},741:function(e,_,k){var I=k(24963);e.exports=function(e,_,k){if(I(e),void 0===_)return e;switch(k){case 1:return function(k){return e.call(_,k)};case 2:return function(k,I){return e.call(_,k,I)};case 3:return function(k,I,C){return e.call(_,k,I,C)}}return function(){return e.apply(_,arguments)}}},91355:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},67057:function(e,_,k){e.exports=!k(74253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},62457:function(e,_,k){var I=k(55286),C=k(3816).document,R=I(C)&&I(C.createElement);e.exports=function(e){return R?C.createElement(e):{}}},74430:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},42985:function(e,_,k){var I=k(3816),C=k(25645),R=k(87728),j=k(77234),B=k(741),$export=function(e,_,k){var H,U,V,G,q=e&$export.F,z=e&$export.G,J=e&$export.S,Q=e&$export.P,ee=e&$export.B,te=z?I:J?I[_]||(I[_]={}):(I[_]||{}).prototype,ne=z?C:C[_]||(C[_]={}),re=ne.prototype||(ne.prototype={});for(H in z&&(k=_),k)V=((U=!q&&te&&void 0!==te[H])?te:k)[H],G=ee&&U?B(V,I):Q&&"function"==typeof V?B(Function.call,V):V,te&&j(te,H,V,e&$export.U),ne[H]!=V&&R(ne,H,G),Q&&re[H]!=V&&(re[H]=V)};I.core=C,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,e.exports=$export},74253:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},40018:function(e,_,k){e.exports=k(3825)("native-function-to-string",Function.toString)},3816:function(e){var _=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=_)},79181:function(e){var _={}.hasOwnProperty;e.exports=function(e,k){return _.call(e,k)}},87728:function(e,_,k){var I=k(99275),C=k(90681);e.exports=k(67057)?function(e,_,k){return I.f(e,_,C(1,k))}:function(e,_,k){return e[_]=k,e}},40639:function(e,_,k){var I=k(3816).document;e.exports=I&&I.documentElement},1734:function(e,_,k){e.exports=!k(67057)&&!k(74253)((function(){return 7!=Object.defineProperty(k(62457)("div"),"a",{get:function(){return 7}}).a}))},49797:function(e,_,k){var I=k(92032);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==I(e)?e.split(""):Object(e)}},86555:function(e,_,k){var I=k(87234),C=k(86314)("iterator"),R=Array.prototype;e.exports=function(e){return void 0!==e&&(I.Array===e||R[C]===e)}},4302:function(e,_,k){var I=k(92032);e.exports=Array.isArray||function isArray(e){return"Array"==I(e)}},55286:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},28851:function(e,_,k){var I=k(27007);e.exports=function(e,_,k,C){try{return C?_(I(k)[0],k[1]):_(k)}catch(_){var R=e.return;throw void 0!==R&&I(R.call(e)),_}}},49988:function(e,_,k){"use strict";var I=k(42503),C=k(90681),R=k(22943),j={};k(87728)(j,k(86314)("iterator"),(function(){return this})),e.exports=function(e,_,k){e.prototype=I(j,{next:C(1,k)}),R(e,_+" Iterator")}},42923:function(e,_,k){"use strict";var I=k(4461),C=k(42985),R=k(77234),j=k(87728),B=k(87234),H=k(49988),U=k(22943),V=k(468),G=k(86314)("iterator"),q=!([].keys&&"next"in[].keys()),z="keys",J="values",returnThis=function(){return this};e.exports=function(e,_,k,Q,ee,te,ne){H(k,_,Q);var re,oe,ie,getMethod=function(e){if(!q&&e in ce)return ce[e];switch(e){case z:return function keys(){return new k(this,e)};case J:return function values(){return new k(this,e)}}return function entries(){return new k(this,e)}},ae=_+" Iterator",le=ee==J,se=!1,ce=e.prototype,ue=ce[G]||ce["@@iterator"]||ee&&ce[ee],de=ue||getMethod(ee),pe=ee?le?getMethod("entries"):de:void 0,he="Array"==_&&ce.entries||ue;if(he&&(ie=V(he.call(new e)))!==Object.prototype&&ie.next&&(U(ie,ae,!0),I||"function"==typeof ie[G]||j(ie,G,returnThis)),le&&ue&&ue.name!==J&&(se=!0,de=function values(){return ue.call(this)}),I&&!ne||!q&&!se&&ce[G]||j(ce,G,de),B[_]=de,B[ae]=returnThis,ee)if(re={values:le?de:getMethod(J),keys:te?de:getMethod(z),entries:pe},ne)for(oe in re)oe in ce||R(ce,oe,re[oe]);else C(C.P+C.F*(q||se),_,re);return re}},7462:function(e,_,k){var I=k(86314)("iterator"),C=!1;try{var R=[7][I]();R.return=function(){C=!0},Array.from(R,(function(){throw 2}))}catch(e){}e.exports=function(e,_){if(!_&&!C)return!1;var k=!1;try{var R=[7],j=R[I]();j.next=function(){return{done:k=!0}},R[I]=function(){return j},e(R)}catch(e){}return k}},15436:function(e){e.exports=function(e,_){return{value:_,done:!!e}}},87234:function(e){e.exports={}},4461:function(e){e.exports=!1},35345:function(e,_,k){"use strict";var I=k(67057),C=k(47184),R=k(64548),j=k(14682),B=k(20508),H=k(49797),U=Object.assign;e.exports=!U||k(74253)((function(){var e={},_={},k=Symbol(),I="abcdefghijklmnopqrst";return e[k]=7,I.split("").forEach((function(e){_[e]=e})),7!=U({},e)[k]||Object.keys(U({},_)).join("")!=I}))?function assign(e,_){for(var k=B(e),U=arguments.length,V=1,G=R.f,q=j.f;U>V;)for(var z,J=H(arguments[V++]),Q=G?C(J).concat(G(J)):C(J),ee=Q.length,te=0;ee>te;)z=Q[te++],I&&!q.call(J,z)||(k[z]=J[z]);return k}:U},42503:function(e,_,k){var I=k(27007),C=k(35588),R=k(74430),j=k(69335)("IE_PROTO"),Empty=function(){},createDict=function(){var e,_=k(62457)("iframe"),I=R.length;for(_.style.display="none",k(40639).appendChild(_),_.src="javascript:",(e=_.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),createDict=e.F;I--;)delete createDict.prototype[R[I]];return createDict()};e.exports=Object.create||function create(e,_){var k;return null!==e?(Empty.prototype=I(e),k=new Empty,Empty.prototype=null,k[j]=e):k=createDict(),void 0===_?k:C(k,_)}},99275:function(e,_,k){var I=k(27007),C=k(1734),R=k(21689),j=Object.defineProperty;_.f=k(67057)?Object.defineProperty:function defineProperty(e,_,k){if(I(e),_=R(_,!0),I(k),C)try{return j(e,_,k)}catch(e){}if("get"in k||"set"in k)throw TypeError("Accessors not supported!");return"value"in k&&(e[_]=k.value),e}},35588:function(e,_,k){var I=k(99275),C=k(27007),R=k(47184);e.exports=k(67057)?Object.defineProperties:function defineProperties(e,_){C(e);for(var k,j=R(_),B=j.length,H=0;B>H;)I.f(e,k=j[H++],_[k]);return e}},64548:function(e,_){_.f=Object.getOwnPropertySymbols},468:function(e,_,k){var I=k(79181),C=k(20508),R=k(69335)("IE_PROTO"),j=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=C(e),I(e,R)?e[R]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?j:null}},60189:function(e,_,k){var I=k(79181),C=k(22110),R=k(79315)(!1),j=k(69335)("IE_PROTO");e.exports=function(e,_){var k,B=C(e),H=0,U=[];for(k in B)k!=j&&I(B,k)&&U.push(k);for(;_.length>H;)I(B,k=_[H++])&&(~R(U,k)||U.push(k));return U}},47184:function(e,_,k){var I=k(60189),C=k(74430);e.exports=Object.keys||function keys(e){return I(e,C)}},14682:function(e,_){_.f={}.propertyIsEnumerable},51131:function(e,_,k){var I=k(67057),C=k(47184),R=k(22110),j=k(14682).f;e.exports=function(e){return function(_){for(var k,B=R(_),H=C(B),U=H.length,V=0,G=[];U>V;)k=H[V++],I&&!j.call(B,k)||G.push(e?[k,B[k]]:B[k]);return G}}},90681:function(e){e.exports=function(e,_){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:_}}},77234:function(e,_,k){var I=k(3816),C=k(87728),R=k(79181),j=k(93953)("src"),B=k(40018),H="toString",U=(""+B).split(H);k(25645).inspectSource=function(e){return B.call(e)},(e.exports=function(e,_,k,B){var H="function"==typeof k;H&&(R(k,"name")||C(k,"name",_)),e[_]!==k&&(H&&(R(k,j)||C(k,j,e[_]?""+e[_]:U.join(String(_)))),e===I?e[_]=k:B?e[_]?e[_]=k:C(e,_,k):(delete e[_],C(e,_,k)))})(Function.prototype,H,(function toString(){return"function"==typeof this&&this[j]||B.call(this)}))},22943:function(e,_,k){var I=k(99275).f,C=k(79181),R=k(86314)("toStringTag");e.exports=function(e,_,k){e&&!C(e=k?e:e.prototype,R)&&I(e,R,{configurable:!0,value:_})}},69335:function(e,_,k){var I=k(3825)("keys"),C=k(93953);e.exports=function(e){return I[e]||(I[e]=C(e))}},3825:function(e,_,k){var I=k(25645),C=k(3816),R="__core-js_shared__",j=C[R]||(C[R]={});(e.exports=function(e,_){return j[e]||(j[e]=void 0!==_?_:{})})("versions",[]).push({version:I.version,mode:k(4461)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},77717:function(e,_,k){"use strict";var I=k(74253);e.exports=function(e,_){return!!e&&I((function(){_?e.call(null,(function(){}),1):e.call(null)}))}},92337:function(e,_,k){var I=k(81467),C=Math.max,R=Math.min;e.exports=function(e,_){return(e=I(e))<0?C(e+_,0):R(e,_)}},81467:function(e){var _=Math.ceil,k=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?k:_)(e)}},22110:function(e,_,k){var I=k(49797),C=k(91355);e.exports=function(e){return I(C(e))}},10875:function(e,_,k){var I=k(81467),C=Math.min;e.exports=function(e){return e>0?C(I(e),9007199254740991):0}},20508:function(e,_,k){var I=k(91355);e.exports=function(e){return Object(I(e))}},21689:function(e,_,k){var I=k(55286);e.exports=function(e,_){if(!I(e))return e;var k,C;if(_&&"function"==typeof(k=e.toString)&&!I(C=k.call(e)))return C;if("function"==typeof(k=e.valueOf)&&!I(C=k.call(e)))return C;if(!_&&"function"==typeof(k=e.toString)&&!I(C=k.call(e)))return C;throw TypeError("Can't convert object to primitive value")}},93953:function(e){var _=0,k=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++_+k).toString(36))}},86314:function(e,_,k){var I=k(3825)("wks"),C=k(93953),R=k(3816).Symbol,j="function"==typeof R;(e.exports=function(e){return I[e]||(I[e]=j&&R[e]||(j?R:C)("Symbol."+e))}).store=I},69002:function(e,_,k){var I=k(41488),C=k(86314)("iterator"),R=k(87234);e.exports=k(25645).getIteratorMethod=function(e){if(null!=e)return e[C]||e["@@iterator"]||R[I(e)]}},98837:function(e,_,k){"use strict";var I=k(42985),C=k(10050)(2);I(I.P+I.F*!k(77717)([].filter,!0),"Array",{filter:function filter(e){return C(this,e,arguments[1])}})},24336:function(e,_,k){"use strict";var I=k(42985),C=k(10050)(0),R=k(77717)([].forEach,!0);I(I.P+I.F*!R,"Array",{forEach:function forEach(e){return C(this,e,arguments[1])}})},30522:function(e,_,k){"use strict";var I=k(741),C=k(42985),R=k(20508),j=k(28851),B=k(86555),H=k(10875),U=k(92811),V=k(69002);C(C.S+C.F*!k(7462)((function(e){Array.from(e)})),"Array",{from:function from(e){var _,k,C,G,q=R(e),z="function"==typeof this?this:Array,J=arguments.length,Q=J>1?arguments[1]:void 0,ee=void 0!==Q,te=0,ne=V(q);if(ee&&(Q=I(Q,J>2?arguments[2]:void 0,2)),null==ne||z==Array&&B(ne))for(k=new z(_=H(q.length));_>te;te++)U(k,te,ee?Q(q[te],te):q[te]);else for(G=ne.call(q),k=new z;!(C=G.next()).done;te++)U(k,te,ee?j(G,Q,[C.value,te],!0):C.value);return k.length=te,k}})},56997:function(e,_,k){"use strict";var I=k(17722),C=k(15436),R=k(87234),j=k(22110);e.exports=k(42923)(Array,"Array",(function(e,_){this._t=j(e),this._i=0,this._k=_}),(function(){var e=this._t,_=this._k,k=this._i++;return!e||k>=e.length?(this._t=void 0,C(1)):C(0,"keys"==_?k:"values"==_?e[k]:[k,e[k]])}),"values"),R.Arguments=R.Array,I("keys"),I("values"),I("entries")},19371:function(e,_,k){"use strict";var I=k(42985),C=k(10050)(1);I(I.P+I.F*!k(77717)([].map,!0),"Array",{map:function map(e){return C(this,e,arguments[1])}})},33057:function(e,_,k){"use strict";var I=k(42985),C=k(37628);I(I.P+I.F*!k(77717)([].reduce,!0),"Array",{reduce:function reduce(e){return C(this,e,arguments.length,arguments[1],!1)}})},75115:function(e,_,k){var I=k(42985);I(I.S+I.F,"Object",{assign:k(35345)})},83276:function(e,_,k){var I=k(42985),C=k(51131)(!0);I(I.S,"Object",{entries:function entries(e){return C(e)}})},96409:function(e,_,k){var I=k(42985),C=k(51131)(!1);I(I.S,"Object",{values:function values(e){return C(e)}})},91181:function(e,_,k){for(var I=k(56997),C=k(47184),R=k(77234),j=k(3816),B=k(87728),H=k(87234),U=k(86314),V=U("iterator"),G=U("toStringTag"),q=H.Array,z={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},J=C(z),Q=0;Q<J.length;Q++){var ee,te=J[Q],ne=z[te],re=j[te],oe=re&&re.prototype;if(oe&&(oe[V]||B(oe,V,q),oe[G]||B(oe,G,te),H[te]=q,ne))for(ee in I)oe[ee]||R(oe,ee,I[ee],!0)}},27484:function(e){e.exports=function(){"use strict";var e=1e3,_=6e4,k=36e5,I="millisecond",C="second",R="minute",j="hour",B="day",H="week",U="month",V="quarter",G="year",q="date",z="Invalid Date",J=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ee={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var _=["th","st","nd","rd"],k=e%100;return"["+e+(_[(k-20)%10]||_[k]||_[0])+"]"}},m=function(e,_,k){var I=String(e);return!I||I.length>=_?e:""+Array(_+1-I.length).join(k)+e},te={s:m,z:function(e){var _=-e.utcOffset(),k=Math.abs(_),I=Math.floor(k/60),C=k%60;return(_<=0?"+":"-")+m(I,2,"0")+":"+m(C,2,"0")},m:function t(e,_){if(e.date()<_.date())return-t(_,e);var k=12*(_.year()-e.year())+(_.month()-e.month()),I=e.clone().add(k,U),C=_-I<0,R=e.clone().add(k+(C?-1:1),U);return+(-(k+(_-I)/(C?I-R:R-I))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:U,y:G,w:H,d:B,D:q,h:j,m:R,s:C,ms:I,Q:V}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},ne="en",re={};re[ne]=ee;var oe="$isDayjsObject",S=function(e){return e instanceof le||!(!e||!e[oe])},ie=function t(e,_,k){var I;if(!e)return ne;if("string"==typeof e){var C=e.toLowerCase();re[C]&&(I=C),_&&(re[C]=_,I=C);var R=e.split("-");if(!I&&R.length>1)return t(R[0])}else{var j=e.name;re[j]=e,I=j}return!k&&I&&(ne=I),I||!k&&ne},O=function(e,_){if(S(e))return e.clone();var k="object"==typeof _?_:{};return k.date=e,k.args=arguments,new le(k)},ae=te;ae.l=ie,ae.i=S,ae.w=function(e,_){return O(e,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var le=function(){function M(e){this.$L=ie(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[oe]=!0}var ee=M.prototype;return ee.parse=function(e){this.$d=function(e){var _=e.date,k=e.utc;if(null===_)return new Date(NaN);if(ae.u(_))return new Date;if(_ instanceof Date)return new Date(_);if("string"==typeof _&&!/Z$/i.test(_)){var I=_.match(J);if(I){var C=I[2]-1||0,R=(I[7]||"0").substring(0,3);return k?new Date(Date.UTC(I[1],C,I[3]||1,I[4]||0,I[5]||0,I[6]||0,R)):new Date(I[1],C,I[3]||1,I[4]||0,I[5]||0,I[6]||0,R)}}return new Date(_)}(e),this.init()},ee.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},ee.$utils=function(){return ae},ee.isValid=function(){return!(this.$d.toString()===z)},ee.isSame=function(e,_){var k=O(e);return this.startOf(_)<=k&&k<=this.endOf(_)},ee.isAfter=function(e,_){return O(e)<this.startOf(_)},ee.isBefore=function(e,_){return this.endOf(_)<O(e)},ee.$g=function(e,_,k){return ae.u(e)?this[_]:this.set(k,e)},ee.unix=function(){return Math.floor(this.valueOf()/1e3)},ee.valueOf=function(){return this.$d.getTime()},ee.startOf=function(e,_){var k=this,I=!!ae.u(_)||_,V=ae.p(e),l=function(e,_){var C=ae.w(k.$u?Date.UTC(k.$y,_,e):new Date(k.$y,_,e),k);return I?C:C.endOf(B)},$=function(e,_){return ae.w(k.toDate()[e].apply(k.toDate("s"),(I?[0,0,0,0]:[23,59,59,999]).slice(_)),k)},z=this.$W,J=this.$M,Q=this.$D,ee="set"+(this.$u?"UTC":"");switch(V){case G:return I?l(1,0):l(31,11);case U:return I?l(1,J):l(0,J+1);case H:var te=this.$locale().weekStart||0,ne=(z<te?z+7:z)-te;return l(I?Q-ne:Q+(6-ne),J);case B:case q:return $(ee+"Hours",0);case j:return $(ee+"Minutes",1);case R:return $(ee+"Seconds",2);case C:return $(ee+"Milliseconds",3);default:return this.clone()}},ee.endOf=function(e){return this.startOf(e,!1)},ee.$set=function(e,_){var k,H=ae.p(e),V="set"+(this.$u?"UTC":""),z=(k={},k[B]=V+"Date",k[q]=V+"Date",k[U]=V+"Month",k[G]=V+"FullYear",k[j]=V+"Hours",k[R]=V+"Minutes",k[C]=V+"Seconds",k[I]=V+"Milliseconds",k)[H],J=H===B?this.$D+(_-this.$W):_;if(H===U||H===G){var Q=this.clone().set(q,1);Q.$d[z](J),Q.init(),this.$d=Q.set(q,Math.min(this.$D,Q.daysInMonth())).$d}else z&&this.$d[z](J);return this.init(),this},ee.set=function(e,_){return this.clone().$set(e,_)},ee.get=function(e){return this[ae.p(e)]()},ee.add=function(I,V){var q,z=this;I=Number(I);var J=ae.p(V),y=function(e){var _=O(z);return ae.w(_.date(_.date()+Math.round(e*I)),z)};if(J===U)return this.set(U,this.$M+I);if(J===G)return this.set(G,this.$y+I);if(J===B)return y(1);if(J===H)return y(7);var Q=(q={},q[R]=_,q[j]=k,q[C]=e,q)[J]||1,ee=this.$d.getTime()+I*Q;return ae.w(ee,this)},ee.subtract=function(e,_){return this.add(-1*e,_)},ee.format=function(e){var _=this,k=this.$locale();if(!this.isValid())return k.invalidDate||z;var I=e||"YYYY-MM-DDTHH:mm:ssZ",C=ae.z(this),R=this.$H,j=this.$m,B=this.$M,H=k.weekdays,U=k.months,V=k.meridiem,h=function(e,k,C,R){return e&&(e[k]||e(_,I))||C[k].slice(0,R)},d=function(e){return ae.s(R%12||12,e,"0")},G=V||function(e,_,k){var I=e<12?"AM":"PM";return k?I.toLowerCase():I};return I.replace(Q,(function(e,I){return I||function(e){switch(e){case"YY":return String(_.$y).slice(-2);case"YYYY":return ae.s(_.$y,4,"0");case"M":return B+1;case"MM":return ae.s(B+1,2,"0");case"MMM":return h(k.monthsShort,B,U,3);case"MMMM":return h(U,B);case"D":return _.$D;case"DD":return ae.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return h(k.weekdaysMin,_.$W,H,2);case"ddd":return h(k.weekdaysShort,_.$W,H,3);case"dddd":return H[_.$W];case"H":return String(R);case"HH":return ae.s(R,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return G(R,j,!0);case"A":return G(R,j,!1);case"m":return String(j);case"mm":return ae.s(j,2,"0");case"s":return String(_.$s);case"ss":return ae.s(_.$s,2,"0");case"SSS":return ae.s(_.$ms,3,"0");case"Z":return C}return null}(e)||C.replace(":","")}))},ee.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ee.diff=function(I,q,z){var J,Q=this,ee=ae.p(q),te=O(I),ne=(te.utcOffset()-this.utcOffset())*_,re=this-te,D=function(){return ae.m(Q,te)};switch(ee){case G:J=D()/12;break;case U:J=D();break;case V:J=D()/3;break;case H:J=(re-ne)/6048e5;break;case B:J=(re-ne)/864e5;break;case j:J=re/k;break;case R:J=re/_;break;case C:J=re/e;break;default:J=re}return z?J:ae.a(J)},ee.daysInMonth=function(){return this.endOf(U).$D},ee.$locale=function(){return re[this.$L]},ee.locale=function(e,_){if(!e)return this.$L;var k=this.clone(),I=ie(e,_,!0);return I&&(k.$L=I),k},ee.clone=function(){return ae.w(this.$d,this)},ee.toDate=function(){return new Date(this.valueOf())},ee.toJSON=function(){return this.isValid()?this.toISOString():null},ee.toISOString=function(){return this.$d.toISOString()},ee.toString=function(){return this.$d.toUTCString()},M}(),se=le.prototype;return O.prototype=se,[["$ms",I],["$s",C],["$m",R],["$H",j],["$W",B],["$M",U],["$y",G],["$D",q]].forEach((function(e){se[e[1]]=function(_){return this.$g(_,e[0],e[1])}})),O.extend=function(e,_){return e.$i||(e(_,le,O),e.$i=!0),O},O.locale=ie,O.isDayjs=S,O.unix=function(e){return O(1e3*e)},O.en=re[ne],O.Ls=re,O.p={},O}()},70660:function(e){e.exports=function(){"use strict";return function(e,_,k){k.updateLocale=function(e,_){var I=k.Ls[e];if(I)return(_?Object.keys(_):[]).forEach((function(e){I[e]=_[e]})),I}}}()},65987:function(e){"use strict";var _={single_source_shortest_paths:function(e,k,I){var C={},R={};R[k]=0;var j,B,H,U,V,G,q,z=_.PriorityQueue.make();for(z.push(k,0);!z.empty();)for(H in B=(j=z.pop()).value,U=j.cost,V=e[B]||{})V.hasOwnProperty(H)&&(G=U+V[H],q=R[H],(void 0===R[H]||q>G)&&(R[H]=G,z.push(H,G),C[H]=B));if(void 0!==I&&void 0===R[I]){var J=["Could not find a path from ",k," to ",I,"."].join("");throw new Error(J)}return C},extract_shortest_path_from_predecessor_list:function(e,_){for(var k=[],I=_;I;)k.push(I),e[I],I=e[I];return k.reverse(),k},find_path:function(e,k,I){var C=_.single_source_shortest_paths(e,k,I);return _.extract_shortest_path_from_predecessor_list(C,I)},PriorityQueue:{make:function(e){var k,I=_.PriorityQueue,C={};for(k in e=e||{},I)I.hasOwnProperty(k)&&(C[k]=I[k]);return C.queue=[],C.sorter=e.sorter||I.default_sorter,C},default_sorter:function(e,_){return e.cost-_.cost},push:function(e,_){var k={value:e,cost:_};this.queue.push(k),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=_},50479:function(e,_,k){"use strict";function addClass(e,_){e.classList?e.classList.add(_):function hasClass(e,_){return e.classList?!!_&&e.classList.contains(_):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+_+" ")}(e,_)||("string"==typeof e.className?e.className=e.className+" "+_:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+_))}k.d(_,{Z:function(){return addClass}})},74277:function(e,_,k){"use strict";function replaceClassName(e,_){return e.replace(new RegExp("(^|\\s)"+_+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass(e,_){e.classList?e.classList.remove(_):"string"==typeof e.className?e.className=replaceClassName(e.className,_):e.setAttribute("class",replaceClassName(e.className&&e.className.baseVal||"",_))}k.d(_,{Z:function(){return removeClass}})},8679:function(e,_,k){"use strict";var I=k(59864),C={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},R={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},j={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},B={};function getStatics(e){return I.isMemo(e)?j:B[e.$$typeof]||C}B[I.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},B[I.Memo]=j;var H=Object.defineProperty,U=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,G=Object.getOwnPropertyDescriptor,q=Object.getPrototypeOf,z=Object.prototype;e.exports=function hoistNonReactStatics(e,_,k){if("string"!=typeof _){if(z){var I=q(_);I&&I!==z&&hoistNonReactStatics(e,I,k)}var C=U(_);V&&(C=C.concat(V(_)));for(var j=getStatics(e),B=getStatics(_),J=0;J<C.length;++J){var Q=C[J];if(!(R[Q]||k&&k[Q]||B&&B[Q]||j&&j[Q])){var ee=G(_,Q);try{H(e,Q,ee)}catch(e){}}}}return e}},83465:function(e,_,k){e=k.nmd(e);var I="__lodash_hash_undefined__",C=9007199254740991,R="[object Arguments]",j="[object Boolean]",B="[object Date]",H="[object Function]",U="[object GeneratorFunction]",V="[object Map]",G="[object Number]",q="[object Object]",z="[object Promise]",J="[object RegExp]",Q="[object Set]",ee="[object String]",te="[object Symbol]",ne="[object WeakMap]",re="[object ArrayBuffer]",oe="[object DataView]",ie="[object Float32Array]",ae="[object Float64Array]",le="[object Int8Array]",se="[object Int16Array]",ce="[object Int32Array]",ue="[object Uint8Array]",de="[object Uint8ClampedArray]",pe="[object Uint16Array]",he="[object Uint32Array]",fe=/\w*$/,me=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,ve={};ve[R]=ve["[object Array]"]=ve[re]=ve[oe]=ve[j]=ve[B]=ve[ie]=ve[ae]=ve[le]=ve[se]=ve[ce]=ve[V]=ve[G]=ve[q]=ve[J]=ve[Q]=ve[ee]=ve[te]=ve[ue]=ve[de]=ve[pe]=ve[he]=!0,ve["[object Error]"]=ve[H]=ve[ne]=!1;var ye="object"==typeof k.g&&k.g&&k.g.Object===Object&&k.g,be="object"==typeof self&&self&&self.Object===Object&&self,_e=ye||be||Function("return this")(),we=_&&!_.nodeType&&_,Ee=we&&e&&!e.nodeType&&e,Se=Ee&&Ee.exports===we;function addMapEntry(e,_){return e.set(_[0],_[1]),e}function addSetEntry(e,_){return e.add(_),e}function arrayReduce(e,_,k,I){var C=-1,R=e?e.length:0;for(I&&R&&(k=e[++C]);++C<R;)k=_(k,e[C],C,e);return k}function isHostObject(e){var _=!1;if(null!=e&&"function"!=typeof e.toString)try{_=!!(e+"")}catch(e){}return _}function mapToArray(e){var _=-1,k=Array(e.size);return e.forEach((function(e,I){k[++_]=[I,e]})),k}function overArg(e,_){return function(k){return e(_(k))}}function setToArray(e){var _=-1,k=Array(e.size);return e.forEach((function(e){k[++_]=e})),k}var Oe,Te=Array.prototype,ke=Function.prototype,Ie=Object.prototype,Ce=_e["__core-js_shared__"],Pe=(Oe=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+Oe:"",Le=ke.toString,Ne=Ie.hasOwnProperty,De=Ie.toString,Ae=RegExp("^"+Le.call(Ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Se?_e.Buffer:void 0,xe=_e.Symbol,je=_e.Uint8Array,Be=overArg(Object.getPrototypeOf,Object),Me=Object.create,Fe=Ie.propertyIsEnumerable,He=Te.splice,Ke=Object.getOwnPropertySymbols,Ue=Re?Re.isBuffer:void 0,Ze=overArg(Object.keys,Object),Ve=getNative(_e,"DataView"),We=getNative(_e,"Map"),Ge=getNative(_e,"Promise"),$e=getNative(_e,"Set"),qe=getNative(_e,"WeakMap"),ze=getNative(Object,"create"),Ye=toSource(Ve),Je=toSource(We),Xe=toSource(Ge),Qe=toSource($e),et=toSource(qe),tt=xe?xe.prototype:void 0,nt=tt?tt.valueOf:void 0;function Hash(e){var _=-1,k=e?e.length:0;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function ListCache(e){var _=-1,k=e?e.length:0;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function MapCache(e){var _=-1,k=e?e.length:0;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function Stack(e){this.__data__=new ListCache(e)}function arrayLikeKeys(e,_){var k=it(e)||function isArguments(e){return function isArrayLikeObject(e){return function isObjectLike(e){return!!e&&"object"==typeof e}(e)&&isArrayLike(e)}(e)&&Ne.call(e,"callee")&&(!Fe.call(e,"callee")||De.call(e)==R)}(e)?function baseTimes(e,_){for(var k=-1,I=Array(e);++k<e;)I[k]=_(k);return I}(e.length,String):[],I=k.length,C=!!I;for(var j in e)!_&&!Ne.call(e,j)||C&&("length"==j||isIndex(j,I))||k.push(j);return k}function assignValue(e,_,k){var I=e[_];Ne.call(e,_)&&eq(I,k)&&(void 0!==k||_ in e)||(e[_]=k)}function assocIndexOf(e,_){for(var k=e.length;k--;)if(eq(e[k][0],_))return k;return-1}function baseClone(e,_,k,I,C,z,ne){var me;if(I&&(me=z?I(e,C,z,ne):I(e)),void 0!==me)return me;if(!isObject(e))return e;var ge=it(e);if(ge){if(me=function initCloneArray(e){var _=e.length,k=e.constructor(_);_&&"string"==typeof e[0]&&Ne.call(e,"index")&&(k.index=e.index,k.input=e.input);return k}(e),!_)return function copyArray(e,_){var k=-1,I=e.length;_||(_=Array(I));for(;++k<I;)_[k]=e[k];return _}(e,me)}else{var ye=ot(e),be=ye==H||ye==U;if(at(e))return function cloneBuffer(e,_){if(_)return e.slice();var k=new e.constructor(e.length);return e.copy(k),k}(e,_);if(ye==q||ye==R||be&&!z){if(isHostObject(e))return z?e:{};if(me=function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:function baseCreate(e){return isObject(e)?Me(e):{}}(Be(e))}(be?{}:e),!_)return function copySymbols(e,_){return copyObject(e,rt(e),_)}(e,function baseAssign(e,_){return e&&copyObject(_,keys(_),e)}(me,e))}else{if(!ve[ye])return z?e:{};me=function initCloneByTag(e,_,k,I){var C=e.constructor;switch(_){case re:return cloneArrayBuffer(e);case j:case B:return new C(+e);case oe:return function cloneDataView(e,_){var k=_?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(k,e.byteOffset,e.byteLength)}(e,I);case ie:case ae:case le:case se:case ce:case ue:case de:case pe:case he:return function cloneTypedArray(e,_){var k=_?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(k,e.byteOffset,e.length)}(e,I);case V:return function cloneMap(e,_,k){return arrayReduce(_?k(mapToArray(e),!0):mapToArray(e),addMapEntry,new e.constructor)}(e,I,k);case G:case ee:return new C(e);case J:return function cloneRegExp(e){var _=new e.constructor(e.source,fe.exec(e));return _.lastIndex=e.lastIndex,_}(e);case Q:return function cloneSet(e,_,k){return arrayReduce(_?k(setToArray(e),!0):setToArray(e),addSetEntry,new e.constructor)}(e,I,k);case te:return function cloneSymbol(e){return nt?Object(nt.call(e)):{}}(e)}}(e,ye,baseClone,_)}}ne||(ne=new Stack);var _e=ne.get(e);if(_e)return _e;if(ne.set(e,me),!ge)var we=k?function getAllKeys(e){return function baseGetAllKeys(e,_,k){var I=_(e);return it(e)?I:function arrayPush(e,_){for(var k=-1,I=_.length,C=e.length;++k<I;)e[C+k]=_[k];return e}(I,k(e))}(e,keys,rt)}(e):keys(e);return function arrayEach(e,_){for(var k=-1,I=e?e.length:0;++k<I&&!1!==_(e[k],k,e););return e}(we||e,(function(C,R){we&&(C=e[R=C]),assignValue(me,R,baseClone(C,_,k,I,R,e,ne))})),me}function baseIsNative(e){return!(!isObject(e)||function isMasked(e){return!!Pe&&Pe in e}(e))&&(isFunction(e)||isHostObject(e)?Ae:me).test(toSource(e))}function cloneArrayBuffer(e){var _=new e.constructor(e.byteLength);return new je(_).set(new je(e)),_}function copyObject(e,_,k,I){k||(k={});for(var C=-1,R=_.length;++C<R;){var j=_[C],B=I?I(k[j],e[j],j,k,e):void 0;assignValue(k,j,void 0===B?e[j]:B)}return k}function getMapData(e,_){var k=e.__data__;return function isKeyable(e){var _=typeof e;return"string"==_||"number"==_||"symbol"==_||"boolean"==_?"__proto__"!==e:null===e}(_)?k["string"==typeof _?"string":"hash"]:k.map}function getNative(e,_){var k=function getValue(e,_){return null==e?void 0:e[_]}(e,_);return baseIsNative(k)?k:void 0}Hash.prototype.clear=function hashClear(){this.__data__=ze?ze(null):{}},Hash.prototype.delete=function hashDelete(e){return this.has(e)&&delete this.__data__[e]},Hash.prototype.get=function hashGet(e){var _=this.__data__;if(ze){var k=_[e];return k===I?void 0:k}return Ne.call(_,e)?_[e]:void 0},Hash.prototype.has=function hashHas(e){var _=this.__data__;return ze?void 0!==_[e]:Ne.call(_,e)},Hash.prototype.set=function hashSet(e,_){return this.__data__[e]=ze&&void 0===_?I:_,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(e){var _=this.__data__,k=assocIndexOf(_,e);return!(k<0)&&(k==_.length-1?_.pop():He.call(_,k,1),!0)},ListCache.prototype.get=function listCacheGet(e){var _=this.__data__,k=assocIndexOf(_,e);return k<0?void 0:_[k][1]},ListCache.prototype.has=function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1},ListCache.prototype.set=function listCacheSet(e,_){var k=this.__data__,I=assocIndexOf(k,e);return I<0?k.push([e,_]):k[I][1]=_,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(We||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(e){return getMapData(this,e).delete(e)},MapCache.prototype.get=function mapCacheGet(e){return getMapData(this,e).get(e)},MapCache.prototype.has=function mapCacheHas(e){return getMapData(this,e).has(e)},MapCache.prototype.set=function mapCacheSet(e,_){return getMapData(this,e).set(e,_),this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache},Stack.prototype.delete=function stackDelete(e){return this.__data__.delete(e)},Stack.prototype.get=function stackGet(e){return this.__data__.get(e)},Stack.prototype.has=function stackHas(e){return this.__data__.has(e)},Stack.prototype.set=function stackSet(e,_){var k=this.__data__;if(k instanceof ListCache){var I=k.__data__;if(!We||I.length<199)return I.push([e,_]),this;k=this.__data__=new MapCache(I)}return k.set(e,_),this};var rt=Ke?overArg(Ke,Object):function stubArray(){return[]},ot=function baseGetTag(e){return De.call(e)};function isIndex(e,_){return!!(_=null==_?C:_)&&("number"==typeof e||ge.test(e))&&e>-1&&e%1==0&&e<_}function isPrototype(e){var _=e&&e.constructor;return e===("function"==typeof _&&_.prototype||Ie)}function toSource(e){if(null!=e){try{return Le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eq(e,_){return e===_||e!=e&&_!=_}(Ve&&ot(new Ve(new ArrayBuffer(1)))!=oe||We&&ot(new We)!=V||Ge&&ot(Ge.resolve())!=z||$e&&ot(new $e)!=Q||qe&&ot(new qe)!=ne)&&(ot=function(e){var _=De.call(e),k=_==q?e.constructor:void 0,I=k?toSource(k):void 0;if(I)switch(I){case Ye:return oe;case Je:return V;case Xe:return z;case Qe:return Q;case et:return ne}return _});var it=Array.isArray;function isArrayLike(e){return null!=e&&function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}(e.length)&&!isFunction(e)}var at=Ue||function stubFalse(){return!1};function isFunction(e){var _=isObject(e)?De.call(e):"";return _==H||_==U}function isObject(e){var _=typeof e;return!!e&&("object"==_||"function"==_)}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):function baseKeys(e){if(!isPrototype(e))return Ze(e);var _=[];for(var k in Object(e))Ne.call(e,k)&&"constructor"!=k&&_.push(k);return _}(e)}e.exports=function cloneDeep(e){return baseClone(e,!0,!0)}},72307:function(e,_,k){e=k.nmd(e);var I="__lodash_hash_undefined__",C=9007199254740991,R="[object Arguments]",j="[object Array]",B="[object Boolean]",H="[object Date]",U="[object Error]",V="[object Function]",G="[object Map]",q="[object Number]",z="[object Object]",J="[object Promise]",Q="[object RegExp]",ee="[object Set]",te="[object String]",ne="[object Symbol]",re="[object WeakMap]",oe="[object ArrayBuffer]",ie="[object DataView]",ae=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,se={};se["[object Float32Array]"]=se["[object Float64Array]"]=se["[object Int8Array]"]=se["[object Int16Array]"]=se["[object Int32Array]"]=se["[object Uint8Array]"]=se["[object Uint8ClampedArray]"]=se["[object Uint16Array]"]=se["[object Uint32Array]"]=!0,se[R]=se[j]=se[oe]=se[B]=se[ie]=se[H]=se[U]=se[V]=se[G]=se[q]=se[z]=se[Q]=se[ee]=se[te]=se[re]=!1;var ce="object"==typeof k.g&&k.g&&k.g.Object===Object&&k.g,ue="object"==typeof self&&self&&self.Object===Object&&self,de=ce||ue||Function("return this")(),pe=_&&!_.nodeType&&_,he=pe&&e&&!e.nodeType&&e,fe=he&&he.exports===pe,me=fe&&ce.process,ge=function(){try{return me&&me.binding&&me.binding("util")}catch(e){}}(),ve=ge&&ge.isTypedArray;function arraySome(e,_){for(var k=-1,I=null==e?0:e.length;++k<I;)if(_(e[k],k,e))return!0;return!1}function mapToArray(e){var _=-1,k=Array(e.size);return e.forEach((function(e,I){k[++_]=[I,e]})),k}function setToArray(e){var _=-1,k=Array(e.size);return e.forEach((function(e){k[++_]=e})),k}var ye,be=Array.prototype,_e=Function.prototype,we=Object.prototype,Ee=de["__core-js_shared__"],Se=_e.toString,Oe=we.hasOwnProperty,Te=(ye=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+ye:"",ke=we.toString,Ie=RegExp("^"+Se.call(Oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=fe?de.Buffer:void 0,Pe=de.Symbol,Le=de.Uint8Array,Ne=we.propertyIsEnumerable,De=be.splice,Ae=Pe?Pe.toStringTag:void 0,Re=Object.getOwnPropertySymbols,xe=Ce?Ce.isBuffer:void 0,je=function overArg(e,_){return function(k){return e(_(k))}}(Object.keys,Object),Be=getNative(de,"DataView"),Me=getNative(de,"Map"),Fe=getNative(de,"Promise"),He=getNative(de,"Set"),Ke=getNative(de,"WeakMap"),Ue=getNative(Object,"create"),Ze=toSource(Be),Ve=toSource(Me),We=toSource(Fe),Ge=toSource(He),$e=toSource(Ke),qe=Pe?Pe.prototype:void 0,ze=qe?qe.valueOf:void 0;function Hash(e){var _=-1,k=null==e?0:e.length;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function ListCache(e){var _=-1,k=null==e?0:e.length;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function MapCache(e){var _=-1,k=null==e?0:e.length;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function SetCache(e){var _=-1,k=null==e?0:e.length;for(this.__data__=new MapCache;++_<k;)this.add(e[_])}function Stack(e){var _=this.__data__=new ListCache(e);this.size=_.size}function arrayLikeKeys(e,_){var k=Qe(e),I=!k&&Xe(e),C=!k&&!I&&et(e),R=!k&&!I&&!C&&tt(e),j=k||I||C||R,B=j?function baseTimes(e,_){for(var k=-1,I=Array(e);++k<e;)I[k]=_(k);return I}(e.length,String):[],H=B.length;for(var U in e)!_&&!Oe.call(e,U)||j&&("length"==U||C&&("offset"==U||"parent"==U)||R&&("buffer"==U||"byteLength"==U||"byteOffset"==U)||isIndex(U,H))||B.push(U);return B}function assocIndexOf(e,_){for(var k=e.length;k--;)if(eq(e[k][0],_))return k;return-1}function baseGetTag(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ae&&Ae in Object(e)?function getRawTag(e){var _=Oe.call(e,Ae),k=e[Ae];try{e[Ae]=void 0;var I=!0}catch(e){}var C=ke.call(e);I&&(_?e[Ae]=k:delete e[Ae]);return C}(e):function objectToString(e){return ke.call(e)}(e)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==R}function baseIsEqual(e,_,k,I,C){return e===_||(null==e||null==_||!isObjectLike(e)&&!isObjectLike(_)?e!=e&&_!=_:function baseIsEqualDeep(e,_,k,I,C,V){var J=Qe(e),re=Qe(_),ae=J?j:Je(e),le=re?j:Je(_),se=(ae=ae==R?z:ae)==z,ce=(le=le==R?z:le)==z,ue=ae==le;if(ue&&et(e)){if(!et(_))return!1;J=!0,se=!1}if(ue&&!se)return V||(V=new Stack),J||tt(e)?equalArrays(e,_,k,I,C,V):function equalByTag(e,_,k,I,C,R,j){switch(k){case ie:if(e.byteLength!=_.byteLength||e.byteOffset!=_.byteOffset)return!1;e=e.buffer,_=_.buffer;case oe:return!(e.byteLength!=_.byteLength||!R(new Le(e),new Le(_)));case B:case H:case q:return eq(+e,+_);case U:return e.name==_.name&&e.message==_.message;case Q:case te:return e==_+"";case G:var V=mapToArray;case ee:var z=1&I;if(V||(V=setToArray),e.size!=_.size&&!z)return!1;var J=j.get(e);if(J)return J==_;I|=2,j.set(e,_);var re=equalArrays(V(e),V(_),I,C,R,j);return j.delete(e),re;case ne:if(ze)return ze.call(e)==ze.call(_)}return!1}(e,_,ae,k,I,C,V);if(!(1&k)){var de=se&&Oe.call(e,"__wrapped__"),pe=ce&&Oe.call(_,"__wrapped__");if(de||pe){var he=de?e.value():e,fe=pe?_.value():_;return V||(V=new Stack),C(he,fe,k,I,V)}}if(!ue)return!1;return V||(V=new Stack),function equalObjects(e,_,k,I,C,R){var j=1&k,B=getAllKeys(e),H=B.length,U=getAllKeys(_).length;if(H!=U&&!j)return!1;var V=H;for(;V--;){var G=B[V];if(!(j?G in _:Oe.call(_,G)))return!1}var q=R.get(e);if(q&&R.get(_))return q==_;var z=!0;R.set(e,_),R.set(_,e);var J=j;for(;++V<H;){var Q=e[G=B[V]],ee=_[G];if(I)var te=j?I(ee,Q,G,_,e,R):I(Q,ee,G,e,_,R);if(!(void 0===te?Q===ee||C(Q,ee,k,I,R):te)){z=!1;break}J||(J="constructor"==G)}if(z&&!J){var ne=e.constructor,re=_.constructor;ne==re||!("constructor"in e)||!("constructor"in _)||"function"==typeof ne&&ne instanceof ne&&"function"==typeof re&&re instanceof re||(z=!1)}return R.delete(e),R.delete(_),z}(e,_,k,I,C,V)}(e,_,k,I,baseIsEqual,C))}function baseIsNative(e){return!(!isObject(e)||function isMasked(e){return!!Te&&Te in e}(e))&&(isFunction(e)?Ie:ae).test(toSource(e))}function baseKeys(e){if(!function isPrototype(e){var _=e&&e.constructor,k="function"==typeof _&&_.prototype||we;return e===k}(e))return je(e);var _=[];for(var k in Object(e))Oe.call(e,k)&&"constructor"!=k&&_.push(k);return _}function equalArrays(e,_,k,I,C,R){var j=1&k,B=e.length,H=_.length;if(B!=H&&!(j&&H>B))return!1;var U=R.get(e);if(U&&R.get(_))return U==_;var V=-1,G=!0,q=2&k?new SetCache:void 0;for(R.set(e,_),R.set(_,e);++V<B;){var z=e[V],J=_[V];if(I)var Q=j?I(J,z,V,_,e,R):I(z,J,V,e,_,R);if(void 0!==Q){if(Q)continue;G=!1;break}if(q){if(!arraySome(_,(function(e,_){if(j=_,!q.has(j)&&(z===e||C(z,e,k,I,R)))return q.push(_);var j}))){G=!1;break}}else if(z!==J&&!C(z,J,k,I,R)){G=!1;break}}return R.delete(e),R.delete(_),G}function getAllKeys(e){return function baseGetAllKeys(e,_,k){var I=_(e);return Qe(e)?I:function arrayPush(e,_){for(var k=-1,I=_.length,C=e.length;++k<I;)e[C+k]=_[k];return e}(I,k(e))}(e,keys,Ye)}function getMapData(e,_){var k=e.__data__;return function isKeyable(e){var _=typeof e;return"string"==_||"number"==_||"symbol"==_||"boolean"==_?"__proto__"!==e:null===e}(_)?k["string"==typeof _?"string":"hash"]:k.map}function getNative(e,_){var k=function getValue(e,_){return null==e?void 0:e[_]}(e,_);return baseIsNative(k)?k:void 0}Hash.prototype.clear=function hashClear(){this.__data__=Ue?Ue(null):{},this.size=0},Hash.prototype.delete=function hashDelete(e){var _=this.has(e)&&delete this.__data__[e];return this.size-=_?1:0,_},Hash.prototype.get=function hashGet(e){var _=this.__data__;if(Ue){var k=_[e];return k===I?void 0:k}return Oe.call(_,e)?_[e]:void 0},Hash.prototype.has=function hashHas(e){var _=this.__data__;return Ue?void 0!==_[e]:Oe.call(_,e)},Hash.prototype.set=function hashSet(e,_){var k=this.__data__;return this.size+=this.has(e)?0:1,k[e]=Ue&&void 0===_?I:_,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(e){var _=this.__data__,k=assocIndexOf(_,e);return!(k<0)&&(k==_.length-1?_.pop():De.call(_,k,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(e){var _=this.__data__,k=assocIndexOf(_,e);return k<0?void 0:_[k][1]},ListCache.prototype.has=function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1},ListCache.prototype.set=function listCacheSet(e,_){var k=this.__data__,I=assocIndexOf(k,e);return I<0?(++this.size,k.push([e,_])):k[I][1]=_,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Me||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(e){var _=getMapData(this,e).delete(e);return this.size-=_?1:0,_},MapCache.prototype.get=function mapCacheGet(e){return getMapData(this,e).get(e)},MapCache.prototype.has=function mapCacheHas(e){return getMapData(this,e).has(e)},MapCache.prototype.set=function mapCacheSet(e,_){var k=getMapData(this,e),I=k.size;return k.set(e,_),this.size+=k.size==I?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(e){return this.__data__.set(e,I),this},SetCache.prototype.has=function setCacheHas(e){return this.__data__.has(e)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(e){var _=this.__data__,k=_.delete(e);return this.size=_.size,k},Stack.prototype.get=function stackGet(e){return this.__data__.get(e)},Stack.prototype.has=function stackHas(e){return this.__data__.has(e)},Stack.prototype.set=function stackSet(e,_){var k=this.__data__;if(k instanceof ListCache){var I=k.__data__;if(!Me||I.length<199)return I.push([e,_]),this.size=++k.size,this;k=this.__data__=new MapCache(I)}return k.set(e,_),this.size=k.size,this};var Ye=Re?function(e){return null==e?[]:(e=Object(e),function arrayFilter(e,_){for(var k=-1,I=null==e?0:e.length,C=0,R=[];++k<I;){var j=e[k];_(j,k,e)&&(R[C++]=j)}return R}(Re(e),(function(_){return Ne.call(e,_)})))}:function stubArray(){return[]},Je=baseGetTag;function isIndex(e,_){return!!(_=null==_?C:_)&&("number"==typeof e||le.test(e))&&e>-1&&e%1==0&&e<_}function toSource(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eq(e,_){return e===_||e!=e&&_!=_}(Be&&Je(new Be(new ArrayBuffer(1)))!=ie||Me&&Je(new Me)!=G||Fe&&Je(Fe.resolve())!=J||He&&Je(new He)!=ee||Ke&&Je(new Ke)!=re)&&(Je=function(e){var _=baseGetTag(e),k=_==z?e.constructor:void 0,I=k?toSource(k):"";if(I)switch(I){case Ze:return ie;case Ve:return G;case We:return J;case Ge:return ee;case $e:return re}return _});var Xe=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&Oe.call(e,"callee")&&!Ne.call(e,"callee")},Qe=Array.isArray;var et=xe||function stubFalse(){return!1};function isFunction(e){if(!isObject(e))return!1;var _=baseGetTag(e);return _==V||"[object GeneratorFunction]"==_||"[object AsyncFunction]"==_||"[object Proxy]"==_}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}function isObject(e){var _=typeof e;return null!=e&&("object"==_||"function"==_)}function isObjectLike(e){return null!=e&&"object"==typeof e}var tt=ve?function baseUnary(e){return function(_){return e(_)}}(ve):function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!se[baseGetTag(e)]};function keys(e){return function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}(e)?arrayLikeKeys(e):baseKeys(e)}e.exports=function isEqual(e,_){return baseIsEqual(e,_)}},76427:function(e,_,k){var I="__lodash_hash_undefined__",C=9007199254740991,R="[object Symbol]",j=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,H="object"==typeof k.g&&k.g&&k.g.Object===Object&&k.g,U="object"==typeof self&&self&&self.Object===Object&&self,V=H||U||Function("return this")();function apply(e,_,k){switch(k.length){case 0:return e.call(_);case 1:return e.call(_,k[0]);case 2:return e.call(_,k[0],k[1]);case 3:return e.call(_,k[0],k[1],k[2])}return e.apply(_,k)}function arrayIncludes(e,_){return!!(e?e.length:0)&&function baseIndexOf(e,_,k){if(_!=_)return function baseFindIndex(e,_,k,I){var C=e.length,R=k+(I?1:-1);for(;I?R--:++R<C;)if(_(e[R],R,e))return R;return-1}(e,baseIsNaN,k);var I=k-1,C=e.length;for(;++I<C;)if(e[I]===_)return I;return-1}(e,_,0)>-1}function arrayIncludesWith(e,_,k){for(var I=-1,C=e?e.length:0;++I<C;)if(k(_,e[I]))return!0;return!1}function arrayMap(e,_){for(var k=-1,I=e?e.length:0,C=Array(I);++k<I;)C[k]=_(e[k],k,e);return C}function arrayPush(e,_){for(var k=-1,I=_.length,C=e.length;++k<I;)e[C+k]=_[k];return e}function baseIsNaN(e){return e!=e}function cacheHas(e,_){return e.has(_)}function overArg(e,_){return function(k){return e(_(k))}}var G,q=Array.prototype,z=Function.prototype,J=Object.prototype,Q=V["__core-js_shared__"],ee=(G=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",te=z.toString,ne=J.hasOwnProperty,re=J.toString,oe=RegExp("^"+te.call(ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=V.Symbol,ae=overArg(Object.getPrototypeOf,Object),le=J.propertyIsEnumerable,se=q.splice,ce=ie?ie.isConcatSpreadable:void 0,ue=Object.getOwnPropertySymbols,de=Math.max,pe=getNative(V,"Map"),he=getNative(Object,"create");function Hash(e){var _=-1,k=e?e.length:0;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function ListCache(e){var _=-1,k=e?e.length:0;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function MapCache(e){var _=-1,k=e?e.length:0;for(this.clear();++_<k;){var I=e[_];this.set(I[0],I[1])}}function SetCache(e){var _=-1,k=e?e.length:0;for(this.__data__=new MapCache;++_<k;)this.add(e[_])}function arrayLikeKeys(e,_){var k=ge(e)||isArguments(e)?function baseTimes(e,_){for(var k=-1,I=Array(e);++k<e;)I[k]=_(k);return I}(e.length,String):[],I=k.length,C=!!I;for(var R in e)!_&&!ne.call(e,R)||C&&("length"==R||isIndex(R,I))||k.push(R);return k}function assocIndexOf(e,_){for(var k,I,C=e.length;C--;)if((k=e[C][0])===(I=_)||k!=k&&I!=I)return C;return-1}function baseFlatten(e,_,k,I,C){var R=-1,j=e.length;for(k||(k=isFlattenable),C||(C=[]);++R<j;){var B=e[R];_>0&&k(B)?_>1?baseFlatten(B,_-1,k,I,C):arrayPush(C,B):I||(C[C.length]=B)}return C}function baseIsNative(e){return!(!isObject(e)||function isMasked(e){return!!ee&&ee in e}(e))&&(isFunction(e)||function isHostObject(e){var _=!1;if(null!=e&&"function"!=typeof e.toString)try{_=!!(e+"")}catch(e){}return _}(e)?oe:j).test(function toSource(e){if(null!=e){try{return te.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function baseKeysIn(e){if(!isObject(e))return function nativeKeysIn(e){var _=[];if(null!=e)for(var k in Object(e))_.push(k);return _}(e);var _=function isPrototype(e){var _=e&&e.constructor,k="function"==typeof _&&_.prototype||J;return e===k}(e),k=[];for(var I in e)("constructor"!=I||!_&&ne.call(e,I))&&k.push(I);return k}function getAllKeysIn(e){return function baseGetAllKeys(e,_,k){var I=_(e);return ge(e)?I:arrayPush(I,k(e))}(e,keysIn,me)}function getMapData(e,_){var k=e.__data__;return function isKeyable(e){var _=typeof e;return"string"==_||"number"==_||"symbol"==_||"boolean"==_?"__proto__"!==e:null===e}(_)?k["string"==typeof _?"string":"hash"]:k.map}function getNative(e,_){var k=function getValue(e,_){return null==e?void 0:e[_]}(e,_);return baseIsNative(k)?k:void 0}Hash.prototype.clear=function hashClear(){this.__data__=he?he(null):{}},Hash.prototype.delete=function hashDelete(e){return this.has(e)&&delete this.__data__[e]},Hash.prototype.get=function hashGet(e){var _=this.__data__;if(he){var k=_[e];return k===I?void 0:k}return ne.call(_,e)?_[e]:void 0},Hash.prototype.has=function hashHas(e){var _=this.__data__;return he?void 0!==_[e]:ne.call(_,e)},Hash.prototype.set=function hashSet(e,_){return this.__data__[e]=he&&void 0===_?I:_,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(e){var _=this.__data__,k=assocIndexOf(_,e);return!(k<0)&&(k==_.length-1?_.pop():se.call(_,k,1),!0)},ListCache.prototype.get=function listCacheGet(e){var _=this.__data__,k=assocIndexOf(_,e);return k<0?void 0:_[k][1]},ListCache.prototype.has=function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1},ListCache.prototype.set=function listCacheSet(e,_){var k=this.__data__,I=assocIndexOf(k,e);return I<0?k.push([e,_]):k[I][1]=_,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(pe||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(e){return getMapData(this,e).delete(e)},MapCache.prototype.get=function mapCacheGet(e){return getMapData(this,e).get(e)},MapCache.prototype.has=function mapCacheHas(e){return getMapData(this,e).has(e)},MapCache.prototype.set=function mapCacheSet(e,_){return getMapData(this,e).set(e,_),this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(e){return this.__data__.set(e,I),this},SetCache.prototype.has=function setCacheHas(e){return this.__data__.has(e)};var fe=ue?overArg(ue,Object):stubArray,me=ue?function(e){for(var _=[];e;)arrayPush(_,fe(e)),e=ae(e);return _}:stubArray;function isFlattenable(e){return ge(e)||isArguments(e)||!!(ce&&e&&e[ce])}function isIndex(e,_){return!!(_=null==_?C:_)&&("number"==typeof e||B.test(e))&&e>-1&&e%1==0&&e<_}function toKey(e){if("string"==typeof e||function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&re.call(e)==R}(e))return e;var _=e+"";return"0"==_&&1/e==-Infinity?"-0":_}function isArguments(e){return function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}(e)&&ne.call(e,"callee")&&(!le.call(e,"callee")||"[object Arguments]"==re.call(e))}var ge=Array.isArray;function isArrayLike(e){return null!=e&&function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}(e.length)&&!isFunction(e)}function isFunction(e){var _=isObject(e)?re.call(e):"";return"[object Function]"==_||"[object GeneratorFunction]"==_}function isObject(e){var _=typeof e;return!!e&&("object"==_||"function"==_)}function isObjectLike(e){return!!e&&"object"==typeof e}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var ve=function baseRest(e,_){return _=de(void 0===_?e.length-1:_,0),function(){for(var k=arguments,I=-1,C=de(k.length-_,0),R=Array(C);++I<C;)R[I]=k[_+I];I=-1;for(var j=Array(_+1);++I<_;)j[I]=k[I];return j[_]=R,apply(e,this,j)}}((function(e,_){return null==e?{}:(_=arrayMap(baseFlatten(_,1),toKey),function basePick(e,_){return function basePickBy(e,_,k){for(var I=-1,C=_.length,R={};++I<C;){var j=_[I],B=e[j];k(B,j)&&(R[j]=B)}return R}(e=Object(e),_,(function(_,k){return k in e}))}(e,function baseDifference(e,_,k,I){var C=-1,R=arrayIncludes,j=!0,B=e.length,H=[],U=_.length;if(!B)return H;k&&(_=arrayMap(_,function baseUnary(e){return function(_){return e(_)}}(k))),I?(R=arrayIncludesWith,j=!1):_.length>=200&&(R=cacheHas,j=!1,_=new SetCache(_));e:for(;++C<B;){var V=e[C],G=k?k(V):V;if(V=I||0!==V?V:0,j&&G==G){for(var q=U;q--;)if(_[q]===G)continue e;H.push(V)}else R(_,G,I)||H.push(V)}return H}(getAllKeysIn(e),_)))}));function stubArray(){return[]}e.exports=ve},11677:function(e,_,k){"use strict";k.r(_)},38894:function(e,_,k){"use strict";k.r(_)},27418:function(e){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var _={},k=0;k<10;k++)_["_"+String.fromCharCode(k)]=k;if("0123456789"!==Object.getOwnPropertyNames(_).map((function(e){return _[e]})).join(""))return!1;var I={};return"abcdefghijklmnopqrst".split("").forEach((function(e){I[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},I)).join("")}catch(e){return!1}}()?Object.assign:function(e,C){for(var R,j,B=toObject(e),H=1;H<arguments.length;H++){for(var U in R=Object(arguments[H]))k.call(R,U)&&(B[U]=R[U]);if(_){j=_(R);for(var V=0;V<j.length;V++)I.call(R,j[V])&&(B[j[V]]=R[j[V]])}}return B}},92792:function(e){e.exports=function objectForeach(e,_){"use strict";return Object.keys(e).forEach((function(k){_(e[k],k,e)})),e}},55302:function(e,_,k){function ObjectMergeOptions(e){"use strict";e=e||{},this.depth=e.depth||!1,this.throwOnCircularRef=!("throwOnCircularRef"in e)||!1!==e.throwOnCircularRef}function createOptions(e){"use strict";var _=Array.prototype.slice.call(arguments,0);_.unshift(null);var k=ObjectMergeOptions.bind.apply(ObjectMergeOptions,_);return new k}function objectMerge(e){"use strict";var _=k(92792),I=k(37310),C=[],R={};function getShadowObjects(e){return e.reduce((function(e,_){return _ instanceof Object?e.push(_):e=[],e}),[])}function getOutputObject(e){var _,k=e[e.length-1];if(k instanceof Array)_=[];else if(k instanceof Function)try{_=I(k)}catch(e){throw new Error(e.message)}else _=k instanceof Object?{}:k;return _}function circularReferenceCheck(e){e.forEach((function(e){if(e instanceof Object&&C.indexOf(e)>-1)throw new Error("Circular reference error")})),C=C.concat(e)}function objectMergeRecursor(e,k){k=!1!==R.depth?k?k+1:1:0,!0===R.throwOnCircularRef&&circularReferenceCheck(e);var I=getOutputObject(e);function shadowHandler(e,_,C){I[_]?I[_]=objectMergeRecursor([I[_],C[_]],k):I[_]=objectMergeRecursor([C[_]],k)}I instanceof Object&&k<=R.depth&&getShadowObjects(e).forEach((function shadowMerger(e){_(e,shadowHandler)}));return I}return arguments[0]instanceof ObjectMergeOptions?(R=arguments[0],e=Array.prototype.slice.call(arguments,1)):(R=createOptions(),e=Array.prototype.slice.call(arguments,0)),objectMergeRecursor(e)}objectMerge.createOptions=createOptions,e.exports=objectMerge},93412:function(e,_,k){"use strict";k.r(_);const I=function finallyConstructor(e){var _=this.constructor;return this.then((function(k){return _.resolve(e()).then((function(){return k}))}),(function(k){return _.resolve(e()).then((function(){return _.reject(k)}))}))};const C=function allSettled(e){return new this((function(_,k){if(!e||void 0===e.length)return k(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var I=Array.prototype.slice.call(e);if(0===I.length)return _([]);var C=I.length;function res(e,k){if(k&&("object"==typeof k||"function"==typeof k)){var R=k.then;if("function"==typeof R)return void R.call(k,(function(_){res(e,_)}),(function(k){I[e]={status:"rejected",reason:k},0==--C&&_(I)}))}I[e]={status:"fulfilled",value:k},0==--C&&_(I)}for(var R=0;R<I.length;R++)res(R,I[R])}))};var R=setTimeout;function isArray(e){return Boolean(e&&void 0!==e.length)}function noop(){}function Promise(e){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(e,this)}function handle(e,_){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,Promise._immediateFn((function(){var k=1===e._state?_.onFulfilled:_.onRejected;if(null!==k){var I;try{I=k(e._value)}catch(e){return void reject(_.promise,e)}resolve(_.promise,I)}else(1===e._state?resolve:reject)(_.promise,e._value)}))):e._deferreds.push(_)}function resolve(e,_){try{if(_===e)throw new TypeError("A promise cannot be resolved with itself.");if(_&&("object"==typeof _||"function"==typeof _)){var k=_.then;if(_ instanceof Promise)return e._state=3,e._value=_,void finale(e);if("function"==typeof k)return void doResolve(function bind(e,_){return function(){e.apply(_,arguments)}}(k,_),e)}e._state=1,e._value=_,finale(e)}catch(_){reject(e,_)}}function reject(e,_){e._state=2,e._value=_,finale(e)}function finale(e){2===e._state&&0===e._deferreds.length&&Promise._immediateFn((function(){e._handled||Promise._unhandledRejectionFn(e._value)}));for(var _=0,k=e._deferreds.length;_<k;_++)handle(e,e._deferreds[_]);e._deferreds=null}function Handler(e,_,k){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof _?_:null,this.promise=k}function doResolve(e,_){var k=!1;try{e((function(e){k||(k=!0,resolve(_,e))}),(function(e){k||(k=!0,reject(_,e))}))}catch(e){if(k)return;k=!0,reject(_,e)}}Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,_){var k=new this.constructor(noop);return handle(this,new Handler(e,_,k)),k},Promise.prototype.finally=I,Promise.all=function(e){return new Promise((function(_,k){if(!isArray(e))return k(new TypeError("Promise.all accepts an array"));var I=Array.prototype.slice.call(e);if(0===I.length)return _([]);var C=I.length;function res(e,R){try{if(R&&("object"==typeof R||"function"==typeof R)){var j=R.then;if("function"==typeof j)return void j.call(R,(function(_){res(e,_)}),k)}I[e]=R,0==--C&&_(I)}catch(e){k(e)}}for(var R=0;R<I.length;R++)res(R,I[R])}))},Promise.allSettled=C,Promise.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Promise?e:new Promise((function(_){_(e)}))},Promise.reject=function(e){return new Promise((function(_,k){k(e)}))},Promise.race=function(e){return new Promise((function(_,k){if(!isArray(e))return k(new TypeError("Promise.race accepts an array"));for(var I=0,C=e.length;I<C;I++)Promise.resolve(e[I]).then(_,k)}))},Promise._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){R(e,0)},Promise._unhandledRejectionFn=function _unhandledRejectionFn(e){"undefined"!=typeof console&&console};const j=Promise;var B=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==k.g)return k.g;throw new Error("unable to locate global object")}();"function"!=typeof B.Promise?B.Promise=j:B.Promise.prototype.finally?B.Promise.allSettled||(B.Promise.allSettled=C):B.Promise.prototype.finally=I},92703:function(e,_,k){"use strict";var I=k(50414);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,e.exports=function(){function shim(e,_,k,C,R,j){if(j!==I){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}},45697:function(e,_,k){e.exports=k(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},92592:function(e,_,k){const I=k(47138),C=k(95115),R=k(6907),j=k(93776);function renderCanvas(e,_,k,R,j){const B=[].slice.call(arguments,1),H=B.length,U="function"==typeof B[H-1];if(!U&&!I())throw new Error("Callback required as last argument");if(!U){if(H<1)throw new Error("Too few arguments provided");return 1===H?(k=_,_=R=void 0):2!==H||_.getContext||(R=k,k=_,_=void 0),new Promise((function(I,j){try{const j=C.create(k,R);I(e(j,_,R))}catch(e){j(e)}}))}if(H<2)throw new Error("Too few arguments provided");2===H?(j=k,k=_,_=R=void 0):3===H&&(_.getContext&&void 0===j?(j=R,R=void 0):(j=R,R=k,k=_,_=void 0));try{const I=C.create(k,R);j(null,e(I,_,R))}catch(e){j(e)}}C.create,renderCanvas.bind(null,R.render),_.hz=renderCanvas.bind(null,R.renderToDataURL),renderCanvas.bind(null,(function(e,_,k){return j.render(e,k)}))},47138:function(e){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},21845:function(e,_,k){const I=k(10242).getSymbolSize;_.getRowColCoords=function getRowColCoords(e){if(1===e)return[];const _=Math.floor(e/7)+2,k=I(e),C=145===k?26:2*Math.ceil((k-13)/(2*_-2)),R=[k-7];for(let e=1;e<_-1;e++)R[e]=R[e-1]-C;return R.push(6),R.reverse()},_.getPositions=function getPositions(e){const k=[],I=_.getRowColCoords(e),C=I.length;for(let e=0;e<C;e++)for(let _=0;_<C;_++)0===e&&0===_||0===e&&_===C-1||e===C-1&&0===_||k.push([I[e],I[_]]);return k}},8260:function(e,_,k){const I=k(76910),C=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=I.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function getBitsLength(e){return 11*Math.floor(e/2)+e%2*6},AlphanumericData.prototype.getLength=function getLength(){return this.data.length},AlphanumericData.prototype.getBitsLength=function getBitsLength(){return AlphanumericData.getBitsLength(this.data.length)},AlphanumericData.prototype.write=function write(e){let _;for(_=0;_+2<=this.data.length;_+=2){let k=45*C.indexOf(this.data[_]);k+=C.indexOf(this.data[_+1]),e.put(k,11)}this.data.length%2&&e.put(C.indexOf(this.data[_]),6)},e.exports=AlphanumericData},97245:function(e){function BitBuffer(){this.buffer=[],this.length=0}BitBuffer.prototype={get:function(e){const _=Math.floor(e/8);return 1==(this.buffer[_]>>>7-e%8&1)},put:function(e,_){for(let k=0;k<_;k++)this.putBit(1==(e>>>_-k-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const _=Math.floor(this.length/8);this.buffer.length<=_&&this.buffer.push(0),e&&(this.buffer[_]|=128>>>this.length%8),this.length++}},e.exports=BitBuffer},73280:function(e){function BitMatrix(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix.prototype.set=function(e,_,k,I){const C=e*this.size+_;this.data[C]=k,I&&(this.reservedBit[C]=!0)},BitMatrix.prototype.get=function(e,_){return this.data[e*this.size+_]},BitMatrix.prototype.xor=function(e,_,k){this.data[e*this.size+_]^=k},BitMatrix.prototype.isReserved=function(e,_){return this.reservedBit[e*this.size+_]},e.exports=BitMatrix},43424:function(e,_,k){const I=k(76910);function ByteData(e){this.mode=I.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}ByteData.getBitsLength=function getBitsLength(e){return 8*e},ByteData.prototype.getLength=function getLength(){return this.data.length},ByteData.prototype.getBitsLength=function getBitsLength(){return ByteData.getBitsLength(this.data.length)},ByteData.prototype.write=function(e){for(let _=0,k=this.data.length;_<k;_++)e.put(this.data[_],8)},e.exports=ByteData},35393:function(e,_,k){const I=k(64908),C=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],R=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];_.getBlocksCount=function getBlocksCount(e,_){switch(_){case I.L:return C[4*(e-1)+0];case I.M:return C[4*(e-1)+1];case I.Q:return C[4*(e-1)+2];case I.H:return C[4*(e-1)+3];default:return}},_.getTotalCodewordsCount=function getTotalCodewordsCount(e,_){switch(_){case I.L:return R[4*(e-1)+0];case I.M:return R[4*(e-1)+1];case I.Q:return R[4*(e-1)+2];case I.H:return R[4*(e-1)+3];default:return}}},64908:function(e,_){_.L={bit:1},_.M={bit:0},_.Q={bit:3},_.H={bit:2},_.isValid=function isValid(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},_.from=function from(e,k){if(_.isValid(e))return e;try{return function fromString(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return _.L;case"m":case"medium":return _.M;case"q":case"quartile":return _.Q;case"h":case"high":return _.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return k}}},76526:function(e,_,k){const I=k(10242).getSymbolSize;_.getPositions=function getPositions(e){const _=I(e);return[[0,0],[_-7,0],[0,_-7]]}},61642:function(e,_,k){const I=k(10242),C=I.getBCHDigit(1335);_.getEncodedBits=function getEncodedBits(e,_){const k=e.bit<<3|_;let R=k<<10;for(;I.getBCHDigit(R)-C>=0;)R^=1335<<I.getBCHDigit(R)-C;return 21522^(k<<10|R)}},69729:function(e,_){const k=new Uint8Array(512),I=new Uint8Array(256);!function initTables(){let e=1;for(let _=0;_<255;_++)k[_]=e,I[e]=_,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)k[e]=k[e-255]}(),_.log=function log(e){if(e<1)throw new Error("log("+e+")");return I[e]},_.exp=function exp(e){return k[e]},_.mul=function mul(e,_){return 0===e||0===_?0:k[I[e]+I[_]]}},35442:function(e,_,k){const I=k(76910),C=k(10242);function KanjiData(e){this.mode=I.KANJI,this.data=e}KanjiData.getBitsLength=function getBitsLength(e){return 13*e},KanjiData.prototype.getLength=function getLength(){return this.data.length},KanjiData.prototype.getBitsLength=function getBitsLength(){return KanjiData.getBitsLength(this.data.length)},KanjiData.prototype.write=function(e){let _;for(_=0;_<this.data.length;_++){let k=C.toSJIS(this.data[_]);if(k>=33088&&k<=40956)k-=33088;else{if(!(k>=57408&&k<=60351))throw new Error("Invalid SJIS character: "+this.data[_]+"\nMake sure your charset is UTF-8");k-=49472}k=192*(k>>>8&255)+(255&k),e.put(k,13)}},e.exports=KanjiData},27126:function(e,_){_.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const k=3,I=3,C=40,R=10;function getMaskAt(e,k,I){switch(e){case _.Patterns.PATTERN000:return(k+I)%2==0;case _.Patterns.PATTERN001:return k%2==0;case _.Patterns.PATTERN010:return I%3==0;case _.Patterns.PATTERN011:return(k+I)%3==0;case _.Patterns.PATTERN100:return(Math.floor(k/2)+Math.floor(I/3))%2==0;case _.Patterns.PATTERN101:return k*I%2+k*I%3==0;case _.Patterns.PATTERN110:return(k*I%2+k*I%3)%2==0;case _.Patterns.PATTERN111:return(k*I%3+(k+I)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}_.isValid=function isValid(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},_.from=function from(e){return _.isValid(e)?parseInt(e,10):void 0},_.getPenaltyN1=function getPenaltyN1(e){const _=e.size;let I=0,C=0,R=0,j=null,B=null;for(let H=0;H<_;H++){C=R=0,j=B=null;for(let U=0;U<_;U++){let _=e.get(H,U);_===j?C++:(C>=5&&(I+=k+(C-5)),j=_,C=1),_=e.get(U,H),_===B?R++:(R>=5&&(I+=k+(R-5)),B=_,R=1)}C>=5&&(I+=k+(C-5)),R>=5&&(I+=k+(R-5))}return I},_.getPenaltyN2=function getPenaltyN2(e){const _=e.size;let k=0;for(let I=0;I<_-1;I++)for(let C=0;C<_-1;C++){const _=e.get(I,C)+e.get(I,C+1)+e.get(I+1,C)+e.get(I+1,C+1);4!==_&&0!==_||k++}return k*I},_.getPenaltyN3=function getPenaltyN3(e){const _=e.size;let k=0,I=0,R=0;for(let C=0;C<_;C++){I=R=0;for(let j=0;j<_;j++)I=I<<1&2047|e.get(C,j),j>=10&&(1488===I||93===I)&&k++,R=R<<1&2047|e.get(j,C),j>=10&&(1488===R||93===R)&&k++}return k*C},_.getPenaltyN4=function getPenaltyN4(e){let _=0;const k=e.data.length;for(let I=0;I<k;I++)_+=e.data[I];return Math.abs(Math.ceil(100*_/k/5)-10)*R},_.applyMask=function applyMask(e,_){const k=_.size;for(let I=0;I<k;I++)for(let C=0;C<k;C++)_.isReserved(C,I)||_.xor(C,I,getMaskAt(e,C,I))},_.getBestMask=function getBestMask(e,k){const I=Object.keys(_.Patterns).length;let C=0,R=1/0;for(let j=0;j<I;j++){k(j),_.applyMask(j,e);const I=_.getPenaltyN1(e)+_.getPenaltyN2(e)+_.getPenaltyN3(e)+_.getPenaltyN4(e);_.applyMask(j,e),I<R&&(R=I,C=j)}return C}},76910:function(e,_,k){const I=k(43114),C=k(7007);_.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},_.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},_.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},_.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},_.MIXED={bit:-1},_.getCharCountIndicator=function getCharCountIndicator(e,_){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!I.isValid(_))throw new Error("Invalid version: "+_);return _>=1&&_<10?e.ccBits[0]:_<27?e.ccBits[1]:e.ccBits[2]},_.getBestModeForData=function getBestModeForData(e){return C.testNumeric(e)?_.NUMERIC:C.testAlphanumeric(e)?_.ALPHANUMERIC:C.testKanji(e)?_.KANJI:_.BYTE},_.toString=function toString(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},_.isValid=function isValid(e){return e&&e.bit&&e.ccBits},_.from=function from(e,k){if(_.isValid(e))return e;try{return function fromString(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return _.NUMERIC;case"alphanumeric":return _.ALPHANUMERIC;case"kanji":return _.KANJI;case"byte":return _.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return k}}},41085:function(e,_,k){const I=k(76910);function NumericData(e){this.mode=I.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function getBitsLength(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},NumericData.prototype.getLength=function getLength(){return this.data.length},NumericData.prototype.getBitsLength=function getBitsLength(){return NumericData.getBitsLength(this.data.length)},NumericData.prototype.write=function write(e){let _,k,I;for(_=0;_+3<=this.data.length;_+=3)k=this.data.substr(_,3),I=parseInt(k,10),e.put(I,10);const C=this.data.length-_;C>0&&(k=this.data.substr(_),I=parseInt(k,10),e.put(I,3*C+1))},e.exports=NumericData},26143:function(e,_,k){const I=k(69729);_.mul=function mul(e,_){const k=new Uint8Array(e.length+_.length-1);for(let C=0;C<e.length;C++)for(let R=0;R<_.length;R++)k[C+R]^=I.mul(e[C],_[R]);return k},_.mod=function mod(e,_){let k=new Uint8Array(e);for(;k.length-_.length>=0;){const e=k[0];for(let C=0;C<_.length;C++)k[C]^=I.mul(_[C],e);let C=0;for(;C<k.length&&0===k[C];)C++;k=k.slice(C)}return k},_.generateECPolynomial=function generateECPolynomial(e){let k=new Uint8Array([1]);for(let C=0;C<e;C++)k=_.mul(k,new Uint8Array([1,I.exp(C)]));return k}},95115:function(e,_,k){const I=k(10242),C=k(64908),R=k(97245),j=k(73280),B=k(21845),H=k(76526),U=k(27126),V=k(35393),G=k(52882),q=k(23103),z=k(61642),J=k(76910),Q=k(16130);function setupFormatInfo(e,_,k){const I=e.size,C=z.getEncodedBits(_,k);let R,j;for(R=0;R<15;R++)j=1==(C>>R&1),R<6?e.set(R,8,j,!0):R<8?e.set(R+1,8,j,!0):e.set(I-15+R,8,j,!0),R<8?e.set(8,I-R-1,j,!0):R<9?e.set(8,15-R-1+1,j,!0):e.set(8,15-R-1,j,!0);e.set(I-8,8,1,!0)}function createData(e,_,k){const C=new R;k.forEach((function(_){C.put(_.mode.bit,4),C.put(_.getLength(),J.getCharCountIndicator(_.mode,e)),_.write(C)}));const j=8*(I.getSymbolTotalCodewords(e)-V.getTotalCodewordsCount(e,_));for(C.getLengthInBits()+4<=j&&C.put(0,4);C.getLengthInBits()%8!=0;)C.putBit(0);const B=(j-C.getLengthInBits())/8;for(let e=0;e<B;e++)C.put(e%2?17:236,8);return function createCodewords(e,_,k){const C=I.getSymbolTotalCodewords(_),R=V.getTotalCodewordsCount(_,k),j=C-R,B=V.getBlocksCount(_,k),H=B-C%B,U=Math.floor(C/B),q=Math.floor(j/B),z=q+1,J=U-q,Q=new G(J);let ee=0;const te=new Array(B),ne=new Array(B);let re=0;const oe=new Uint8Array(e.buffer);for(let e=0;e<B;e++){const _=e<H?q:z;te[e]=oe.slice(ee,ee+_),ne[e]=Q.encode(te[e]),ee+=_,re=Math.max(re,_)}const ie=new Uint8Array(C);let ae,le,se=0;for(ae=0;ae<re;ae++)for(le=0;le<B;le++)ae<te[le].length&&(ie[se++]=te[le][ae]);for(ae=0;ae<J;ae++)for(le=0;le<B;le++)ie[se++]=ne[le][ae];return ie}(C,e,_)}function createSymbol(e,_,k,C){let R;if(Array.isArray(e))R=Q.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let I=_;if(!I){const _=Q.rawSplit(e);I=q.getBestVersionForData(_,k)}R=Q.fromString(e,I||40)}}const V=q.getBestVersionForData(R,k);if(!V)throw new Error("The amount of data is too big to be stored in a QR Code");if(_){if(_<V)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+V+".\n")}else _=V;const G=createData(_,k,R),z=I.getSymbolSize(_),J=new j(z);return function setupFinderPattern(e,_){const k=e.size,I=H.getPositions(_);for(let _=0;_<I.length;_++){const C=I[_][0],R=I[_][1];for(let _=-1;_<=7;_++)if(!(C+_<=-1||k<=C+_))for(let I=-1;I<=7;I++)R+I<=-1||k<=R+I||(_>=0&&_<=6&&(0===I||6===I)||I>=0&&I<=6&&(0===_||6===_)||_>=2&&_<=4&&I>=2&&I<=4?e.set(C+_,R+I,!0,!0):e.set(C+_,R+I,!1,!0))}}(J,_),function setupTimingPattern(e){const _=e.size;for(let k=8;k<_-8;k++){const _=k%2==0;e.set(k,6,_,!0),e.set(6,k,_,!0)}}(J),function setupAlignmentPattern(e,_){const k=B.getPositions(_);for(let _=0;_<k.length;_++){const I=k[_][0],C=k[_][1];for(let _=-2;_<=2;_++)for(let k=-2;k<=2;k++)-2===_||2===_||-2===k||2===k||0===_&&0===k?e.set(I+_,C+k,!0,!0):e.set(I+_,C+k,!1,!0)}}(J,_),setupFormatInfo(J,k,0),_>=7&&function setupVersionInfo(e,_){const k=e.size,I=q.getEncodedBits(_);let C,R,j;for(let _=0;_<18;_++)C=Math.floor(_/3),R=_%3+k-8-3,j=1==(I>>_&1),e.set(C,R,j,!0),e.set(R,C,j,!0)}(J,_),function setupData(e,_){const k=e.size;let I=-1,C=k-1,R=7,j=0;for(let B=k-1;B>0;B-=2)for(6===B&&B--;;){for(let k=0;k<2;k++)if(!e.isReserved(C,B-k)){let I=!1;j<_.length&&(I=1==(_[j]>>>R&1)),e.set(C,B-k,I),R--,-1===R&&(j++,R=7)}if(C+=I,C<0||k<=C){C-=I,I=-I;break}}}(J,G),isNaN(C)&&(C=U.getBestMask(J,setupFormatInfo.bind(null,J,k))),U.applyMask(C,J),setupFormatInfo(J,k,C),{modules:J,version:_,errorCorrectionLevel:k,maskPattern:C,segments:R}}_.create=function create(e,_){if(void 0===e||""===e)throw new Error("No input text");let k,R,j=C.M;return void 0!==_&&(j=C.from(_.errorCorrectionLevel,C.M),k=q.from(_.version),R=U.from(_.maskPattern),_.toSJISFunc&&I.setToSJISFunction(_.toSJISFunc)),createSymbol(e,k,j,R)}},52882:function(e,_,k){const I=k(26143);function ReedSolomonEncoder(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder.prototype.initialize=function initialize(e){this.degree=e,this.genPoly=I.generateECPolynomial(this.degree)},ReedSolomonEncoder.prototype.encode=function encode(e){if(!this.genPoly)throw new Error("Encoder not initialized");const _=new Uint8Array(e.length+this.degree);_.set(e);const k=I.mod(_,this.genPoly),C=this.degree-k.length;if(C>0){const e=new Uint8Array(this.degree);return e.set(k,C),e}return k},e.exports=ReedSolomonEncoder},7007:function(e,_){const k="[0-9]+";let I="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";I=I.replace(/u/g,"\\u");const C="(?:(?![A-Z0-9 $%*+\\-./:]|"+I+")(?:.|[\r\n]))+";_.KANJI=new RegExp(I,"g"),_.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),_.BYTE=new RegExp(C,"g"),_.NUMERIC=new RegExp(k,"g"),_.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const R=new RegExp("^"+I+"$"),j=new RegExp("^[0-9]+$"),B=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");_.testKanji=function testKanji(e){return R.test(e)},_.testNumeric=function testNumeric(e){return j.test(e)},_.testAlphanumeric=function testAlphanumeric(e){return B.test(e)}},16130:function(e,_,k){const I=k(76910),C=k(41085),R=k(8260),j=k(43424),B=k(35442),H=k(7007),U=k(10242),V=k(65987);function getStringByteLength(e){return unescape(encodeURIComponent(e)).length}function getSegments(e,_,k){const I=[];let C;for(;null!==(C=e.exec(k));)I.push({data:C[0],index:C.index,mode:_,length:C[0].length});return I}function getSegmentsFromString(e){const _=getSegments(H.NUMERIC,I.NUMERIC,e),k=getSegments(H.ALPHANUMERIC,I.ALPHANUMERIC,e);let C,R;U.isKanjiModeEnabled()?(C=getSegments(H.BYTE,I.BYTE,e),R=getSegments(H.KANJI,I.KANJI,e)):(C=getSegments(H.BYTE_KANJI,I.BYTE,e),R=[]);return _.concat(k,C,R).sort((function(e,_){return e.index-_.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function getSegmentBitsLength(e,_){switch(_){case I.NUMERIC:return C.getBitsLength(e);case I.ALPHANUMERIC:return R.getBitsLength(e);case I.KANJI:return B.getBitsLength(e);case I.BYTE:return j.getBitsLength(e)}}function buildSingleSegment(e,_){let k;const H=I.getBestModeForData(e);if(k=I.from(_,H),k!==I.BYTE&&k.bit<H.bit)throw new Error('"'+e+'" cannot be encoded with mode '+I.toString(k)+".\n Suggested mode is: "+I.toString(H));switch(k!==I.KANJI||U.isKanjiModeEnabled()||(k=I.BYTE),k){case I.NUMERIC:return new C(e);case I.ALPHANUMERIC:return new R(e);case I.KANJI:return new B(e);case I.BYTE:return new j(e)}}_.fromArray=function fromArray(e){return e.reduce((function(e,_){return"string"==typeof _?e.push(buildSingleSegment(_,null)):_.data&&e.push(buildSingleSegment(_.data,_.mode)),e}),[])},_.fromString=function fromString(e,k){const C=function buildGraph(e,_){const k={},C={start:{}};let R=["start"];for(let j=0;j<e.length;j++){const B=e[j],H=[];for(let e=0;e<B.length;e++){const U=B[e],V=""+j+e;H.push(V),k[V]={node:U,lastCount:0},C[V]={};for(let e=0;e<R.length;e++){const j=R[e];k[j]&&k[j].node.mode===U.mode?(C[j][V]=getSegmentBitsLength(k[j].lastCount+U.length,U.mode)-getSegmentBitsLength(k[j].lastCount,U.mode),k[j].lastCount+=U.length):(k[j]&&(k[j].lastCount=U.length),C[j][V]=getSegmentBitsLength(U.length,U.mode)+4+I.getCharCountIndicator(U.mode,_))}}R=H}for(let e=0;e<R.length;e++)C[R[e]].end=0;return{map:C,table:k}}(function buildNodes(e){const _=[];for(let k=0;k<e.length;k++){const C=e[k];switch(C.mode){case I.NUMERIC:_.push([C,{data:C.data,mode:I.ALPHANUMERIC,length:C.length},{data:C.data,mode:I.BYTE,length:C.length}]);break;case I.ALPHANUMERIC:_.push([C,{data:C.data,mode:I.BYTE,length:C.length}]);break;case I.KANJI:_.push([C,{data:C.data,mode:I.BYTE,length:getStringByteLength(C.data)}]);break;case I.BYTE:_.push([{data:C.data,mode:I.BYTE,length:getStringByteLength(C.data)}])}}return _}(getSegmentsFromString(e,U.isKanjiModeEnabled())),k),R=V.find_path(C.map,"start","end"),j=[];for(let e=1;e<R.length-1;e++)j.push(C.table[R[e]].node);return _.fromArray(function mergeSegments(e){return e.reduce((function(e,_){const k=e.length-1>=0?e[e.length-1]:null;return k&&k.mode===_.mode?(e[e.length-1].data+=_.data,e):(e.push(_),e)}),[])}(j))},_.rawSplit=function rawSplit(e){return _.fromArray(getSegmentsFromString(e,U.isKanjiModeEnabled()))}},10242:function(e,_){let k;const I=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];_.getSymbolSize=function getSymbolSize(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},_.getSymbolTotalCodewords=function getSymbolTotalCodewords(e){return I[e]},_.getBCHDigit=function(e){let _=0;for(;0!==e;)_++,e>>>=1;return _},_.setToSJISFunction=function setToSJISFunction(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');k=e},_.isKanjiModeEnabled=function(){return void 0!==k},_.toSJIS=function toSJIS(e){return k(e)}},43114:function(e,_){_.isValid=function isValid(e){return!isNaN(e)&&e>=1&&e<=40}},23103:function(e,_,k){const I=k(10242),C=k(35393),R=k(64908),j=k(76910),B=k(43114),H=I.getBCHDigit(7973);function getReservedBitsCount(e,_){return j.getCharCountIndicator(e,_)+4}function getTotalBitsFromDataArray(e,_){let k=0;return e.forEach((function(e){const I=getReservedBitsCount(e.mode,_);k+=I+e.getBitsLength()})),k}_.from=function from(e,_){return B.isValid(e)?parseInt(e,10):_},_.getCapacity=function getCapacity(e,_,k){if(!B.isValid(e))throw new Error("Invalid QR Code version");void 0===k&&(k=j.BYTE);const R=8*(I.getSymbolTotalCodewords(e)-C.getTotalCodewordsCount(e,_));if(k===j.MIXED)return R;const H=R-getReservedBitsCount(k,e);switch(k){case j.NUMERIC:return Math.floor(H/10*3);case j.ALPHANUMERIC:return Math.floor(H/11*2);case j.KANJI:return Math.floor(H/13);case j.BYTE:default:return Math.floor(H/8)}},_.getBestVersionForData=function getBestVersionForData(e,k){let I;const C=R.from(k,R.M);if(Array.isArray(e)){if(e.length>1)return function getBestVersionForMixedData(e,k){for(let I=1;I<=40;I++)if(getTotalBitsFromDataArray(e,I)<=_.getCapacity(I,k,j.MIXED))return I}(e,C);if(0===e.length)return 1;I=e[0]}else I=e;return function getBestVersionForDataLength(e,k,I){for(let C=1;C<=40;C++)if(k<=_.getCapacity(C,I,e))return C}(I.mode,I.getLength(),C)},_.getEncodedBits=function getEncodedBits(e){if(!B.isValid(e)||e<7)throw new Error("Invalid QR Code version");let _=e<<12;for(;I.getBCHDigit(_)-H>=0;)_^=7973<<I.getBCHDigit(_)-H;return e<<12|_}},6907:function(e,_,k){const I=k(89653);_.render=function render(e,_,k){let C=k,R=_;void 0!==C||_&&_.getContext||(C=_,_=void 0),_||(R=function getCanvasElement(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),C=I.getOptions(C);const j=I.getImageWidth(e.modules.size,C),B=R.getContext("2d"),H=B.createImageData(j,j);return I.qrToImageData(H.data,e,C),function clearCanvas(e,_,k){e.clearRect(0,0,_.width,_.height),_.style||(_.style={}),_.height=k,_.width=k,_.style.height=k+"px",_.style.width=k+"px"}(B,R,j),B.putImageData(H,0,0),R},_.renderToDataURL=function renderToDataURL(e,k,I){let C=I;void 0!==C||k&&k.getContext||(C=k,k=void 0),C||(C={});const R=_.render(e,k,C),j=C.type||"image/png",B=C.rendererOpts||{};return R.toDataURL(j,B.quality)}},93776:function(e,_,k){const I=k(89653);function getColorAttrib(e,_){const k=e.a/255,I=_+'="'+e.hex+'"';return k<1?I+" "+_+'-opacity="'+k.toFixed(2).slice(1)+'"':I}function svgCmd(e,_,k){let I=e+_;return void 0!==k&&(I+=" "+k),I}_.render=function render(e,_,k){const C=I.getOptions(_),R=e.modules.size,j=e.modules.data,B=R+2*C.margin,H=C.color.light.a?"<path "+getColorAttrib(C.color.light,"fill")+' d="M0 0h'+B+"v"+B+'H0z"/>':"",U="<path "+getColorAttrib(C.color.dark,"stroke")+' d="'+function qrToPath(e,_,k){let I="",C=0,R=!1,j=0;for(let B=0;B<e.length;B++){const H=Math.floor(B%_),U=Math.floor(B/_);H||R||(R=!0),e[B]?(j++,B>0&&H>0&&e[B-1]||(I+=R?svgCmd("M",H+k,.5+U+k):svgCmd("m",C,0),C=0,R=!1),H+1<_&&e[B+1]||(I+=svgCmd("h",j),j=0)):C++}return I}(j,R,C.margin)+'"/>',V='viewBox="0 0 '+B+" "+B+'"',G='<svg xmlns="http://www.w3.org/2000/svg" '+(C.width?'width="'+C.width+'" height="'+C.width+'" ':"")+V+' shape-rendering="crispEdges">'+H+U+"</svg>\n";return"function"==typeof k&&k(null,G),G}},89653:function(e,_){function hex2rgba(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let _=e.slice().replace("#","").split("");if(_.length<3||5===_.length||_.length>8)throw new Error("Invalid hex color: "+e);3!==_.length&&4!==_.length||(_=Array.prototype.concat.apply([],_.map((function(e){return[e,e]})))),6===_.length&&_.push("F","F");const k=parseInt(_.join(""),16);return{r:k>>24&255,g:k>>16&255,b:k>>8&255,a:255&k,hex:"#"+_.slice(0,6).join("")}}_.getOptions=function getOptions(e){e||(e={}),e.color||(e.color={});const _=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,k=e.width&&e.width>=21?e.width:void 0,I=e.scale||4;return{width:k,scale:k?4:I,margin:_,color:{dark:hex2rgba(e.color.dark||"#000000ff"),light:hex2rgba(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},_.getScale=function getScale(e,_){return _.width&&_.width>=e+2*_.margin?_.width/(e+2*_.margin):_.scale},_.getImageWidth=function getImageWidth(e,k){const I=_.getScale(e,k);return Math.floor((e+2*k.margin)*I)},_.qrToImageData=function qrToImageData(e,k,I){const C=k.modules.size,R=k.modules.data,j=_.getScale(C,I),B=Math.floor((C+2*I.margin)*j),H=I.margin*j,U=[I.color.light,I.color.dark];for(let _=0;_<B;_++)for(let k=0;k<B;k++){let V=4*(_*B+k),G=I.color.light;if(_>=H&&k>=H&&_<B-H&&k<B-H){G=U[R[Math.floor((_-H)/j)*C+Math.floor((k-H)/j)]?1:0]}e[V++]=G.r,e[V++]=G.g,e[V++]=G.b,e[V]=G.a}}},98125:function(e,_){var k;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var I={}.hasOwnProperty;function classNames(){for(var e="",_=0;_<arguments.length;_++){var k=arguments[_];k&&(e=appendClass(e,parseValue(k)))}return e}function parseValue(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return classNames.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var _="";for(var k in e)I.call(e,k)&&e[k]&&(_=appendClass(_,k));return _}function appendClass(e,_){return _?e?e+" "+_:e+_:e}e.exports?(classNames.default=classNames,e.exports=classNames):void 0===(k=function(){return classNames}.apply(_,[]))||(e.exports=k)}()},94500:function(e,_,k){!function(e){"use strict";function t(e,_){e.super_=_,e.prototype=Object.create(_.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,_){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),_&&_.length&&Object.defineProperty(this,"path",{value:_,enumerable:!0})}function n(e,_,k){n.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:_,enumerable:!0}),Object.defineProperty(this,"rhs",{value:k,enumerable:!0})}function o(e,_){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:_,enumerable:!0})}function i(e,_){i.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:_,enumerable:!0})}function a(e,_,k){a.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:_,enumerable:!0}),Object.defineProperty(this,"item",{value:k,enumerable:!0})}function f(e,_,k){var I=e.slice((k||_)+1||e.length);return e.length=_<0?e.length+_:_,e.push.apply(e,I),e}function u(e){var _=void 0===e?"undefined":R(e);return"object"!==_?_:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,_,k,I,C,j,B){B=B||[];var H=(C=C||[]).slice(0);if(void 0!==j){if(I){if("function"==typeof I&&I(H,j))return;if("object"===(void 0===I?"undefined":R(I))){if(I.prefilter&&I.prefilter(H,j))return;if(I.normalize){var U=I.normalize(H,j,e,_);U&&(e=U[0],_=U[1])}}}H.push(j)}"regexp"===u(e)&&"regexp"===u(_)&&(e=e.toString(),_=_.toString());var V=void 0===e?"undefined":R(e),G=void 0===_?"undefined":R(_),q="undefined"!==V||B&&B[B.length-1].lhs&&B[B.length-1].lhs.hasOwnProperty(j),z="undefined"!==G||B&&B[B.length-1].rhs&&B[B.length-1].rhs.hasOwnProperty(j);if(!q&&z)k(new o(H,_));else if(!z&&q)k(new i(H,e));else if(u(e)!==u(_))k(new n(H,e,_));else if("date"===u(e)&&e-_!=0)k(new n(H,e,_));else if("object"===V&&null!==e&&null!==_)if(B.filter((function(_){return _.lhs===e})).length)e!==_&&k(new n(H,e,_));else{if(B.push({lhs:e,rhs:_}),Array.isArray(e)){var J;for(e.length,J=0;J<e.length;J++)J>=_.length?k(new a(H,J,new i(void 0,e[J]))):l(e[J],_[J],k,I,H,J,B);for(;J<_.length;)k(new a(H,J,new o(void 0,_[J++])))}else{var Q=Object.keys(e),ee=Object.keys(_);Q.forEach((function(C,R){var j=ee.indexOf(C);j>=0?(l(e[C],_[C],k,I,H,C,B),ee=f(ee,j)):l(e[C],void 0,k,I,H,C,B)})),ee.forEach((function(e){l(void 0,_[e],k,I,H,e,B)}))}B.length=B.length-1}else e!==_&&("number"===V&&isNaN(e)&&isNaN(_)||k(new n(H,e,_)))}function c(e,_,k,I){return I=I||[],l(e,_,(function(e){e&&I.push(e)}),k),I.length?I:void 0}function s(e,_,k){if(k.path&&k.path.length){var I,C=e[_],R=k.path.length-1;for(I=0;I<R;I++)C=C[k.path[I]];switch(k.kind){case"A":s(C[k.path[I]],k.index,k.item);break;case"D":delete C[k.path[I]];break;case"E":case"N":C[k.path[I]]=k.rhs}}else switch(k.kind){case"A":s(e[_],k.index,k.item);break;case"D":e=f(e,_);break;case"E":case"N":e[_]=k.rhs}return e}function d(e,_,k){if(e&&_&&k&&k.kind){for(var I=e,C=-1,R=k.path?k.path.length-1:0;++C<R;)void 0===I[k.path[C]]&&(I[k.path[C]]="number"==typeof k.path[C]?[]:{}),I=I[k.path[C]];switch(k.kind){case"A":s(k.path?I[k.path[C]]:I,k.index,k.item);break;case"D":delete I[k.path[C]];break;case"E":case"N":I[k.path[C]]=k.rhs}}}function p(e,_,k){if(k.path&&k.path.length){var I,C=e[_],R=k.path.length-1;for(I=0;I<R;I++)C=C[k.path[I]];switch(k.kind){case"A":p(C[k.path[I]],k.index,k.item);break;case"D":case"E":C[k.path[I]]=k.lhs;break;case"N":delete C[k.path[I]]}}else switch(k.kind){case"A":p(e[_],k.index,k.item);break;case"D":case"E":e[_]=k.lhs;break;case"N":e=f(e,_)}return e}function g(e,_,k){if(e&&_&&k&&k.kind){var I,C,R=e;for(C=k.path.length-1,I=0;I<C;I++)void 0===R[k.path[I]]&&(R[k.path[I]]={}),R=R[k.path[I]];switch(k.kind){case"A":p(R[k.path[I]],k.index,k.item);break;case"D":case"E":R[k.path[I]]=k.lhs;break;case"N":delete R[k.path[I]]}}}function h(e,_,k){e&&_&&l(e,_,(function(I){k&&!k(e,_,I)||d(e,_,I)}))}function y(e){return"color: "+B[e].color+"; font-weight: bold"}function v(e){var _=e.kind,k=e.path,I=e.lhs,C=e.rhs,R=e.index,j=e.item;switch(_){case"E":return[k.join("."),I,"→",C];case"N":return[k.join("."),C];case"D":return[k.join(".")];case"A":return[k.join(".")+"["+R+"]",j];default:return[]}}function b(e,_,k,I){var C=c(e,_);try{I?k.groupCollapsed("diff"):k.group("diff")}catch(e){k.log("diff")}C?C.forEach((function(e){var _=e.kind,I=v(e);k.log.apply(k,["%c "+B[_].text,y(_)].concat(P(I)))})):k.log("—— no diff ——");try{k.groupEnd()}catch(e){k.log("—— diff end —— ")}}function m(e,_,k,I){switch(void 0===e?"undefined":R(e)){case"object":return"function"==typeof e[I]?e[I].apply(e,P(k)):e[I];case"function":return e(_);default:return e}}function w(e){var _=e.timestamp,k=e.duration;return function(e,I,C){var R=["action"];return R.push("%c"+String(e.type)),_&&R.push("%c@ "+I),k&&R.push("%c(in "+C.toFixed(2)+" ms)"),R.join(" ")}}function x(e,_){var k=_.logger,I=_.actionTransformer,C=_.titleFormatter,R=void 0===C?w(_):C,j=_.collapsed,B=_.colors,H=_.level,U=_.diff,V=void 0===_.titleFormatter;e.forEach((function(C,G){var q=C.started,z=C.startedTime,J=C.action,Q=C.prevState,ee=C.error,te=C.took,ne=C.nextState,re=e[G+1];re&&(ne=re.prevState,te=re.started-q);var oe=I(J),ie="function"==typeof j?j((function(){return ne}),J,C):j,ae=D(z),le=B.title?"color: "+B.title(oe)+";":"",se=["color: gray; font-weight: lighter;"];se.push(le),_.timestamp&&se.push("color: gray; font-weight: lighter;"),_.duration&&se.push("color: gray; font-weight: lighter;");var ce=R(oe,ae,te);try{ie?B.title&&V?k.groupCollapsed.apply(k,["%c "+ce].concat(se)):k.groupCollapsed(ce):B.title&&V?k.group.apply(k,["%c "+ce].concat(se)):k.group(ce)}catch(e){k.log(ce)}var ue=m(H,oe,[Q],"prevState"),de=m(H,oe,[oe],"action"),pe=m(H,oe,[ee,Q],"error"),he=m(H,oe,[ne],"nextState");if(ue)if(B.prevState){var fe="color: "+B.prevState(Q)+"; font-weight: bold";k[ue]("%c prev state",fe,Q)}else k[ue]("prev state",Q);if(de)if(B.action){var me="color: "+B.action(oe)+"; font-weight: bold";k[de]("%c action    ",me,oe)}else k[de]("action    ",oe);if(ee&&pe)if(B.error){var ge="color: "+B.error(ee,Q)+"; font-weight: bold;";k[pe]("%c error     ",ge,ee)}else k[pe]("error     ",ee);if(he)if(B.nextState){var ve="color: "+B.nextState(ne)+"; font-weight: bold";k[he]("%c next state",ve,ne)}else k[he]("next state",ne);U&&b(Q,ne,k,ie);try{k.groupEnd()}catch(e){k.log("—— log end ——")}}))}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=Object.assign({},H,e),k=_.logger,I=_.stateTransformer,R=_.errorTransformer,j=_.predicate,B=_.logErrors,U=_.diffPredicate;if(void 0===k)return function(){return function(e){return function(_){return e(_)}}};if(e.getState&&e.dispatch)return function(){return function(e){return function(_){return e(_)}}};var V=[];return function(e){var k=e.getState;return function(e){return function(H){if("function"==typeof j&&!j(k,H))return e(H);var G={};V.push(G),G.started=C.now(),G.startedTime=new Date,G.prevState=I(k()),G.action=H;var q=void 0;if(B)try{q=e(H)}catch(e){G.error=R(e)}else q=e(H);G.took=C.now()-G.started,G.nextState=I(k());var z=_.diff&&"function"==typeof U?U(k,H):_.diff;if(x(V,Object.assign({},_,{diff:z})),V.length=0,G.error)throw G.error;return q}}}}var _,I,E=function(e,_){return new Array(_+1).join(e)},A=function(e,_){return E("0",_-e.toString().length)+e},D=function(e){return A(e.getHours(),2)+":"+A(e.getMinutes(),2)+":"+A(e.getSeconds(),2)+"."+A(e.getMilliseconds(),3)},C="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=function(e){if(Array.isArray(e)){for(var _=0,k=Array(e.length);_<e.length;_++)k[_]=e[_];return k}return Array.from(e)},j=[];_="object"===(void 0===k.g?"undefined":R(k.g))&&k.g?k.g:"undefined"!=typeof window?window:{},(I=_.DeepDiff)&&j.push((function(){void 0!==I&&_.DeepDiff===c&&(_.DeepDiff=I,I=void 0)})),t(n,r),t(o,r),t(i,r),t(a,r),Object.defineProperties(c,{diff:{value:c,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:h,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:g,enumerable:!0},isConflict:{value:function(){return void 0!==I},enumerable:!0},noConflict:{value:function(){return j&&(j.forEach((function(e){e()})),j=null),c},enumerable:!0}});var B={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},H={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.dispatch,k=e.getState;return"function"==typeof _||"function"==typeof k?S()({dispatch:_,getState:k}):void 0};e.defaults=H,e.createLogger=S,e.logger=T,e.default=T,Object.defineProperty(e,"__esModule",{value:!0})}(_)},53894:function(e,_,k){"use strict";function createThunkMiddleware(e){return function(_){var k=_.dispatch,I=_.getState;return function(_){return function(C){return"function"==typeof C?C(k,I,e):_(C)}}}}k.d(_,{Z:function(){return C}});var I=createThunkMiddleware();I.withExtraArgument=createThunkMiddleware;const C=I},14890:function(e,_,k){"use strict";k.d(_,{md:function(){return applyMiddleware},DE:function(){return bindActionCreators},UY:function(){return combineReducers},qC:function(){return compose},MT:function(){return createStore}});var I=k(67121),C=function randomString(){return Math.random().toString(36).substring(7).split("").join(".")},R={INIT:"@@redux/INIT"+C(),REPLACE:"@@redux/REPLACE"+C(),PROBE_UNKNOWN_ACTION:function PROBE_UNKNOWN_ACTION(){return"@@redux/PROBE_UNKNOWN_ACTION"+C()}};function isPlainObject(e){if("object"!=typeof e||null===e)return!1;for(var _=e;null!==Object.getPrototypeOf(_);)_=Object.getPrototypeOf(_);return Object.getPrototypeOf(e)===_}function createStore(e,_,k){var C;if("function"==typeof _&&"function"==typeof k||"function"==typeof k&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof _&&void 0===k&&(k=_,_=void 0),void 0!==k){if("function"!=typeof k)throw new Error("Expected the enhancer to be a function.");return k(createStore)(e,_)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var j=e,B=_,H=[],U=H,V=!1;function ensureCanMutateNextListeners(){U===H&&(U=H.slice())}function getState(){if(V)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return B}function subscribe(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(V)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var _=!0;return ensureCanMutateNextListeners(),U.push(e),function unsubscribe(){if(_){if(V)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");_=!1,ensureCanMutateNextListeners();var k=U.indexOf(e);U.splice(k,1)}}}function dispatch(e){if(!isPlainObject(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(V)throw new Error("Reducers may not dispatch actions.");try{V=!0,B=j(B,e)}finally{V=!1}for(var _=H=U,k=0;k<_.length;k++){(0,_[k])()}return e}function replaceReducer(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");j=e,dispatch({type:R.REPLACE})}function observable(){var e,_=subscribe;return(e={subscribe:function subscribe(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function observeState(){e.next&&e.next(getState())}return observeState(),{unsubscribe:_(observeState)}}})[I.Z]=function(){return this},e}return dispatch({type:R.INIT}),(C={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer})[I.Z]=observable,C}function getUndefinedStateErrorMessage(e,_){var k=_&&_.type;return"Given "+(k&&'action "'+String(k)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function combineReducers(e){for(var _=Object.keys(e),k={},I=0;I<_.length;I++){var C=_[I];0,"function"==typeof e[C]&&(k[C]=e[C])}var j,B=Object.keys(k);try{!function assertReducerShape(e){Object.keys(e).forEach((function(_){var k=e[_];if(void 0===k(void 0,{type:R.INIT}))throw new Error('Reducer "'+_+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===k(void 0,{type:R.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+_+"\" returned undefined when probed with a random type. Don't try to handle "+R.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(k)}catch(e){j=e}return function combination(e,_){if(void 0===e&&(e={}),j)throw j;for(var I=!1,C={},R=0;R<B.length;R++){var H=B[R],U=k[H],V=e[H],G=U(V,_);if(void 0===G){var q=getUndefinedStateErrorMessage(H,_);throw new Error(q)}C[H]=G,I=I||G!==V}return I?C:e}}function bindActionCreator(e,_){return function(){return _(e.apply(this,arguments))}}function bindActionCreators(e,_){if("function"==typeof e)return bindActionCreator(e,_);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var k={};for(var I in e){var C=e[I];"function"==typeof C&&(k[I]=bindActionCreator(C,_))}return k}function _defineProperty(e,_,k){return _ in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}function ownKeys(e,_){var k=Object.keys(e);return Object.getOwnPropertySymbols&&k.push.apply(k,Object.getOwnPropertySymbols(e)),_&&(k=k.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k}function _objectSpread2(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(k,!0).forEach((function(_){_defineProperty(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(k).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function compose(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return 0===_.length?function(e){return e}:1===_.length?_[0]:_.reduce((function(e,_){return function(){return e(_.apply(void 0,arguments))}}))}function applyMiddleware(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return function(e){return function(){var k=e.apply(void 0,arguments),I=function dispatch(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},C={getState:k.getState,dispatch:function dispatch(){return I.apply(void 0,arguments)}},R=_.map((function(e){return e(C)}));return _objectSpread2({},k,{dispatch:I=compose.apply(void 0,R)(k.dispatch)})}}}},35666:function(e){var _=function(e){"use strict";var _,k=Object.prototype,I=k.hasOwnProperty,C=Object.defineProperty||function(e,_,k){e[_]=k.value},R="function"==typeof Symbol?Symbol:{},j=R.iterator||"@@iterator",B=R.asyncIterator||"@@asyncIterator",H=R.toStringTag||"@@toStringTag";function define(e,_,k){return Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}),e[_]}try{define({},"")}catch(e){define=function(e,_,k){return e[_]=k}}function wrap(e,_,k,I){var R=_&&_.prototype instanceof Generator?_:Generator,j=Object.create(R.prototype),B=new Context(I||[]);return C(j,"_invoke",{value:makeInvokeMethod(e,k,B)}),j}function tryCatch(e,_,k){try{return{type:"normal",arg:e.call(_,k)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var U="suspendedStart",V="executing",G="completed",q={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var z={};define(z,j,(function(){return this}));var J=Object.getPrototypeOf,Q=J&&J(J(values([])));Q&&Q!==k&&I.call(Q,j)&&(z=Q);var ee=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(z);function defineIteratorMethods(e){["next","throw","return"].forEach((function(_){define(e,_,(function(e){return this._invoke(_,e)}))}))}function AsyncIterator(e,_){function invoke(k,C,R,j){var B=tryCatch(e[k],e,C);if("throw"!==B.type){var H=B.arg,U=H.value;return U&&"object"==typeof U&&I.call(U,"__await")?_.resolve(U.__await).then((function(e){invoke("next",e,R,j)}),(function(e){invoke("throw",e,R,j)})):_.resolve(U).then((function(e){H.value=e,R(H)}),(function(e){return invoke("throw",e,R,j)}))}j(B.arg)}var k;C(this,"_invoke",{value:function enqueue(e,I){function callInvokeWithMethodAndArg(){return new _((function(_,k){invoke(e,I,_,k)}))}return k=k?k.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,_,k){var I=U;return function invoke(C,R){if(I===V)throw new Error("Generator is already running");if(I===G){if("throw"===C)throw R;return doneResult()}for(k.method=C,k.arg=R;;){var j=k.delegate;if(j){var B=maybeInvokeDelegate(j,k);if(B){if(B===q)continue;return B}}if("next"===k.method)k.sent=k._sent=k.arg;else if("throw"===k.method){if(I===U)throw I=G,k.arg;k.dispatchException(k.arg)}else"return"===k.method&&k.abrupt("return",k.arg);I=V;var H=tryCatch(e,_,k);if("normal"===H.type){if(I=k.done?G:"suspendedYield",H.arg===q)continue;return{value:H.arg,done:k.done}}"throw"===H.type&&(I=G,k.method="throw",k.arg=H.arg)}}}function maybeInvokeDelegate(e,k){var I=k.method,C=e.iterator[I];if(C===_)return k.delegate=null,"throw"===I&&e.iterator.return&&(k.method="return",k.arg=_,maybeInvokeDelegate(e,k),"throw"===k.method)||"return"!==I&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+I+"' method")),q;var R=tryCatch(C,e.iterator,k.arg);if("throw"===R.type)return k.method="throw",k.arg=R.arg,k.delegate=null,q;var j=R.arg;return j?j.done?(k[e.resultName]=j.value,k.next=e.nextLoc,"return"!==k.method&&(k.method="next",k.arg=_),k.delegate=null,q):j:(k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,q)}function pushTryEntry(e){var _={tryLoc:e[0]};1 in e&&(_.catchLoc=e[1]),2 in e&&(_.finallyLoc=e[2],_.afterLoc=e[3]),this.tryEntries.push(_)}function resetTryEntry(e){var _=e.completion||{};_.type="normal",delete _.arg,e.completion=_}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var k=e[j];if(k)return k.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var C=-1,R=function next(){for(;++C<e.length;)if(I.call(e,C))return next.value=e[C],next.done=!1,next;return next.value=_,next.done=!0,next};return R.next=R}}return{next:doneResult}}function doneResult(){return{value:_,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,C(ee,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),C(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,H,"GeneratorFunction"),e.isGeneratorFunction=function(e){var _="function"==typeof e&&e.constructor;return!!_&&(_===GeneratorFunction||"GeneratorFunction"===(_.displayName||_.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,H,"GeneratorFunction")),e.prototype=Object.create(ee),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,B,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(_,k,I,C,R){void 0===R&&(R=Promise);var j=new AsyncIterator(wrap(_,k,I,C),R);return e.isGeneratorFunction(k)?j:j.next().then((function(e){return e.done?e.value:j.next()}))},defineIteratorMethods(ee),define(ee,H,"Generator"),define(ee,j,(function(){return this})),define(ee,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var _=Object(e),k=[];for(var I in _)k.push(I);return k.reverse(),function next(){for(;k.length;){var e=k.pop();if(e in _)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(resetTryEntry),!e)for(var k in this)"t"===k.charAt(0)&&I.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=_)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var k=this;function handle(I,C){return j.type="throw",j.arg=e,k.next=I,C&&(k.method="next",k.arg=_),!!C}for(var C=this.tryEntries.length-1;C>=0;--C){var R=this.tryEntries[C],j=R.completion;if("root"===R.tryLoc)return handle("end");if(R.tryLoc<=this.prev){var B=I.call(R,"catchLoc"),H=I.call(R,"finallyLoc");if(B&&H){if(this.prev<R.catchLoc)return handle(R.catchLoc,!0);if(this.prev<R.finallyLoc)return handle(R.finallyLoc)}else if(B){if(this.prev<R.catchLoc)return handle(R.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return handle(R.finallyLoc)}}}},abrupt:function(e,_){for(var k=this.tryEntries.length-1;k>=0;--k){var C=this.tryEntries[k];if(C.tryLoc<=this.prev&&I.call(C,"finallyLoc")&&this.prev<C.finallyLoc){var R=C;break}}R&&("break"===e||"continue"===e)&&R.tryLoc<=_&&_<=R.finallyLoc&&(R=null);var j=R?R.completion:{};return j.type=e,j.arg=_,R?(this.method="next",this.next=R.finallyLoc,q):this.complete(j)},complete:function(e,_){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&_&&(this.next=_),q},finish:function(e){for(var _=this.tryEntries.length-1;_>=0;--_){var k=this.tryEntries[_];if(k.finallyLoc===e)return this.complete(k.completion,k.afterLoc),resetTryEntry(k),q}},catch:function(e){for(var _=this.tryEntries.length-1;_>=0;--_){var k=this.tryEntries[_];if(k.tryLoc===e){var I=k.completion;if("throw"===I.type){var C=I.arg;resetTryEntry(k)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(e,k,I){return this.delegate={iterator:values(e),resultName:k,nextLoc:I},"next"===this.method&&(this.arg=_),q}},e}(e.exports);try{regeneratorRuntime=_}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=_:Function("r","regeneratorRuntime = r")(_)}},91033:function(e,_,k){"use strict";k.d(_,{Z:function(){return te}});var I=function(){if("undefined"!=typeof Map)return Map;function getIndex(e,_){var k=-1;return e.some((function(e,I){return e[0]===_&&(k=I,!0)})),k}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(e){var _=getIndex(this.__entries__,e),k=this.__entries__[_];return k&&k[1]},class_1.prototype.set=function(e,_){var k=getIndex(this.__entries__,e);~k?this.__entries__[k][1]=_:this.__entries__.push([e,_])},class_1.prototype.delete=function(e){var _=this.__entries__,k=getIndex(_,e);~k&&_.splice(k,1)},class_1.prototype.has=function(e){return!!~getIndex(this.__entries__,e)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(e,_){void 0===_&&(_=null);for(var k=0,I=this.__entries__;k<I.length;k++){var C=I[k];e.call(_,C[1],C[0])}},class_1}()}(),C="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,R=void 0!==k.g&&k.g.Math===Math?k.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),j="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(R):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var B=["top","right","bottom","left","width","height","size","weight"],H="undefined"!=typeof MutationObserver,U=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function throttle(e,_){var k=!1,I=!1,C=0;function resolvePending(){k&&(k=!1,e()),I&&proxy()}function timeoutCallback(){j(resolvePending)}function proxy(){var e=Date.now();if(k){if(e-C<2)return;I=!0}else k=!0,I=!1,setTimeout(timeoutCallback,_);C=e}return proxy}(this.refresh.bind(this),20)}return ResizeObserverController.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(e){var _=this.observers_,k=_.indexOf(e);~k&&_.splice(k,1),!_.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},ResizeObserverController.prototype.connect_=function(){C&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),H?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){C&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(e){var _=e.propertyName,k=void 0===_?"":_;B.some((function(e){return!!~k.indexOf(e)}))&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),defineConfigurable=function(e,_){for(var k=0,I=Object.keys(_);k<I.length;k++){var C=I[k];Object.defineProperty(e,C,{value:_[C],enumerable:!1,writable:!1,configurable:!0})}return e},getWindowOf=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||R},V=createRectInit(0,0,0,0);function toFloat(e){return parseFloat(e)||0}function getBordersSize(e){for(var _=[],k=1;k<arguments.length;k++)_[k-1]=arguments[k];return _.reduce((function(_,k){return _+toFloat(e["border-"+k+"-width"])}),0)}function getHTMLElementContentRect(e){var _=e.clientWidth,k=e.clientHeight;if(!_&&!k)return V;var I=getWindowOf(e).getComputedStyle(e),C=function getPaddings(e){for(var _={},k=0,I=["top","right","bottom","left"];k<I.length;k++){var C=I[k],R=e["padding-"+C];_[C]=toFloat(R)}return _}(I),R=C.left+C.right,j=C.top+C.bottom,B=toFloat(I.width),H=toFloat(I.height);if("border-box"===I.boxSizing&&(Math.round(B+R)!==_&&(B-=getBordersSize(I,"left","right")+R),Math.round(H+j)!==k&&(H-=getBordersSize(I,"top","bottom")+j)),!function isDocumentElement(e){return e===getWindowOf(e).document.documentElement}(e)){var U=Math.round(B+R)-_,G=Math.round(H+j)-k;1!==Math.abs(U)&&(B-=U),1!==Math.abs(G)&&(H-=G)}return createRectInit(C.left,C.top,B,H)}var G="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof getWindowOf(e).SVGGraphicsElement}:function(e){return e instanceof getWindowOf(e).SVGElement&&"function"==typeof e.getBBox};function getContentRect(e){return C?G(e)?function getSVGContentRect(e){var _=e.getBBox();return createRectInit(0,0,_.width,_.height)}(e):getHTMLElementContentRect(e):V}function createRectInit(e,_,k,I){return{x:e,y:_,width:k,height:I}}var q=function(){function ResizeObservation(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=e}return ResizeObservation.prototype.isActive=function(){var e=getContentRect(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},ResizeObservation}(),z=function z(e,_){var k=function createReadOnlyRect(e){var _=e.x,k=e.y,I=e.width,C=e.height,R="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,j=Object.create(R.prototype);return defineConfigurable(j,{x:_,y:k,width:I,height:C,top:k,right:_+I,bottom:C+k,left:_}),j}(_);defineConfigurable(this,{target:e,contentRect:k})},J=function(){function ResizeObserverSPI(e,_,k){if(this.activeObservations_=[],this.observations_=new I,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=_,this.callbackCtx_=k}return ResizeObserverSPI.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var _=this.observations_;_.has(e)||(_.set(e,new q(e)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var _=this.observations_;_.has(e)&&(_.delete(e),_.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(_){_.isActive()&&e.activeObservations_.push(_)}))},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,_=this.activeObservations_.map((function(e){return new z(e.target,e.broadcastRect())}));this.callback_.call(e,_,e),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),Q="undefined"!=typeof WeakMap?new WeakMap:new I,ee=function ResizeObserver(e){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var _=U.getInstance(),k=new J(e,_,this);Q.set(this,k)};["observe","unobserve","disconnect"].forEach((function(e){ee.prototype[e]=function(){var _;return(_=Q.get(this))[e].apply(_,arguments)}}));const te=void 0!==R.ResizeObserver?R.ResizeObserver:ee},60053:function(e,_){"use strict";
/** @license React v0.16.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k,I,C,R,j;if(Object.defineProperty(_,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var B=null,H=null,t=function(){if(null!==B)try{var e=_.unstable_now();B(!0,e),B=null}catch(e){throw setTimeout(t,0),e}},U=Date.now();_.unstable_now=function(){return Date.now()-U},k=function(e){null!==B?setTimeout(k,0,e):(B=e,setTimeout(t,0))},I=function(e,_){H=setTimeout(e,_)},C=function(){clearTimeout(H)},R=function(){return!1},j=_.unstable_forceFrameRate=function(){}}else{var V=window.performance,G=window.Date,q=window.setTimeout,z=window.clearTimeout;window.requestAnimationFrame,window.cancelAnimationFrame;if("object"==typeof V&&"function"==typeof V.now)_.unstable_now=function(){return V.now()};else{var J=G.now();_.unstable_now=function(){return G.now()-J}}var Q=!1,ee=null,te=-1,ne=5,re=0;R=function(){return _.unstable_now()>=re},j=function(){},_.unstable_forceFrameRate=function(e){0>e||125<e||(ne=0<e?Math.floor(1e3/e):33.33)};var oe=new MessageChannel,ie=oe.port2;oe.port1.onmessage=function(){if(null!==ee){var e=_.unstable_now();re=e+ne;try{ee(!0,e)?ie.postMessage(null):(Q=!1,ee=null)}catch(e){throw ie.postMessage(null),e}}else Q=!1},k=function(e){ee=e,Q||(Q=!0,ie.postMessage(null))},I=function(e,k){te=q((function(){e(_.unstable_now())}),k)},C=function(){z(te),te=-1}}function K(e,_){var k=e.length;e.push(_);e:for(;;){var I=Math.floor((k-1)/2),C=e[I];if(!(void 0!==C&&0<L(C,_)))break e;e[I]=_,e[k]=C,k=I}}function M(e){return void 0===(e=e[0])?null:e}function N(e){var _=e[0];if(void 0!==_){var k=e.pop();if(k!==_){e[0]=k;e:for(var I=0,C=e.length;I<C;){var R=2*(I+1)-1,j=e[R],B=R+1,H=e[B];if(void 0!==j&&0>L(j,k))void 0!==H&&0>L(H,j)?(e[I]=H,e[B]=k,I=B):(e[I]=j,e[R]=k,I=R);else{if(!(void 0!==H&&0>L(H,k)))break e;e[I]=H,e[B]=k,I=B}}}return _}return null}function L(e,_){var k=e.sortIndex-_.sortIndex;return 0!==k?k:e.id-_.id}var ae=[],le=[],se=1,ce=null,ue=3,de=!1,pe=!1,he=!1;function W(e){for(var _=M(le);null!==_;){if(null===_.callback)N(le);else{if(!(_.startTime<=e))break;N(le),_.sortIndex=_.expirationTime,K(ae,_)}_=M(le)}}function X(e){if(he=!1,W(e),!pe)if(null!==M(ae))pe=!0,k(Y);else{var _=M(le);null!==_&&I(X,_.startTime-e)}}function Y(e,k){pe=!1,he&&(he=!1,C()),de=!0;var j=ue;try{for(W(k),ce=M(ae);null!==ce&&(!(ce.expirationTime>k)||e&&!R());){var B=ce.callback;if(null!==B){ce.callback=null,ue=ce.priorityLevel;var H=B(ce.expirationTime<=k);k=_.unstable_now(),"function"==typeof H?ce.callback=H:ce===M(ae)&&N(ae),W(k)}else N(ae);ce=M(ae)}if(null!==ce)var U=!0;else{var V=M(le);null!==V&&I(X,V.startTime-k),U=!1}return U}finally{ce=null,ue=j,de=!1}}function Z(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var fe=j;_.unstable_ImmediatePriority=1,_.unstable_UserBlockingPriority=2,_.unstable_NormalPriority=3,_.unstable_IdlePriority=5,_.unstable_LowPriority=4,_.unstable_runWithPriority=function(e,_){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var k=ue;ue=e;try{return _()}finally{ue=k}},_.unstable_next=function(e){switch(ue){case 1:case 2:case 3:var _=3;break;default:_=ue}var k=ue;ue=_;try{return e()}finally{ue=k}},_.unstable_scheduleCallback=function(e,R,j){var B=_.unstable_now();if("object"==typeof j&&null!==j){var H=j.delay;H="number"==typeof H&&0<H?B+H:B,j="number"==typeof j.timeout?j.timeout:Z(e)}else j=Z(e),H=B;return e={id:se++,callback:R,priorityLevel:e,startTime:H,expirationTime:j=H+j,sortIndex:-1},H>B?(e.sortIndex=H,K(le,e),null===M(ae)&&e===M(le)&&(he?C():he=!0,I(X,H-B))):(e.sortIndex=j,K(ae,e),pe||de||(pe=!0,k(Y))),e},_.unstable_cancelCallback=function(e){e.callback=null},_.unstable_wrapCallback=function(e){var _=ue;return function(){var k=ue;ue=_;try{return e.apply(this,arguments)}finally{ue=k}}},_.unstable_getCurrentPriorityLevel=function(){return ue},_.unstable_shouldYield=function(){var e=_.unstable_now();W(e);var k=M(ae);return k!==ce&&null!==ce&&null!==k&&null!==k.callback&&k.startTime<=e&&k.expirationTime<ce.expirationTime||R()},_.unstable_requestPaint=fe,_.unstable_continueExecution=function(){pe||de||(pe=!0,k(Y))},_.unstable_pauseExecution=function(){},_.unstable_getFirstCallbackNode=function(){return M(ae)},_.unstable_Profiling=null},63840:function(e,_,k){"use strict";e.exports=k(60053)},67121:function(e,_,k){"use strict";k.d(_,{Z:function(){return I}}),e=k.hmd(e);const I=function symbolObservablePonyfill(e){var _,k=e.Symbol;return"function"==typeof k?k.observable?_=k.observable:(_=k("observable"),k.observable=_):_="@@observable",_}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==k.g?k.g:e)},65353:function(e,_,k){"use strict";k.r(_),k.d(_,{__extends:function(){return __extends},__assign:function(){return __assign},__rest:function(){return __rest},__decorate:function(){return __decorate},__param:function(){return __param},__esDecorate:function(){return __esDecorate},__runInitializers:function(){return __runInitializers},__propKey:function(){return __propKey},__setFunctionName:function(){return __setFunctionName},__metadata:function(){return __metadata},__awaiter:function(){return __awaiter},__generator:function(){return __generator},__createBinding:function(){return I},__exportStar:function(){return __exportStar},__values:function(){return __values},__read:function(){return __read},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__spreadArray:function(){return __spreadArray},__await:function(){return __await},__asyncGenerator:function(){return __asyncGenerator},__asyncDelegator:function(){return __asyncDelegator},__asyncValues:function(){return __asyncValues},__makeTemplateObject:function(){return __makeTemplateObject},__importStar:function(){return __importStar},__importDefault:function(){return __importDefault},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__classPrivateFieldIn:function(){return __classPrivateFieldIn},__addDisposableResource:function(){return __addDisposableResource},__disposeResources:function(){return __disposeResources},__rewriteRelativeImportExtension:function(){return __rewriteRelativeImportExtension},default:function(){return j}});var extendStatics=function(e,_){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,_){e.__proto__=_}||function(e,_){for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&(e[k]=_[k])})(e,_)};function __extends(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,_),e.prototype=null===_?Object.create(_):(__.prototype=_.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function __assign(e){for(var _,k=1,I=arguments.length;k<I;k++)for(var C in _=arguments[k])Object.prototype.hasOwnProperty.call(_,C)&&(e[C]=_[C]);return e}).apply(this,arguments)};function __rest(e,_){var k={};for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&_.indexOf(I)<0&&(k[I]=e[I]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var C=0;for(I=Object.getOwnPropertySymbols(e);C<I.length;C++)_.indexOf(I[C])<0&&Object.prototype.propertyIsEnumerable.call(e,I[C])&&(k[I[C]]=e[I[C]])}return k}function __decorate(e,_,k,I){var C,R=arguments.length,j=R<3?_:null===I?I=Object.getOwnPropertyDescriptor(_,k):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(e,_,k,I);else for(var B=e.length-1;B>=0;B--)(C=e[B])&&(j=(R<3?C(j):R>3?C(_,k,j):C(_,k))||j);return R>3&&j&&Object.defineProperty(_,k,j),j}function __param(e,_){return function(k,I){_(k,I,e)}}function __esDecorate(e,_,k,I,C,R){function accept(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var j,B=I.kind,H="getter"===B?"get":"setter"===B?"set":"value",U=!_&&e?I.static?e:e.prototype:null,V=_||(U?Object.getOwnPropertyDescriptor(U,I.name):{}),G=!1,q=k.length-1;q>=0;q--){var z={};for(var J in I)z[J]="access"===J?{}:I[J];for(var J in I.access)z.access[J]=I.access[J];z.addInitializer=function(e){if(G)throw new TypeError("Cannot add initializers after decoration has completed");R.push(accept(e||null))};var Q=(0,k[q])("accessor"===B?{get:V.get,set:V.set}:V[H],z);if("accessor"===B){if(void 0===Q)continue;if(null===Q||"object"!=typeof Q)throw new TypeError("Object expected");(j=accept(Q.get))&&(V.get=j),(j=accept(Q.set))&&(V.set=j),(j=accept(Q.init))&&C.unshift(j)}else(j=accept(Q))&&("field"===B?C.unshift(j):V[H]=j)}U&&Object.defineProperty(U,I.name,V),G=!0}function __runInitializers(e,_,k){for(var I=arguments.length>2,C=0;C<_.length;C++)k=I?_[C].call(e,k):_[C].call(e);return I?k:void 0}function __propKey(e){return"symbol"==typeof e?e:"".concat(e)}function __setFunctionName(e,_,k){return"symbol"==typeof _&&(_=_.description?"[".concat(_.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:k?"".concat(k," ",_):_})}function __metadata(e,_){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,_)}function __awaiter(e,_,k,I){return new(k||(k=Promise))((function(C,R){function fulfilled(e){try{step(I.next(e))}catch(e){R(e)}}function rejected(e){try{step(I.throw(e))}catch(e){R(e)}}function step(e){e.done?C(e.value):function adopt(e){return e instanceof k?e:new k((function(_){_(e)}))}(e.value).then(fulfilled,rejected)}step((I=I.apply(e,_||[])).next())}))}function __generator(e,_){var k,I,C,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]},j=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return j.next=verb(0),j.throw=verb(1),j.return=verb(2),"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j;function verb(B){return function(H){return function step(B){if(k)throw new TypeError("Generator is already executing.");for(;j&&(j=0,B[0]&&(R=0)),R;)try{if(k=1,I&&(C=2&B[0]?I.return:B[0]?I.throw||((C=I.return)&&C.call(I),0):I.next)&&!(C=C.call(I,B[1])).done)return C;switch(I=0,C&&(B=[2&B[0],C.value]),B[0]){case 0:case 1:C=B;break;case 4:return R.label++,{value:B[1],done:!1};case 5:R.label++,I=B[1],B=[0];continue;case 7:B=R.ops.pop(),R.trys.pop();continue;default:if(!(C=R.trys,(C=C.length>0&&C[C.length-1])||6!==B[0]&&2!==B[0])){R=0;continue}if(3===B[0]&&(!C||B[1]>C[0]&&B[1]<C[3])){R.label=B[1];break}if(6===B[0]&&R.label<C[1]){R.label=C[1],C=B;break}if(C&&R.label<C[2]){R.label=C[2],R.ops.push(B);break}C[2]&&R.ops.pop(),R.trys.pop();continue}B=_.call(e,R)}catch(e){B=[6,e],I=0}finally{k=C=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,H])}}}var I=Object.create?function(e,_,k,I){void 0===I&&(I=k);var C=Object.getOwnPropertyDescriptor(_,k);C&&!("get"in C?!_.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return _[k]}}),Object.defineProperty(e,I,C)}:function(e,_,k,I){void 0===I&&(I=k),e[I]=_[k]};function __exportStar(e,_){for(var k in e)"default"===k||Object.prototype.hasOwnProperty.call(_,k)||I(_,e,k)}function __values(e){var _="function"==typeof Symbol&&Symbol.iterator,k=_&&e[_],I=0;if(k)return k.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&I>=e.length&&(e=void 0),{value:e&&e[I++],done:!e}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,_){var k="function"==typeof Symbol&&e[Symbol.iterator];if(!k)return e;var I,C,R=k.call(e),j=[];try{for(;(void 0===_||_-- >0)&&!(I=R.next()).done;)j.push(I.value)}catch(e){C={error:e}}finally{try{I&&!I.done&&(k=R.return)&&k.call(R)}finally{if(C)throw C.error}}return j}function __spread(){for(var e=[],_=0;_<arguments.length;_++)e=e.concat(__read(arguments[_]));return e}function __spreadArrays(){for(var e=0,_=0,k=arguments.length;_<k;_++)e+=arguments[_].length;var I=Array(e),C=0;for(_=0;_<k;_++)for(var R=arguments[_],j=0,B=R.length;j<B;j++,C++)I[C]=R[j];return I}function __spreadArray(e,_,k){if(k||2===arguments.length)for(var I,C=0,R=_.length;C<R;C++)!I&&C in _||(I||(I=Array.prototype.slice.call(_,0,C)),I[C]=_[C]);return e.concat(I||Array.prototype.slice.call(_))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,_,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I,C=k.apply(e,_||[]),R=[];return I=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),verb("next"),verb("throw"),verb("return",(function awaitReturn(e){return function(_){return Promise.resolve(_).then(e,reject)}})),I[Symbol.asyncIterator]=function(){return this},I;function verb(e,_){C[e]&&(I[e]=function(_){return new Promise((function(k,I){R.push([e,_,k,I])>1||resume(e,_)}))},_&&(I[e]=_(I[e])))}function resume(e,_){try{!function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(R[0][2],e)}(C[e](_))}catch(e){settle(R[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,_){e(_),R.shift(),R.length&&resume(R[0][0],R[0][1])}}function __asyncDelegator(e){var _,k;return _={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),_[Symbol.iterator]=function(){return this},_;function verb(I,C){_[I]=e[I]?function(_){return(k=!k)?{value:__await(e[I](_)),done:!1}:C?C(_):_}:C}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,k=e[Symbol.asyncIterator];return k?k.call(e):(e=__values(e),_={},verb("next"),verb("throw"),verb("return"),_[Symbol.asyncIterator]=function(){return this},_);function verb(k){_[k]=e[k]&&function(_){return new Promise((function(I,C){(function settle(e,_,k,I){Promise.resolve(I).then((function(_){e({value:_,done:k})}),_)})(I,C,(_=e[k](_)).done,_.value)}))}}}function __makeTemplateObject(e,_){return Object.defineProperty?Object.defineProperty(e,"raw",{value:_}):e.raw=_,e}var C=Object.create?function(e,_){Object.defineProperty(e,"default",{enumerable:!0,value:_})}:function(e,_){e.default=_},ownKeys=function(e){return(ownKeys=Object.getOwnPropertyNames||function(e){var _=[];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(_[_.length]=k);return _})(e)};function __importStar(e){if(e&&e.__esModule)return e;var _={};if(null!=e)for(var k=ownKeys(e),R=0;R<k.length;R++)"default"!==k[R]&&I(_,e,k[R]);return C(_,e),_}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,_,k,I){if("a"===k&&!I)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof _?e!==_||!I:!_.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===k?I:"a"===k?I.call(e):I?I.value:_.get(e)}function __classPrivateFieldSet(e,_,k,I,C){if("m"===I)throw new TypeError("Private method is not writable");if("a"===I&&!C)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof _?e!==_||!C:!_.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===I?C.call(e,k):C?C.value=k:_.set(e,k),k}function __classPrivateFieldIn(e,_){if(null===_||"object"!=typeof _&&"function"!=typeof _)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?_===e:e.has(_)}function __addDisposableResource(e,_,k){if(null!=_){if("object"!=typeof _&&"function"!=typeof _)throw new TypeError("Object expected.");var I,C;if(k){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");I=_[Symbol.asyncDispose]}if(void 0===I){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");I=_[Symbol.dispose],k&&(C=I)}if("function"!=typeof I)throw new TypeError("Object not disposable.");C&&(I=function(){try{C.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:_,dispose:I,async:k})}else k&&e.stack.push({async:!0});return _}var R="function"==typeof SuppressedError?SuppressedError:function(e,_,k){var I=new Error(k);return I.name="SuppressedError",I.error=e,I.suppressed=_,I};function __disposeResources(e){function fail(_){e.error=e.hasError?new R(_,e.error,"An error was suppressed during disposal."):_,e.hasError=!0}var _,k=0;return function next(){for(;_=e.stack.pop();)try{if(!_.async&&1===k)return k=0,e.stack.push(_),Promise.resolve().then(next);if(_.dispose){var I=_.dispose.call(_.value);if(_.async)return k|=2,Promise.resolve(I).then(next,(function(e){return fail(e),next()}))}else k|=1}catch(e){fail(e)}if(1===k)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function __rewriteRelativeImportExtension(e,_){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,k,I,C,R){return k?_?".jsx":".js":!I||C&&R?I+C+"."+R.toLowerCase()+"js":e})):e}const j={__extends:__extends,__assign:__assign,__rest:__rest,__decorate:__decorate,__param:__param,__esDecorate:__esDecorate,__runInitializers:__runInitializers,__propKey:__propKey,__setFunctionName:__setFunctionName,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:I,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn,__addDisposableResource:__addDisposableResource,__disposeResources:__disposeResources,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension}},44586:function(e,_,k){"use strict";var I;k.d(_,{Z:function(){return V}});var C=new Uint8Array(16);function rng(){if(!I&&!(I="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(C)}const R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const j=function validate(e){return"string"==typeof e&&R.test(e)};for(var B=[],H=0;H<256;++H)B.push((H+256).toString(16).substr(1));const U=function stringify(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=(B[e[_+0]]+B[e[_+1]]+B[e[_+2]]+B[e[_+3]]+"-"+B[e[_+4]]+B[e[_+5]]+"-"+B[e[_+6]]+B[e[_+7]]+"-"+B[e[_+8]]+B[e[_+9]]+"-"+B[e[_+10]]+B[e[_+11]]+B[e[_+12]]+B[e[_+13]]+B[e[_+14]]+B[e[_+15]]).toLowerCase();if(!j(k))throw TypeError("Stringified UUID is invalid");return k};const V=function v4(e,_,k){var I=(e=e||{}).random||(e.rng||rng)();if(I[6]=15&I[6]|64,I[8]=63&I[8]|128,_){k=k||0;for(var C=0;C<16;++C)_[k+C]=I[C];return _}return U(I)}},82131:function(e,_,k){"use strict";k.d(_,{kz:function(){return h},Y:function(){return d},Tx:function(){return L},Tb:function(){return F},CA:function(){return P}});var I,C,R,j,r=function(e,_){return{name:e,value:void 0===_?-1:_,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},a=function(e,_){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var k=new PerformanceObserver((function(e){return e.getEntries().map(_)}));return k.observe({type:e,buffered:!0}),k}}catch(e){}},o=function(e,_){var k=function n(k){"pagehide"!==k.type&&"hidden"!==document.visibilityState||(e(k),_&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",k,!0),addEventListener("pagehide",k,!0)},u=function(e){addEventListener("pageshow",(function(_){_.persisted&&e(_)}),!0)},c=function(e,_,k){var I;return function(C){_.value>=0&&(C||k)&&(_.delta=_.value-(I||0),(_.delta||void 0===I)&&(I=_.value,e(_)))}},B=-1,s=function(){return"hidden"===document.visibilityState?0:1/0},m=function(){o((function(e){var _=e.timeStamp;B=_}),!0)},v=function(){return B<0&&(B=s(),m(),u((function(){setTimeout((function(){B=s(),m()}),0)}))),{get firstHiddenTime(){return B}}},d=function(e,_){var k,I=v(),C=r("FCP"),f=function(e){"first-contentful-paint"===e.name&&(j&&j.disconnect(),e.startTime<I.firstHiddenTime&&(C.value=e.startTime,C.entries.push(e),k(!0)))},R=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],j=R?null:a("paint",f);(R||j)&&(k=c(e,C,_),R&&f(R),u((function(I){C=r("FCP"),k=c(e,C,_),requestAnimationFrame((function(){requestAnimationFrame((function(){C.value=performance.now()-I.timeStamp,k(!0)}))}))})))},H=!1,U=-1,h=function(e,_){H||(d((function(e){U=e.value})),H=!0);var k,i=function(_){U>-1&&e(_)},I=r("CLS",0),C=0,R=[],v=function(e){if(!e.hadRecentInput){var _=R[0],j=R[R.length-1];C&&e.startTime-j.startTime<1e3&&e.startTime-_.startTime<5e3?(C+=e.value,R.push(e)):(C=e.value,R=[e]),C>I.value&&(I.value=C,I.entries=R,k())}},j=a("layout-shift",v);j&&(k=c(i,I,_),o((function(){j.takeRecords().map(v),k(!0)})),u((function(){C=0,U=-1,I=r("CLS",0),k=c(i,I,_)})))},V={passive:!0,capture:!0},G=new Date,g=function(e,_){I||(I=_,C=e,R=new Date,w(removeEventListener),E())},E=function(){if(C>=0&&C<R-G){var e={entryType:"first-input",name:I.type,target:I.target,cancelable:I.cancelable,startTime:I.timeStamp,processingStart:I.timeStamp+C};j.forEach((function(_){_(e)})),j=[]}},S=function(e){if(e.cancelable){var _=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,_){var n=function(){g(e,_),r()},i=function(){r()},r=function(){removeEventListener("pointerup",n,V),removeEventListener("pointercancel",i,V)};addEventListener("pointerup",n,V),addEventListener("pointercancel",i,V)}(_,e):g(_,e)}},w=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(_){return e(_,S,V)}))},L=function(e,_){var k,R=v(),B=r("FID"),p=function(e){e.startTime<R.firstHiddenTime&&(B.value=e.processingStart-e.startTime,B.entries.push(e),k(!0))},H=a("first-input",p);k=c(e,B,_),H&&o((function(){H.takeRecords().map(p),H.disconnect()}),!0),H&&u((function(){var R;B=r("FID"),k=c(e,B,_),j=[],C=-1,I=null,w(addEventListener),R=p,j.push(R),E()}))},q={},F=function(e,_){var k,I=v(),C=r("LCP"),s=function(e){var _=e.startTime;_<I.firstHiddenTime&&(C.value=_,C.entries.push(e),k())},R=a("largest-contentful-paint",s);if(R){k=c(e,C,_);var d=function(){q[C.id]||(R.takeRecords().map(s),R.disconnect(),q[C.id]=!0,k(!0))};["keydown","click"].forEach((function(e){addEventListener(e,d,{once:!0,capture:!0})})),o(d,!0),u((function(I){C=r("LCP"),k=c(e,C,_),requestAnimationFrame((function(){requestAnimationFrame((function(){C.value=performance.now()-I.timeStamp,q[C.id]=!0,k(!0)}))}))}))}},P=function(e){var _,k=r("TTFB");_=function(){try{var _=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,_={entryType:"navigation",startTime:0};for(var k in e)"navigationStart"!==k&&"toJSON"!==k&&(_[k]=Math.max(e[k]-e.navigationStart,0));return _}();if(k.value=k.delta=_.responseStart,k.value<0||k.value>performance.now())return;k.entries=[_],e(k)}catch(e){}},"complete"===document.readyState?setTimeout(_,0):addEventListener("load",(function(){return setTimeout(_,0)}))}},60306:function(e){"use strict";e.exports=JSON.parse('{"name":"smart","version":"1.0.0","description":"","AppID":"100018131","main":"index.js","config":{"env":"fws","port":"8089","vd":"/hotels","ctripvd":"/hotels"},"scripts":{"zip:ares":"tar -zcvf ares.tar.gz ./dist/smart","publish:ares:auto":"rm -rf ./dist/* && tar -zxvf ares.tar.gz && modpack && exit 1","smartdb":" node bin/smartdb.js","smartdb-webpack":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' node bin/smartdb-webpack.js","smartdb-example":"node ./bin/smartdb-example.js","smartdb-build":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' node ./bin/smartdb-build.js","smartdb-analy":"node ./bin/smartdb-analy.js","smartdb-check":"node ./bin/smartdb-check.js","smartdb-clean":"node ./bin/smartdb-clean.js","smartdb-component":"node ./bin/smartdb-component.js","smartdb-check-version":"node ./bin/smartdb-check-version.js","smartdb-del-font":"node ./bin/smartdb-del-font.js","dev":"cross-env NODE_ENV=development concurrently \\"npm run smartdb %npm_config_skipScan%\\" \\"npm run smartdb-webpack\\"","dev1":"cross-env NODE_ENV=development concurrently \\"npm run smartdb %npm_config_skipScan%\\" ","dev2":"cross-env NODE_ENV=development concurrently \\"npm run smartdb-webpack\\"","example":"cross-env NODE_ENV=development npm run smartdb-example","build":"npm run build:es && cross-env NODE_ENV=production npm run smartdb-build -- --bundleType=lib && npm run make-asset -- --outdir=lib --append=true && npm run build:manifest","build:lib":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' npm run smartdb-clean smart && cross-env NODE_ENV=production npm run smartdb-build -- --bundleType=lib && npm run make-asset -- --outdir=lib ","build:es":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' npm run smartdb-clean smart && cross-env NODE_ENV=production npm run smartdb-build -- --bundleType=es && npm run make-asset -- --outdir=es","build:v2":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\'  concurrently -m 2 -n lib,es \\"npm run build:lib\\" \\"npm run build:es\\"  && npm run build:manifest","build:manifest":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' node ./script/combineManifest.js","openui":"npm run smartdb-clean openui && npm run smartdb-openui","cross":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' webpack --config ./script/webpack.cross.js","analy":"cross-env NODE_ENV=production npm run smartdb-analy","check":"cross-env NODE_ENV=production npm run smartdb-check","smartbuild":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' major-tom -f dist/smart/ares.2019/module.json","openuibuild":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' major-tom -f ./dist/openui/.ares/ares.json -p 6001","eslint":"eslint --fix . --ext .js,.jsx","debugnode":"cross-env NODE_ENV=development concurrently \\"node --inspect-brk=9229 ./.vscode/index.js\\"","publish":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' npm run prod-build && npm run smartbuild","ares2":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' npm run prod-build && npm run make-asset","make-asset":"node script/makeAsset.js","jest":"jest -o","test":"jest -i","cpd":"jscpd --config \'.cpd.json\' ./client ./server","check:branch":"scripts\\\\checkBranch.sh","dll":"cross-env NODE_OPTIONS=\'--openssl-legacy-provider\' webpack --config script/webpack.dll.config.js","update:basis":"node script/updatePackageVersion.js","update:ares":"node script/dev/upgradeAres.js"},"author":"","license":"ISC","devDependencies":{"@ctrip/trip-component-platform-helper":"4.0.21","@types/react":"^16.14.11","@types/react-dom":"^16.9.14","babel-eslint":"10.1.0","babel-loader":"8.1.0","babel-plugin-source-map-support":"^2.1.3","clean-webpack-plugin":"3.0.0","clone-deep":"4.0.1","commander":"9.1.0","concurrently":"3.6.0","copy-webpack-plugin":"11.0.0","cross-env":"5.2.0","css-loader":"5.0.0","enquirer":"^2.3.6","enzyme":"3.11.0","enzyme-adapter-react-16":"1.15.2","eslint":"7.14.0","eslint-config-prettier":"6.15.0","eslint-config-react":"1.1.7","eslint-plugin-prettier":"3.1.4","eslint-plugin-react":"7.30.1","eslint-plugin-react-hooks":"^4.2.0","file-loader":"6.2.0","happypack":"5.0.1","html-webpack-plugin":"4.5.0","husky":"^3.1.0","jscpd":"3.1.0","koa-compress":"3.0.0","koa-webpack-middleware":"1.0.7","lint-staged":"8.2.1","mini-css-extract-plugin":"1.3.1","postcss-loader":"4.0.4","postcss-preset-env":"6.7.0","prettier":"2.0.5","progress":"2.0.3","redux-devtools":"3.7.0","redux-logger":"^3.0.6","redux-mock-store":"1.5.4","resolve-url-loader":"3.1.2","rimraf":"3.0.2","terser-webpack-plugin":"4.2.3","url-loader":"4.1.1","webpack":"5.3.2","webpack-bundle-analyzer":"3.9.0","webpack-cli":"4.1.0","webpack-dev-middleware":"5.3.3","webpack-hot-middleware":"2.25.0","webpack-sources":"2.2.0"},"dependencies":{"@babel/core":"7.12.3","@babel/plugin-proposal-class-properties":"7.12.1","@babel/plugin-proposal-decorators":"7.12.1","@babel/plugin-proposal-optional-chaining":"7.12.1","@babel/plugin-transform-runtime":"7.12.1","@babel/polyfill":"7.12.1","@babel/preset-env":"7.12.1","@babel/preset-react":"7.12.1","@babel/preset-typescript":"7.12.1","@babel/register":"7.12.1","@babel/runtime":"7.12.1","@ctrip/ares":"1.0.12","@ctrip/ares-agent":"^5.7.0","@ctrip/cargo-nodejs":"3.6.6","@ctrip/cloud-foxpage-trip-context":"^1.1.2","@ctrip/cobranding-nodejs":"1.0.0-alpha.6","@ctrip/ibu-front-cashier":"0.0.39","@ctrip/ibu-uaparser-sdk":"1.0.9","@ctrip/ibu-union-sdk":"2.1.7","@ctrip/nfes-exposure":"2.0.4","@ctrip/nfes-util":"3.0.30","@ctrip/node-vampire-abtest":"1.0.21","@ctrip/node-vampire-language-quality-inspector":"1.0.10","@ctrip/node-vampire-qconfig":"1.0.47","@ctrip/node-vampire-vi-plugin":"^1.0.16","@ctrip/shareurl":"1.0.5","@ctrip/shark-js-sdk":"^4.1.0","@ctrip/shark-l10n":"^4.2.1","@ctrip/shark-sdk":"5.1.18","@ctrip/trip-component-base-notification":"1.0.1","@ctrip/trip-component-context":"4.1.6","@ctrip/trip-component-helper":"4.1.6","@ctrip/trip-component-hotel-basic-component":"2.0.9","@ctrip/trip-component-hotel-basis-cookie":"0.6.1","@ctrip/trip-component-hotel-basis-correct-date":"0.25.8","@ctrip/trip-component-hotel-basis-date":"0.5.0","@ctrip/trip-component-hotel-basis-download":"0.14.3","@ctrip/trip-component-hotel-basis-fb-msger":"0.0.7","@ctrip/trip-component-hotel-basis-front-log2":"0.2.3","@ctrip/trip-component-hotel-basis-gdata":"0.5.1","@ctrip/trip-component-hotel-basis-generate-pid":"0.5.1","@ctrip/trip-component-hotel-basis-lazy-img":"1.15.5","@ctrip/trip-component-hotel-basis-lazy-img-step-list":"0.3.3","@ctrip/trip-component-hotel-basis-localization":"0.6.0","@ctrip/trip-component-hotel-basis-nps":"0.23.8","@ctrip/trip-component-hotel-basis-p":"0.7.1","@ctrip/trip-component-hotel-basis-parse-mask":"0.7.0","@ctrip/trip-component-hotel-basis-query":"0.11.3","@ctrip/trip-component-hotel-basis-rafi":"0.11.8","@ctrip/trip-component-hotel-basis-rafi-genk":"0.15.5","@ctrip/trip-component-hotel-basis-rafi-verification":"0.15.3","@ctrip/trip-component-hotel-basis-redis":"0.4.4","@ctrip/trip-component-hotel-basis-request":"0.25.23","@ctrip/trip-component-hotel-basis-seo-codelab":"0.4.2","@ctrip/trip-component-hotel-basis-seo-redirect":"0.12.8","@ctrip/trip-component-hotel-basis-seo-url":"0.20.8","@ctrip/trip-component-hotel-basis-server-log":"0.13.4","@ctrip/trip-component-hotel-basis-shark-scan":"0.5.4","@ctrip/trip-component-hotel-basis-storage":"0.11.3","@ctrip/trip-component-hotel-basis-tools":"0.5.0","@ctrip/trip-component-hotel-basis-translate":"0.5.9","@ctrip/trip-component-hotel-basis-union":"0.17.4","@ctrip/trip-component-hotel-basis-zip":"0.4.4","@ctrip/trip-component-hotel-helper":"2.1.1","@ctrip/trip-component-intl":"4.1.10","@ctrip/trip-component-platform-online-advertize":"6.1.9","@ctrip/trip-component-platform-online-app-download-sms":"2.0.17","@ctrip/trip-component-platform-online-app-download-qrcode":"4.2.1","@ctrip/trip-component-platform-online-app-download-universal":"6.0.4","@ctrip/trip-component-platform-online-banner-basic":"2.0.1","@ctrip/trip-component-platform-online-calendar":"4.2.3","@ctrip/trip-component-platform-online-cookie-banner":"1.0.6","@ctrip/trip-component-platform-online-footer":"5.0.4","@ctrip/trip-component-platform-online-googleonetap":"4.0.6","@ctrip/trip-component-platform-online-gotop":"8.0.1","@ctrip/trip-component-platform-online-header":"9.2.1","@ctrip/trip-component-platform-online-nps":"^5.0.4","@ctrip/trip-component-platform-online-prepermission-popup":"1.0.10","@ctrip/trip-component-platform-online-region-selector":"3.2.5","@ctrip/trip-component-platform-online-safarionetap":"4.0.5","@ctrip/trip-component-platform-online-subscribe":"1.2.4","@ctrip/trip-component-platform-online-subscribe-banner":"1.0.7","@ctrip/trip-component-platform-online-subscribe-checkbox":"2.2.4","@ctrip/trip-component-platform-online-trustpilot":"1.0.2","@ctrip/trip-component-platform-online-usp":"3.0.0","@ctrip/trip-component-platform-usp-loading":"4.0.2","@ctrip/trip-component-request":"4.2.4","@ctrip/trip-component-tripui-online-button":"2.0.6","@ctrip/trip-component-ubt":"4.1.4","@ctrip/trip-component-utils":"4.1.6","@ctrip/trip-cookie-sdk":"1.0.1","@ctrip/trip-hotel-koa-middleware":"1.0.0","@types/jest":"26.0.19","@typescript-eslint/eslint-plugin":"^6.19.0","@typescript-eslint/parser":"*","axios":"^0.26.0","babel-jest":"26.6.1","babel-plugin-module-resolver":"4.0.0","bindings":"^1.5.0","blueimp-md5":"^2.19.0","buffer":"^6.0.3","case-sensitive-paths-webpack-plugin":"2.3.0","classnames":"2.2.6","colors":"1.3.2","ctriputil":"0.1.50","dayjs":"^1.11.12","esprima":"4.0.1","gcoord":"^1.0.5","jade":"1.11.0","jade-loader":"0.8.0","jest":"26.6.3","jest-environment-jsdom":"26.6.2","jest-environment-jsdom-global":"2.0.4","jest-localstorage-mock":"2.4.6","koa":"2.5.2","koa-body":"4.0.4","koa-bodyparser":"4.2.1","koa-router":"7.4.0","koa-static":"5.0.0","koa-views":"6.1.4","lodash.clonedeep":"4.5.0","lodash.isequal":"4.5.0","lodash.omit":"4.5.0","node-fetch":"^2.6.6","node-sass":"9.0.0","nodemon":"1.18.7","promise-polyfill":"8.2.0","prop-types":"15.7.2","react":"16.10.2","react-dom":"16.10.2","react-redux":"7.2.0","react-transition-group":"^4.4.5","redux":"4.0.4","redux-thunk":"2.3.0","request":"2.88.0","sass-loader":"13.0.2","source-map-support":"^0.5.19","style-loader":"2.0.0","ts-jest":"26.4.4","typescript":"^4.3.5"},"browserslist":["IE 11"],"husky_off":{"hooks":{"pre-commit":"node script/correctSmartdb.js && node ./bin/smartdb-del-font && lint-staged && npm run jest"}},"lint-staged":{"linters":{"*.js":["eslint --fix","git add"]},"ignore":["dist","node_modules"]}}')},87589:function(e,_,k){const{isMobile:I}=k(28065);e.exports={homePage:{paths:["","home","home/index","w/home"],pageId:"10320668150",qconfig:["showGoogleTapByLocaleAid","showSafariTapByLocaleAid","homepageRecommendHotels","maxChild","useHydrate","searchDisableLoadAnimation","useNewChildPriceSearchBoxText","homePageBackground","isClosebffRequest"]},listNewPage:{paths:["listnew"],pageId:"10320668148",qconfig:["CMACountrySort","CMASite","open_brg_site","isShowSuggestion","localSignInNote","showGoogleTapByLocaleAid","showSafariTapByLocaleAid","mapshowradius","tripcoinsbanner","listPageFilterFixed","aLinkSwitch","termValidDate","mapApiKey","switchFilter","switchFilterLocales","isClosebffRequest","maxChild","diffDisableUA","useHydrate","enableBatchRefreshPolicy","searchDisableLoadAnimation","hotelListPreloadNum","metaPreloadSwitch","detailHtlPolicyControl","isOffDateCheck","useNewChildPriceSearchBoxText","isOpenCheckLocaleChange","hotelListDeduplicateSwitch","metaPriceTypeFilterRemoveEffectSwitch","minimizeSSRDataLocales","EnableDynamicRefresh","dynamicRefreshTimer","dynamicRefreshLocaleWhiteList","imQueryStringSwitch","openHandleOptionId","resetPriceRangeForCurr","DisEnableUpateListPageQid","listScrollSwitch","closeFoldBar","getMarketInfoSSR","preLoadImgList","isSwitchNewFilter","useNewSeoFilterHandler","isSwitchAdDsa","bffNewHost"]},listPage:{paths:["list","w/listpage","w/list"],pageId:"10320668148",qconfig:["CMACountrySort","CMASite","open_brg_site","isShowSuggestion","localSignInNote","showGoogleTapByLocaleAid","showSafariTapByLocaleAid","mapshowradius","tripcoinsbanner","listPageFilterFixed","aLinkSwitch","termValidDate","mapApiKey","switchFilter","switchFilterLocales","isClosebffRequest","maxChild","diffDisableUA","useHydrate","enableBatchRefreshPolicy","searchDisableLoadAnimation","hotelListPreloadNum","metaPreloadSwitch","detailHtlPolicyControl","isOffDateCheck","useNewChildPriceSearchBoxText","isOpenCheckLocaleChange","EnableDynamicRefresh","dynamicRefreshTimer","dynamicRefreshLocaleWhiteList","imQueryStringSwitch","openHandleOptionId","resetPriceRangeForCurr","DisEnableUpateListPageQid","listScrollSwitch","closeFoldBar","getMarketInfoSSR","preLoadImgList","useNewSeoFilterHandler","isSwitchAdDsa"]},metaPage:{paths:["list/searchresults","listpage/searchresults","w/list/searchresults","w/listpage/searchresults"],pageId:"10320668268",qconfig:["CMACountrySort","CMASite","open_brg_site","isShowSuggestion","localSignInNote","showGoogleTapByLocaleAid","showSafariTapByLocaleAid","mapshowradius","tripcoinsbanner","listPageFilterFixed","aLinkSwitch","termValidDate","metaPPCShowCalendar","facebookMessenger","facebookMessengerRetain","mapApiKey","switchFilter","switchFilterLocales","maxChild","useHydrate","searchDisableLoadAnimation","preloadCacheTime","preloadCacheBuffer","hotelListPreloadNum","metaPreloadSwitch","detailHtlPolicyControl","enableBatchRefreshPolicy","isOffDateCheck","useNewChildPriceSearchBoxText","isOpenCheckLocaleChange","metaHpaAids","EnableDynamicRefresh","dynamicRefreshTimer","dynamicRefreshLocaleWhiteList","imQueryStringSwitch","openHandleOptionId","resetPriceRangeForCurr","DisEnableUpateListPageQid","listScrollSwitch","getMarketInfoSSR","preLoadImgList","useNewSeoFilterHandler","isSwitchAdDsa","bffNewHost","isSwitchNewFilter"]},metaNewPage:{paths:["metanew"],pageId:"10320668268",qconfig:["CMACountrySort","CMASite","open_brg_site","isShowSuggestion","localSignInNote","showGoogleTapByLocaleAid","showSafariTapByLocaleAid","mapshowradius","tripcoinsbanner","listPageFilterFixed","aLinkSwitch","termValidDate","metaPPCShowCalendar","facebookMessenger","facebookMessengerRetain","mapApiKey","switchFilter","switchFilterLocales","maxChild","searchDisableLoadAnimation","preloadCacheTime","preloadCacheBuffer","hotelListPreloadNum","metaPreloadSwitch","detailHtlPolicyControl","useHydrate","enableBatchRefreshPolicy","isOffDateCheck","useNewChildPriceSearchBoxText","isOpenCheckLocaleChange","metaPriceTypeFilterRemoveEffectSwitch","metaHpaAids","EnableDynamicRefresh","dynamicRefreshTimer","dynamicRefreshLocaleWhiteList","enableDynamicRefreshMeta","enableDynamicRefreshMetaLocaleWhiteList","dynamicRefreshMetaTimerConf","imQueryStringSwitch","openHandleOptionId","resetPriceRangeForCurr","DisEnableUpateListPageQid","listScrollSwitch","getMarketInfoSSR","preLoadImgList","useNewSeoFilterHandler","isSwitchAdDsa","bffNewHost","isSwitchNewFilter"]},detailPage:{paths:["detail","w/detail","w/detailpage",":CityEnName?-hotel-detail-:HotelID",":CityEnName?-hotel-detailpage-:HotelID",":CityEnName?-hotel-detail-:HotelID/*",":CityEnName?-hotel-detailpage-:HotelID/*",":CityEnName-hotel-review-:HotelID",":CityEnName-hotel-reviewpage-:HotelID",":CityEnName-hotel-review-:HotelID/*",":CityEnName-hotel-reviewpage-:HotelID/*"],pageId:"10320668147",qconfig:["isIBUFrontCashier","open_brg_site","isShowSuggestion","localSignInNote","showGoogleTapByLocaleAid","showSafariTapByLocaleAid","mapshowradius","tripcoinsbanner","termValidDate","baseRoomShowCountByStar","bookAndConfirmCache","seoExcludeLocales","takedetailcurr","takeDetailHotelIdAndRoomId","facebookMessenger","facebookMessengerRetain","mapApiKey","maxChild","switchNewReviewList","expediaCommentSwitch","tripShuffledSwitch","reviewNationalConfig","useHydrate","switchFillHotelIdWhenDetailInitFail","searchDisableLoadAnimation","detailCacheTimeout","seoReturnNormalDetail","detailSubmitRemoveTimer","aheadofRatePlanSwitch","diffDetailUrlCount","isDiffDetailUrlOpen","hotelRoomListBffSwitch","hotelRoomListBffLocaleBlackList","hotelRoomListBffLocaleWhiteList","preloadAbTest","supportReviewPointSort","bookBffSwitch","bookBffLocaleBlackList","bookBffLocaleWhiteList","detailHtlPolicyControl","useNewChildPriceSearchBoxText","OpenXProductWithoutMealInfo","ggZoom","mbZoom","fetchBookAndConfirmForDiff","commonDetailBffSwitch","commonDetailBffLocaleBlackList","commonDetailBffLocaleWhiteList","roomListDoubleRequestSwitch","isNearbyHotelListFromBff","sortRoomlistSwitch","EnableMismatchRoomList"]},mapPage:{paths:["map"],pageId:"10320668154",noAsyncJs:!0,qconfig:["mapApiKey","maxChild","useHydrate","useNewChildPriceSearchBoxText","isSwitchToNewMap"]},mapNewPage:{paths:["mapnew"],pageId:"10320668154",noAsyncJs:!0,qconfig:["mapApiKey","maxChild","useHydrate","useNewChildPriceSearchBoxText","isSwitchToNewMap"]},bookPage:{paths:["bookpage","book"],pageId:"10320668149",qconfig:["isIBUFrontCashier","open_brg_site","tripcoinsbanner","termValidDate","bookAndConfirmCache","useHydrate","useI18nAccountComponentsSDK","retainInfoShowSeconds"]},finishPage:{paths:["complete/:orderid","complete"],pageId:"10320668152",qconfig:["pixelConfig","enablePixel","open_brg_site","NPSPositionUp","NPSPositionUp2","orderPageAppDownloadContent","goNewOrderDetail","mapApiKey","useHydrate","switchNewNPSComponent","orderDetailRefreshTimer"]},npsPage:{paths:["nps","npspage"],pageId:"",getPageId:e=>I(e)?"10650039305":"10650039303",noAsyncJs:!0},brgPage:{paths:["pricematch"],pageId:"10650026833",qconfig:["open_brg_site","useHydrate"],noAsyncJs:!0},orderDetailPage:{paths:["order/hotelorderdetail","newOrderDetail","vieworder","vieworder/:orderid(\\d+)","DomesticBook/ShowOrderDetail.aspx","internationalbook/ShowOrderDetailNew.aspx"],pageId:"10320668151",qconfig:["pixelConfig","enablePixel","open_brg_site","NPSPositionUp","NPSPositionUp2","orderPageAppDownloadContent","goNewOrderDetail","mapApiKey","useHydrate","usejigsawVerificationCheck","switchNewNPSComponent","orderDetailRefreshTimer"]},modifyOrderPage:{paths:["vieworder/modify"],pageId:"10650045052",qconfig:["usejigsawVerificationCheck"]},cancelOrderPage:{paths:["cancelOrder/:orderid(\\d+)","cancelOrder"],pageId:"10650047176",qconfig:["usejigsawVerificationCheck"]},voucherPage:{paths:["viewOrder/voucher","viewOrder/voucherPage","voucher"],pageId:"10650034509",qconfig:["usejigsawVerificationCheck"]},legalPage:{paths:["legal"],pageId:"",noAsyncJs:!0},payFailPage:{paths:["payfail"],pageId:"",noAsyncJs:!0},presalePage:{paths:["presale","presalepage"],pageId:"",noAsyncJs:!0},addReviewsPage:{paths:["","inputReview/index"],pageId:"10320668156",qconfig:["switchNewAddReviewPageInitApi","switchNewAddReviewPageSubmitApi","useHydrate","detailSubmitRemoveTimer"]},finishReviewsPage:{paths:["reviewDone"],pageId:"10650003622",noAsyncJs:!0,qconfig:["switchNewFinishReviewPageApi","useHydrate","detailSubmitRemoveTimer","switchNewNPSComponent"]},emailPage:{paths:["emailpage","email"],pageId:"",noAsyncJs:!0}}},8924:function(e,_,k){"use strict";k.d(_,{I:function(){return I}});const I="UPDATE_DETENTION"},52765:function(e,_,k){"use strict";k.d(_,{L:function(){return C}});var I=k(8924);const C=function detention(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.I?Object.assign({},e,C):e}},20192:function(e,_,k){"use strict";k.d(_,{Z:function(){return Card}});var I=k(94184),C=k.n(I),R=k(9836),j=k(36245),B=k(35469),H=k(12992),U=k(25155),V=k(67294),G=k(39621).default;const getClass=e=>({card:C()("m-".concat(e.type,"Card"),e.direction),img:C()("m-".concat(e.type,"Card_img")),content:C()("m-".concat(e.type,"Card_content")),title:C()("m-".concat(e.type,"Card_title")),starBox:C()("m-".concat(e.type,"Card_level")),star:C()("m-".concat(e.type,"Card_").concat(1==e.levelType?"star":2==e.levelType?"diamond":"circle"," minNoiseStar")),score:C()("m-".concat(e.type,"Card_score")),price:C()("m-".concat(e.type,"Card_price"))});class View extends G{constructor(e){super(e)}render(){const{state:e}=this;return V.createElement("div",{className:"m-card",onClick:e.callback},"base"===e.type?(e=>{var _;let k=(0,H.formatNumber)((0,U.rq)(void 0)?2*Number(null==e||null===(_=e.score)||void 0===_?void 0:_.toString().replace(",",".")):null==e?void 0:e.score,{short:!0,digit:1,digitMin:1})||0;return V.createElement("div",{className:getClass(e).card},V.createElement("section",{className:getClass(e).img},V.createElement(R.Z,{src:e.imgUrl,isOffLazyLoad:!0,errorSrc:e.errorUrl,width:"row"===e.direction?88:280,height:"row"===e.direction?88:210})),V.createElement("section",{className:getClass(e).content},V.createElement("h3",{className:getClass(e).title},e.name),V.createElement("div",{className:getClass(e).starBox},Array(e.levelValue).fill().map(((_,k)=>V.createElement(j.Z,{type:1==e.levelType?"ic_new_star":2==e.levelType?"ic_new_diamond":"ic_new_circle",key:k,className:getClass(e).star})))),V.createElement("div",{className:getClass(e).score},Number(e.score)?V.createElement("span",{className:"score"},V.createElement("em",{className:"number"},"10.0"===k||"10,0"===k?10:k),V.createElement("em",{className:"total"},"/",(0,U.rq)(void 0)?10:e.maxScore)):V.createElement("span",null,(0,B.I)("resx.onlinehotelresource.hotel_reviews_label_noreview_v2")),V.createElement("span",{className:"rating"},e.scoreDesc)),e.price&&V.createElement("div",{className:getClass(e).price},V.createElement("span",{className:"price"},e.price))))})(e):(e=>V.createElement("div",{className:"m"},V.createElement("section",{className:""},V.createElement(R.Z,{src:e.imgUrl,isOffLazyLoad:e.isOffLazyLoad,errorSrc:e.errorUrl,width:"row"===e.direction?80:280,height:"row"===e.direction?80:210})),V.createElement("section",{className:""},e.content)))(e))}}class Card extends View{constructor(e){super(e),this.state={score:e.score||0,maxScore:e.maxScore||5,price:e.price||!1,type:e.type||"base",name:e.name||"",errorUrl:e.errorUrl||"",scoreDesc:e.scoreDesc||"",levelType:e.levelType||"1",levelValue:e.levelValue||0,unit:e.unit||"$",imgUrl:e.imgUrl||"",direction:e.direction||"row",callback:e.callback}}}},67928:function(e,_,k){"use strict";k.r(_),k.d(_,{continueBookVisible:function(){return continueBookVisible},default:function(){return ContinueBook}});var I=k(67294),C=k(19045),R=k(78320),j=k(36245),B=k(54891),H=k(53956),U=k(9836),V=k(89205),G=k(16234),q=k(15393),z=k(25155),J=k(67294);const continueBookVisible=e=>C.Xb.get(R.yR);function ContinueBook(){const{$localeDate:e,$translatePlural:_,$translate:k,$log:Q,ctx:ee}=(0,I.useContext)(B.P),te=(0,z.kH)({ctx:ee}),[ne,re]=(0,I.useState)({top:0,right:0}),[oe,ie]=(0,I.useState)(!0);(0,I.useEffect)((()=>{let e=document.querySelector(".search-btn-wrap"),{right:_,bottom:k}=(null==e?void 0:e.getBoundingClientRect())||{},I=document.body.clientWidth;const C=I<=768?8:24;re(I-_>=320+C?{top:k+60+window.scrollY,right:I-_-C-320}:{top:k+60+window.scrollY,right:C});try{Q({logKey:"ibu_htl_".concat((0,V.h8)(),"_show_continue_book"),logDesc:"version info",logValue:{version:"B"}})}catch(e){}}),[Q,te]);let ae=C.Xb.get(R.yR);if(!te||!oe||!ae)return null;const{hotelName:le,roomName:se,checkIn:ce,checkOut:ue,hotelId:de,price:pe,roomNum:he,pic:fe,requestData:me,ServerData:ge,timeOffset:ve,guests:ye}=ae,be=(0,q.Z)(ee);let _e=(0,G.Lf)({checkIn:ce,checkOut:ue,timeOffset:ve,maxNights:be});if(!_e||!ce||!me&&!ge||_e.checkInStr.replace(/\//gi,"-")!==ce.replace(/\//gi,"-"))return C.Xb.remove(R.yR),null;return J.createElement("div",{className:"continue-book-wrap",style:ne,onClick:()=>{try{Q({logKey:"ibu_htl_".concat((0,V.h8)(),"_click_continue_book"),logDesc:"version info",logValue:{version:te?"B":"A"}})}catch(e){}ge&&C.y7.setDirect("BOOKANDCONFIRM_PARAM",{ServerData:ge,checkIn:ce,checkOut:ue,hotelId:de}),(0,H.R)(me)}},J.createElement("div",{className:"lt-img"},J.createElement(U.Z,{src:fe})),J.createElement("div",{className:"rt-info"},J.createElement("div",{className:"book-title"},J.createElement("h3",null,k("key.hotel.home.page.back.to.fill.order.page.title")),J.createElement(j.Z,{type:"ic_new_more_line1",className:"arrow"})),J.createElement("p",{className:"hotel-title"},le),J.createElement("p",{className:"room-title"},se),J.createElement("p",{className:"room-info"},e("mdShortString",ce)," -"," ",e("mdShortString",ue)," ",J.createElement("span",{className:"shu"}," | ")," ",_("key.hotel.online.homepage.searchbox.rooms",he)," ",_("key.hotel.online.homepage.searchbox.guests",ye)),J.createElement("p",{className:"price"},pe)),J.createElement(j.Z,{type:"ic_new_close_line",className:"close",onClick:e=>(e=>{e.stopPropagation(),C.Xb.remove(R.yR),ie(!1)})(e)}))}},78320:function(e,_,k){"use strict";k.d(_,{yR:function(){return I},_7:function(){return C},Th:function(){return R},nR:function(){return j},qh:function(){return B},v3:function(){return H},Ol:function(){return U},Oc:function(){return V},Lh:function(){return G},Ag:function(){return q},$r:function(){return z}});const I="CONTINUE_BOOK_INFO",C="ibu_hotel_search_date",R="15214",j="ibu_hotel_search_crn_guest",B="ibu_hotel_search_target",H={UNCHECKED:0,CHECKED:1},U={N:"N"},V={SUBMIT_TOAST_KEY:"trip_hotel_brg_frame_submit_toast",SUBMIT_TOAST_FAIL_KEY:"trip_hotel_brg_frame_submit_toast_fail",CLAIM_FAILED_KEY:"key.hotel.online.crosssell.component.bookcta.claim.failed",GOLDEN_VIP_NOTIFICATION:"golden_vip_notification",ADD_TRIPCOINS:"add_tripcoins",MEMBERSHIP_SUCCESS_KEY:"key.hotel.detail.membership.success",CHILDREN_MOST_KEY:"key.hotel.metapage.children.most.toast",SEND_EMAIL_SUCCESS:"send_email_success",REWARD_CLAIM_FAILURE:"reward_claim_failure",CHILDREN_MOST_88801001_KEY:"key.88801001.hotel.metapage.children.most.toast",NPS_PLEASE_RATE_KEY:"key.hotel.nps.please.rate"},G={CHECK_CLAIMED:"check_claimed"},q={star:"16",rate:"6",breakfast:"5",bookPolicy:"94",bedType:"4",payType:"7"},z=" • "},68361:function(e,_,k){"use strict";k.d(_,{z:function(){return I},j:function(){return C}});const I={LOCATION:"1318",PRICE:"15",STAR:"16",RATE:"6",POPULAR:"85",BRAND:"52"},C={PRICE_TYPE:"PRICE_TYPE",SORT:"SORT",PRICE:"PRICE",POPULAR:"POPULAR"}},94499:function(e,_,k){"use strict";k.d(_,{Z:function(){return C}});var I=k(67294);const C=(0,I.createContext)({})},54482:function(e,_,k){"use strict";k.d(_,{fo:function(){return H.Z},zy:function(){return connectFilter},ZP:function(){return filter_provider}});var I=k(67294),C=k(54891),R=k(68661),j=k(89205),B=k(47419),H=k(94499),U=k(48712),V=k(22122),G=k(67294);const connectFilter=e=>function(_){return class extends G.Component{render(){return G.createElement(H.Z.Consumer,null,(k=>G.createElement(_,(0,V.Z)({},this.props,e(k)))))}}};var q=k(67294);const{classiFicationFilter:z,getChangedSelected:J,getSlectedTagList:Q,ifFilterIdInItems:ee}=U.Z,FilterProvider=e=>{let{children:_,changeCb:k}=e;const{filters:U,filterMap:V,urlChoosedFilters:G,amountShowTypes:te,sortFilterItems:ne,roomNum:re,checkIn:oe,checkOut:ie,isShowWalkDrive:ae}=(0,R.v9)((e=>{const{originFilterData:_,urlChoosedFilters:k,isShowWalkDrive:I}=e.initData,{roomNum:C,checkIn:R,checkOut:j}=e.searchCondition,{filters:B,filterMap:H,sortFilterItems:U,amountShowTypes:V}=_||{};return{filters:B,filterMap:H,urlChoosedFilters:k,sortFilterItems:U,amountShowTypes:V,roomNum:C,checkIn:R,checkOut:j,isShowWalkDrive:I}})),[le,se]=(0,I.useState)(ae),[ce,ue]=(0,I.useState)(G),{ctx:de,$currency:pe}=(0,I.useContext)(C.P),he=(0,I.useRef)(!1),fe=(null==U?void 0:U.length)?z({filters:U,selectedFilterList:ce,amountShowTypes:te,sortFilterItems:ne,searchData:{roomNum:re,checkIn:oe,checkOut:ie},currency:pe,isShowWalkDrive:le}):{generalFilters:[]},getChangedSelected=e=>{let{type:_="",value:k,defaultSelected:I}=e;return J({type:_,value:k,defaultSelected:I,selectedFilterList:ce,roomNum:re,checkIn:oe,checkOut:ie,renderViewFilters:fe,filters:U,filterMap:V})},me=(0,I.useMemo)((()=>Q({selectedFilterList:ce,renderViewFilters:fe,filterMap:V,filters:U,ctx:de})),[ce,U]),replaceAllSelected=e=>{ue(e)};return(0,I.useEffect)((()=>{null==k||k(ce,he.current),he.current=!0}),[ce]),q.createElement(H.Z.Provider,{value:{replaceAllSelected:replaceAllSelected,getChangedSelected:getChangedSelected,onChange:e=>{let{type:_="",value:k}=e;const I=getChangedSelected({type:_,value:k});ue(I),(0,j.ap)("ibu_htl_online_list_new_filter_item_change_event",{type:_,value:k,locale:B.default.getByKey("cargo.locale")})},clearCurTypeFilter:e=>{var _;let{targetFilterId:k=null,curFilterItem:I=null}=e;const C=I||(null==fe||null===(_=fe.generalFilters)||void 0===_?void 0:_.find((e=>ee({targetFilterId:k,filterItem:e})))),R=ce.filter((e=>!ee({targetFilterId:e.filterId,filterItem:C})));replaceAllSelected(R)},clearAllFilters:()=>{const e=ce.filter((e=>"17"===e.type||"80"===e.type||"29"===e.type));ue(e)},selectedFilterList:ce,slectedTagList:me,updateIsShowWalkDrive:se,renderViewFilters:fe}},_)},filter_provider=e=>{let{isSwitchNewFilter:_,children:k,changeProvideSelectedFilter:I}=e;return _?q.createElement(FilterProvider,{changeCb:I},k):k}},48712:function(e,_,k){"use strict";k.d(_,{Z:function(){return Q}});var I={};k.r(I),k.d(I,{classiFicationFilter:function(){return classiFicationFilter},getChangedSelected:function(){return getChangedSelected},getCorrectedSelectedFilterList:function(){return getCorrectedSelectedFilterList},getCurCurrencyPriceRange:function(){return getCurCurrencyPriceRange},getFactor:function(){return getFactor},getPriceRange:function(){return getPriceRange},getRawFilterItems:function(){return getRawFilterItems},getSelectedFactor:function(){return getSelectedFactor},getSimplifyItem:function(){return getSimplifyItem},getSlectedTagList:function(){return getSlectedTagList},handleFilterItemSelect:function(){return handleFilterItemSelect},ifFilterIdInItems:function(){return ifFilterIdInItems},mutuallyExclusiveJudgment:function(){return mutuallyExclusiveJudgment},xhfGetFilterItemByPath:function(){return xhfGetFilterItemByPath}});var C=k(96156),R=k(89205),j=k(47419),B=k(27484),H=k.n(B),U=k(74019),V=k(13863),G=k(15458),q=k(12992),z=k(24567),J=k(68361);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,C.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const ifFilterIdInItems=e=>{var _;let{targetFilterId:k,filterItem:I}=e;return(null==I||null===(_=I.list)||void 0===_?void 0:_.length)>0?null==I?void 0:I.list.some((e=>ifFilterIdInItems({targetFilterId:k,filterItem:e}))):(null==I?void 0:I.filterId)===k},getRawFilterItems=e=>{let{targetFilterId:_,filterListData:k}=e;return k.find((e=>{var k,I;return(null==e||null===(k=e.data)||void 0===k?void 0:k.filterID)===_?e:(null==e||null===(I=e.subItems)||void 0===I?void 0:I.length)>0?getRawFilterItems({targetFilterId:_,filterListData:null==e?void 0:e.subItems}):void 0}))},getSimplifyItem=(e,_,k)=>{const{data:I,subItems:C,operation:R,extra:j}=e,{title:B,filterID:H,value:U,type:V}=I;let G=null;return(null==C?void 0:C.length)||(G="80"===V?_.find((e=>e.value===U&&"80"===e.type)):_.find((e=>{const{filterId:_}=e;return _===H}))),_objectSpread(_objectSpread(_objectSpread({title:B,text:B,filterId:H,mode:R.mode,nodeType:j.nodeType,extraInfo:j.extraInfo,value:U,status:G?1:0},k?{isShow:!0}:{}),(null==j?void 0:j.starType)?{starType:null==j?void 0:j.starType}:{}),{},{list:(null==C?void 0:C.length)?C.map((e=>getSimplifyItem(e,_,!1,H))):[]})},getCurCurrencyPriceRange=(e,_)=>{const k=_||(0,U.zC)();return(null==e?void 0:e.find((e=>e.currency===k)))||{}},getFactor=e=>{const{roomNum:_,checkIn:k,checkOut:I}=e;return(_||1)*(H()(I).diff(H()(k),"days")||1)},getSelectedFactor=e=>{var _;let{selectedFilterList:k,searchData:I}=e;const{filterId:C}=k.find((e=>"80"===e.type))||{},R=null==C||null===(_=C.split("|"))||void 0===_?void 0:_[1];return"1"===R||"3"===R?getFactor(I):1},getDefaultPriceType=e=>{var _;let{selectedFilterList:k,amountShowTypesFilters:I}=e,C=null==I?void 0:I.map((e=>getSimplifyItem(e,k)));return(null===(_=C)||void 0===_?void 0:_.every((e=>0===e.status)))&&(C=C.map((e=>{var _,k,I;return"1"===(null==e||null===(_=e.filterId)||void 0===_||null===(k=_.split("|"))||void 0===k||null===(I=k.slice(-1))||void 0===I?void 0:I[0])?_objectSpread(_objectSpread({},e),{},{status:1}):e}))),C},getFilterGroupData=e=>{let{list:_=[],initData:k=null,selectedFilterList:I,searchData:C,currency:R}=e;return _.reduce(((e,_)=>{var k;const{type:j}=_.data;(null===(k=e.generalFilters)||void 0===k?void 0:k.length)||(e.generalFilters=[]);let B={};return B=j===J.z.PRICE?(e=>{var _;let{cur:k,selectedFilterList:I,searchData:C,currency:R}=e;const j=k.subItems.slice(0,k.subItems.length-1),B=getSelectedFactor({searchData:C,selectedFilterList:I}),{maxPrice:H=1e3,step:U=10}=getCurCurrencyPriceRange(null==k||null===(_=k.extra)||void 0===_?void 0:_.fullCurrencyPrices,R),{value:V}=I.find((e=>"15"===e.type))||{};let G=0,q=-1;if(V){const[e,_]=V.split("|");G=+e,q="max"===_?-1:+_}return{title:k.data.title,priceBarStep:U*B,priceBarMin:0,priceBarMax:H*B,priceLow:G,priceHigh:q,factor:B,filterId:k.data.filterID,priceRangeList:j.map((e=>_objectSpread(_objectSpread({},e.extra.priceRange),{},{filterId:e.data.filterID})))}})({pre:e,cur:_,selectedFilterList:I,searchData:C,currency:R}):getSimplifyItem(_,I),e.generalFilters=[...e.generalFilters,B],e}),k||{})},classiFicationFilter=e=>{var _,k,I;let{filters:C,selectedFilterList:R,sortFilterItems:j,amountShowTypes:B,searchData:H,currency:U,isShowWalkDrive:V}=e;return _objectSpread(_objectSpread({},getFilterGroupData({list:C[0].subItems,selectedFilterList:R,searchData:H,currency:U})),{},{amountShowTypes:getDefaultPriceType({amountShowTypesFilters:(null==B||null===(_=B[0])||void 0===_?void 0:_.subItems)||[],selectedFilterList:R}),sortFilters:null==j||null===(k=j[0])||void 0===k||null===(I=k.subItems)||void 0===I?void 0:I.map((e=>{var _,k;const I=(null===(_=e.data)||void 0===_?void 0:_.filterID)!==z.i6||(null===(k=e.data)||void 0===k?void 0:k.filterID)===z.i6&&V;return getSimplifyItem(e,R,I)}))})},checkNotEmpty=e=>"string"==typeof e?e.length>0:"number"==typeof e?e>0:void 0!==e,xhfGetFilterItemByPath=(e,_,k)=>{let I={};const C=_[e];if(void 0!==C){var R,j;const e=null!==(R=C.paths)&&void 0!==R?R:[];null==e||null===(j=e[0])||void 0===j||j.forEach(((e,_)=>{var C,R;0===_?I=k[e]:I=(null===(C=I)||void 0===C?void 0:C.subItems)?null===(R=I)||void 0===R?void 0:R.subItems[e]:{}}))}return I},getMutexIds=(e,_,k,I)=>{let C=[];const R=k[e];if(void 0!==R){var j,B;const e=null!==(j=null===(B=R.paths)||void 0===B?void 0:B[0])&&void 0!==j?j:[];let k={};e.forEach(((e,R)=>{var j,B,H,U,V;0===R?k=I[e]:k=(null===(U=k)||void 0===U?void 0:U.subItems)?null===(V=k)||void 0===V?void 0:V.subItems[e]:{};(null===(j=k)||void 0===j?void 0:j.operation)&&void 0!==(null===(B=k)||void 0===B||null===(H=B.operation)||void 0===H?void 0:H[_])&&(C=C.concat(k.operation[_]))}))}return C},getSingleSelectionRootFilterId=(e,_,k)=>{let I;if(e&&void 0!==_[e]){var C,R;let j;const B=null===(C=_[e])||void 0===C||null===(R=C.paths)||void 0===R?void 0:R[0];null==B||B.forEach(((e,_)=>{var C,R,B,H;if(0===_)j=k[e];else{var U,V,G,q,z;const _=(null===(U=j)||void 0===U?void 0:U.subItems)?null===(V=j)||void 0===V?void 0:V.subItems[e]:{},k=null===(G=j)||void 0===G||null===(q=G.data)||void 0===q?void 0:q.filterID,C=k&&"3319"!==k;var J,Q;if(2===(null==_||null===(z=_.extra)||void 0===z?void 0:z.nodeType)&&!I&&C)I=null===(J=j)||void 0===J||null===(Q=J.data)||void 0===Q?void 0:Q.filterID;j=_}const ee=null===(C=j)||void 0===C||null===(R=C.data)||void 0===R?void 0:R.filterID,te=ee&&"3319"!==ee;1===(null===(B=j)||void 0===B||null===(H=B.operation)||void 0===H?void 0:H.mode)&&!I&&te&&(I=ee)}))}return I},xhfGetCategoryNodeById=(e,_,k)=>{let I;if(e&&void 0!==_[e]){var C;const R=_[e],j=null!==(C=null==R?void 0:R.paths)&&void 0!==C?C:[],B=function findByPath(){let e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _.forEach(((I,C)=>{if(0===C)e=k[I];else if(C!==_.length-1){var R,j;e=(null===(R=e)||void 0===R?void 0:R.subItems)?null===(j=e)||void 0===j?void 0:j.subItems[I]:{}}})),e};for(let e=0;e<j.length;e++){const _=B(j[e]);if(_){I=_;break}}}return I},mutuallyExclusiveJudgment=(e,_,k,I)=>{const C=[...e];if(_){const e=getSingleSelectionRootFilterId(_,k,I);if(checkNotEmpty(e))return!0;const R=getMutexIds(_,"otherMutexIds",k,I);return C.some((e=>{const _=getMutexIds(e,"selfMutexIds",k,I);let C=!1;for(let e=0,k=_.length;e<k;e++)if(R.includes(_[e])){C=!0;break}return C}))}},handleFilterItemSelect=(e,_,k,I)=>{if(!_)return e;if(void 0===k[_])return e;let C=[];return e.includes(_)?C=e.filter((e=>e!==_)):(C=((e,_,k,I)=>{let C=[...e];if(_){const e=getSingleSelectionRootFilterId(_,k,I);if(C=checkNotEmpty(e)?C.filter((_=>{var C,R,j;return(null!==(C=getSingleSelectionRootFilterId(_,k,I))&&void 0!==C?C:null===(R=xhfGetCategoryNodeById(_,k,I))||void 0===R||null===(j=R.data)||void 0===j?void 0:j.filterID)!==e})):C.filter((e=>{var C;const R=xhfGetFilterItemByPath(e,k,I);if(2===(null==R||null===(C=R.extra)||void 0===C?void 0:C.nodeType)){var j,B;const C=xhfGetCategoryNodeById(e,k,I),R=xhfGetCategoryNodeById(_,k,I);return(null==C||null===(j=C.data)||void 0===j?void 0:j.filterID)!==(null==R||null===(B=R.data)||void 0===B?void 0:B.filterID)}return!0})),C.length){const e=getMutexIds(_,"otherMutexIds",k,I);C=C.filter((_=>{const C=getMutexIds(_,"selfMutexIds",k,I);let R=!1;for(let _=0,k=C.length;_<k;_++)if(e.includes(C[_])){R=!0;break}return!R}))}}return C})(e,_,k,I),C.push(_)),C},getPriceRange=(e,_,k,I)=>{const C=j.default.getByKey("cargo.locale",I),R=(0,U.zC)(I),B={ctx:I,digitTop:0,zeroNeedCurrency:!0},H=(0,q.formatCurrency)(R,e,B),V=(0,q.formatCurrency)(R,_,B);if(_<0){const _=(0,q.formatCurrency)(R,k,B);return(0,G.KG)(C)?e>=k?"".concat(_," <"):e<=0?"+".concat((0,q.formatCurrency)(R,k,B)," - ").concat(H):"".concat(H," <"):e>=k?"> ".concat(_):e<=0?"".concat(H," - ").concat((0,q.formatCurrency)(R,k,B),"+"):"> ".concat(H)}return(0,G.KG)(C)?"".concat(V," - ").concat(H):"".concat(H," - ").concat(V)},getSlectedTagList=e=>{let{selectedFilterList:_,renderViewFilters:k,filterMap:I,filters:C,ctx:R}=e;return _.reduce(((e,_)=>{const{type:j,filterId:B}=_;if("15"===j){var H;const{priceLow:I,priceHigh:C,priceBarMax:j}=(null==k||null===(H=k.generalFilters)||void 0===H?void 0:H.find((e=>(null==e?void 0:e.filterId)===J.z.PRICE)))||{};return-1===C&&0===I?e:[...e,_objectSpread(_objectSpread({},_),{},{text:getPriceRange(I,C,j,R)})]}if("17"!==j&&"80"!==j&&"29"!==j&&"19"!==j){const{data:k}=xhfGetFilterItemByPath(B,I,C)||{};return[...e,_objectSpread(_objectSpread({},_),{},{text:null==k?void 0:k.title})]}return e}),[])},getChangedSelected=e=>{let{type:_="",value:k,defaultSelected:I,selectedFilterList:C,roomNum:R,checkIn:j,checkOut:B,renderViewFilters:H,filters:U,filterMap:G}=e,q=(0,V.I)(I||C);if(_===J.j.PRICE_TYPE){const{value:e,filterId:_}=k,{value:I}=C.find((e=>"80"===e.type)),U="1",V=getFactor({roomNum:R,checkIn:j,checkOut:B}),{priceHigh:G,priceLow:z}=H.generalFilters.find((e=>e.filterId===J.z.PRICE));let Q=1;e===U&&I!==U?Q=V:e!==U&&I===U&&(Q=1/V),q=q.map((k=>"80"===k.type?{filterId:_,type:"80",value:e}:1!==Q&&"15"===k.type?{filterId:"15|Range",type:"15",value:"".concat(z*Q,"|").concat(G>=0?G*Q:-1)}:k))}else if(_===J.j.PRICE||"15"===(null==k?void 0:k.type)){let{priceLow:e,priceHigh:I}=k;_||(e=0,I=-1);const C=q.find((e=>"15"==e.type)),R={filterId:"15|Range",type:"15",value:"".concat(e,"|").concat(I>-1?I:"max")};q=0===(null==k?void 0:k.priceLow)&&-1===(null==k?void 0:k.priceHigh)?q.filter((e=>"15"!==e.type)):C?q.map((e=>"15"===e.type?R:e)):[...q,R]}else if(_===J.j.SORT){const{filterId:e,value:_}=k,I={filterId:e,type:"17",value:_};q=q.map((e=>"17"===e.type?I:e))}else{const e=handleFilterItemSelect(q.reduce(((e,_)=>"15"!==_.type?[...e,_.filterId]:e),[]),k.filterId,G,U).map((e=>xhfGetFilterItemByPath(e,G,U))),_=q.filter((e=>"15"===e.type||"17"===e.type||"29"===e.type||"80"===e.type));q=[..._,...e.reduce(((e,_)=>{const{data:k}=_||{};if(k){const{filterID:_,type:I,value:C,title:R}=k||{};return[...e,{filterId:_,type:I,value:C,title:R,text:R}]}return e}),[])]}return q},getCorrectedSelectedFilterList=e=>{let{newSelectedFilterList:_=[],isSupportWalkDriveSort:k=!1}=e;return _.map((e=>k||"17|12"!==e.filterId?e:_objectSpread(_objectSpread({},e),{},{type:"17",filterId:"17|1",value:"1"})))};function manager_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function manager_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?manager_ownKeys(Object(k),!0).forEach((function(_){(0,C.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):manager_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const Q=manager_objectSpread({},Object.keys(I).reduce(((e,_)=>{return manager_objectSpread(manager_objectSpread({},e),{},{[_]:(k=I[_],function(){try{return k(...arguments)}catch(e){throw j.default.data&&(0,R.ap)("ibu_htl_online_list_new_filter_item_error_event",{msg:e,locale:j.default.getByKey("cargo.locale")}),e}})});var k}),{}))},80027:function(e,_,k){"use strict";k.d(_,{D:function(){return getPriceRange},Z:function(){return J}});var I,C=k(64337),R=k(12992),j=k(94184),B=k.n(j),H=k(47419),U=k(89205),V=k(68661),G=k(15458),q=k(39621).default,z=k(67294);let getPriceRange=(e,_,k,I,C)=>{const j=H.default.getByKey("cargo.locale",C),B=I,U={ctx:C,digitTop:0,zeroNeedCurrency:!0},V=(0,R.formatCurrency)(B,e,U),q=(0,R.formatCurrency)(B,_,U);if(_<0){const _=(0,R.formatCurrency)(B,k,U);return(0,G.KG)(j)?e>=k?"".concat(_," <"):e<=0?"+".concat((0,R.formatCurrency)(B,k,U)," - ").concat(V):"".concat(V," <"):e>=k?"> ".concat(_):e<=0?"".concat(V," - ").concat((0,R.formatCurrency)(B,k,U),"+"):"> ".concat(V)}return(0,G.KG)(j)?"".concat(q," - ").concat(V):"".concat(V," - ").concat(q)},J=(0,V.$j)((e=>{var _;return{searchCondition:e.searchCondition,priceFilter:null==e||null===(_=e.renderFilters)||void 0===_?void 0:_.priceFilter}}))(I=class priceQuickChoose extends q{constructor(e){var _,k;super(e),_=this,this.adjustPriceRange=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const k=(0,C.zC)(_.ctx),I=_.state.priceRange.map((I=>{var C;const R=I.minPriceRange*e,j=-1===I.maxPriceRange?-1:I.maxPriceRange*e,B=null===(C=_.props.priceFilter)||void 0===C?void 0:C.priceBarMax;return{minPriceRange:R,maxPriceRange:j,priceRangeShow:getPriceRange(R,j,B,k,_.ctx)}})),R=_.getSelectedPriceRange(I);_.setState({priceRange:I,selectedBtn:R})},this.getSelectedPriceRange=e=>{const{priceLow:_,priceHigh:k}=this.props.priceFilter;return e.findIndex((e=>e.minPriceRange===_&&e.maxPriceRange===k))},this.priceRangeClick=e=>{const{selectedBtn:_,priceRange:k}=this.state,I=e!==_;var C,R,j,B;(this.setState({selectedBtn:I?e:-1}),this.props.onChange({priceLow:I?k[e].minPriceRange:0,priceHigh:I?k[e].maxPriceRange:-1}),I)&&(0,U.NW)("htl_t_online_list_filter_pricerange_click",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),cityid:null!==(C=null===(R=this.props.searchCondition)||void 0===R?void 0:R.cityId)&&void 0!==C?C:-1,minPrice:null===(j=k[e])||void 0===j?void 0:j.minPriceRange,max_price:null===(B=k[e])||void 0===B?void 0:B.maxPriceRange,position:this.getPositionName(H.default.getByKey("pageName"))})},this.state={priceRange:(null===(k=this.props.priceFilter)||void 0===k?void 0:k.priceRangeList)||[],selectedBtn:-1}}UNSAFE_componentWillMount(){const e=H.default.getByKey("initData.originPriceInfo.originPriceBarMax"),_=this.props.priceFilter.priceBarMax,k=this.getFactor(e,_);this.adjustPriceRange(k)}componentDidUpdate(e){var _,k,I,R,j;(0,C.Xy)(e.priceFilter,this.props.priceFilter)||(0,C.Xy)(this.props.list,e.list)?(0,C.Xy)(null===(_=e.priceFilter)||void 0===_?void 0:_.priceLow,null===(k=this.props.priceFilter)||void 0===k?void 0:k.priceLow)&&(0,C.Xy)(null===(I=e.priceFilter)||void 0===I?void 0:I.priceHigh,null===(R=this.props.priceFilter)||void 0===R?void 0:R.priceHigh)||this.setState({selectedBtn:this.getSelectedPriceRange(this.state.priceRange)}):this.adjustPriceRange(null===(j=this.props.priceFilter)||void 0===j?void 0:j.factor)}getPositionName(e){return"mapPage"===e?"map":"mapNewPage"===e?"maplayer":"list"}getFactor(e,_){var k;return"number"==typeof e&&"number"==typeof _&&0!==e?_/e:null===(k=this.props.priceFilter)||void 0===k?void 0:k.factor}render(){const{selectedBtn:e,priceRange:_}=this.state;return z.createElement(z.Fragment,null,(null==_?void 0:_.length)>0?z.createElement("div",{className:"price-quick-choose"},_.map(((_,k)=>z.createElement("div",{key:k,className:B()("price-quick-choose-btn",{"btn-select":k===e}),onClick:()=>this.priceRangeClick(k)},_.priceRangeShow)))):null)}})||I},24567:function(e,_,k){"use strict";k.d(_,{Wj:function(){return I},L7:function(){return C},sF:function(){return R},i6:function(){return j}});const I={STARRATING:"star",MEALS:"breakfast",PAYMENT:"payType",BEDTYPE:"bedType",BOOKPOLICY:"bookPolicy",BOOKABLE:"bookable",DISCOUNTS:"discount",GuestRating:"rate",HEALTH:"health",POPULARFILTERS:"popularFilters",BRAND:"brand",ZONES:"zone",CITYS:"cityId",PRECITYS:"preCityInfo",METROS:"metro",ROOMNUM:"roomNum",LANDMARKS:"landmark",AIRPORTANDRAILWAYSTATION:"airportTrainstation",AMENITIES:"amenty",LOCATION:"location",FEATURES:"feature",CATEGORYS:"category",PRICERANGE:"priceRange",PRICETYPE:"priceType",HOTAREA:"hotArea",AREAS:"areas",FilterProperty:"filterProperty"},C={normal:"NORMAL",recommend:"TRIP_RECOMMEND",meta:"META_RECOMMEND",map:"MAP",meta_map:"META_MAP"},R="31",j="17|12"},50030:function(e,_,k){"use strict";k.d(_,{fp:function(){return genInitFilterCondition},ng:function(){return q}});var I=k(96156),C=k(47419),R=k(83453),j=k(20355),B=k(72427),H=k(23026),U=(k(33481),k(63732),k(24567));function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const V={stars:"star",rates:"rate",brands:"brand",amenties:"amenty",breakfasts:"breakfast",priceTypes:"priceType",priceFilter:"priceRange",payTypes:"payType",bedTypes:"bedType",bookables:"bookable",bookPolicies:"bookPolicy",discount:"discount",zones:"zone",landmarks:"landmark",airportTrainstations:"airportTrainstation",metros:"metro",locations:"location",categorys:"category",features:"feature",citys:"cityId",quickFilter:"popularFilters",hotArea:"hotArea",areas:"areas"},G={stars:"starRating",rates:"commentRating",brands:"brand",amenties:"facility",breakfasts:"breakfast",priceTypes:"priceType",priceFilter:"price",payTypes:"payType",bedTypes:"bed",bookables:"bookable",bookPolicies:"bookPolicies",discount:"discount",zones:"zone",landmarks:"landmark",airportTrainstations:"airportTrainstation",metros:"metro",locations:"location",categorys:"categorys",features:"feature",citys:"cityId",quickFilter:"popularFilters",hotArea:"hotArea",areas:"areas"},genInitFilterCondition=e=>{let{filterInfo:_={}}=e||C.default.getByKey("initData")||{},k=Object.keys(_),I=R.Z,U=j.Z;return k.length?(k.filter((e=>V[e])).forEach((e=>{let k=V[e],C=(0,B.Z)(R.Z[k],"removeDispatch",null),j="".concat("metros"===e?"lineList":"list");I[k]=_[e]?Object.assign(_[e],{removeDispatch:C}):"metros"===e?{lineList:[],removeDispatch:C}:{list:[],removeDispatch:C},!I[k][j]&&(I[k][j]=[]),"stars"!==e||H.Z?"priceFilter"===e&&(I[k]=_objectSpread(_objectSpread({},_[e]),{},{removeDispatch:C})):I[k][j]=I[k][j].map((e=>({text:"",value:e.value,status:e.status,filterId:e.filterId,type:e.type,subType:e.subType}))).sort(((e,_)=>e.value-_.value))})),k.filter((e=>G[e])).forEach((e=>{let k=G[e];if(_[e])if("metros"===e)U[k]=[],_[e].lineList.forEach((e=>{e.siteList.forEach((e=>{1===e.status&&U[k].push({filterId:e.filterId,type:e.type,value:e.value,subType:e.subType})}))}));else if("priceFilter"===e){const{priceLow:I,priceHigh:C}=_[e];if(-1!=C){const e={filterId:"15|Range",type:"15",subType:"2"};e.value=I+"|"+(-1==C?"max":C),U[k]=[e]}}else U[k]=[],_[e].list.forEach((e=>{1===e.status&&U[k].push({filterId:e.filterId,type:e.type,value:e.value,subType:e.subType})}))})),{result:I,filters_result:U}):{result:I,filters_result:U}};function getDaysBetween(e,_){var k=Date.parse(e),I=Date.parse(_);return k>I?0:k==I?1:(I-k)/864e5}const removeALLFilters=e=>{const _=e;return Object.keys(_.generalFilters).forEach((e=>{var k,I;"41"==e?null===(k=_.generalFilters[41])||void 0===k||k.lineList.forEach((e=>{var _;e.status=0,null===(_=e.siteList)||void 0===_||_.forEach((e=>{e.status=0}))})):null===(I=_.generalFilters[e].list)||void 0===I||I.forEach((e=>{e.status=0}))})),_.quickFilters.list.forEach((e=>{e.status=0})),Object.assign(_.priceFilter,{priceHigh:-1,priceLow:0}),_},q=function handleChoosedFilters(e){var _,k;let I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],R=arguments.length>3&&void 0!==arguments[3]&&arguments[3],j=arguments.length>4&&void 0!==arguments[4]&&arguments[4],B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},H=arguments.length>6?arguments[6]:void 0,V=arguments.length>7?arguments[7]:void 0;I=removeALLFilters(I);const G=C.find((e=>"80"==e.type));if(G&&("1"==G.value||"3"==G.value)&&R&&H&&B.checkOut&&B.checkIn&&B.roomNum){const e=getDaysBetween(B.checkIn,B.checkOut)*B.roomNum;I.priceFilter.priceBarMax=Math.round(H.originPriceBarMax*e),I.priceFilter.priceBarStep=Math.round(H.originPriceBarStep*e),I.priceFilter.factor=e}const q=C.find((e=>"15|Range"==e.filterId));if(q){const e=q.value.split("|");I.priceFilter.priceHigh="max"==e[1]?-1:Number(e[1]),I.priceFilter.priceLow=Number(e[0])}Object.keys(I.generalFilters).forEach((e=>{var _,k;if("41"==e)null===(_=I.generalFilters[e])||void 0===_||null===(k=_.lineList)||void 0===k||k.forEach((e=>{var _;null===(_=e.siteList)||void 0===_||_.forEach((_=>{C.find((e=>e.filterId==_.filterId))&&(_.status=1,e.status=1)}))}));else if("17"==e){I.generalFilters[e].list.forEach((e=>{if(j)if("17|1"==e.filterId)e.status=0,e.isShow=!1;else{C.find((_=>_.filterId==e.filterId))&&(e.status=1),e.filterId===U.i6&&(V?e.isShow=!0:(e.status=0,e.isShow=!1))}else if("17|9"==e.filterId)e.status=0,e.isShow=!1;else{C.find((_=>_.filterId==e.filterId))&&(e.status=1),e.filterId===U.i6&&(V?e.isShow=!0:(e.status=0,e.isShow=!1))}}));const _=C.find((e=>"17"==e.type)),k=C.some((e=>e.filterId==U.i6))&&!V;_&&!k||I.generalFilters[e].list.forEach((e=>{"17|1"==e.filterId&&(e.status=1,e.isShow=!0)}))}else if("80"==e){var R,B;null===(R=I)||void 0===R||null===(B=R.generalFilters[e])||void 0===B||B.list.forEach((e=>{(null==C?void 0:C.find((_=>"80"==_.type&&_.value==e.value)))&&(e.status=1)}))}else I.generalFilters[e].list.forEach((e=>{C.find((_=>_.filterId==e.filterId))&&(e.status=1)}))}));const z=G?null===(_=I.generalFilters[80])||void 0===_?void 0:_.list.find((e=>e.value==G.value)):void 0;var J;G&&z||(null===(J=I.generalFilters[80])||void 0===J||J.list.forEach((e=>{"1"==e.filterId.split("|")[2]&&(e.status=1)})));return null===(k=I.quickFilters)||void 0===k||k.list.forEach((e=>{C.find((_=>_.filterId==e.filterId))&&(e.status=1)})),I}},3516:function(e,_,k){"use strict";k.d(_,{x:function(){return getInicialRenderFilters}});const getInicialRenderFilters=()=>({priceFilter:{title:"Price Range",priceHigh:-1,priceLow:0,priceBarMin:0,priceBarMax:1e3,priceBarStep:100},generalFilters:{},quickFilters:{list:[]}})},20355:function(e,_,k){"use strict";k.d(_,{Z:function(){return I}});const I={breakfast:[],commentRating:[],health:[],starRating:[],price:[],priceType:[{filterId:"80|0|1",type:"80",value:"0",subType:"2"}],paytype:[],bookPolicies:[],bed:[],bookable:[],areas:[],facility:[],feature:[],brand:[],metro:[],zone:[],landmark:[],airportTrainstation:[],hotArea:[],sort:[{filterId:"17|1",type:"17",value:"1",subType:"2"}],popularFilters:[],discount:[],categorys:[],cityId:[]}},83453:function(e,_,k){"use strict";k.d(_,{Z:function(){return C}});var I=k(76605);const C={star:{list:[{text:"2",value:2,status:0},{text:"3",value:3,status:0},{text:"4",value:4,status:0},{text:"5",value:5,status:0}],removeDispatch:I.cR},rate:{list:[],removeDispatch:I.bg},health:{list:[],removeDispatch:I._P},priceRange:{title:"Price Range",priceHigh:-1,priceLow:0,priceBarMin:0,priceBarMax:1e3,priceBarStep:100,removeDispatch:I.eX},priceType:{list:[],removeDispatch:null},breakfast:{list:[],removeDispatch:I.I7},areas:{list:[],removeDispatch:I.qY},payType:{list:[],removeDispatch:I.JD},bedType:{list:[],removeDispatch:I.se},bookPolicy:{list:[],removeDispatch:I.ZL},bookable:{list:[],removeDispatch:I.pp},discount:{list:[],removeDispatch:I.F7},zone:{list:[],removeDispatch:I.Jw},landmark:{list:[],removeDispatch:I.z0},metro:{lineList:[],removeDispatch:I.k},airportTrainstation:{list:[],removeDispatch:I.kK},location:{list:[],removeDispatch:I.Mv},cityId:{list:[],removeDispatch:I.VB},amenty:{list:[],removeDispatch:I.o},category:{list:[],removeDispatch:I.JQ},feature:{list:[],removeDispatch:I.ko},brand:{list:[],removeDispatch:I.IK},popularFilters:{list:[],removeDispatch:I.SJ},hotArea:{list:[],removeDispatch:I.WV}}},87004:function(e,_,k){"use strict";k.d(_,{Z:function(){return Bar}});var I=k(67294),C=k.n(I),R=k(94184),j=k.n(R),B=k(42017),H=k(12992),U=k(64337),V=k(39621).default;let noop=()=>{};class Bar extends V{constructor(e){super(e),this.onMouseOver=e=>{1==e?this.setState({isHoverLeft:!0,isHoverRight:!1,curPosition:1}):2==e&&this.setState({isHoverRight:!0,isHoverLeft:!1,curPosition:2})},this.onMouseOut=()=>{this.setState({isHoverLeft:!1,isHoverRight:!1})},this.ceilRef=C().createRef(),this.floorRef=C().createRef(),this.trackRef=C().createRef(),this.barRef=C().createRef(),this.clickRef=C().createRef(),this.isHover=!1,this.state={isHoverLeft:!1,isHoverRight:!1,curPosition:1}}render(){const{priceHigh:e,priceLow:_,priceBarMin:k,priceBarMax:I,priceBarStep:R,onTouchStart:V,onTouchMove:G,onTouchEnd:q,onMouseDown:z,onMouseUp:J,onClick:Q}=this.props,ee=216,te=-1===e||e>I?I+R:e,ne=_>I?I:_;let re=(0,U.zC)();const oe=_>I?(0,H.formatCurrency)(re,I,{digitTop:0}):(0,H.formatCurrency)(re,_,{digitTop:0}),ie=-1===e||e>I?(0,H.formatCurrency)(re,I,{digitTop:0})+"+":(0,H.formatCurrency)(re,e,{digitTop:0});let ae=(ne-k)/(I+R-k)*ee-1,le=(te-ne)/(I+R-k)*ee;le=le>ee?ee:le;let se=1==this.state.curPosition&&(this.state.isHoverLeft||this.props.showPriceTip),ce=2==this.state.curPosition&&(this.state.isHoverRight||this.props.showPriceTip);const ue={left:"".concat(ae,"px"),width:"".concat(le,"px")};let de={left:"".concat(se?ae-4:ae,"px")},pe={left:"".concat(ce?ae+le-4:ae+le,"px")};return C().createElement("div",{ref:this.barRef,className:"price-range-bar"},C().createElement("div",{ref:this.trackRef,className:"price-range-track",style:ue}),C().createElement("div",{className:j()("price-range-floor",{big:1==this.state.curPosition&&(this.state.isHoverLeft||this.props.showPriceTip)}),ref:this.floorRef,style:de,onTouchStart:V||noop,onTouchMove:G||noop,onTouchEnd:q||noop,onMouseDown:z||noop,onMouseUp:J||noop,onMouseOver:e=>{this.onMouseOver(1,e)},onMouseOut:this.onMouseOut},C().createElement(B.Z,{content:oe,left:ae,show:1==this.state.curPosition&&(this.state.isHoverLeft||this.state.isHoverRight||this.props.showPriceTip)})),C().createElement("div",{className:j()("price-range-ceil",{big:2==this.state.curPosition&&(this.state.isHoverRight||this.props.showPriceTip)}),ref:this.ceilRef,style:pe,onTouchStart:V||noop,onTouchMove:G||noop,onTouchEnd:q||noop,onMouseDown:z||noop,onMouseUp:J||noop,onMouseOver:e=>{this.onMouseOver(2,e)},onMouseOut:this.onMouseOut},C().createElement(B.Z,{content:ie,left:ae,show:2==this.state.curPosition&&(this.state.isHoverLeft||this.state.isHoverRight||this.props.showPriceTip)})),C().createElement("div",{className:"price-range-click",ref:this.clickRef,onClick:Q||noop}))}}},87472:function(e,_,k){"use strict";k.d(_,{f:function(){return I}});const I="CLEAR_PRICE_RANGE"},83865:function(e,_,k){"use strict";k.d(_,{Z:function(){return PriceInput}});var I=k(64337),C=k(12992),R=k(68433),j=k(39621).default,B=k(67294);class PriceInput extends j{constructor(e){super(e),this.onChange=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";var C,R;if(I=I.replace(/\D/g,""),"low"===e)this.setState({low:I}),I=(null==_||null===(C=_.target)||void 0===C?void 0:C.value)||"",""===(null==_||null===(R=_.target)||void 0===R?void 0:R.value)&&this.setState({startLow:"finish"});else if("high"===e){var j,B;this.setState({high:I}),I=(null==_||null===(j=_.target)||void 0===j?void 0:j.value)||"",""===(null==_||null===(B=_.target)||void 0===B?void 0:B.value)&&this.setState({startHigh:"finish"})}},this.handleHighFocus=e=>{var _;let k=(null==e||null===(_=e.target)||void 0===_?void 0:_.value)||"";k=k.replace(/\D/g,""),this.setState({high:k})},this.ubtMapping={logListpagePriceinputClick:R.d6},this.checkPriceInput=(e,_,k,I)=>{let C=!1,R=!1;return(e=""!==e?Number(e):0)>=(_=""!==_?Number(_):-1)&&-1!==_&&("low"===I?C=!0:"high"===I&&(R=!0)),"init"===I?this.state={lowError:C,highError:R,startLow:"init",startHigh:"init",low:e,high:_,max:k}:this.setState({lowError:C,highError:R,low:e,high:_,max:k}),C||R||e===this.preLow&&_===this.preHigh&&k===this.preMax?null:(this.preLow=e,this.preHigh=_,this.preMax=k,{low:e,high:_,max:k})},this.handleEnterKey=e=>_=>{if(13===_.nativeEvent.keyCode){var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";I=I.replace(/\D/g,"");let C=null;if("low"===e?C=this.checkPriceInput(I,this.state.high,this.state.max,e):"high"===e&&(C=this.checkPriceInput(this.state.low,I,this.state.max,e)),C){let e=Object.assign({},this.props,{priceLow:C.low,priceHigh:C.high});this.props.onChange(e)}}},this.handleBlur=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";I=I.replace(/\D/g,"");let C=null;if("low"===e?C=this.checkPriceInput(I,this.state.high,this.state.max,e):"high"===e&&(C=this.checkPriceInput(this.state.low,I,this.state.max,e)),C){let e=Object.assign({},this.props,{priceLow:C.low,priceHigh:C.high});this.props.onChange(e)}this.$safeLog("logListpagePriceinputClick",I),"finish"===this.state.startLow&&this.setState({startLow:"init"}),"finish"===this.state.startHigh&&this.setState({startHigh:"init"})};const{priceLow:_,priceHigh:k,priceBarMax:C}=this.props,{low:j,high:B,max:H}=this.checkPriceInput(_,k,C,"init")||{};this.currency=(0,I.zC)(),this.preLow=j,this.preHigh=B,this.preMax=H}componentDidUpdate(e){this.props.priceHigh===e.priceHigh&&this.props.priceLow===e.priceLow&&this.props.priceBarMax===e.priceBarMax||this.checkPriceInput(this.props.priceLow,this.props.priceHigh,this.props.priceBarMax,"bar")}render(){const{lowError:e,highError:_,low:k,high:I,max:R}=this.state;return B.createElement("div",{className:"price-range-input"},B.createElement("input",{type:"text",className:"price-range-input-low".concat(e?" price-range-input-err":""),value:0==k?"finish"===this.state.startLow?"":0:(0,C.formatCurrency)(this.currency,k,{digitTop:0}),autoComplete:"off",onChange:this.onChange("low"),onBlur:this.handleBlur("low"),onKeyPress:this.handleEnterKey("low")}),B.createElement("span",{className:"price-range-input-split"},"-"),B.createElement("input",{type:"text",className:"price-range-input-high".concat(_?" price-range-input-err":""),value:-1===I?"".concat((0,C.formatCurrency)(this.currency,R,{digitTop:0}),"+"):0==I?"finish"===this.state.startHigh?"":0:(0,C.formatCurrency)(this.currency,I,{digitTop:0}),autoComplete:"off",onChange:this.onChange("high"),onBlur:this.handleBlur("high"),onFocus:this.handleHighFocus,onKeyPress:this.handleEnterKey("high")}),B.createElement("span",{className:"price-range-input-overflow"}))}}},3488:function(e,_,k){"use strict";k.d(_,{b:function(){return getPriceRangeLocal}});var I,C,R=k(22122),j=k(68661),B=k(98349),H=k(87004),U=k(45697),V=k.n(U),G=k(12992),q=k(64337),z=k(16482),J=k(83865),Q=k(87472),ee=k(68433),te=k(39621).default,ne=k(67294);(0,j.$j)((e=>({alteringPriceRange:e.renderFilters.priceFilter})),{changingPriceRangeFilter:B.L})(((C=class View extends te{constructor(e){super(e),this.init=()=>{this.barRef=ne.createRef(),this.selectedHandle=0,this.state={changingPrice:null,showPriceTip:!1},this.ismoving=!1},this.getMousePosition=e=>e.pageX,this.getHandleCenterPosition=e=>{const _=e.getBoundingClientRect();return window.pageXOffset+_.left+.5*_.width},this.getTouchPosition=e=>e.touches[0].pageX,this.pauseEvent=e=>{e.stopPropagation(),e.preventDefault()},this.getBarStart=()=>this.barRef.current.barRef.current.getBoundingClientRect().left+window.pageXOffset,this.getBarLength=()=>{const e=this.barRef.current.barRef.current;if(!e)return 0;return e.getBoundingClientRect().width},this.isCeil=e=>e.target===this.barRef.current.ceilRef.current,this.moveTo=(e,_)=>{if(0===this.selectedHandle)return;this.pauseEvent(e);let k=this.calcValueByPos(_);this.setState({changingPrice:k})},this.onChange=e=>{this.props.onChange(e)},this.calcValueByPos=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=this.getBarLength();let R=Math.abs(Math.max(e,0)/C);R=R>1?1:R<0?0:R;let j=R*(k+I-_)+_;if(I){j=I*this.getRangeStep(Math.round((j-_)/I))+_}return j=this.getOrderedValue(j),j>k&&2===this.selectedHandle?j=-1:j>k&&1===this.selectedHandle&&(j=k),j},this.getRangeStep=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=Math.abs((k-_)/I)+1;return e<0?0:e>C?C:e},this.getOrderedValue=e=>{const{priceLow:_,priceHigh:k,priceBarStep:I,priceBarMax:C}=this.props;return 1===this.selectedHandle&&this.PassCeil(e,k)?-1===k?C:k-I:2===this.selectedHandle&&e<=_?_+I:e},this.getCeilPositon=()=>{const{priceHigh:e,priceLow:_,priceBarMin:k,priceBarMax:I,priceBarStep:C}=this.props,R=244,j=_>I?I:_;let B=(j-k)/(I+C-k)*R-1,H=((-1===e||e>I?I+C:e)-j)/(I+C-k)*R;return H=H>R?R:H,{left:B,right:B+H}},this.PassCeil=(e,_)=>e>=(-1!==_?_:this.props.priceBarMax+this.props.priceBarStep),this.onMouseDown=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentMouseEvents(),this.setState({showPriceTip:!0})},this.onTouchStart=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentTouchEvents(),this.setState({showPriceTip:!0})},this.onMouseMove=(0,z.P2)((e=>{this.ismoving=!0;const _=this.getMousePosition(e),k=this.getBarStart();this.moveTo(e,_-k),this.updateTempPriceRange()}),10),this.onTouchMove=(0,z.P2)((e=>{this.ismoving=!0;const _=e.changedTouches[0].pageX,k=this.getBarStart();this.moveTo(e,_-k),this.updateTempPriceRange()}),10),this.addEventListener=(e,_,k)=>e&&e.addEventListener?(e.addEventListener(_,k),{remove(){e.removeEventListener(_,k)}}):null,this.addDocumentTouchEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onTouchMoveListener=this.addEventListener(document,"touchmove",this.onTouchMove),this.onTouchEndListener=this.addEventListener(document,"touchend",this.onMouseUp)},this.addDocumentMouseEvents=()=>{this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.onMouseMoveListener=this.addEventListener(document,"mousemove",this.onMouseMove),this.onMouseUpListener=this.addEventListener(document,"mouseup",this.onMouseUp)},this.onMouseUp=()=>{this.ismoving=!1,this.setState({showPriceTip:!1}),null!==this.state.changingPrice?(this.updatePriceRange(),this.removeDocumentEvents(),this.$safeLog("logListpagePriceSlide")):this.removeDocumentEvents()},this.ubtMapping={logListpagePriceSlide:ee.Pc},this.onClick=e=>{this.ismoving=!1;const _=this.getMousePosition(e),k=this.getBarStart(),{left:I,right:C}=this.getCeilPositon();this.selectedHandle=_-k-I<=C-_+k?1:2,this.moveTo(e,_-k),setTimeout((()=>{this.updatePriceRange()}),0)},this.updateTempPriceRange=()=>{let e=Object.assign({},this.props.alteringPriceRange);2===this.selectedHandle&&e.priceHigh!==this.state.changingPrice?e.priceHigh=this.state.changingPrice:1===this.selectedHandle&&e.priceLow!==this.state.changingPrice&&(e.priceLow=this.state.changingPrice),this.props.changingPriceRangeFilter(e)},this.updatePriceRange=()=>{let e=!1,_=Object.assign({},this.props);2===this.selectedHandle&&_.priceHigh!==this.state.changingPrice?(_.priceHigh=this.state.changingPrice,e=!0):1===this.selectedHandle&&_.priceLow!==this.state.changingPrice&&(_.priceLow=this.state.changingPrice,e=!0),e&&(this.props.changingPriceRangeFilter(_),this.onChange(_)),this.setState({changingPrice:null})},this.removeDocumentEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.selectedHandle=0},this.showClear=()=>{const{priceHigh:e,priceLow:_}=this.props;return-1!==e||0!==_},this.clearPriceRange=()=>{let e=Object.assign({},this.props);e.priceHigh=-1,e.priceLow=0,setTimeout((()=>{this.onChange(e)}),0)},this.init()}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),this.removeDocumentEvents()}componentDidMount(){this.$event.on(Q.f,this.clearPriceRange)}render(){let{priceHigh:e,priceLow:_,alteringPriceRange:k}=this.props;this.ismoving&&(e=k.priceHigh,_=k.priceLow);let I={priceHigh:e,priceLow:_};const C=1===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:_,j=2===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:e,B={onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,priceLow:C,priceHigh:j,onChange:this.onChange,onClick:this.onClick};return ne.createElement("div",{className:"price-range-wrapper"},ne.createElement(H.Z,(0,R.Z)({ref:this.barRef},this.props,B,{showPriceTip:this.state.showPriceTip})),ne.createElement(J.Z,(0,R.Z)({},this.props,I)))}}).propTypes={priceHigh:V().number,priceLow:V().number,priceBarMin:V().number,priceBarMax:V().number,priceBarStep:V().number},C.defaultProps={priceHigh:1,priceLow:0,priceBarMin:0,priceBarMax:0,priceBarStep:0},I=C));let getPriceRangeLocal=(e,_,k,I,C)=>{const R=I||(0,q.zC)(C),j={digitTop:0,zeroNeedCurrency:!0,ctx:C};let B=(0,G.formatCurrency)(R,e,j,!0),H=-1===_?"> ".concat((0,G.formatCurrency)(R,k,j)):(0,G.formatCurrency)(R,_,j);return e>0&&-1===_&&(B="> ".concat((0,G.formatCurrency)(R,e,j,!0))),{lowLocal:B,highLocal:H}}},42017:function(e,_,k){"use strict";k.d(_,{Z:function(){return Tip}});var I=k(96156),C=k(67294),R=k.n(C),j=k(39621).default;function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class Tip extends j{constructor(e){super(e),this.tipRef=R().createRef()}componentDidMount(){this.calcTooltipPosition(this.tipRef.current)}getDomBound(e){if(!e)return null;return{x:e.getBoundingClientRect().left,width:e.offsetWidth}}calcTooltipPosition(e){const _=this.getDomBound(e);if(!_)return{width:40};const{x:k,width:I}=_;return{width:I,x:k}}render(){let e=this.props.show?{display:"block"}:{visibility:"hidden"};const{width:_}=this.calcTooltipPosition(this.tipRef.current);return R().createElement("div",{className:"price-tooltip",style:_objectSpread(_objectSpread({},e),{},{left:"-".concat(_/2-10,"px")}),ref:this.tipRef},this.props.content,R().createElement("div",{className:"price-tooltip-arrow bottom",style:{left:"".concat(_/2-7,"px")}}))}}},30018:function(e,_,k){"use strict";k.d(_,{C:function(){return I}});const I="UPDATE_BOOKABLE_VISIBLE"},98469:function(e,_,k){"use strict";k.d(_,{W:function(){return C}});var I=k(30018);const C=function bookableVisible(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.C?C:e}},33217:function(e,_,k){"use strict";k.d(_,{P:function(){return I}});const I="CITYREFRESH_UPDATE"},19114:function(e,_,k){"use strict";k.d(_,{_:function(){return j}});var I=k(96156),C=k(33217);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let R={cityId:{list:[]},zones:{list:[]},landmarks:{list:[]},airportTrainstations:{list:[]},metros:{lineList:[]},locations:{list:[]},removeDispatch:null};const j=function cityRefresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case C.P:return Object.assign({},_objectSpread({},e),_objectSpread({},I));default:return e}}},17631:function(e,_,k){"use strict";k.d(_,{j:function(){return I}});const I="TOGGLE_DIRECTSEARCH_SWITCH"},85320:function(e,_,k){"use strict";k.d(_,{T:function(){return j}});var I=k(17631),C=k(47419);const R=1===Number(C.default.getByKey("initData.searchCondition.directSearch")||0),j=function directSearch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;switch(k){case I.j:return C;default:return e}}},76605:function(e,_,k){"use strict";k.d(_,{qY:function(){return removeAreas},cR:function(){return removeStarRating},eX:function(){return removePriceRangeFilter},bg:function(){return removeGuestRating},_P:function(){return removeHealth},I7:function(){return removeMeals},JD:function(){return removePayment},ZL:function(){return removeBookingPolicy},se:function(){return removeBedType},W9:function(){return updateBookable},pp:function(){return removeBookable},Mv:function(){return removeLocation},o:function(){return removeAmenities},JQ:function(){return removeCategorys},ko:function(){return removeFeatures},IK:function(){return removeBrand},F7:function(){return removeDiscounts},SJ:function(){return removePopularFilters},Jw:function(){return removeZone},z0:function(){return removeLandmark},kK:function(){return removeAirportTrainstations},k:function(){return removeMetro},VB:function(){return removeCity},Of:function(){return updateAllFilter},WV:function(){return removeHotArea}});var I=k(57456);function removeAreas(e){return{type:I.zS,payload:e}}function removeStarRating(e){return{type:I.sP,payload:e}}function removePriceRangeFilter(e){return{type:I.Rs,payload:e}}function removeGuestRating(e){return{type:I.XK,payload:e}}function removeHealth(e){return{type:I.BD,payload:e}}function removeMeals(e){return{type:I.f3,payload:e}}function removePayment(e){return{type:I.Ik,payload:e}}function removeBookingPolicy(e){return{type:I.CH,payload:e}}function removeBedType(e){return{type:I.$M,payload:e}}function updateBookable(e){return{type:I.Tp,payload:e}}function removeBookable(e){return{type:I.dg,payload:e}}function removeLocation(e){return{type:I.bP,payload:e}}function removeAmenities(e){return{type:I.k_,payload:e}}function removeCategorys(e){return{type:I.A2,payload:e}}function removeFeatures(e){return{type:I.wG,payload:e}}function removeBrand(e){return{type:I.HW,payload:e}}function removeDiscounts(e){return{type:I.Nv,payload:e}}function removePopularFilters(e){return{type:I.$n,payload:e}}function removeZone(e){return{type:I.ce,payload:e}}function removeLandmark(e){return{type:I.HH,payload:e}}function removeAirportTrainstations(e){return{type:I.IA,payload:e}}function removeMetro(e){return{type:I.Jj,payload:e}}function removeCity(e){return{type:I.YW,payload:e}}function updateAllFilter(e){return{type:I.HL,payload:e}}function removeHotArea(e){return{type:I.g6,payload:e}}},57456:function(e,_,k){"use strict";k.d(_,{lV:function(){return I},xt:function(){return C},sP:function(){return R},mn:function(){return j},Rs:function(){return B},a2:function(){return H},So:function(){return U},Yb:function(){return V},XK:function(){return G},bm:function(){return q},BD:function(){return z},_w:function(){return J},f3:function(){return Q},fv:function(){return ee},Ik:function(){return te},Bi:function(){return ne},CH:function(){return re},ny:function(){return oe},$M:function(){return ie},Tp:function(){return ae},dg:function(){return le},LX:function(){return se},bP:function(){return ce},RJ:function(){return ue},ce:function(){return de},P$:function(){return pe},HH:function(){return he},D8:function(){return fe},IA:function(){return me},zK:function(){return ge},Jj:function(){return ve},Ry:function(){return ye},YW:function(){return be},w5:function(){return _e},k_:function(){return we},R9:function(){return Ee},wG:function(){return Se},MT:function(){return Oe},A2:function(){return Te},C8:function(){return ke},HW:function(){return Ie},il:function(){return Ce},zS:function(){return Pe},Lf:function(){return Le},Nv:function(){return Ne},eN:function(){return De},$n:function(){return Ae},vT:function(){return Re},HL:function(){return xe},D7:function(){return je},g6:function(){return Be}});const I="ALLFILTER_REMOVE",C="STARRATING_UPDATE",R="STARRATING_REMOVE",j="PRICERANGE_UPDATE",B="PRICERANGE_REMOVE",H="PRICETYPE_UPDATE",U="PRICETYPE_UPDATE_ALL",V="GuestRating_UPDATE",G="GuestRating_REMOVE",q="HEALTH_UPDATE",z="HEALTH_REMOVE",J="MEALS_UPDATE",Q="MEALS_REMOVE",ee="PAYMENT_UPDATE",te="PAYMENT_REMOVE",ne="BOOKPOLICY_UPDATE",re="BOOKPOLICY_REMOVE",oe="BEDTYPE_UPDATE",ie="BEDTYPE_REMOVE",ae="BOOKABLE_UPDATE",le="BOOKABLE_REMOVE",se="LOCATION_UPDATE",ce="LOCATION_REMOVE",ue="ZONES_UPDATE",de="ZONES_REMOVE",pe="LANDMARKS_UPDATE",he="LANDMARKS_REMOVE",fe="AIRPORTANDRAILWAYSTATION_UPDATE",me="AIRPORTANDRAILWAYSTATION_REMOVE",ge="METROS_UPDATE",ve="METROS_REMOVE",ye="CITYS_UPDATE",be="CITYS_REMOVE",_e="AMENITIES_UPDATE",we="AMENITIES_REMOVE",Ee="FEATURES_UPDATE",Se="FEATURES_REMOVE",Oe="CATEGORYS_UPDATE",Te="CATEGORYS_REMOVE",ke="BRAND_UPDATE",Ie="BRAND_REMOVE",Ce="AREAS_UPDATE",Pe="AREAS_REMOVE",Le="DISCOUNTS_UPDATE",Ne="DISCOUNTS_REMOVE",De="POPULARFILTERS_UPDATE",Ae="POPULARFILTERS_REMOVE",Re="OTHERFILTER_UPDATE",xe="ALLFILTER_UPDATE",je="HOTAREA_UPDATE",Be="HOTAREA_REMOVE"},8178:function(e,_,k){"use strict";k.d(_,{a:function(){return filterCondition}});var I=k(96156),C=k(57456),R=k(31903),j=k(94864),B=k(83465),H=k.n(B),U=k(47419);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const getKeyOfState=e=>{let _=Object.keys(R.Wj).find((_=>_.includes(e.split("_")[0]))),k="REMOVE"===e.split("_")[1];return _=R.Wj[_],{key:_,isRemoveType:k}},activeRemove=(e,_,k)=>{let{key:I}=getKeyOfState(e),C=H()(_[I]);if(C.removeDispatch=_[I].removeDispatch,I===R.Wj.METROS?C.lineList&&C.lineList.map((e=>{e.status=0,e.siteList.map((e=>{e.value===k[0].value&&(e.status=0)}))})):I===R.Wj.PRICERANGE?(C.priceLow=0,C.priceHigh=-1):I===R.Wj.BRAND?C.list.map((e=>(e.value===k[0].value&&e.type===k[0].type&&(e.status=0),e))):("listPage"===U.default.getByKey("pageName")&&I===R.Wj.CITYS&&[R.Wj.LANDMARKS,R.Wj.METROS,R.Wj.AIRPORTANDRAILWAYSTATION,R.Wj.ZONES,R.Wj.LOCATION,R.Wj.HOTAREA].forEach((e=>{(_[e].list||_[e].lineList||[]).map((e=>e.status=0))})),C.list.map((e=>(e.value===k[0].value&&(e.status=0),e)))),["BEDTYPE_REMOVE","BOOKPOLICY_REMOVE","MEALS_REMOVE","PAYMENT_REMOVE","DISCOUNTS_REMOVE"].includes(e)){let e=k[0].filterId;_.popularFilters.list.map((_=>{_.filterId===e&&(_.status=0)}))}let j={};return j[I]=C,Object.assign({},_objectSpread({},_),_objectSpread({},j))},removeAllFilters=e=>{let _=H()(e);return Object.keys(_).map((e=>{_[e].lineList&&_[e].lineList.map((e=>{e.status=0,e.siteList.map((e=>{e.status=0}))})),_[e].list&&_[e].list.map(((_,k)=>{e===R.Wj.PRICETYPE&&0===k?_.status=1:_.status=0})),"priceRange"===e&&Object.assign(_[e],{priceHigh:-1,priceLow:0})})),Object.assign({},_objectSpread({},e),_objectSpread({},_))},updateAllFilter=(e,_)=>{let k=H()(e),I="removeDispatch";return Object.keys(_).map((e=>{let C=R.f2[e];k[C]=_[e]||j.Z[C],"stars"===e&&(k[C].list=j.Z[C].list,k[C].list.map((k=>{(_[e].list||[]).includes(k.value)&&(k.status=1)}))),!k[C][I]&&(k[C][I]=j.Z[C].removeDispatch)})),Object.assign({},_objectSpread({},k))};function filterCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.Z,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case C.il:case C.ny:case C._w:case C.Yb:case C.bm:case C.fv:case C.Bi:case C.Tp:case C.mn:case C.xt:case C.eN:case C.C8:case C.w5:case C.RJ:case C.P$:case C.zK:case C.D8:case C.Ry:case C.MT:case C.R9:case C.LX:case C.D7:case C.Lf:{let _=getKeyOfState(k),{removeDispatch:C=null,title:R}=e[_.key];return I[_.key].removeDispatch=I[_.key].removeDispatch||C,I[_.key].title=I[_.key].title||R,Object.assign({},_objectSpread({},e),_objectSpread({},I))}case C.So:return Object.assign({},_objectSpread({},e),I);case C.a2:{let _=getKeyOfState(k),{removeDispatch:C=null,title:R}=e[_.key];R=R||I[_.key].title,C&&Object.assign(I[_.key],{removeDispatch:C,title:R});let{priceType:j,factor:B}=I,{priceBarMax:H,priceHigh:U,priceLow:V,priceBarStep:G}=e.priceRange,q=Object.assign({},e.priceRange,{priceBarMax:Math.round(H*B),priceHigh:-1===U?-1:Math.round(U*B),priceLow:Math.round(V*B),priceBarStep:G*B});return Object.assign({},_objectSpread({},e),{priceRange:q,priceType:j})}case C.vT:return Object.keys(I).forEach((e=>{I[e].removeDispatch=j.Z[e].removeDispatch})),Object.assign({},_objectSpread({},e),_objectSpread({},I));case C.HL:return updateAllFilter(e,I);case C.zS:case C.sP:case C.XK:case C.BD:case C.f3:case C.Ik:case C.$M:case C.CH:case C.dg:case C.ce:case C.HH:case C.IA:case C.Jj:case C.HW:case C.k_:case C.wG:case C.A2:case C.Nv:case C.Rs:case C.YW:case C.g6:case C.bP:case C.$n:return activeRemove(k,e,I);case C.lV:return removeAllFilters(e);default:return e}}},74413:function(e,_,k){"use strict";k.d(_,{LY:function(){return I},Jg:function(){return C},IV:function(){return R},FM:function(){return j},az:function(){return B},Yz:function(){return H},R5:function(){return U},Af:function(){return V},Zn:function(){return G},w8:function(){return q},OW:function(){return z},CH:function(){return J},b5:function(){return Q},Vf:function(){return ee},WW:function(){return te},pO:function(){return ne},XE:function(){return re},jE:function(){return oe},_T:function(){return ie},QO:function(){return ae},zG:function(){return le},$s:function(){return se},bQ:function(){return ce},UQ:function(){return ue},uM:function(){return de},Gs:function(){return pe},em:function(){return he}});const I="REMOVE_FILTERS",C="RATING_UPDATE",R="HEALTH_UPDATE_BFF",j="UPDATE_POPULAR",B="UPDATE_DISCOUNT",H="UPDATE_CATEGORYS",U="CITYID_UPDATE",V="BREAKFAST_UPDATE",G="BOOKPOLICIES_UPDATE",q="UPDATE_BOOKABLE",z="FACILITY_UPDATE",J="FEATURE_UPDATE",Q="UPDATE_BRAND",ee="BED_UPDATE",te="UPDATE_STAR_RATING",ne="PRICE_RANGE_UPDATE",re="PRICE_TYPE_UPDATE",oe="PAY_TYPE_UPDATE",ie="UPDATE_AREAS",ae="UPDATE_METRO",le="UPDATE_LANDMARK",se="UPDATE_ZONE",ce="UPDATE_AIRPORTTRAINSTATION",ue="UPDATE_HOTAREA",de="UPDATE_SORT",pe="CLEAR_FILTERS",he="ALLFILTERS_REMOVE"},32281:function(e,_,k){"use strict";k.d(_,{u:function(){return filters}});var I=k(74413),C=(k(94864),k(83465)),R=k.n(C);const j={breakfast:[],commentRating:[],starRating:[],health:[],price:[],priceType:[{filterId:"80|0|1",type:"80",value:"0",subType:"2"}],paytype:[],bookPolicies:[],bed:[],bookable:[],areas:[],facility:[],feature:[],brand:[],metro:[],zone:[],landmark:[],airportTrainstation:[],hotArea:[],sort:[{filterId:"17|1",type:"17",value:"1",subType:"2"}],popularFilters:[],discount:[],categorys:[],cityId:[]},updateFilters=(e,_)=>{let k=R()(e);const{filterItems:I,filterTypeBFF:C}=_,j=["areas","metro","landmark","zone","airportTrainstation","hotArea"];if(k[C]){if("price"==C)return k[C]=I,k;if(j.includes(C))return k[C]=I.map((e=>({filterId:e.filterId,type:e.type,value:e.value,subType:e.subType}))),k;{var B;const e=I.filter((e=>1==e.status)).map((e=>{let _={filterId:e.filterId,type:e.type,value:e.value};return e.subType&&(_.subType=e.subType),e.childValue&&(_.childValue=e.childValue),e.propertyValue&&(_.propertyValue=e.propertyValue),_}));if(k[C]=e,"priceType"==C&&(null===(B=k.price[0])||void 0===B?void 0:B.value)){var H;const{factor:e}=_,I=null===(H=k.price[0].value)||void 0===H?void 0:H.split("|");-1!==I[1]&&"max"!==I[1]&&(I[1]=Math.round(Number(I[1])*e)),I[0]=Math.round(Number(I[0])*e),k.price[0].value=I.join("|")}return k}}return k},removeFilters=(e,_)=>{let k=R()(e);const{key:I}=_,C={breakfast:"breakfast",rate:"commentRating",health:"health",star:"starRating",priceRange:"price",payType:"paytype",bookPolicy:"bookPolicies",bedType:"bed",bookable:"bookable",areas:"areas",amenty:"facility",feature:"feature",brand:"brand",metro:"metro",zone:"zone",landmark:"landmark",airportTrainstation:"airportTrainstation",hotArea:"hotArea",popularFilters:"popularFilters",discount:"discount",categorys:"categorys",sort:"sort",cityId:"cityId"};if("priceRange"==I)k[C[I]]=j.price;else{let e=-1;k[C[I]].some(((k,I)=>{if(k.filterId==_.filterId)return e=I,!0})),-1!=e&&k[C[I]].splice(e,1)}return k},clearFilters=(e,_)=>{let k=R()(e);return _.forEach((e=>{k[e]&&k[e].length>0&&(k[e]=[])})),k},removeALLFilters=e=>{const _=R()(e.sort);let k=j;return Object.assign(k,{sort:_}),k};function filters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:C}=_;switch(k){case I._T:case I.Yz:case I.az:case I.FM:case I.QO:case I.zG:case I.$s:case I.bQ:case I.UQ:case I.Af:case I.w8:case I.Vf:case I.Jg:case I.IV:case I.WW:case I.Zn:case I.pO:case I.jE:case I.XE:case I.uM:case I.R5:case I.OW:case I.b5:case I.CH:return updateFilters(e,C);case I.em:return removeALLFilters(e);case I.Gs:return clearFilters(e,C);case I.LY:return removeFilters(e,C);default:return e}}},8873:function(e,_,k){"use strict";k.d(_,{w:function(){return I},X:function(){return C}});const I="UPDATE_ALL_INITDATA",C="UPDATE_MAP_TYPE"},47054:function(e,_,k){"use strict";k.d(_,{F:function(){return initData}});var I=k(96156),C=k(8873);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let R={mapInfo:{url:"",type:"",poiList:[]}};function initData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;if(k===C.w)return I;if(k===C.X){let _=Object.assign({},e.mapInfo,I);return _objectSpread(_objectSpread({},e),{},{mapInfo:_})}return e}},78031:function(e,_,k){"use strict";k.d(_,{bB:function(){return I},fu:function(){return C},_2:function(){return R}});const I="TOGGLE_LAST_PAGE",C="TOGGLE_NORMAL_LAST_PAGE",R="TOGGLE_RECOMMEND_LAST_PAGE"},76895:function(e,_,k){"use strict";k.d(_,{Z:function(){return lastPage}});var I=k(78031);const C={normalLastPage:!1,recommendLastPage:!1};function lastPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,_=arguments.length>1?arguments[1]:void 0;return _.type===I.fu?Object.assign(e,{normalLastPage:_.payload}):_.type===I._2?Object.assign(e,{recommendLastPage:_.payload}):_.type===I.bB?_.payload:e}},16564:function(e,_,k){"use strict";k.d(_,{iB:function(){return I},Ci:function(){return C},Lg:function(){return R}});const I="UPDATE_METAHOTEL",C="UPDATE_METAHOTEL_TITLE",R="CLEAR_METAHOTEL"},50956:function(e,_,k){"use strict";k.d(_,{G:function(){return C}});var I=k(16564);const C=function metaHotel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.iB?Object.assign({},e,C):k===I.Lg?C:k===I.Ci?Object.assign({},e,C):e}},98349:function(e,_,k){"use strict";k.d(_,{L:function(){return changingPriceRangeFilter}});var I=k(87983);function changingPriceRangeFilter(e){return{type:I.U,payload:e}}},87983:function(e,_,k){"use strict";k.d(_,{U:function(){return I}});const I="PRICERANGE_CHANGING"},46925:function(e,_,k){"use strict";k.d(_,{oW:function(){return I},Rx:function(){return C},lK:function(){return R},em:function(){return j},l3:function(){return B},sM:function(){return H},wB:function(){return U},zR:function(){return V},uB:function(){return G}});const I="UPDATE_GENERAL_FILTERS",C="UPDATE_PRICE_FILTER",R="UPDATE_QUICK_FILTERS",j="ALLFILTERS_REMOVE",B="REMOVE_FILTER",H="UPDATE_RENDERFILTERS",U="REMOVE_POI_FILTERS",V="UPDATE_SEARCH_HOTEL_PROPERTY",G="REMOVE_SEARCH_HOTEL_PROPERTY"},54547:function(e,_,k){"use strict";k.d(_,{C:function(){return H},B:function(){return renderFilters}});var I=k(46925),C=k(83465),R=k.n(C);const j={generalFilters:{},priceFilter:{},quickFilters:{},filterProperty:void 0},B="H",H={sortFilter:1,locationFilter:2,scrollRefresh:3,generalFilter:4,quickFilter:6,compensate:23},updatePriceFilter=(e,_)=>{var k,I;window&&!(null===(k=window)||void 0===k||null===(I=k.listSecondaryLoading)||void 0===I?void 0:I.time)&&(window.listSecondaryLoading={time:Date.now(),actionname:H.generalFilter});const C=R()(e),{priceBarMax:j,priceBarStep:B,priceBarMin:U}=C.priceFilter;let{priceHigh:V=-1,priceLow:G=0,factor:q=1}=_;return 1==q?Object.assign(C.priceFilter,{priceHigh:V,priceLow:G}):Object.assign(C.priceFilter,{priceHigh:-1===V?-1:Math.round(V*q),priceLow:Math.round(G*q),priceBarMax:Math.round(j*q),priceBarStep:Math.round(B*q),priceBarMin:Math.round(U*q),factor:q}),C},resetFilterStatus=e=>{e.status=0,e.list&&e.list.length>0&&e.list.forEach((e=>{resetFilterStatus(e)}))},updateGeneralFilters=(e,_)=>{var k,I;const C=R()(e),{filters:j=[],type:B}=_,U=["50","18","10","9","41","8","139"];if(U.includes(B))if("41"==B){var V;if(j.length)j.forEach((e=>{var _,k;let I;null===(_=C.generalFilters[41])||void 0===_||_.lineList.forEach(((_,k)=>{var C;null===(C=_.siteList)||void 0===C||C.forEach((_=>{_.filterId==e.filterId?(_.status=1,I=k):_.status=0}))})),null===(k=C.generalFilters[41])||void 0===k||k.lineList.forEach(((e,_)=>{e.status=_==I?1:0}))}));else null===(V=C.generalFilters[41])||void 0===V||V.lineList.forEach((e=>{var _;e.status=0,null===(_=e.siteList)||void 0===_||_.forEach((e=>{e.status=0}))}));U.forEach((e=>{"41"!==e&&C.generalFilters[e]&&resetFilterStatus(C.generalFilters[e])}))}else j.length?j.forEach((e=>{C.generalFilters[B].list.forEach((_=>{_.filterId==e.filterId?_.status=1:_.status=0}))})):C.generalFilters[B]&&resetFilterStatus(C.generalFilters[B]),U.forEach((e=>{var _;"41"==e&&(null===(_=C.generalFilters[41])||void 0===_||_.lineList.forEach((e=>{var _;e.status=0,null===(_=e.siteList)||void 0===_||_.forEach((e=>{e.status=0}))})));e!==B&&"41"!==e&&C.generalFilters[e]&&resetFilterStatus(C.generalFilters[e])}));else C.generalFilters[B].list.forEach((e=>{e.status=0})),j.forEach((e=>{C.generalFilters[B].list.forEach((_=>{_.filterId==e.filterId&&(_.status=1)}))}));return window&&!(null===(k=window)||void 0===k||null===(I=k.listSecondaryLoading)||void 0===I?void 0:I.time)&&(window.listSecondaryLoading={time:Date.now(),actionname:U.includes(B)?H.locationFilter:"17"===B?H.sortFilter:H.generalFilter}),C},updateQuickFilters=(e,_)=>{var k,I;window&&!(null===(k=window)||void 0===k||null===(I=k.listSecondaryLoading)||void 0===I?void 0:I.time)&&(window.listSecondaryLoading={time:Date.now(),actionname:H.quickFilter});const C=R()(e),{filters:j=[]}=_;return C.quickFilters.list.forEach((e=>{e.status=0})),j.forEach((e=>{C.quickFilters.list.forEach((_=>{_.filterId==e.filterId&&(_.status=1)}))})),C},removeALLFilters=(e,_)=>{var k,I;window&&!(null===(k=window)||void 0===k||null===(I=k.listSecondaryLoading)||void 0===I?void 0:I.time)&&(window.listSecondaryLoading={time:Date.now(),actionname:H.generalFilter});const C=R()(e);return Object.keys(C.generalFilters).forEach((e=>{if("41"==e){var _;null===(_=C.generalFilters[41])||void 0===_||_.lineList.forEach((e=>{var _;e.status=0,null===(_=e.siteList)||void 0===_||_.forEach((e=>{e.status=0}))}))}else{if("80"==e||"17"==e)return;var k;null===(k=C.generalFilters[e].list)||void 0===k||k.forEach((e=>{e.status=0}))}})),C.quickFilters.list.forEach((e=>{e.status=0})),delete C.filterProperty,Object.assign(C.priceFilter,{priceHigh:-1,priceLow:0}),C},removeFilter=(e,_)=>{var k,I;const C=R()(e),{filter:j,type:B}=_,U=["5","94","4"];var V,G;(C.quickFilters.list.forEach((e=>{e.filterId==j.filterId&&(e.status=0)})),"15"==B)?Object.assign(C.priceFilter,{priceHigh:-1,priceLow:0}):"41"==B?null===(V=C.generalFilters[41])||void 0===V||V.lineList.forEach((e=>{var _;e.status=0,null===(_=e.siteList)||void 0===_||_.forEach((e=>{e.filterId==j.filterId&&(e.status=0)}))})):(null===(G=C.generalFilters[B])||void 0===G||G.list.forEach((e=>{e.filterId==j.filterId&&(e.status=0)})),U.includes(B)&&C.quickFilters.list.forEach((e=>{e.filterId==j.filterId&&(e.status=0)})));return window&&!(null===(k=window)||void 0===k||null===(I=k.listSecondaryLoading)||void 0===I?void 0:I.time)&&(window.listSecondaryLoading={time:Date.now(),actionname:"41"==B?H.locationFilter:H.generalFilter}),C},removePoiFilter=e=>{var _,k;let I=R()(e);return["50","18","10","9","41","8","139"].forEach((e=>{var _,k;"41"==e?null===(_=I.generalFilters[41])||void 0===_||_.lineList.forEach((e=>{var _;e.status=0,null===(_=e.siteList)||void 0===_||_.forEach((e=>{e.status=0}))})):null===(k=I.generalFilters[e])||void 0===k||k.list.forEach((e=>{e.status=0}))})),window&&!(null===(_=window)||void 0===_||null===(k=_.listSecondaryLoading)||void 0===k?void 0:k.time)&&(window.listSecondaryLoading={time:Date.now(),actionname:H.locationFilter}),I};function renderFilters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:C}=_;switch(k){case I.oW:return updateGeneralFilters(e,C);case I.Rx:return updatePriceFilter(e,C);case I.lK:return updateQuickFilters(e,C);case I.em:return removeALLFilters(e);case I.l3:return removeFilter(e,C);case I.wB:return removePoiFilter(e);case I.sM:return Object.assign({},C);case I.zR:return(null==C?void 0:C.resultType)===B?Object.assign({},e,{filterProperty:C}):e;case I.uB:return e.filterProperty?Object.assign({},e,{filterProperty:void 0}):e;default:return e}}},83634:function(e,_,k){"use strict";k.d(_,{pH:function(){return I},DN:function(){return C},Wr:function(){return R},Mj:function(){return j},aC:function(){return B},Ic:function(){return H},AE:function(){return U},em:function(){return V},zR:function(){return G},uB:function(){return q}});const I="CALENDAR_UPDATE",C="ROOM_GUEST_UPDATE",R="KEYWORD_UPDATE",j="ALL_INPUT_UPDATE",B="STAR_RATE_UPDATE",H="LOW_PRICE_UPDATE",U="HIGH_PRICE_UPDATE",V="ALLFILTERS_REMOVE",G="UPDATE_SEARCH_HOTEL_PROPERTY",q="REMOVE_SEARCH_HOTEL_PROPERTY"},13550:function(e,_,k){"use strict";k.d(_,{ZP:function(){return searchBarData}});var I=k(96156),C=k(25291),R=k(64337),j=k(23026),B=k(74019),H=k(47419),U=k(28072),V=(k(23072),k(16234)),G=k(8938),q=k(32127),z=k(83634),J=k(63732),Q=k(15393),ee=k(78320);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const te="H";function initKeyword(){if(j.Z){const e=H.default.getByKey("initData.searchCondition")||{},{cityId:_,optionId:k,optionType:I,keyword:R,lat:j,lng:B,timeOffset:U,countryId:V,cityName:G}=e;return 1===e.directSearch?{word:R,displayName:R,id:"",cityId:"",type:I,isDirectSearch:!0,countryId:V,cityName:G}:C.ZD.includes(I)?{}:{word:R,displayName:R,_cityId:_,id:k,type:I,lat:j,lon:B,timeOffset:U,countryId:V,cityName:G}}return{}}const checkDateValid=(e,_,k,I)=>{const C=(0,G.SQ)(k).date,R=(0,G.e3)(C,e);if(0!==R&&!R||R<0)return!1;const j=(0,G.e3)(e,_);return!(!j||j<1||j>I)},getInitState=e=>{var _;const{ctx:k,timeOffset:I,TimeOffsetValid:j,emptyKeys:H={},search:z,urlQueryData:J}=e||{};let te;var ne;k?(te=null===(ne=k.state)||void 0===ne?void 0:ne.tripQuery,J&&(te=(e=>{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("formatLowcaseKey data params should be a object!");return Object.keys(e).reduce(((_,k)=>_objectSpread(_objectSpread({},_),{},{[k.toLowerCase()]:e[k]})),{})})(J))):te=(0,q.u0)(null,!0);const{travelpurpose:re,lowprice:oe,highprice:ie}=te||{},{checkin:ae,startdate:le,ci:se,checkout:ce,depdate:ue,co:de,crn:pe,adult:he,children:fe,ages:me="",allianceid:ge,trip_sub1:ve=""}=te||{},ye=(0,R.a8)(Number(fe),me),be=ae||le||se,_e=ce||ue||de,we=null!==(_=U.Z.get(ee._7,k))&&void 0!==_?_:"",Ee=we?JSON.parse(we):{};let Se={};if(H.calendar)Se={};else{const e=(0,Q.Z)(k);let _,C,R,B=!1;if(checkDateValid(be,_e,I,e))C=be,R=_e;else if(Ee.checkIn&&Ee.checkOut&&checkDateValid(Ee.checkIn,Ee.checkOut,I,e))C=Ee.checkIn,R=Ee.checkOut;else{C=(0,G.SQ)(I).date,R=(0,G.bU)(C,1).date,B=!0}ge===ee.Th&&(e=>{const _=null==e?void 0:e.match(/_(\d+)-LANG/);return!!_&&"1"===_[1]})(ve)&&(B=!0),_=(0,V.Lf)({checkIn:C,checkOut:R,timeOffset:!j&&I,maxNights:e}),Se={checkIn:_.checkInStr,checkOut:_.checkOutStr,timeOffset:_.timeOffset,nights:_.nights,needSelectTime:B}}return Object.assign({},C.ZV,{star:[],calendar:Se,keyword:H.calendar?{}:initKeyword(),search:H.calendar?{}:z,travel:"1"===re,lowPrice:oe?+oe:0,highPrice:ie?+ie:-1,barCurr:(0,B.zC)(k),roomGuest:{rooms:pe||1,adults:he||2,children:fe||0,childAges:ye?ye.split(",").filter((e=>/\d+$/.test(e))):[],childBeds:[],childMeals:[],childTypes:[]}})},ne=["BFF_DESTINATION_UPDATE",z.pH,z.DN,z.Wr,z.aC,z.Ic,z.AE];function searchBarData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getInitState(),_=arguments.length>1?arguments[1]:void 0;const{key:k,data:I,type:C,payload:R}=_;if(~ne.indexOf(C))return Object.assign({},e,{[k]:I});if(C===z.Mj)return I;if(C===z.em)return Object.assign({},e,{star:[],lowPrice:0,highPrice:-1});if(C===z.zR){var j,B,H;if((null==R?void 0:R.resultType)===te)return(null==e||null===(j=e.search)||void 0===j||null===(B=j.city)||void 0===B?void 0:B.geoCode)!==(null==R||null===(H=R.city)||void 0===H?void 0:H.geoCode)&&(R.triggerFromSearchPropertyShowChangeTip=!0),Object.assign({},e,{search:R})}else{var U;if(C===z.uB)return null==e||(null===(U=e.search)||void 0===U||delete U.triggerFromSearchPropertyShowChangeTip),Object.assign({},e,{search:_objectSpread(_objectSpread({},e.search),{},{resultWord:"",item:{},resultType:"CT"})});if("SEARCHBARDATA_CLEAR_KEYWORD"===C){var V;if(null==e||null===(V=e.search)||void 0===V?void 0:V.resultWord){var G;let _=(0,J.en)(window.location.href);if(decodeURIComponent(null==_||null===(G=_.searchs)||void 0===G?void 0:G.searchWord)===e.search.resultWord){_.searchs.searchType="",_.searchs.searchWord="",_.searchs.searchValue="",_.searchs.searchCoordinate="";let e=(0,J.Q2)(_.origin+_.pathname,_.searchs);window.history.replaceState(null,"",e)}e.search.resultWord="",e.search.item={}}return Object.assign({},e)}}return e}},76457:function(e,_,k){"use strict";k.d(_,{jH:function(){return updatePosition},CZ:function(){return updateSeachConditionDirectSearch},WB:function(){return updateSearchCondition}});var I=k(77835);function updatePosition(e){return{type:I.nP,payload:e}}function updateSeachConditionDirectSearch(e){return{type:I.G8,payload:e}}function updateSearchCondition(e){return{type:I.mk,payload:e}}},77835:function(e,_,k){"use strict";k.d(_,{nP:function(){return I},G8:function(){return C},qV:function(){return R},mk:function(){return j}});const I="POSITION_UPDATE",C="SEARCHCONDITION_DIRECTSEARCH_UPDATE",R="UPDATE_ALL_SEARCHDITION",j="UPDATE_SEARCH_CONDITION"},73964:function(e,_,k){"use strict";k.d(_,{Z:function(){return searchCondition}});var I=k(96156),C=k(77835);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let R={};function searchCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case C.nP:return _objectSpread(_objectSpread({},e),I);case C.G8:return _objectSpread(_objectSpread({},e),{directSearch:I});case C.qV:return I;case C.mk:return _objectSpread(_objectSpread({},e),I)}return e}},64512:function(e,_,k){"use strict";k.d(_,{A:function(){return I}});const I="SEARCH_INPUT_KEYWORD_UPDATE"},16134:function(e,_,k){"use strict";k.d(_,{Z:function(){return searchInputKeyword}});var I=k(64512);function searchInputKeyword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{type:_,data:k}=arguments.length>1?arguments[1]:void 0;return _===I.A?k:e}},23640:function(e,_,k){"use strict";k.d(_,{W:function(){return I}});const I="UPDATE_LIST_SORTINFO"},45556:function(e,_,k){"use strict";k.d(_,{Z:function(){return sortInfo}});var I=k(96156),C=k(23640);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const R={list:k(47419).default.getByKey("initData.sortInfo.list")||[],userChanged:!1};function sortInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;return I===C.W?Object.assign({},e,_objectSpread({},k)):e}},46002:function(e,_,k){"use strict";k.d(_,{L:function(){return H},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var I=k(96156),C=k(72427),R=k(92118),j=k(23026),B=k(78768);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const H={fgt:"",hotelId:"",priceToleranceData:"",priceToleranceDataValidationCode:"",mpRoom:[],hotelUniqueKey:"",shoppingid:"",minPrice:"",minCurr:""},getMpRoom=e=>e?e.split(/,|_/):[],__WEBPACK_DEFAULT_EXPORT__=e=>{const _=B.Z.getState().ajaxLoad;let k,I,H,U;if(j.Z){const e=(0,R.Z)("stand");H={fgt:(0,R.Z)("fgt"),hotelId:(0,R.Z)("hotelid"),priceToleranceData:e,priceToleranceDataValidationCode:(0,R.Z)("stdcode"),mpRoom:getMpRoom((0,R.Z)("mproom")),hotelUniqueKey:e||(0,R.Z)("hotelUniqueKey"),shoppingid:(0,R.Z)("shoppingid"),hideRecommend:!0},k=(0,R.Z)("minprice"),I=(0,R.Z)("mincurr"),U="B"}else{const _=(0,C.Z)(e,"stand",""),R=(0,C.Z)(e,"hotelUniqueKey","");H={fgt:(0,C.Z)(e,"fgt",""),hotelId:(0,C.Z)(e,"hotelid",""),priceToleranceData:_,priceToleranceDataValidationCode:(0,C.Z)(e,"stdcode",""),mpRoom:getMpRoom((0,C.Z)(e,"mproom","")),hotelUniqueKey:_||R,shoppingid:(0,C.Z)(e,"shoppingid",""),hideRecommend:!0},k=(0,C.Z)(e,"minprice",""),I=(0,C.Z)(e,"mincurr",""),U="B"}return"NORMAL"===_.type?_objectSpread(_objectSpread({},H),{},{minPrice:k,minCurr:I,guideDescABResult:U}):_objectSpread(_objectSpread({},H),{},{guideDescABResult:U})}},68433:function(e,_,k){"use strict";k.d(_,{zy:function(){return logListpageFilterItemShow},Wj:function(){return logListpageDiscountChoice},M3:function(){return logListpageShowMap},OH:function(){return logListpageStarChoice},bQ:function(){return logListpageQuickfilterChoice},t9:function(){return logListpagePaytypeChoice},T2:function(){return logListpageRoomNumChoice},ZO:function(){return logSearchBoxUserChoice},rl:function(){return crossBannerExposure},ZM:function(){return crossBannerClick},Xg:function(){return crossDialogExposure},fD:function(){return crossFloatingShow},LC:function(){return unlockAllClick},x7:function(){return searchDataLogDestinationClick},xA:function(){return searchDataLogDestinationRecommendation},x3:function(){return searchDataLogKeywordsRecommendation},Rm:function(){return searchDataLogKeywordsClick},bn:function(){return logHomePageSearchBoxHotDistrictClick},J9:function(){return logListpageBrandChoice},jE:function(){return logListpageStayTypeChoice},eQ:function(){return logListpageFacilityChoice},W3:function(){return logListpageThemeHotelChoice},mn:function(){return logListpageFilterItemAction},of:function(){return logListpagePopularfiltersClick},T9:function(){return logListpageCommentScoreChoice},O7:function(){return logListpageBedChoice},mI:function(){return logListpageBookableChoice},yA:function(){return clickLoginOrRegister},zC:function(){return clickLogin},EQ:function(){return showLoginOrRegisterResult},Cf:function(){return showLoginInfo},TX:function(){return showLogin},Vz:function(){return logLowPriceCalendarAB},Xe:function(){return logCheckInAndOutDateLayerAction},Hn:function(){return logClickLogin},k9:function(){return logBenefitShow},cL:function(){return logShowResult},s4:function(){return logHotelGoldenShow},rW:function(){return logSearchBoxOpen},XD:function(){return logHomePageSearchBoxUserInput},Kj:function(){return logSearchHotDestinationError},$y:function(){return logGetSearchEngineError},aA:function(){return loglistpageHotelSearch},kH:function(){return logmetapageHotelSearch},CJ:function(){return logCheckInAndOutDateChange},nF:function(){return logHomePageGuestAndRoomLayerAction},WH:function(){return logListpageGuestAndRoomLayerDoneClick},cZ:function(){return logRoomguestsProvideShow},Ry:function(){return logPriorityClick},ZW:function(){return PriceTagShow},w2:function(){return logTagShow},aV:function(){return logListpageChildrenAgeChoice},Dp:function(){return logListpageNumChangeDirectionMinus},oE:function(){return logListpageNumChangeDirectionPlus},kE:function(){return logShow},xb:function(){return logClick},EV:function(){return listDatecardClick},k:function(){return listDatecardExposure},Mx:function(){return detailDatecardClick},Cl:function(){return detailDatecardExposure},WW:function(){return moreDates},PV:function(){return logGetBrowseRecordError},KD:function(){return logUbtHotelList},Kt:function(){return logFilterItemCount},O3:function(){return logListpagePriceChoiceType},Fc:function(){return logListpagePriceChoiceRange},Pc:function(){return logListpagePriceSlide},d6:function(){return logListpagePriceinputClick},PH:function(){return logViewdHotelClick},dM:function(){return viewDateLoad},uT:function(){return viewDateClick},aJ:function(){return logListFilterClearAll},cQ:function(){return B},Ad:function(){return logSearchLineShow},jG:function(){return logClickDetailSearhButton},S1:function(){return H},tl:function(){return logSearchTipBubbleVisible},RR:function(){return logSearchTipBubbleClose},i7:function(){return logSystemChangeClose}});var I=k(96156),C=k(89205),R=(k(50875),k(47419)),j=(k(24986),k(72427));function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const rangeLogValue=(e,_)=>{if("detailpage"===(0,C.h8)()){const{base:k,baseRoom:I}=e.data||{},{roomId:C,availParam:R}=k||{},{roomId:j}=I||{};_=Object.assign(_,{roomid:C,baseroomid:j,roomUniqueKey:(null==R?void 0:R.roomUniqueKey)||""})}return _},logListpageFilterItemShow=()=>({logDesc:"filteritem_show",logKey:"ibu_htl_"+(0,C.h8)()+"_filteritem_show",logValue:{filtername:"discount"}}),logListpageDiscountChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_?_+=", "+e.text:_=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_discount_choice",logValue:{text:_,selected:_?"T":"F"},logDesc:"discount_choice"}},logListpageShowMap=()=>({logKey:"ibu_htl_"+(0,C.h8)()+"_showonmap",logDesc:"hotel listpage showmap"}),logListpageStarChoice=e=>{let _="";return null==e||e.forEach((e=>{1!==e.status&&!0!==e.status||(_?_+=", "+e.value:_=e.value)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_star_choice",logValue:{star:_||null},logDesc:"Star filter"}},logListpageQuickfilterChoice=(e,_)=>{let k="";return null==e||e.forEach((e=>{1!==e.status&&!0!==e.status||(k+=k?", "+e.text:e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_quickfilter_choice",logDesc:"quickfilter_choice",logValue:{filteritems:k||null,position:_?"2":"1"}}},logListpagePaytypeChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_paytype_choice",logValue:{paytype:_||null},logDesc:"Payment method filtering"}},logListpageRoomNumChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_room_num_choice",logValue:{roomNum:_||null},logDesc:"Room num method filtering"}},logSearchBoxUserChoice=e=>{let _={};if("10320668147"===R.default.getByKey("pageId")){let k=R.default.getByKey("initData.base.masterHotelId")||"";_.masterhotelid=k,_.id=e.id}else _.id=e.id;return{logKey:"ibu_htl_"+(0,C.h8)()+"_searchbox_userchoice",logValue:_objectSpread(_objectSpread({},_),{},{type:e.type,word:e.displayName,cityid:e.cityId,cityname:e.cityName,lat:e.gLat,lon:e.gLon,coordtype:"gg"}),logDesc:"searchbox_userchoice"}},crossBannerExposure=e=>({logKey:"htl_t_online_list_crosssell_banner_exposure",logValue:_objectSpread({page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale")},e),logDesc:"cross banner exposure "}),crossBannerClick=e=>({logKey:"htl_t_online_list_crosssell_banner_click",logValue:_objectSpread({page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale")},e),logDesc:"cross banner click"}),crossDialogExposure=e=>({logKey:"htl_t_online_list_crosssell_floating_exposure",logValue:_objectSpread({page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale")},e),logDesc:"cross dialog exposure"}),crossFloatingShow=e=>({logKey:"htl_t_online_list_crosssell_floating_coupdtl_hover",logValue:_objectSpread({page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale")},e),logDesc:"cross dialog floating show"}),unlockAllClick=()=>({logKey:"htl_t_online_list_crosssell_floating_unlock_click",logValue:{page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale")},logDesc:"cross dialog unlock click"}),searchDataLogDestinationClick=e=>({logKey:"ibu_htl_searchdatalog_destination_click",logValue:_objectSpread({},e),logDesc:"searchdatalog_destination_click"}),searchDataLogDestinationRecommendation=e=>({logKey:"ibu_htl_searchdatalog_destination_recommendation",logValue:_objectSpread({},e),logDesc:"searchdatalog_destination_recommendation"}),searchDataLogKeywordsRecommendation=e=>({logKey:"ibu_htl_searchdatalog_keywords_recommendation",logValue:_objectSpread({},e),logDesc:"searchdatalog_keywords_recommendation"}),searchDataLogKeywordsClick=e=>({logKey:"ibu_htl_searchdatalog_keywords_click",logValue:_objectSpread({},e),logDesc:"searchdatalog_keywords_click"}),logHomePageSearchBoxHotDistrictClick=e=>({logKey:"htl_ol_wcl_popularcity_dest_click",logValue:{page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),channeltype:"online",regionid:null==e?void 0:e._cityId,regionname:null==e?void 0:e.displayName},logDesc:"ibu_htl_ol_wcl_popularcity_dest_click"}),logListpageBrandChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_?_+=", "+e.text:_=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_brand_choice",logValue:{brands:_||null},logDesc:"Brand filter"}},logListpageStayTypeChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_?_+=", "+e.text:_=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_staytype_choice",logValue:{staytypes:_||null},logDesc:"Accommodation type filtering"}},logListpageFacilityChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_?_+=", "+e.text:_=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_facility_choice",logValue:{facility:_||null},logDesc:"Facilities for filtering"}},logListpageThemeHotelChoice=e=>{let _="",k="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_?(_+=", "+e.text,k+=", "+e.value):(_=e.text,k=e.value))})),{logKey:"ibu_htl_"+(0,C.h8)()+"_themehotel_choice",logValue:{themehotels:_||null,themehotelids:k||null},logDesc:"themehotel_choice"}},logListpageFilterItemAction=e=>({logKey:"ibu_htl_"+(0,C.h8)()+"_filteritem_action",logValue:{filteritem:e,action:"expand"},logDesc:"filteritem_action"}),logListpagePopularfiltersClick=e=>({logKey:"ibu_htl_list_popularfilters_click",logValue:{page:R.default.getByKey("pageId"),filtercontext:e}}),logListpageCommentScoreChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_=e.value)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_commentscore_choice",logValue:{min:_||null},logDesc:"Point scoring filter"}},logListpageBedChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_bed_choice",logValue:{bed:_||null},logDesc:"Bed type filtration"}},logListpageBookableChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_=1)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_bookable_choice",logValue:{bookable:_||null},logDesc:"Can order filtering"}},clickLoginOrRegister=(e,_)=>{var k;let I={masterhotelid:(null===(k=e.data)||void 0===k?void 0:k.masterHotelId)||""};return I=rangeLogValue(e,I),{logKey:"ibu_htl_".concat((0,C.h8)(),"_").concat(_),logValue:I,logDesc:_}},clickLogin=(e,_)=>{var k,I;return{logKey:"ibu_htl_list_login_click",logValue:{masterhotelid:(null===(k=e.data)||void 0===k?void 0:k.masterHotelId)||"",page:R.default.getByKey("pageId"),type:_,locale:R.default.getByKey("cargo.locale")||"",ishideprice:(null===(I=e.data)||void 0===I?void 0:I.isHidePrice)||0},logDesc:"list_login_click",actionType:"click"}},showLoginOrRegisterResult=(e,_,k)=>{var I,R;let j={action:_,masterhotelid:(null===(I=e.data)||void 0===I?void 0:I.masterHotelId)||"",result:k,ishideprice:(null===(R=e.data)||void 0===R?void 0:R.isHidePrice)||0};return j=rangeLogValue(e,j),{logKey:"ibu_htl_".concat((0,C.h8)(),"_login_register_result"),logValue:j,logDesc:"login_register_result"}},showLoginInfo=e=>{var _;let k={masterhotelid:(null===(_=e.data)||void 0===_?void 0:_.masterHotelId)||""};return k=rangeLogValue(e,k),{actionType:"scroll",logKey:"ibu_htl_".concat((0,C.h8)(),"_login_show"),logValue:k,logDesc:"login_show"}},showLogin=e=>{var _,k;return{actionType:"show",logKey:"ibu_htl_list_login_show",logValue:{masterhotelid:(null===(_=e.data)||void 0===_?void 0:_.masterHotelId)||"",page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale")||"",ishideprice:(null===(k=e.data)||void 0===k?void 0:k.isHidePrice)||0},logDesc:"login_show"}},logLowPriceCalendarAB=e=>({logKey:"ibu_htl_"+(0,C.h8)()+"_lowpricecalendar",logValue:e}),logCheckInAndOutDateLayerAction=e=>(0,C.h8)()?{logKey:e?"htl_ol_wcl_search_dateLayer_exposure":"htl_ol_wcl_search_dateLayerClose_click",logValue:{locale:R.default.getByKey("cargo.locale"),page:R.default.getByKey("pageId"),channeltype:"online"},logDesc:"checkinandoutdatelayer_action"}:null,logClickLogin=()=>({logKey:"ibu_htl_".concat((0,C.h8)(),"_gold_exp_benefit_click"),logDesc:"gold_exp_benefit_click",actionType:"click",logValue:{page:R.default.getByKey("pageId")||""}}),logBenefitShow=e=>({logKey:"ibu_htl_".concat((0,C.h8)(),"_gold_exp_benefit_show"),logDesc:"gold_exp_benefit_show",actionType:"scroll",logValue:{canget:e?"T":"F"}}),logShowResult=e=>({logKey:"ibu_htl_".concat((0,C.h8)(),"_gold_exp_benefit_result"),logDesc:"gold_exp_benefit_result",actionType:"click",logValue:{result:e,page:R.default.getByKey("pageId")||""}}),logHotelGoldenShow=e=>({logDesc:"gold_exp_benefit_result",logKey:"ibu_htl_".concat(e,"_gold_exp_benefit_result"),actionType:"click",logValue:{result:"T"}}),logSearchBoxOpen=()=>({logDesc:"searchbox_open",logKey:"ibu_htl_".concat((0,C.h8)(),"_searchbox_open"),logValue:{}}),logHomePageSearchBoxUserInput=e=>({logDesc:"searchbox_userinput",logKey:"ibu_htl_"+(0,C.h8)()+"_searchbox_userinput",logValue:{userinput:e}}),logSearchHotDestinationError=e=>({logKey:"home_search_hot_destination_error",logDesc:"home_search_hot_destination_error",logValue:e}),logGetSearchEngineError=e=>({logKey:"hotel_home_search_get_search_engine_error",logDesc:"hotel_home_search_get_search_engine_error",logValue:e}),loglistpageHotelSearch=(e,_,k,I)=>{var R,B,H,U;let V={id:e.id||null,type:e.resultType||null,word:e.resultWord||null,cityid:(null==e||null===(R=e.city)||void 0===R?void 0:R.geoCode)||null,cityname:(null==e||null===(B=e.city)||void 0===B?void 0:B.currentLocaleName)||null,countryid:(null==e||null===(H=e.country)||void 0===H?void 0:H.geoCode)||null,provinceid:(null==e||null===(U=e.province)||void 0===U?void 0:U.geoCode)||null,lat:-1===e.lat?null:e.lat,lon:-1===e.lon?null:e.lon,coordtype:(0,j.Z)(I,"searchCondition.mapType","")||"gg",checkin:_.checkIn,checkout:_.checkOut,roomnum:k.rooms||null,adult:k.adults||null,child:k.children||null,childages:k.childAges||null};return{logKey:"ibu_htl_"+(0,C.h8)()+"_hotelsearch",logValue:V,logDesc:"search_button_click"}},logmetapageHotelSearch=(e,_,k,I)=>{let R={id:e.id||null,type:e.type||null,word:e.word||null,cityid:e._cityId||null,cityname:e.cityName||null,lat:-1===e.lat?null:e.lat,lon:-1===e.lon?null:e.lon,coordtype:(0,j.Z)(I,"searchCondition.mapType","")||"gg",checkin:_.checkIn,checkout:_.checkOut,roomnum:k.rooms||null,adult:k.adults||null,child:k.children||null,childages:k.childAges||null};return{logKey:"ibu_htl_"+(0,C.h8)()+"_hotelsearch",logValue:R,logDesc:"search_button_click"}},logCheckInAndOutDateChange=e=>({logKey:"htl_ol_wcl_search_dateLayer_change_click",logValue:{locale:R.default.getByKey("cargo.locale"),page:R.default.getByKey("pageId"),channeltype:"online",searchDateList:[{checkin:e.checkIn,checkout:e.checkOut}]},logDesc:"checkinandoutdate_change"}),logHomePageGuestAndRoomLayerAction=e=>({logKey:"htl_ol_wcl_search_prnumLayer_exposure",logValue:{locale:R.default.getByKey("cargo.locale"),page:R.default.getByKey("pageId"),channeltype:"online",action:e},logDesc:"guestandroomlayer_action"}),logListpageGuestAndRoomLayerDoneClick=e=>({logKey:"htl_ol_wcl_search_prnumLayer_close_click",logValue:{adultnum:(null==e?void 0:e.adults)||null,childnum:(null==e?void 0:e.childs)||null,roomnum:(null==e?void 0:e.rooms)||null,actionType:"done",locale:R.default.getByKey("cargo.locale"),page:R.default.getByKey("pageId"),channeltype:"online"},logDesc:"guestandroomlayer_done_click"}),logRoomguestsProvideShow=e=>({logKey:"ibu_htl_roomguests_provide_show",logValue:_objectSpread({},e),logDesc:"logRoomguestsProvideShow"}),logPriorityClick=e=>({logKey:"ibu_htl_roomguests_priority_click",logValue:_objectSpread({},e),logDesc:"logRoomguestsProvideClick"}),PriceTagShow=e=>({logKey:"ibu_htl_c_online_list_pricetag_show",logValue:_objectSpread({},e)}),logTagShow=e=>({logKey:"ibu_htl_list_tag_show",logValue:_objectSpread({},e),logDesc:"logTagShow"}),logListpageChildrenAgeChoice=(e,_)=>({logKey:"htl_ol_wcl_search_prnumLayer_childage_click",logValue:{page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),channeltype:"online",index:_+1,age:e},logDesc:"childrenage_choice"}),logListpageNumChangeDirectionMinus=(e,_)=>{let k={key:e,direction:"subtract",roomnum:_,page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),channeltype:"online"},I="ibu_htl_c_online_listpage_numchange_direction";switch(e){case"roomnum":I="htl_ol_wcl_search_prnumLayer_roomnum_click";break;case"adult":I="htl_ol_wcl_search_prnumLayer_adultnum_click";break;case"children":I="htl_ol_wcl_search_prnumLayer_childnum_click"}return{logKey:I,logValue:k,logDesc:"numchange_direction"}},logListpageNumChangeDirectionPlus=(e,_)=>{let k={key:e,direction:"plus",roomnum:_,page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),channeltype:"online"},I="ibu_htl_c_online_listpage_numchange_direction";switch(e){case"roomnum":I="htl_ol_wcl_search_prnumLayer_roomnum_click";break;case"adult":I="htl_ol_wcl_search_prnumLayer_adultnum_click";break;case"children":I="htl_ol_wcl_search_prnumLayer_childnum_click"}return{logKey:I,logValue:k,logDesc:"numchange_direction"}},logShow=e=>{const{masterhotelid:_,recommenddates:k=[],page:I=""}=e;return{actionType:"load",logDesc:"recommenddate_show",logKey:"ibu_htl_".concat(I,"_recommenddate_show"),logValue:{masterhotelid:_,recommenddates:k}}},logClick=e=>{const{masterhotelid:_,date:k,price:I,index:C,page:R=""}=e;return{actionType:"click",logDesc:"recommenddate_click",logKey:"ibu_htl_".concat(R,"_recommenddate_click"),logValue:{masterhotelid:_,recommenddate:{date:k,price:I},index:C}}},listDatecardClick=e=>{const{masterhotelid:_,index:k,checkIn:I,price:C,checkOut:j,masterhotelid_tracelogid:B}=e;return{actionType:"click",logDesc:"listdatecard_click",logKey:"htl_t_online_list_datecard_click",logValue:{masterhotelid:_,checkIn:I,checkOut:j,price:C,index:k,page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),masterhotelid_tracelogid:B}}},listDatecardExposure=e=>{const{masterhotelid:_,index:k,checkIn:I,price:C,checkOut:j,masterhotelid_tracelogid:B}=e;return{actionType:"exposure",logDesc:"listdatecard_exposure",logKey:"htl_t_online_list_datecard_exposure",logValue:{masterhotelid:_,checkIn:I,checkOut:j,price:C,index:k,page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),masterhotelid_tracelogid:B}}},detailDatecardClick=e=>{const{masterhotelid:_,index:k,checkIn:I,price:C,checkOut:j,rmlist_tracelogid:B}=e;return{actionType:"click",logDesc:"detaildatecard_click",logKey:"htl_t_online_dtl_datecard_click",logValue:{masterhotelid:_,checkIn:I,checkOut:j,price:C,index:k,page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),rmlist_tracelogid:B}}},detailDatecardExposure=e=>{const{masterhotelid:_,index:k,checkIn:I,checkOut:C,price:j,rmlist_tracelogid:B}=e;return{actionType:"exposure",logDesc:"detaildatecard_exposure",logKey:"htl_t_online_dtl_datecard_exposure",logValue:{masterhotelid:_,checkIn:I,checkOut:C,index:k,price:j,page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale"),rmlist_tracelogid:B}}},moreDates=e=>{const{masterhotelid:_}=e;return{actionType:"click",logDesc:"moredates_click",logKey:"htl_t_online_dtl_moredate_click",logValue:{masterhotelid:_,page:R.default.getByKey("pageId"),locale:R.default.getByKey("cargo.locale")}}},logGetBrowseRecordError=e=>({logKey:"getBrowseRecord_error",logDesc:"getBrowseRecord_error",logValue:e}),logUbtHotelList=e=>{var _,k;const{hotelList:I=[]}=e,R=e&&(null==I?void 0:I.length)>0?null===(_=I[0])||void 0===_||null===(k=_.trace)||void 0===k?void 0:k.traceLogId:"";let j=(0,C.h8)();return{logKey:"ibu_htl_".concat(j,"_wholeprocess"),logDesc:"".concat(j,"_wholeprocess"),actionType:"load",logValue:{tracelogid:R}}},logFilterItemCount=e=>({logKey:"ibu_htl_"+(0,C.h8)()+"_filteritem_count",actionType:"click",logValue:{count:e},logDesc:"filteritem_count"}),logListpagePriceChoiceType=(e,_)=>{var k;const{priceHigh:I,priceLow:j}=(null==_?void 0:_.priceRange)||{};let B="";return null==e||null===(k=e.list)||void 0===k||k.forEach((e=>{1!==e.status&&!0!==e.status||(B=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_price_choice",logValue:{type:B||null,min:-1===j?null:j,max:-1===I?null:I,currency:R.default.getByKey("cargo.currency")||""},logDesc:"The price filter"}},logListpagePriceChoiceRange=(e,_)=>{var k,I;let j="";return null==_||null===(k=_.priceType)||void 0===k||null===(I=k.list)||void 0===I||I.forEach((e=>{1!==e.status&&!0!==e.status||(j=e.text)})),{logKey:"ibu_htl_"+(0,C.h8)()+"_price_choice",logValue:{type:j||null,min:-1===e.priceLow?null:e.priceLow,max:-1===e.priceHigh?null:e.priceHigh,currency:R.default.getByKey("cargo.currency")||""},logDesc:"The price filter"}},logListpagePriceSlide=()=>({logKey:"ibu_htl_list_price_slide",logValue:{page:R.default.getByKey("pageId")}}),logListpagePriceinputClick=e=>({logKey:"ibu_htl_list_priceinput_click",logValue:{page:R.default.getByKey("pageId"),price:e}}),logViewdHotelClick=e=>{const{type:_,clickHotelId:k,masterHotelId:I}=e;let R;switch(_){case"listpage":R={masterhotelid:k};break;case"detailpage":R={masterhotelid:I,viewedmasterhotelid:k}}return{logKey:"ibu_htl_"+(0,C.h8)()+"_viewedhotel_click",logValue:R,logDesc:"click of viewed hotel"}},viewDateLoad=e=>({logKey:"ibu_htl_detailpage_viewDates_load",logValue:e}),viewDateClick=e=>({logKey:"ibu_htl_detailpage_viewDates_click",logValue:e}),logListFilterClearAll=()=>({logKey:"ibu_htl_c_online_list_clearall_click",logValue:{page:R.default.getByKey("pageId")}}),B=function logToastShow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{logKey:"ibu_htl_c_online_toast_show",logValue:{page:R.default.getByKey("pageId")||"",locale:R.default.getByKey("cargo.locale")||"",popType:e,pop_msg:_,pop_scenes:k}}},logSearchLineShow=e=>({logKey:"htl_t_online_searchbox_exposure",logValue:{page:R.default.getByKey("pageId")||"",locale:R.default.getByKey("cargo.locale")||"",linenum:e}}),logClickDetailSearhButton=()=>({logKey:"htl_t_online_dtl_query_click",logDesc:"query_click_search_button",logValue:{locale:R.default.getByKey("cargo.locale"),page:R.default.getByKey("pageId")}}),H=function logSystemChangeCal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{logDesc:"query_click_search_button",logKey:"htl_t_online_list_checkinout_nosame_autoLoad",logValue:{page:R.default.getByKey("pageId")||"",locale:R.default.getByKey("cargo.locale")||"",channeltype:"online",searchDateList:[{checkin:e.systemcheckin||"",checkout:e.systemcheckout||""}],manualcheckin:e.manualcheckin||"",manualcheckout:e.manualcheckout||"",systemcheckin:e.systemcheckin||"",systemcheckout:e.systemcheckout||""}}},logSearchTipBubbleVisible=e=>{let{text:_=""}=e;return{logDesc:"search_tip_bubble_visible",logKey:"htl_ol_wcl_search_tooltips_exposure",logValue:{page:R.default.getByKey("pageId")||"",locale:R.default.getByKey("cargo.locale")||"",display_text:_,channeltype:"online"}}},logSearchTipBubbleClose=e=>{let{text:_=""}=e;return{logDesc:"search_tip_bubble_close",logKey:"htl_ol_wcl_search_tooltipsClose_click",logValue:{page:R.default.getByKey("pageId")||"",locale:R.default.getByKey("cargo.locale")||"",display_text:_,channeltype:"online"}}},logSystemChangeClose=()=>({logDesc:"query_click_search_button",logKey:"detailpage"===(0,C.h8)()?"htl_t_online_dtl_pop_checkin_out_close_click":"htl_t_online_list_pop_checkin_out_close_click",logValue:{page:R.default.getByKey("pageId")||"",locale:R.default.getByKey("cargo.locale")||""}})},61407:function(e,_,k){"use strict";function __WEBPACK_DEFAULT_EXPORT__(e){switch(e){case"gg":case"gmap":return"gg";case"mb":case"mapbox":default:return"mb"}}k.d(_,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},24801:function(e,_,k){"use strict";k.d(_,{Z:function(){return _createStore}});var I=k(14890),C=k(94500),R=k(53894),j=k(95409);const B="object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):I.qC,H=(0,C.createLogger)({}),U=["fat","dev"].includes((0,j.getEnv)())?(0,I.md)(H):e=>e,V=B((0,I.md)(R.Z),U);function _createStore(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return(0,I.MT)(..._,V)}},973:function(e,_,k){"use strict";k.d(_,{Mb:function(){return I},In:function(){return C},mo:function(){return R},XN:function(){return j},rK:function(){return B},ZV:function(){return H},VS:function(){return U},Tf:function(){return V},qO:function(){return G},ep:function(){return q}});const I="ibu_hotel_search_filter",C="roomGuest",R="search",j="calendar",B="keyword",H={[C]:{rooms:1,adults:1,children:0,childAges:[],childBeds:[],childMeals:[],childTypes:[]},[R]:{},[j]:{},[B]:{}},U={City:"CT",IntlCity:"IntlCity",District:"S",IntlDistrict:"IntlDistrict",Airport:"A",RailwayStation:"T",Zone:"Z",Location:"D",Markland:"LM",Hotel:"H",CityHotelBrand:"B",CityHotelGroup:"G",Metro:"ML",MetroStation:"MT",Province:"P",Country:"C",DirectSearch:"DirectSearch",HOTELFEATURE:"HOTELFEATURE",CommonWordN:"N"},V=(U.Airport,U.RailwayStation,U.Markland,U.MetroStation,U.Province,U.IntlDistrict,U.Province,U.IntlDistrict,U.District,U.IntlDistrict,U.District,U.Province,U.City,U.IntlCity,U.City,U.IntlCity,U.IntlDistrict,U.District,U.Province,38),G=40,q=13},24986:function(e,_,k){"use strict";k.d(_,{Mb:function(){return I},Js:function(){return C},mo:function(){return R},XN:function(){return j},E8:function(){return B},VS:function(){return H},Gd:function(){return U},hS:function(){return V}});const I="ibu_hotel_search_filter",C="star",R="search",j="calendar",B="travel",H={City:"CT",IntlCity:"IntlCity",District:"S",IntlDistrict:"IntlDistrict",Airport:"A",RailwayStation:"T",Zone:"Z",Location:"D",Markland:"LM",Hotel:"H",CityHotelBrand:"B",CityHotelGroup:"G",Metro:"ML",MetroStation:"MT",Province:"P",Country:"C",DirectSearch:"DirectSearch",HOTELFEATURE:"HOTELFEATURE"},U=(H.Airport,H.RailwayStation,H.Markland,H.MetroStation,H.Province,H.IntlDistrict,[H.Province,H.IntlDistrict,H.District]),V=(H.IntlDistrict,H.District,H.Province,H.City,H.IntlCity,[H.City,H.IntlCity,H.IntlDistrict,H.District,H.Province])},94361:function(e,_,k){"use strict";k.d(_,{oG:function(){return getFilterList},ot:function(){return me},ZP:function(){return __WEBPACK_DEFAULT_EXPORT__}});var I=k(22122),C=k(96156),R=k(32127),j=k(95528),B=k(68661),H=k(47419),U=k(54482),V=k(57781),G=k(76243),q=k(40567),z=k(23687),J=k(74019),Q=k(12992),ee=k(90339),te=k(48368),ne=k(19045),re=k(28072),oe=k(7533),ie=k(62455),ae=k(91734),le=k(15458),se=k(89205),ce=k(64337),ue=k(78320),de=k(48467).default,pe=k(39621).default,he=k(67294);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,C.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const getUpperCaseBarCurr=()=>{const e=(0,R.WH)("barcurr")||void 0;return e?e.toUpperCase():e},getUpperCaseCurr=()=>{const e=(0,R.WH)("curr")||H.default.getByKey("cargo.currency")||void 0;if(e)return null==e?void 0:e.toUpperCase()},fe="T"===H.default.getByKey("qconfigData.turnOnQueryFilter15Range"),getFindResult=(e,_)=>{const k={1:1,2:2,4:3,5:4},I=(e||[]).find((e=>e.status));return"bedType"==_?I?k[I.value]:void 0:"payType"==_?I?Number(I.value):void 0:I?I.value:void 0},getFilterResult=(e,_)=>{const k=(e||[]).filter((e=>e.status));let I;if("bookPolicy"==_){let e={10:1,5:2};I=k.map((_=>e[_.value]))}else I=k.map((e=>e.value));return I.join(",")||void 0},getCompatibleFilterResult=e=>{let{isSwitchNewFilter:_=!1,type:k="",selectedFilterList:I=[],list:C,callbackFn:R=getFilterResult}=e;if(!_)return R(C,k);return R(I.reduce(((e,_)=>_.type===(null===ue.Ag||void 0===ue.Ag?void 0:ue.Ag[k])?[...e,_objectSpread(_objectSpread({},_),{},{status:1})]:e),[]),k)},getBasePriceRange=(e,_,k,I)=>{const C=getUpperCaseBarCurr();return C&&C===k?_<=0?e<=0?e=_=void 0:-1===_&&(_=0):e<=_&&(e=-1===e?I+"+":_=void 0):e=_=void 0,{HighPrice:e,LowPrice:_}},getPriceRange=(e,_,k,I)=>fe?{}:getBasePriceRange(e,_,k,I),getPriceRangeFilter=(e,_)=>{const{priceFilter:k}=(null==_?void 0:_.renderFilters)||{},{priceHigh:I,priceLow:C,priceBarMax:R}=k||{};if(!fe)return[];const j=getBasePriceRange(I,C,e,R);let B="";return(null==j?void 0:j.HighPrice)?(B=-1===I?"".concat(null==j?void 0:j.LowPrice,"|max"):"".concat(null==j?void 0:j.LowPrice,"|").concat(null==j?void 0:j.HighPrice),[{filterId:"15|Range",type:"15",value:B}]):[]},getSearchCondition=e=>{const{searchCondition:_,searchBarData:k}=e;if("detailPage"===H.default.getByKey("pageName")){var I,C,R;const{roomGuest:e,calendar:_,travel:j}=k||{};return{adult:null==e?void 0:e.adults,child:null==e?void 0:e.children,checkIn:null==_||null===(I=_.checkIn)||void 0===I?void 0:I.replace(/\//g,"-"),checkOut:null==_||null===(C=_.checkOut)||void 0===C?void 0:C.replace(/\//g,"-"),roomNum:null==e?void 0:e.rooms,age:null==e||null===(R=e.childAges)||void 0===R?void 0:R.join(","),travelPurpose:j?1:0}}return _||{}},getBedType=(e,_,k,I)=>e?"kingSize":_?"twinBed":k?"multiBed":I?"singleBed":"",getFilterList=e=>Object.values(e).reduce(((e,_)=>{var k;const I=(null==_||null===(k=_.list)||void 0===k?void 0:k.filter((e=>e.status===ue.v3.CHECKED)))||[];return 0===I.length?e:e.concat(I.map((e=>({filterId:e.filterId,type:e.type,value:e.value}))))}),[]),filterListToUrl=e=>0===e.length?"":e.map((e=>"".concat(e.filterId,"~").concat(e.type,"~").concat(e.value))).join("*"),getProviderRoomFilters=e=>{var _;return(null==e||null===(_=e.filter)||void 0===_?void 0:_.call(e,(e=>"29"!==e.type)))||[]},me=function generateUrlToDetail(e,_){var k,I,C,B,U,G,q,Q,ee,oe,ie;let ue=arguments.length>2&&void 0!==arguments[2]&&arguments[2],de=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{Type:pe,Position:he,priceLogParam:fe,logoTag:me,card:ge={},hotelBasicInfo:ve,extensions:ye,subStamp:be=3001547,metaLoginTrial:_e="",isSwitchNewFilter:we,selectedFilterList:Ee}=_,{searchBarData:{roomGuest:Se}}=e,{hotelBasicInfo:Oe,positionInfo:Te}=ge;let{cityUrlName:ke,hotelEnName:Ie,hotelId:Ce,guestInfoEntity:Pe={}}=ve||Oe||{},{bookUrl:Le}=Te||{};const{adult:Ne,child:De,roomNum:Ae,age:Re,travelPurpose:xe,checkIn:je,checkOut:Be}=getSearchCondition(e),Me=getUpperCaseCurr();let{cityId:Fe}=Te||{},He="meta"===pe?(null==ge||null===(k=ge.rawData)||void 0===k||null===(I=k.card)||void 0===I||null===(C=I.trace)||void 0===C?void 0:C.hoteluniquekey)||(null==ge||null===(B=ge.trace)||void 0===B||null===(U=B.trace)||void 0===U?void 0:U.hoteluniquekey)||"":(null==ye?void 0:ye.hotelUniqueKey)||"";const Ke="meta"===pe?(null==ge||null===(G=ge.metaHotel)||void 0===G||null===(q=G.priceLogParam)||void 0===q?void 0:q.rateplantracelogid)||(null==ge||null===(Q=ge.rawData)||void 0===Q||null===(ee=Q.priceLogParam)||void 0===ee?void 0:ee.rateplantracelogid):(null==ge||null===(oe=ge.trace)||void 0===oe?void 0:oe.traceLogId)||"";if("book"===he){var Ue,Ze,Ve,We,Ge,$e;const{hotelBasicInfo:_,positionInfo:k}=(null==e||null===(Ue=e.longList)||void 0===Ue?void 0:Ue.metaHotel)||(null==e?void 0:e.metaHotel)||{};ke=(null==_?void 0:_.cityUrlName)||void 0,Ie=(null==_?void 0:_.hotelEnName)||void 0,Ce=(null==_?void 0:_.hotelId)||void 0,Fe=(null==k?void 0:k.cityId)||void 0,He=(null==ge||null===(Ze=ge.rawData)||void 0===Ze||null===(Ve=Ze.card)||void 0===Ve||null===(We=Ve.trace)||void 0===We?void 0:We.hoteluniquekey)||(null==ge||null===(Ge=ge.trace)||void 0===Ge||null===($e=Ge.trace)||void 0===$e?void 0:$e.hoteluniquekey)||""}let qe="",ze="",Ye="";var Je,Xe,Qe,et,tt,nt,rt,ot,it,at,lt;ue?(qe=(null==Se||null===(Je=Se.childBeds)||void 0===Je?void 0:Je.join(","))||"",ze=(null==Se||null===(Xe=Se.childMeals)||void 0===Xe?void 0:Xe.join(","))||"",Ye=(null==Se||null===(Qe=Se.childType)||void 0===Qe?void 0:Qe.join(","))||""):(null==Pe||null===(et=Pe.childBed)||void 0===et?void 0:et.length)>0&&(null==Pe||null===(tt=Pe.childMeal)||void 0===tt?void 0:tt.length)>0&&(null==Pe||null===(nt=Pe.childType)||void 0===nt?void 0:nt.length)>0?(qe=null==Pe||null===(rt=Pe.childBed)||void 0===rt?void 0:rt.join(","),ze=null==Pe||null===(ot=Pe.childMeal)||void 0===ot?void 0:ot.join(","),Ye=null==Pe||null===(it=Pe.childType)||void 0===it?void 0:it.join(",")):(qe=(null==e||null===(at=e.searchCondition)||void 0===at?void 0:at.childBed)||0,ze=(null==e||null===(lt=e.searchCondition)||void 0===lt?void 0:lt.childMeal)||0);const{16:st,6:ct,5:ut,94:dt,4:pt,7:ht}=e.renderFilters.generalFilters||{},ft=getCompatibleFilterResult({isSwitchNewFilter:we,type:"star",selectedFilterList:Ee,list:null==st?void 0:st.list}),mt=getCompatibleFilterResult({isSwitchNewFilter:we,type:"rate",selectedFilterList:Ee,list:null==ct?void 0:ct.list}),gt=getCompatibleFilterResult({isSwitchNewFilter:we,type:"breakfast",selectedFilterList:Ee,list:null==ut?void 0:ut.list}),vt=getCompatibleFilterResult({isSwitchNewFilter:we,type:"bookPolicy",selectedFilterList:Ee,list:null==dt?void 0:dt.list}),yt=getCompatibleFilterResult({isSwitchNewFilter:we,type:"bedType",selectedFilterList:Ee,list:null==pt?void 0:pt.list,callbackFn:getFindResult}),bt=getCompatibleFilterResult({isSwitchNewFilter:we,type:"payType",selectedFilterList:Ee,list:null==ht?void 0:ht.list,callbackFn:getFindResult}),_t=getUpperCaseBarCurr(),wt=(null===(ie=e.renderFilters)||void 0===ie?void 0:ie.generalFilters)||{},Et=we?getProviderRoomFilters(Ee):[].concat(getFilterList(wt),getPriceRangeFilter(Me,e)),St=encodeURIComponent(filterListToUrl(Et));let Ot={cityEnName:ke,hotelEnName:Ie,cityId:Fe,hotelId:Ce,checkIn:je,checkOut:Be,adult:Ne,children:De,subStamp:be,crn:Ae,ages:Re,beds:""==qe?void 0:qe,meals:""==ze?void 0:ze,types:""==Ye?void 0:Ye,travelpurpose:xe,curr:Me,starlist:ft,rating:mt,fgt:(0,R.WH)("fgt")||void 0,hasAidInUrl:!("meta"!==pe||!(0,R.WH)("allianceid"))||void 0,mincurr:(0,R.WH)("mincurr")||void 0,minprice:(0,R.WH)("minprice")||void 0,roomkey:"book"===he&&fe?fe.roomkey:void 0,mproom:"meta"===pe&&(0,R.WH)("mproom")||void 0,link:he,hoteluniquekey:He,edmHotelData:(0,R.WH)("edmHotelData")||void 0,utoken:(0,R.WH)("utoken")||void 0,subChannel:(0,R.WH)("subChannel"),masterhotelid_tracelogid:Ke,metaLoginTrial:"meta"===pe&&"B"===_e?"B":void 0,NewTaxDescForAmountshowtype0:H.default.getByKey("abResults","").includes("230815_IBU_pcpto")?"T":"F",detailFilters:St,hotelType:pe,trip_sub1:"meta"===pe?(0,R.WH)("trip_sub1"):void 0};"T"===H.default.getByKey("qconfigData.firstEnterDetailSwitch")&&-1!==[te.Jb,te.Yl,te.VG].indexOf(H.default.getByKey("pageId"))&&(Ot.isFirstEnterDetail="T");const{priceFilter:Tt}=e.renderFilters||{},{priceHigh:kt,priceLow:It,priceBarMax:Ct}=Tt||{},{HighPrice:Pt,LowPrice:Lt}=getPriceRange(kt,It,Me,Ct);if("more"===pe){const{attachedFilters:e=[],priceHigh:_=-1,priceLow:k=0}=ye||{},{HighPrice:I,LowPrice:C}=getPriceRange(Number(_),Number(k),Me,Ct);[Pt,Lt,I,C].includes(void 0)||(Ot=Object.assign({},Ot,{barcurr:_t&&_t===Me?_t:void 0,HighPrice:I,LowPrice:C}));const R=-1!==e.indexOf("5|1"),j=-1!==e.indexOf("23|5"),B=-1!==e.indexOf("23|10"),H=-1!==e.indexOf("4|2"),U=-1!==e.indexOf("4|5"),V=-1!==e.indexOf("4|4"),G=-1!==e.indexOf("4|1"),q=-1!==e.indexOf("7|2"),z=-1!==e.indexOf("7|1");Ot=Object.assign({},Ot,{breakfast:R?gt:void 0,immediate:j&&-1!==(vt||"").indexOf("2")?1:void 0,freecancel:B&&-1!==(vt||"").indexOf("1")?1:void 0,kingsize:G&&1===yt?1:void 0,twinbed:H&&2===yt?1:void 0,multibed:U&&4===yt?1:void 0,singlebed:V&&3===yt?1:void 0,fg:z&&1===bt?1:void 0,pp:q&&2===bt?1:void 0})}else Ot=Object.assign({},Ot,{barcurr:_t&&_t===Me?_t:void 0,HighPrice:Pt,LowPrice:Lt,breakfast:gt||void 0,immediate:-1!==(vt||"").indexOf("2")?1:void 0,freecancel:-1!==(vt||"").indexOf("1")?1:void 0,kingsize:1===yt?1:void 0,twinbed:2===yt?1:void 0,multibed:4===yt?1:void 0,singlebed:3===yt?1:void 0,fg:1===bt?1:void 0,pp:2===bt?1:void 0});let Nt=(0,j.getDetailUrl)({data:Ot,style:"S"})||Le;if(de)return Nt;const Dt=[];if(Dt.push(_),(0,V.lk)("select_item",null==e?void 0:e.searchCondition,Dt),(0,le.yE)(Ce),H.default.getByKey("pageId")===te.Jb&&"labelColor"===e.longList.fontColor){var At;const{timestamp:k,traceLogId:I}=_.trace||{},{isFullRoom:C,price:R=-1,originPrice:j=-1,signInNote:B,hidePrice:U=!1}=_.hotelBasicInfo||{},{promote:V,value:G}=(_.tags||[]).find((e=>"DISCOUNTPERCENT"===e.tagTitle))||{},{groupId:q,brandId:z,roomId:Q,maskInfo:ee}=_.roomInfo||{},{kingsize:oe,twinbed:ie,multibed:ae,singlebed:le,fg:se,pp:ce}=Ot,ue=H.default.getByKey("isLogged"),de=["LoginDeal","SignInTop"].includes(null===(At=_.decorator||{})||void 0===At?void 0:At.type);let he=[],fe={key:"priceCode",value:null==be?void 0:be.toString()};var Rt,xt,jt;if(he.push(fe),Number(R))ne.y7.set("list_hotel_info",{timestamp:k,traceLogId:I,isMaskPrice:!!(B||(null==ee?void 0:ee.lowerPriceNote)||(null==ee?void 0:ee.signInNote)||de||U),locale:H.default.getByKey("cargo.locale"),pageId:te.Jb,isMemberLogin:ue?"T":"F",isCrawler:"F",vid:(0,te.vQ)(re.Z.get("_bfa")),uid:ue?re.Z.get("uid"):"",cityId:Fe,regionType:H.default.getByKey("initData.cityType"),adult:Ne,child:De,roomNum:Ae,checkIn:je,checkOut:Be,bookable:C?"F":"T",hotelId:Ce,groupId:q,brandId:z,roomId:Q,hotelType:pe,traceFlag:he,displayprice:{price:C?"-1":R,currency:(0,J.zC)(),priceType:re.Z.get("IBU_showtotalamt")},discount:{priceDelete:j,percent:G&&"".concat(G,"%")||"",amount:V||""},searchCondition:{hasBreakfast:Ot.breakfast?"T":"F",freecancel:Ot.freecancel?"T":"F",immediateConfirm:Ot.immediate?"T":"F",payType:se?"fg":ce?"pp":"",bedType:getBedType(oe,ie,ae,le),priceRange:{barcurr:Ot.barcurr||"",highPrice:void 0!==Ot.HighPrice?"".concat(Ot.HighPrice):"",lowPrice:void 0!==Ot.LowPrice?"".concat(Ot.LowPrice):""}},pageType:(0,te.ci)(),metaFlag:(null===(Rt=e.longList)||void 0===Rt?void 0:Rt.isMetaPage)||"T"===(null===(xt=((null===(jt=e.longList)||void 0===jt?void 0:jt.extraFlag)||[]).find((e=>"meta"===e.key)))||void 0===xt?void 0:xt.value)||!1},{timeout:(new Date).getTime()+3e5})}me&&ne.y7.set("logoTag",{hotelId:Ce,logoTag:me}),"meta"==pe&&(0,ae.bQ)(),Nt&&(0,ce.gQ)()&&(0,se.ap)("htl_t_online_list_pwa_todetail",{}),Nt&&window.open((0,z.op)(Nt)),ne.y7.remove("list_hotel_info")},sendAdLog=e=>{const{hotelBasicInfo:_={},index:k,hotelid:I}=e||{};var C;C={index:k,mstoken:(0,oe.e)(),masterHotel:+(null==_?void 0:_.hotelId)||I||0,isAdHotel:null==_?void 0:_.isAdHotel,isAdSlot:null==_?void 0:_.isAdSlot,adTraceid:null==_?void 0:_.adTraceid},de({url:"/clickAdPosition",data:C,silence:!0,bff:!0})},__WEBPACK_DEFAULT_EXPORT__=e=>{var _;return(0,U.zy)((e=>{let{selectedFilterList:_}=e;return{selectedFilterList:_}}))(_=(0,B.$j)((e=>{const{isSwitchNewFilter:_}=e.initData;return{isSwitchNewFilter:_}}))(_=class LinkToDetail extends pe{constructor(e){var _;super(e),_=this,this.toDetail=function(e,I){var C,R,j,B,U,V,q,z,J,te,re,oe,ie,ae,le,se,ue,de,pe,he,fe,ge,ve,ye,be,_e,we,Ee,Se,Oe,Te,ke,Ie,Ce,Pe,Le,Ne,De,Ae,Re,xe,je,Be,Me;let Fe=arguments.length>2&&void 0!==arguments[2]&&arguments[2],He={},Ke="",Ue=getUpperCaseCurr();const{money:Ze={},hotelBasicInfo:Ve={},roomList:We=[],extraFlag:Ge=[]}=_.props,{hotelId:$e=-1,price:qe=-1,originPrice:ze=-1}=Ve;if("meta"===e)if((0,G.xb)(Ze)||!(null==Ze?void 0:Ze.price)&&!(null==Ze?void 0:Ze.priceDelete)){if((null==We?void 0:We.length)>0){var Ye,Je;const e=(null==We||null===(Ye=We[0])||void 0===Ye?void 0:Ye.money)||{};He={priceShow:(0,Q.formatCurrency)(Ue,(null==e?void 0:e.price)||"",{digit:0,digitTop:2}),priceDelete:(0,Q.formatCurrency)(Ue,(null==e?void 0:e.priceDelete)||"",{digit:0,digitTop:2}),hotelId:$e};((null===(Je=We[0])||void 0===Je?void 0:Je.extraFlag)||[]).forEach((e=>{"LoginAB"===(null==e?void 0:e.key)&&(Ke=(null==e?void 0:e.value)||"")}))}}else{He={priceShow:(0,Q.formatCurrency)(Ue,null==Ze?void 0:Ze.price,{digit:0,digitTop:2}),priceDelete:(0,Q.formatCurrency)(Ue,null==Ze?void 0:Ze.priceDelete,{digit:0,digitTop:2}),hotelId:$e},Ge.forEach((e=>{"LoginAB"===(null==e?void 0:e.key)&&(Ke=(null==e?void 0:e.value)||"")}))}else if(("normal"===e||"more"===e)&&-1!==qe&&-1!==ze){He={priceShow:(0,Q.formatCurrency)(Ue,qe,{digit:0,digitTop:2}),priceDelete:(0,Q.formatCurrency)(Ue,ze,{digit:0,digitTop:2}),hotelId:$e}}(0,G.xb)(He)||(null===(C=He)||void 0===C||null===(R=C.priceShow)||void 0===R?void 0:R.includes("="))||ne.Xb.set("listPriceInfo",He);let Xe="detailPage"===H.default.getByKey("pageName")?k(44251).Z:k(78768).Z;const Qe=Xe.getState(),{searchCondition:et,filterCondition:tt}=Qe,nt=ne.y7.get("list_exposure_query_id");nt?(ne.y7.set("detail_query_id",nt),ne.y7.remove("list_exposure_query_id")):ne.y7.set("detail_query_id",(0,ee.RL)());const rt="meta"===e?(null===(j=_.props.base)||void 0===j||null===(B=j.guestCount)||void 0===B?void 0:B.children)>0:(null===(U=_.props.hotelBasicInfo)||void 0===U||null===(V=U.guestInfoEntity)||void 0===V?void 0:V.childCount)>0||!1,ot="meta"===e?null===(q=_.props.roomInfo)||void 0===q||null===(z=q.childrenTag)||void 0===z?void 0:z.tag:(null===(J=_.props.hotelBasicInfo)||void 0===J||null===(te=J.additionTexts)||void 0===te||null===(re=te.find((e=>"ChildrenStayFree"===(null==e?void 0:e.additionName))))||void 0===re?void 0:re.additionText)||!1;let it=0;ot?it=2:rt&&(it=1);let at="meta"===e?(null===(oe=_.props)||void 0===oe||null===(ie=oe.metaHotel)||void 0===ie||null===(ae=ie.priceLogParam)||void 0===ae?void 0:ae.rateplantracelogid)||(null===(le=_.props)||void 0===le||null===(se=le.rawData)||void 0===se||null===(ue=se.priceLogParam)||void 0===ue?void 0:ue.rateplantracelogid):(null===(de=_.props)||void 0===de||null===(pe=de.trace)||void 0===pe?void 0:pe.traceLogId)||"";const lt={masterhotelid:(null===(he=_.props)||void 0===he||null===(fe=he.base)||void 0===fe?void 0:fe.hotelId)||(null===(ge=_.props)||void 0===ge?void 0:ge.hotelId)||(null===(ve=_.props)||void 0===ve?void 0:ve.hotelid)||(null===(ye=_.props)||void 0===ye||null===(be=ye.hotelBasicInfo)||void 0===be?void 0:be.hotelId)||null,masterhotelid_token:(null===(_e=_.props)||void 0===_e||null===(we=_e.base)||void 0===we?void 0:we.hotelId)||(null===(Ee=_.props)||void 0===Ee?void 0:Ee.hotelId)||(null===(Se=_.props)||void 0===Se?void 0:Se.hotelid)||(null===(Oe=_.props)||void 0===Oe||null===(Te=Oe.hotelBasicInfo)||void 0===Te?void 0:Te.hotelId)||null,showwithtaxpriceinfo:(null===(ke=_.props)||void 0===ke||null===(Ie=ke.hotelBasicInfo)||void 0===Ie?void 0:Ie.onlineAndShopTaxPrice)||null,showpriceinfo:(null===(Ce=_.props)||void 0===Ce||null===(Pe=Ce.hotelBasicInfo)||void 0===Pe?void 0:Pe.price)||null,cancelpriceinfo:(null===(Le=_.props)||void 0===Le||null===(Ne=Le.hotelBasicInfo)||void 0===Ne?void 0:Ne.originPrice)||null,locale:null===H.default||void 0===H.default?void 0:H.default.getByKey("cargo.locale"),masterhotelid_dispatchid:(null===(De=_.props)||void 0===De||null===(Ae=De.hotelBasicInfo)||void 0===Ae?void 0:Ae.hotelId)||null,masterhotelid_tracelogid:at,htllist_query_id:nt||(0,ee.RL)()||"",offertype:(null==et?void 0:et.child)>0?it:"",room_token:(null===(Re=_.props)||void 0===Re?void 0:Re.roomToken)||(null===(xe=_.props)||void 0===xe||null===(je=xe.roomList)||void 0===je||null===(Be=je[0])||void 0===Be?void 0:Be.roomToken)||"",scene_tag_list:(null===(Me=_.props.tags)||void 0===Me?void 0:Me.map((e=>({tagid:null==e?void 0:e.tagId,tagtitle:null==e?void 0:e.tagTitle,tagname:null==e?void 0:e.name,tagvalue:null==e?void 0:e.value}))))||[],is_meta_first:"meta"===e?"T":"F",mt_reffername:(0,ce.XL)()};_.$safeLog("logHotelCardClick",lt),_.$safeLog("logListpageSearchHotel",_.props,e),Fe&&_.$safeLog("logHotelLocationScoreClick",_.props),sendAdLog(_objectSpread(_objectSpread({},_.props),{},{searchCondition:et,filterCondition:tt})),me(Qe,_objectSpread(_objectSpread({},_.props),{},{Type:e,Position:I,metaLoginTrial:Ke}))},this.toDetailByRightClick=(e,_)=>{var I,C,B,U,V,q,J,Q,ee,ne,re;const{money:oe={},roomList:ie=[],extraFlag:ae=[],priceLogParam:le,card:se={},hotelBasicInfo:ce,extensions:ue,subStamp:de=3001547,isSwitchNewFilter:pe,selectedFilterList:he}=this.props;let fe="";if("meta"===e)if(!(0,G.xb)(oe)&&(null==oe?void 0:oe.price)&&(null==oe?void 0:oe.priceDelete))ae.forEach((e=>{"LoginAB"===(null==e?void 0:e.key)&&(fe=(null==e?void 0:e.value)||"")}));else if((null==ie?void 0:ie.length)>0){var me;((null===(me=ie[0])||void 0===me?void 0:me.extraFlag)||[]).forEach((e=>{"LoginAB"===(null==e?void 0:e.key)&&(fe=(null==e?void 0:e.value)||"")}))}const{hotelBasicInfo:ge,positionInfo:ve}=se;let{cityUrlName:ye,hotelEnName:be,hotelId:_e,guestInfoEntity:we={}}=ce||ge||{},{bookUrl:Ee,cityId:Se}=ve||{};const Oe=("detailPage"===H.default.getByKey("pageName")?k(44251).Z:k(78768).Z).getState(),{adult:Te,child:ke,roomNum:Ie,age:Ce,travelPurpose:Pe,checkIn:Le,checkOut:Ne}=getSearchCondition(Oe),De=getUpperCaseCurr();let Ae="meta"===e?(null==se||null===(I=se.rawData)||void 0===I||null===(C=I.card)||void 0===C||null===(B=C.trace)||void 0===B?void 0:B.hoteluniquekey)||(null==se||null===(U=se.trace)||void 0===U||null===(V=U.trace)||void 0===V?void 0:V.hoteluniquekey)||"":(null==ue?void 0:ue.hotelUniqueKey)||"",Re="",xe="",je="";var Be,Me,Fe,He,Ke;(null==we||null===(q=we.childBed)||void 0===q?void 0:q.length)>0&&(null==we||null===(J=we.childMeal)||void 0===J?void 0:J.length)>0&&(null==we||null===(Q=we.childType)||void 0===Q?void 0:Q.length)>0?(Re=null==we||null===(Be=we.childBed)||void 0===Be?void 0:Be.join(","),xe=null==we||null===(Me=we.childMeal)||void 0===Me?void 0:Me.join(","),je=null==we||null===(Fe=we.childType)||void 0===Fe?void 0:Fe.join(",")):(Re=(null==Oe||null===(He=Oe.searchCondition)||void 0===He?void 0:He.childBed)||0,xe=(null==Oe||null===(Ke=Oe.searchCondition)||void 0===Ke?void 0:Ke.childMeal)||0);const{16:Ue,6:Ze,5:Ve,94:We,4:Ge,7:$e}=Oe.renderFilters.generalFilters||{},qe=getCompatibleFilterResult({isSwitchNewFilter:pe,type:"star",selectedFilterList:he,list:null==Ue?void 0:Ue.list}),ze=getCompatibleFilterResult({isSwitchNewFilter:pe,type:"rate",selectedFilterList:he,list:null==Ze?void 0:Ze.list}),Ye=getCompatibleFilterResult({isSwitchNewFilter:pe,type:"breakfast",selectedFilterList:he,list:null==Ve?void 0:Ve.list}),Je=getCompatibleFilterResult({isSwitchNewFilter:pe,type:"bookPolicy",selectedFilterList:he,list:null==We?void 0:We.list}),Xe=getCompatibleFilterResult({isSwitchNewFilter:pe,type:"bedType",selectedFilterList:he,list:null==Ge?void 0:Ge.list,callbackFn:getFindResult}),Qe=getCompatibleFilterResult({isSwitchNewFilter:pe,type:"payType",selectedFilterList:he,list:null==$e?void 0:$e.list,callbackFn:getFindResult}),et=(null===(ee=Oe.renderFilters)||void 0===ee?void 0:ee.generalFilters)||{},tt=pe?getProviderRoomFilters(he):[].concat(getFilterList(et),getPriceRangeFilter(De,Oe)),nt=encodeURIComponent(filterListToUrl(tt));let rt={cityEnName:ye,hotelEnName:be,cityId:Se,hotelId:_e,checkIn:Le,checkOut:Ne,adult:Te,children:ke,subStamp:de,crn:Ie,ages:Ce,beds:""==Re?void 0:Re,meals:""==xe?void 0:xe,types:""==je?void 0:je,travelpurpose:Pe,curr:De,starlist:qe,rating:ze,fgt:(0,R.WH)("fgt")||void 0,hasAidInUrl:!("meta"!==e||!(0,R.WH)("allianceid"))||void 0,mincurr:(0,R.WH)("mincurr")||void 0,minprice:(0,R.WH)("minprice")||void 0,roomkey:"book"===_&&le?le.roomkey:void 0,mproom:"meta"===e&&(0,R.WH)("mproom")||void 0,link:_,hoteluniquekey:Ae,edmHotelData:(0,R.WH)("edmHotelData")||void 0,utoken:(0,R.WH)("utoken")||void 0,subChannel:(0,R.WH)("subChannel"),masterhotelid_tracelogid:(null===(ne=this.props)||void 0===ne||null===(re=ne.trace)||void 0===re?void 0:re.traceLogId)||"",metaLoginTrial:"meta"===e&&"B"===fe?"B":void 0,NewTaxDescForAmountshowtype0:H.default.getByKey("abResults","").includes("230815_IBU_pcpto")?"T":"F",detailFilters:nt,hotelType:e,trip_sub1:"meta"===e?(0,R.WH)("trip_sub1"):void 0};"T"===H.default.getByKey("qconfigData.firstEnterDetailSwitch")&&-1!==[te.Jb,te.Yl,te.VG].indexOf(H.default.getByKey("pageId"))&&(rt.isFirstEnterDetail="T");const ot=getUpperCaseBarCurr(),{priceFilter:it}=(null==Oe?void 0:Oe.renderFilters)||{},{priceHigh:at,priceLow:lt,priceBarMax:st}=it||{},{HighPrice:ct,LowPrice:ut}=getPriceRange(at,lt,De,st);if("more"===e){const{attachedFilters:e=[],priceHigh:_=-1,priceLow:k=0}=ue||{},{HighPrice:I,LowPrice:C}=getPriceRange(Number(_),Number(k),De,st);[ct,ut,I,C].includes(void 0)||(rt=Object.assign({},rt,{barcurr:ot&&ot===De?ot:void 0,HighPrice:I,LowPrice:C}));const R=-1!==e.indexOf("5|1"),j=-1!==e.indexOf("23|5"),B=-1!==e.indexOf("23|10"),H=-1!==e.indexOf("4|2"),U=-1!==e.indexOf("4|5"),V=-1!==e.indexOf("4|4"),G=-1!==e.indexOf("4|1"),q=-1!==e.indexOf("7|2"),z=-1!==e.indexOf("7|1");rt=Object.assign({},rt,{breakfast:R?Ye:void 0,immediate:j&&-1!==(Je||"").indexOf("2")?1:void 0,freecancel:B&&-1!==(Je||"").indexOf("1")?1:void 0,kingsize:G&&1===Xe?1:void 0,twinbed:H&&2===Xe?1:void 0,multibed:U&&4===Xe?1:void 0,singlebed:V&&3===Xe?1:void 0,fg:z&&1===Qe?1:void 0,pp:q&&2===Qe?1:void 0})}else rt=Object.assign({},rt,{barcurr:ot&&ot===De?ot:void 0,HighPrice:ct,LowPrice:ut,breakfast:Ye||void 0,immediate:-1!==(Je||"").indexOf("2")?1:void 0,freecancel:-1!==(Je||"").indexOf("1")?1:void 0,kingsize:1===Xe?1:void 0,twinbed:2===Xe?1:void 0,multibed:4===Xe?1:void 0,singlebed:3===Xe?1:void 0,fg:1===Qe?1:void 0,pp:2===Qe?1:void 0});let dt=(0,j.getDetailUrl)({data:rt,style:"S"})||Ee;return(0,z.op)(dt)},this.getQidData=()=>({rmlistqid:ne.y7.get("list_exposure_query_id"),getqid:(0,ee.RL)()}),this.otherLogicFunc=e=>{var _,I,C,R,j,B,U,G,q,z,J,Q,te,re,oe,ie,se,ue,de,pe,he,fe,me,ge,ve,ye,be,_e,we,Ee,Se,Oe,Te,ke,Ie,Ce,Pe,Le,Ne,De,Ae,Re;const{logoTag:xe,hotelBasicInfo:je}=this.props,{hotelId:Be=-1}=je;const Me=("detailPage"===H.default.getByKey("pageName")?k(44251).Z:k(78768).Z).getState(),{searchCondition:Fe,filterCondition:He}=Me,{rmlistqid:Ke}=this.getQidData(),Ue="meta"===e?(null===(_=this.props.base)||void 0===_||null===(I=_.guestCount)||void 0===I?void 0:I.children)>0:(null===(C=this.props.hotelBasicInfo)||void 0===C||null===(R=C.guestInfoEntity)||void 0===R?void 0:R.childCount)>0||!1;let Ze=0;("meta"===e?null===(j=this.props.roomInfo)||void 0===j||null===(B=j.childrenTag)||void 0===B?void 0:B.tag:(null===(U=this.props.hotelBasicInfo)||void 0===U||null===(G=U.additionTexts)||void 0===G||null===(q=G.find((e=>"ChildrenStayFree"===(null==e?void 0:e.additionName))))||void 0===q?void 0:q.additionText)||!1)?Ze=2:Ue&&(Ze=1);let Ve="meta"===e?(null===(z=this.props)||void 0===z||null===(J=z.metaHotel)||void 0===J||null===(Q=J.priceLogParam)||void 0===Q?void 0:Q.rateplantracelogid)||(null===(te=this.props)||void 0===te||null===(re=te.rawData)||void 0===re||null===(oe=re.priceLogParam)||void 0===oe?void 0:oe.rateplantracelogid):(null===(ie=this.props)||void 0===ie||null===(se=ie.trace)||void 0===se?void 0:se.traceLogId)||"";const We=(null===(ue=this.props)||void 0===ue||null===(de=ue.base)||void 0===de?void 0:de.hotelId)||(null===(pe=this.props)||void 0===pe?void 0:pe.hotelId)||(null===(he=this.props)||void 0===he?void 0:he.hotelid)||(null===(fe=this.props)||void 0===fe||null===(me=fe.hotelBasicInfo)||void 0===me?void 0:me.hotelId)||null,Ge={masterhotelid:We,masterhotelid_token:(null===(ge=this.props)||void 0===ge||null===(ve=ge.base)||void 0===ve?void 0:ve.hotelId)||(null===(ye=this.props)||void 0===ye?void 0:ye.hotelId)||(null===(be=this.props)||void 0===be?void 0:be.hotelid)||(null===(_e=this.props)||void 0===_e||null===(we=_e.hotelBasicInfo)||void 0===we?void 0:we.hotelId)||null,showwithtaxpriceinfo:(null===(Ee=this.props)||void 0===Ee||null===(Se=Ee.hotelBasicInfo)||void 0===Se?void 0:Se.onlineAndShopTaxPrice)||null,showpriceinfo:(null===(Oe=this.props)||void 0===Oe||null===(Te=Oe.hotelBasicInfo)||void 0===Te?void 0:Te.price)||null,cancelpriceinfo:(null===(ke=this.props)||void 0===ke||null===(Ie=ke.hotelBasicInfo)||void 0===Ie?void 0:Ie.originPrice)||null,locale:null===H.default||void 0===H.default?void 0:H.default.getByKey("cargo.locale"),masterhotelid_dispatchid:(null===(Ce=this.props)||void 0===Ce||null===(Pe=Ce.hotelBasicInfo)||void 0===Pe?void 0:Pe.hotelId)||null,masterhotelid_tracelogid:Ve,htllist_query_id:Ke||(0,ee.RL)()||"",offertype:(null==Fe?void 0:Fe.child)>0?Ze:"",room_token:(null===(Le=this.props)||void 0===Le?void 0:Le.roomToken)||(null===(Ne=this.props)||void 0===Ne||null===(De=Ne.roomList)||void 0===De||null===(Ae=De[0])||void 0===Ae?void 0:Ae.roomToken)||"",scene_tag_list:(null===(Re=this.props.tags)||void 0===Re?void 0:Re.map((e=>({tagid:null==e?void 0:e.tagId,tagtitle:null==e?void 0:e.tagTitle,tagname:null==e?void 0:e.name,tagvalue:null==e?void 0:e.value}))))||[],is_meta_first:"meta"===e?"T":"F",mt_reffername:(0,ce.XL)(),isrefresh:(window.CHANGED_PRICE_HOTELS_DATA||{})[We]?"T":"F"};this.$safeLog("logHotelCardClick",Ge),this.$safeLog("logListpageSearchHotel",this.props,e),sendAdLog(_objectSpread(_objectSpread({},this.props),{},{searchCondition:Fe,filterCondition:He}));const $e=[];$e.push(this.props),(0,V.lk)("select_item",null==Me?void 0:Me.searchCondition,$e),(0,le.yE)(Be),xe&&ne.y7.set("logoTag",{hotelId:Be,logoTag:xe}),"meta"==e&&(0,ae.bQ)()},this.getSessionData=e=>{let _={};const I=getUpperCaseCurr(),{extensions:C,subStamp:j=3001547,card:B={},hotelBasicInfo:U,selectedFilterList:V,isSwitchNewFilter:G}=this.props,{hotelId:q=-1}=U,{positionInfo:z}=B;let{cityId:Q}=z||{};const ee=("detailPage"===H.default.getByKey("pageName")?k(44251).Z:k(78768).Z).getState(),{adult:ne,child:oe,roomNum:ie,checkIn:ae,checkOut:le}=getSearchCondition(ee),{5:se,94:ce,4:ue,7:de}=ee.renderFilters.generalFilters||{},pe=getCompatibleFilterResult({isSwitchNewFilter:G,type:"breakfast",selectedFilterList:V,list:null==se?void 0:se.list}),he=getCompatibleFilterResult({isSwitchNewFilter:G,type:"bookPolicy",selectedFilterList:V,list:null==ce?void 0:ce.list}),fe=getCompatibleFilterResult({isSwitchNewFilter:G,type:"bedType",selectedFilterList:V,list:null==ue?void 0:ue.list,callbackFn:getFindResult}),me=getCompatibleFilterResult({isSwitchNewFilter:G,type:"payType",selectedFilterList:V,list:null==de?void 0:de.list,callbackFn:getFindResult}),ge=(0,R.WH)("barcurr")||void 0,{priceFilter:ve}=ee.renderFilters||{},{priceHigh:ye,priceLow:be,priceBarMax:_e}=ve||{},{HighPrice:we,LowPrice:Ee}=getPriceRange(ye,be,I,_e);let Se={};if("more"===e){const{attachedFilters:e=[],priceHigh:_=-1,priceLow:k=0}=C||{},{HighPrice:R,LowPrice:j}=getPriceRange(Number(_),Number(k),I,_e);[we,Ee,R,j].includes(void 0)||(Se=Object.assign({},Se,{barcurr:ge&&ge===I?ge:void 0,HighPrice:R,LowPrice:j}));const B=-1!==e.indexOf("5|1"),H=-1!==e.indexOf("23|5"),U=-1!==e.indexOf("23|10"),V=-1!==e.indexOf("4|2"),G=-1!==e.indexOf("4|5"),q=-1!==e.indexOf("4|4"),z=-1!==e.indexOf("4|1"),J=-1!==e.indexOf("7|2"),Q=-1!==e.indexOf("7|1");Se=Object.assign({},Se,{breakfast:B?pe:void 0,immediate:H&&-1!==(he||"").indexOf("2")?1:void 0,freecancel:U&&-1!==(he||"").indexOf("1")?1:void 0,kingsize:z&&1===fe?1:void 0,twinbed:V&&2===fe?1:void 0,multibed:G&&4===fe?1:void 0,singlebed:q&&3===fe?1:void 0,fg:Q&&1===me?1:void 0,pp:J&&2===me?1:void 0})}else Se=Object.assign({},Se,{barcurr:ge&&ge===I?ge:void 0,HighPrice:we,LowPrice:Ee,breakfast:pe||void 0,immediate:-1!==(he||"").indexOf("2")?1:void 0,freecancel:-1!==(he||"").indexOf("1")?1:void 0,kingsize:1===fe?1:void 0,twinbed:2===fe?1:void 0,multibed:4===fe?1:void 0,singlebed:3===fe?1:void 0,fg:1===me?1:void 0,pp:2===me?1:void 0});if(H.default.getByKey("pageId")===te.Jb&&"labelColor"===ee.longList.fontColor){var Oe;const{timestamp:k,traceLogId:I}=this.props.trace||{},{isFullRoom:C,price:R=-1,originPrice:B=-1,signInNote:U,hidePrice:V=!1}=this.props.hotelBasicInfo||{},{promote:G,value:z}=(this.props.tags||[]).find((e=>"DISCOUNTPERCENT"===e.tagTitle))||{},{groupId:se,brandId:ce,roomId:ue,maskInfo:de}=this.props.roomInfo||{},{kingsize:pe,twinbed:he,multibed:fe,singlebed:me,fg:ge,pp:ve}=Se,ye=H.default.getByKey("isLogged"),be=["LoginDeal","SignInTop"].includes(null===(Oe=this.props.decorator||{})||void 0===Oe?void 0:Oe.type);let _e=[],we={key:"priceCode",value:null==j?void 0:j.toString()};var Te,ke,Ie;if(_e.push(we),Number(R))_={timestamp:k,traceLogId:I,isMaskPrice:!!(U||(null==de?void 0:de.lowerPriceNote)||(null==de?void 0:de.signInNote)||be||V),locale:H.default.getByKey("cargo.locale"),pageId:te.Jb,isMemberLogin:ye?"T":"F",isCrawler:"F",vid:(0,te.vQ)(re.Z.get("_bfa")),uid:ye?re.Z.get("uid"):"",cityId:Q,regionType:H.default.getByKey("initData.cityType"),adult:ne,child:oe,roomNum:ie,checkIn:ae,checkOut:le,bookable:C?"F":"T",hotelId:q,groupId:se,brandId:ce,roomId:ue,hotelType:e,traceFlag:_e,displayprice:{price:C?"-1":R,currency:(0,J.zC)(),priceType:re.Z.get("IBU_showtotalamt")},discount:{priceDelete:B,percent:z&&"".concat(z,"%")||"",amount:G||""},searchCondition:{hasBreakfast:Se.breakfast?"T":"F",freecancel:Se.freecancel?"T":"F",immediateConfirm:Se.immediate?"T":"F",payType:ge?"fg":ve?"pp":"",bedType:getBedType(pe,he,fe,me),priceRange:{barcurr:Se.barcurr||"",highPrice:void 0!==Se.HighPrice?"".concat(Se.HighPrice):"",lowPrice:void 0!==Se.LowPrice?"".concat(Se.LowPrice):""}},pageType:(0,te.ci)(),metaFlag:(null===(Te=ee.longList)||void 0===Te?void 0:Te.isMetaPage)||"T"===(null===(ke=((null===(Ie=ee.longList)||void 0===Ie?void 0:Ie.extraFlag)||[]).find((e=>"meta"===e.key)))||void 0===ke?void 0:ke.value)||!1}}return _},this.ubtMapping={logListpageSearchHotel:(e,_)=>{var k,I,C;const{picture:R,trace:j,money:B,base:H,controllerUbtTraceLogId:U,discountLabels:V=[],tags:z=[],extensions:ne={},rawData:re={}}=e||{},oe=q.C?(0,J.zC)():"",ae={digit:0};let le=[];const se=(null==V?void 0:V.find((e=>ie.dt[e.type]&&1)))||{};let ce=(null==V?void 0:V.filter((e=>!(14===e.type||![1,2,3,4,5,6,15].find((_=>_==e.type))))))||[];for(let e=0;e<(null==ce?void 0:ce.length);e++)le.push({tagtitle:ie.M4[ce[e].type],tagname:ce[e].text});!(0,G.xb)(se)&&(null==se?void 0:se.text)&&le.push({tagtitle:ie.dt[se.type],tagname:se.text||""});const ue=this.getDiscountTxt(z);ue&&le.push({tagtitle:"DISCOUNTPERCENT",tagname:ue});const de={masterhotelid:null==H?void 0:H.hotelId,hoteluniquekey:"meta"===_?(null==re||null===(k=re.card)||void 0===k||null===(I=k.trace)||void 0===I?void 0:I.hoteluniquekey)||(null==j||null===(C=j.trace)||void 0===C?void 0:C.hoteluniquekey)||"":(null==ne?void 0:ne.hotelUniqueKey)||"",hotelname:null==H?void 0:H.hotelName,zonename:j&&j.zonename?j.zonename:null,imageurl:(null==R?void 0:R.defaultUrl)||null,priceinfo:(null==B?void 0:B.price)?(0,Q.formatCurrency)(oe,B.price,ae):null,cancelpriceinfo:(null==B?void 0:B.priceDelete)?(0,Q.formatCurrency)(oe,B.priceDelete,ae):null,discountpercent:j&&j.discountpercent?j.discountpercent:null,pointsplusinfo:j&&j.pointsplusinfo?j.pointsplusinfo:null,qid:(0,ee.RL)()||null,tracelogid:U||null,new_taglist:le||null};return{logKey:"ibu_htl_"+(0,te.h8)()+"_selectedhotel",logValue:de,logDesc:"Select the hotel"}},logHotelLocationScoreClick:e=>{const{base:_}=e||{};return{logKey:"ibu_htl_"+(0,te.h8)()+"_location_score",logValue:{hotelid:null==_?void 0:_.hotelId},logDesc:" click location score",actionType:"click"}},logHotelCardClick:e=>({logKey:"P0104_SP0000_M0005_ID0001_click",logDesc:"hotel card click",actionType:"click",logValue:e})}}getDiscountTxt(e){let _="";const k=null==e?void 0:e.find((e=>"DISCOUNTPERCENT"===e.tagTitle)),I=null==e?void 0:e.find((e=>"DISCOUNTAMOUNT"===e.tagTitle)),C=q.C?(0,J.zC)():"";return k&&(_="".concat(this.$translate("key.hotel.list.promo.discount.price","".concat("tr-TR"===H.default.getByKey("cargo.locale")?"%"+(null==k?void 0:k.value):(null==k?void 0:k.value)+"%")))),I&&(_="".concat(this.$translate("key.hotel.list.promo.discount.price",(0,Q.formatCurrency)(C,I.value,{digitTop:0})))),_}render(){return he.createElement(e,(0,I.Z)({},this.props,{toDetail:this.toDetail,toDetailByRightClick:this.toDetailByRightClick,otherLogicFunc:this.otherLogicFunc,getSessionData:this.getSessionData,getQidData:this.getQidData}))}})||_)||_}},25155:function(e,_,k){"use strict";k.d(_,{K8:function(){return isVersionBNoThis},Yh:function(){return bookBtnVersionB},Ch:function(){return isShowPropertyFilter},oG:function(){return isShowPropertyFilterNoThis},kH:function(){return continueBookVersionB},CO:function(){return checkInAndCheckOutDateVersionB},qx:function(){return calendarRecommendAB},Fe:function(){return nearbyHtlSortB},rq:function(){return commentGradeB},H$:function(){return commentGradeBNoThis},D4:function(){return detailMapStyleB},nk:function(){return priceType0ExplainB},O_:function(){return reviewDetailsB},w5:function(){return reviewDetailsE},FY:function(){return hotelListPolicyMealB},JT:function(){return hotelListCardImgB},TL:function(){return hotelHightLightB},H5:function(){return listCardRoomInfoB},$3:function(){return recommendPoiFiltersB},er:function(){return listCardMaskPriceB},bd:function(){return metaPriceCardB},XG:function(){return seachboxVersionB},XJ:function(){return seachboxChildAgesVersionB},eW:function(){return seachboxChildAgesVersionE},fo:function(){return hotelNamesVersionB},Lf:function(){return listPageFontB},tS:function(){return listFilterBoxFixB},dB:function(){return scoreLineStyleB},tQ:function(){return searchFilterlabelB},qN:function(){return searchFilterlabelE}});var I=k(23026),C=k(47419),R=k(92118);let j=null,B=null;const getForwardB=e=>{if(I.Z){if(null===j&&(j="T"===C.default.getByKey("cacheForwardBSwitch")),j){if(null===B){const _=(0,R.Z)("ab_switchVersion",null==e?void 0:e.ctx,"");B=_}return B}return(0,R.Z)("ab_switchVersion",null==e?void 0:e.ctx,"")}return(0,R.Z)("ab_switchVersion",null==e?void 0:e.ctx,"")},isVersionB=(e,_)=>{let k=!1;const R=getForwardB(e);if(R){if("b"===(null==R?void 0:R.toLowerCase()))return!0;if("a"===(null==R?void 0:R.toLowerCase()))return!1}if(I.Z){k=(C.default.getByKey("abResults")||"").indexOf(_)>-1}else{var j,B;const I=null==e||null===(j=e.ctx)||void 0===j||null===(B=j.state)||void 0===B?void 0:B.abResults;k=(null==I?void 0:I.indexOf(_))>-1||!1}return k},isVersionBNoThis=(e,_)=>{let k=!1;const R=getForwardB({ctx:e});if(R){if("b"===(null==R?void 0:R.toLowerCase()))return!0;if("a"===(null==R?void 0:R.toLowerCase()))return!1}if(I.Z){k=(C.default.getByKey("abResults")||"").indexOf(_)>-1}else{var j;const I=null==e||null===(j=e.state)||void 0===j?void 0:j.abResults;k=(null==I?void 0:I.indexOf(_))>-1||!1}return k},bookBtnVersionB=e=>isVersionB(e,"210308_IBU_whrtd:B"),isShowPropertyFilter=e=>isVersionB(e,"240318_IBU_jdsx:B"),isShowPropertyFilterNoThis=e=>isVersionBNoThis(e,"240318_IBU_jdsx:B"),continueBookVersionB=()=>!1,checkInAndCheckOutDateVersionB=e=>isVersionB(e,"221020_IBU_ORLSJ:B"),calendarRecommendAB=e=>isVersionB(e,"221215_IBU_zswj:B"),nearbyHtlSortB=e=>isVersionB(e,"230421_IBU_htlnb:B"),commentGradeB=e=>isVersionB(e,"230519_IBU_10sco:B"),commentGradeBNoThis=e=>isVersionBNoThis(e,"230519_IBU_10sco:B"),detailMapStyleB=e=>isVersionB(e,"230710_IBU_map:B"),priceType0ExplainB=e=>isVersionB(e,"230815_IBU_pcpto:B"),reviewDetailsB=e=>isVersionB(e,"230823_IBU_dpsp:B"),reviewDetailsE=e=>isVersionB(e,"230823_IBU_dpsp:E"),hotelListPolicyMealB=e=>isVersionB(e,"230913_IBU_OLLML:B"),hotelListCardImgB=e=>isVersionB(e,"231018_IBU_omult:B"),hotelHightLightB=e=>isVersionB(e,"240509_IBU_oldh:B"),listCardRoomInfoB=e=>isVersionB(e,"240611_IBU_OLCRD:B"),recommendPoiFiltersB=e=>isVersionB(e,"240718_IBU_Opoir:B"),listCardMaskPriceB=e=>isVersionB(e,"240708_IBU_OnPMU:B"),metaPriceCardB=e=>isVersionB(e,"240530_IBU_Opdp:B"),seachboxVersionB=e=>isVersionB(e,"240715_IBU_sbar:B"),seachboxChildAgesVersionB=e=>isVersionB(e,"241121_IBU_ETBXO:B"),seachboxChildAgesVersionE=e=>isVersionB(e,"241121_IBU_ETBXO:E"),hotelNamesVersionB=e=>isVersionB(e,"240710_IBU_MLO:B"),listPageFontB=e=>isVersionB(e,"240807_IBU_LRPF:B"),listFilterBoxFixB=e=>isVersionB(e,"240912_IBU_Olslide:B"),scoreLineStyleB=e=>isVersionB(e,"241113_IBU_hrb:B"),searchFilterlabelB=e=>isVersionB(e,"241121_IBU_TagIconOnl:B"),searchFilterlabelE=e=>isVersionB(e,"241121_IBU_TagIconOnl:E")},97278:function(e,_,k){"use strict";k.d(_,{Z:function(){return getMaxNights}});var I=k(47419),C=k(32127),R=k(7992),j=k(23026);function getMaxNights(e){const _=I.default.getByKey("maxNights",e),k=(0,C.WH)("scns",e);if(!["lr"].includes(k))return _;let B=I.default.getByKey("maxNightsConfig",e);Array.isArray(B)||((0,R.fU)({logKey:"ibu_htl_max_nights_error",logValue:{message:"maxNightsConfig has error，not a array"}}),B=[]);const H=I.default.getByKey("pageId",e);let U;return B.forEach((e=>{e.pageId===H&&(U=e.maxNights)})),U||(j.Z&&(0,R.fU)({logKey:"ibu_htl_max_nights_error",logValue:{message:"not matched any pageId"}}),_)}},72427:function(e,_,k){"use strict";k.d(_,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});const __WEBPACK_DEFAULT_EXPORT__=function(e,_){let k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",I=arguments.length>3&&void 0!==arguments[3]&&arguments[3],C=k;if(null===e||"object"!=typeof e||"string"!=typeof _)return C;let R=!0;for(let k=0,I=(_=_.split(/[\.\[\]]/).filter((e=>""!==e))).length;k<I;k++){let I=_[k];if(!e){R=!1;break}if(!Object.prototype.hasOwnProperty.call(e,I)){R=!1;break}e=e[I]}if(R&&null!=e&&(C=e),I){switch(Object.prototype.toString.call(C)){case"[object String]":C=isNaN(+C)?k:C;break;case"[object Array]":C=C.some((e=>isNaN(+e)))?k:C}}return C}},92118:function(e,_,k){"use strict";k.d(_,{Z:function(){return getQueryString}});var I=k(32127);function getQueryString(e,_,k){return(0,I.WH)(e,_,k)}},64337:function(e,_,k){"use strict";k.d(_,{Xy:function(){return isEqual},MA:function(){return getFilterConditons},zC:function(){return getCurrency},hZ:function(){return getChoosedFilters},xA:function(){return ie},vL:function(){return parseHotelDetailPath},DS:function(){return ae},gQ:function(){return checkIsPwa},xC:function(){return isShowDateDiffTips},a8:function(){return le},XL:function(){return getMetaRefferName}});var I=k(83465),C=k.n(I),R=k(24567),j=k(3488),B=k(80027),H=k(28072),U=k(23026),V=(k(98239),k(47419)),G=k(25155),q=k(15458),z=k(97278),J=k(16234),Q=k(92118),ee=k(32127);function getType(e){return Object.prototype.toString.call(e).replace(/\[object\s(\w+)\]/,"$1").toLowerCase()}function isEqual(e,_){let k=!0;if(getType(e)!==getType(_))k=!1;else{let I=getType(e);if("array"===I)if(e.length!==_.length)k=!1;else for(let I=0;I<e.length;I++)k=isEqual(e[I],_[I]);else{if("object"===I){let I=Object.keys(e),C=Object.keys(_);if(I.length!==C.length)return!1;for(let R=0;R<I.length;R++)if(k=isEqual(e[I[R]],_[C[R]]),!k)return!1;return!0}k=e===_}}return k}function getFilterConditons(e){let _=Object.keys(e),k=C()(e);return _.forEach((_=>{if(_===R.Wj.METROS){if(e[_].lineList){let I=e[_].lineList.filter((e=>e.status)),C=I.length?I[0].siteList.filter((e=>e.status)):[];k[_].list=C}}else if(_===R.Wj.PRICERANGE){let{priceLow:e,priceHigh:I,priceBarMax:C}=k[_];if(0===e&&-1===I)k[_].list=[];else{const R=(0,j.b)(e,I,C);let B="".concat(R.lowLocal,"-").concat(R.highLocal);e>0&&-1===I&&(B="".concat(R.lowLocal)),k[_].list=[{text:B,value:B,status:1,lowPrice:e,highPrice:I}]}}else k[_]&&k[_].list&&(k[_].list=e[_].list.filter((e=>e.status)))})),k}let te=null,ne=null;let getCurrency=e=>{let _=(e=>{if(U.Z){if(null===te){const e=V.default.getByKey("cargo.locale"),_=V.default.getByKey("cacheCookieCurrencyLocales")||"";te=_.includes(e)}return te?(null===ne&&(ne=H.Z.get("cookiePricesDisplayed",e)||"USD"),ne):H.Z.get("cookiePricesDisplayed",e)||"USD"}return H.Z.get("cookiePricesDisplayed",e)||"USD"})(e);return e?_=e.req.cargo.getCurrency():U.Z&&V.default.getByKey("cargo")&&(_=V.default.getByKey("cargo.currency")),_};function getChoosedFilters(){var e;let _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1?arguments[1]:void 0,I=C()(_),R=[];if(I.generalFilters){var H,U;let e=Object.keys(I.generalFilters);const _=["5|1","4|1","4|2","23|10","23|5"];null==e||e.forEach((e=>{var k;if("41"===e){if(null===(k=I.generalFilters[e])||void 0===k?void 0:k.lineList){var C;let _=I.generalFilters[e].lineList.filter((e=>e.status)),k=_.length?null===(C=_[0].siteList)||void 0===C?void 0:C.filter((e=>e.status)):[];null==k||k.forEach((_=>{_.key=e})),R=R.concat(k)}}else if(I.generalFilters[e]&&I.generalFilters[e].list){const k=I.generalFilters[e].list.filter((e=>e.status))||[];"16"==e&&(null==k||k.forEach((_=>{_.iconType=I.generalFilters[e].type}))),null==k||k.forEach((k=>{k.key=e,_.includes(k.filterId)?k.syncType=!0:k.syncType=!1})),R=R.concat(k)}}));let{priceLow:C,priceHigh:V,priceBarMax:G}=I.priceFilter;const q=(0,B.D)(C,V,G,getCurrency(k),k);if(0!==C||-1!==V){const e=(0,j.b)(C,V,G,void 0,k);let _=[{text:q,value:"".concat(e.lowLocal,"-").concat(e.highLocal),status:1,lowPrice:C,highPrice:V,key:"15"}];R=R.concat(_)}let z=[];null===(H=I.quickFilters)||void 0===H||null===(U=H.list)||void 0===U||U.forEach((e=>{1==e.status&&(e.key="quickFilters",z.push(e))})),R=R.concat(z)}const V=[];return null===(e=R)||void 0===e||e.forEach((e=>{V.find((_=>_.filterId==e.filterId))||V.push(e)})),V}const re=function replaceStrWithHtmlTagForOld(e,_){let k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return"";let I=/({\d\})(.*?)(\{\/\d})/g;const C=function matchAll(e,_){let k,I=[];for(;k=_.exec(e);)I.push(k);return I};let R=C(e,I);return R.map(((I,C)=>{let R="<".concat(_," class='").concat(k,"' id='u-action").concat(C,"'>"),j="</".concat(_,">");e=e.replace(I[1],R).replace(I[3],j)})),e},oe=function replacePlaceholder(e,_){let k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"span",I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!e)return"";let C=new RegExp("(\\{".concat(_,"\\})(.*?)(\\{/").concat(_,"\\})"),"g"),R="";"a"===k&&(R=" id='u-action".concat(_,"'")),I&&(I=" class='".concat(I,"'"));let j="<".concat(k).concat(I).concat(R,">"),B="</".concat(k,">");return e=e.replace(C,"".concat(j,"$2").concat(B))},ie=function replaceStrWithHtmlTag(e,_){let k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return"";const I=function matchAll(e,_){let k,I=[];for(;k=_.exec(e);)I.push(k);return I};let C=/({\d\})(.*?)(\{\/\d})/g,R=/({0\})(.*?)(\{\/0})/g,j=I(e,R),B=I(e,C);const H=j.length===B.length;if(_)if(H)e=oe(e,0,"span",k);else for(let _=0;_<3;_++){e=oe(e,_,_<2?"a":"span",k)}else{if(H)return re(e,"a",k);for(let _=0;_<3;_++){e=oe(e,_,_<2?"a":"span",k)}}return e},parseHotelDetailPath=e=>{let _,k,I=e.match(/\/hotels\/(\S+)?-hotel-(detailpage|detail|review|reviewpage)-(\d+|\d+\/|\d+\/.*)/i)||[];return 4===I.length&&(_=I[3]||0,k=!!["reviewpage","review"].includes(I[2])),{pathHotel:_,pathIsReview:k}},ae=function formatMetaInfo(){var e;let _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"F",I=arguments.length>2?arguments[2]:void 0;const{card:C,roomList:R,priceLogParam:j={}}=_,{base:B,picture:H,comment:U,score:V,position:G,transport:q,member:z,promotion:J,decorator:Q,hotelTag:ee,labels:te=[],encourage:ne,noRoomDetailReason:re={},multiMainHotelPics:oe=[],topAwardInfo:ie={}}=C||{},{rateplantracelogid:ae=""}=j;let le={};const{trace:se={}}=(null==R?void 0:R[0])||{};se.traceLogId=(null==se?void 0:se.traceLogId)||ae;let ce="";if((null==G?void 0:G.area)&&(ce+=null==G?void 0:G.area,null==G?void 0:G.poi)){ce+=" | ";let e=/(<strong>)(.*)(<\/strong>)/;e.test(null==G?void 0:G.poi)?ce+=null==G?void 0:G.poi.match(e)[2]:ce+=null==G?void 0:G.poi}let ue=[];if(null==U?void 0:U.quality){var de;const e={name:null==U||null===(de=U.quality)||void 0===de?void 0:de.join("|"),tagTitle:"OneSentenceComment",tagId:"0",tagDesc:"",value:"",subTagId:0,tagPosition:0,labelExtensions:[]};ue.push(e)}if(null==U?void 0:U.familyRecommend){const e={name:null==U?void 0:U.familyRecommend,tagTitle:"",tagId:"12250",tagDesc:null==U?void 0:U.familyRecommend,value:"",subTagId:0,tagPosition:0,labelExtensions:[]};ue.push(e)}const pe={DIAMOND:0,STAR:1,CIRCLE:2};(null==te?void 0:te.length)&&te.forEach((e=>{if("ACTIVITY"==e.type){var _;let k=-1;null===(_=e.extendList)||void 0===_||_.forEach((e=>{"DISPLAYPOSITION"==e.type&&(k=Number(e.value))}));let I={name:e.name,tagTitle:e.type,tagId:0,tagDesc:"",value:"",subTagId:0,tagPosition:k,labelExtensions:e.extendList};ue.push(I)}"HotelCertification"===e.type&&ue.push({name:"",tagTitle:e.type,tagId:301014,tagDesc:"",value:e.name,labelExtensions:e.extendList})}));let he={hotelId:null==B?void 0:B.hotelId,hotelName:null==B?void 0:B.hotelName,hotelEnName:null==B?void 0:B.hotelUrlName,hotelImg:(null==H?void 0:H.list[0])||null,hotelImgRoundLoad:(null==H?void 0:H.completeUrls)||null,hotelAddress:null==G?void 0:G.address,medalInfo:{medalType:(null==B?void 0:B.badge)||"0",description:"",badgeHover:(null==B?void 0:B.badgeHover)||""},decorator:{type:null==Q?void 0:Q.type,signInNote:null==Q?void 0:Q.signInNote,countDown:null==Q?void 0:Q.countDown,title:null==Q?void 0:Q.title},freeAddBabyBedTag:null==ne?void 0:ne.freeAddBabyBedTag,cityUrlName:null==B?void 0:B.cityUrlName,canNotBeOrderedInfo:{messageBold:re.boldMessage,code:re.code},topAwardInfo:{listSubTitle:null==ie?void 0:ie.hotelAwardTitle,hotelRank:null==ie?void 0:ie.hotelRank,labelId:null==ie?void 0:ie.labelId,rankId:null==ie?void 0:ie.rankingId,rankType:null==ie?void 0:ie.rankType},hotelMultiImgs:(null==oe||null===(e=oe.map((e=>null==e?void 0:e.completeUrls)))||void 0===e?void 0:e.filter((e=>e.length>1)))||[],hotelNames:null==B?void 0:B.hotelNames},fe=(null==ee?void 0:ee.map((e=>({featureType:e.type,featureName:e.content}))))||[],me={star:null==B?void 0:B.star,isLicenseStar:!1,starType:(null==B?void 0:B.starTypeV2)&&pe[B.starTypeV2]||0},ge={commentScore:null==V?void 0:V.number,commentDescription:null==V?void 0:V.desc,commenterNumber:null==U?void 0:U.content,subScore:null==V?void 0:V.subScore,tARatingInfo:null,taAlt:"",taUrl:"",taCount:0,taReview:""},ve={cityId:null==G?void 0:G.cityId,cityName:null==G?void 0:G.cityName,cityNameEn:"",positionDesc:ce,positionName:null==G?void 0:G.area,positionInfo:null==G?void 0:G.poi,transport:q,coordinate:{cityId:null==G?void 0:G.cityId,lat:null==G?void 0:G.lat,lng:null==G?void 0:G.lng,isOversea:"mainland"!=(null==G?void 0:G.regionType),coordinateType:""},isOversea:"mainland"!=(null==G?void 0:G.regionType),zoneNames:[null==G?void 0:G.area],mapCoordinate:[{coordinateType:1,latitude:null==G?void 0:G.lat,longitude:null==G?void 0:G.lng},{coordinateType:2,latitude:null==G?void 0:G.lat,longitude:null==G?void 0:G.lng}]},ye={type:null==z?void 0:z.type,content:null==z?void 0:z.content},be=[];return Object.assign(le,{hotelBasicInfo:he,hotelFeatureTagInfo:fe,hotelStarInfo:me,commentInfo:ge,roomList:R,positionInfo:ve,memberGrade:ye,promotion:J,discountLabels:be,tags:ue,rawData:_,trace:se,isNeedCalendarRecommend:k,expResList:I}),le},checkIsPwa=()=>{try{return window.matchMedia("(display-mode: standalone)").matches}catch(e){return!1}},isShowDateDiffTips=(e,_,k,I)=>{let C=!1;const R=(0,q.EV)(),j=(0,Q.Z)("checkIn")||"",B=(0,Q.Z)("checkOut")||"";if(!!!(0,G.CO)())return C;const H=(0,z.Z)(),{checkInStr:U,checkOutStr:V}=(0,J.Lf)({checkIn:e,checkOut:_,timeOffset:!k&&I,maxNights:H});if(!(!j||!B)){return C=!!(0,J.Lf)({checkIn:j,checkOut:B,timeOffset:!k&&I,maxNights:H}).isCorrected,C}return(null==R?void 0:R.checkIn)&&(null==R?void 0:R.checkOut)&&(null==R?void 0:R.checkIn)!==U&&(null==R?void 0:R.checkOut)!==V&&(C=!0),C},le=function getChildrenAges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const k=""===_?[]:_.split(",");let I=0;for(;e>k.length&&I<300;)k.push("0"),I++;return e<k.length&&k.splice(e),k.join(",")},getMetaRefferName=()=>{const e=(0,ee.WH)("Allianceid")||"",_=(0,ee.WH)("trip_sub1")||"";return"15214"===e&&function parseTripSub1(){return/_1-LANG/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}(_)?"PPA":""}},16482:function(e,_,k){"use strict";function throttle(e,_,k){var I,C;return e?function(){let R=k||this,j=arguments,B=(new Date).getTime();I&&I+_>B||(I&&I+_<=B?(clearTimeout(C),C=setTimeout((()=>{I=B,e.apply(R,j)}),_)):(I=B,e.apply(R,j)))}:null}function debounce(e,_,k){const I=k||this,C=arguments;let R=null;return function(){R&&(clearTimeout(R),R=null),R=setTimeout((function(){e.apply(I,C)}),_)}}function debounce2(e,_,k){const I=k||this;let C=null;return function(){const k=arguments;C&&(clearTimeout(C),C=null),C=setTimeout((function(){e.apply(I,k)}),_)}}k.d(_,{P2:function(){return throttle},Ds:function(){return debounce},MT:function(){return debounce2}})},89205:function(e,_,k){"use strict";k.d(_,{h8:function(){return logKeyPage},ci:function(){return logBatchRefreshPageType},zQ:function(){return logKeyPageWebPush},NW:function(){return sendTraceTypeUbt},ap:function(){return sendDevTraceTypeUbt},Uz:function(){return sendExposureTypeUbt},c:function(){return logResourceLoad},pE:function(){return logPerformance},vC:function(){return logNodeServiceRootMessage},ZP:function(){return ee}});var I=k(96156),C=k(47419),R=k(36652),j=k(7992);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}const B="10320668151",H="10320668152",U="10320668148",V="10320668268",G="10320668147",q="10320668149",z="10320668150",J="10320668154",Q="10650047176",logKeyPage=()=>{switch(C.default.getByKey("pageId")){case z:return"homepage";case U:return"listpage";case V:return"metapage";case J:return"listmappage";case G:return"detailpage";case q:return"fillorderpage";case B:case"10650045052":return"orderdetailpage";case H:return"orderfinishpage";case Q:return"applycancelpage";case"10320667461":case"10320667466":return"crosspage_flight_selling";default:return""}},logBatchRefreshPageType=()=>{switch(C.default.getByKey("pageId")){case U:return"1";case J:return"2";case V:return"3";default:return"0"}},logKeyPageWebPush=()=>{switch(C.default.getByKey("pageId")){case U:return"LIST";case V:return"META";case G:return"DETAIL";default:return""}},sendTraceTypeUbt=(e,_)=>{(0,j.i4)(R.UBT_TYPE.TRACE,e,_)},sendDevTraceTypeUbt=(e,_)=>{j.i4&&(0,j.i4)(R.UBT_TYPE.DEV_TRACE,e,_)},sendExposureTypeUbt=(e,_)=>{j.i4&&(0,j.i4)(R.UBT_TYPE.EXPOSURE,e,_)},logResourceLoad=e=>{var _,k;const I=null!==(_=null==e?void 0:e.performanceList)&&void 0!==_?_:null===(k=window.performance)||void 0===k?void 0:k.getEntriesByType("resource");null==I||I.forEach((_=>{var k;["img","css","link","script"].includes(null==_?void 0:_.initiatorType)&&sendDevTraceTypeUbt("htl_t_web_source_load",{page:null==e?void 0:e.pageId,locale:null==e?void 0:e.locale,status:0!==(null==_?void 0:_.decodedBodySize)?"success":"fail",url:_.name,fetchStart:_.startTime,picsize:null!==(k=_.transferSize)&&void 0!==k?k:0,loadtime:_.responseEnd-_.startTime,type:_.initiatorType,redirectStart:_.redirectStart,redirectEnd:_.redirectEnd,secureConnectionStart:_.secureConnectionStart,requestStart:_.requestStart,connectStart:_.connectStart,connectEnd:_.connectEnd,responseStart:_.responseStart,duration:_.duration,startTime:_.startTime,responseEnd:_.responseEnd,decodedBodySize:_.decodedBodySize,domainLookupStart:_.domainLookupStart,domainLookupEnd:_.domainLookupEnd})}))},logPerformance=e=>{var _,k;const I=null!==(_=null==e?void 0:e.performanceList)&&void 0!==_?_:null===(k=window.performance)||void 0===k?void 0:k.getEntriesByType("navigation");null==I||I.forEach((_=>{var k;sendDevTraceTypeUbt("htl_t_trip_list_load_time",{page:null==e?void 0:e.pageId,locale:null==e?void 0:e.locale,status:0!==(null==_?void 0:_.decodedBodySize)?"success":"fail",url:_.name,fetchStart:_.startTime,picsize:null!==(k=_.transferSize)&&void 0!==k?k:0,loadtime:_.responseEnd-_.startTime,type:_.initiatorType,redirectStart:_.redirectStart,redirectEnd:_.redirectEnd,secureConnectionStart:_.secureConnectionStart,requestStart:_.requestStart,connectStart:_.connectStart,connectEnd:_.connectEnd,responseStart:_.responseStart,duration:_.duration,startTime:_.startTime,responseEnd:_.responseEnd,decodedBodySize:_.decodedBodySize,domainLookupStart:_.domainLookupStart,domainLookupEnd:_.domainLookupEnd})}))},logNodeServiceRootMessage=e=>{sendDevTraceTypeUbt("ibu_ajax_devtrace_dev",function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}({isSSR:!0},e))},ee={ORDER_DETAIL_PAGE:B,ORDER_FINISH_PAGE:H,CANCEL_ORDER_PAGE:Q,VOUCHER_PAGE:"10650034509",LIST_PAGE:U,META_PAGE:V,DETAIL_PAGE:G,BOOK_PAGE:q,HOME_PAGE:z,MAP_PAGE:J,ADD_REVIEW_PAGE:"10320668156",FINISH_REVIEW_PAGE:"10650003622",NPS_H5_PAGE:"10650039305",NPS_ONLINE_PAGE:"10650039303",BRG_PAGE:"10650026833"}},15458:function(e,_,k){"use strict";k.d(_,{RN:function(){return getGenkParams},tV:function(){return pe},Gc:function(){return mappingSearchBarDataDetail},Qn:function(){return getResultWord},Te:function(){return getDestinationValueVersionB},IS:function(){return getDestinationValue},ak:function(){return getKeywordValue},Hs:function(){return getDefaultKeyValue},hZ:function(){return he},yE:function(){return fe},iO:function(){return me},EV:function(){return getCookieOfCalenderInfo},fw:function(){return setCookieOfCalenderInfo},ig:function(){return setCookieOfTargetInfo},pR:function(){return setCookieOfCrnGuestInfo},KG:function(){return isArabicSite},Fy:function(){return modalController},Zx:function(){return addCLSDevTrace},zZ:function(){return getMultiFilterText}});var I=k(96156),C=k(27484),R=k.n(C),j=k(47419),B=k(24567),H=k(973),U=k(5649),V=k(74019),G=k(63732),q=k(32127),z=k(46002),J=k(78768),Q=k(76457),ee=k(48368),te=k(19045),ne=k(78320),re=k(28072),oe=k(23026),ie=k(61407),ae=k(23072),le=k(89205),se=k(25155),ce=void 0;function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const noop=()=>{},ue=function getSearchAgesInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{adult:1,age:""},_=[],k="29",I=17;function getAgeInfo(e,_){return{filterId:e,value:_,type:k}}if(e.adult&&+e.adult>0&&(_.push(getAgeInfo("".concat(k,"|1"),"1|".concat(e.adult))),e.age&&e.age.split(",").length)){e.age.split(",").filter((e=>+e>=0&&+e<=I)).map((e=>+e)).forEach(((e,I)=>{_.push(getAgeInfo("".concat(k,"|").concat(I+2,"|").concat(e),"".concat(I+2,"|").concat(e)))}))}return _},getGenkParams=e=>{var _,k,I,C;return{genk:!0,genkV2:"T"===j.default.getByKey("qconfigData.openSpiderV2")&&!0===j.default.getByKey("isSpiderV2")&&(null===(_=j.default.getByKey("qconfigData.newSpiderPage"))||void 0===_?void 0:_.includes(null===j.default||void 0===j.default?void 0:j.default.getByKey("pageId")))||!1,checkReferer:!0,silence:!0,currency:(0,V.zC)(),genKeyParam:{a:0,b:null===(k=e.search)||void 0===k?void 0:k.checkIn,c:null===(I=e.search)||void 0===I?void 0:I.checkOut,d:null===(C=j.default.getByKey("cargo.locale"))||void 0===C?void 0:C.toLocaleLowerCase(),e:2}}},de=function getCoordinates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=[];return(null==e?void 0:e.length)&&(null==e||e.forEach((e=>{let k={GOOGLE:1,GAODE:2,BAIDU:3};k[null==e?void 0:e.coordinateType]&&_.push(Object.assign(e,{coordinateType:k[e.coordinateType]}))}))),_},getMeta=()=>{const e=(0,q.u0)(null,!0),_=(0,z.Z)(e);let k={};return"10320668268"==(null===j.default||void 0===j.default?void 0:j.default.getByKey("pageId"))&&_&&(null==_?void 0:_.hotelId)?k={fgt:_.fgt,hotelId:parseInt(_.hotelId)||0,priceToleranceData:_.priceToleranceData,priceToleranceDataValidationCode:_.priceToleranceDataValidationCode,mpRoom:_.mpRoom||[],hotelUniqueKey:_.hotelUniqueKey,shoppingId:_.shoppingid,minPrice:_.minPrice,minCurr:_.minCurr}:(0,G.Ew)(null==_?void 0:_.fgt)||(k={fgt:_.fgt}),(0,G.Ew)(k)?{}:{meta:k}},pe=function getListReqParams(){var e,_,k;let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{searchSessionId:C="",searchCondition:R={},searchBarData:H={},preHotelCount:V=0,preHotelIds:q=[],isRecommend:z=!1,singleHotelInfo:te,priceRange:ne,queryTag:re,guideLogin:oe,resultType:le="",recommendTimes:pe=0,screen:he=null,batchRefreshHotelIds:fe=[],batchRefreshpolicy:me,cannotReserveRecommend:ge,dynamicBus:ve}=I||{};J.Z.dispatch((0,Q.WB)(_objectSpread(_objectSpread({},R),{},{queryTag:re})));let ye=JSON.parse(JSON.stringify(I.filters||""))||[],be=[];z=I.queryTag===B.L7.recommend;R.roomNum;const _e=C||(0,U.LT)(R);let{pageNo:we=1,checkIn:Ee,checkOut:Se,countryId:Oe=0,cityId:Te=0,districtID:ke=0,pageSize:Ie,roomNum:Ce=1,mapType:Pe="",crossPromotionId:Le=""}=R||{};const Ne=(0,ie.Z)(Pe);let{coordinate:De={},hotelId:Ae=0}=te||{},{lat:Re=0,lng:xe=0,isOversea:je=!1,coordinateType:Be=1}=De||{};const Me=(null===J.Z||void 0===J.Z||null===(e=J.Z.getState())||void 0===e?void 0:e.searchBarData)||"";let Fe=(0,G.UK)(Me,"search");if(!(0,G.Ew)(Fe)){var He;let e=(0,G.UK)(Fe,"item.data")||[],_=(0,G.UK)(Fe,"code");const k="[object Array]"===Object.prototype.toString.call(e),I=["10","18","11","50","9","8","13"];let C=k?e.some((e=>I.includes(e.type))):I.includes(e.type),R=(null===(He=ye.filter((e=>I.includes(e.type))))||void 0===He?void 0:He.length)>0;(0,G.Ew)(e)||"screen"===window.mapSearchAction||R&&C||k||(ye=[e,...ye]),"H"===Fe.resultType&&_>0&&(be=[{id:parseInt(_)}]),"S"===Fe.resultType&&(ke=parseInt(Fe.code)||0)}(null==fe?void 0:fe.length)&&(be=fe);let Ke={};if(z){var Ue;let e=(0,G.UK)(Fe,"item.data")||[];"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);let _=ye.findIndex((e=>e.type===B.sF)),k=null===(Ue=e)||void 0===Ue?void 0:Ue.findIndex((e=>e.type===B.sF));if(!Ae){let e=-1!==_?ye[_]:null;Ae=Ae||(null==e?void 0:e.value)||0}-1==_&&-1==k||Object.assign(Ke,{hotelId:(null==te?void 0:te.hotelId)||0,hotelCityId:(null==te?void 0:te.cityId)||0,hotelStar:(null==te?void 0:te.star)||0,hotelName:(null==te?void 0:te.hotelName)||"",nearbySubType:"TripHotelList",coordinate:[{coordinateType:Be||0,latitude:String(Re)||"",longitude:String(xe)||""}]}),-1!=_&&ye.splice(_,1),be=be.filter((e=>e.id!==Ae))}let Ze=!1,Ve=!1,We=!1;const Ge=j.default.getByKey("initData")||{};if(-1===(null===(_=ye)||void 0===_?void 0:_.findIndex((e=>"29"===e.type)))){let e=ue(R);ye=ye.concat(e)}if(Ge&&(null==Ge?void 0:Ge.childSearchPolicy)){var $e,qe,ze,Ye;const{childSearchPolicy:e={}}=Ge;(null==e?void 0:e.matchLocale)&&Oe&&(null==e||null===($e=e.matchLocale)||void 0===$e?void 0:$e.toString().indexOf(null===(qe=j.default.getByKey("cargo"))||void 0===qe?void 0:qe.locale))>-1&&(null==e||null===(ze=e.matchCountry)||void 0===ze?void 0:ze.toString().indexOf(Oe))>-1&&(Ze=!0),(null==e?void 0:e.limitLocale)&&Oe&&-1==(null==e?void 0:e.limitLocale.toString().indexOf(null===(Ye=j.default.getByKey("cargo"))||void 0===Ye?void 0:Ye.locale))&&(null==e?void 0:e.matchCountry.toString().indexOf(Oe))>-1&&(Ve=!0),We=Ze&&!Ve||!Ze&&Ve}const Je=ye.findIndex((e=>"19"==e.type)),Xe=ye.findIndex((e=>"36"==e.type)),Qe=j.default.getByKey("pageId")||"";Xe>-1&&Je>-1&&ye.splice(Je,1);const et=getMeta();let tt;tt=(0,G.Ew)(et)?z?B.L7.recommend:Qe===ee.Yl?B.L7.map:B.L7.normal:Qe===ee.Yl?B.L7.meta_map:B.L7.meta;let nt=Date.now(),rt={geo:{countryID:(0,G.UK)(Fe,"country.geoCode")||0,provinceID:(0,G.UK)(Fe,"province.geoCode")||0,cityID:Number(null!==(k=(0,G.UK)(Fe,"city.geoCode"))&&void 0!==k?k:Te)||0,districtID:ke,oversea:je},coordinates:de(null==Fe?void 0:Fe.coordinateInfos)};he&&he.leftDown&&he.rightUp&&(rt.leftDown=he.leftDown,rt.rightUp=he.rightUp);let ot=(null==fe?void 0:fe.length)?me:{batchId:"".concat(nt.toString(16)).concat(nt.toString(32)),batchSeqNo:0};(we>1||tt===B.L7.normal&&ye.filter((e=>e.type===B.sF)).length)&&Object.assign(ot,{batchId:""});const it=j.default.getByKey("initData.enableDynamicRefresh");return _objectSpread(_objectSpread({guideLogin:oe,search:{sessionId:_e,preHotelCount:+we>1||z?V:0,preHotelIds:+we>1||z?q:[],checkIn:(null==Ee?void 0:Ee.replace(/\-/g,""))||"",checkOut:(null==Se?void 0:Se.replace(/\-/g,""))||"",sourceFromTag:"",filters:ye.filter((e=>e.filterId&&e.value)),pageCode:Number(Qe),location:rt,pageIndex:+(we||1),pageSize:+(Ie||10),needTagMerge:"T",roomQuantity:+(Ce||1),orderFieldSelectedByUser:!!ye.find((e=>"17"===e.type&&"17|1"!==e.filterId)),hotelId:Ae,hotelIds:be,lat:Re,lng:xe,tripWalkDriveSwitch:"T",resultType:le,nearbyHotHotel:Ke,recommendTimes:pe,crossPromotionId:Le,travellingForWork:"1"===(0,ae.Z)("travelPurpose"),cannotReserveRecommend:ge},batchRefresh:ot},et),{},{queryTag:tt,mapType:"gg"===Ne?"GOOGLE":"MAPBOX",extends:{crossPriceConsistencyLog:decodeURIComponent((0,ae.Z)("crossPriceConsistencyLog"))||"",NewTaxDescForAmountshowtype0:(0,se.nk)(ce)?"B":"",TaxDescForAmountshowtype2:"T",MealTagDependOnMealType:(0,se.FY)(ce)?"T":"",MultiMainHotelPics:(0,se.JT)(ce)?"T":"",enableDynamicRefresh:it?"T":"F",isFirstDynamicRefresh:ve?"F":"T",ExposeBedInfos:"F",TaxDescRemoveRoomNight:(0,se.H5)(ce)?"T":"",priceMaskLoginTip:(0,se.er)(ce)?"B":"",NeedHotelHighLight:(0,se.TL)(ce)?"T":""}})},mappingSearchBarDataDetail=e=>{if(!e)return null;let{cityId:_=0,cityName:k="",searchType:I="H",provinceId:C="0",countryId:R="0",hotelName:j="",timeOffset:B=0,masterHotelId:H=0}=e,U={};return I="H",{code:H,resultType:I,resultWord:j,city:{geoType:"CITY",currentLocaleName:k,geoCode:_,timeOffset:B},country:{geoType:"COUNTRY",geoCode:R,timeOffset:B},province:{geoCode:C,geoType:"PROVINCE"},timeOffset:B,item:{data:U.filterId?U:null},newContent:k}},getResultWord=e=>{var _,k;return(null==e||null===(_=e.multiFilterItems)||void 0===_?void 0:_.length)?null==e||null===(k=e.multiFilterItems)||void 0===k?void 0:k.reduce(((e,_,k)=>0===k?_.data.title:e+" "+_.data.title),""):(null==e?void 0:e.resultWord)||""},getDestinationValueVersionB=e=>{const{newContent:_}=e||{};return _},getDestinationValue=e=>{const{city:_,province:k,country:I,resultType:C}=e||{};return C===H.VS.City&&(null==_?void 0:_.currentLocaleName)?(null==_?void 0:_.currentLocaleName)||"":C===(null===H.VS||void 0===H.VS?void 0:H.VS.Province)&&(null==k?void 0:k.currentLocaleName)?(null==k?void 0:k.currentLocaleName)||"":C===H.VS.Country&&(null==I?void 0:I.currentLocaleName)?(null==I?void 0:I.currentLocaleName)||"":getResultWord(e)||(null==_?void 0:_.currentLocaleName)||(null==k?void 0:k.currentLocaleName)||(null==I?void 0:I.currentLocaleName)||""},getKeywordValue=e=>{const{resultWord:_,resultType:k,highLightWords:I}=e||{};let C=!!k&&["lm","a","mt","d","t","z","ml","h","f","b","g","hotelfeature"].indexOf(k.toLocaleLowerCase())>-1,R=_;return"n"===(null==k?void 0:k.toLocaleLowerCase())&&(C=!0,R=(null==I?void 0:I[0])||_||""),C?R:""},getDefaultKeyValue=e=>{const{resultType:_="",newContent:k}=e||{};return k},findChoosedFilters=(e,_,k)=>{var I,C;"41"!=k?e.list&&!(null===(I=e.list[0])||void 0===I?void 0:I.list)?e.list.forEach((e=>{if(1==e.status){var I,C;let B={filterId:e.filterId,value:e.value,type:e.type,subType:e.subType,sceneType:k};var R,j;if((null===(I=e.position)||void 0===I?void 0:I.lat)||(null===(C=e.position)||void 0===C?void 0:C.lng)||e.lat||e.lng)B=Object.assign(B,{text:e.text||"",lat:(null===(R=e.position)||void 0===R?void 0:R.lat)||e.lat||"",lng:(null===(j=e.position)||void 0===j?void 0:j.lng)||e.lng||""});_.push(B)}})):null===(C=e.list)||void 0===C||C.forEach((e=>{findChoosedFilters(e,_,k)})):e.lineList&&e.lineList.length>0&&e.lineList.forEach((e=>{var I;null===(I=e.siteList)||void 0===I||I.forEach((e=>{if(1==e.status){var I,C;const R={filterId:e.filterId,value:e.value,type:e.type,subType:e.subType,text:e.text||"",lat:(null===(I=e.position)||void 0===I?void 0:I.lat)||e.lat||"",lng:(null===(C=e.position)||void 0===C?void 0:C.lng)||e.lng||"",sceneType:k};_.push(R)}}))}))},he=function getChoosedFilters(){var e;let _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const I=[],{priceFilter:C={},generalFilters:R=[],quickFilters:j={}}=_;if(C.priceHigh&&-1!==C.priceHigh||C.priceLow&&0!==C.priceLow){const e=I.findIndex((e=>"15|Range"==e.filterId)),_={filterId:"15|Range",type:"15",subType:"2",priceBarMax:(null==C?void 0:C.priceBarMax)||-1};let k=-1==C.priceHigh?"max":C.priceHigh,R=C.priceLow;_.value=R+"|"+k,-1!==e?I.splice(e,1,_):I.push(_)}if(-1==C.priceHigh&&0==C.priceLow){const e=I.findIndex((e=>"15|Range"==e.filterId));-1!==e&&I.splice(e,1)}return Object.keys(R).forEach((e=>{(null==k?void 0:k.indexOf(e))>-1||R[e]&&findChoosedFilters(R[e],I,e)})),null===(e=j.list)||void 0===e||e.forEach((e=>{if(1==e.status){if(!I.find((_=>_.filterId==e.filterId))&&"4"!==e.type){const _={filterId:e.filterId,value:e.value,type:e.type,subType:e.subType};I.push(_)}}})),I},getClickPageType=()=>{let e=1;switch(j.default.getByKey("pageId")){case ee.Yl:e=2;break;case ee.Jb:default:e=1}return e},fe=function logSessionPageType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(te.y7.remove("log_meta_page"),j.default.getByKey("pageId")===ee.VG){var _,k,I;let C=j.default.getByKey("initData.firstPageList.metaHotel",null,{}),R=(null==C||null===(_=C.card)||void 0===_||null===(k=_.base)||void 0===k?void 0:k.hotelId)||(null==C||null===(I=C.hotelBasicInfo)||void 0===I?void 0:I.hotelId)||0;R&&R===e&&te.y7.set("log_meta_page",1)}"T"!==j.default.getByKey("qconfigData.firstEnterDetailSwitch")&&(te.y7.remove("list_map_firstToDetail"),-1!==[ee.Jb,ee.Yl,ee.VG].indexOf(j.default.getByKey("pageId"))&&te.y7.set("list_map_firstToDetail",getClickPageType()))},me=function getSpiderType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=Number(e),4===e||e%2?"T":"F"},getCookieOfCalenderInfo=()=>{let e=null;if(!oe.Z)return e;let _=re.Z.get(ne._7);if(!_)return e;try{e=JSON.parse(_)}catch(_){e=null}return e},setCookieOfCalenderInfo=e=>{re.Z.set(ne._7,JSON.stringify({checkIn:e.checkIn,checkOut:e.checkOut}),{path:"/",expires:365,domain:location.host})},setCookieOfTargetInfo=e=>{const _=R()().add(8,"days").startOf("date").format("YYYY-MM-DD HH:mm:ss");re.Z.set(ne.qh,JSON.stringify({countryId:e.countryId,provinceId:e.provinceId,searchWord:e.keywords,cityId:e.cityId,searchType:e.resultType,searchValue:e.searchValue}),{path:"/",expires:new Date(_),domain:location.host})},setCookieOfCrnGuestInfo=e=>{var _,k;re.Z.set(ne.nR,JSON.stringify({adult:e.adults,children:e.children,ages:null!==(_=null==e||null===(k=e.childAges)||void 0===k?void 0:k.join(","))&&void 0!==_?_:"",crn:e.rooms}),{path:"/",expires:365,domain:location.host})},isArabicSite=e=>/ar-/i.test(e),modalController=e=>{let{renderHiddenComponent:_,renderShownComponent:k,preRender:I=noop}=e;return document.body.style.overflow="hidden",new Promise((e=>{let C=!1;const R=document.createElement("div");function hideModal(){_({div:R,onSelect:onSelect,onClose:onClose})}function onClose(){removeDom(),e(null)}function onSelect(_){removeDom(),e(_)}function removeDom(){document.body.style.overflow="auto",C||(C=!0,hideModal(),setTimeout((()=>{ReactDOM.unmountComponentAtNode(R),document.body.removeChild(R)}),300))}R.classList.add("pop-modal-wrap"),I&&I(R),document.body.appendChild(R),hideModal(),k({div:R,onSelect:onSelect,onClose:onClose})}))};function getDomPath(e){if(!e||"string"!=typeof e.tagName)return null;let _=[];for(;e&&e.tagName&&"body"!==e.tagName.toLowerCase();){let k=e.tagName.toLowerCase();if(e.id)k+="#".concat(e.id);else if(e.className){let _=e.className.split(" ")[0];k+=".".concat(_)}else{let _=e,I=1;for(;_.previousElementSibling;)_=_.previousElementSibling,I++;k+=":nth-child(".concat(I,")")}_.unshift(k),e=e.parentElement}return e&&e.tagName&&"body"===e.tagName.toLowerCase()&&_.unshift("body"),_.join(" > ")}function addCLSDevTrace(){let e=0,_=[],k=0,I=[];const C=new PerformanceObserver((C=>{for(const R of C.getEntries())if(!R.hadRecentInput){const C=I[0],j=I[I.length-1];if(k&&R.startTime-j.startTime<1e3&&R.startTime-C.startTime<5e3?(k+=R.value,I.push(R)):(k=R.value,I=[R]),k>e){e=k,_=I;const C=_.reduce(((e,_)=>[...e,{value:_.value,startTime:_.startTime,nodes:_.sources.map((e=>e.node?getDomPath(e.node):"null"))}]),[]),R=null==C?void 0:C.reduce(((e,_)=>[...e,..._.nodes]),[]);(null==R?void 0:R.some((e=>/\#ibuHeaderMenu/.test(e)||/\#ibuHeaderChannels/.test(e))))||(window.PAGE_CLS_DEV_TRACE_UBT_PRE_PARAMS={list:C,clsValue:e}),e>.1&&(window.PAGE_CLS_DEV_TRACE_UBT_PARAMS={list:C,clsValue:e})}}})).observe({type:"layout-shift",buffered:!0});setTimeout((()=>{window.PAGE_CLS_DEV_TRACE_UBT_PARAMS&&(0,le.ap)("ibu_htl_online_cls_value",{value:window.PAGE_CLS_DEV_TRACE_UBT_PARAMS,preValue:window.PAGE_CLS_DEV_TRACE_UBT_PRE_PARAMS,url:window.location.href,locale:j.default.getByKey("cargo.locale")}),null==C||C.disconnect()}),1e4)}function getMultiFilterText(e){const _=(null!=e?e:[]).slice(0,3);let k="";return((0,se.qN)(this)||(0,se.tQ)(this))&&(k=null==_?void 0:_.filter((e=>""!==e)).join(ne.$r),""!==k&&(k="".concat(ne.$r).concat(k))),k}},36245:function(e,_,k){"use strict";k.d(_,{Z:function(){return Icon}});var I=k(22122),C=k(94184),R=k.n(C),j=k(67294);function Icon(e){const{type:_,className:k}=e;let C="u-icon";const B=R()(C,{["".concat(C,"-").concat(_)]:_},k);return j.createElement("i",(0,I.Z)({},e,{className:B}))}},39600:function(e,_,k){"use strict";k.d(_,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var I=k(22122),C=k(96156),R=k(28072),j=k(19045),B=k(34904),H=k(24986),U=k(68433),V=k(47419),G=k(15458),q=k(39621).default,z=k(48467).default,J=k(67294);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,C.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const __WEBPACK_DEFAULT_EXPORT__=e=>class ViewdHotels extends q{constructor(e){super(e),this.getCheckInCheckoutDate=()=>{let e=new Date,_=e.getDate(),k=new Date,I=function ds(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",k=e.getMonth()+1;return k=k<10?"0"+k:k,"".concat(e.getFullYear()).concat(_).concat(k).concat(_).concat(e.getDate())};return k.setDate(_+1),{checkIn:I(e).replace(/\//g,""),checkOut:I(k).replace(/\//g,"")}},this.ubtMapping={logGetBrowseRecordError:U.PV},this.onGetLocalHotelHistoryParams=()=>{let e=(0,B.Z)();const _=this.getLocalCheckinCheckOut(),k={fgt:"",checkIn:_&&_.checkIn||e.checkin,checkOut:_&&_.checkOut||e.checkout,isShowTotalAmount:Number(R.Z.get("IBU_showtotalamt")),roomCount:Number(e.crn)||Number(e.roomquantity)||1,adult:Number(e.adult)||1,child:Number(e.children)||0,url:window.location.href};if(R.Z.get("intl_ht1")){let e;e=R.Z.get("intl_ht1").split("=")[1].split(",");const _=e.map((e=>({cityId:e.split("_")[0],hotelId:e.split("_")[1]})));return _objectSpread(_objectSpread({},k),{},{hotelList:_.slice(0,6)})}return _objectSpread(_objectSpread({},k),{},{hotelList:[]})},this.state={showPanel:!1,hotelHistory:[]}}componentDidMount(){let e=this.onGetLocalHotelHistoryParams();if(e.hotelList.length){let _=this.getCheckInCheckoutDate(),k={hotelIds:e.hotelList,search:{checkIn:_.checkIn,checkOut:_.checkOut,roomQuantity:e.roomCount,pageCode:V.default.getByKey("pageId")}};const I={0:2,1:1,2:3};z(_objectSpread({url:"/getBrowseRecord",silence:!0,data:k,bff:!0},(0,G.RN)(k))).then((e=>{const{data:_}=e,k=_.hotelList.map((e=>{let{hotelBasicInfo:_={},hotelStarInfo:k={},commentInfo:C={}}=e;return{hotelId:_.hotelId,imgUrl:_.hotelImg,score:C.commentScore,name:_.hotelName||_.hotelEnName,scoreDesc:C.commentDescription,levelType:I[k.starType],levelValue:k.star,errorUrl:"http://webresource.tripcdn.com/ares2/ibu/fe-hotel/*/default/images/no_hotel_pic.png"}}));this.setState({hotelHistory:k,showPanel:!0})})).catch((e=>{this.$safeLog("logGetBrowseRecordError",e)}))}else this.setState({showPanel:!1})}getLocalCheckinCheckOut(){let e=j.Xb.get(H.Mb),_=e&&e.length>0?e[0]:null;return _&&_.calendar&&_.calendar.checkIn&&_.calendar.checkOut?{checkIn:_.calendar.checkIn,checkOut:_.calendar.checkOut}:null}render(){const{showPanel:_,hotelHistory:k}=this.state;return _?J.createElement(e,(0,I.Z)({},this.props,{showPanel:_,hotelHistory:k})):null}}},34904:function(e,_,k){"use strict";k.d(_,{Z:function(){return getFormattedQuery}});var I=k(19848);const getFormattedQuery=e=>{let _={},k={};if(e)_=e.state.tripQuery;else{let e=window.location.search;e&&e.split("?")[1].split("&").forEach((e=>{let k=e.split("=")[0],I=e.split("=")[1];_[k]=I}))}return Object.keys(_).forEach((e=>{k[e.toLowerCase()]=_[e]})),k.star?k.star=k.star.split(","):k.star=[],k.mproom&&(k.mproom=k.mproom.replace(/_/g,",")),k.checkin=k.checkin||k.startdate||k.ci||(0,I.getDefaultCheckIn)("-"),delete k.startdate,delete k.ci,k.checkin=k.checkin.replace(/\//g,"-"),k.checkout=k.checkout||k.depdate||k.co||(0,I.getDefaultCheckOut)("-"),delete k.depdate,delete k.co,k.checkout=k.checkout.replace(/\//g,"-"),k}},63732:function(e,_,k){"use strict";k.d(_,{Q2:function(){return buildUrl},Qb:function(){return decodeUrl2Filters},UK:function(){return getAttr},uG:function(){return getGuid},cc:function(){return getIsDev},Wz:function(){return getQueryString},kJ:function(){return I.kJ},Ew:function(){return I.Ew},en:function(){return parseUrl}});k(2020);var I=k(44904),C=k(23026),R=k(32127);const getGuid=()=>{function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()};function getIsDev(){var e=!1;return getIsClient()&&["10.32","localhost","127.0.0.1"].forEach(((_,k)=>{location&&location.host&&location.host.indexOf(_)>-1&&(e=!0)})),e}function getIsClient(){return C.Z}function getAttr(e,_){if(!e||!_)return null;var k=_.split(".");e=e||{};var I=0,C=k.length;for(Math.max(C-1,0);I<C;I++)if(null==(e=e[k[I]]))return null;return e}function parseUrl(e){var _,k,I="",C="",R="",j="",B="",H="",U={};let V="";(e=(e=(e||"").replace(/^\s+|\s+$/g,"")).replace(/\\/g,"/")).search(/^[a-z]+\:\/\//i)>-1&&(C=(k=e.split(":")).shift()+":",e=k.join(":")),0===e.indexOf("//")&&(I=(k=(e=e.replace("//","")).split("/")).shift(),e=k.join("/"),I.indexOf(":")>-1&&(k=I.split(":"),I=k[0],R=k[1])),e.search(/^(?:[^#]*)\?/i)>-1?(j=(k=(e=e.replace(/\?+/g,"?")).split("?")).shift(),e=k.join("?"),B=(k=e.split("#")).shift(),H=k.join("#")):(j=(k=e.split("#")).shift(),H=(k=k.join("").split("?")).shift(),B=k.join("")),_=j.split("/"),H=H?"#"+H:"";var G="";if(B){for(var q,z=0,J=(k=B.split(/&/)).length;z<J;z++)U[(q=k[z].split("="))[0]]=q[1]||"";G="?"+B}let Q=R?":"+R:"",ee=C?C+"//":"",te=j;return j&&0!=j.indexOf("/")&&(te="/"+j),V="ctrip:"===C&&U&&U.path?ee+I+Q+te+G+H:ee+I+Q+te+H+G,{url:e,hash:H,host:I+Q,hostname:I,href:V,origin:ee+I+Q,pathname:te,pathnames:_,port:R,protocol:C,search:G,searchs:U}}function buildUrl(e,_){let C=[],R="",j="",B=Object.assign({},_);if(e=e.replace(/{\w+}/gi,(function(e){const _=e.replace(/({)|(})/g,"");let C=B[_];return delete B[_],I.mf(C)?C="":I.Kn(C)&&(C=k.g.JSON.stringify(C)),C+""=="undefined"?"":C})),I.Kn(B)){let e="",_="";Object.keys(B).forEach((function(R){_=B[R],e=I.mf(_)?R+"="+_():I.Kn(_)?R+"="+k.g.JSON.stringify(_):I.HD(_)&&_.length||I.hj(_)||I.jn(_)?R+"="+_:"",e&&C.push(e)}))}return j=-1===e.indexOf("?")?"?":"&",C.length?R=C.join("&"):j="",e+j+R}function decodeUrl2Filters(e){let _=[],k=e,C=["filterId","type","value","subType","childValue","propertyValue","title","clickcount","sumClickcount","isSelect"],R={},j=[];return I.Ew(k)||(_=k.split(",").map((e=>(R={},j=e.split("*"),C.forEach(((e,_)=>{"null"===j[_]?R[e]=null:R[e]=j[_]||null,e!==C[0]&&e!==C[2]||(R[e]=R[e]&&R[e].replace(/\~/g,"|")),!R[e]&&delete R[e]})),R)))),_}function getQueryString(e,_,k){return(0,R.WH)(e,_,k)}},44904:function(e,_,k){"use strict";function tagTester(e){return function(_){return{}.toString.call(_)==="[object "+e+"]"}}k.d(_,{kJ:function(){return H},jn:function(){return V},mf:function(){return C},hj:function(){return j},Ew:function(){return G},Kn:function(){return U},HD:function(){return R}});"object"==typeof window&&(window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase());var I=tagTester("Arguments"),C=tagTester("Function"),R=tagTester("String"),j=tagTester("Number"),B=tagTester("Date"),H=(tagTester("RegExp"),tagTester("Error"),tagTester("Symbol"),tagTester("Map"),tagTester("WeakMap"),tagTester("Set"),tagTester("WeakSet"),tagTester("ArrayBuffer"),tagTester("DataView"),Array.isArray),U=function isObject(e){return"[object Object]"==={}.toString.call(e)},V=function isBoolean(e){return!0===e||!1===e},G=function isNullOrEmpty(e){let _=!0;return _=j(e)||V(e)||B(e)||C(e)?!!function isNaN(e){return j(e)&&e!=+e}(e):null==e||function isEmpty(e){return null==e||(q(e)&&(H(e)||R(e)||I(e))?0===e.length:0===Object.keys(e).length)}(e),_},q=function isArrayLike(e){return null!=e&&function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!C(e)}},53033:function(e,_,k){"use strict";k.d(_,{Z:function(){return q}});var I=k(17002),C=k(51603),R=k(86026),j=k(47419),B=k(48368),H=k(39621).default,U=k(67294);let V=null,G={};class Loading extends H{constructor(e){super(e),this.getTypeByPage=e=>{switch(e){case B.ZP.HOME_PAGE:case B.ZP.LIST_PAGE:case B.ZP.META_PAGE:case B.ZP.MAP_PAGE:return"goodPrice";case B.ZP.BOOK_PAGE:return"securePayment";case B.ZP.DETAIL_PAGE:case B.ZP.ORDER_FINISH_PAGE:case B.ZP.ORDER_DETAIL_PAGE:case B.ZP.CANCEL_ORDER_PAGE:case B.ZP.VOUCHER_PAGE:case B.ZP.NPS_H5_PAGE:case B.ZP.NPS_ONLINE_PAGE:case B.ZP.BRG_PAGE:return"serviceGuarantee";case B.ZP.ADD_REVIEW_PAGE:case B.ZP.FINISH_REVIEW_PAGE:return"rewards";default:return"serviceGuarantee"}},this.ubtMapping={logLoadingShow:e=>({actionType:"load",logValue:{position:e},logKey:"ibu_htl_".concat((0,B.h8)(),"_loading_show")})},this.state=G,V=this}componentDidMount(){const{show:e,position:_}=this.state;e&&_&&this.$safeLog("logLoadingShow",_)}componentDidUpdate(e,_){const{show:k,position:I}=this.state;!_.show&&k&&I&&this.$safeLog("logLoadingShow",I)}render(){const{show:e,type:_}=this.state,k=j.default.getByKey("pageId");return e?U.createElement(R.Z,{platform:"Online",loadingPreset:_||this.getTypeByPage(k),pageId:k}):null}}const q={show:e=>{const{type:_,position:k}=e||{};C.Z.freeze(),G={type:_,position:k,show:!0},null===V?I.w.push(Loading):V.setState(G)},hide:()=>{C.Z.unfreeze(),null!==V&&(G={show:!1},V.setState(G))}}},74364:function(e,_,k){"use strict";k.d(_,{Z:function(){return U}});var I=k(39621),C=k(67294);class Loading extends I.default{constructor(e){super(e)}render(){return C.createElement("div",{className:"m-hotelloading",style:{display:this.state.display}},C.createElement("div",{className:"m-hotelloading-panel"},C.createElement("div",{className:"m-hotelloading-icon"})))}}var R=k(17002),j=k(51603);let B=null,H={};class Pending extends Loading{constructor(e){super(e),this.state=H,B=this}}const U={show:function show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};j.Z.freeze(),H=Object.assign({display:"",content:""},e),null===B?R.w.push(Pending):B.setState(H)},hide:function hide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};j.Z.unfreeze(),null!==B&&(H=Object.assign({display:"none"},e),B.setState(H))}}},11465:function(e,_,k){"use strict";k.d(_,{Z:function(){return Header}});var I=k(35466),C=k(95669),R=k(30888),j=k(23026),B=k(39621),H=k(47419),U=k(67294);class Header extends B.default{constructor(e){super(e),this.defaultConfig={showHeadLine:!0,simple:!1,showLanguageSelector:!0,showCurrencySelector:!0,showEntry:!0},this.req=j.Z?null:e.ctx?e.ctx.req:null,this.isHead=e.isHead,this.headTheme=e.headTheme||"white"}render(){const e="10320668148"==H.default.getByKey("pageId",j.Z?void 0:this.ctx)||"10320668147"==H.default.getByKey("pageId",j.Z?void 0:this.ctx)||"10320668268"==H.default.getByKey("pageId",j.Z?void 0:this.ctx)||"10320668150"==H.default.getByKey("pageId",j.Z?void 0:this.ctx)||"10650047176"==H.default.getByKey("pageId",j.Z?void 0:this.ctx);let _=this.isHead?C.Z:R.Z,k=this.props.config||this.defaultConfig;return this.isHead&&"transparent"===this.headTheme&&(k=Object.assign({},k,{theme:"transparent"})),e&&(k.theme="transparent"),U.createElement(I.P,null,U.createElement(_,k))||null}}},23478:function(e,_,k){"use strict";k.d(_,{Z:function(){return Header}});var I=k(96156),C=k(35466),R=k(39621),j=k(52178),B=k(67154),H=k.n(B),U=k(59713),V=k.n(U),G=k(63038),q=k.n(G),z=k(48926),J=k.n(z),Q=k(87757),ee=k.n(Q),te=k(67294),ne=k.n(te),re=k(87074),oe=k(43770),ie=k(5469),ae=k(69877),le=k(96614),se=k.n(le);function formatUrlWithCargo(e,_){if(!e)return"";try{var k=_||{},I=k.isCover,C=k.isOnline,R=k.isH5;return function formatUrlWithTripContext(e,_,k){if(!e)return"";try{var I=(k||{}).isCover,C=_.locale,R=_.currency,j=e,B={replaceStr:void 0};j.startsWith("//")?(B.replaceStr=/^https:/,j="https:"+j):j.startsWith("/")&&(j="https://www.trip.com"+j,B.replaceStr=/^https:\/\/www.trip.com/);var H=new URL(j),U=C,V=R;I||(U=H.searchParams.get("locale")||C,V=H.searchParams.get("curr")||H.searchParams.get("currency")||R),H.searchParams.set("locale","".concat(U)),H.searchParams.set("curr","".concat(V)),H.searchParams.delete("currency");var G=H.href;return B.replaceStr&&(G=G.replace(B.replaceStr,"")),G}catch(_){return e}}(e,{locale:function getLocaleWithCargoBrowser(e){var _=e||{},k=_.isOnline,I=_.isH5,C=k?"online":I?"h5":void 0;return se().getLocale(C)}({isOnline:C,isH5:R}),currency:function getCurrencyWithCargoBrowser(e){var _=e||{},k=_.isOnline,I=_.isH5,C=k?"online":I?"h5":void 0;return se().getCurrency(C)}({isOnline:C,isH5:R})},{isCover:I})}catch(_){return e}}var ce=k(85529),ue=k(32407),de={appId:"100009239"},pe={appId:"330153"},he={topLoad:"ibu_pub_homepage_online_getbacktop_card_load",downloadLoad:"ibu_pub_online_sidebar_download_exposure",topClick:"ibu_pub_homepage_online_getbacktop_card_action",downloadClick:"ibu_pub_online_sidebar_download_click",chatClick:"ibu_pub_homepage_online_service_card_action",socialLoad:"ibu_online_homepage_social_card_load",socialClick:"ibu_online_homepage_social_icon_click",socialCloseClick:"ibu_online_homepage_social_card_close",socialBtnClick:"ibu_online_homepage_social_card_join",shareLoad:"ibu_pub_online_sidebar_share_exposure",shareClick:"ibu_pub_online_sidebar_share_click",sharePanelClick:"ibu_pub_sharecomponent_click",sharePanelExposure:"ibu_pub_sharecomponent_exposure"},fe=350,me="ibu_gotop_sale_autopop",ge=k(36652),ve=k.n(ge);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){V()(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}var ye=function inViewport(e){if(!e)return!1;var _=e.getBoundingClientRect();return _.width>0&&_.height>0&&(_.top>0&&_.top<window.innerHeight||_.bottom>0&&_.bottom<window.innerHeight)},be=function trace(e,_){var k=he[e];k&&ve().send({type:ge.UBT_TYPE.TRACE,key:k,data:_objectSpread({},_)})},_e={facebook:{name:"key_public_share_facebook",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Facebook.png?t=1",link:function link(e){return"https://www.facebook.com/sharer/sharer.php?u=".concat(e)},enable:!0},twitter:{name:"key_public_share_X",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/X.png",link:function link(e){return"https://twitter.com/share?url=".concat(e)},enable:!0},linkedin:{name:"key_public_share_linkedin",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Linkedin.png",link:function link(e){return"https://www.linkedin.com/shareArticle?mini=true&url=".concat(e)},enable:!0},kakao:{name:"key_public_share_kakao",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Kakao.png",link:function link(e){return"https://story.kakao.com/share?url=".concat(+e)},enable:!0},naver:{name:"key_public_share_naver",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Naver.png",link:function link(e,_){return"http://share.naver.com/web/shareView.nhn?url=".concat(e,"&title=").concat(_)},enable:!0},whatsapp:{name:"key_public_share_whatsApp",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/WhatsApp.png",link:function link(e){return"https://wa.me/?text=".concat(e)},enable:!0},vk:{name:"key_public_share_vk",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/VK.png",link:function link(e){return"https://vk.com/share.php?url=".concat(e)},enable:!0},email:{name:"key_public_share_email",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Email.png",link:function link(e,_,k){return"mailto:?subject=".concat(_,"&body=").concat(encodeURIComponent("".concat(k,"\r\n").concat(e)))},enable:!0},copy:{name:"key_public_share_copy",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Copy_Link.png",enable:!0},line:{name:"key_public_share_line",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Line.png",link:function link(e){return"https://social-plugins.line.me/lineit/share?url=".concat(e)},enable:!0},messenger:{name:"key_public_share_messenger",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Messenger.png",link:function link(e){return"https://www.facebook.com/dialog/send?app_id=10001&link=".concat(e,"&redirect_uri=").concat(e)},enable:!1},instagram:{name:"key_public_share_instagram",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Instagram.png",link:function link(){},enable:!1},wechat:{name:"key_public_share_wechat",icon:"https://file.tripcdn.com/files/7/ibu_online_assets/share/Wechat.png",link:function link(e){return"weixin://dl/share?webUrl=".concat(e)},enable:!1}},we={default:["whatsapp","facebook","twitter","messenger","instagram","linkedin"],zh_hk:["wechat","whatsapp","facebook","twitter","messenger","instagram","linkedin"],ja_jp:["line","whatsapp","facebook","twitter","messenger","instagram","linkedin"],th_th:["line","whatsapp","facebook","twitter","messenger","instagram","linkedin"],en_th:["line","whatsapp","facebook","twitter","messenger","instagram","linkedin"],ko_kr:["kakao","naver","facebook","twitter","messenger","instagram","linkedin"],ru_ru:["vk","whatsapp","facebook","twitter","messenger","instagram","linkedin"]};const Ee=function SharePanel(e){var _=e.pageId,k=e.locale,I=e.moduleName,C=e.shareMeta,R=e.onCopy,j=e.onClose,B=(0,ue.formatLocale)(k,"aa_bb"),H=C||{},U=H.url,V=void 0===U?"":U,G=H.title,q=void 0===G?"":G,z=H.description,J=void 0===z?"":z,Q=encodeURIComponent(V),ee=(0,re.Q)(pe),oe=(0,te.useMemo)((function(){return we[B]?we[B]:we.default}),[B]),ie=(0,te.useCallback)((function(e){be("sharePanelClick",{triggertype:"click",scenetype:"share",platform:"pc",pageid:_,moduleName:I,thirdtype:e})}),[_,I]);return(0,te.useEffect)((function(){return be("sharePanelExposure",{triggertype:"exposure",platform:"pc",pageid:_,moduleName:I}),function(){be("sharePanelClick",{triggertype:"click",scenetype:"close",platform:"pc",pageid:_,moduleName:I})}}),[]),ne().createElement("div",{className:"online-gotop-sharing-panel",onClick:function onClick(e){e.stopPropagation&&e.stopPropagation()}},ne().createElement("span",{className:"share-title"},ee.key_public_share_shareLabel),ne().createElement("i",{className:"fi fi-close",onClick:function onClick(){j&&j()}}),ne().createElement("div",{className:"share-box"},oe.map((function(e,_){return _e[e].enable?ne().createElement("div",{className:"share-channel ".concat(e),key:_,onClick:function onClick(){ie(e),window.open(_e[e].link(Q,q,J),"_blank")}},ne().createElement("div",{className:"channel-icon",style:{backgroundImage:"url(".concat(_e[e].icon,")")}}),ne().createElement("div",{className:"channel-name"},ee[_e[e].name])):null})),_e.copy.enable?ne().createElement("div",{className:"share-channel copylink",onClick:function onClick(){R&&(R(V,"complex"),ie("copy"))}},ne().createElement("div",{className:"channel-icon"},ne().createElement("span",{className:"icon-entity",style:{backgroundImage:"url(".concat(_e.copy.icon,")")}})),ne().createElement("div",{className:"channel-name"},ee[_e.copy.name])):null,_e.email.enable?ne().createElement("div",{className:"share-channel email"},ne().createElement("a",{className:"channel-icon",href:_e.email.link(V,q,J),"aria-label":"email",onClick:function onClick(){ie("email")}},ne().createElement("span",{className:"icon-entity",style:{backgroundImage:"url(".concat(_e.email.icon,")")}})),ne().createElement("div",{className:"channel-name"},ee[_e.email.name])):null))};var Se=function(){var e=J()(ee().mark((function _callee(e){var _,k,I,C,R,j,B,H,U;return ee().wrap((function _callee$(V){for(;;)switch(V.prev=V.next){case 0:if(_=e.serviceChatDomain,k=e.serviceChatPath,I=e.imQueryString,C=e.imQsAsync,R=e.imQsAsyncCallback,j=e.locale,B=e.isPreSale,H="".concat(_,"/").concat(k||"servicechatv2","?locale=").concat(j.replace("-","_"),"&isPreSale=").concat(null!=B?B:1),U=I||(window.__PAGE_CONFIG__||{}).IMQueryString,!C||!R){V.next=13;break}return V.prev=4,V.next=7,R();case 7:U=V.sent,V.next=13;break;case 10:V.prev=10,V.t0=V.catch(4);case 13:return U&&(H+="&".concat(U)),V.abrupt("return",H);case 15:case"end":return V.stop()}}),_callee,null,[[4,10]])})));return function getImPlusUrl(_){return e.apply(this,arguments)}}();const Oe=function GoTop(e){var _=e.pageId,k=void 0===_?"":_,I=e.className,C=void 0===I?"":I,R=e.buttonStyle,j=e.showShare,B=void 0!==j&&j,U=e.shareOptions,G=e.showServiceChat,z=void 0!==G&&G,Q=e.serviceChatOptions,le=e.showAppDownload,se=void 0===le||le,ue=e.onlineADCProps,pe=e.showSocialMedia,he=void 0!==pe&&pe,ge=e.socialMediaOptions,ve=e.onMounted,_e=void 0===ve?function(){}:ve,we=Q||{},Oe=we.url,Te=we.serviceChatDomain,ke=void 0===Te?"":Te,Ie=we.serviceChatPath,Ce=void 0===Ie?"servicechatv2":Ie,Pe=we.imQueryString,Le=void 0===Pe?"":Pe,Ne=we.imQsAsync,De=we.imQsAsyncCallback,Ae=we.isPreSale,Re=we.serviceChatIcon,xe=ge||{},je=xe.socialMediaLogo,Be=xe.socialTitle,Me=xe.socialSubTitle,Fe=xe.socialLink,He=(0,re.Q)(de),Ke=(0,oe.N)().locale,Ue=(0,te.useState)(0),Ze=q()(Ue,2),Ve=Ze[0],We=Ze[1],Ge=(0,te.useState)(fe),$e=q()(Ge,2),qe=$e[0],ze=$e[1],Ye=(0,te.useState)(!1),Je=q()(Ye,2),Xe=Je[0],Qe=Je[1],et=(0,te.useState)(!1),tt=q()(et,2),nt=tt[0],rt=tt[1],ot=(0,te.useState)(!1),it=q()(ot,2),at=it[0],lt=it[1],st=(0,te.useState)(!!(0,ie.ej)(me)||!1),ct=q()(st,2),ut=ct[0],dt=ct[1],pt=(0,te.useState)(!1),ht=q()(pt,2),ft=ht[0],mt=ht[1],gt=(0,te.useState)({}),vt=q()(gt,2),yt=vt[0],bt=vt[1],_t=(0,te.useState)(!1),wt=q()(_t,2),Et=wt[0],St=wt[1],Ot=(0,te.useState)(!1),Tt=q()(Ot,2),kt=Tt[0],It=Tt[1],Ct=(0,te.useState)((function(){return(0,ie.eZ)(Ke)})),Pt=q()(Ct,2),Lt=Pt[0],Nt=Pt[1],Dt=(0,te.useState)(!1),At=q()(Dt,2),Rt=At[0],xt=At[1],jt=(0,te.useState)(!1),Bt=q()(jt,2),Mt=Bt[0],Ft=Bt[1],Ht=(0,te.useState)(21),Kt=q()(Ht,2),Ut=Kt[0],Zt=Kt[1],Vt=(0,te.useRef)(null),Wt=(0,te.useRef)(!1),Gt=(0,te.useRef)(null),$t=(0,te.useRef)(null),qt=(0,te.useRef)(null),zt=(0,te.useRef)(),Yt=function setSaleVisible(e){e||dt(!0),e&&Xe&&Qe(!1),rt(e)},Jt=function setModelVisible(e){e&&nt&&(dt(!0),rt(!1)),lt(!0),Qe(e)},Xt=(0,te.useCallback)((function(e){if(e&&e.getBoundingClientRect){var _=(e.getBoundingClientRect()||{}).top;if(_<0)return e.style.bottom="".concat(_,"px"),_}return 0}),[]);(0,te.useEffect)((function(){xt(!0)}),[]),(0,te.useEffect)((function(){Nt((0,ie.eZ)(Ke))}),[Ke]),(0,te.useEffect)((function(){try{ze(window.innerHeight&&window.innerHeight/2>fe?window.innerHeight/2:fe)}catch(e){ze(fe)}var e=function throttle(e){var _,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,I=null;return function(){for(var C=this,R=arguments.length,j=new Array(R),B=0;B<R;B++)j[B]=arguments[B];var H=+new Date;I&&H<I+k?(clearTimeout(_),_=setTimeout((function(){I=H,e.apply(C,j)}),k)):(I=H,e.apply(this,j))}}((function listener(){var e=document.documentElement.scrollTop||document.body.scrollTop;e>=100&&!Wt.current?(Wt.current=!0,be("topLoad",{triggertype:"load"})):e<100&&Wt.current&&(Wt.current=!1),We(e)}));return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]);var Qt=function recordPopCookie(){(0,ie.ej)(me)||(0,ie.d8)(me,"1",14)};(0,te.useEffect)((function(){ut&&Qt()}),[ut]),(0,te.useEffect)((function(){!nt&&Ve>qe&&!ut&&Yt(!0)}),[Ve,nt,qe,ut]),(0,te.useEffect)((function(){B&&ye(qt.current)&&be("shareLoad",{triggertype:"load"})}),[B]),(0,te.useEffect)((function(){se&&ye(Gt.current)&&be("downloadLoad",{triggertype:"load"})}),[se]),(0,te.useEffect)((function(){if(Xe){var e=document.querySelector(".mod-back-top-item-modal");if(e){e.style.bottom=0,Zt(21);var _=Xt(e);Zt((function(e){return e-_}))}}}),[Xe]),(0,te.useEffect)((function(){nt&&ye($t.current)&&be("socialLoad",{triggertype:"load"})}),[nt]),(0,te.useEffect)((function(){_e&&_e(Vt.current)}),[]),(0,te.useEffect)((function(){var e=function handler(){return It(!1)};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[]),(0,te.useEffect)((function(){if(kt){var e=document.querySelector(".online-gotop-sharing-panel");Xt(e)}}),[kt]);var en=function handleTipCopySuccess(e){if("simple"===e){var _=qt.current;if(_){var k=_.offsetHeight,I=_.getBoundingClientRect()||{},C=I.left,R=void 0===C?0:C,j=I.top,B=void 0===j?0:j,H=I.right,U=Lt?(void 0===H?0:H)+16:window.innerWidth-(R-16),G=B+k/2,q=Lt?"left":"right";bt(V()(V()(V()({},q,U),"top",G),"transform","translate(0%, -50%)"))}}else{var z=document.querySelector(".online-gotop-sharing-panel");if(z){var J=z.getBoundingClientRect()||{},Q=J.left,ee=void 0===Q?0:Q,te=J.top,ne=void 0===te?0:te,re=J.width,oe=ee+(void 0===re?0:re)/2,ie=window.innerHeight-ne;bt({left:oe,bottom:ie,transform:"translate(-50%, ".concat(ne<40?"100%":"15px",")")})}}mt(!0);var ae=setTimeout((function(){mt(!1),clearTimeout(ae)}),3e3)},tn=function(){var e=J()(ee().mark((function _callee2(e,_){var k;return ee().wrap((function _callee2$(I){for(;;)switch(I.prev=I.next){case 0:if(!(window.navigator&&navigator.clipboard&&navigator.permissions)){I.next=5;break}return I.next=3,navigator.clipboard.writeText(e);case 3:I.next=16;break;case 5:(k=document.createElement("textArea")).value=e,k.style.width="0px",k.style.position="fixed",k.style.left="-9999px",k.style.top="0px",k.setAttribute("readonly","readonly"),document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k);case 16:en(_);case 17:case"end":return I.stop()}}),_callee2)})));return function handleCopy(_,k){return e.apply(this,arguments)}}(),nn=function(){var e=J()(ee().mark((function _callee3(e){return ee().wrap((function _callee3$(_){for(;;)switch(_.prev=_.next){case 0:if(!U||"complex"!==U.mode){_.next=19;break}if(zt.current=U.complexShareMeta,!U.shareAsync||!U.getShareTextAsync){_.next=14;break}return _.prev=3,St(!0),_.next=7,U.getShareTextAsync();case 7:zt.current=_.sent,_.next=13;break;case 10:_.prev=10,_.t0=_.catch(3);case 13:St(!1);case 14:Yt(!1),Jt(!1),It(!0),_.next=36;break;case 19:if("hover"===e){_.next=36;break}if(zt.current=U&&U.shareText||"",!(U&&U.shareAsync&&U.getShareTextAsync)){_.next=33;break}return _.prev=22,St(!0),_.next=26,U.getShareTextAsync();case 26:zt.current=_.sent,_.next=32;break;case 29:_.prev=29,_.t1=_.catch(22);case 32:St(!1);case 33:Yt(!1),Jt(!1),tn(zt.current,"simple");case 36:case"end":return _.stop()}}),_callee3,null,[[3,10],[22,29]])})));return function handleCopyTrigger(_){return e.apply(this,arguments)}}();return ne().createElement("div",{className:"mod-back-top"},ne().createElement("div",{className:"mod-back-top-side-bar ".concat(C),dir:Lt?"rtl":"",ref:Vt},ne().createElement("div",{className:"mod-back-top-item gotop".concat(Ve<100?" u-hide":""),style:R},ne().createElement("a",{className:"mod-back-top-block",title:He.Home_GoTop,onClick:function onClick(){be("topClick",{triggertype:"action"}),Yt(!1),Jt(!1),(document.documentElement||{}).scrollTop=0,(document.body||{}).scrollTop=0}},ne().createElement("i",{className:"icon-back-top fi fi-arrow-top"}))),B&&ne().createElement("div",{className:"mod-back-top-item share",ref:qt,style:R},ne().createElement(ce.Z,{className:"mod-back-top-share",type:"solid-primary",loading:Et,onClick:function onClick(e){e.stopPropagation&&e.stopPropagation(),be("shareClick",{triggertype:"action"}),nn("click")},customProps:{onMouseEnter:function onMouseEnter(){nn("hover")}}},ne().createElement("i",{className:"icon-chat fi fi-share-icon"})),kt?ne().createElement(Ee,{pageId:k,locale:Ke,moduleName:U&&U.moduleName||"",shareMeta:zt.current,onCopy:function onCopy(e){return tn(e,"complex")},onClose:function onClose(){return It(!1)}}):null,ft?ne().createElement("div",{className:"tooltip",style:yt},ne().createElement("i",{className:"icon"}),He.key_gotop_share_tip):null),z&&ne().createElement("div",{className:"mod-back-top-item chat",style:R},ne().createElement(ce.Z,{className:"chat",type:"solid-primary",loading:Mt,customProps:{title:He.Home_Chat},onClick:J()(ee().mark((function _callee4(){return ee().wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:if(be("chatClick",{triggertype:"action"}),Yt(!1),Jt(!1),Oe||Ft(!0),e.t0=window,e.t1=formatUrlWithCargo,e.t2=Oe,e.t2){e.next=11;break}return e.next=10,Se({imQueryString:Le,imQsAsync:Ne,imQsAsyncCallback:De,locale:Ke,serviceChatDomain:ke,serviceChatPath:Ce,isPreSale:Ae}).then((function(e){return Ft(!1),e}));case 10:e.t2=e.sent;case 11:e.t3=e.t2,e.t4=(0,e.t1)(e.t3),e.t0.open.call(e.t0,e.t4);case 14:case"end":return e.stop()}}),_callee4)})))},Re||ne().createElement("i",{className:"icon-chat fi fi-service"}))),se&&ne().createElement("div",{className:"mod-back-top-item download",ref:Gt,style:R},ne().createElement("a",{className:"",title:He.Home_Download,onClick:function onClick(){try{be("downloadClick",{triggertype:"action"}),Jt(!Xe)}catch(e){}}},ne().createElement("i",{className:"icon-chat fi fi-app-new"})),ne().createElement("div",{className:"mod-back-top-item-modal ".concat(Xe?"":"u-hide")},ne().createElement("i",{className:"fi fi-close",onClick:function onClick(){return Jt(!1)}}),ne().createElement("span",{className:"mod_popup__arrow",style:{bottom:Ut}}),ne().createElement("div",null,Rt?ne().createElement(ae.Z,H()({className:at?"":"hide-component"},ue)):null))),he&&ne().createElement("div",{className:"mod-back-top-item social-media",ref:$t,style:R},ne().createElement("a",{className:"",title:He.key_gotop_social_hint,onClick:function onClick(){be("socialClick",{triggertype:"click",icon:"1"}),Yt(!nt)}},ne().createElement("i",{className:"icon-chat sale-icon"})),Rt?ne().createElement("div",{className:"mod-back-top-item-modal ".concat(nt?"":"u-hide")},ne().createElement("i",{className:"fi fi-close",onClick:function onClick(){be("socialCloseClick",{triggertype:"click",close:"1"}),Yt(!1)}}),ne().createElement("span",{className:"mod_popup__arrow",style:{bottom:Ut}}),ne().createElement("div",null,ne().createElement("div",{className:"sale-content"},ne().createElement("div",{className:"sale-logo-img",style:{backgroundImage:"url('".concat(je||"https://ak-d.tripcdn.com/images/05E3u12000cnaoq3v8A27.png","')")}}),ne().createElement("div",{className:"sale-txt-group"},ne().createElement("div",{className:"sale-title"},Be||He.key_gotop_social_title),ne().createElement("div",{className:"sale-subtitle"},Me||He.key_gotop_social_subtitle))),ne().createElement("div",{className:"sale-button",onClick:function onToSocial(){be("socialBtnClick",{triggertype:"click",join:"1"}),Qt(),Fe&&window.open(formatUrlWithCargo(Fe))}},He.key_gotop_social_btn))):null)))};const Te=(0,j.K)(Oe,{name:"@ctrip/trip-component-platform-online-gotop",version:"8.0.1"});var ke=k(89205),Ie=k(47419),Ce=k(48467).default,Pe=k(67294);function sideBar_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function sideBar_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?sideBar_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):sideBar_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class Header extends R.default{constructor(e){super(e),this.config=sideBar_objectSpread(sideBar_objectSpread({},e.config),{},{showAppDownload:!1})||{}}render(){var e;const _=null!==(e=Ie.default.getByKey("qconfigData.imQueryStringSwitch"))&&void 0!==e?e:"",{imQsAsyncParams:k,orderInfo:I,logValue:R}=this.config;let j="1321";return"10320668147"===this.config.pageId?j="1488":"10320668150"===this.config.pageId&&(j=""),Pe.createElement(C.P,null,Pe.createElement(Te,{showServiceChat:!0,showAppDownload:!0,onlineADCProps:{pageId:this.config.pageId,customId:"side"},serviceChatOptions:{imQueryString:"pageCode=".concat(this.config.pageId,"&bizType=").concat(j,"&channel=HTL"),imQsAsync:"T"===_,imQsAsyncCallback:async()=>await(async(e,_,k,I,C)=>{const R=encodeURIComponent(JSON.stringify(_));return await Ce({url:"/addIMPlusToken",data:e,genk:!0,bff:!0,bffV3:!0,bffCode:28537}).then((e=>{var k;const j=null==e||null===(k=e.data)||void 0===k?void 0:k.tokenId;let B=["pageCode=".concat(I),"bizType=".concat(C),"channel=HTL"];return void 0!==_&&B.push("orderInfo=".concat(R)),void 0!==j&&B.push("thirdPartytoken=".concat(j)),B.join("&")})).catch((()=>((0,ke.ap)("ibu_htl_online_gotop_imqsasync_callback_error",k),void 0!==_?"pageCode=".concat(I,"&bizType=").concat(C,"&channel=HTL&orderInfo=").concat(R):"pageCode=".concat(I,"&bizType=").concat(C,"&channel=HTL"))))})(k,I,R,this.config.pageId,j)}}))||null}}},86264:function(e,_,k){"use strict";k.d(_,{Z:function(){return Base}});var I=k(96156),C=k(42938),R=k(39621),j=k(94184),B=k.n(j),H=k(67294);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}class Base extends R.default{constructor(e){super(e),this.state={show:"",data:[{}],selectedId:[],position:{x:0,y:0}},Object.assign(this,{nextShowState:{},options:{}})}_beforeShow(){}_afterShow(){}_beforeHide(){}_afterHide(){}_show(){const{data:e,selectedId:_,offset:k,target:I,minWidth:R,width:j,showItemSelectedIcon:B,fclass:H,permitCancel:U,comp:V,afterHide:G,portal:q,portalStyle:z}=this.getOptions();this.nextShowState={show:!0,selectedId:_,position:{x:C.Z.getAbsLeft(I)+~~k.x,y:C.Z.getAbsTop(I)+~~k.y+I.offsetHeight},data:e,minWidth:R,width:j,showItemSelectedIcon:B,fclass:H,permitCancel:U,comp:V,afterHide:G,portal:q,target:I,portalStyle:z}}_hide(){}getOptions(){return this.options}show(e){this.options=e,this._beforeShow(),this._show(),this.setState(function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}({},this.nextShowState),(()=>{this._afterShow()}))}hide(){this.setState({show:!1})}_render(){const{position:e,show:_,width:k,minWidth:I,fclass:C,portal:R,target:j,portalStyle:U}=this.state,V={position:"absolute",display:_?"block":"none",top:e.y,left:e.x,width:k||"auto",minWidth:I||"auto"};return R&&j&&U&&Object.assign(V,U),e=>{const{isstoppropagation:_,children:k,needSearch:I}=e,U=B()("select-panel",C);if(!k||k.length<1)return null;const G=H.createElement("ul",{style:V,className:U,children:k,onMouseDown:e=>{_&&!I&&(e.preventDefault(),e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation())}});return R&&(null==j?void 0:j.offsetParent)?ReactDOM.createPortal(G,j.offsetParent):G}}}},39360:function(e,_,k){"use strict";k.d(_,{Z:function(){return PullDown}});const noop=()=>{};class PullDown{constructor(e){const{panelList:_,offset:k={x:0,y:0},callback:I,confirm:C=noop,clear:R=noop}=e;Object.assign(this,{panelList:_,offset:k,callback:I,confirm:C,clear:R})}async _show(e){const{selectedId:_,data:k,event:I,condition:C=(()=>!0),panel:R,minWidth:j="auto",width:B="auto",showItemSelectedIcon:H,fclass:U,permitCancel:V,comp:G,afterHide:q,portal:z,portalStyle:J}=e;if(C()){R.initShow&&R.initShow(),R.loading&&R.loading();const e=await k();R.hideLoading&&R.hideLoading(),R.show({target:I.target,offset:this.offset,data:e,selectedId:_,callback:this.callback,minWidth:j,width:B,showItemSelectedIcon:H,fclass:U,permitCancel:V,comp:G,confirm:this.confirm,clear:this.confirm,afterHide:q,portal:z,portalStyle:J})}}static _hide(e){const{panel:_}=e;_&&_.hide()}static async _change(e){const{value:_,data:k,panel:I}=e;if(!k)return;I.loading&&I.loading();const C=await k(_);I.hideLoading&&I.hideLoading(),I.update(C)}static _refresh(e){const{selectedId:_,panel:k}=e;k.update&&k.update(_)}dispatch(e){var _;const{event:k,type:I,custom:C,panelId:R=0}=e,j=I||k.type,B=null==k||null===(_=k.relatedTarget)||void 0===_?void 0:_.className,H=this.panelList[R];if(Object.assign(e,{panel:H}),C)C();else switch(j.toLowerCase()){case"focus":this._show(e);break;case"blur":"search-input"!==B&&PullDown._hide(e);break;case"input":PullDown._change(e);break;case"refreshselectid":PullDown._refresh(e)}}}},78172:function(e,_,k){"use strict";k.d(_,{X:function(){return I.Z},Q:function(){return C.Z}});var I=k(86264),C=k(39360)},42938:function(e,_,k){"use strict";k.d(_,{Z:function(){return I}});const I={getAbsTop(e){if(e){let _=e.offsetTop;for(;null!==e.offsetParent;)_=_+(e=e.offsetParent).offsetTop-e.scrollTop;return _}},getAbsLeft(e){if(e){let _=e.offsetLeft;for(;null!==e.offsetParent;)_+=(e=e.offsetParent).offsetLeft;return _}}}},31061:function(e,_,k){"use strict";k.d(_,{I:function(){return I}});const I="UPDATE_DETENTION"},73396:function(e,_,k){"use strict";k.d(_,{L:function(){return C}});var I=k(31061);const C=function detention(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.I?Object.assign({},e,C):e}},14714:function(e,_,k){"use strict";k.d(_,{kF:function(){return I},jd:function(){return C},Zc:function(){return R},qX:function(){return j},E0:function(){return B},Rz:function(){return H},Km:function(){return U},hu:function(){return V},K5:function(){return G},FA:function(){return q},$v:function(){return z},hR:function(){return J},iv:function(){return Q},xN:function(){return ee},Ak:function(){return te},QF:function(){return ne}});const I="Wifi",C="NoWifi",R="Network",j="Smoke",B="NoSmoke",H="Window",U="NoWindow",V="NoMeal",G="Meal",q="Breakfast",z="HotelMeal",J="MultiMeal",Q="FreeCancel",ee="NotFreeCancel",te="LadderCancellation",ne="Bed"},24499:function(e,_,k){"use strict";k.r(_),k.d(_,{default:function(){return ee}});var I=k(17002),C=k(35469),R=k(22122),j=k(20978),B=k(37701),H=k(86145),U=k(94184),V=k.n(U),G=k(39621).default,q=k(67294);class view_Confirm extends G{constructor(e){super(e)}render(){const{bodyClick:e,button:_,className:k,maskClassName:I,close:C,display:U,fclass:G,status:z,titleCenterAlign:J,title:Q,content:ee,style:te}=this.state;return q.createElement("div",{className:"m-confirm-mask m-mask ".concat(I||""),onMouseDown:this.handleOnMouseDownMask.bind(this),style:{display:U}},q.createElement("div",{className:V()("m-confirm",k,z),style:te,onClick:_=>{e&&e(),_.stopPropagation()}},C&&q.createElement("span",{className:"m-confirm_close",onClick:this.onIconClose.bind(this)},q.createElement(H.Z,{type:"close"})),q.createElement("div",{className:V()("m-confirm_content","clearfix",{titleOnly:!ee})},G&&q.createElement(H.Z,{type:G,className:"m-confirm-icon"}),q.createElement("div",{className:"tipTxt"},Q&&q.createElement("div",{className:V()("title",{center:J})},Q),ee&&q.createElement("div",{className:"content"},ee))),_&&!!_.length&&q.createElement("div",{className:"m-confirm_btn clearfix"},_.map(((e,_)=>q.createElement("span",{className:"btn",key:_},"Link"===e.type?q.createElement("span",{className:"btn"},q.createElement(B.Z,null,e.text)):q.createElement(j.Z,(0,R.Z)({type:e.fclass,onClick:this.onClick.bind(this)},e),e.text)))))))}}var z=k(51603);let J=null,Q=null;class Confirm extends view_Confirm{constructor(e){super(e),this.state=J,Q=this}handleOnMouseDownMask(e){if(e.target===e.currentTarget&&this.state.maskClosable){const{onMaskClose:e}=this.state;e&&e(),this.hide()}}onClick(){arguments[1].sure&&arguments[1].sure(arguments)||this.hide()}onIconClose(){const{onIconClose:e}=this.state;e&&e(),this.hide()}hide(){const e=this.state.closeCallback;this.setState({status:"popOut",display:"none",content:"",closeCallback:()=>{},onIconClose:()=>{},onMaskClose:()=>{}}),z.Z.unfreeze(),e&&e()}}const ee={show:(e,_)=>{let k=[{text:(0,C.I)("common_sure"),fclass:"primary"},{text:(0,C.I)("common_cancel"),fclass:"outline"}];"string"!=typeof e&&"number"!=typeof e||(e={title:e}),e.type&&"confirm"!==e.type&&k.splice(1,1),"function"==typeof _&&(k[0].sure=_,e.button=k),(e.button||[]).map(((_,I)=>{e.button[I]=Object.assign(k[I],_)})),e=Object.assign({title:"",close:!1,status:"popIn",content:"",display:"",maskClosable:!1,className:"",button:k,fclass:"",bodyClick:!1,style:{}},e),null===Q?(J=e,I.w.push(Confirm)):Q.setState(e),z.Z.freeze()},hide:e=>{Q&&Q.hide(),e&&e()}}},24367:function(e,_,k){"use strict";k.r(_),k.d(_,{default:function(){return z}});var I=k(17002),C=k(23026),R=k(51603),j=k(86145),B=k(39621).default,H=k(67294);class popShow extends B{constructor(e){super(e)}render(){const e=this.props.Child;return H.createElement("div",{className:"m-popshow ".concat(this.props.fclass)},H.createElement("div",{className:"m-popshow_header"},H.createElement("span",{className:"popAction",onClick:this.onClick&&this.onClick.bind(this)},H.createElement(j.Z,{type:"close"}))),H.createElement("div",{className:"m-popshow_content"},H.createElement(e,this.props.data)))}}class Header extends popShow{constructor(e){super(e)}onClick(){z.hide()}}var U=k(39621).default,V=k(67294);class view_Mask extends U{constructor(e){super(e)}render(){const e=this.state.Child,_=Object.assign({display:this.state.display},this.state.style);return V.createElement("div",{className:"m-mask ".concat(this.state.active),style:_,onTransitionEnd:this.onTransitionEnd.bind(this),onClick:this.state.clickMask},this.state.header&&V.createElement(Header,{header:this.state.header,fclass:this.state.fclass,Child:e,data:this.state.data}),!this.state.header&&e&&V.createElement(e,this.state.data))}}let G=null,q={};class Mask extends view_Mask{constructor(e){super(e),this.state=G,G=this,this.state.animation&&setTimeout((()=>{this.onActive()}),50)}onActive(){this.setState({active:"active"})}onTransitionEnd(){!0===this.state.animation&&"animation"===this.state.active?this.setState({display:"none"}):!0===this.state.animation&&R.Z.freeze()}onClick(){this.state.clickMask&&this.state.clickMask()}}const z={show:function show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e=Object.assign({display:"",active:e.animation?"animation":"",animation:!1,header:null,Child:null,data:null,callback:null,fclass:"",clickMask:_=>{_.target===_.currentTarget&&e.maskClosable&&e.hide&&e.hide()}},e),null===G)G=e,I.w.push(Mask);else{try{G.setState(e)}catch(e){console.log("err:",e)}e.animation&&setTimeout((()=>{G.onActive()}),50)}C.Z&&document.body.classList&&(q.scrollTop=window.pageYOffset||window.screenY,document.body.style.overflow="hidden")},hide:function hide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CLOSE";!1===G.state.animation?G.setState({display:"none"}):G.setState({active:"animation"}),C.Z&&document.body.classList&&R.Z.unfreeze(),G.state.callback&&G.state.callback(e)}}},35425:function(e,_,k){"use strict";k.r(_),k.d(_,{default:function(){return toast}});var I=k(86145),C=k(39621).default,R=k(67294);class view_Toast extends C{constructor(e){super(e)}render(){const e={display:"block",animation:"toastIn ".concat(this.state.animationTime,"s")};return R.createElement("div",{className:"m-toast",style:this.state.active?e:{},onAnimationEnd:this.onAnimationEnd.bind(this)},R.createElement(I.Z,{type:this.state.fclass,className:this.state.iconClass}),R.createElement("span",null,this.state.content))}}var j=k(17002);let B=null;class Toast extends view_Toast{constructor(e){super(e),this.state=B,B=this}onAnimationEnd(){this.state.sure&&this.state.sure(),this.setState({active:""})}}const toast=(e,_)=>{"string"!=typeof e&&"number"!=typeof e||(e={content:e,sure:_}),e=Object.assign({sure:_,active:"active",content:"",fclass:"remind",animationTime:3},e),null===B?(B=e,j.w.push(Toast)):B.setState(e)}},31903:function(e,_,k){"use strict";k.d(_,{Wj:function(){return I},f2:function(){return C},L7:function(){return R}});const I={STARRATING:"star",MEALS:"breakfast",PAYMENT:"payType",HEALTH:"health",BEDTYPE:"bedType",BOOKPOLICY:"bookPolicy",BOOKABLE:"bookable",DISCOUNTS:"discount",GuestRating:"rate",POPULARFILTERS:"popularFilters",BRAND:"brand",ZONES:"zone",CITYS:"cityId",PRECITYS:"preCityInfo",METROS:"metro",LANDMARKS:"landmark",AIRPORTANDRAILWAYSTATION:"airportTrainstation",AMENITIES:"amenty",LOCATION:"location",FEATURES:"feature",CATEGORYS:"category",PRICERANGE:"priceRange",PRICETYPE:"priceType",HOTAREA:"hotArea",AREAS:"areas"},C={stars:"star",breakfasts:"breakfast",payTypes:"payType",bedTypes:"bedType",bookPolicies:"bookPolicy",bookables:"bookable",discount:"discount",rates:"rate",health:"health",quickFilter:"popularFilters",brands:"brand",zones:"zone",citys:"cityId",PRECITYS:"preCityInfo",metros:"metro",landmarks:"landmark",airportTrainstations:"airportTrainstation",amenties:"amenty",locations:"location",features:"feature",categorys:"category",priceFilter:"priceRange",priceTypes:"priceType",hotArea:"hotArea"},R={normal:"NORMAL",recommend:"TRIP_RECOMMEND"}},13601:function(e,_,k){"use strict";k.d(_,{f:function(){return genInitFilterCondition}});var I=k(96156),C=k(47419),R=k(94864),j=k(3479),B=k(23026);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const H={stars:"star",rates:"rate",brands:"brand",amenties:"amenty",breakfasts:"breakfast",priceTypes:"priceType",priceFilter:"priceRange",payTypes:"payType",bedTypes:"bedType",bookables:"bookable",bookPolicies:"bookPolicy",discount:"discount",zones:"zone",landmarks:"landmark",airportTrainstations:"airportTrainstation",metros:"metro",locations:"location",categorys:"category",features:"feature",citys:"cityId",quickFilter:"popularFilters",hotArea:"hotArea"},genInitFilterCondition=e=>{let{filterInfo:_={}}=e||C.default.getByKey("initData")||{},k=Object.keys(_),I=R.Z;return k.length?(k.filter((e=>H[e])).forEach((e=>{let k=H[e],C=(0,j.Z)(R.Z[k],"removeDispatch",null),U="".concat("metros"===e?"lineList":"list");if(I[k]=_[e]?Object.assign(_[e],{removeDispatch:C}):"metros"===e?{lineList:[],removeDispatch:C}:{list:[],removeDispatch:C},!I[k][U]&&(I[k][U]=[]),"stars"!==e||B.Z)"priceFilter"===e&&(I[k]=_objectSpread(_objectSpread({},_[e]),{},{removeDispatch:C}));else{let e=[2,3,4,5];I[k][U]=e.map((e=>({text:"",status:I[k][U].includes(e),value:e})))}})),I):I}},94864:function(e,_,k){"use strict";k.d(_,{Z:function(){return C}});var I=k(67108);const C={star:{list:[{text:"2",value:2,status:0},{text:"3",value:3,status:0},{text:"4",value:4,status:0},{text:"5",value:5,status:0}],removeDispatch:I.cR},rate:{list:[],removeDispatch:I.bg},priceRange:{title:"Price Range",priceHigh:-1,priceLow:0,priceBarMin:0,priceBarMax:1e3,priceBarStep:100,removeDispatch:I.eX},priceType:{list:[],removeDispatch:null},breakfast:{list:[],removeDispatch:I.I7},payType:{list:[],removeDispatch:I.JD},bedType:{list:[],removeDispatch:I.se},bookPolicy:{list:[],removeDispatch:I.ZL},bookable:{list:[],removeDispatch:I.pp},discount:{list:[],removeDispatch:I.F7},zone:{list:[],removeDispatch:I.Jw},landmark:{list:[],removeDispatch:I.z0},metro:{lineList:[],removeDispatch:I.k},airportTrainstation:{list:[],removeDispatch:I.kK},location:{list:[],removeDispatch:I.Mv},cityId:{list:[],removeDispatch:I.VB},amenty:{list:[],removeDispatch:I.o},category:{list:[],removeDispatch:I.JQ},feature:{list:[],removeDispatch:I.ko},brand:{list:[],removeDispatch:I.IK},popularFilters:{list:[],removeDispatch:I.SJ},hotArea:{list:[],removeDispatch:I.WV}}},25923:function(e,_,k){"use strict";k.d(_,{b:function(){return getPriceRangeLocal}});var I=k(22122),C=k(68661),R=k(83401);var j=k(67294),B=k.n(j),H=k(39621).default;let noop=()=>{};class Bar extends H{constructor(e){super(e),this.ceilRef=B().createRef(),this.floorRef=B().createRef(),this.trackRef=B().createRef(),this.barRef=B().createRef(),this.clickRef=B().createRef()}render(){const{priceHigh:e,priceLow:_,priceBarMin:k,priceBarMax:I,priceBarStep:C,onTouchStart:R,onTouchMove:j,onTouchEnd:H,onMouseDown:U,onMouseUp:V,onClick:G}=this.props,q=214,z=_>I?I:_;let J=(z-k)/(I+C-k)*q-1,Q=((-1===e||e>I?I+C:e)-z)/(I+C-k)*q;Q=Q>q?q:Q;const ee={left:"".concat(J,"px"),width:"".concat(Q,"px")},te={left:"".concat(J,"px")},ne={left:"".concat(J+Q,"px")};return B().createElement("div",{ref:this.barRef,className:"price-range-bar"},B().createElement("div",{ref:this.trackRef,className:"price-range-track",style:ee}),B().createElement("div",{className:"price-range-floor",ref:this.floorRef,style:te,onTouchStart:R||noop,onTouchMove:j||noop,onTouchEnd:H||noop,onMouseDown:U||noop,onMouseUp:V||noop}),B().createElement("div",{className:"price-range-ceil",ref:this.ceilRef,style:ne,onTouchStart:R||noop,onTouchMove:j||noop,onTouchEnd:H||noop,onMouseDown:U||noop,onMouseUp:V||noop}),B().createElement("div",{className:"price-range-click",ref:this.clickRef,onClick:G||noop}))}}var U=k(45697),V=k.n(U),G=k(12992),q=k(74019),z=k(33589),J=k(63035),Q=k(39621).default,ee=k(67294);class PriceInput extends Q{constructor(e){super(e),this.onChange=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";var C,R;if(I=I.replace(/\D/g,""),"low"===e)this.setState({low:I}),I=(null==_||null===(C=_.target)||void 0===C?void 0:C.value)||"",""===(null==_||null===(R=_.target)||void 0===R?void 0:R.value)&&this.setState({startLow:"finish"});else if("high"===e){var j,B;this.setState({high:I}),I=(null==_||null===(j=_.target)||void 0===j?void 0:j.value)||"",""===(null==_||null===(B=_.target)||void 0===B?void 0:B.value)&&this.setState({startHigh:"finish"})}},this.handleHighFocus=e=>{var _;let k=(null==e||null===(_=e.target)||void 0===_?void 0:_.value)||"";k=k.replace(/\D/g,""),this.setState({high:k})},this.handleBlur=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";I=I.replace(/\D/g,"");let C=null;if("low"===e?C=this.checkPriceInput(I,this.state.high,this.state.max,e):"high"===e&&(C=this.checkPriceInput(this.state.low,I,this.state.max,e)),C){let e=Object.assign({},this.props,{priceLow:C.low,priceHigh:C.high});this.props.onChange(e)}this.$safeLog("logListpagePriceinputClick",I),"finish"===this.state.startLow&&this.setState({startLow:"init"}),"finish"===this.state.startHigh&&this.setState({startHigh:"init"})},this.ubtMapping={logListpagePriceinputClick:J.d6},this.checkPriceInput=(e,_,k,I)=>{let C=!1,R=!1;return(e=""!==e?Number(e):0)>=(_=""!==_?Number(_):-1)&&-1!==_&&("low"===I?C=!0:"high"===I&&(R=!0)),"init"===I?this.state={lowError:C,highError:R,startLow:"init",startHigh:"init",low:e,high:_,max:k}:this.setState({lowError:C,highError:R,low:e,high:_,max:k}),C||R||e===this.preLow&&_===this.preHigh&&k===this.preMax?null:(this.preLow=e,this.preHigh=_,this.preMax=k,{low:e,high:_,max:k})};const{priceLow:_,priceHigh:k,priceBarMax:I}=this.props,{low:C,high:R,max:j}=this.checkPriceInput(_,k,I,"init")||{};this.currency=(0,q.zC)(),this.preLow=C,this.preHigh=R,this.preMax=j}componentDidUpdate(e){this.props.priceHigh===e.priceHigh&&this.props.priceLow===e.priceLow&&this.props.priceBarMax===e.priceBarMax||this.checkPriceInput(this.props.priceLow,this.props.priceHigh,this.props.priceBarMax,"bar")}render(){const{lowError:e,highError:_,low:k,high:I,max:C}=this.state;return ee.createElement("div",{className:"price-range-input"},ee.createElement("input",{type:"text",className:"price-range-input-low".concat(e?" price-range-input-err":""),value:0==k?"finish"===this.state.startLow?"":0:(0,G.formatCurrency)(this.currency,k,{digitTop:0}),autoComplete:"off",onChange:this.onChange("low"),onBlur:this.handleBlur("low")}),ee.createElement("span",{className:"price-range-input-split"},"-"),ee.createElement("input",{type:"text",className:"price-range-input-high".concat(_?" price-range-input-err":""),value:-1===I?"".concat((0,G.formatCurrency)(this.currency,C,{digitTop:0}),"+"):0==I?"finish"===this.state.startHigh?"":0:(0,G.formatCurrency)(this.currency,I,{digitTop:0}),autoComplete:"off",onChange:this.onChange("high"),onBlur:this.handleBlur("high"),onFocus:this.handleHighFocus}),ee.createElement("span",{className:"price-range-input-overflow"}))}}var te,ne,re=k(39621).default,oe=k(67294);(0,C.$j)((e=>({alteringPriceRange:e.priceRange})),{changingPriceRangeFilter:function changingPriceRangeFilter(e){return{type:R.U,payload:e}}})(((ne=class View extends re{constructor(e){super(e),this.init=()=>{this.barRef=oe.createRef(),this.selectedHandle=0,this.state={changingPrice:null},this.ismoving=!1},this.getMousePosition=e=>e.pageX,this.getHandleCenterPosition=e=>{const _=e.getBoundingClientRect();return window.pageXOffset+_.left+.5*_.width},this.getTouchPosition=e=>e.touches[0].pageX,this.pauseEvent=e=>{e.stopPropagation(),e.preventDefault()},this.getBarStart=()=>this.barRef.current.barRef.current.getBoundingClientRect().left+window.pageXOffset,this.getBarLength=()=>{const e=this.barRef.current.barRef.current;if(!e)return 0;return e.getBoundingClientRect().width},this.isCeil=e=>e.target===this.barRef.current.ceilRef.current,this.moveTo=(e,_)=>{if(0===this.selectedHandle)return;this.pauseEvent(e);let k=this.calcValueByPos(_);this.setState({changingPrice:k})},this.onChange=e=>{this.props.onChange(e)},this.calcValueByPos=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=this.getBarLength();let R=Math.abs(Math.max(e,0)/C);R=R>1?1:R<0?0:R;let j=R*(k+I-_)+_;if(I){j=I*this.getRangeStep(Math.round((j-_)/I))+_}return j=this.getOrderedValue(j),j>k&&2===this.selectedHandle?j=-1:j>k&&1===this.selectedHandle&&(j=k),j},this.getRangeStep=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=Math.abs((k-_)/I)+1;return e<0?0:e>C?C:e},this.getOrderedValue=e=>{const{priceLow:_,priceHigh:k,priceBarStep:I,priceBarMax:C}=this.props;return 1===this.selectedHandle&&this.PassCeil(e,k)?-1===k?C:k-I:2===this.selectedHandle&&e<=_?_+I:e},this.PassCeil=(e,_)=>e>=(-1!==_?_:this.props.priceBarMax+this.props.priceBarStep),this.onMouseDown=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentMouseEvents()},this.onTouchStart=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentTouchEvents()},this.onMouseMove=(0,z.P2)((e=>{this.ismoving=!0;const _=this.getMousePosition(e),k=this.getBarStart();this.moveTo(e,_-k),this.updateTempPriceRange()}),10),this.onTouchMove=(0,z.P2)((e=>{this.ismoving=!0;const _=e.changedTouches[0].pageX,k=this.getBarStart();this.moveTo(e,_-k),this.updateTempPriceRange()}),10),this.addEventListener=(e,_,k)=>e&&e.addEventListener?(e.addEventListener(_,k),{remove(){e.removeEventListener(_,k)}}):null,this.addDocumentTouchEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onTouchMoveListener=this.addEventListener(document,"touchmove",this.onTouchMove),this.onTouchEndListener=this.addEventListener(document,"touchend",this.onMouseUp)},this.addDocumentMouseEvents=()=>{this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.onMouseMoveListener=this.addEventListener(document,"mousemove",this.onMouseMove),this.onMouseUpListener=this.addEventListener(document,"mouseup",this.onMouseUp)},this.onMouseUp=()=>{this.ismoving=!1,null!==this.state.changingPrice?(this.updatePriceRange(),this.removeDocumentEvents(),this.$safeLog("logListpagePriceSlide")):this.removeDocumentEvents()},this.ubtMapping={logListpagePriceSlide:J.Pc},this.onClick=e=>{this.ismoving=!1;const _=this.getMousePosition(e),k=this.getBarStart(),I=(2*k+this.getBarLength())/2;this.selectedHandle=_<=I?1:2,this.moveTo(e,_-k),setTimeout((()=>{this.updatePriceRange()}),0)},this.updateTempPriceRange=()=>{let e=Object.assign({},this.props.alteringPriceRange);2===this.selectedHandle&&e.priceHigh!==this.state.changingPrice?e.priceHigh=this.state.changingPrice:1===this.selectedHandle&&e.priceLow!==this.state.changingPrice&&(e.priceLow=this.state.changingPrice),this.props.changingPriceRangeFilter(e)},this.updatePriceRange=()=>{let e=!1,_=Object.assign({},this.props);2===this.selectedHandle&&_.priceHigh!==this.state.changingPrice?(_.priceHigh=this.state.changingPrice,e=!0):1===this.selectedHandle&&_.priceLow!==this.state.changingPrice&&(_.priceLow=this.state.changingPrice,e=!0),e&&(this.props.changingPriceRangeFilter(_),this.onChange(_)),this.setState({changingPrice:null})},this.removeDocumentEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.selectedHandle=0},this.init()}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),this.removeDocumentEvents()}render(){let{priceHigh:e,priceLow:_,alteringPriceRange:k}=this.props;this.ismoving&&(e=k.priceHigh,_=k.priceLow);let C={priceHigh:e,priceLow:_};const R=1===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:_,j=2===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:e,B={onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,priceLow:R,priceHigh:j,onChange:this.onChange,onClick:this.onClick};return oe.createElement("div",{className:"price-range-wrapper"},oe.createElement(Bar,(0,I.Z)({ref:this.barRef},this.props,B)),oe.createElement(PriceInput,(0,I.Z)({},this.props,C)))}}).propTypes={priceHigh:V().number,priceLow:V().number,priceBarMin:V().number,priceBarMax:V().number,priceBarStep:V().number},ne.defaultProps={priceHigh:1,priceLow:0,priceBarMin:0,priceBarMax:0,priceBarStep:0},te=ne));let getPriceRangeLocal=(e,_,k,I)=>{const C=I||(0,q.zC)(),R={digit:0};return{lowLocal:(0,G.formatCurrency)(C,e,R,!0),highLocal:-1===_?"".concat((0,G.formatCurrency)(C,k,R),"+"):(0,G.formatCurrency)(C,_,R)}}},19112:function(e,_,k){"use strict";k.d(_,{C:function(){return I}});const I="UPDATE_BOOKABLE_VISIBLE"},1797:function(e,_,k){"use strict";k.d(_,{W:function(){return C}});var I=k(19112);const C=function bookableVisible(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.C?C:e}},79134:function(e,_,k){"use strict";k.d(_,{P:function(){return I}});const I="CITYREFRESH_UPDATE"},26965:function(e,_,k){"use strict";k.d(_,{_:function(){return j}});var I=k(96156),C=k(79134);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let R={cityId:{list:[]},zones:{list:[]},landmarks:{list:[]},airportTrainstations:{list:[]},metros:{lineList:[]},locations:{list:[]},removeDispatch:null};const j=function cityRefresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case C.P:return Object.assign({},_objectSpread({},e),_objectSpread({},I));default:return e}}},86357:function(e,_,k){"use strict";k.d(_,{j:function(){return I}});const I="TOGGLE_DIRECTSEARCH_SWITCH"},29238:function(e,_,k){"use strict";k.d(_,{T:function(){return j}});var I=k(86357),C=k(47419);const R=1===Number(C.default.getByKey("initData.searchCondition.directSearch")||0),j=function directSearch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;switch(k){case I.j:return C;default:return e}}},67108:function(e,_,k){"use strict";k.d(_,{cR:function(){return removeStarRating},eX:function(){return removePriceRangeFilter},bg:function(){return removeGuestRating},I7:function(){return removeMeals},JD:function(){return removePayment},ZL:function(){return removeBookingPolicy},se:function(){return removeBedType},pp:function(){return removeBookable},Mv:function(){return removeLocation},o:function(){return removeAmenities},JQ:function(){return removeCategorys},ko:function(){return removeFeatures},IK:function(){return removeBrand},F7:function(){return removeDiscounts},SJ:function(){return removePopularFilters},Jw:function(){return removeZone},z0:function(){return removeLandmark},kK:function(){return removeAirportTrainstations},k:function(){return removeMetro},VB:function(){return removeCity},Of:function(){return updateAllFilter},WV:function(){return removeHotArea}});var I=k(96085),C=k(41200);function removeStarRating(e,_){return _&&e.forEach((e=>{_((0,C.RP)(e.value))})),{type:I.sP,payload:e}}function removePriceRangeFilter(e,_){return _&&(_((0,C.CT)(0)),_((0,C.ii)(-1))),{type:I.Rs,payload:e}}function removeGuestRating(e){return{type:I.XK,payload:e}}function removeMeals(e){return{type:I.f3,payload:e}}function removePayment(e){return{type:I.Ik,payload:e}}function removeBookingPolicy(e){return{type:I.CH,payload:e}}function removeBedType(e){return{type:I.$M,payload:e}}function removeBookable(e){return{type:I.dg,payload:e}}function removeLocation(e){return{type:I.bP,payload:e}}function removeAmenities(e){return{type:I.k_,payload:e}}function removeCategorys(e){return{type:I.A2,payload:e}}function removeFeatures(e){return{type:I.wG,payload:e}}function removeBrand(e){return{type:I.HW,payload:e}}function removeDiscounts(e){return{type:I.Nv,payload:e}}function removePopularFilters(e){return{type:I.$n,payload:e}}function removeZone(e){return{type:I.ce,payload:e}}function removeLandmark(e){return{type:I.HH,payload:e}}function removeAirportTrainstations(e){return{type:I.IA,payload:e}}function removeMetro(e){return{type:I.Jj,payload:e}}function removeCity(e){return{type:I.YW,payload:e}}function updateAllFilter(e){return{type:I.HL,payload:e}}function removeHotArea(e){return{type:I.g6,payload:e}}},96085:function(e,_,k){"use strict";k.d(_,{lV:function(){return I},xt:function(){return C},sP:function(){return R},mn:function(){return j},Rs:function(){return B},a2:function(){return H},So:function(){return U},Yb:function(){return V},XK:function(){return G},_w:function(){return q},f3:function(){return z},fv:function(){return J},Ik:function(){return Q},Bi:function(){return ee},CH:function(){return te},ny:function(){return ne},$M:function(){return re},Tp:function(){return oe},dg:function(){return ie},LX:function(){return ae},bP:function(){return le},RJ:function(){return se},ce:function(){return ce},P$:function(){return ue},HH:function(){return de},D8:function(){return pe},IA:function(){return he},zK:function(){return fe},Jj:function(){return me},Ry:function(){return ge},YW:function(){return ve},w5:function(){return ye},k_:function(){return be},R9:function(){return _e},wG:function(){return we},MT:function(){return Ee},A2:function(){return Se},C8:function(){return Oe},HW:function(){return Te},Lf:function(){return ke},Nv:function(){return Ie},eN:function(){return Ce},$n:function(){return Pe},vT:function(){return Le},HL:function(){return Ne},D7:function(){return De},g6:function(){return Ae}});const I="ALLFILTER_REMOVE",C="STARRATING_UPDATE",R="STARRATING_REMOVE",j="PRICERANGE_UPDATE",B="PRICERANGE_REMOVE",H="PRICETYPE_UPDATE",U="PRICETYPE_UPDATE_ALL",V="GuestRating_UPDATE",G="GuestRating_REMOVE",q="MEALS_UPDATE",z="MEALS_REMOVE",J="PAYMENT_UPDATE",Q="PAYMENT_REMOVE",ee="BOOKPOLICY_UPDATE",te="BOOKPOLICY_REMOVE",ne="BEDTYPE_UPDATE",re="BEDTYPE_REMOVE",oe="BOOKABLE_UPDATE",ie="BOOKABLE_REMOVE",ae="LOCATION_UPDATE",le="LOCATION_REMOVE",se="ZONES_UPDATE",ce="ZONES_REMOVE",ue="LANDMARKS_UPDATE",de="LANDMARKS_REMOVE",pe="AIRPORTANDRAILWAYSTATION_UPDATE",he="AIRPORTANDRAILWAYSTATION_REMOVE",fe="METROS_UPDATE",me="METROS_REMOVE",ge="CITYS_UPDATE",ve="CITYS_REMOVE",ye="AMENITIES_UPDATE",be="AMENITIES_REMOVE",_e="FEATURES_UPDATE",we="FEATURES_REMOVE",Ee="CATEGORYS_UPDATE",Se="CATEGORYS_REMOVE",Oe="BRAND_UPDATE",Te="BRAND_REMOVE",ke="DISCOUNTS_UPDATE",Ie="DISCOUNTS_REMOVE",Ce="POPULARFILTERS_UPDATE",Pe="POPULARFILTERS_REMOVE",Le="OTHERFILTER_UPDATE",Ne="ALLFILTER_UPDATE",De="HOTAREA_UPDATE",Ae="HOTAREA_REMOVE"},15734:function(e,_,k){"use strict";k.d(_,{a:function(){return filterCondition}});var I=k(96156),C=k(96085),R=k(31903),j=k(94864),B=k(83465),H=k.n(B),U=k(47419);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const getKeyOfState=e=>{let _=Object.keys(R.Wj).find((_=>_.includes(e.split("_")[0]))),k="REMOVE"===e.split("_")[1];return _=R.Wj[_],{key:_,isRemoveType:k}},activeRemove=(e,_,k)=>{let{key:I}=getKeyOfState(e),C=H()(_[I]);if(C.removeDispatch=_[I].removeDispatch,I===R.Wj.METROS?C.lineList&&C.lineList.map((e=>{e.status=0,e.siteList.map((e=>{e.value===k[0].value&&(e.status=0)}))})):I===R.Wj.PRICERANGE?(C.priceLow=0,C.priceHigh=-1):I===R.Wj.BRAND?C.list.map((e=>(e.value===k[0].value&&e.type===k[0].type&&(e.status=0),e))):("listPage"===U.default.getByKey("pageName")&&I===R.Wj.CITYS&&[R.Wj.LANDMARKS,R.Wj.METROS,R.Wj.AIRPORTANDRAILWAYSTATION,R.Wj.ZONES,R.Wj.LOCATION,R.Wj.HOTAREA].forEach((e=>{(_[e].list||_[e].lineList||[]).map((e=>e.status=0))})),C.list.map((e=>(e.value===k[0].value&&(e.status=0),e)))),["BEDTYPE_REMOVE","BOOKPOLICY_REMOVE","MEALS_REMOVE","PAYMENT_REMOVE","DISCOUNTS_REMOVE"].includes(e)){let e="bookPolicy"===k[0].key?"bookPolicies":"".concat(k[0].key,"s");I===R.Wj.DISCOUNTS&&(e="".concat(k[0].key));let C="".concat(e,"_").concat(k[0].value);_.popularFilters.list.map((e=>{e.code===C&&(e.status=0)}))}let j={};return j[I]=C,Object.assign({},_objectSpread({},_),_objectSpread({},j))},removeAllFilters=e=>{let _=H()(e);return Object.keys(_).map((e=>{_[e].lineList&&_[e].lineList.map((e=>{e.status=0,e.siteList.map((e=>{e.status=0}))})),_[e].list&&_[e].list.map(((_,k)=>{e===R.Wj.PRICETYPE&&0===k?_.status=1:_.status=0})),"priceRange"===e&&Object.assign(_[e],{priceHigh:-1,priceLow:0})})),Object.assign({},_objectSpread({},e),_objectSpread({},_))},updateAllFilter=(e,_)=>{let k=H()(e),I="removeDispatch";return Object.keys(_).map((e=>{let C=R.f2[e];k[C]=_[e]||j.Z[C],"stars"===e&&(k[C].list=j.Z[C].list,k[C].list.map((k=>{(_[e].list||[]).includes(k.value)&&(k.status=1)}))),!k[C][I]&&(k[C][I]=j.Z[C].removeDispatch)})),Object.assign({},_objectSpread({},k))};function filterCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.Z,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case C.ny:case C._w:case C.Yb:case C.fv:case C.Bi:case C.Tp:case C.mn:case C.xt:case C.eN:case C.C8:case C.w5:case C.RJ:case C.P$:case C.zK:case C.D8:case C.Ry:case C.MT:case C.R9:case C.LX:case C.D7:case C.Lf:{let _=getKeyOfState(k),{removeDispatch:C=null,title:R}=e[_.key];return I[_.key].removeDispatch=I[_.key].removeDispatch||C,I[_.key].title=I[_.key].title||R,Object.assign({},_objectSpread({},e),_objectSpread({},I))}case C.So:return Object.assign({},_objectSpread({},e),I);case C.a2:{let _=getKeyOfState(k),{removeDispatch:C=null,title:R}=e[_.key];R=R||I[_.key].title,C&&Object.assign(I[_.key],{removeDispatch:C,title:R});let{priceType:j,factor:B}=I,{priceBarMax:H,priceHigh:U,priceLow:V,priceBarStep:G}=e.priceRange,q=Object.assign({},e.priceRange,{priceBarMax:H*B,priceHigh:-1===U?-1:Math.round(U*B),priceLow:Math.round(V*B),priceBarStep:G*B});return Object.assign({},_objectSpread({},e),{priceRange:q,priceType:j})}case C.vT:return Object.keys(I).forEach((e=>{I[e].removeDispatch=j.Z[e].removeDispatch})),Object.assign({},_objectSpread({},e),_objectSpread({},I));case C.HL:return updateAllFilter(e,I);case C.sP:case C.XK:case C.f3:case C.Ik:case C.$M:case C.CH:case C.dg:case C.ce:case C.HH:case C.IA:case C.Jj:case C.HW:case C.k_:case C.wG:case C.A2:case C.Nv:case C.Rs:case C.YW:case C.g6:case C.bP:case C.$n:return activeRemove(k,e,I);case C.lV:return removeAllFilters(e);default:return e}}},47801:function(e,_,k){"use strict";k.d(_,{w:function(){return I},X:function(){return C}});const I="UPDATE_ALL_INITDATA",C="UPDATE_MAP_TYPE"},34482:function(e,_,k){"use strict";k.d(_,{F:function(){return initData}});var I=k(96156),C=k(47801);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let R={mapInfo:{url:"",type:"",poiList:[]}};function initData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;if(k===C.w)return I;if(k===C.X){let _=Object.assign({},e.mapInfo,I);return _objectSpread(_objectSpread({},e),{},{mapInfo:_})}return e}},4272:function(e,_,k){"use strict";k.d(_,{bB:function(){return I},fu:function(){return C},_2:function(){return R}});const I="TOGGLE_LAST_PAGE",C="TOGGLE_NORMAL_LAST_PAGE",R="TOGGLE_RECOMMEND_LAST_PAGE"},358:function(e,_,k){"use strict";k.d(_,{Z:function(){return lastPage}});var I=k(4272);const C={normalLastPage:!1,recommendLastPage:!1};function lastPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,_=arguments.length>1?arguments[1]:void 0;return _.type===I.fu?Object.assign(e,{normalLastPage:_.payload}):_.type===I._2?Object.assign(e,{recommendLastPage:_.payload}):_.type===I.bB?_.payload:e}},35960:function(e,_,k){"use strict";k.d(_,{iB:function(){return I},Ci:function(){return C},Lg:function(){return R}});const I="UPDATE_METAHOTEL",C="UPDATE_METAHOTEL_TITLE",R="CLEAR_METAHOTEL"},31347:function(e,_,k){"use strict";k.d(_,{G:function(){return C}});var I=k(35960);const C=function metaHotel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.iB?Object.assign({},e,C):k===I.Lg?C:k===I.Ci?Object.assign({},e,C):e}},83401:function(e,_,k){"use strict";k.d(_,{U:function(){return I}});const I="PRICERANGE_CHANGING"},33682:function(e,_,k){"use strict";k.d(_,{G:function(){return priceRange}});var I=k(96156),C=k(83401),R=k(94864);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function priceRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R.Z.priceRange,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case C.U:return Object.assign({},_objectSpread({},e),_objectSpread({},I));default:return e}}},41200:function(e,_,k){"use strict";k.d(_,{BH:function(){return updateDestination},kG:function(){return updateKeyword},RP:function(){return removeStarSelect},CT:function(){return updateLowPrice},ii:function(){return updateHighPrice}});var I=k(78962),C=k(25291);function updateDestination(e){return{type:I.p$,key:C.mo,data:e}}function updateKeyword(e){return{type:I.Wr,key:C.rK,data:e}}function removeStarSelect(e){return{type:I.Ss,key:C.Js,data:e}}function updateLowPrice(e){return{type:I.Ic,key:C.wT,data:e}}function updateHighPrice(e){return{type:I.AE,key:C.KA,data:e}}},78962:function(e,_,k){"use strict";k.d(_,{p$:function(){return I},pH:function(){return C},DN:function(){return R},Wr:function(){return j},Mj:function(){return B},aC:function(){return H},Ss:function(){return U},Ic:function(){return V},AE:function(){return G}});const I="DESTINATION_UPDATE",C="CALENDAR_UPDATE",R="ROOM_GUEST_UPDATE",j="KEYWORD_UPDATE",B="ALL_INPUT_UPDATE",H="STAR_RATE_UPDATE",U="STAR_RATE_REMOVE",V="LOW_PRICE_UPDATE",G="HIGH_PRICE_UPDATE"},42955:function(e,_,k){"use strict";k.d(_,{ek:function(){return initKeyword},So:function(){return initDestination},ZP:function(){return searchBarData}});var I=k(25291),C=k(23026),R=k(74019),j=k(47419),B=k(23072),H=k(16234),U=k(32127),V=k(78962),G=k(15393);function initKeyword(){if(C.Z){const e=j.default.getByKey("initData.searchCondition")||{},{cityId:_,optionId:k,optionType:C,keyword:R,lat:B,lng:H,timeOffset:U,countryId:V,cityName:G}=e;return 1===e.directSearch?{word:R,displayName:R,id:"",cityId:"",type:C,isDirectSearch:!0,countryId:V,cityName:G}:I.ZD.includes(C)?{}:{word:R,displayName:R,_cityId:_,id:k,type:C,lat:B,lon:H,timeOffset:U,countryId:V,cityName:G}}return{}}function initDestination(){if(C.Z){const e=j.default.getByKey("initData.searchCondition")||{},{cityId:_,optionType:k,optionId:C,destination:R,lat:H,lng:U,timeOffset:V,countryId:G,cityName:q}=e;let z=[I.VS.IntlDistrict,I.VS.Province,I.VS.City,I.VS.IntlCity].includes(k),J=_>0,Q="0"!==(0,B.Z)("domestic"),ee=J&&k!==I.VS.District;return{_cityId:_,id:ee?_:C,type:ee?Q?I.VS.City:I.VS.IntlCity:k,lat:z?"-1":H,lon:z?"-1":U,displayName:R,word:R,timeOffset:V,countryId:G,cityName:q}}return{}}const getInitState=e=>{const{ctx:_,timeOffset:k,TimeOffsetValid:C,validExcept:j={},emptyKeys:B={}}=e||{},V=_?_.state.tripQuery:(0,U.u0)(null,!0),{starlist:q,travelpurpose:z,lowprice:J,highprice:Q}=V||{},{checkin:ee,startdate:te,ci:ne,checkout:re,depdate:oe,co:ie}=V||{},ae=q?q.split(",").map((e=>+e)):[],le=ee||te||ne,se=re||oe||ie;let ce={};if(B.calendar)ce={};else if(le||se||!j.calendar){const e=(0,G.Z)(_),I=(0,H.Lf)({checkIn:le,checkOut:se,timeOffset:!C&&k,maxNights:e});ce={checkIn:I.checkInStr,checkOut:I.checkOutStr,timeOffset:I.timeOffset,nights:I.nights}}else ce={needSelectTime:!0,timeOffset:k,checkIn:"",checkOut:"",nights:0};return Object.assign({},I.ZV,{star:ae,calendar:ce,keyword:B.calendar?{}:initKeyword(),search:B.calendar?{}:initDestination(),travel:"1"===z,lowPrice:J?+J:0,highPrice:Q?+Q:-1,barCurr:(0,R.zC)(_)})},q=[V.p$,V.pH,V.DN,V.Wr,V.aC,V.Ic,V.AE];function searchBarData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getInitState(),_=arguments.length>1?arguments[1]:void 0;const{key:k,data:I,type:C}=_;if(~q.indexOf(C))return Object.assign({},e,{[k]:I});if(C===V.Mj)return I;if(C===V.Ss){const _=e.star.filter((e=>e!==I));return Object.assign({},e,{star:_})}return e}},43900:function(e,_,k){"use strict";k.d(_,{nP:function(){return I},G8:function(){return C},qV:function(){return R}});const I="POSITION_UPDATE",C="SEARCHCONDITION_DIRECTSEARCH_UPDATE",R="UPDATE_ALL_SEARCHDITION"},40582:function(e,_,k){"use strict";k.d(_,{Z:function(){return searchCondition}});var I=k(96156),C=k(43900);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let R={};function searchCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case C.nP:return _objectSpread(_objectSpread({},e),I);case C.G8:return _objectSpread(_objectSpread({},e),{directSearch:I});case C.qV:return I}return e}},97740:function(e,_,k){"use strict";k.d(_,{A:function(){return I}});const I="SEARCH_INPUT_KEYWORD_UPDATE"},82719:function(e,_,k){"use strict";k.d(_,{Z:function(){return searchInputKeyword}});var I=k(97740);function searchInputKeyword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{type:_,data:k}=arguments.length>1?arguments[1]:void 0;return _===I.A?k||"":e}},51905:function(e,_,k){"use strict";k.d(_,{W:function(){return I}});const I="UPDATE_LIST_SORTINFO"},58186:function(e,_,k){"use strict";k.d(_,{Z:function(){return sortInfo}});var I=k(96156),C=k(51905);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const R={list:k(47419).default.getByKey("initData.sortInfo.list")||[],userChanged:!1};function sortInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;return I===C.W?Object.assign({},e,_objectSpread({},k)):e}},54891:function(e,_,k){"use strict";k.d(_,{P:function(){return q},f:function(){return getCommonFunction}});var I=k(67294),C=k(7992),R=k(27907),j=k(77037),B=k(12992),H=k(28051),U=k(74019),V=k(47419);const G={},q=(0,I.createContext)(G);function getCommonFunction(e){return{ctx:e,$translate:(_,k)=>(0,j.I)(_,k,e),$translatePlural:(_,k,I,C)=>(0,j.u)(_,k,I,C,e),$localeDate:(_,k)=>B.formatDate(_,k,e),$localNumber:(e,_)=>B.formatCurrency(e,_),$localeCurrency:(e,_,k)=>B.formatCurrency(e,_,k),$localization:B,$locale:(0,H.Kd)(e),$currency:(0,U.zC)(e),$log:C.fU,$safeLog:R.p,$getGData:()=>V.default.get(e)}}},63035:function(e,_,k){"use strict";k.d(_,{rB:function(){return allpageNonAction},Pc:function(){return logListpagePriceSlide},d6:function(){return logListpagePriceinputClick},yA:function(){return clickLoginOrRegister},zC:function(){return clickLogin},EQ:function(){return showLoginOrRegisterResult},zi:function(){return R},Cf:function(){return showLoginInfo},TX:function(){return showLogin},s4:function(){return logHotelGoldenShow},lZ:function(){return logAlert}});var I=k(48368),C=(k(50875),k(47419));k(25291);const rangeLogValue=(e,_)=>{if("detailpage"===(0,I.h8)()){const{base:k,baseRoom:I}=e.data||{},{roomId:C,availParam:R}=k||{},{roomId:j}=I||{};_=Object.assign(_,{roomid:C,baseroomid:j,roomUniqueKey:(null==R?void 0:R.roomUniqueKey)||""})}return _},allpageNonAction=e=>{let _=1;return e<=180?_=1:180<e&&e<=300?_=2:e>300&&(_=3),{logKey:"ibu_htl_allpage_nonaction",keyId:"188778",logDesc:"nonaction time",actionType:"scroll",logValue:{type:_,time:e,locale:C.default.getByKey("cargo.locale")||"",pageName:(0,I.h8)()}}},logListpagePriceSlide=()=>({logKey:"ibu_htl_list_price_slide",logValue:{page:C.default.getByKey("pageId")}}),logListpagePriceinputClick=e=>({logKey:"ibu_htl_list_priceinput_click",logValue:{page:C.default.getByKey("pageId"),price:e}}),clickLoginOrRegister=(e,_)=>{var k;let C={masterhotelid:(null===(k=e.data)||void 0===k?void 0:k.masterHotelId)||""};return C=rangeLogValue(e,C),{logKey:"ibu_htl_".concat((0,I.h8)(),"_").concat(_),logValue:C,logDesc:_}},clickLogin=(e,_)=>{var k;return{logKey:"ibu_htl_list_login_click",logValue:{masterhotelid:(null===(k=e.data)||void 0===k?void 0:k.masterHotelId)||"",page:C.default.getByKey("pageId"),type:_},logDesc:"list_login_click",actionType:"click"}},showLoginOrRegisterResult=(e,_,k)=>{var C;let R={action:_,masterhotelid:(null===(C=e.data)||void 0===C?void 0:C.masterHotelId)||"",result:k};return R=rangeLogValue(e,R),{logKey:"ibu_htl_".concat((0,I.h8)(),"_login_register_result"),logValue:R,logDesc:"login_register_result"}},R=function showLoginOrRegisterResultShow(e,_,k,C,R,j){let B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",H={page:e,masterhotelid:_,roomid:k,ishidepriceroom:C,type:R,result:j,errorcause:B};return{logKey:"ibu_htl_".concat((0,I.R0)(),"_loginresult_show"),logValue:H,logDesc:"loginresult_show"}},showLoginInfo=e=>{var _;let k={masterhotelid:(null===(_=e.data)||void 0===_?void 0:_.masterHotelId)||""};return k=rangeLogValue(e,k),{actionType:"scroll",logKey:"ibu_htl_".concat((0,I.h8)(),"_login_show"),logValue:k,logDesc:"login_show"}},showLogin=e=>{var _;return{actionType:"show",logKey:"ibu_htl_list_login_show",logValue:{masterhotelid:(null===(_=e.data)||void 0===_?void 0:_.masterHotelId)||"",page:C.default.getByKey("pageId")},logDesc:"login_show"}},logHotelGoldenShow=e=>({logDesc:"gold_exp_benefit_result",logKey:"ibu_htl_".concat(e,"_gold_exp_benefit_result"),actionType:"click",logValue:{result:"T"}}),logAlert=(e,_,k,I)=>({logKey:"ibu_htl_c_online_alert_show",actionType:"show",logDesc:"Alert_shows",logValue:{locale:C.default.getByKey("cargo.locale")||"",pageid:C.default.getByKey("pageId"),type:_,message:e,pop_scenes:k,title:I}})},9836:function(e,_,k){"use strict";k.d(_,{Z:function(){return LogImg}});var I=k(16353),C=k(47419),R=k(74019),j=k(39621).default,B=k(67294);const H=function picloadMonitor(e,_){var k;let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",H=(0,R.Jx)(e);(null===(k=H)||void 0===k?void 0:k.picTimeLoad)||(H=(0,R.Jx)(e.replace("http://","https://"))||{});let{picTimeLoad:U,picSizeLoad:V,PerformanceResourceTiming:G={}}=H,{connectEnd:q,connectStart:z,decodedBodySize:J,domainLookupEnd:Q,duration:ee,fetchStart:te,redirectEnd:ne,redirectStart:re,requestStart:oe,responseEnd:ie,responseStart:ae,secureConnectionStart:le,startTime:se,domainLookupStart:ce}=G;return{logKey:"ibu_htl_picload_monitor",logDesc:"Image loading time",actionType:"load",keyId:"204418",logValue:{cityid:j,hotelid:I,roomid:B,type:"img",locat:_,picSize:V,loadtime:U,picurl:e,locale:C.default.getByKey("cargo.locale"),connectEnd:q,connectStart:z,decodedBodySize:J,domainLookupStart:ce,domainLookupEnd:Q,duration:ee,fetchStart:te,redirectEnd:ne,redirectStart:re,requestStart:oe,responseEnd:ie,responseStart:ae,secureConnectionStart:le,startTime:se,status:_?"success":"fail"}}};class LogImg extends j{constructor(){super(...arguments),this.ubtMapping={picloadMonitor:H}}render(){let{isBg:e,style:_,src:k,errorSrc:C,defaultSrc:R,bgColor:j,alt:H,offset:U,imgSize:V,bgImgSize:G,imgPosition:q,bgImgPosition:z,bgImgRepeat:J,width:Q,height:ee,scrollElement:te,isOffLazyLoad:ne,noPictureMode:re,imgTip:oe,ssr:ie,onSuccess:ae,onError:le,className:se,logObj:ce}=this.props,ue=this;return B.createElement(I.Z,{isBg:e,style:_,src:k,errorSrc:C,defaultSrc:R,bgColor:j,alt:H,offset:U,imgSize:V,bgImgSize:G,imgPosition:q,bgImgPosition:z,bgImgRepeat:J,width:Q,height:ee,scrollElement:te,isOffLazyLoad:ne,noPictureMode:re,imgTip:oe,ssr:ie,logObj:ce,onSuccess:function onSuccess(e){ue.handleImageLoaded.bind(ue)(k,ce),ae&&ae.bind(ue)(e)},onError:e=>{ue.handleImageLoadError.bind(ue)(k,ce),le&&le(e)},className:se})}handleImageLoaded(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{_hotelid:k="",_cityid:I="",_roomid:C=""}=_;this.$safeLog("picloadMonitor",e,!0,k,I,C)}handleImageLoadError(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{_hotelid:k="",_cityid:I="",_roomid:C=""}=_;this.$safeLog("picloadMonitor",e,!1,k,I,C)}}},95062:function(e,_,k){"use strict";k.d(_,{it:function(){return I},hs:function(){return C},NH:function(){return R},E7:function(){return j},uR:function(){return B},kL:function(){return H},hL:function(){return U},FV:function(){return V},n3:function(){return G},bv:function(){return q},Z$:function(){return z},MH:function(){return J},_y:function(){return Q},c3:function(){return ee},sF:function(){return te},pn:function(){return ne},GS:function(){return re}});const I="video/CAN_PLAY",C="video/WAITING",R="video/PLAY",j="video/PAUSE",B="video/END",H="video/SEEKED",U="video/SEEKING",V="video/SEEKING_TIME",G="video/END_SEEKING",q="video/TOGGLE_MUTED",z="video/VOLUME_CHANGE",J="video/TIME_UPDATE",Q="video/LOADED_META_DATA",ee="video/LOADED_DATA",te="video/RESIZE",ne="video/ERROR",re="video/FULLSCREEN_CHANGE"},5024:function(e,_,k){k.p=window.__webpack_public_path__},47843:function(e,_,k){"use strict";k.d(_,{Z:function(){return _createStore}});var I=k(14890),C=k(53894);const R=("object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):I.qC)((0,I.md)(C.Z));function _createStore(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return(0,I.MT)(..._,R)}},25291:function(e,_,k){"use strict";k.d(_,{Js:function(){return I},wT:function(){return C},KA:function(){return R},In:function(){return j},mo:function(){return B},XN:function(){return H},E8:function(){return U},rK:function(){return V},ZV:function(){return G},VS:function(){return q},Gd:function(){return z},ZD:function(){return J},hS:function(){return Q}});const I="star",C="lowPrice",R="highPrice",j="roomGuest",B="search",H="calendar",U="travel",V="keyword",G={[j]:{rooms:1,adults:2,children:0,childAges:[],childBeds:[],childMeals:[],childTypes:[]},[B]:{},[H]:{},[V]:{}},q={City:"City",IntlCity:"IntlCity",District:"District",IntlDistrict:"IntlDistrict",Airport:"Airport",RailwayStation:"RailwayStation",Zone:"Zone",Location:"Location",Markland:"Markland",Hotel:"Hotel",CityHotelBrand:"CityHotelBrand",CityHotelGroup:"CityHotelGroup",Metro:"Metro",MetroStation:"MetroStation",Province:"Province",Country:"Country",DirectSearch:"DirectSearch"},z=(q.Airport,q.RailwayStation,q.Markland,q.MetroStation,q.Province,q.IntlDistrict,[q.Province,q.IntlDistrict,q.District]),J=[q.IntlDistrict,q.District,q.Province,q.City,q.IntlCity],Q=[q.City,q.IntlCity,q.IntlDistrict,q.District,q.Province]},78556:function(e,_,k){"use strict";k.d(_,{PL:function(){return hotelRoomListBffVersionB},Fe:function(){return nearbyHtlSortB},rq:function(){return commentGradeB},nk:function(){return priceType0ExplainB},O_:function(){return reviewDetailsB},w5:function(){return reviewDetailsE},SL:function(){return facilityOptimizeB}});var I=k(23026),C=k(47419),R=k(23072);let j=null,B=null;const isVersionB=(e,_)=>{let k=!1;const H=(e=>{if(I.Z){if(null===j&&(j="T"===C.default.getByKey("cacheForwardBSwitch")),j){if(null===B){const _=(0,R.Z)("ab_switchVersion",null==e?void 0:e.ctx,"");B=_}return B}return(0,R.Z)("ab_switchVersion",null==e?void 0:e.ctx,"")}return(0,R.Z)("ab_switchVersion",null==e?void 0:e.ctx,"")})(e);if(H){if("b"===(null==H?void 0:H.toLowerCase()))return!0;if("a"===(null==H?void 0:H.toLowerCase()))return!1}if(I.Z){k=(C.default.getByKey("abResults")||"").indexOf(_)>-1}else{var U,V;const I=null==e||null===(U=e.ctx)||void 0===U||null===(V=U.state)||void 0===V?void 0:V.abResults;k=(null==I?void 0:I.indexOf(_))>-1||!1}return k},hotelRoomListBffVersionB=()=>!0,nearbyHtlSortB=e=>isVersionB(e,"230421_IBU_htlnb:B"),commentGradeB=e=>isVersionB(e,"230519_IBU_10sco:B"),priceType0ExplainB=e=>isVersionB(e,"230815_IBU_pcpto:B"),reviewDetailsB=e=>isVersionB(e,"230823_IBU_dpsp:B"),reviewDetailsE=e=>isVersionB(e,"230823_IBU_dpsp:E"),facilityOptimizeB=e=>isVersionB(e,"230913_IBU_ohamn:B")},57781:function(e,_,k){"use strict";k.d(_,{lU:function(){return loadGtm},vp:function(){return detailGtm},lk:function(){return listPageGtm}});var I=k(70286),C=k(47419),R=k(48368),j=k(3479),B=k(9676),H=k(8938);k(48467);const loadGtm=e=>{const _=C.default.getByKey("cargo.locale"),k=(0,I.ZP)({type:I.FW.COOKIE})||{},j=(null==_?void 0:_.replace("-","_").split("_")[0])||"en",B=(null==_?void 0:_.replace("-","_").split("_")[1])||"XX";"undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push&&dataLayer.push({event:"page_view",language:j,region:B,page_category:(0,R.h8)()||"",memberId:"",memberType:"",loginStatus:e?"logged-in":"guest",allianceID:k.AllianceID||"",allianceSid:k.SID||"",referName:"",subReferName:"",channelType:"",viewType:"hotel"})},detailGtm=(e,_)=>{const k=C.default.getByKey("cargo.locale"),I=C.default.getByKey("cargo.currency"),{base:{masterHotelId:R,hotelName:B,countryId:H,cityId:U}={}}=(null==e?void 0:e.initData)||{},V=(0,j.Z)(_,"saleRoom[0].money.price","");"undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push&&dataLayer.push({event:"view_item",ecommerce:{currency:I||"",items:[{item_name:B||"",item_id:R||"",price:V||"",item_brand:"",item_list_name:"hotel",item_category:"",item_category_2:"",item_category_3:k,item_category_4:H,item_category_5:U,affiliation:"hotel"}]}})},listPageGtm=(e,_,k)=>{const I=C.default.getByKey("cargo.locale"),R=C.default.getByKey("cargo.currency")||"",{adult:j,child:U,checkIn:V,checkOut:G,roomNum:q=0,countryId:z}=_||{},J=(0,B._W)(V,"-")||"",Q=(0,B._W)(G,"-")||"",ee=(0,H.e3)(J,Q)||0;let te=[];null==k||k.map((e=>{const{money:{price:_}={},base:{hotelName:k,hotelId:C}={},position:{cityId:R}={}}=e;te.push({item_name:k||"",item_id:C||"",price:_||"",item_list_name:"hotel",item_category:"",item_category_2:"",item_category_3:I,item_category_4:z,item_category_5:R,quantity:q*ee})})),"undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push&&dataLayer.push({event:e,number_of_nights:ee,number_of_rooms:q||"",number_of_adults:j||"",number_of_children:U||0,end_date:Q,start_date:J,prd_type:"hotel",ecommerce:{currecy:R,items:te}})}},6146:function(e,_,k){"use strict";k.d(_,{Lc:function(){return exposure},x:function(){return scrollOnScreen},aF:function(){return removeScroll}});var I=k(33589);function exposure(e){let{target:_,selector:k="",callBack:C,judgeType:R=0,throttleTime:j=200,exposureOnce:B=!0}=e;if(C&&(_||k)){let e=_,H=(0,I.P2)((()=>{!e&&k&&(e=document.querySelector(k)),ifExposure(e,R)&&(C&&C(),B&&document.removeEventListener("scroll",H))}),j);return document.addEventListener("scroll",H),H}return null}function scrollOnScreen(e){let{target:_,selector:k,callBack:C,judgeType:R=0,waitTimes:j=250,exposureOnce:B=!1}=e;if(C&&(_||k)){let e=_;const H=(0,I.Ds)((()=>{!e&&k&&(e=document.querySelector(k)),ifExposure(e,R)&&(C&&C(),B&&document.removeEventListener("scroll",H))}),j);return document.addEventListener("scroll",H),H}return null}function ifExposure(e,_){if(e){const k=e.getBoundingClientRect&&e.getBoundingClientRect()||{},I=document.documentElement.clientHeight;switch(_){case 1:return k.top<I;case 2:return k.bottom<=I;case 3:return!(k.top>=I||k.bottom<=165);case 4:return!(k.top>=I||k.bottom<=220);case 5:return k.top>170&&k.top<I;case 6:return!(k.top>=I||k.bottom<=80);case 7:return k.bottom<165;default:return!(k.top>=I||k.bottom<=0)}}return!1}function removeScroll(e){document.removeEventListener("scroll",e)}},15393:function(e,_,k){"use strict";k.d(_,{Z:function(){return getMaxNights}});var I=k(47419),C=k(32127),R=k(7992),j=k(23026);function getMaxNights(e){const _=I.default.getByKey("maxNights",e),k=(0,C.WH)("scns",e);if(!["lr"].includes(k))return _;let B=I.default.getByKey("maxNightsConfig",e);Array.isArray(B)||((0,R.fU)({logKey:"ibu_htl_max_nights_error",logValue:{message:"maxNightsConfig has error，not a array"}}),B=[]);const H=I.default.getByKey("pageId",e);let U;return B.forEach((e=>{e.pageId===H&&(U=e.maxNights)})),U||(j.Z&&(0,R.fU)({logKey:"ibu_htl_max_nights_error",logValue:{message:"not matched any pageId"}}),_)}},3479:function(e,_,k){"use strict";k.d(_,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});const __WEBPACK_DEFAULT_EXPORT__=function(e,_){let k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",I=arguments.length>3&&void 0!==arguments[3]&&arguments[3],C=k;if(null===e||"object"!=typeof e||"string"!=typeof _)return C;let R=!0;for(let k=0,I=(_=_.split(/[\.\[\]]/).filter((e=>""!==e))).length;k<I;k++){let I=_[k];if(!e){R=!1;break}if(!Object.prototype.hasOwnProperty.call(e,I)){R=!1;break}e=e[I]}if(R&&null!=e&&(C=e),I){switch(Object.prototype.toString.call(C)){case"[object String]":C=isNaN(+C)?k:C;break;case"[object Array]":C=C.some((e=>isNaN(+e)))?k:C}}return C}},23072:function(e,_,k){"use strict";k.d(_,{Z:function(){return getQueryString}});var I=k(32127);function getQueryString(e,_,k){return(0,I.WH)(e,_,k)}},23866:function(e,_,k){"use strict";function cutImage(e,_){if(!e||!_)return e||"";let k=e.replace(/_R_[^\.]+|_Q\d+_[^\.]+/,""),I=new RegExp(/(.*?)\.(jpg_\.webp|png|jpg|jpeg)/i),C=k.match(I);return C&&C.length>=2?"".concat(C[1]).concat(_,".").concat(C[2]):e}k.d(_,{m2:function(){return cutImage}})},74019:function(e,_,k){"use strict";k.d(_,{MA:function(){return getFilterConditons},zC:function(){return getCurrency},vL:function(){return parseHotelDetailPath},Jx:function(){return getPicList}});var I=k(83465),C=k.n(I),R=k(31903),j=k(25923),B=k(28072),H=k(23026),U=(k(98239),k(47419));function getFilterConditons(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=Object.keys(e),k=C()(e);return _.forEach((_=>{if(_===R.Wj.METROS){if(e[_].lineList){let I=e[_].lineList.filter((e=>e.status)),C=I.length?I[0].siteList.filter((e=>e.status)):[];k[_].list=C}}else if(_===R.Wj.PRICERANGE){let{priceLow:e,priceHigh:I,priceBarMax:C}=k[_];if(0===e&&-1===I)k[_].list=[];else{const R=(0,j.b)(e,I,C);k[_].list=[{text:"".concat(R.lowLocal,"-").concat(R.highLocal),value:"".concat(R.lowLocal,"-").concat(R.highLocal),status:1,lowPrice:e,highPrice:I}]}}else k[_]&&k[_].list&&(k[_].list=e[_].list.filter((e=>e.status)))})),k}let V=null,G=null;let getCurrency=e=>{let _=(e=>{if(H.Z){if(null===V){const e=U.default.getByKey("cargo.locale"),_=U.default.getByKey("cacheCookieCurrencyLocales")||"";V=_.includes(e)}return V?(null===G&&(G=B.Z.get("cookiePricesDisplayed",e)||"USD"),G):B.Z.get("cookiePricesDisplayed",e)||"USD"}return B.Z.get("cookiePricesDisplayed",e)||"USD"})(e);var k;e?_=(null===(k=e.req.cargo)||void 0===k?void 0:k.getCurrency())||_:H.Z&&(_=U.default.getByKey("cargo.currency")||_);return _};const parseHotelDetailPath=e=>{let _,k,I=e.match(/\/hotels\/(\S+)?-hotel-(detailpage|detail|review|reviewpage)-(\d+|\d+\/|\d+\/.*)/i)||[];return 4===I.length&&(_=I[3]||0,k=!!["reviewpage","review"].includes(I[2])),{pathHotel:_,pathIsReview:k}},getPicList=e=>{var _,k,I,C;const R=H.Z&&(null===(_=window)||void 0===_||null===(k=_.performance)||void 0===k?void 0:k.getEntriesByType)?window.performance.getEntriesByType("resource"):[];let j;if(e)for(var B=0;B<R.length;B++)if(-1!=R[B].name.indexOf(e)){j=R[B];break}return{picTimeLoad:null===(I=j)||void 0===I?void 0:I.duration,picSizeLoad:null===(C=j)||void 0===C?void 0:C.transferSize,PerformanceResourceTiming:j}}},6626:function(e,_,k){"use strict";k.d(_,{K:function(){return C}});var I=k(76243);const C=function initCurGuestInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if((null==_?void 0:_.length)<1)return e;let{childAges:k=[],childBeds:C=[],childMeals:R=[],childTypes:j=[],rooms:B,adults:H,children:U}=e;return k.forEach(((e,B)=>{const H=_.filter((_=>e>=_.minAge&&e<=_.maxAge)).sort(((e,_)=>e.guestType<_.guestType?1:e.guestType>_.guestType?-1:0)),U=H.find((_=>e>=_.minAge&&e<=_.maxAge))||{},{guestType:V="",bed:G=0,meal:q=0}=U,z=V||"Adult";if(k.length==C.length&&k.length==R.length){const _=H.find((_=>e>=_.minAge&&e<=_.maxAge&&C[B]==_.bed&&R[B]==_.meal))||{};(0,I.xb)(_)?(C[B]=G,R[B]=q,j[B]=z):(C[B]=_.bed,R[B]=_.meal,j[B]=_.guestType)}else j[B]=j[B]||z,"Adult"==z?(C[B]=0,R[B]=0):(C[B]=C[B]||G,R[B]=R[B]||q)})),{rooms:B,adults:H,children:U,childAges:k,childBeds:C,childMeals:R,childTypes:j}}},7533:function(e,_,k){"use strict";k.d(_,{e:function(){return getRmsToken}});const getRmsToken=()=>{let e="";return window.__rmsbfi=window.__rmsbfi||[],window.__rmsbfi.push(["_getRmsToken",function(_){e=_}]),e}},33589:function(e,_,k){"use strict";function throttle(e,_,k){var I,C;return e?function(){let R=k||this,j=arguments,B=(new Date).getTime();I&&I+_>B||(I&&I+_<=B?(clearTimeout(C),C=setTimeout((()=>{I=B,e.apply(R,j)}),_)):(I=B,e.apply(R,j)))}:null}function debounce(e,_,k){const I=k||this,C=arguments;let R=null;return function(){R&&(clearTimeout(R),R=null),R=setTimeout((function(){e.apply(I,C)}),_)}}k.d(_,{P2:function(){return throttle},Ds:function(){return debounce}})},48368:function(e,_,k){"use strict";k.d(_,{sP:function(){return j},Jb:function(){return U},VG:function(){return V},pt:function(){return G},Yl:function(){return J},h8:function(){return logKeyPage},R0:function(){return logKeyPage1},ci:function(){return logBatchRefreshPageType},vQ:function(){return getVid},NW:function(){return sendTraceTypeUbt},ZP:function(){return ee}});var I=k(47419),C=k(36652),R=k(7992);const j="ibu_htl_c_online_page_performance",B="10320668151",H="10320668152",U="10320668148",V="10320668268",G="10320668147",q="10320668149",z="10320668150",J="10320668154",Q="10650047176",logKeyPage=()=>{switch(I.default.getByKey("pageId")){case z:return"homepage";case U:return"listpage";case V:return"metapage";case J:return"listmappage";case G:return"detailpage";case q:return"fillorderpage";case B:case"10650045052":return"orderdetailpage";case H:return"orderfinishpage";case Q:return"applycancelpage";case"10320667461":case"10320667466":return"crosspage_flight_selling";default:return""}},logKeyPage1=()=>{switch(I.default.getByKey("pageId")){case U:return"list";case V:return"landing";case G:return"dtl";default:return""}},logBatchRefreshPageType=()=>{switch(I.default.getByKey("pageId")){case U:return"1";case J:return"2";case V:return"3";default:return"0"}},getVid=e=>e.includes(".")?e.split(".").slice(1,3).join("."):"",sendTraceTypeUbt=(e,_)=>{(0,R.i4)(C.UBT_TYPE.TRACE,e,_)},ee={ORDER_DETAIL_PAGE:B,ORDER_FINISH_PAGE:H,CANCEL_ORDER_PAGE:Q,VOUCHER_PAGE:"10650034509",LIST_PAGE:U,META_PAGE:V,DETAIL_PAGE:G,BOOK_PAGE:q,HOME_PAGE:z,MAP_PAGE:J,ADD_REVIEW_PAGE:"10320668156",FINISH_REVIEW_PAGE:"10650003622",NPS_H5_PAGE:"10650039305",NPS_ONLINE_PAGE:"10650039303",BRG_PAGE:"10650026833"}},20978:function(e,_,k){"use strict";k.d(_,{Z:function(){return Buttons}});var I=k(22122),C=k(94184),R=k.n(C),j=k(86145),B=k(39621).default,H=k(67294);class Buttons extends B{constructor(e){super(e)}onClick(e){const{onClick:_,disabled:k}=this.props;if(k)return!1;_&&_(e,this.props)}getIcon(){const{loading:e,icon:_}=this.props,k=e?"btn-loading":_;if(k)return H.createElement(j.Z,{type:k})}getKid(){const{loading:e,children:_}=this.props;return!e&&H.createElement("span",null,_||"default")}render(){const{props:e}=this,{type:_,size:k,radius:C,block:j,className:B,icon:U,iconRight:V,disabled:G,loading:q}=e;let z="u-btn";const J=R()(z,{["".concat(z,"-").concat(_)]:_,["".concat(z,"-").concat(k)]:k,["".concat(z,"-radius").concat(C)]:C,["".concat(z,"-").concat(V?"iconRight":"icon")]:U,["".concat(z,"-block")]:j,["".concat(z,"-disabled")]:G,["".concat(z,"-loading")]:q},B),Q=this.getIcon(),ee=this.getKid();return H.createElement("button",(0,I.Z)({},this.props,{className:J,disabled:G,onClick:e=>{this.onClick(e)}}),!V&&Q,ee,V&&Q)}}},86145:function(e,_,k){"use strict";k.d(_,{Z:function(){return Icon}});var I=k(22122),C=k(94184),R=k.n(C),j=k(67294);function Icon(e){const{type:_,className:k}=e;let C="u-icon";const B=R()(C,{["".concat(C,"-").concat(_)]:_},k);return j.createElement("i",(0,I.Z)({},e,{className:B}))}},37701:function(e,_,k){"use strict";k.d(_,{Z:function(){return Link}});var I=k(22122),C=k(94184),R=k.n(C),j=k(39621).default,B=k(67294);class Link extends j{constructor(e){super(e)}render(){const{underline:e,children:_,cName:k}=this.props;let C="u-link";const j=R()(C,k,{["".concat(C,"-underline")]:e});return B.createElement("a",(0,I.Z)({},this.props,{className:j}),_)}}},58550:function(e,_,k){"use strict";k.d(_,{Z:function(){return getFormattedQuery}});var I=k(19848);const getFormattedQuery=e=>{let _={},k={};if(e)_=e.state.tripQuery;else{let e=window.location.search;e&&e.split("?")[1].split("&").forEach((e=>{let k=e.split("=")[0],I=e.split("=")[1];_[k]=I}))}return Object.keys(_).forEach((e=>{k[e.toLowerCase()]=_[e]})),k.star?k.star=k.star.split(","):k.star=[],k.mproom&&(k.mproom=k.mproom.replace(/_/g,",")),k.checkin=k.checkin||k.startdate||k.ci||(0,I.getDefaultCheckIn)("-"),delete k.startdate,delete k.ci,k.checkin=k.checkin.replace(/\//g,"-"),k.checkout=k.checkout||k.depdate||k.co||(0,I.getDefaultCheckOut)("-"),delete k.depdate,delete k.co,k.checkout=k.checkout.replace(/\//g,"-"),k}},8326:function(e,_,k){"use strict";k.d(_,{Ku:function(){return C},c5:function(){return R},Xg:function(){return j},Xy:function(){return B},ed:function(){return H},B8:function(){return U},lB:function(){return V},_W:function(){return G},vu:function(){return q},fx:function(){return z},pZ:function(){return J}});var I=k(35469);const C=[{NAME:"BUSINESS",TYPE:"business",ICON:"ic_new_shopping",ID:1},{NAME:"AIRPORT",TYPE:"airport",ICON:"flight",ID:2},{NAME:"RAILWAY",TYPE:"station",ICON:"ic_new_bu_train",ID:3},{NAME:"DOWNTOWN",TYPE:"downtown",ICON:"ic_new_landmark",ID:4},{NAME:"SCENIC",TYPE:"scenic",ICON:"ic_new_landmark",ID:5},{NAME:"HOT_SCENIC",TYPE:"hot_scenic",ICON:"ic_new_landmark",ID:6},{NAME:"METRO",TYPE:"metro",ICON:"ic_new_subway",ID:7},{NAME:"HOTEL",TYPE:"hotel",ICON:"ic_new_hotel",ID:8},{NAME:"META",TYPE:"meta",ICON:"ic_new_hotel",ID:9},{NAME:"DINING",TYPE:"dining",ICON:"ic_new_breakfast",ID:10},{NAME:"POPULAR",TYPE:"popular",ICON:"popular",ID:11},{NAME:"SHOPPING",TYPE:"shopping",ICON:"ic_new_shopping",ID:12}],R={BREAKFAST:1,KINGBED:2,TWOBEDS:4,SINGLEBED:8,MULTIBEDS:16,FREECANCEL:32,INSTANTCONFIRM:64,PAYATHOTEL:128,PAYATONLINE:256,HOTELPACKAGE:512,SMOKE:1024},j=[{key:R.BREAKFAST,value:0},{key:R.FREECANCEL,value:0},{key:R.HOTELPACKAGE,value:0},{key:R.KINGBED,value:0},{key:R.SINGLEBED,value:0},{key:R.TWOBEDS,value:0},{key:R.MULTIBEDS,value:0},{key:R.SMOKE,value:0},{key:R.PAYATHOTEL,value:0},{key:R.PAYATONLINE,value:0},{key:R.INSTANTCONFIRM,value:0}],B=(R.BREAKFAST,(0,I.I)("resx.onlinehotelresource.hotel_roomdata_breakfast_include_v2"),R.FREECANCEL,(0,I.I)("resx.onlinehotelresource.labeltext_hotel_freecancelation"),R.HOTELPACKAGE,(0,I.I)("key.hotel.detail.hotel.package.filter"),R.KINGBED,(0,I.I)("resx.onlinehotelresource.text_doublebedsize"),R.SINGLEBED,(0,I.I)("key.hotel.filter.single.bed"),R.TWOBEDS,(0,I.I)("resx.onlinehotelresource.text_twinbed"),R.MULTIBEDS,(0,I.I)("key.hotel.filter.multiple.beds"),R.SMOKE,(0,I.I)("resx.onlinehotelresource.text_smokingnotpermitted"),R.PAYATHOTEL,(0,I.I)("resx.onlinehotelresource.text_payathotel"),R.PAYATONLINE,(0,I.I)("resx.onlinehotelresource.v3_hotel_detail_roomdetail_payment_prepaynow"),R.INSTANTCONFIRM,(0,I.I)("resx.onlinehotelresource.hotel_detail_instant_confirmation_v2"),{NORMAL:0,LOADING:2,NOROOMSFOUND:3,SOLDOUT:4,SOLOHOTEL:5,NOTAVAILABLE:6}),H={LOADING:0,LOADED:1,REFRESH:2},U={MEAL:(0,I.I)("key.hotel.detail.room.type.free.meal"),BREAKFAST:(0,I.I)("key.hotel.detail.room.type.free.breakfast")},V=[{key:"hotelpackage",value:"1",filterValue:R.HOTELPACKAGE},{key:"breakfast",value:"1",filterValue:R.BREAKFAST},{key:"freecancel",value:"1",filterValue:R.FREECANCEL},{key:"kingsize",value:"1",filterValue:R.KINGBED},{key:"fg",value:"1",filterValue:R.PAYATHOTEL},{key:"immediate",value:"1",filterValue:R.INSTANTCONFIRM},{key:"pp",value:"1",filterValue:R.PAYATONLINE},{key:"twinbed",value:"1",filterValue:R.TWOBEDS},{key:"multibed",value:"1",filterValue:R.MULTIBEDS},{key:"singlebed",value:"1",filterValue:R.SINGLEBED}],G=["4","5","6"],q=[4,5,6],z={0:"diamond",1:"star",2:"circle"},J=(R.BREAKFAST,(0,I.I)("key.hotel.book.detail.page.price.advantage.reason.lowest.breakfast.placeholder"),R.FREECANCEL,(0,I.I)("key.hotel.book.detail.page.price.advantage.reason.lowest.free.cancellation.placeholder"),R.KINGBED,(0,I.I)("key.hotel.book.detail.page.price.advantage.reason.lowest.double.bed"),R.KINGBED,R.BREAKFAST,(0,I.I)("key.hotel.book.detail.page.price.advantage.reason.lowest.all"),R.KINGBED,R.FREECANCEL,(0,I.I)("key.hotel.book.detail.page.price.advantage.reason.lowest.double.bed.all"),R.BREAKFAST,R.FREECANCEL,(0,I.I)("key.hotel.detailpage.breakfast.and.freecancel"),"IBU_HOTEL_ONLINE_BROWSER_PRICE")},61686:function(e,_,k){"use strict";k.d(_,{pF:function(){return showDrawer},av:function(){return logFacilityHover},Xp:function(){return V},Gs:function(){return logNearByHotelClick},jp:function(){return logNearByHotelClickNew},aU:function(){return logNearByHotelLoad},hj:function(){return logNearbyHotelSlideClick},WE:function(){return logNearByHotelExposure},ym:function(){return logHotelImportantInfoShow},h6:function(){return logHotelImportantInfoSeeAll},Lk:function(){return logHotelImportantInfoTrans},NB:function(){return logHotelImportantInfoOriginal},Vo:function(){return logCloseMap},uW:function(){return logSwitchTab},_v:function(){return mapSelectRoomBtnClick},zW:function(){return logClickCard},U7:function(){return reviewPageClick},Wn:function(){return G},ll:function(){return sortChangeAction},j_:function(){return showAllAction},t3:function(){return q},XQ:function(){return travelChangeAction},QP:function(){return z},WD:function(){return roomChangeAction},rN:function(){return quickFilterChangeAction},lk:function(){return J},fH:function(){return reviewFilterTagClick},Gt:function(){return reviewCardClick},aN:function(){return logReviewSliderArrowClick},FY:function(){return logReviewShowMoreClick},Xb:function(){return logSaleCardClick},rV:function(){return logFacilityResSlide},pu:function(){return logFacilityPicSlide},SL:function(){return logFacilityPicClick},bT:function(){return logFacilityAddInfoHover},lP:function(){return logFacilityShowMore}});var I=k(96156),C=k(47419),R=(k(58550),k(8326),k(3479)),j=k(35469),B=(k(23072),k(48368));k(8304),k(15393);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const H={transport:(0,j.I)("key.hotel.detail.page.map.transport"),attractions:(0,j.I)("key.hotel.detail.page.map.attractions"),similar:(0,j.I)("key.hotel.detail.page.map.hotel"),nearbyHotel:(0,j.I)("key.tripmap.hotelmap.detail.nearby.hotel")},U={REVIEW:"0",POLICY:"1",SERVICE:"2",LOCATION:"3"},showDrawer=e=>{let{type:_}=e;return{logKey:"ibu_htl_detailpage_drawer_show",actionType:"click",logDesc:"show Drawer",masterhotelid:C.default.getByKey("initData.base.masterHotelId")||0,page:C.default.getByKey("pageId"),type:U[_]||""}},logFacilityHover=e=>({logKey:"htl_t_online_dtl_transportation_services_hover",logValue:_objectSpread({},e)}),V={showOrHideAction:e=>({actionType:"click",logKey:"ibu_htl_detailpage_item_action",logValue:{masterhotelid:e.masterhotelid||"",position:e.position||"",action:e.action},logDesc:"item_action"}),logDetailpageTranslationAction:e=>({logKey:"ibu_htl_detailpage_translation_action",logDesc:"translation_action",actionType:"click",logValue:{masterhotelid:e.masterhotelid,position:e.position,action:e.action?"translation":"original"}}),logHotelPolicyShow:e=>({actionType:"scroll",logKey:"ibu_htl_detailpage_hotelpolicy_show",logValue:{masterhotelid:e||null},logDesc:"hotelpolicy_show"}),logHotelPolicyChildGuideShow:()=>({actionType:"exposure",logKey:"htl_t_online_dtl_policy_childguide_exposure",logValue:{locale:C.default.getByKey("cargo.locale"),pageId:C.default.getByKey("pageId")}}),logHotelPolicyChildGuideClick:()=>({actionType:"click",logKey:"htl_t_online_dtl_policy_childguide_click",logValue:{locale:C.default.getByKey("cargo.locale"),pageId:C.default.getByKey("pageId")}})},logNearByHotelClick=(e,_,k)=>({logKey:"ibu_htl_detailpage_nearbyhotel_click",logValue:{masterhotelid:e,nearbymasterhotelid:_,room_no:k,hotelrank:k,page:B.pt},logDesc:"ibu_htl_detailpage_nearbyhotel_click"}),logNearByHotelClickNew=(e,_,k)=>({logKey:"htl_t_online_dtl_nearbyhtl_htlcard_click",logValue:{masterhotelid:e,nearbymasterhotelid:_,room_no:k,hotelrank:k,page:B.pt},logDesc:"htl_t_online_dtl_nearbyhtl_htlcard_click"}),logNearByHotelLoad=(e,_)=>({logDesc:"ibu_htl_detailpage_nearbyhotel",logKey:"ibu_htl_detailpage_nearbyhotel",logValue:{masterhotelid:e,hotels:_}}),logNearbyHotelSlideClick=(e,_)=>({logDesc:"nearbyhotel_slide_click",logKey:"ibu_htl_detailpage_nearbyhtl_slide_click",logValue:{masterhotelid:_,direction:e,page:B.pt}}),logNearByHotelExposure=e=>{const{masterHotelId:_,hotelId:k,index:I,price:R}=e;return{logDesc:"nearbyhotel_exposure",logKey:"htl_t_online_dtl_nearbyhtl_htlcard_exposure",logValue:{masterhotelid:_,page:B.pt,locale:C.default.getByKey("cargo.locale"),card_masterhotelid:k,htl_position:I,priceinfo:R}}},logHotelImportantInfoShow=e=>({actionType:"scroll",logKey:"ibu_htl_detailpage_booknotice_show",logValue:{masterhotelid:e||null},logDesc:"booknotice_show"}),logHotelImportantInfoSeeAll=e=>({keyId:"215708",actionType:"click",logKey:"ibu_htl_c_online_dtl_importantinfo_showall_click",logValue:e,logDesc:"importantinfo_showall"}),logHotelImportantInfoTrans=e=>({keyId:"215707",actionType:"click",logKey:"ibu_htl_c_online_dtl_importantinfo_translate_click",logValue:e,logDesc:"importantinfo_translate"}),logHotelImportantInfoOriginal=e=>({keyId:"215706",actionType:"click",logKey:"ibu_htl_c_online_dtl_importantinfo_original_text_click",logValue:e,logDesc:"importantinfo_original_text"}),logCloseMap=e=>({actionType:"click",logKey:"ibu_htl_detailmappage_showonmap_close",logDesc:"close map",logValue:{masterhotelid:(0,R.Z)(e,"initData.base.masterHotelId")}}),logSwitchTab=(e,_)=>({actionType:"click",logKey:"ibu_htl_detailmappage_showonmap_tab_click",logDesc:"tab_click",logValue:{masterhotelid:(0,R.Z)(_,"initData.base.masterHotelId"),tabname:e}}),mapSelectRoomBtnClick=()=>({actionType:"click",logKey:"htl_t_online_dtl_mappage_bp_selectroom_click",logDesc:"record SelectRoom button times"}),logClickCard=(e,_)=>({actionType:"click",logKey:"ibu_htl_detailmappage_showonmap_click",logDesc:"click map list item on detailpage",logValue:{masterhotelid:(0,R.Z)(_,"initData.base.masterHotelId",""),tabname:H.nearbyHotel,itemname:(0,R.Z)(e,"base.hotelName",""),imageurl:(0,R.Z)(e,"base.imageUrl",""),priceinfo:(0,R.Z)(e,"money.price",""),cancelpriceinfo:(0,R.Z)(e,"money.priceDelete",""),distancedesc:(0,R.Z)(e,"position.poi","")}}),reviewPageClick=(e,_)=>({actionType:"click",logKey:"ibu_htl_detailpage_review_paging_click",logValue:{masterhotelid:_,pageindex:e},logDesc:"review_paging_click"}),G=function sortAction(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{actionType:"click",logKey:"ibu_htl_detailpage_review_sort_action",logValue:{action:e?"open":"close",masterhotelid:_},logDesc:"review_sort_action"}},sortChangeAction=(e,_)=>({logKey:"ibu_htl_detailpage_review_sort_choice",logValue:{type:_,value:_?"1":"0",masterhotelid:e||""},logDesc:"review_sort_choice"}),showAllAction=e=>({actionType:"click",logKey:"ibu_htl_detailpage_review_showall",logValue:{position:"hotelinfo",masterhotelid:e||""},logDesc:"review_showall"}),q=function travelAction(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{logKey:"ibu_htl_detailpage_review_traveltype_action",logValue:{action:e?"open":"close",masterhotelid:_},logDesc:"review_traveltype_action"}},travelChangeAction=(e,_)=>({logKey:"ibu_htl_detailpage_review_traveltype_choice",logValue:{type:_?1:0,value:_,masterhotelid:e||""},logDesc:"review_traveltype_choice"}),z=function roomAction(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{logKey:"ibu_htl_detailpage_review_roomtype_action",logValue:{action:e?"open":"close",masterhotelid:_},logDesc:"review_roomtype_action"}},roomChangeAction=(e,_)=>({logKey:"ibu_htl_detailpage_review_roomtype_choice",logValue:{type:_?1:0,value:_,masterhotelid:e||""},logDesc:"review_roomtype_choice"}),quickFilterChangeAction=(e,_)=>({logKey:"ibu_htl_detailpage_review_quickfilter_choice",logValue:{filteritems:_.split(","),masterhotelid:e||""},logDesc:"review_quickfilter_choice"}),J=function badreviewClick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{logKey:"ibu_htl_detailpage_badreview_click",logValue:{masterhotelid:e},logDesc:"badreview_click"}},reviewFilterTagClick=e=>{var _;return{logKey:"htl_t_online_dtl_cmt_fastfilter_click",logValue:{masterhotelid:C.default.getByKey("initData.base.masterHotelId")||0,filtertype:(null==e||null===(_=e.selectedItem)||void 0===_?void 0:_.value)||"",locale:C.default.getByKey("cargo.locale"),page:C.default.getByKey("pageId")}}},reviewCardClick=e=>({logKey:"htl_t_online_dtl_cmt_click",logValue:{masterhotelid:C.default.getByKey("initData.base.masterHotelId")||0,position:(null==e?void 0:e.index)+1||1,locale:C.default.getByKey("cargo.locale"),page:C.default.getByKey("pageId")}}),logReviewSliderArrowClick=()=>{(0,B.NW)("htl_t_online_dtl_cmt_slide",{masterhotelid:C.default.getByKey("initData.base.masterHotelId")||0,locale:C.default.getByKey("cargo.locale"),page:C.default.getByKey("pageId")})},logReviewShowMoreClick=()=>{(0,B.NW)("htl_t_online_dtl_cmt_showmore_click",{masterhotelid:C.default.getByKey("initData.base.masterHotelId")||0,locale:C.default.getByKey("cargo.locale"),page:C.default.getByKey("pageId")})},logSaleCardClick=e=>({logKey:"P0106_SP0000_M0005_ID0002_click",logValue:e||null}),logFacilityResSlide=(e,_)=>{(0,B.NW)(_?"htl_t_online_dtl_drawer_facility_res_slide":"htl_t_online_dtl_bottom_res_slide",{locale:e.locale,page:e.page,masterhotelid:e.hotelId,res_num:e.resNum,operate_type:e.operateType})},logFacilityPicSlide=(e,_)=>{(0,B.NW)(_?"htl_t_online_dtl_drawer_facility_pic_slide":"htl_t_online_dtl_bottom_pic_slide",{locale:e.locale,page:e.page,masterhotelid:e.hotelId,picfac_num:e.picNum,sceneid:e.sceneId,operate_type:e.operateType})},logFacilityPicClick=(e,_)=>{(0,B.NW)(_?"htl_t_online_dtl_drawer_facility_pic_click":"htl_t_online_dtl_bottom_pic_click",{locale:e.locale,page:e.page,masterhotelid:e.hotelId,picfac_num:e.picNum,sceneid:e.sceneId})},logFacilityAddInfoHover=(e,_)=>{(0,B.NW)(_?"htl_t_online_dtl_drawer_facility_addinfo_hover":"htl_t_online_dtl_bottom_addinfo_hover",{locale:e.locale,page:e.page,masterhotelid:e.hotelId,fac_id:e.facilityId,sceneid:e.sceneId})},logFacilityShowMore=e=>{(0,B.NW)("htl_t_online_dtl_bottom_showmore_click",{locale:e.locale,page:e.page,masterhotelid:e.hotelId,fac_num:e.facilityNum,sceneid:e.sceneId})}},93986:function(e,_,k){"use strict";k.d(_,{V0:function(){return I},Yt:function(){return C},AL:function(){return R},Vf:function(){return j},jv:function(){return B},Zx:function(){return H},hh:function(){return U},S0:function(){return V},h$:function(){return G},Q5:function(){return q},sK:function(){return z},Ju:function(){return J},eb:function(){return Q},ZS:function(){return ee},Tt:function(){return te}});const I="BASEROOMS_UPDATE",C="BASEROOMS_FILTERANDSORT",R="BASEROOMS_AFTERFIRSTLOAD",j="BASEROOMS_UPDATELISTSTATUS",B="BASEROOMS_UPDATEPRICETAG",H="BASEROOMS_REFRESHCHILDPOLICY",U="BASEROOMS_TOGGLEALLCRS",V="BASEROOMS_SEARCHEDNUM",G="BASEROOMS_UPDATEEXPERIENCEMEMBERREWARD",q="BASEROOMS_UPDATEFILTERVALUE",z="BASEROOMS_UPDATESTICKROOMKEY",J="BASEROOMS_UPDATEFOLDEDROOMKEY",Q="BASEROOMS_UPDATEBOOKINGSTATUS",ee="BASEROOM_UPDATE_TAGS_ORDER",te="BFF_ROOM_LIST_LOWEST_PRICE"},20649:function(e,_,k){"use strict";k.d(_,{O:function(){return I},E:function(){return C}});const I="UPDATE_CHILD_SELECT_LIST",C="UPDATE_CHILD_SELECT_CARD"},30609:function(e,_,k){"use strict";k.d(_,{R:function(){return I}});const I="ClEAR_ALL_FILTER"},6162:function(e,_,k){"use strict";k.d(_,{Z2:function(){return I},FV:function(){return C},Z:function(){return R}});const I="UPDATE_DRAWER_STATUS",C="CLOSE_DRAWER",R="CHANGE_TAB"},79007:function(e,_,k){"use strict";k.d(_,{n:function(){return I}});const I="UPDATE_CALENDAR_PRICE"},57976:function(e,_,k){"use strict";k.d(_,{t:function(){return I}});const I="UPDATE_HIGH_PRICE_RATE"},3279:function(e,_,k){"use strict";k.d(_,{t:function(){return I}});const I="UPDATE_IMPORTANT_INFO"},53449:function(e,_,k){"use strict";k.d(_,{w7:function(){return I},Io:function(){return C},XL:function(){return R},FS:function(){return j},E4:function(){return B}});const I="UPDATE_INIT_CSR",C="UPDATE_INIT_BFF_CSR",R="UPDATE_MAP_TYPE",j="SETNAVIFIXED",B="UPDATE_SEARCH_HANDLE"},53891:function(e,_,k){"use strict";k.d(_,{G:function(){return I}});const I="UPDATE_ISSHOWALLBRS"},18865:function(e,_,k){"use strict";k.d(_,{Js:function(){return I},_z:function(){return C},sw:function(){return R}});const I="TOGGLE_MAP",C="CHANGE_LIST_TAB",R="UPDATE_MAP_PANEL_DIRECTIONS"},34406:function(e,_,k){"use strict";k.d(_,{j:function(){return I}});const I="UPDATE_NEARBY_HOTEL"},9462:function(e,_,k){"use strict";k.d(_,{O:function(){return I}});const I="UPDATE_NEARBY_POI"},43491:function(e,_,k){"use strict";k.d(_,{Uo:function(){return I},V0:function(){return C},IZ:function(){return R},S:function(){return j},VI:function(){return B}});const I="UPDATE_NEWREVIEW_INFO",C="UPDATE_NEWREVIEW_STATIC_INFO",R="UPDATE_SELECTEDREVIEW_INFO",j="UPDATE_NEWREVIEW_INFO_LOADING",B="UPDATE_NEWREVIEW_INFO_LOADED"},55391:function(e,_,k){"use strict";k.d(_,{W:function(){return I}});const I="UPDATE_REFRESH_ROOMS"},10835:function(e,_,k){"use strict";k.d(_,{XB:function(){return I},EP:function(){return C},sg:function(){return R}});const I="UPDATE_REVIEW_INFO",C="UPDATE_REVIEW_INFO_LOADING",R="UPDATE_REVIEW_INFO_LOADED"},36233:function(e,_,k){"use strict";k.d(_,{p:function(){return I}});const I="UPDATE_ROOM_LAYER_INFO"},54205:function(e,_,k){"use strict";k.d(_,{z:function(){return I}});const I="UPDATE_ROOMLIST_LOADING"},53201:function(e,_,k){"use strict";k.d(_,{a:function(){return I}});const I="UPDATE_SCROLL_TO_ROOM_KEY"},51084:function(e,_,k){"use strict";k.d(_,{p$:function(){return I},pH:function(){return C},DN:function(){return R},Wr:function(){return j},Mj:function(){return B}});const I="DESTINATION_UPDATE",C="CALENDAR_UPDATE",R="ROOM_GUEST_UPDATE",j="KEYWORD_UPDATE",B="ALL_INPUT_UPDATE"},61833:function(e,_,k){"use strict";k.d(_,{A:function(){return I}});const I="SEARCH_INPUT_KEYWORD_UPDATE"},74107:function(e,_,k){"use strict";k.d(_,{p:function(){return I}});const I="UPDATE_SOLDOUT_INFO"},44251:function(e,_,k){"use strict";k.d(_,{Z:function(){return We}});var I=k(14890),C=k(47843),R=k(47419),j=k(96156),B=k(53449);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let H={navigation:[],crumbs:[{text:"",url:""}],base:{starType:"star",star:0,hotelName:"",hotelId:"",book:"",badge:"",badgeHover:"",mapType:"gg",cityId:2,timeOffset:0,startPrice:0,collected:!0},position:{address:"",poi:"",lat:31,lng:121,positionReview:"",poiList:[]},inspiration:{lastBook:"",currentBrowse:"",seoFooter:[],album:{userAlbum:[Object]}},album:{userAlbum:{list:[],typeList:[],albumName:""},bigPic:{src:"",index:0},smallPic:[]},hotelInspireInfo:{textFormat:"",textParam:[],title:"",type:""},comment:{},childPolicy:{beds:{title:"",description:"",menu:[]}},naviFixed:!1,updateHotelList:!1};var U=k(18865);function reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let V={showMap:!1,topTab:0,listTab:2,mapPanelDirections:[]};var G=k(9462);function nearbyPoi_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function nearbyPoi_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?nearbyPoi_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):nearbyPoi_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let q={placeInfoList:[]};var z=k(34406);function nearbyHotel_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function nearbyHotel_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?nearbyHotel_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):nearbyHotel_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let J={list:R.default.getByKey("initData.nearbyHotel.list")||[],masterHotelId:R.default.getByKey("initData.nearbyHotel.masterHotelId")||0};var Q=k(16234),ee=k(32127),te=k(76243),ne=k(25291),re=k(23026),oe=k(74019),ie=k(23072),ae=k(6626),le=k(15393),se=k(15458),ce=k(51084),ue=k(8938),de=k(9676);function initKeyword(){if(re.Z){const e=R.default.getByKey("initData.base.timeOffset")||0,_=(0,ie.Z)("optionId"),k=(0,ie.Z)("optionType"),I=(0,ie.Z)("keyword"),C=(0,ie.Z)("lat"),j=(0,ie.Z)("lon");return{_cityId:R.default.getByKey("initData.base.cityId")||0,id:_,type:k,lat:C,lon:j,displayName:I,word:I,timeOffset:e}}return{}}const initRoomGuest=()=>{if(re.Z){var e;const{jpChildSearchPolicy:_=[],childSearchPolicy:k={}}=R.default.getByKey("initData")||{};let I=(0,ie.Z)("crn")||1,C=(0,ie.Z)("adult")||2,j=(0,ie.Z)("children")||0,B=(0,ie.Z)("ages"),H=(0,ie.Z)("beds"),U=(0,ie.Z)("meals"),V=(0,ie.Z)("types"),G=parseInt(I),q=parseInt(C),z=parseInt(j),J=null===(e=R.default.qconfigData)||void 0===e?void 0:e.maxChild,Q=B?B.split(",").filter((e=>/\d+$/.test(e))):[],ee=H?H.split(","):[],re=U?U.split(","):[],oe=V?V.split(","):[];const le=(()=>{var e,_,k,I,C,j;const{childSearchPolicy:B={}}=R.default.getByKey("initData")||{},{countryId:H=0}=R.default.getByKey("initData.base")||{};let U=!1,V=!1,G=!1;return(null==B?void 0:B.matchLocale)&&H&&(null==B||null===(e=B.matchLocale)||void 0===e?void 0:e.toString().indexOf(null===(_=R.default.getByKey("cargo"))||void 0===_?void 0:_.locale))>-1&&(null==B||null===(k=B.matchCountry)||void 0===k?void 0:k.toString().indexOf(H))>-1&&(U=!0),(null==B?void 0:B.limitLocale)&&H&&-1==(null==B||null===(I=B.limitLocale)||void 0===I?void 0:I.toString().indexOf(null===(C=R.default.getByKey("cargo"))||void 0===C?void 0:C.locale))&&(null==B||null===(j=B.matchCountry)||void 0===j?void 0:j.toString().indexOf(H))>-1&&(V=!0),G=U&&!V||!U&&V,G})()||!1;if(G&&q&&q/G<9){z/G>J&&(z=J,Q.length=J),(le&&!(0,te.xb)(k)&&Q.length>0&&0==ee.length&&0==re.length||le&&!(0,te.xb)(k)&&Q.length>0&&(ee.length!==Q.length||re.length!=Q.length))&&Q.forEach(((e,_)=>{e<=5||e>=12?(ee[_]=0,re[_]=0):(ee[_]=1,re[_]=1)})),!(0,te.xb)(k)&&le||!(0,te.xb)(_)||(ee=[],re=[],oe=[]);return(0,ae.K)({rooms:G,adults:q,children:z,childAges:Q,childBeds:ee,childMeals:re,childTypes:oe},_)}return ne.ZV[ne.In]}return{}},getInitState=e=>{let{ctx:_,timeOffset:k,emptyKeys:I={}}=e||{};(0,te.xb)(e)&&re.Z&&(k=R.default.getByKey("initData.base.timeOffset")||0);const C=_?_.state.tripQuery:(0,ee.u0)(null,!0),{starlist:j,travelpurpose:B}=C||{},{checkin:H,startdate:U,ci:V,checkout:G,depdate:q,co:z,from_page:J}=C||{},ie=j?j.split(",").map((e=>+e)):[],ae=H||U||V,ce=G||q||z,pe=(0,se.EV)();let he={};if(I.calendar)he={};else if(ae||ce){const e=(0,le.Z)(_),I=(0,Q.Lf)({checkIn:ae,checkOut:ce,timeOffset:k,maxNights:e});he={checkIn:I.checkInStr,checkOut:I.checkOutStr,timeOffset:I.timeOffset,nights:I.nights}}else if("orderlist"===J){const e=(new Date).getHours(),I=e>=0&&e<6,C=(0,ue.bU)(new Date,1),R=(0,ue.bU)(null==C?void 0:C.date,1);if((null==pe?void 0:pe.checkIn)&&(null==pe?void 0:pe.checkOut)){const e=(0,le.Z)(_),I=(0,Q.Lf)({checkIn:null==pe?void 0:pe.checkIn,checkOut:null==pe?void 0:pe.checkOut,timeOffset:k,maxNights:e});he={checkIn:I.checkInStr,checkOut:I.checkOutStr,timeOffset:I.timeOffset,nights:I.nights}}else he={timeOffset:k,checkIn:I?(0,de._W)(new Date,"-"):(0,de._W)(null==C?void 0:C.date,"-"),checkOut:I?(0,de._W)(null==C?void 0:C.date,"-"):(0,de._W)(null==R?void 0:R.date,"-"),nights:1}}else he={needSelectTime:!0,timeOffset:k,checkIn:"",checkOut:"",nights:0};return Object.assign({},ne.ZV,{star:ie,calendar:he,roomGuest:initRoomGuest(),keyword:I.calendar?{}:initKeyword(),search:I.calendar?{}:re.Z?(0,se.Gc)(R.default.getByKey("initData.base")):{},travel:"1"===B,barCurr:(0,oe.zC)(_)})},pe=[ce.p$,ce.pH,ce.DN,ce.Wr];var he=k(61833);var fe=k(93986),me=k(8326),ge=k(14714);const mapTgas2Object=e=>{const _={};return e.forEach((e=>{_[e.key]=e.value})),_},sortTagsByQuery=e=>{if(0===e.length)return e;const _=[],k=[],I=mapTgas2Object(e),C={[me.c5.BREAKFAST]:(0,ee.WH)("breakfast"),[me.c5.FREECANCEL]:(0,ee.WH)("freecancel"),[me.c5.KINGBED]:(0,ee.WH)("kingsize"),[me.c5.SINGLEBED]:(0,ee.WH)("singlebed"),[me.c5.TWOBEDS]:(0,ee.WH)("twinbed"),[me.c5.MULTIBEDS]:(0,ee.WH)("multibed"),[me.c5.PAYATHOTEL]:(0,ee.WH)("fg"),[me.c5.PAYATONLINE]:(0,ee.WH)("pp"),[me.c5.INSTANTCONFIRM]:(0,ee.WH)("immediate")};return e.forEach((e=>{const R=e.key;C[R]?_.push({key:R,value:I[R]}):k.push({key:R,value:I[R]})})),[..._,...k]},baseSortTags=e=>{if(0===e.length)return e;const _=[],k=mapTgas2Object(e);return me.Xg.forEach((e=>{const I=e.key;_.push({key:I,value:k[I]})})),_},sortTagsByHaveSourse=e=>{if(0===e.length)return e;const _=[],k=[],I=mapTgas2Object(e);return e.forEach((e=>{const C=e.key;0===I[C]?_.push({key:C,value:I[C]}):k.push({key:C,value:I[C]})})),[...k,..._]};function filterAndSortRooms(e,_,k){const{low:I=0,high:C=-1,firstLoad:R=!1,compensate:j=!1}=k,{brs:B,roomsValue:H}=function filterRooms(e,_,k,I){let C=(_||[]).slice();const R=[];if(0===C.length)return{brs:C,roomsValue:R};return C=C.map((_=>{let C={};return _&&(Object.assign(C,_),C.saleRoom=C.saleRoom&&C.saleRoom.length&&C.saleRoom.filter((_=>{const C=_&&_.base&&_.base.filterValue;let j=_&&_.money&&_.money.inclusivePrice?_.money.inclusivePrice:_&&_.money&&_.money.price;const B=(C&e)===e&&(0===k||j>=k)&&(-1===I||j<=I);return B&&R.push(C),B})).slice()||[]),C})),C=C.filter((e=>e.saleRoom&&e.saleRoom.length)),{brs:C,roomsValue:R}}(e,_,I,C);!function updateRoomPanel(e){e&&e.length&&e.forEach((e=>{if(e&&e.saleRoom&&e.saleRoom.length&&e.baseRoom)for(let _ in ve)e.baseRoom[ve[_]]=getPanelFacilityByFilter(e.saleRoom,_)}))}(B);const U=function calRoomsNum(e,_){return me.Xg.map((k=>{let I=e|k.key;const C=_.reduce(((e,_)=>e+((_&I)===I?1:0)),0);return{key:k.key,value:C}}))}(e,H);return function sortRooms(e,_,k){e&&e.length&&(e.forEach((e=>{e.saleRoom&&(!function sortSaleRooms(e,_,k){if(!e||0===e.length)return;e.sort(((e,_)=>{if(isTproom(e))return e.base.tpRoom=!0,-1;if(isTproom(_))return _.base.tpRoom=!0,1;if(e.base&&e.base.startPriceRoom)return-1;if(_.base&&_.base.startPriceRoom)return 1;const I=versionBSort(e,_,k);return-1!==[1,-1].indexOf(I)?I:e.base&&_.base?_.base.rank-e.base.rank:0}))}(e.saleRoom,0,k),e.saleRoom.length&&e.saleRoom.forEach((e=>function useEffectOnSaleRooms(e,_,k){const{base:I={}}=e;let C="F",R=k?8:2;_&&I.startPriceRoom&&(R|=4,C="T");R+="",e.useEffect={issproom:C,roomtype:R}}(e,_,k))))})),e.sort(((e,k)=>{if(e&&e.saleRoom&&e.saleRoom.length&&e.saleRoom[0]&&e.saleRoom[0].money&&e.saleRoom[0].money.price&&k&&k.saleRoom&&k.saleRoom.length&&k.saleRoom[0]&&k.saleRoom[0].money&&k.saleRoom[0].money.price){var I,C,R,j;if(isTproom(e.saleRoom[0]))return-1;if(isTproom(k.saleRoom[0]))return 1;if(_){if(e.saleRoom[0].base&&e.saleRoom[0].base.startPriceRoom)return-1;if(k.saleRoom[0].base&&k.saleRoom[0].base.startPriceRoom)return 1}return versionBSort(e,k),(null===(I=e.saleRoom[0].money)||void 0===I?void 0:I.inclusivePrice)&&(null===(C=k.saleRoom[0].money)||void 0===C?void 0:C.inclusivePrice)&&(null===(R=e.saleRoom[0].money)||void 0===R?void 0:R.comparePrice)&&(null===(j=k.saleRoom[0].money)||void 0===j?void 0:j.comparePrice)?e.saleRoom[0].money.comparePrice-k.saleRoom[0].money.comparePrice:e.saleRoom[0].money.price-k.saleRoom[0].money.price}return 0})))}(B,R,j),{brs:B,tags:U}}function isTproom(e){if(!e||!e.base)return!1;const _=!!e.base.tpRoom,k=!!e.base.roomId&&e.base.roomId===Number((0,ie.Z)("highlight"));return _||k}function isTodayMinPrice(e){const{scriptInfo:_=[]}=e;return _.map((e=>{if("ROOM_MIN_PRICE"===e.type&&5===e.value)return!0})),!1}function iscountDown(e){const{countDown:_}=e.base||{};return!!_}function isfreeCancle(e){const{scriptInfo:_=[]}=e;return _.map((e=>{if("TODAYMINPRICE"===e.type&&4===e.value)return!0})),!1}function isSingleBreakfast(e){const{scriptInfo:_=[],money:k={}}=e;return _.map((e=>{if("TODAYMINPRICE"===e.type&&1===e.value)return k.price})),!1}function isDoubleBreakfast(e){const{scriptInfo:_=[],money:k={}}=e;return _.map((e=>{if("TODAYMINPRICE"===e.type&&2===e.value)return k.price})),!1}function versionBSort(e,_,k){if(!k){if(!(R.default.getByKey("fastFilter")||[]).length&&e.isFoldStatus!==_.isFoldStatus)return e.isFoldStatus-_.isFoldStatus}if(isTodayMinPrice(e))return-1;if(isTodayMinPrice(_))return 1;if(iscountDown(e))return-1;if(iscountDown(_))return 1;if(isfreeCancle(e))return-1;if(isfreeCancle(_))return 1;if(isDoubleBreakfast(e)&&isSingleBreakfast(_)){if(isDoubleBreakfast(e)-isSingleBreakfast(_)<=0)return-1;if(isSingleBreakfast(_)-isDoubleBreakfast(e)<0)return 1}return isSingleBreakfast(e)?-1:isSingleBreakfast(_)?1:isDoubleBreakfast(e)?-1:isDoubleBreakfast(_)?1:void 0}let getSaleRoomFacility=(e,_)=>{if(_&&_.facility&&_.facility.length){if(e===ge.QF)return _&&_.bed&&_.bed.contentListHover?_.bed.contentListHover:"";if(e===ge.K5)return _.facility.some(hasBreakfast(!0))?me.B8.MEAL:"";if(e===ge.FA)return _.facility.some(hasBreakfast(!1))?me.B8.BREAKFAST:"";{const k=_.facility.find((_=>_&&_.type===e));return k&&k.content||""}}return""};const ve={[ge.QF]:"roomBed",[ge.K5]:"roomMeal",[ge.FA]:"roomBreakfast"};const hasBreakfast=e=>_=>{const k=[ge.FA];return e&&(k.push(ge.K5),k.push(ge.hR)),!(!_||!k.includes(_.type))};function getPanelFacilityByFilter(e,_){if(e&&e.length){const k=getSaleRoomFacility(_,e[0]);let I=!1;return I=e.every((e=>equalFacility(k,getSaleRoomFacility(_,e)))),I?k:""}return""}const equalFacility=(e,_)=>e instanceof Array&&_ instanceof Array?JSON.stringify(e)===JSON.stringify(_):e===_;function baseRoom_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function baseRoom_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?baseRoom_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):baseRoom_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let ye={low:0,high:-1,max:0,firstLoad:!0,filterValue:0,tags:[],brs:[],crs:[],isLogin:!1,baseRooms:[],compensatedRoom:[],hotelInspireInfo:{},roomListStatus:me.Xy.LOADING,searchedNum:0,experienceMemberReward:{},showChildPolicy:!!Number((0,ie.Z)("children")),stickRoomKey:"",foldedRoomKey:[],bookingStatus:0,firstOrder:[],flag:0,lowestPriceItemBFF:null};function getRoomListStatus(e,_){return function checkNoSaleRooms(e){return e.every((e=>!(e.saleRoom&&e.saleRoom.length>0)))}(e)?0===_?me.Xy.SOLDOUT:me.Xy.NOROOMSFOUND:me.Xy.NORMAL}var be=k(10835);function review_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function review_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?review_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):review_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let _e={hasReview:!1,status:me.ed.LOADING,refreshStatus:me.ed.REFRESH,options:{PageNo:1,PageSize:10,MasterHotelId:0,NeedFilter:!0,UnUsefulPageNo:1,UnUsefulPageSize:5,isHasFold:!1}};var we=k(3279);function importantInfo_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function importantInfo_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?importantInfo_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):importantInfo_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let Ee={importantInfoRes:{}};var Se=k(43491);function newReview_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function newReview_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?newReview_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):newReview_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let Oe={hasReview:!1,status:me.ed.LOADING,staticInfoStatus:me.ed.LOADING,refreshStatus:me.ed.REFRESH,options:{hotelId:0,pageIndex:1,pageSize:10,orderBy:0,commentTagList:[],commentTagV2List:[],travelTypeList:[],roomList:[],packageList:[],commonStatisticList:[],UnusefulReviewPageIndex:1,repeatComment:1,functionOptions:["IntegratedTARating","hidePicAndVideoAgg","TripReviewsToServerOnline"],languageTypeList:[]},allTripCommentsCount:0,noCommentsUserCurrencyAmount:0,commentTagList:[],commentTagV2List:[],travelTypeList:[],roomList:[],packageList:[],commonStatisticList:[],reviewList:[],UnusefulReviewList:[],taReviewList:[],languageTypeList:[]};const Te="UPDATE_QUALITY_COMMENT_TYPE";function qualityComment_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function qualityComment_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?qualityComment_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):qualityComment_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let ke={isQualityComment:!1};var Ie=k(74107);function soldoutInfo_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function soldoutInfo_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?soldoutInfo_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):soldoutInfo_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}var Ce=k(95062);function reducers_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function reducers_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?reducers_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):reducers_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const Pe={currentSrc:null,duration:0,currentTime:0,seekingTime:0,buffered:null,waiting:!1,seeking:!1,paused:!0,autoPaused:!1,ended:!1,muted:!0,volume:1,isFullscreen:!1};var Le=k(73396),Ne=k(20649);const handleChildList=e=>{const{jpChildSearchPolicy:_=[],roomGuest:k={},isFirst:I=!1}=e;let C=function createChildGuests(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{childAges:_=[],childBeds:k=[],childMeals:I=[],childTypes:C=[]}=e;let R=[];return _.forEach(((e,_)=>{let j={age:e,bed:k[_]||0,meal:I[_]||0,type:C[_]||"Adult"};R.push(j)})),R}(k);if(_.map((e=>{const{num:_,childs:I=[]}=function handleCardData(e){let _=0,k=[];const{item:I,roomGuest:C={},childGuests:R=[]}=e,{adults:j}=C;"Adult"==I.guestType?(k=R.filter((e=>e.age>=12))||[],_=j+k.length):(k=R.filter((e=>e.age>=I.minAge&&e.age<=I.maxAge&&e.bed==I.bed&&e.meal==I.meal))||[],_=k.length);return{num:_,childs:k}}({item:e,roomGuest:k,childGuests:C});return e.selectNum=_,e.childs=I,e})),I){return[..._.filter((e=>"Adult"==e.guestType)),..._.filter((e=>"Adult"!=e.guestType))]}return[..._.filter((e=>"Adult"==e.guestType)),..._.filter((e=>"Adult"!=e.guestType&&e.selectNum>0)).sort(compareChild),..._.filter((e=>"Adult"!=e.guestType&&0==e.selectNum))]},compareChild=(e,_)=>e.guestType<_.guestType?1:e.guestType>_.guestType?-1:0;var De=k(55391);var Ae=k(54205);var Re=k(57976);var xe=k(53201);var je=k(36233);var Be=k(30609);var Me=k(53891);var Fe=k(79007);function getCalendarPrice_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function getCalendarPrice_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?getCalendarPrice_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):getCalendarPrice_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let He={calendarPriceRes:[]};var Ke=k(6162);function drawer_reducer_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function drawer_reducer_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?drawer_reducer_ownKeys(Object(k),!0).forEach((function(_){(0,j.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):drawer_reducer_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let Ue={showDrawer:!1,tab:"REVIEW"};let Ze=(0,I.UY)({initData:function initData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;switch(k){case B.w7:return Object.assign({},_objectSpread({},e),_objectSpread({},I));case B.XL:return _objectSpread(_objectSpread({},e),{},{base:_objectSpread(_objectSpread({},e.base),I)});case B.Io:return _objectSpread(_objectSpread({},e),{},{hotelDetailBFF:_objectSpread(_objectSpread({},e.hotelDetailBFF),I)});case B.FS:return Object.assign({},_objectSpread({},e),{naviFixed:I});case B.E4:return Object.assign({},e,{updateHotelList:I});default:return e}},mapInfo:function mapInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,_=arguments.length>1?arguments[1]:void 0,{type:k,payload:I}=_;switch(k){case U.Js:return reducer_objectSpread(reducer_objectSpread({},e),{},{showMap:!e.showMap});case U._z:return reducer_objectSpread(reducer_objectSpread({},e),I);case U.sw:return reducer_objectSpread(reducer_objectSpread({},e),{},{mapPanelDirections:I});default:return e}},nearbyHotel:function nearbyHotel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,_=arguments.length>1?arguments[1]:void 0,{payload:k,type:I}=_;switch(I){case z.j:return nearbyHotel_reducer_objectSpread(nearbyHotel_reducer_objectSpread({},e),k);default:return e}},nearbyPoi:function nearbyPoi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,_=arguments.length>1?arguments[1]:void 0,{payload:k,type:I}=_;switch(I){case G.O:return nearbyPoi_reducer_objectSpread(nearbyPoi_reducer_objectSpread({},e),k);default:return e}},searchBarData:function searchBarData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getInitState(),_=arguments.length>1?arguments[1]:void 0;const{key:k,data:I,type:C}=_;return~pe.indexOf(C)?Object.assign({},e,{[k]:I}):C===ce.Mj?I:e},searchInputKeyword:function searchInputKeyword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{type:_,data:k}=arguments.length>1?arguments[1]:void 0;return _===he.A?k:e},baseRoom:function baseRoom(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:baseRoom_reducer_objectSpread({},ye),_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I={},callback:C}=_;switch(k){case fe.V0:return Object.assign({},e,I,{showAllCrs:!1});case fe.AL:return Object.assign({},e,{firstLoad:I.firstLoad,hotelInspireInfo:I.hotelInspireInfo});case fe.Vf:return Object.assign({},e,{roomListStatus:I});case fe.jv:return Object.assign({},e,{low:I.low,high:I.high,max:I.max});case fe.Yt:{const{context:_,baseRooms:k,compensatedRoom:R}=I||{},{filterValue:j=0}=_||{},B=filterAndSortRooms(j,k,Object.assign({},_,{compensate:!1})),H=filterAndSortRooms(j,R,Object.assign({},_,{compensate:!0}));if(B.brs.length||H.brs.length){let _=B.tags.map(((e,_)=>{var k;return{key:e.key,value:(null==e?void 0:e.value)+((null===(k=H.tags[_])||void 0===k?void 0:k.value)||0)}}));if(e.firstOrder.length>0){const k=mapTgas2Object(_);_=e.firstOrder.map((e=>({key:e,value:k[e]})))}e.tags=_}else e.tags=[];return C&&C(),Object.assign({},e,{filterValue:j,brs:B.brs,crs:H.brs,roomListStatus:getRoomListStatus(B.brs,j)})}case fe.Zx:return Object.assign({},e,{showChildPolicy:I});case fe.hh:return Object.assign({},e,{showAllCrs:I});case fe.S0:return Object.assign({},e,{searchedNum:I});case fe.Q5:return Object.assign({},e,{filterValue:I});case fe.h$:return Object.assign({},e,{experienceMemberReward:I});case fe.sK:return Object.assign({},e,{stickRoomKey:I});case fe.Ju:return Object.assign({},e,{foldedRoomKey:I});case fe.eb:return Object.assign({},e,{roomListStatus:I});case fe.ZS:{let _=I;return _=baseSortTags(_),_=sortTagsByHaveSourse(_),_=sortTagsByQuery(_),Object.assign({},e,{firstOrder:_.map((e=>e.key)),tags:_})}case fe.Tt:return Object.assign({},e,{lowestPriceItemBFF:I});default:return e}},review:function review(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,_=arguments.length>1?arguments[1]:void 0,{type:k,data:I}=_;switch(k){case be.XB:return Object.assign({},e,review_reducer_objectSpread({},I),{status:me.ed.LOADED,refreshStatus:me.ed.LOADED});case be.EP:return Object.assign({},e,{refreshStatus:me.ed.REFRESH});case be.sg:return Object.assign({},e,{refreshStatus:me.ed.LOADED});default:return e}},newReview:function newReview(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,_=arguments.length>1?arguments[1]:void 0,{type:k,data:I}=_;switch(k){case Se.Uo:return Object.assign({},e,newReview_reducer_objectSpread({},I),{status:me.ed.LOADED,refreshStatus:me.ed.LOADED});case Se.V0:return Object.assign({},e,newReview_reducer_objectSpread({},I),{staticInfoStatus:me.ed.LOADED,refreshStatus:me.ed.LOADED});case Se.IZ:return Object.assign({},e,{selectedReviewInfo:I});case Se.S:return Object.assign({},e,{refreshStatus:me.ed.REFRESH});case Se.VI:return Object.assign({},e,{refreshStatus:me.ed.LOADED});default:return e}},qualityComment:function qualityComment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;switch(k){case Te:return qualityComment_reducer_objectSpread(qualityComment_reducer_objectSpread({},e),{},{isQualityComment:I});default:return e}},soldoutInfo:function soldOutInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,{payload:k,type:I}=_;switch(I){case Ie.p:return soldoutInfo_reducer_objectSpread(soldoutInfo_reducer_objectSpread({},e),k);default:return e}},player:function playerReducers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,_=arguments.length>1?arguments[1]:void 0;switch(_.type){case Ce.GS:return reducers_objectSpread(reducers_objectSpread({},e),{},{isFullscreen:!!_.isFullscreen});case Ce.FV:return reducers_objectSpread(reducers_objectSpread({},e),{},{seekingTime:_.time});case Ce.n3:return reducers_objectSpread(reducers_objectSpread({},e),{},{seekingTime:0});case Ce.hL:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{seeking:!0});case Ce.kL:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{seeking:!1});case Ce.it:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{waiting:!1});case Ce.hs:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{waiting:!0});case Ce.NH:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{ended:!1,paused:!1,waiting:!1});case Ce.E7:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{paused:!0});case Ce.uR:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{ended:!0});case Ce.pn:return reducers_objectSpread(reducers_objectSpread(reducers_objectSpread({},e),_.videoProps),{},{error:"UNKNOWN ERROR",ended:!0});case Ce.MH:case Ce.Z$:case Ce._y:case Ce.c3:case Ce.bv:case Ce.sF:return reducers_objectSpread(reducers_objectSpread({},e),_.videoProps);default:return e}},detention:Le.L,childSelectList:function childSelectList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1?arguments[1]:void 0,{payload:k,type:I}=_,C=[];switch(I){case Ne.O:return handleChildList(k);case Ne.E:return C=e.map((e=>(e.guestType==k.select.guestType&&(e=k.select),e))),C;default:return e}},importantInfo:function importantInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,_=arguments.length>1?arguments[1]:void 0;switch(_.type){case we.t:return importantInfo_reducer_objectSpread(importantInfo_reducer_objectSpread({},e),{},{importantInfoRes:_.payload});default:return e}},refreshRooms:function refreshRooms(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;switch(I){case De.W:return k;default:return e}},roomListLoading:function roomListLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;switch(I){case Ae.z:return k;default:return e}},scrollToRoomKey:function scrollToRoomKey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;switch(I){case xe.a:return k;default:return e}},clearAllFilter:function clearAllFilter(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;switch(I){case Be.R:return k;default:return e}},getCalendarPrice:function getCalendarPrice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,_=arguments.length>1?arguments[1]:void 0;switch(_.type){case Fe.n:return getCalendarPrice_reducer_objectSpread(getCalendarPrice_reducer_objectSpread({},e),{},{calendarPriceRes:_.payload});default:return e}},drawer:function drawer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,_=arguments.length>1?arguments[1]:void 0;switch(_.type){case Ke.Z2:return drawer_reducer_objectSpread(drawer_reducer_objectSpread({},e),{},{showDrawer:!0,tab:_.payload});case Ke.FV:return drawer_reducer_objectSpread(drawer_reducer_objectSpread({},e),{},{showDrawer:!1});case Ke.Z:return drawer_reducer_objectSpread(drawer_reducer_objectSpread({},e),{},{tab:_.payload});default:return e}},isShowAllBrs:function isShowAllBrs(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1?arguments[1]:void 0,{payload:k,type:I}=_;switch(I){case Me.G:return k;default:return e}},roomLayer:function roomLayer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;switch(I){case je.p:return k;default:return e}},highPriceRate:function highPriceRate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1?arguments[1]:void 0;const{payload:k,type:I}=_;switch(I){case Re.t:return k;default:return e}}});const Ve={initData:Object.assign({},H,R.default.getByKey("initData")||{}),mapInfo:V,baseRoom:ye,detention:{},refreshRooms:!0,scrollToRoomKey:null,roomListLoading:0,clearAllFilter:!1,roomLayer:{},highPriceRate:!1};const We=(0,C.Z)(Ze,Ve)},53956:function(e,_,k){"use strict";k.d(_,{R:function(){return submitForm}});var I=k(90339),C=k(48368),R=k(54959),j=k(32127),B=k(47419);const submitForm=(e,_,k)=>{var H=document.createElement("form");if(H.id="bookform",H.name="bookform",H.method="POST",e){const _=document.createElement("input");_.type="hidden",_.name="bookData",_.value=JSON.stringify(e),H.appendChild(_)}let U="hasaidinurl=".concat((0,I.ss)());_&&(U="".concat(U,"&curr=").concat(_));const V=(0,j.WH)("scns")?(0,j.WH)("scns"):null;V&&(U="".concat(U,"&scns=").concat(V)),H.action="/hotels/book?".concat(U),k&&(H.target="_blank"),document.body.appendChild(H),H.submit();const G=window.parseInt(B.default.getByKey("qconfigData.detailSubmitRemoveTimer")||500,10);setTimeout((()=>document.body.removeChild(H)),G),(0,R.dC)(C.sP,"book click")}},92585:function(e,_,k){"use strict";k.d(_,{P:function(){return addHover},J:function(){return modifyOrderPage}});var I=k(47419);const addHover=e=>{e.prototype.onMouseOver=function(e,_,k){if(e.stopPropagation(),_){const k=this.$component("ToolTip");var I={content:_,target:e.currentTarget||e.target,triPlacement:"middle",dark:!1,zIndex:999,maxWidth:"480px"};"fixed"===document.body.style.position&&(I.isFixed=!0),k.action("show",I)}this.$safeLog&&k&&this.$safeLog("logDetailpageLayerAction","expand",k,this.props)},e.prototype.onMouseOut=function(e,_){this.$component("ToolTip").action("hide"),this.$safeLog&&_&&this.$safeLog("logDetailpageLayerAction","hide",e,this.props)}},modifyOrderPage=()=>{var e;return"10650045052"===(null===I.default||void 0===I.default||null===(e=I.default.data)||void 0===e?void 0:e.pageId)}},96025:function(e,_,k){"use strict";k.d(_,{tB:function(){return anchorTo},aU:function(){return getPriceInfo}});k(23072);var I=k(74019),C=k(3479),R=k(12992);k(8326);let anchorTo=(e,_)=>{var k,I;let C=document.getElementById(e);if(!C)return;let R=C.offsetTop,j=document.querySelector(".detail-navigation_container"),B=j?j.offsetHeight+16:95;B+=(null===(k=document.querySelector(".detail-search-fixed .list-search-container"))||void 0===k?void 0:k.offsetHeight)||(null===(I=document.querySelector(".list-search-container"))||void 0===I?void 0:I.offsetHeight)+26||0,"ibu-hotel-detail-head"===e&&(B=16),scrollTo({top:R-B,behavior:"smooth"}),_&&_()};const getPriceInfo=e=>{let _="",k=[],j="",B="",H="",U="",V=!1;if(e&&e.length){_=(0,I.zC)(),k=e.filter((e=>e&&e.saleRoom&&e.saleRoom.length));let G=(0,C.Z)(k,"[0].saleRoom[0].money.price",""),q=(0,C.Z)(k,"[0].saleRoom[0].money.priceDelete","");B=(0,C.Z)(k,"[0].saleRoom[0].money.priceNote",""),H=(0,C.Z)(k,"[0].saleRoom[0].money.discountPercent",""),V=3===(0,C.Z)(k,"[0].saleRoom[0].base.buttonType",1);const z=e.reduce(((e,_)=>e.concat(_.saleRoom)),[]);z.length&&z.filter((e=>{let{money:_}=e;return _.priceMask&&-1!==_.priceMask.indexOf("?")})).length===z.length&&(G="",q=""),j=G?j=(0,R.formatCurrency)(_,G,{digit:0,digitTop:2}):"",U=q?(0,R.formatCurrency)(_,q,{digit:0,digitTop:2}):""}return{price:j,priceDelete:U,priceNote:B,discountPercent:H,isNoLogin:V}}},26635:function(e,_,k){!0===k(93258).Z&&Promise.all([k.e(840),k.e(933)]).then((()=>{}).bind(null,k)).catch(k.oe)},77979:function(e,_,k){"use strict";k(47419).default.setByKey("tsData",{logInfo:{},template:{10320668148:{actionType:"load",logKey:"ibu_htl_listpage_load",logDesc:"listpage_load",logValue:{url:"",referrer:"",edm_id:"",oldcheckin:"",oldcheckout:"",newcheckin:"",newcheckout:"",searchparameter:{id:"",type:"",word:"",cityid:"",cityname:"",lat:"",lon:"",coordtype:"",checkin:"",checkout:"",roomnum:"",adult:"",child:"",age:"",filter:{pricefilter:{type:"",min:"",max:"",currency:""},commentscorefilter:{min:""},star:"",includefreebreakfast:"",bookable:"",paytype:"",freecancel:"",instantconfirm:"",facility:[],bed:"",brands:[],staytypes:[],themehotels:[],benefitfilter:{all:"",promotion:"",codes:[]},discounts:[]},locationfilter:{distance:"",commercialareas:[],landmarks:[],trafficpointfilter:{traffictype:"",name:""},metrofilter:{maglev:"",linename:"",stationname:""},districts:[],citys:[]},sortname:""},currency:"",locale:""}}}})},62455:function(e,_,k){"use strict";k.d(_,{M4:function(){return C},Ku:function(){return R},dt:function(){return B},c4:function(){return H}});var I=k(35469);const C={1:"PROMOTION",2:"FLIGHTMEMBERDEAL",3:"NEWVEIL",4:"TRAINMEMBERDEAL",5:"CANCELLATION_GUARANTEE",6:"POINT",7:"SINGAPORE_PROMOTION",8:"TICKETS_MEMBER_DEAL",9:"FERRY_MEMBER_DEAL",10:"TAKE_CARS_MEMBER_DEAL",11:"CARS_MEMBER_DEAL",12:"VACATION_MEMBER_DEAL",13:"VISA_MEMBER_DEAL",14:"CRUISE_SHIP_MEMBER_DEAL",15:"COUPON",20:"DISCOUNTPERCENT",21:"DISCOUNTAMOUNT",16:"EASYCANCEL",17:"MINPRICE",18:"CONDITIONALMINPRICE",19:"MILEAGE",22:"POINTOFORDER"},R=[{NAME:"BUSINESS",TYPE:"business",ICON:"ic_new_shopping",ID:1},{NAME:"AIRPORT",TYPE:"airport",ICON:"flight",ID:2},{NAME:"RAILWAY",TYPE:"station",ICON:"ic_new_bu_train",ID:3},{NAME:"DOWNTOWN",TYPE:"downtown",ICON:"ic_new_landmark",ID:4},{NAME:"SCENIC",TYPE:"scenic",ICON:"ic_new_landmark",ID:5},{NAME:"HOT_SCENIC",TYPE:"hot_scenic",ICON:"ic_new_landmark",ID:6},{NAME:"METRO",TYPE:"metro",ICON:"ic_new_subway",ID:7},{NAME:"HOTEL",TYPE:"hotel",ICON:"ic_new_hotel",ID:8},{NAME:"META",TYPE:"meta",ICON:"ic_new_hotel",ID:9},{NAME:"DINING",TYPE:"dining",ICON:"ic_new_breakfast",ID:10},{NAME:"POPULAR",TYPE:"popular",ICON:"popular",ID:11},{NAME:"SHOPPING",TYPE:"shopping",ICON:"ic_new_shopping",ID:12}],j={BREAKFAST:1,KINGBED:2,TWOBEDS:4,SINGLEBED:8,MULTIBEDS:16,FREECANCEL:32,INSTANTCONFIRM:64,PAYATHOTEL:128,PAYATONLINE:256},B=((0,I.I)("resx.onlinehotelresource.hotel_roomdata_breakfast_include_v2"),(0,I.I)("resx.onlinehotelresource.labeltext_hotel_freecancelation"),(0,I.I)("resx.onlinehotelresource.text_twinbed"),(0,I.I)("resx.onlinehotelresource.text_doublebedsize"),(0,I.I)("key.hotel.filter.single.bed"),(0,I.I)("key.hotel.filter.multiple.beds"),(0,I.I)("resx.onlinehotelresource.hotel_detail_instant_confirmation_v2"),(0,I.I)("resx.onlinehotelresource.text_payathotel"),(0,I.I)("resx.onlinehotelresource.v3_hotel_detail_roomdetail_payment_prepaynow"),{23:"LOGOUTMEMBERDEAL",24:"SILVERMEMBERDEAL",25:"GOLDMEMBERDEAL",26:"PLATINUMMEMBERDEAL",27:"DIAMONDMEMBERDEAL",28:"DIAMOND_GOLD_TRIAL",29:"GOLD_TRIAL_DEAL",30:"DIAMOND_TRIAL_DEAL",31:"EDM_USER_DIAMOND_TRIAL",32:"ACTIVITY_SECTION_MEMBER",33:"PLATINUM_TRIAL_DEAL"}),H={10041:"https://dimg04.tripcdn.com/images/1re4f12000gnnnwl3E9B0.png"}},19765:function(e,_,k){"use strict";var I=k(96156),C=k(22122),R=k(94184),j=k.n(R),B=k(36245),H=k(47419),U=k(68433),V=k(973);const G={CT:"ic_new_map",IntlCity:"ic_new_map",S:"ic_new_landmark",IntlDistrict:"ic_new_landmark",A:"ic_new_bu_flight",T:"ic_new_bu_train",Z:"ic_new_landmark",D:"ic_new_map",LM:"ic_new_landmark",H:"ic_new_group",B:"ic_new_brand",G:"ic_new_group",ML:"ic_new_metroline",MT:"ic_new_subway",P:"ic_new_map",C:"ic_new_map",HOTELFEATURE:"search",N:"search"};var q=k(25155),z=k(44850),J=k(15458),Q=k(39621).default,ee=k(67294);class Hot extends Q{constructor(e){super(e),this.getMaxWidth=()=>{let e=0;this.mainRefs.forEach((_=>{var k;if(null==_||null===(k=_.current)||void 0===k?void 0:k.offsetWidth){const k=Math.floor(_.current.offsetWidth)+2;e=Math.max(e,k)}})),this.setState({maxWidth:e})},this.patchCityId=e=>Object.assign({},e,{_cityId:e.id}),this.setHotStatus=e=>{this.setState({hotActiveIndex:e,historyActiveIndex:-1})},this.setHistoryStatus=e=>{this.setState({historyActiveIndex:e,hotActiveIndex:-1})},this.flatHotData=e=>e.reduce(((e,_)=>e.concat(_.hotDestination)),[]).map((e=>this.patchCityId(e))),this.keydownHistory=e=>{const _=e.keyCode;let{historyActiveIndex:k}=this.state;const{recentData:I,historySelect:C,validate:R}=this.props,j=I.length-1;if(_===V.qO)k>=-1&&k<j?this.setState({historyActiveIndex:++k}):k===j&&this.setState({historyActiveIndex:0});else if(_===V.Tf)k>0&&k<=j?this.setState({historyActiveIndex:--k}):this.setState({historyActiveIndex:j});else if(_===V.ep)if(k<0)R();else{let e=null;k>=0&&k<=j&&(e=I[k],e&&C(e)),this.setState({hotActiveIndex:-1,historyActiveIndex:-1})}},this.hotItemClick=(e,_)=>{e.stopPropagation(),_={code:_._cityId,resultType:"CT",resultWord:_.displayName,city:{geoType:"CITY",geoCode:_._cityId,currentLocaleName:_.displayName},country:{geoType:"COUNTRY",geoCode:_.countryId,currentLocaleName:_.displayName},timeOffset:_.timeOffset},this.props.onSelect(_),this.props.resetTimeOffset(_.timeOffset),this.logUiChangeSearch(_)},this.logUiChangeSearch=e=>{this.$safeLog("logHomePageSearchBoxHotDistrictClick",e)},this.ubtMapping={logHomePageSearchBoxHotDistrictClick:U.bn},this.onScroll=()=>{let e=this.hotRef.current.scrollTop;this.setState({translateY:e,showSticky:e>0});let _=document.getElementsByClassName("area-item"),k=_.length,I=Array.from(_).map((e=>e.offsetTop));const C=(0,q.XG)(this)?"title-new":"title";I.forEach(((k,R)=>{let j=_[R].getElementsByClassName(C)[0];e>=k&&e<I[R+1]&&this.setState({stickyTitle:j.innerHTML})})),e>I[k-1]&&this.setState({stickyTitle:_[k-1].getElementsByClassName(C)[0].innerHTML})},this.state={translateY:0,stickyTitle:"",showSticky:!1,historyActiveIndex:-1,hotActiveIndex:-1,maxWidth:0},this.hotRef=ee.createRef(),this.mainRefs=[]}componentDidMount(){window.addEventListener("keydown",this.keydownHistory),(0,q.XG)(this)&&this.getMaxWidth(),(0,z.observe)()}componentWillUnmount(){window.removeEventListener("keydown",this.keydownHistory)}render(){const{data:e,recentData:_,historySelect:k}=this.props,{showSticky:I,translateY:C,stickyTitle:R,historyActiveIndex:U,hotActiveIndex:V,maxWidth:z}=this.state,Q={channeltype:"online",page:H.default.getByKey("pageId"),locale:H.default.getByKey("cargo.locale")},te=JSON.stringify({ubtKey:"htl_ol_wcl_his_exposure",data:Q}),ne=JSON.stringify({ubtKey:"htl_ol_wcl_popularcity_exposure",data:Q});return ee.createElement("div",{className:j()("hot-city-picker",{"popContainer-b":(0,q.XG)(this)}),onScroll:this.onScroll,ref:this.hotRef},I&&ee.createElement("p",{className:"fix-title",style:{transform:"translateY(".concat(C,"px)")}},R),_.length>0?ee.createElement("div",{className:"area-item","data-exposure":te},ee.createElement("p",{className:"".concat((0,q.XG)(this)?"title-new":"title")},this.$translate("key.hotel.online.homepage.recent.search")),_.map(((e,_)=>{var I,C,R;const j=ee.createRef();this.mainRefs[_]=j;const{calendar:H,roomGuest:V,search:Q}=e,te=null==V?void 0:V.adults,ne=null==V?void 0:V.children,re=this.$translatePlural("key.hotel.online.homepage.searchbox.rooms",V.rooms||1),oe=this.$translatePlural("key.hotel.searchbox.echo.adult",te),ie=ne>0?","+this.$translatePlural("key.hotel.searchbox.echo.child",ne):"",ae=Q&&Q.resultWord,le=Q&&Q.resultType;let{displayTags:se}=Q;se=(null!==(I=se)&&void 0!==I?I:[]).slice(0,3);let ce=(0,J.zZ)(se);return ae?ee.createElement("div",{className:"".concat((0,q.XG)(this)?"recent-search-new":"recent-search","  ").concat(U===_?"active":""),style:(0,q.XG)(this)?z>0?{visibility:"visible"}:{visibility:"hidden"}:{},key:_,onMouseOver:()=>this.setHistoryStatus(_),onMouseOut:()=>this.setHistoryStatus(-1),onClick:()=>k(e)},ee.createElement("div",{className:"main",ref:j,style:(0,q.XG)(this)?{width:z>0?z+"px":"auto"}:{}},ee.createElement(B.Z,{type:(0,q.XG)(this)?"a-recentsearch2x":null!==(C=G[le])&&void 0!==C?C:"ic_new_map",className:"history"}),!(0,q.tQ)(this)&&ee.createElement("h4",null,ae,ce),(0,q.tQ)(this)&&ee.createElement("div",{className:"result-word"},ee.createElement("div",{className:"result-word-text"},ee.createElement("h4",null,ae)),ee.createElement("div",{className:"result-word-label"},null===(R=se)||void 0===R?void 0:R.map((e=>ee.createElement("span",{className:"multiFilter-items"},e)))))),(0,q.XG)(this)?ee.createElement("p",{className:"minNoise-other"},ee.createElement("span",null,this.$localeDate("mdShortString",H.checkIn),"-",this.$localeDate("mdShortString",H.checkOut)),ee.createElement("span",{className:"desc-split"},"|"),ee.createElement("span",null,re,",",oe+ie)):ee.createElement("p",{className:"minNoise-other"},this.$localeDate("mdShortString",H.checkIn),"-",this.$localeDate("mdShortString",H.checkOut),",",re,",",oe+ie)):null}))):null,(0,q.XG)(this)&&(null==e?void 0:e.length)>0&&(null==_?void 0:_.length)>0&&ee.createElement("div",{className:"split-line"}),(null==e?void 0:e.length)>0&&ee.createElement("div",{"data-exposure":ne},(e||[]).map(((_,k)=>{const{groupName:I,hotDestination:C}=_;return ee.createElement("div",{className:"area-item",key:k},ee.createElement("p",{className:"".concat((0,q.XG)(this)?"title-new":"title")},I),ee.createElement("ul",null,C.map(((_,I)=>{const C=this.patchCityId(_),R=this.flatHotData(e.slice(0,k)).length+I;return ee.createElement("li",{key:I,className:j()("",{active:R===V,"item-b":(0,q.XG)(this),"active-b":(0,q.XG)(this)&&R===V}),onMouseEnter:()=>this.setHotStatus(R),onMouseOut:()=>this.setHotStatus(-1),onClick:e=>this.hotItemClick(e,C)},ee.createElement("span",{className:j()("display-name",{"display-name-b":(0,q.XG)(this)}),onMouseEnter:()=>this.setHotStatus(R)},_.displayName))}))))}))))}}var te=k(7992),ne=k(78320),re=k(76427),oe=k.n(re),ie=k(83465),ae=k.n(ie),le=k(67294);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function item_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function AssociateItem(e){const{onClick:_,onMouseEnter:k,_active:I,_isCustomer:C,_customerTitle:R,pos:H,controlBitMap:U,order:V}=e;let{resultWord:z="",newContent:J="",content:Q="",metroLine:ee=[],distanceInfo:re="",resultType:ie="",highLightWords:se=[],subEntityList:ce=[],bestMatchedWord:ue="",explainability:de,displayTags:pe=[]}=e;const he=(null!=pe?pe:[]).slice(0,3),fe=oe()(ae()(e),["order","onMouseEnter","onClick","subEntityList"]);Q=ie!=ne.Ol.N?J:"";let me="";if(se&&se.sort(((e,_)=>_.length-e.length)).forEach(((e,_)=>{e=e.replace(/([{}()（）*$+.|?])/gi,"\\$1"),me+="".concat(e).concat(_===se.length-1?"":"|")})),me)try{const e=new RegExp("(".concat(me,")"),"gi");z=z.replace(e,"<strong>$1</strong>"),e.test(z)||(Q=Q.replace(e,"<strong>$1</strong>"),re=re.replace(e,"<strong>$1</strong>"))}catch(_){(0,te.fU)({logType:"searchbox_token_parse_error",logKey:"searchbox_token_parse_error",logDesc:"searchbox_token_parse_error",actionType:"onchange",logValue:{error:_,dataInfo:e,highLightWords:se}})}const ge=1==(1&U),ve=j()("associative-item",{hover:I,"title-item":C,["title-".concat(H)]:H,secondary:ge,"combined-associative":(null==ce?void 0:ce.length)>0}),ye=Q||re?{}:{alignItems:"center"},be=V;return le.createElement("div",{id:be,className:ve,onClick:e=>{e.stopPropagation(),_()},onMouseEnter:k},C?le.createElement("p",{className:"title"},R):le.createElement(le.Fragment,null,le.createElement("div",{className:"left-part",style:ye},le.createElement(B.Z,{type:G[ie],className:"search-type"}),le.createElement("div",null,!(0,q.tQ)(this)&&le.createElement("p",{className:"content base"},le.createElement("span",{dangerouslySetInnerHTML:{__html:z}}),(0,q.qN)(this)&&(e=>{let _="";return(null==e?void 0:e.length)>0&&(_=e.map((e=>{const _=null!=e?e:"";return""!==_?le.createElement(le.Fragment,null,le.createElement("span",null," • "),le.createElement("span",{style:{color:"#3264ff"}},_)):""}))),le.createElement(le.Fragment,null,_)})(he)),(0,q.tQ)(this)&&le.createElement("div",{className:"content base result-word"},le.createElement("div",{className:"result-word-text"},le.createElement("p",{dangerouslySetInnerHTML:{__html:z}})),le.createElement("div",{className:"result-word-label"},null==he?void 0:he.map((e=>le.createElement("span",{className:"multiFilter-items"},null!=e?e:""))))),ue&&le.createElement("p",{className:"content geo dist"},le.createElement("span",{dangerouslySetInnerHTML:{__html:ue}})),re&&le.createElement("p",{className:"content geo dist"},le.createElement("span",{dangerouslySetInnerHTML:{__html:re}})),de&&"H"===ie&&le.createElement("p",{className:"content geo"},le.createElement("strong",null,le.createElement("span",{dangerouslySetInnerHTML:{__html:de}}))),Q&&le.createElement("p",{className:"content geo"},le.createElement("span",{dangerouslySetInnerHTML:{__html:Q}})),(null==ee?void 0:ee.length)>0&&le.createElement("div",{className:"content metro-line"},ee.map((e=>le.createElement("span",{key:e.id,style:{background:e.color},className:"metro-line-item"},e.name)))))),(null==ce?void 0:ce.length)?le.createElement("div",{className:"combined-dest-wrap"},ce.slice(0,6).map((e=>le.createElement("span",{className:"combined-dest-sub-item",onClick:k=>{k.stopPropagation(),_(item_objectSpread(item_objectSpread({},fe),{},{resultWord:fe.resultWord+"-"+e.currentLocaleName,item:e.item}))}},e.currentLocaleName)))):null))}var se=k(39621),ce=k(67294);class view_View extends se.default{constructor(e){super(e)}UNSAFE_componentWillMount(){this.onInit()}onThrowError(e,_){}onGetImage(){return ce.createElement("div",{className:"m-placeholder_img"})}onLoad(){const{loadElement:e}=this.state;if(/^http*?:\/\/*/.test(e)){const _=new Image;_.src=e,_.onload=()=>{this.setState({ready:!0})}}}onGetPlaceholderByType(e){switch(e){case"rect":return this.onGetRect();case"text":return this.onGetText();case"img":return this.onGetImage();case"card":return this.onGetCard();case"list":return this.onGetList();case"grid":return this.onGetGrid()}}onGetItem(e,_){switch(e.type){case"rect":return this.onGetRect(e.width,e.height,_,e.style);case"card":return this.onGetCard(e.width,e.height,_);case"grid":return this.onGetGrid(e.width,e.height,_,e.grid,e.style)}}render(){const{type:e,width:_,height:k,containerStyle:I,showComponent:C}=this.state,{ready:R}=this.props,j=this.props.children,B=ce.createElement("div",{className:"m-placeholder",style:Object.assign({},I,{width:_,height:k})},this.onGetPlaceholderByType(e));return ce.createElement("div",{className:"m-placeholder_container"},C?R||0?j:B:null)}}var ue=k(67294);function placeholder_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function placeholder_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?placeholder_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):placeholder_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class Placeholder extends view_View{constructor(e){super(e),this.options={showComponent:!1,loadElement:e.load||null,type:e.type||"rect",itemType:e.itemType||"rect",color:e.color||"#f0f2f5",animation:e.animation||"breathe",bg:e.bg||"#fff",adapt:e.adapt,width:e.width||"100%",height:e.height||"100%",lines:[void 0,null].includes(e.lines)?3:e.lines,rows:e.rows||1,space:[void 0,null,0].includes(e.space)?e.space:5,textSpace:e.textSpace||5,adaptWidth:e.adaptWidth,complexList:e.complexList||[],image:e.image||"//pic.tripcdn.com/common_v2/nophoto.png",columns:e.columns||1,itemHeight:e.itemHeight||10,containerStyle:e.containerStyle||{},grid:e.grid||[],gridDirection:e.gridDirection||"row",borderRadius:e.borderRadius||0},this.state=this.options,this.onInit=this.onInit.bind(this),this.onLoad=this.onLoad.bind(this),this.onThrowError=this.onThrowError.bind(this),this.onGetPlaceholderByType=this.onGetPlaceholderByType.bind(this),this.onGetArea=this.onGetArea.bind(this),this.onGetList=this.onGetList.bind(this),this.onGetRect=this.onGetRect.bind(this),this.onGetCircle=this.onGetCircle.bind(this),this.onGetImage=this.onGetImage.bind(this),this.onGetGrid=this.onGetGrid.bind(this),this.onGetText=this.onGetText.bind(this),this.onGetCard=this.onGetCard.bind(this),this.onGetLine=this.onGetLine.bind(this),this.onGetItem=this.onGetItem.bind(this)}onInit(){const{lines:e,columns:_,space:k,itemHeight:I,adaptWidth:C}=this.options;"number"!=typeof e&&this.onThrowError("lines","number");const R=this.onGetArea();this.props.adapt&&this.props.adapt.forEach((e=>{(1===e.section.length&&C>e.section[0]||2===e.section.length&&e.section[0]<=C&&e.section[1]>C)&&(this.options=placeholder_objectSpread(placeholder_objectSpread({},this.options),e.props))})),0===e&&(this.options.lines=Math.floor((R.hv-2*k)/_/(I+2*k))),this.options.showComponent=!0,this.setState(placeholder_objectSpread({},this.options))}onGetArea(){const{width:e,height:_}=this.state,k=/\%|px/gi;let I,C,R,j;return k.test(e)?(I=Number(e.replace(k,"")),C=e.match(k)):I=e,!C&&(C="px"),k.test(_)?(R=Number(_.replace(k,"")),j=_.match(k)):R=_,!j&&(j="px"),{w:e,h:_,wn:C,hn:j,wv:I,hv:R}}onGetLine(e){const{color:_,itemHeight:k,space:I,animation:C}=this.state;return ue.createElement("div",{key:e,className:"m-placeholder_line ".concat(C),style:{backgroundColor:_,width:100*(.5*Math.random()+.5)+"%",height:k,margin:"".concat(I/2,"px 0")}})}onGetText(){const e=this.onGetArea(),{bg:_,lines:k,itemHeight:I,space:C,color:R}=this.state;return ue.createElement("div",{className:"m-placeholder_text",style:{backgroundColor:_}},Array("auto"!==k?k:Math.floor(e.hv/(I+2*C))).fill().map(((_,j)=>ue.createElement("div",{className:"m-placeholder_line",key:j,style:{backgroundColor:R,height:I,width:(e.wv-k*C*2)/k+e.wn,margin:C}}))))}onGetCard(e,_,k){if(!arguments.length){const k=this.onGetArea();e=k.w,_=k.h}const{bg:I,space:C,lines:R}=this.state,j=this.props.leftWidth||50;return ue.createElement("div",{className:"m-placeholder_card",key:k,style:{backgroundColor:I,width:e,height:_}},ue.createElement("div",{className:"m-placeholder_cardLeft",style:{width:j+2*C}},this.onGetRect("100%","100%",0)),ue.createElement("div",{className:"m-placeholder_cardRight",style:{width:"calc(100% - ".concat(j+2*C,"px)"),padding:"".concat(C/2,"px 0")}},Array(R).fill().map(((e,_)=>this.onGetLine(_)))))}onGetRect(e,_,k,I){const{space:C,animation:R,color:j,borderRadius:B}=this.state;if(!arguments.length){const k=this.onGetArea();e=k.w,_=k.h,I={}}return ue.createElement("div",{className:"m-placeholder_rect_container",key:k,style:{padding:C}},ue.createElement("div",{className:"m-placeholder_rect ".concat(R),style:placeholder_objectSpread({width:e,height:_,backgroundColor:j,borderRadius:"".concat(B,"px")},I)}))}onGetCircle(){return ue.createElement("div",{className:"m-placeholder_circle",style:{width:area.w,height:area.h}})}onGetGrid(e,_,k,I,C){const{gridDirection:R,grid:j,color:B,space:H,animation:U}=this.state;if(arguments.length)arguments.length<=3&&(I=j,C={}),!e&&(e="100%"),!_&&(_="100%");else{const k=this.onGetArea();e=k.w,_=k.h,I=j,C={}}return"[object Array]"!==Object.prototype.toString.call(I)&&this.onThrowError("grid","Array"),ue.createElement("div",{key:k,className:"m-placeholder_grid",style:Object.assign({width:e,height:_,flexDirection:R},C)},I.map(((e,_)=>ue.createElement("div",{key:_,className:"m-placeholder_gridItem_container",style:{flex:e,padding:H}},ue.createElement("div",{className:"m-placeholder_gridItem ".concat(U),style:{backgroundColor:B}})))))}onGetList(){const e=this.onGetArea(),{rows:_,columns:k,space:I,itemType:C,complexList:R}=this.state;return ue.createElement("div",{className:"m-placeholder_list"},Array(k).fill().map(((j,B)=>ue.createElement("div",{className:"m-placeholder_row",key:B,style:{height:(e.hv-2*I)/k+e.hn}},Array(_).fill().map(((I,j)=>{const H=e.wv/_+e.wn,U="100%";switch(C){case"rect":return this.onGetRect(H,U,"".concat(B).concat(j),{});case"card":return this.onGetCard(H,U,"".concat(B).concat(j));case"grid":return this.onGetGrid(H,U,"".concat(B).concat(j),this.state.grid,{});case"complex":return"[object Array]"!==Object.prototype.toString.call(R)&&this.onThrowError("complexList","array"),_*k!==R.length&&new Error("The length of parametor complexList must be product of columns and rows"),this.onGetItem(this.state.complexList[B*_+j],"".concat(B).concat(j))}}))))))}}var de=k(36652);const searchDisableLoadAnimation=()=>{const e=(H.default.getByKey("qconfigData.searchDisableLoadAnimation")||[]).map((e=>e.toLowerCase())),_=(H.default.getByKey("pageName")||"").toLowerCase();return!e.includes(_)};var pe=k(54891),he=k(67294),fe=k.n(he),me=k(67294);function topDestination_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function topDestination_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?topDestination_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):topDestination_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const ge={CITY:"CT",COUNTRY:"C",DISTRICT:"D",AIRPORT:"A",TRAINSTATION:"T",ZONE:"Z",MARKLAND:"LM",METROSTATION:"MT",PROVINCE:"P",POI:"LM"},topDestination=e=>{let{data:_,onItemClick:k,onMouseEnter:I}=e;const{$translate:C}=(0,he.useContext)(pe.P);return me.createElement("div",{className:"drop-result-list-v8-topdestination",onMouseEnter:I},me.createElement("div",{className:"drop-result-list-v8-topdestination_title"},me.createElement(B.Z,{type:G[null==_?void 0:_.resultType],className:"drop-result-list-v8-topdestination_title_icon"}),me.createElement("div",{className:"drop-result-list-v8-topdestination_title_txt",dangerouslySetInnerHTML:{__html:(()=>{let{resultWord:e="",highLightWords:k=[]}=_,I="";if((null==k?void 0:k.length)&&k.sort(((e,_)=>_.length-e.length)).forEach(((e,_)=>{e=e.replace(/([{}()（）*$+.|?])/gi,"\\$1"),I+="".concat(e).concat(_===k.length-1?"":"|")})),I)try{const _=new RegExp("(".concat(I,")"),"gi");e=e.replace(_,"<strong>$1</strong>")}catch(e){}return C("key.hotel.association.hot_destination",e)})()}})),me.createElement("div",{className:"drop-result-list-v8-topdestination_content"},_.topDestinationList.map(((e,I)=>me.createElement("div",{onClick:C=>((e,I,C)=>{e.stopPropagation();const R=topDestination_objectSpread(topDestination_objectSpread({},_),{},{code:I.geoCode?"".concat(I.geoCode):_.code,city:"CITY"===I.geoType?I:_.city,resultWord:I.currentLocaleName||_.resultWord,resultType:ge[I.geoType]||_.resultType,item:(null==I?void 0:I.item)||_.item,coordinateInfos:(null==I?void 0:I.coordinateInfos)||_.coordinateInfos,topDestination:I});k(R,C)})(C,e,I),key:"".concat(I,"_").concat(e.geoCode),className:"drop-result-list-v8-topdestination_content_item"},e.currentLocaleName)))))};var ve=k(39621).default,ye=k(67294);class associative_view_View extends ve{constructor(e){super(e),this.renderNoResultDom=e=>((0,te.i4)(de.UBT_TYPE.EXPOSURE,"htl_ol_wcl_assoc_noresult_exposure",{channeltype:"online",keyword:e,page:H.default.getByKey("pageId")||"",locale:H.default.getByKey("cargo.locale")||""}),ye.createElement("p",{className:"not_found"},this.$translate("key.hotel.online.homepage.recent.search.no.result",e))),this.renderHtml=()=>{const{data:e,keyword:_,visible:k,belongTo:I}=this.props,{hightLightIndex:R}=this.state;let j=e.some((e=>2===e.resultsType));return k&&("DESTINATION"===I&&document.getElementById("dropList")&&document.getElementById("dropList").addEventListener("scroll",this.handleScroll.bind(this,e)),"KEYWORD"===I&&document.getElementById("dropList")&&document.getElementById("dropList").addEventListener("scroll",this.handleScroll.bind(this,e))),e.length>0?ye.createElement(ye.Fragment,null,e.map(((e,_)=>{var k;const{_isCustomer:I}=e;e._active=_===R;const j=I?e=>e:()=>this.onMouseEnter(_),B=I?e=>e:k=>this.onClick(k||e,_),H="C"===(null==e?void 0:e.resultType)&&1===(null==e?void 0:e.clickable)||"C"!==(null==e?void 0:e.resultType);return 0===_&&(null==e||null===(k=e.topDestinationList)||void 0===k?void 0:k.length)?ye.createElement(ye.Fragment,{key:_},H&&ye.createElement(AssociateItem,(0,C.Z)({onClick:B,onMouseEnter:j},e,{key:_,order:e.code})),ye.createElement(topDestination,{data:e,onItemClick:I?e=>e:(e,_)=>this.onClick(e,_),onMouseEnter:I?e=>e:()=>this.onMouseEnter(-1)})):ye.createElement(AssociateItem,(0,C.Z)({onClick:B,onMouseEnter:j},e,{key:_,order:e.code}))})),j&&ye.createElement("div",{className:"google"},ye.createElement("div",{className:"m-img"}))):this.renderNoResultDom(_)},this.noneResponseMapping=e=>{const{keywordType:_,traceLogID:k,requestId:I,startTime:C}=this.props;if("DESTINATION"===e){var R,j,B,U;let e={};e.page=null===H.default||void 0===H.default||null===(R=H.default.data)||void 0===R?void 0:R.pageId,e.channeltype="online",e.locale=null===H.default||void 0===H.default||null===(j=H.default.data)||void 0===j||null===(B=j.cargo)||void 0===B?void 0:B.locale,e.result_category="non_res",e.destination_input=null===(U=this.props)||void 0===U?void 0:U.keyword,e.traceLogID=k||"",e.htl_customtraceid=I,e.pageloadtime=Date.now()-(null!=C?C:0),this.destinationRecommendation(e)}if("KEYWORD"===e){var V,G,q,z;let e={};e.page=null===H.default||void 0===H.default||null===(V=H.default.data)||void 0===V?void 0:V.pageId,e.channeltype="online",e.keywords_input=null===(G=this.props)||void 0===G?void 0:G.keyword,e.locale=null===H.default||void 0===H.default||null===(q=H.default.data)||void 0===q||null===(z=q.cargo)||void 0===z?void 0:z.locale,e.keyword_input_type=_||null,e.traceLogID=k||"",this.keywordsRecommendation(e)}},this.recommendationMapping=e=>{const{safeLogList:_,data:k,belongTo:I,othercityList:C,localcityList:R,keywordType:j,traceLogID:B="",requestId:U,startTime:V}=this.props;if("DESTINATION"===I){let I={};k.forEach(((C,R)=>{var j;if((null===(j=e.target)||void 0===j?void 0:j.id)==C.code){var G,q,z,J,Q,ee,te;let e={id:null==C?void 0:C.code,name:null==C?void 0:C.resultWord,type:null==C?void 0:C.displayType,rank:R+1,data_source:null==C?void 0:C.dataSource,WordTypeId:null==C||null===(G=C.item)||void 0===G||null===(q=G.data)||void 0===q?void 0:q.wordTypeId};_.push(e),I.page=null===H.default||void 0===H.default||null===(z=H.default.data)||void 0===z?void 0:z.pageId,I.channeltype="online",I.locale=null===H.default||void 0===H.default||null===(J=H.default.data)||void 0===J||null===(Q=J.cargo)||void 0===Q?void 0:Q.locale,I.result_category=k.length>0?"has_res":"non_res",I.result_show=e,I.destination_input=null===(ee=this.props)||void 0===ee?void 0:ee.keyword,I.show_allnum=null==k?void 0:k.length,I.traceLogID=B,I.htl_customtraceid=U,I.pageloadtime=Date.now()-(null!=V?V:0),this.destinationRecommendation(I),this.newKeywordSearchResultExposure({destination_input:null===(te=this.props)||void 0===te?void 0:te.keyword,association_token:null==C?void 0:C.code,association_tracelogid:B,sourcetype:"destination",rank:R+1,pageloadtime:Date.now()-(null!=V?V:0),htl_customtraceid:U})}}))}if("KEYWORD"===I){let _={};k.forEach(((I,G)=>{var q;if(Object.prototype.hasOwnProperty.call(I,"code")&&(null===(q=e.target)||void 0===q?void 0:q.id)==I.code){var z,J,Q,ee,te,ne,re,oe,ie,ae;let e={id:null==I?void 0:I.code,name:null==I?void 0:I.resultWord,type:null==I?void 0:I.displayType,rank:G+1,data_source:null==I?void 0:I.dataSource,WordTypeId:null==I||null===(z=I.item)||void 0===z||null===(J=z.data)||void 0===J?void 0:J.wordTypeId};(null==I?void 0:I.isSameGeo)&&"T"==(null==I?void 0:I.isSameGeo)?R.push(e):C.push(e),_.page=null===H.default||void 0===H.default||null===(Q=H.default.data)||void 0===Q?void 0:Q.pageId,_.channeltype="online",_.result_show=R,_.othercityResult_show=C,_.regionid=(null==I||null===(ee=I.city)||void 0===ee?void 0:ee.geoCode)||(null==I||null===(te=I.province)||void 0===te?void 0:te.geoCode)||(null==I||null===(ne=I.country)||void 0===ne?void 0:ne.geoCode),_.regiontype=null==I?void 0:I.cityType,_.keywords_input=null===(re=this.props)||void 0===re?void 0:re.keyword,_.keyword_input_type=j,_.result_category=R.length>0?"has_res":"non_res",_.result_othercity_category=C.length>0?"has_res":"non_res",_.show_allnum=null==k?void 0:k.length,_.locale=null===H.default||void 0===H.default||null===(oe=H.default.data)||void 0===oe||null===(ie=oe.cargo)||void 0===ie?void 0:ie.locale,_.traceLogID=B,this.keywordsRecommendation(_),this.newKeywordSearchResultExposure({destination_input:null===(ae=this.props)||void 0===ae?void 0:ae.keyword,association_token:null==I?void 0:I.code,association_tracelogid:B,sourcetype:"keyword",rank:G+1,pageloadtime:Date.now()-(null!=V?V:0),htl_customtraceid:U})}}))}},this.handleScroll=e=>{var _;if(null===(_=window)||void 0===_?void 0:_.IntersectionObserver){var k=this.factoryInstance();e.forEach((e=>{0==this.dataMap.get(e.code)&&document.getElementById(e.code)&&k.observe(document.getElementById(e.code)),1==this.dataMap.get(e.code)&&document.getElementById(e.code)&&k.unobserve(document.getElementById(e.code))}))}},this.dataMap=new Map,this.needLoadAnimation=searchDisableLoadAnimation()}factoryInstance(){if(!e)var e=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>.3&&0==this.dataMap.get(e.target.id)&&(this.dataMap.set(e.target.id,!0),this.recommendationMapping(e))}))}),{threshold:[.3]});return e}render(){const{visible:e,loading:_,direction:k,data:I}=this.props;return this.dataMap.size<1&&I.length&&I.forEach((e=>{this.dataMap.set(e.code,!1)})),ye.createElement("div",{id:"dropList",className:"drop-result-list-v8",ref:this.dropRef,style:Object.assign({left:{left:-1},right:{right:-1}}[k],{display:e?"block":"none"})},this.needLoadAnimation&&_?ye.createElement(ye.Fragment,null,new Array(5).fill("").map(((e,_)=>ye.createElement(Placeholder,{key:_,type:"grid",grid:[1,9],width:"100%",height:35,space:5})))):this.renderHtml())}}var be=k(45697),_e=k.n(be),we=k(67294);function associative_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function associative_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?associative_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):associative_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class Associative extends associative_view_View{constructor(e){var _;super(e),_=this,this.nextHight=(e,_)=>{let k=_===e.length-1?0:_+1;for(let _=k;_<e.length;_++)if(!e[_]._customerTitle){k=_;break}return k},this.preHight=(e,_)=>{const k=e.length-1;let I=0===_?k:_-1;for(let _=I;_>=0;_--){if(!e[_]._customerTitle){I=_;break}0===_&&(_=e.length)}return I},this.keydown=e=>{const{data:_}=this.props;if(_.length){const k=e.keyCode,I=this.dropRef.current,C=_.length-1;let{hightLightIndex:R}=this.state;if(k===V.qO)R===C?I.scrollTo(0,0):R<C&&this.getActivePos(1),this.setState({hightLightIndex:this.nextHight(_,R)});else if(k===V.Tf){const e=this.preHight(_,R);e===C?I.scrollTo(0,999):R<C&&this.getActivePos(-1),this.setState({hightLightIndex:e})}else if(k===V.ep){const e=_[R];e&&this.onClick(e,R,"keyenter")}}},this.getActivePos=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const k=document.getElementsByClassName("hover")[0].offsetTop;if(k>240){const{current:k,current:{scrollTop:I}}=_.dropRef;k.scrollTo(0,I+60*e)}},this.onClick=(e,_,k)=>{const I=Object.assign({},e,{_cityId:e.city.geoCode});this.props.onSelect(I),this.props.resetTimeOffset(e.timeOffset),this.logUiChangeSearch(e),this.clickMapping(e,_,k)},this.clickMapping=(e,_,k)=>{const{belongTo:I,requestId:C,startTime:R}=this.props;if("DESTINATION"===I){var j,B,U,V,G,q,z,J,Q,ee,te,ne;let I={};I.page=null===H.default||void 0===H.default||null===(j=H.default.data)||void 0===j?void 0:j.pageId,I.channeltype="online",I.destination_input=null===(B=this.props)||void 0===B?void 0:B.keyword,I.destination=null==e?void 0:e.resultWord,I.type=null==e?void 0:e.displayType,I.WordTypeId=null==e||null===(U=e.item)||void 0===U||null===(V=U.data)||void 0===V?void 0:V.wordTypeId,I.regionid=(null==e||null===(G=e.city)||void 0===G?void 0:G.geoCode)||(null==e||null===(q=e.province)||void 0===q?void 0:q.geoCode)||(null==e||null===(z=e.country)||void 0===z?void 0:z.geoCode),I.id=null==e?void 0:e.code,I.regiontype=null==e?void 0:e.cityType,I.rank_dst=_,I.data_source=null==e?void 0:e.dataSource,I.locale=null===H.default||void 0===H.default||null===(J=H.default.data)||void 0===J||null===(Q=J.cargo)||void 0===Q?void 0:Q.locale,I.traceLogID=null===(ee=this.props)||void 0===ee?void 0:ee.traceLogID,I.destination_type="keyenter"===k?"searchbuttonclick":"",this.destinationClick(I),this.newKeywordSearchResultClick({destination_input:null===(te=this.props)||void 0===te?void 0:te.keyword,association_token:null==e?void 0:e.code,association_tracelogid:null===(ne=this.props)||void 0===ne?void 0:ne.traceLogID,sourcetype:"destination",rank:_+1,pageloadtime:Date.now()-(null!=R?R:0),htl_customtraceid:C,keyword_source:"searchrecomdclick"})}if("KEYWORD"===I){var re,oe,ie,ae,le,se,ce,ue,de,pe,he,fe;let k={};k.page=null===H.default||void 0===H.default||null===(re=H.default.data)||void 0===re?void 0:re.pageId,k.channeltype="online",k.keyword_input=null===(oe=this.props)||void 0===oe?void 0:oe.keyword,k.keyword=null==e?void 0:e.resultWord,k.id=null==e?void 0:e.code,k.type=null==e?void 0:e.displayType,k.WordTypeId=null==e||null===(ie=e.item)||void 0===ie||null===(ae=ie.data)||void 0===ae?void 0:ae.wordTypeId,k.regionid=(null==e||null===(le=e.city)||void 0===le?void 0:le.geoCode)||(null==e||null===(se=e.province)||void 0===se?void 0:se.geoCode)||(null==e||null===(ce=e.country)||void 0===ce?void 0:ce.geoCode),k.regiontype=null==e?void 0:e.cityType,k.rank_total=_,k.data_source=null==e?void 0:e.dataSource,k.ismatch="T"==(null==e?void 0:e.isSameGeo)?"has_res":"non_res",k.ismatch_othercity="F"==(null==e?void 0:e.isSameGeo)?"has_res":"non_res",k.locale=null===H.default||void 0===H.default||null===(ue=H.default.data)||void 0===ue||null===(de=ue.cargo)||void 0===de?void 0:de.locale,k.traceLogID=null===(pe=this.props)||void 0===pe?void 0:pe.traceLogID,this.keywordsonClick(k),this.newKeywordSearchResultClick({destination_input:null===(he=this.props)||void 0===he?void 0:he.keyword,association_token:null==e?void 0:e.code,association_tracelogid:null===(fe=this.props)||void 0===fe?void 0:fe.traceLogID,sourcetype:"keyword",rank:_+1,pageloadtime:Date.now()-(null!=R?R:0),htl_customtraceid:C,keyword_source:"searchrecomdclick"})}},this.ubtMapping={logSearchBoxUserChoice:U.ZO,searchDataLogDestinationClick:U.x7,searchDataLogDestinationRecommendation:U.xA,searchDataLogKeywordsRecommendation:U.x3,searchDataLogKeywordsClick:U.Rm},this.logUiChangeSearch=e=>{this.$safeLog("logSearchBoxUserChoice",e)},this.destinationClick=e=>{this.$safeLog("searchDataLogDestinationClick",e)},this.destinationRecommendation=e=>{this.$safeLog("searchDataLogDestinationRecommendation",e)},this.keywordsRecommendation=e=>{this.$safeLog("searchDataLogKeywordsRecommendation",e)},this.keywordsonClick=e=>{this.$safeLog("searchDataLogKeywordsClick",e)},this.newKeywordSearchResultExposure=e=>{var _,k,I;(0,te.i4)(de.UBT_TYPE.EXPOSURE,"htl_ol_wcl_assoc_card_exposure",associative_objectSpread({channeltype:"online",locale:null===H.default||void 0===H.default||null===(_=H.default.data)||void 0===_||null===(k=_.cargo)||void 0===k?void 0:k.locale,page:null===H.default||void 0===H.default||null===(I=H.default.data)||void 0===I?void 0:I.pageId},e))},this.newKeywordSearchResultClick=e=>{var _,k,I;(0,te.i4)(de.UBT_TYPE.TRACE,"htl_ol_wcl_assoc_card_click",associative_objectSpread({channeltype:"online",locale:null===H.default||void 0===H.default||null===(_=H.default.data)||void 0===_||null===(k=_.cargo)||void 0===k?void 0:k.locale,page:null===H.default||void 0===H.default||null===(I=H.default.data)||void 0===I?void 0:I.pageId},e))},this.onMouseEnter=e=>{this.setState({hightLightIndex:e})},this.state={hightLightIndex:0},this.dropRef=we.createRef()}componentDidMount(){const{visible:e=!1}=this.props;e||this.dataMap.clear(),window.addEventListener("keydown",this.keydown)}componentDidUpdate(){const{visible:e=!1}=this.props;e||this.dataMap.clear()}componentWillUnmount(){window.removeEventListener("keydown",this.keydown)}UNSAFE_componentWillReceiveProps(e){"single"===this.props.mode?e.keyword!==this.props.keyword&&this.setState({hightLightIndex:0}):e.data!==this.props.data&&this.setState({hightLightIndex:this.nextHight(e.data,0)})}}Associative.defaultProps={hightLightIndex:0,mode:"single",keyword:"",data:[],loading:!0,visible:!1,direction:"left",resetTimeOffset:()=>{},safeLogList:[],othercityList:[],localcityList:[],belongTo:"",destination:{}},Associative.propTypes={mode:_e().string,keyword:_e().string,data:_e().array,loading:_e().bool,visible:_e().bool,direction:_e().string,resetTimeOffset:_e().func,safeLogList:_e().array,othercityList:_e().array,localcityList:_e().array,destination:_e().object,belongTo:_e().string};var Ee=k(86145);const Se="associate";var Oe=k(39621).default,Te=k(67294);class destination_view_View extends Oe{constructor(e){super(e)}render(){var e=this;const{desVisible:_,assoVisible:k,searchData:I,desData:C,error:R,recentData:B,loadingFlag:U,inputValue:V,belongTo:G,safeLogList:z,traceLogID:Q,requestId:ee,startTime:te,assoValue:ne,versionBValue:re,isFocused:oe,showChangeTip:ie,resultMultiFilterText:ae}=this.state,{resetTimeOffset:le}=this.props,se=this.getIsShow()&&V!==re&&""!==re,ce=(0,J.KG)(H.default.getByKey("cargo.locale")),ue=(0,q.XG)(this),de=""!==V&&((0,q.tQ)(this)||(0,q.qN)(this))?V+ae:V;return Te.createElement("div",{className:j()("search-container-v8",{"search-container-v8-version-b":ue,isFocus:oe}),style:this.props.style,onMouseDown:e=>{var _;null==e||null===(_=e.nativeEvent)||void 0===_||_.stopImmediatePropagation()}},R&&Te.createElement("div",{className:"common-msg-error-search isSearchBarVersionB"},this.$translate("key.hotel.online.homepage.destination.input.error")),Te.createElement("div",{className:j()("search-box",{"search-box-versionb-hover":ue,"search-box-versionb":ue}),id:"search-box-destination",onFocus:this.onFocus,onClick:e=>this.searchBoxClick(e)},ue?null:Te.createElement("label",{className:"minNoise-destinationLabel",htmlFor:"hotels-destinationV8"},this.$translate("key.hotel.online.homepage.destination")),ue&&Te.createElement(Ee.Z,{type:"a-location2x",className:"dest-icon"}),Te.createElement("div",{className:j()("inputBarWidth",{isFocus:oe&&!se,"inputBarWidth-version-b":ue}),onClick:e=>{var _;null==e||null===(_=e.nativeEvent)||void 0===_||_.stopImmediatePropagation()}},Te.createElement("input",{type:"text",ref:this.inputRef,id:"hotels-destinationV8",className:j()("show-hightlight",{error:R,"destination-versionb-placeholder":ue,"hotels-destinationV8-versionb":ue}),value:ue&&se&&re?"".concat(de,", ").concat(re):de,autoComplete:"off",onChange:this.onChange,onClick:e=>this.inputClick(e),onBlur:this.onBlur,placeholder:ue?this.$translate("key.88801001.searchbar.default.content"):this.$translate("key.hotel.online.homepage.destination.input")}),Te.createElement("div",{id:"input-length-cacl"},de||this.$translate("key.hotel.online.homepage.destination.input"))),!ue&&se&&Te.createElement("label",{onClick:e=>{var _;null==e||null===(_=e.nativeEvent)||void 0===_||_.stopImmediatePropagation()},htmlFor:"hotels-destinationV8",className:j()("searchBarVersionBLabel","minNoise-searchBarVersionBLabel",{"searchBarVersionBLabel-version-b":ue}),id:"versionBValueLabel"},re),!!V&&Te.createElement("div",{className:j()("searchClearIconContainer",{"searchClearIconContainer-version-b":ue}),onClick:this.onChange},Te.createElement(Ee.Z,{type:"ic_bestir_clear",className:"searchClearIcon"}))),ie?Te.createElement("div",{className:"search-property-city-change-wrap"},Te.createElement("div",{className:"arrow-up"}),Te.createElement("div",{className:"chang-content"},this.$translate("key.88801001.destinationchange"))):null,_?Te.createElement(Hot,{visible:_,data:C,onSelect:function onSelect(_){let k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.select(_,k,"hot")},historySelect:this.historySelect,recentData:B,resetTimeOffset:le,validate:this.validate}):null,k?Te.createElement(Associative,{keyword:ne,loading:U,data:I,visible:k,onSelect:function onSelect(_){let k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.select(_,k,Se)},resetTimeOffset:le,safeLogList:z,ref:this.associativeRef,belongTo:G,traceLogID:Q,requestId:ee,startTime:te,direction:ce?"right":"left"}):null)}}var ke=k(19045),Ie=k(16482);const genereateRequestId=()=>{var e;return"undefined"==typeof window?crypto.randomBytes(20).toString("base64"):void 0!==(null===(e=crypto)||void 0===e?void 0:e.randomUUID)?btoa(crypto.randomUUID()):Array.from(new Array(5),(()=>(Math.random()+1).toString(36).substring(2,7))).join("")};var Ce=k(23026),Pe=k(76243),Le=k(89205);function logUbtMapping_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function logUbtMapping_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?logUbtMapping_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):logUbtMapping_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}var Ne=k(92118);const checkValidParams=()=>[(0,Ne.Z)("city"),(0,Ne.Z)("countryId"),(0,Ne.Z)("provinceId"),(0,Ne.Z)("districtId")].every((e=>{const _=parseInt(e,10);return""===e||null==e||_<=0}));var De=k(48467).default,Ae=k(67294);class DestinationV8 extends destination_view_View{constructor(e){var _;super(e),_=this,this.getLeftPx=()=>{if(Ce.Z){var e,_,k,I,C;const R=null===(e=document)||void 0===e?void 0:e.getElementById("input-length-cacl"),j=((null==R||null===(_=R.getBoundingClientRect())||void 0===_?void 0:_.width)||0)+4,B=null===(k=document)||void 0===k?void 0:k.getElementById("search-box-destination"),H=(null==B||null===(I=B.getBoundingClientRect())||void 0===I?void 0:I.width)||0,U=(null===(C=document)||void 0===C?void 0:C.getElementById("versionBValueLabel"))||{};2*j<H&&U&&U.style&&!U.style.maxWidth&&(U.style.maxWidth="calc(100% - ".concat(j+24,"px)"));const{versionBValue:V}=this.state;!V&&U&&U.style&&(U.style.maxWidth="")}},this.getIsShow=()=>{if(Ce.Z){var e,_;const k=null===(e=document)||void 0===e?void 0:e.getElementById("input-length-cacl");return 0!==(null==k||null===(_=k.getBoundingClientRect())||void 0===_?void 0:_.width)}return!1},this.getRecentDataFromLocal=()=>{const e=this.localStorage.get(V.Mb)||[];this.setState({recentData:e})},this.getDesAjax=()=>{De({url:"/getHotDestination",bff:!0,silence:!0,data:{lastUpdateTime:0,newHotDestinationFlag:!0,allDataFlag:!0}}).then((e=>{var _;this.setState({desData:null==e||null===(_=e.data)||void 0===_?void 0:_.group})})).catch((e=>{this.$safeLog("logSearchHotDestinationError",e)}))},this.getSearchAjax=e=>{var _;this.setState({loadingFlag:!0});const k=this.state.inputValue,I=genereateRequestId(),C="T"===H.default.getByKey("qconfigData.closeKeywordSearchGenk"),R="T"===H.default.getByKey("qconfigData.openSpiderV2")&&!0===H.default.getByKey("isSpiderV2")&&!C&&(null===(_=H.default.getByKey("qconfigData.newSpiderPage"))||void 0===_?void 0:_.includes(null===H.default||void 0===H.default?void 0:H.default.getByKey("pageId")))||!1,j=Date.now(),B=(0,q.tQ)(this)||(0,q.qN)(this);De({url:"/getKeyWordSearch?htl_customtraceid=".concat(I),bff:!0,silence:!0,genk:!C,genkV2:R,data:{code:0,codeType:"",keyWord:k,searchType:"D",scenicCode:0,cityCodeOfUser:0,searchConditions:[{type:"D_PROVINCE",value:"T"},{type:"SupportNormalSearch",value:"T"},{type:"DisplayTagIcon",value:B?"T":"F"}]},fail:()=>{(0,Le.ap)("ibu_htl_online_time_token_keywordsearch",{value:0,locale:H.default.getByKey("cargo.locale"),keyWord:k,success:!1})}}).then((_=>{var C,R,B,U,V,G;const{data:q={}}=_,{keyWordSearchResults:z=[],traceLogID:J=""}=q||{},Q=!!(null===(C=this.inputRef)||void 0===C||null===(R=C.current)||void 0===R?void 0:R.value);(0,Le.ap)("ibu_htl_online_time_token_keywordsearch",{value:Date.now()-j,locale:H.default.getByKey("cargo.locale"),keyWord:k,success:!0}),this.setState({searchData:z,loadingFlag:!1,traceLogID:J,requestId:I,startTime:e,assoVisible:!!(null===(B=this.inputRef)||void 0===B||null===(U=B.current)||void 0===U?void 0:U.value),desVisible:!(null===(V=this.inputRef)||void 0===V||null===(G=V.current)||void 0===G?void 0:G.value),assoValue:k},(()=>{Q&&(0==z.length&&(this.associativeRef.current.noneResponseMapping("DESTINATION"),ke.Xb.remove("DestinationValueStorage")),this.associativeRef.current.dataMap.clear(),z.forEach((e=>{this.associativeRef.current.dataMap.set(e.code,!1)})),this.associativeRef.current.handleScroll(z))}))})).catch((e=>{var _,I,C,R;this.setState({loadingFlag:!1,assoVisible:!!(null===(_=this.inputRef)||void 0===_||null===(I=_.current)||void 0===I?void 0:I.value),desVisible:!(null===(C=this.inputRef)||void 0===C||null===(R=C.current)||void 0===R?void 0:R.value),assoValue:k}),this.$safeLog("logGetSearchEngineError",e)}))},this.customer=(e,_)=>{e.target.value?this.setState({desVisible:!this.needLoadAnimation&&this.state.desVisible,assoVisible:!!this.needLoadAnimation||this.state.assoVisible},(()=>{this.getSearchAjax(_)})):this.setState({assoVisible:!1,desVisible:!0})},this.callPropsOnchange=(0,Ie.MT)(((e,_,k)=>{this.props.onChange(e,this.customer(_,k))}),150),this.onChange=e=>{e.persist(),e.stopPropagation();let{desVisible:_,assoVisible:k,resultMultiFilterText:I}=this.state,C=e.target.value;C||(_=!0,k=!1,I=""),this.setState({selectFlag:!1,desVisible:_,assoVisible:k,mod:Se,safeLogList:[],inputValue:C||"",resultMultiFilterText:I}),this.callPropsOnchange(C,e,Date.now())},this.onClear=e=>{e.stopPropagation(),this.setState({inputValue:"",versionBValue:"",assoVisible:!1,desVisible:!0,resultMultiFilterText:""})},this.searchBoxClick=e=>{var _;this.setFlagClickSearchBoxDestination(!0),this.inputRef&&this.inputRef.current.click(),this.inputRef&&this.inputRef.current.setSelectionRange(this.inputRef.current.value.length,this.inputRef.current.value.length),null==e||null===(_=e.nativeEvent)||void 0===_||_.stopImmediatePropagation()},this.inputClick=e=>{var _,k;this.$instance("SearchBoxV8").action("searchMaskShow"),this.$instance("SearchBoxV8").action("hideOtherPanel","Destination"),this.$instance("HomeSearchV8").action("hideOtherPanel","Destination"),null==e||null===(_=e.nativeEvent)||void 0===_||_.stopImmediatePropagation(),null==e||e.stopPropagation(),k={regionid:this.state.destinationId,regionname:this.state.inputValue||""},(0,Le.NW)("htl_ol_wcl_search_destbox_click",logUbtMapping_objectSpread({locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),channeltype:"online"},k)),this.state.assoVisible||this.setState({desVisible:!0,assoVisible:!1}),this.inputRef.current.focus(),this.setState({belongTo:"DESTINATION",versionBValue:"",resultMultiFilterText:""})},this.setFlagClickSearchBoxDestination=e=>{this.flagClickSearchBoxDestination=null!=e&&e},this.hidePanel=()=>{const{assoVisible:e,searchData:_,selectFlag:k}=this.state,I=ke.Xb.get("DestinationValueStorage")||{},C=(null==I?void 0:I.locale)===H.default.getByKey("cargo.locale")&&this.state.inputValue===(null==I?void 0:I.resultWord)?null==I?void 0:I.resultWordVersionB:this.state.versionBValue;if(!this.preventSelectFirst&&!k&&e&&_.length>0){const e=Object.assign({},_[0]);this.select(e,!1)}this.setState({desVisible:!1,assoVisible:!1,isFocused:!1,versionBValue:C})},this.hideChangeTip=(0,Ie.MT)((()=>{this.setState({showChangeTip:!1})}),3e3),this.onBlur=()=>{const{assoVisible:e,selectFlag:_}=this.state;"T"===H.default.getByKey("qconfigData.turnOnDestinationBlur")&&setTimeout((()=>{this.flagClickSearchBoxDestination||this.hidePanel(),this.setFlagClickSearchBoxDestination(!1)}),400),!_&e&&this.$safeLog("logHomePageSearchBoxUserInput",this.props.value)},this.onFocus=()=>{this.$instance("SearchBoxV8").action("searchMaskShow"),this.setState({error:!1,desVisible:!0,isFocused:!0});const e=H.default.getByKey("pageId")||document.getElementById("page_id").value;["10320668150","10320667461","10320667466"].includes(e)&&this.$safeLog("logSearchBoxOpen")},this.ubtMapping={logSearchBoxOpen:U.rW,logHomePageSearchBoxUserInput:U.XD,logSearchHotDestinationError:U.Kj,logGetSearchEngineError:U.$y},this.select=function(e){var k,I,C,R,j;let B=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],H=arguments.length>2?arguments[2]:void 0;var U,G;(null==e?void 0:e.resultType)===ne.Ol.N&&(null==e||null===(k=e.item)||void 0===k||null===(I=k.data)||void 0===I?void 0:I.title)&&(e.resultWord=null==e||null===(U=e.item)||void 0===U||null===(G=U.data)||void 0===G?void 0:G.title);const{next:q,select:z}=_.props;let Q=(0,J.IS)(e);_.preventSelectFirst=!0;const{inputValue:ee}=_.state||{};ee!==Q&&(window.mainProcess=!0),_.setState({desVisible:!1,assoVisible:!1,selectFlag:!0,mod:H,inputValue:Q,resultMultiFilterText:(0,J.zZ)(null==e?void 0:e.displayTags)},(()=>{_.preventSelectFirst=!1})),z&&z(e),B&&!1===[V.VS.Hotel,V.VS.CommonWordN].includes(null==e?void 0:e.resultType)&&(0,Pe.xb)(null===(C=_.props.calendarRef)||void 0===C||null===(R=C.current)||void 0===R||null===(j=R.props)||void 0===j?void 0:j.checkIn)&&q(),_.inputRef.current.blur()},this.validate=()=>{const{mod:e,searchData:_,belongTo:k=""}=this.state;return this.state.inputValue?(e!==Se||0!==_.length||0===k.length)&&(this.setState({error:!1}),!0):(this.setState({error:!0,desVisible:!1,assoVisible:!1}),this.inputRef.current.blur(),!1)},this.historySelect=e=>{this.setState({mod:"history",desVisible:!1},(()=>{this.props.historySelect(e),this.inputRef.current.blur()}))},this.localStorage=ke.Xb,this.state={desVisible:!1,assoVisible:!1,searchData:[],desData:[],recentData:[],error:!1,selectFlag:!1,loadingFlag:!1,mod:"",inputValue:"",safeLogList:[],belongTo:"",traceLogID:"",startTime:Date.now(),requestId:"",assoValue:this.props.value||"",isFocused:!1,showChangeTip:!1,destinationId:"",resultMultiFilterText:""},this.$saveInstance("Destination"),this.inputRef=Ae.createRef(),this.associativeRef=Ae.createRef(),this.needLoadAnimation=searchDisableLoadAnimation(),this.flagClickSearchBoxDestination=!1}afterAsync(){const e=H.default.getByKey("initData.firstPageList.hotelList"),_=H.default.getByKey("pageId"),k=checkValidParams();""===this.props.value&&k&&("10320668148"===_||"10320668268"===_)&&0===(null==e?void 0:e.length)&&this.inputClick()}componentDidMount(){this.setState({inputValue:this.props.value,versionBValue:this.props.versionBValue,destinationId:this.props.destinationId,resultMultiFilterText:this.props.resultMultiFilterText}),document.addEventListener("mousedown",this.hidePanel),document.addEventListener("keydown",(()=>{this.setFlagClickSearchBoxDestination(!1)})),this.getDesAjax(),this.getRecentDataFromLocal(),this.getLeftPx()}componentDidUpdate(e){e.value!=this.props.value&&(this.setState({inputValue:this.props.value,versionBValue:this.props.versionBValue,destinationId:this.props.destinationId,showChangeTip:this.props.triggerFromSearchPropertyShowChangeTip,resultMultiFilterText:this.props.resultMultiFilterText}),document.addEventListener("mousedown",this.hidePanel),document.addEventListener("keydown",(()=>{this.setFlagClickSearchBoxDestination(!1)})),this.getDesAjax(),this.getRecentDataFromLocal(),this.getLeftPx(),this.props.triggerFromSearchPropertyShowChangeTip&&this.hideChangeTip()),this.getLeftPx()}componentWillUnmount(){document.removeEventListener("mousedown",this.hidePanel),document.removeEventListener("keydown",(()=>{this.setFlagClickSearchBoxDestination(!1)}))}}DestinationV8.defaultProps={select:()=>{},historySelect:()=>{},next:()=>{},resetTimeOffset:()=>{},error:!1,value:"",style:{}},DestinationV8.propTypes={select:_e().func,historySelect:_e().func,resetTimeOffset:_e().func,next:_e().func,error:_e().bool,value:_e().string,style:_e().object};var Re=k(8938),xe=k(39621).default,je=k(67294);class calendar_view_View extends xe{constructor(e){super(e)}renderVersionB(){var e;const{checkInFocused:_,checkOutFocused:k}=this.state;let{checkIn:I="",checkOut:C=""}=this.props;const R=null!==(e=(0,Re.e3)(I,C))&&void 0!==e?e:0,H=this.$translate("key.hotel.detail.nodate.select.date"),U=(0,q.XG)(this);return je.createElement("div",{className:j()("calendar-container-v8-versionb",{focused:_||k}),style:this.props.style,onClick:e=>{this.onClick("checkIn",e)}},je.createElement(B.Z,{type:"ic_new_calendar_line",className:"calendar-icon"}),je.createElement("div",{className:j()("time-tab",{"time-tab-version-b":U,focused:_||k})},je.createElement("input",{id:"checkIn",type:"text",className:j()("focus-input show-hightlight in-time",{focused:_}),value:""===I?"":this.$localeDate("mdeShortString",I),placeholder:H,readOnly:!0,ref:e=>{this.isArabic||(this.calendarTarget=e)},"data-key":I}),je.createElement("div",{className:"time-label"},""===I?H:this.$localeDate("mdeShortString",I))),je.createElement("div",{className:j()("calendar-hyphen",{focused:_||k})},"-"),je.createElement("div",{className:j()("time-tab",{"time-tab-version-b":U})},je.createElement("input",{id:"checkOut",type:"text",className:j()("focus-input show-hightlight",{focused:k}),value:""===C?"":this.$localeDate("mdeShortString",C),placeholder:H,readOnly:!0,"data-key":C,ref:e=>{this.isArabic&&(this.calendarTarget=e)}}),je.createElement("div",{className:"time-label"},""===C?H:this.$localeDate("mdeShortString",C))),U?je.createElement("div",{id:"preload-nights",className:j()("nights","minNoiseCalendarLabel",{"version-b":U})},je.createElement("span",null,this.$translatePlural("key.hotel.common.night",R))):null)}renderOriginal(){var e;const{checkInFocused:_,checkOutFocused:k}=this.state;let{checkIn:I="",checkOut:C=""}=this.props;const R=null!==(e=(0,Re.e3)(I,C))&&void 0!==e?e:0,B=this.$translate("key.hotel.detail.nodate.select.date"),H=(0,q.XG)(this);return je.createElement("div",{className:j()("calendar-container-v8",{focused:_||k}),style:this.props.style,onClick:e=>{this.onClick("checkIn",e)}},je.createElement("div",{className:"time-tab"},this.props.roomsearch||H?null:je.createElement("label",{className:j()("in","minNoiseCalendarLabel"),htmlFor:"checkIn"},this.$translate("key.hotel.online.homepage.checkin")),je.createElement("input",{id:"checkIn",type:"text",className:j()("focus-input show-hightlight in-time",{focused:_}),value:""===I?"":this.$localeDate("mdeShortString",I),placeholder:B,readOnly:!0,ref:e=>{this.isArabic||(this.calendarTarget=e)},"data-key":I})),je.createElement("div",{id:"preload-nights",className:j()("nights","minNoiseCalendarLabel")},je.createElement("span",null,this.$translatePlural("key.hotel.common.night",R))),je.createElement("div",{className:"time-tab"},this.props.roomsearch?null:je.createElement("label",{className:j()("out","minNoiseCalendarLabel"),htmlFor:"checkOut"},this.$translate("key.hotel.online.homepage.checkout")),je.createElement("input",{id:"checkOut",type:"text",className:j()("focus-input show-hightlight out-time",{focused:k}),value:""===C?"":this.$localeDate("mdeShortString",C),placeholder:B,readOnly:!0,"data-key":C,ref:e=>{this.isArabic&&(this.calendarTarget=e)}})),je.createElement("div",{id:"preload-nights",className:j()("nights","minNoiseCalendarLabel")},je.createElement("span",null,this.$translatePlural("key.hotel.common.night",R))))}render(){return(0,q.XG)(this)?this.renderVersionB():this.renderOriginal()}}var Be=k(16234),Me=k(97278),Fe=k(52178),He=k(67154),Ke=k.n(He);function changeDate(e,_){void 0===_&&(_={});var k=function val(k,I){var C=_[k];return"number"==typeof C?C:e[I]()};return new Date(k("year","getFullYear"),k("month","getMonth"),k("day","getDate"),k("hour","getHours"),k("minute","getMinutes"),k("second","getSeconds"),"number"==typeof _.ms?_.ms:0)}var Ue={get localTimezone(){return(new Date).getTimezoneOffset()/-60},isDate:function isDate(e){return e instanceof Date},addMonth:function addMonth(e,_){void 0===e&&(e=1);var k=_||Ue.getToday(),I=k.getMonth()+e;return changeDate(k,{month:I,day:1})},addDay:function addDay(e,_){void 0===e&&(e=0);var k=_||Ue.getToday(),I=k.getDate()+e;return changeDate(k,{day:I})},now:function now(e){return Ue.getDateInTimezone(new Date,e)},getToday:function getToday(e){var _=Ue.now(e);return Ue.getDay(_)},getDay:function getDay(e,_){return void 0===_&&(_=0),changeDate(e,{hour:_,minute:0,second:0})},getDayEnd:function getDayEnd(e){return changeDate(e,{hour:23,minute:59,second:59})},getMonthLength:function getMonthLength(e){return changeDate(e,{month:e.getMonth()+1,day:0}).getDate()},getFirstMonthLength:function getFirstMonthLength(e,_){var k=Ue.getMonthFirstDay(e).getDay();return k<_?_-k:7-(k-_)},getMonthWeekCount:function getMonthWeekCount(e,_){var k=Ue.getMonthLength(e),I=Ue.getMonthFirstDay(e).getDay(),C=k-(I<_?_-I:7-(I-_));return Math.ceil(C/7)+1},getMonthFirstDay:function getMonthFirstDay(e){return changeDate(e,{day:1,hour:0,minute:0,second:0})},getMonthLastDay:function getMonthLastDay(e){var _=changeDate(e,{month:e.getMonth()+1,day:0});return Ue.getDayEnd(_)},sameDay:function sameDay(e,_){for(var k=Ue.getDay(e).getTime(),I=0;I<_.length;I++){var C=_[I];if(C&&Ue.getDay(C).getTime()===k)return!0}return!1},sameMonth:function sameMonth(e,_){for(var k=e.getFullYear(),I=e.getMonth(),C=0;C<_.length;C++){var R=_[C];if(R.getFullYear()===k&&R.getMonth()===I)return!0}return!1},diffDays:function diffDays(e,_){var k=(Ue.getDay(_).getTime()-Ue.getDay(e).getTime())/864e5;return Math.floor(Math.abs(k))+1},diffNights:function diffNights(e,_){return e&&_&&Ue.diffDays(e,_)-1||0},isInRange:function isInRange(e,_,k){return!(!_||!k)&&(e.getTime()>=_.getTime()&&e.getTime()<=k.getTime())},isBeforeDay:function isBeforeDay(e,_){return e<Ue.getDay(_)},isSameOrBeforeDay:function isSameOrBeforeDay(e,_){return Ue.isBeforeDay(e,_)||Ue.sameDay(e,_)},isBeforeMonth:function isBeforeMonth(e,_){return e<Ue.getMonthFirstDay(_)},getTimestampInTimezone:function getTimestampInTimezone(e,_){if("number"!=typeof _)return e.getTime();var k=e.getTimezoneOffset()/60+_;return e.getTime()-60*k*60*1e3},getDateInTimezone:function getDateInTimezone(e,_){if("number"!=typeof _)return new Date(e.getTime());var k=e.getTimezoneOffset()/60+_;return changeDate(e,{hour:e.getHours()+k})},repairNumber:function repairNumber(e){return e<10?"0"+e:""+e},getDateStringByDateInfo:function getDateStringByDateInfo(e){return e.getFullYear()+"-"+this.repairNumber(e.getMonth()+1)+"-"+this.repairNumber(e.getDate())},isInMonth:function isInMonth(e,_){return"number"==typeof _&&(_=Ue.addMonth(_)),Ue.isInRange(e,Ue.getMonthFirstDay(_),Ue.getMonthLastDay(_))},isOnOrAfterMonth:function isOnOrAfterMonth(e,_){return"number"==typeof _&&(_=Ue.addMonth(_)),!Ue.isBeforeMonth(e,_)},getThisSomeday:function getThisSomeday(e,_){var k=new Date(e),I=function toNormalDay(e){return 0===e?e+7:e},C=I(k.getDay())>I(_),R=(_+7-k.getDay())%7;return k.setDate(k.getDate()+(C?R-7:R)),k}};const Ze=Ue;var Ve=k(37316),We=k.n(Ve),Ge=k(12325),$e=["range"];function trackClick(e){!function trackByNaga(e){(0,Ge.g4)("104385",e)}({type:"calendar_"+e+"_click",num0:1})}var qe="Online_calendar_select_date",ze="Online_calendar_duration",Ye=function noop(){},Je=function(){function Timer(){this.timer=void 0,this.seconds=void 0,this.timer=null,this.seconds=0}var e=Timer.prototype;return e.start=function start(){var e=this;return this.seconds=0,clearInterval(this.timer),this.timer=setInterval((function(){e.seconds+=1}),1e3),this},e.stop=function stop(){return clearInterval(this.timer),this.seconds},Timer}();function useTrace(e){var _=e.store.range,k=e.globalProps,I=e.tripContext,C=(e.debug,k.etParams),R=void 0===C?{}:C,j=k.mode,B=k.show,H=R.extraParams,U=void 0===H?{}:H,V=R.toggleShow,G=void 0===V?B:V,q=I.locale,z=Object.assign({locale:q},U),J=(0,he.useRef)(new Je),Q=(0,he.useRef)(null),ee=(0,he.useRef)(!1);function traceDuration(e){var _=Object.assign({},z,{durationlength:e,time:(new Date).getTime()});(0,Ge.g4)(ze,_)}return(0,he.useEffect)((function(){return J.current&&void 0!==G?(G&&function traceDurationStart(){J.current.start()}(),ee.current=G,function(){!function traceDurationEnd(){var e=J.current.stop();e<=0||!ee.current||traceDuration(e)}()}):Ye}),[G]),{traceAction:function traceAction(e){void 0===e&&(e={});var k=e,I=k.range,C=We()(k,$e),R=C.type,B=function processRange(e){var _,k,I,C;return e?(null!=(_=null==(k=e[0])?void 0:k.toDateString())?_:"")+" to "+(null!=(I=null==(C=e[1])?void 0:C.toDateString())?I:""):""}(null!=I?I:_),H=B+"-"+R;if(H!==Q.current){var U=Object.assign({},z,{content:Object.assign({mode:j,range:B},C,{time:(new Date).getTime()})});(0,Ge.g4)(qe,U),Q.current=H}},traceDuration:traceDuration}}var Xe,Qe=function useUpdate(e,_){var k=(0,he.useRef)(!0);(0,he.useEffect)((function(){k.current?k.current=!1:e()}),_)},et=k(87074),tt={appId:330153,pageId:102},nt="ibu_pub_online_seo_calendar_tag_exposure",rt="ibu_pub_online_seo_calendar_tag_click",ot=function(){function FestivalManager(e){this.festivals={},e&&this.init(e)}var e=FestivalManager.prototype;return e.init=function init(e){void 0===e&&(e={});var _=Object.assign({},"object"==typeof window?window.i18n_6001:{},e),k=this.festivals={};Object.entries(_).forEach((function(e){var _=e[0],I=e[1],C=_.split("-").map(Number),R=C[0],j=C[1],B=C[2];if(R&&j&&B&&I){var H=new Date(R,j-1,B);k[R]||(k[R]={}),k[R][j]||(k[R][j]={}),k[R][j][B]||(k[R][j][B]={date:H,festivals:[]}),k[R][j][B].festivals.push({date:H,label:I})}}))},e.getMonthFestivals=function getMonthFestivals(e,_){return(this.festivals[e]||{})[_]||{}},e.getDayFestivals=function getDayFestivals(e){return(((this.festivals[e.getFullYear()]||{})[e.getMonth()+1]||{})[e.getDate()]||{festivals:[]}).festivals||[]},e.getDayFestivalLabel=function getDayFestivalLabel(e,_,k){void 0===k&&(k="");var I=e&&e instanceof Date?this.getDayFestivals(e):null,C=I&&I.length?I[0]:{label:"",date:null},R=C.label,j=C.date;return R&&_?_.mdShortString(j.getTime())+" "+R:k},FestivalManager}();Xe=ot,ot.instance=new Xe;new ot;var it=function useFestival(){var e=(0,et.Q)(6001),_=(0,he.useRef)(ot.instance);return(0,he.useMemo)((function(){_.current.init(e)}),[]),{ref:_,festivals:_.current}};function _createForOfIteratorHelperLoose(e,_){var k="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(k)return(k=k.call(e)).next.bind(k);if(Array.isArray(e)||(k=function _unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return _arrayLikeToArray(e,_)}(e))||_&&e&&"number"==typeof e.length){k&&(e=k);var I=0;return function(){return I>=e.length?{done:!0}:{done:!1,value:e[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}var at=function(){function CalendarMonth(e,_,k){if(this.options=void 0,this.festivalCalendar=void 0,this.year=void 0,this.month=void 0,this.date=void 0,this.lowPricesObj=void 0,this.hasPrice=void 0,this.date=e,this.year=e.getFullYear(),this.month=e.getMonth()+1,this.festivalCalendar=_,this.options=k,this.lowPricesObj={},this.hasPrice=!1,k.lowPrices){this.hasPrice=!0;for(var I,C=_createForOfIteratorHelperLoose(k.lowPrices);!(I=C()).done;){var R=I.value,j=R.date;this.lowPricesObj[j]=R}}}var e=CalendarMonth.prototype;return e.getDayCells=function getDayCells(){var e=this,_=this.options.dayOfWeekStart,k=void 0===_?0:_,I=this.date,C=this.firstDay(),R=7-Ze.getFirstMonthLength(I,k),j=Ze.addDay(-R,C),B=Ze.getMonthWeekCount(I,k);return Array.from({length:B}).map((function(_,k){return{days:Array.from({length:7}).map((function(_,C){var R=7*k+C,B=Ze.addDay(R,j),H=e.options.computeDayStatus(B),U=e.festivalCalendar.getDayFestivals(B),V=B.getFullYear()+"-"+(B.getMonth()+1<10?"0"+(B.getMonth()+1):B.getMonth()+1)+"-"+(B.getDate()<10?"0"+B.getDate():B.getDate()),G="",q="",z="";return e.lowPricesObj[V]&&(G=e.lowPricesObj[V].value,q=e.lowPricesObj[V].color||"",z=e.lowPricesObj[V].bgColor||""),{key:String(B.getTime()),date:B,day:B.getDate(),status:H,festivals:U,hasFestival:U&&U.length>0,hasPrice:e.hasPrice,priceValue:G,priceColor:q,priceBgColor:z,get isCurrentMonth(){return B.getMonth()===I.getMonth()},get isPrevMonth(){return B.getMonth()<I.getMonth()},get isNextMonth(){return B.getMonth()>I.getMonth()}}}))}}))},e.getFestivals=function getFestivals(){var e=this.festivalCalendar.getMonthFestivals(this.year,this.month);return Object.values(e).sort((function(e,_){return e.date.getTime()-_.date.getTime()})).reduce((function(e,_){return e.concat(_.festivals||[])}),[])},e.hasFestivals=function hasFestivals(){return!!this.getFestivals().length},e.firstDay=function firstDay(){return new Date(this.year,this.month-1,1)},e.lastDay=function lastDay(){return new Date(this.year,this.month,0)},CalendarMonth}(),lt=function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)};function useTranslation(e){var _=(0,et.Q)(tt);if(!e)return _;var k=_[e];if(null==k)return"";for(var I=arguments.length,C=new Array(I>1?I-1:0),R=1;R<I;R++)C[R-1]=arguments[R];return C.length>0?replace(k,C):k}function useTrans(e){void 0===e&&(e=[]);var _=(0,et.Q)(tt),k=function getTrans(e){var k,I=null!=(k=_[e])?k:"";if(null==I)return I;for(var C=arguments.length,R=new Array(C>1?C-1:0),j=1;j<C;j++)R[j-1]=arguments[j];return R.length&&(I=replace(I,R)),I},I=function transMapper(e){if(Array.isArray(e)){var _=e[0],I=e[1];return k.apply(void 0,[_].concat(I))}return k(e)};return Array.isArray(e)?e.map(I):I(e)}function replace(e,_){return void 0===e&&(e=""),void 0===_&&(_=[]),e.replace(/\{([0-9]+)}/g,(function(e,k){return void 0!==_[k]?_[k]:e}))}var st="key.calendar.hover",ct="key.calendar.departure",ut="key.calender.return";function useI18nWithSSR(e){var _=(0,he.useState)({}),k=_[0],I=_[1],C=(0,et.Q)(e);return(0,he.useEffect)((function(){I(C)}),[]),k}var dt=k(35712),pt=k(43770),ht=(Ze.isBeforeDay,Ze.sameDay,Ze.isInRange),ft=Ze.addDay;function useDepartOrReturn(e){var _=e.range,k=e.hoverDate,I=e.isSelectingEnd,C=e.mode,R=e.minNights,j=e.departTipKey,B=void 0===j?ct:j,H=e.returnTipKey,U=void 0===H?ut:H,V=(0,dt.$)(),G=_||[],q=G[0],z=G[1],J=function formatDate(e){return e?V.mdCalendarString(e.getTime()):""},Q=useTrans([[B,[J(k)]],[U,[J(q),J(k)]]]),ee=Q[0],te=Q[1];var ne=(0,he.useMemo)((function(){return function computeDepart(){return"single"===C||!q||!k||k<q||(k===q?R>0:!I)}()}),[k,_,C]),re="";return!k||!ne&&z&&ht(k,q,ft(R-1,q))||(re=ne?ee:te),{isDepart:ne,hoverTip:re}}var mt=["store"],gt={hoverDate:null,range:[],isSelectingEnd:!1,activeSelectorIdx:-1},vt=function noop(){};var yt=(0,he.createContext)({store:gt,updateStore:vt,setStore:vt,resetStore:vt,computes:{isDepart:!0,hoverTip:""},dateTimeFormatter:{},tripContext:{},globalProps:{},etUtils:{}}),bt=function GlobalContextProvider(e){var _=e.timezone,k=e.value,I=e.selectEnd,C=e.minNights,R=void 0===C?1:C,j=e.departTipKey,B=e.returnTipKey,H=function useGlobalProvider(e){var _=(0,he.useState)(e),k=_[0],I=_[1];return{store:k,updateStore:function updateStore(e){return void 0===e&&(e={}),I((function(_){return Object.assign({},_,e)})),k},setStore:I,resetStore:function resetStore(){return I(e),k}}}(gt),U=H.store,V=We()(H,mt);!!k&&Object.assign(U,{range:Array.isArray(k)?k:[k]}),void 0!==I&&Object.assign(U,{isSelectingEnd:I});var G=(0,dt.$)(_),q=(0,pt.N)(),z=useTrace({store:U,globalProps:e,tripContext:q,debug:!0}),J=useDepartOrReturn({range:U.range,hoverDate:U.hoverDate,isSelectingEnd:U.isSelectingEnd,mode:U.mode,minNights:R,dateTimeFormatter:G,departTipKey:j,returnTipKey:B}),Q=J.isDepart,ee=J.hoverTip;return fe().createElement(yt.Provider,{value:Object.assign({store:U},V,{dateTimeFormatter:G,tripContext:q,globalProps:e,etUtils:z,computes:{isDepart:Q,hoverTip:ee}})},e.children)},_t=function useGlobalContext(){return(0,he.useContext)(yt)},wt=function useCalendar(e){var _=e.value,k=e.defaultValue,I=e.mode,C=e.selectEnd,R=e.timezone,j=e.maxNights,B=void 0===j?Number.POSITIVE_INFINITY:j,H=e.minNights,U=void 0===H?1:H,V=e.maxEndDate,G=e.minStartDate,q=e.startMonthDate,z=e.disabledDate,J=e.singleMonthPanel,Q=void 0!==J&&J,ee=e.onRangeChange,te=e.onOutOfRange,ne=e.onChange,re=e.onModeChange,oe=e.show,ie=e.lowPrices,ae=function useCalendarI18nConfig(){var e=(0,et.Q)(6002);return{sundayColor:e["key.calendar.sunday_font_color"],saturdayColor:e["key.calendar.saturday_font_color"],dayOfWeekStart:Number(e["key.calendar.week_start"])}}(),le=!!_,se=lt(_)?_:_?[_]:[],ce=(0,he.useState)((function(){var e=lt(k)?k:[k],_=e[0],I=e[1];return["number"==typeof _?Ze.addDay(_):_,"number"==typeof I?Ze.addDay(I):I]})),ue=ce[0],de=ce[1],pe=function useInit(){var e=(0,he.useRef)(!0);return(0,he.useEffect)((function(){e.current=!1}),[]),e.current}(),fe=le?se:ue,me=(0,he.useState)(fe),ge=me[0],ve=me[1],ye=(0,he.useState)(void 0),be=ye[0],_e=ye[1],we=it().festivals,Ee=(0,he.useMemo)((function(){return V?"number"==typeof V?Ze.addDay(V):Ze.getDayEnd(V):null}),[V]),Se=(0,he.useMemo)((function(){return G?"number"==typeof G?Ze.addDay(G):Ze.getDay(G):null===G?null:Ze.getToday(R)}),[G,R]),Oe=(0,he.useState)((function(){return q?"number"==typeof q?Ze.addMonth(q):q:!fe[0]||Se&&Ze.isBeforeMonth(fe[0],Se)?Se?Ze.addDay(0,Se):Ze.getToday(R):fe[0]})),Te=Oe[0],ke=Oe[1];Qe((function(){void 0===fe[0]&&("number"==typeof q&&ke(Ze.addMonth(q)),q instanceof Date&&ke(q))}),["number"==typeof q?q:q instanceof Date?q.getFullYear()+"-"+q.getMonth():-1]);var Ie=(0,he.useMemo)((function(){return I||(_?lt(_)?"range":"single":k?lt(k)?"range":"single":"range")}),[I,_,k]),Ce="single"===Ie,Pe="range"===Ie,Le=(0,he.useRef)(Pe&&fe[0]&&!fe[1]),Ne=void 0!==C?C:Le.current,De=_t(),Ae=De.updateStore,Re=De.etUtils.traceAction;(0,he.useEffect)((function(){le||Ae({range:fe,isSelectingEnd:Ne,mode:Ie})}),[fe]),(0,he.useMemo)((function(){if(!pe){var e=fe[0],_=fe[1];Pe&&e&&!_&&(Le.current=!0),ve(se),e&&!Ze.sameMonth(e,[Te,!Q&&Ze.addMonth(1,Te)].filter(Ze.isDate))&&ke(e)}}),[_]);var xe=(0,he.useRef)(Ie);Qe((function(){if("range"===Ie&&Ie!==xe.current){var e=fe[0];e&&Ue(e),re&&re(Ie)}xe.current=Ie}),[Ie]);var je=(0,he.useRef)(oe);Qe((function(){if(je.current!==oe)if(je.current=oe,"range"===Ie&&!1===C){var e=fe[0];e&&ke(e)}else if("range"===Ie&&!0===C){var _=fe[1];if(_){var k=_.getFullYear(),I=_.getMonth(),R=Ze.isOnOrAfterMonth(Se,_)?I:I-1;ke(new Date(k,R,1))}}}),[oe,C]);var Be=[fe[0],fe[1]||(fe[0]&&be&&Ze.isSameOrBeforeDay(fe[0],be)?be:void 0)],Me=function computeDayStatus(e){var _="none";return"function"==typeof z&&z(e)||Se&&e<Se||Ee&&e>Ee?_="disable":Ze.sameDay(e,Ce?fe.slice(0,1):fe)?_="selected":Pe&&Ze.isInRange.apply(Ze,[e].concat(Be))&&(_="in-range"),_},Fe=function validDate(e,_){return"disable"!==(_?_.status:Me(e))},He=(0,he.useCallback)((function(e,_){ee?ee(e,_):de(e),Re({type:"select",range:e,rangeType:_})}),[ee]),Ke=(0,he.useCallback)((function(e){ne?ne(e):de([e]),Re({type:"select",range:[e]})}),[ne]),Ue=(0,he.useCallback)((function(e,_){var k=fe[1];if(Fe(e,_))if(Ce)Ke(e);else{var I=k&&k>=e&&Ze.diffNights(e,k),C=I&&I<=B&&I>=U?k:Ze.addDay(U,e);He(k?[e,void 0]:[e,k],"start"),ve([e,C]),Le.current=!0}}),[fe[1],Ce,Ke,He,Me,ve]),Ve=(0,he.useCallback)((function(e,_,k){var I=(void 0===k?{}:k).forceStart;if(!Fe(e,_))return!1;var C=null!=I?I:fe[0];if(Ce||!C)return Le.current=!1,!1;var R=Ze.diffNights(C,e);return!Ze.isBeforeDay(e,C)&&R>=U&&R<=B?(He([C,e],"end"),ve([C,e]),Le.current=!1,!0):(Ze.isBeforeDay(e,C)?He([e,void 0],"start"):te&&te([C,e]),!1)}),[fe[0],Ce,Me,He,ve]),We=(0,he.useCallback)((function(e){var _=ge[1],k=fe[0];ve(_?e<_?[e,_]:[k,_]:[e])}),[ve,ge[1],fe[0]]),Ge=(0,he.useCallback)((function(e){var _=ge[0],k=fe[1];Ne&&_&&ve(e>_?[_,e]:[_,k])}),[ve,ge[0],fe[1],Ne]),$e=function select(e,_){if(Ae({activeSelectorIdx:-1}),trackClick("calendar"),"single"===Ie)Ue(e,_);else if(Ne)Ve(e,_);else{Ue(e,_);var k=Ze.addMonth(1,Te),I=Ze.getMonthLastDay(k);!Ce&&Ze.sameDay(I,[e])&&ke(k)}};return(0,he.useEffect)((function(){Ae({startDateOfMonth:Te})}),[Te]),{month:function month(e){return void 0===e&&(e=0),new at(Ze.addMonth(e,Te),we,{computeDayStatus:Me,dayOfWeekStart:ae.dayOfWeekStart,lowPrices:ie})},setActiveMonthDate:function setActiveMonthDate(e){ke("number"==typeof e?Ze.addMonth(e,Te):e)},isAvailableDate:function isAvailableDate(e){return!(Se&&e<Se||Ee&&e>Ee)},mode:Ie,select:$e,selectRange:function selectRange(e,_){e&&("single"!==Ie?(_||(_=Ze.addDay(U,e)),Ue(e),Ve(_,{},{forceStart:e})):$e(e))},setHoverDate:_e,selectHover:function selectHover(e){Ce||(Ne?Ge(e):We(e))},get range(){return{start:fe[0],end:fe[1],get nights(){return Ze.diffNights.apply(Ze,fe)}}},get hoverRange(){return{value:Be,start:Be[0],end:Be[1],get nights(){return Ze.diffNights.apply(Ze,Be)},reset:function reset(){se&&se.filter(Boolean).length&&ve(se)}}},festivalCalendar:we}},Et=function useFormateDateTime(e,_,k){void 0===k&&(k="");var I=(0,he.useState)(!1),C=I[0],R=I[1],j=k;try{var B=(0,dt.$)();j=e?B[_](e.getTime()):k}catch(e){}return(0,he.useEffect)((function(){R(!0)}),[]),C?j:k};function getDayOfWeekColor(e,_){switch(void 0===_&&(_={}),e){case 0:return{color:_["key.calendar.sunday_font_color"]||"#3264ff"};case 5:return{color:_["key.calendar.friday_font_color"]||void 0};case 6:return{color:_["key.calendar.saturday_font_color"]||"#3264ff"};default:return{}}}const St=function WeekHead(){var e=useI18nWithSSR(6002),_=(e["key.l10n.datetime.weekday.names.abbreviations"]||"").split(","),k=function getWeekDaySort(e){void 0===e&&(e={});var _=Number(e["key.calendar.week_start"]||0),k=Array.from({length:7}).map((function(e,_){return _}));return k.slice(_).concat(k.slice(0,_))}(e);return fe().createElement("ul",{className:"c-calendar-month__week-head"},k.map((function(k){return fe().createElement("li",{style:getDayOfWeekColor(k,e),key:k},_[k])})))};var Ot=function ArrowIcon(e){var _,k=e.disable,I=void 0!==k&&k,C=e.onClick,R=["c-calendar-icon-"+e.type,I&&"is-disable"].filter(Boolean).join(" "),j=fe().useCallback((function(){return!I&&C()}),[C]);return fe().createElement("span",((_={})[function findClickEvent(){return"undefined"==typeof window||"ontouchstart"in document.documentElement?"onTouchStart":"onClick"}()]=j,_.className=R,_))},Tt=function DotIcon(e){var _=e.className,k=void 0===_?"":_,I=useI18nWithSSR(6002)["key.calendar.festival_dot_color"]||"#8592A6";return fe().createElement("i",{className:"c-calendar-icon-dot "+k,style:{backgroundColor:I}})},kt=function Price(e){var _=e.value,k=e.color;return fe().createElement("span",{className:"price",style:{color:k}},_)},It=k(98125),Ct=k.n(It);function Popup(e){var _=e.children,k=e.prefixCls,I=e.id,C=e.overlayInnerStyle,R=e.innerClassName,j=e.className,B=e.style;return he.createElement("div",{className:Ct()("".concat(k,"-content"),j),style:B},he.createElement("div",{className:Ct()("".concat(k,"-inner"),R),id:I,role:"tooltip",style:C},"function"==typeof _?_():_))}function objectSpread2_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread2(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?objectSpread2_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):objectSpread2_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}var Pt=k(19756);function objectWithoutProperties_objectWithoutProperties(e,_){if(null==e)return{};var k,I,C=(0,Pt.Z)(e,_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(e);for(I=0;I<R.length;I++)k=R[I],_.indexOf(k)>=0||Object.prototype.propertyIsEnumerable.call(e,k)&&(C[k]=e[k])}return C}function typeof_typeof(e){return(typeof_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function toPropertyKey(e){var _=function toPrimitive(e,_){if("object"!=typeof_typeof(e)||!e)return e;var k=e[Symbol.toPrimitive];if(void 0!==k){var I=k.call(e,_||"default");if("object"!=typeof_typeof(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"==typeof_typeof(_)?_:_+""}function defineProperty_defineProperty(e,_,k){return(_=toPropertyKey(_))in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}function esm_objectSpread2_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function objectSpread2_objectSpread2(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?esm_objectSpread2_ownKeys(Object(k),!0).forEach((function(_){defineProperty_defineProperty(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):esm_objectSpread2_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function arrayLikeToArray_arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=Array(_);k<_;k++)I[k]=e[k];return I}function unsupportedIterableToArray_unsupportedIterableToArray(e,_){if(e){if("string"==typeof e)return arrayLikeToArray_arrayLikeToArray(e,_);var k={}.toString.call(e).slice(8,-1);return"Object"===k&&e.constructor&&(k=e.constructor.name),"Map"===k||"Set"===k?Array.from(e):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?arrayLikeToArray_arrayLikeToArray(e,_):void 0}}function slicedToArray_slicedToArray(e,_){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||unsupportedIterableToArray_unsupportedIterableToArray(e,_)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function esm_objectWithoutProperties_objectWithoutProperties(e,_){if(null==e)return{};var k,I,C=function _objectWithoutPropertiesLoose(e,_){if(null==e)return{};var k={};for(var I in e)if({}.hasOwnProperty.call(e,I)){if(_.includes(I))continue;k[I]=e[I]}return k}(e,_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(e);for(I=0;I<R.length;I++)k=R[I],_.includes(k)||{}.propertyIsEnumerable.call(e,k)&&(C[k]=e[k])}return C}function esm_arrayLikeToArray_arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=Array(_);k<_;k++)I[k]=e[k];return I}function esm_unsupportedIterableToArray_unsupportedIterableToArray(e,_){if(e){if("string"==typeof e)return esm_arrayLikeToArray_arrayLikeToArray(e,_);var k={}.toString.call(e).slice(8,-1);return"Object"===k&&e.constructor&&(k=e.constructor.name),"Map"===k||"Set"===k?Array.from(e):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?esm_arrayLikeToArray_arrayLikeToArray(e,_):void 0}}function esm_slicedToArray_slicedToArray(e,_){return function arrayWithHoles_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function iterableToArrayLimit_iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||esm_unsupportedIterableToArray_unsupportedIterableToArray(e,_)||function nonIterableRest_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Lt=k(73935),Nt=k.n(Lt);function canUseDom(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var Dt={},At=[];function warning(e,_){}function note(e,_){}function call(e,_,k){_||Dt[k]||(e(!1,k),Dt[k]=!0)}function warningOnce(e,_){call(warning,e,_)}warningOnce.preMessage=function preMessage(e){At.push(e)},warningOnce.resetWarned=function resetWarned(){Dt={}},warningOnce.noteOnce=function noteOnce(e,_){call(note,e,_)};function esm_typeof_typeof(e){return(esm_typeof_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rt=k(11805);function useMemo(e,_,k){var I=he.useRef({});return"value"in I.current&&!k(I.current.condition,_)||(I.current.value=e(),I.current.condition=_),I.current.value}var xt=Symbol.for("react.element"),jt=Symbol.for("react.transitional.element"),Bt=Symbol.for("react.fragment");function isFragment(e){return e&&"object"===esm_typeof_typeof(e)&&(e.$$typeof===xt||e.$$typeof===jt)&&e.type===Bt}var Mt=function fillRef(e,_){"function"==typeof e?e(_):"object"===esm_typeof_typeof(e)&&e&&"current"in e&&(e.current=_)},Ft=function composeRef(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];var I=_.filter(Boolean);return I.length<=1?I[0]:function(e){_.forEach((function(_){Mt(_,e)}))}},Ht=function useComposeRef(){for(var e=arguments.length,_=new Array(e),k=0;k<e;k++)_[k]=arguments[k];return useMemo((function(){return Ft.apply(void 0,_)}),_,(function(e,_){return e.length!==_.length||e.every((function(e,k){return e!==_[k]}))}))},Kt=function supportRef(e){var _,k;if(!e)return!1;if(isReactElement(e)&&e.props.propertyIsEnumerable("ref"))return!0;var I=(0,Rt.isMemo)(e)?e.type.type:e.type;return!!("function"!=typeof I||null!==(_=I.prototype)&&void 0!==_&&_.render||I.$$typeof===Rt.ForwardRef)&&!!("function"!=typeof e||null!==(k=e.prototype)&&void 0!==k&&k.render||e.$$typeof===Rt.ForwardRef)};function isReactElement(e){return(0,he.isValidElement)(e)&&!isFragment(e)}var Ut=function getNodeRef(e){if(e&&isReactElement(e)){var _=e;return _.props.propertyIsEnumerable("ref")?_.props.ref:_.ref}return null};const Zt=he.createContext(null);function toConsumableArray_toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return esm_arrayLikeToArray_arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||esm_unsupportedIterableToArray_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vt=canUseDom()?he.useLayoutEffect:he.useEffect,Wt=function useLayoutEffect(e,_){var k=he.useRef(!0);Vt((function(){return e(k.current)}),_),Vt((function(){return k.current=!1,function(){k.current=!0}}),[])};const Gt=Wt;var $t=[];function toPropertyKey_toPropertyKey(e){var _=function toPrimitive_toPrimitive(e,_){if("object"!=esm_typeof_typeof(e)||!e)return e;var k=e[Symbol.toPrimitive];if(void 0!==k){var I=k.call(e,_||"default");if("object"!=esm_typeof_typeof(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"==esm_typeof_typeof(_)?_:_+""}function esm_defineProperty_defineProperty(e,_,k){return(_=toPropertyKey_toPropertyKey(_))in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}function helpers_esm_objectSpread2_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function esm_objectSpread2_objectSpread2(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?helpers_esm_objectSpread2_ownKeys(Object(k),!0).forEach((function(_){esm_defineProperty_defineProperty(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):helpers_esm_objectSpread2_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}var qt="data-rc-order",zt="data-rc-priority",Yt="rc-util-key",Jt=new Map;function getMark(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.mark;return _?_.startsWith("data-")?_:"data-".concat(_):Yt}function getContainer(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function getOrder(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function findStyles(e){return Array.from((Jt.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function injectCSS(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!canUseDom())return null;var k=_.csp,I=_.prepend,C=_.priority,R=void 0===C?0:C,j=getOrder(I),B="prependQueue"===j,H=document.createElement("style");H.setAttribute(qt,j),B&&R&&H.setAttribute(zt,"".concat(R)),null!=k&&k.nonce&&(H.nonce=null==k?void 0:k.nonce),H.innerHTML=e;var U=getContainer(_),V=U.firstChild;if(I){if(B){var G=(_.styles||findStyles(U)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(qt)))return!1;var _=Number(e.getAttribute(zt)||0);return R>=_}));if(G.length)return U.insertBefore(H,G[G.length-1].nextSibling),H}U.insertBefore(H,V)}else U.appendChild(H);return H}function findExistNode(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=getContainer(_);return(_.styles||findStyles(k)).find((function(k){return k.getAttribute(getMark(_))===e}))}function removeCSS(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=findExistNode(e,_);if(k){var I=getContainer(_);I.removeChild(k)}}function syncRealContainer(e,_){var k=Jt.get(e);if(!k||!function contains(e,_){if(!e)return!1;if(e.contains)return e.contains(_);for(var k=_;k;){if(k===e)return!0;k=k.parentNode}return!1}(document,k)){var I=injectCSS("",_),C=I.parentNode;Jt.set(e,C),e.removeChild(I)}}function updateCSS(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=getContainer(k),C=findStyles(I),R=esm_objectSpread2_objectSpread2(esm_objectSpread2_objectSpread2({},k),{},{styles:C});syncRealContainer(I,R);var j=findExistNode(_,R);if(j){var B,H,U;if(null!==(B=R.csp)&&void 0!==B&&B.nonce&&j.nonce!==(null===(H=R.csp)||void 0===H?void 0:H.nonce))j.nonce=null===(U=R.csp)||void 0===U?void 0:U.nonce;return j.innerHTML!==e&&(j.innerHTML=e),j}var V=injectCSS(e,R);return V.setAttribute(getMark(R),_),V}function measureScrollbarSize(e){var _="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),k=document.createElement("div");k.id=_;var I,C,R=k.style;if(R.position="absolute",R.left="0",R.top="0",R.width="100px",R.height="100px",R.overflow="scroll",e){var j=getComputedStyle(e);R.scrollbarColor=j.scrollbarColor,R.scrollbarWidth=j.scrollbarWidth;var B=getComputedStyle(e,"::-webkit-scrollbar"),H=parseInt(B.width,10),U=parseInt(B.height,10);try{var V=H?"width: ".concat(B.width,";"):"",G=U?"height: ".concat(B.height,";"):"";updateCSS("\n#".concat(_,"::-webkit-scrollbar {\n").concat(V,"\n").concat(G,"\n}"),_)}catch(e){I=H,C=U}}document.body.appendChild(k);var q=e&&I&&!isNaN(I)?I:k.offsetWidth-k.clientWidth,z=e&&C&&!isNaN(C)?C:k.offsetHeight-k.clientHeight;return document.body.removeChild(k),removeCSS(_),{width:q,height:z}}var Xt="rc-util-locker-".concat(Date.now()),Qt=0;function useScrollLocker(e){var _=!!e,k=esm_slicedToArray_slicedToArray(he.useState((function(){return Qt+=1,"".concat(Xt,"_").concat(Qt)})),1)[0];Gt((function(){if(_){var e=function getTargetScrollBarSize(e){return"undefined"!=typeof document&&e&&e instanceof Element?measureScrollbarSize(e):{width:0,height:0}}(document.body).width,I=function isBodyOverflowing(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}();updateCSS("\nhtml body {\n  overflow-y: hidden;\n  ".concat(I?"width: calc(100% - ".concat(e,"px);"):"","\n}"),k)}else removeCSS(k);return function(){removeCSS(k)}}),[_,k])}var en=!1;var tn=function getPortalContainer(e){return!1!==e&&(canUseDom()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)};const nn=he.forwardRef((function(e,_){var k=e.open,I=e.autoLock,C=e.getContainer,R=(e.debug,e.autoDestroy),j=void 0===R||R,B=e.children,H=esm_slicedToArray_slicedToArray(he.useState(k),2),U=H[0],V=H[1],G=U||k;he.useEffect((function(){(j||k)&&V(k)}),[k,j]);var q=esm_slicedToArray_slicedToArray(he.useState((function(){return tn(C)})),2),z=q[0],J=q[1];he.useEffect((function(){var e=tn(C);J(null!=e?e:null)}));var Q=function useDom(e,_){var k=esm_slicedToArray_slicedToArray(he.useState((function(){return canUseDom()?document.createElement("div"):null})),1)[0],I=he.useRef(!1),C=he.useContext(Zt),R=esm_slicedToArray_slicedToArray(he.useState($t),2),j=R[0],B=R[1],H=C||(I.current?void 0:function(e){B((function(_){return[e].concat(toConsumableArray_toConsumableArray(_))}))});function append(){k.parentElement||document.body.appendChild(k),I.current=!0}function cleanup(){var e;null===(e=k.parentElement)||void 0===e||e.removeChild(k),I.current=!1}return Gt((function(){return e?C?C(append):append():cleanup(),cleanup}),[e]),Gt((function(){j.length&&(j.forEach((function(e){return e()})),B($t))}),[j]),[k,H]}(G&&!z),ee=esm_slicedToArray_slicedToArray(Q,2),te=ee[0],ne=ee[1],re=null!=z?z:te;useScrollLocker(I&&k&&canUseDom()&&(re===te||re===document.body));var oe=null;B&&Kt(B)&&_&&(oe=B.ref);var ie=Ht(oe,_);if(!G||!canUseDom()||void 0===z)return null;var ae=!1===re||function inlineMock(e){return"boolean"==typeof e&&(en=e),en}(),le=B;return _&&(le=he.cloneElement(B,{ref:ie})),he.createElement(Zt.Provider,{value:ne},ae?le:(0,Lt.createPortal)(le,re))}));var rn=k(8116),on=k.n(rn);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var _=1;_<arguments.length;_++){var k=arguments[_];for(var I in k)({}).hasOwnProperty.call(k,I)&&(e[I]=k[I])}return e}).apply(null,arguments)}function toArray(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=[];return fe().Children.forEach(e,(function(e){(null!=e||_.keepEmpty)&&(Array.isArray(e)?k=k.concat(toArray(e)):isFragment(e)&&e.props?k=k.concat(toArray(e.props.children,_)):k.push(e))})),k}function helpers_esm_typeof_typeof(e){return(helpers_esm_typeof_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function esm_toPropertyKey_toPropertyKey(e){var _=function esm_toPrimitive_toPrimitive(e,_){if("object"!=helpers_esm_typeof_typeof(e)||!e)return e;var k=e[Symbol.toPrimitive];if(void 0!==k){var I=k.call(e,_||"default");if("object"!=helpers_esm_typeof_typeof(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"==helpers_esm_typeof_typeof(_)?_:_+""}function helpers_esm_defineProperty_defineProperty(e,_,k){return(_=esm_toPropertyKey_toPropertyKey(_))in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}function runtime_helpers_esm_objectSpread2_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function helpers_esm_objectSpread2_objectSpread2(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?runtime_helpers_esm_objectSpread2_ownKeys(Object(k),!0).forEach((function(_){helpers_esm_defineProperty_defineProperty(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):runtime_helpers_esm_objectSpread2_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function isDOM(e){return e instanceof HTMLElement||e instanceof SVGElement}function findDOMNode(e){var _,k=function getDOM(e){return e&&"object"===esm_typeof_typeof(e)&&isDOM(e.nativeElement)?e.nativeElement:isDOM(e)?e:null}(e);return k||(e instanceof fe().Component?null===(_=Nt().findDOMNode)||void 0===_?void 0:_.call(Nt(),e):null)}var an=he.createContext(null);var ln=k(91033),sn=new Map;var cn=new ln.Z((function onResize(e){e.forEach((function(e){var _,k=e.target;null===(_=sn.get(k))||void 0===_||_.forEach((function(e){return e(k)}))}))}));function _classCallCheck(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,_){for(var k=0;k<_.length;k++){var I=_[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(e,esm_toPropertyKey_toPropertyKey(I.key),I)}}function _setPrototypeOf(e,_){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,_){return e.__proto__=_,e})(e,_)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function _possibleConstructorReturn(e,_){if(_&&("object"==helpers_esm_typeof_typeof(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}var un=function(e){!function _inherits(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(_&&_.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),_&&_setPrototypeOf(e,_)}(DomWrapper,e);var _=function _createSuper(e){var _=_isNativeReflectConstruct();return function(){var k,I=_getPrototypeOf(e);if(_){var C=_getPrototypeOf(this).constructor;k=Reflect.construct(I,arguments,C)}else k=I.apply(this,arguments);return _possibleConstructorReturn(this,k)}}(DomWrapper);function DomWrapper(){return _classCallCheck(this,DomWrapper),_.apply(this,arguments)}return function _createClass(e,_,k){return _&&_defineProperties(e.prototype,_),k&&_defineProperties(e,k),Object.defineProperty(e,"prototype",{writable:!1}),e}(DomWrapper,[{key:"render",value:function render(){return this.props.children}}]),DomWrapper}(he.Component);function SingleObserver(e,_){var k=e.children,I=e.disabled,C=he.useRef(null),R=he.useRef(null),j=he.useContext(an),B="function"==typeof k,H=B?k(C):k,U=he.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),V=!B&&he.isValidElement(H)&&Kt(H),G=V?Ut(H):null,q=Ht(G,C),z=function getDom(){var e;return findDOMNode(C.current)||(C.current&&"object"===helpers_esm_typeof_typeof(C.current)?findDOMNode(null===(e=C.current)||void 0===e?void 0:e.nativeElement):null)||findDOMNode(R.current)};he.useImperativeHandle(_,(function(){return z()}));var J=he.useRef(e);J.current=e;var Q=he.useCallback((function(e){var _=J.current,k=_.onResize,I=_.data,C=e.getBoundingClientRect(),R=C.width,B=C.height,H=e.offsetWidth,V=e.offsetHeight,G=Math.floor(R),q=Math.floor(B);if(U.current.width!==G||U.current.height!==q||U.current.offsetWidth!==H||U.current.offsetHeight!==V){var z={width:G,height:q,offsetWidth:H,offsetHeight:V};U.current=z;var Q=H===Math.round(R)?R:H,ee=V===Math.round(B)?B:V,te=helpers_esm_objectSpread2_objectSpread2(helpers_esm_objectSpread2_objectSpread2({},z),{},{offsetWidth:Q,offsetHeight:ee});null==j||j(te,e,I),k&&Promise.resolve().then((function(){k(te,e)}))}}),[]);return he.useEffect((function(){var e=z();return e&&!I&&function observe(e,_){sn.has(e)||(sn.set(e,new Set),cn.observe(e)),sn.get(e).add(_)}(e,Q),function(){return function unobserve(e,_){sn.has(e)&&(sn.get(e).delete(_),sn.get(e).size||(cn.unobserve(e),sn.delete(e)))}(e,Q)}}),[C.current,I]),he.createElement(un,{ref:R},V?he.cloneElement(H,{ref:q}):H)}const dn=he.forwardRef(SingleObserver);function ResizeObserver(e,_){var k=e.children;return("function"==typeof k?[k]:toArray(k)).map((function(k,I){var C=(null==k?void 0:k.key)||"".concat("rc-observer-key","-").concat(I);return he.createElement(dn,_extends({},e,{key:C,ref:0===I?_:void 0}),k)}))}var pn=he.forwardRef(ResizeObserver);pn.Collection=function Collection(e){var _=e.children,k=e.onBatchResize,I=he.useRef(0),C=he.useRef([]),R=he.useContext(an),j=he.useCallback((function(e,_,j){I.current+=1;var B=I.current;C.current.push({size:e,element:_,data:j}),Promise.resolve().then((function(){B===I.current&&(null==k||k(C.current),C.current=[])})),null==R||R(e,_,j)}),[k,R]);return he.createElement(an.Provider,{value:j},_)};const hn=pn;function getRoot(e){var _;return null==e||null===(_=e.getRootNode)||void 0===_?void 0:_.call(e)}function getShadowRoot(e){return function inShadow(e){return getRoot(e)instanceof ShadowRoot}(e)?getRoot(e):null}function useEvent_useEvent(e){var _=he.useRef();return _.current=e,he.useCallback((function(){for(var e,k=arguments.length,I=new Array(k),C=0;C<k;C++)I[C]=arguments[C];return null===(e=_.current)||void 0===e?void 0:e.call.apply(e,[_].concat(I))}),[])}function helpers_esm_arrayLikeToArray_arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=Array(_);k<_;k++)I[k]=e[k];return I}function helpers_esm_slicedToArray_slicedToArray(e,_){return function esm_arrayWithHoles_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function esm_iterableToArrayLimit_iterableToArrayLimit(e,_){var k=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=k){var I,C,R,j,B=[],H=!0,U=!1;try{if(R=(k=k.call(e)).next,0===_){if(Object(k)!==k)return;H=!1}else for(;!(H=(I=R.call(k)).done)&&(B.push(I.value),B.length!==_);H=!0);}catch(e){U=!0,C=e}finally{try{if(!H&&null!=k.return&&(j=k.return(),Object(j)!==j))return}finally{if(U)throw C}}return B}}(e,_)||function helpers_esm_unsupportedIterableToArray_unsupportedIterableToArray(e,_){if(e){if("string"==typeof e)return helpers_esm_arrayLikeToArray_arrayLikeToArray(e,_);var k={}.toString.call(e).slice(8,-1);return"Object"===k&&e.constructor&&(k=e.constructor.name),"Map"===k||"Set"===k?Array.from(e):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?helpers_esm_arrayLikeToArray_arrayLikeToArray(e,_):void 0}}(e,_)||function esm_nonIterableRest_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fn=0;var mn=function getUseId(){return esm_objectSpread2_objectSpread2({},he).useId}();const gn=mn?function useId(e){var _=mn();return e||_}:function useCompatId(e){var _=helpers_esm_slicedToArray_slicedToArray(he.useState("ssr-id"),2),k=_[0],I=_[1];return he.useEffect((function(){var e=fn;fn+=1,I("rc_unique_".concat(e))}),[]),e||k},isMobile=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))};function extends_extends(){return(extends_extends=Object.assign?Object.assign.bind():function(e){for(var _=1;_<arguments.length;_++){var k=arguments[_];for(var I in k)({}).hasOwnProperty.call(k,I)&&(e[I]=k[I])}return e}).apply(null,arguments)}function runtime_helpers_esm_arrayLikeToArray_arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}function runtime_helpers_esm_slicedToArray_slicedToArray(e,_){return function helpers_esm_arrayWithHoles_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function helpers_esm_iterableToArrayLimit_iterableToArrayLimit(e,_){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var k=[],I=!0,C=!1,R=void 0;try{for(var j,B=e[Symbol.iterator]();!(I=(j=B.next()).done)&&(k.push(j.value),!_||k.length!==_);I=!0);}catch(e){C=!0,R=e}finally{try{I||null==B.return||B.return()}finally{if(C)throw R}}return k}}(e,_)||function runtime_helpers_esm_unsupportedIterableToArray_unsupportedIterableToArray(e,_){if(e){if("string"==typeof e)return runtime_helpers_esm_arrayLikeToArray_arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);return"Object"===k&&e.constructor&&(k=e.constructor.name),"Map"===k||"Set"===k?Array.from(e):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?runtime_helpers_esm_arrayLikeToArray_arrayLikeToArray(e,_):void 0}}(e,_)||function helpers_esm_nonIterableRest_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function runtime_helpers_esm_typeof_typeof(e){return(runtime_helpers_esm_typeof_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vn=he.createContext({});function classCallCheck_classCallCheck(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}function createClass_defineProperties(e,_){for(var k=0;k<_.length;k++){var I=_[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(e,I.key,I)}}function createClass_createClass(e,_,k){return _&&createClass_defineProperties(e.prototype,_),k&&createClass_defineProperties(e,k),e}function setPrototypeOf_setPrototypeOf(e,_){return(setPrototypeOf_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,_){return e.__proto__=_,e})(e,_)}function inherits_inherits(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(_&&_.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_&&setPrototypeOf_setPrototypeOf(e,_)}function getPrototypeOf_getPrototypeOf(e){return(getPrototypeOf_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function assertThisInitialized_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function possibleConstructorReturn_possibleConstructorReturn(e,_){return!_||"object"!==runtime_helpers_esm_typeof_typeof(_)&&"function"!=typeof _?assertThisInitialized_assertThisInitialized(e):_}function createSuper_createSuper(e){var _=function isNativeReflectConstruct_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var k,I=getPrototypeOf_getPrototypeOf(e);if(_){var C=getPrototypeOf_getPrototypeOf(this).constructor;k=Reflect.construct(I,arguments,C)}else k=I.apply(this,arguments);return possibleConstructorReturn_possibleConstructorReturn(this,k)}}const yn=function(e){inherits_inherits(DomWrapper,e);var _=createSuper_createSuper(DomWrapper);function DomWrapper(){return classCallCheck_classCallCheck(this,DomWrapper),_.apply(this,arguments)}return createClass_createClass(DomWrapper,[{key:"render",value:function render(){return this.props.children}}]),DomWrapper}(he.Component);function useSafeState(e){var _=he.useRef(!1),k=helpers_esm_slicedToArray_slicedToArray(he.useState(e),2),I=k[0],C=k[1];return he.useEffect((function(){return _.current=!1,function(){_.current=!0}}),[]),[I,function safeSetState(e,k){k&&_.current||C(e)}]}"undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;var bn="none",_n="appear",wn="enter",En="leave",Sn="none",On="prepare",Tn="start",kn="active",In="end",Cn="prepared";function makePrefixMap(e,_){var k={};return k[e.toLowerCase()]=_.toLowerCase(),k["Webkit".concat(e)]="webkit".concat(_),k["Moz".concat(e)]="moz".concat(_),k["ms".concat(e)]="MS".concat(_),k["O".concat(e)]="o".concat(_.toLowerCase()),k}var Pn=function getVendorPrefixes(e,_){var k={animationend:makePrefixMap("Animation","AnimationEnd"),transitionend:makePrefixMap("Transition","TransitionEnd")};return e&&("AnimationEvent"in _||delete k.animationend.animation,"TransitionEvent"in _||delete k.transitionend.transition),k}(canUseDom(),"undefined"!=typeof window?window:{}),Ln={};if(canUseDom()){var Nn=document.createElement("div");Ln=Nn.style}var Dn={};function getVendorPrefixedEventName(e){if(Dn[e])return Dn[e];var _=Pn[e];if(_)for(var k=Object.keys(_),I=k.length,C=0;C<I;C+=1){var R=k[C];if(Object.prototype.hasOwnProperty.call(_,R)&&R in Ln)return Dn[e]=_[R],Dn[e]}return""}var An=getVendorPrefixedEventName("animationend"),Rn=getVendorPrefixedEventName("transitionend"),xn=!(!An||!Rn),jn=An||"animationend",Bn=Rn||"transitionend";function getTransitionName(e,_){return e?"object"===runtime_helpers_esm_typeof_typeof(e)?e[_.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(_):null}const Mn=canUseDom()?he.useLayoutEffect:he.useEffect;var Fn=function raf(e){return+setTimeout(e,16)},Hn=function caf(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(Fn=function raf(e){return window.requestAnimationFrame(e)},Hn=function caf(e){return window.cancelAnimationFrame(e)});var Kn=0,Un=new Map;function cleanup(e){Un.delete(e)}var Zn=function wrapperRaf(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=Kn+=1;function callRef(_){if(0===_)cleanup(k),e();else{var I=Fn((function(){callRef(_-1)}));Un.set(k,I)}}return callRef(_),k};Zn.cancel=function(e){var _=Un.get(e);return cleanup(e),Hn(_)};const Vn=Zn;var Wn=[On,Tn,kn,In],Gn=[On,Cn];function isActive(e){return e===kn||e===In}const useStepQueue=function(e,_,k){var I=runtime_helpers_esm_slicedToArray_slicedToArray(useSafeState(Sn),2),C=I[0],R=I[1],j=runtime_helpers_esm_slicedToArray_slicedToArray(function(){var e=he.useRef(null);function cancelNextFrame(){Vn.cancel(e.current)}return he.useEffect((function(){return function(){cancelNextFrame()}}),[]),[function nextFrame(_){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;cancelNextFrame();var I=Vn((function(){k<=1?_({isCanceled:function isCanceled(){return I!==e.current}}):nextFrame(_,k-1)}));e.current=I},cancelNextFrame]}(),2),B=j[0],H=j[1];var U=_?Gn:Wn;return Mn((function(){if(C!==Sn&&C!==In){var e=U.indexOf(C),_=U[e+1],I=k(C);false===I?R(_,!0):_&&B((function(e){function doNext(){e.isCanceled()||R(_,!0)}!0===I?doNext():Promise.resolve(I).then(doNext)}))}}),[e,C]),he.useEffect((function(){return function(){H()}}),[]),[function startQueue(){R(On,!0)},C]};function useStatus(e,_,k,C){var R=C.motionEnter,j=void 0===R||R,B=C.motionAppear,H=void 0===B||B,U=C.motionLeave,V=void 0===U||U,G=C.motionDeadline,q=C.motionLeaveImmediately,z=C.onAppearPrepare,J=C.onEnterPrepare,Q=C.onLeavePrepare,ee=C.onAppearStart,te=C.onEnterStart,ne=C.onLeaveStart,re=C.onAppearActive,oe=C.onEnterActive,ie=C.onLeaveActive,ae=C.onAppearEnd,le=C.onEnterEnd,se=C.onLeaveEnd,ce=C.onVisibleChanged,ue=runtime_helpers_esm_slicedToArray_slicedToArray(useSafeState(),2),de=ue[0],pe=ue[1],fe=runtime_helpers_esm_slicedToArray_slicedToArray(function useSyncState(e){var _=helpers_esm_slicedToArray_slicedToArray(he.useReducer((function(e){return e+1}),0),2)[1],k=he.useRef(e);return[useEvent_useEvent((function(){return k.current})),useEvent_useEvent((function(e){k.current="function"==typeof e?e(k.current):e,_()}))]}(bn),2),me=fe[0],ge=fe[1],ve=runtime_helpers_esm_slicedToArray_slicedToArray(useSafeState(null),2),ye=ve[0],be=ve[1],_e=me(),we=(0,he.useRef)(!1),Ee=(0,he.useRef)(null);function getDomElement(){return k()}var Se=(0,he.useRef)(!1);function updateMotionEndStatus(){ge(bn),be(null,!0)}var Oe=useEvent_useEvent((function(e){var _=me();if(_!==bn){var k=getDomElement();if(!e||e.deadline||e.target===k){var I,C=Se.current;_===_n&&C?I=null==ae?void 0:ae(k,e):_===wn&&C?I=null==le?void 0:le(k,e):_===En&&C&&(I=null==se?void 0:se(k,e)),C&&!1!==I&&updateMotionEndStatus()}}})),Te=runtime_helpers_esm_slicedToArray_slicedToArray(function(e){var _=(0,he.useRef)();function removeMotionEvents(_){_&&(_.removeEventListener(Bn,e),_.removeEventListener(jn,e))}return he.useEffect((function(){return function(){removeMotionEvents(_.current)}}),[]),[function patchMotionEvents(k){_.current&&_.current!==k&&removeMotionEvents(_.current),k&&k!==_.current&&(k.addEventListener(Bn,e),k.addEventListener(jn,e),_.current=k)},removeMotionEvents]}(Oe),1)[0],ke=function getEventHandlers(e){switch(e){case _n:return(0,I.Z)((0,I.Z)((0,I.Z)({},On,z),Tn,ee),kn,re);case wn:return(0,I.Z)((0,I.Z)((0,I.Z)({},On,J),Tn,te),kn,oe);case En:return(0,I.Z)((0,I.Z)((0,I.Z)({},On,Q),Tn,ne),kn,ie);default:return{}}},Ie=he.useMemo((function(){return ke(_e)}),[_e]),Ce=runtime_helpers_esm_slicedToArray_slicedToArray(useStepQueue(_e,!e,(function(e){if(e===On){var _=Ie.prepare;return!!_&&_(getDomElement())}var k;Le in Ie&&be((null===(k=Ie[Le])||void 0===k?void 0:k.call(Ie,getDomElement(),null))||null);return Le===kn&&_e!==bn&&(Te(getDomElement()),G>0&&(clearTimeout(Ee.current),Ee.current=setTimeout((function(){Oe({deadline:!0})}),G))),Le===Cn&&updateMotionEndStatus(),true})),2),Pe=Ce[0],Le=Ce[1],Ne=isActive(Le);Se.current=Ne,Mn((function(){pe(_);var k,I=we.current;we.current=!0,!I&&_&&H&&(k=_n),I&&_&&j&&(k=wn),(I&&!_&&V||!I&&q&&!_&&V)&&(k=En);var C=ke(k);k&&(e||C.prepare)?(ge(k),Pe()):ge(bn)}),[_]),(0,he.useEffect)((function(){(_e===_n&&!H||_e===wn&&!j||_e===En&&!V)&&ge(bn)}),[H,j,V]),(0,he.useEffect)((function(){return function(){we.current=!1,clearTimeout(Ee.current)}}),[]);var De=he.useRef(!1);(0,he.useEffect)((function(){de&&(De.current=!0),void 0!==de&&_e===bn&&((De.current||de)&&(null==ce||ce(de)),De.current=!0)}),[de,_e]);var Ae=ye;return Ie.prepare&&Le===Tn&&(Ae=_objectSpread2({transition:"none"},Ae)),[_e,Le,Ae,null!=de?de:_]}const $n=function genCSSMotion(e){var _=e;"object"===runtime_helpers_esm_typeof_typeof(e)&&(_=e.transitionSupport);var k=he.forwardRef((function(e,k){var C=e.visible,R=void 0===C||C,B=e.removeOnLeave,H=void 0===B||B,U=e.forceRender,V=e.children,G=e.motionName,q=e.leavedClassName,z=e.eventProps,J=function isSupportTransition(e,k){return!(!e.motionName||!_||!1===k)}(e,he.useContext(vn).motion),Q=(0,he.useRef)(),ee=(0,he.useRef)();var te=runtime_helpers_esm_slicedToArray_slicedToArray(useStatus(J,R,(function getDomElement(){try{return Q.current instanceof HTMLElement?Q.current:findDOMNode(ee.current)}catch(e){return null}}),e),4),ne=te[0],re=te[1],oe=te[2],ie=te[3],ae=he.useRef(ie);ie&&(ae.current=!0);var le,se=he.useCallback((function(e){Q.current=e,Mt(k,e)}),[k]),ce=_objectSpread2(_objectSpread2({},z),{},{visible:R});if(V)if(ne===bn)le=ie?V(_objectSpread2({},ce),se):!H&&ae.current&&q?V(_objectSpread2(_objectSpread2({},ce),{},{className:q}),se):U||!H&&!q?V(_objectSpread2(_objectSpread2({},ce),{},{style:{display:"none"}}),se):null;else{var ue;re===On?ue="prepare":isActive(re)?ue="active":re===Tn&&(ue="start");var de=getTransitionName(G,"".concat(ne,"-").concat(ue));le=V(_objectSpread2(_objectSpread2({},ce),{},{className:j()(getTransitionName(G,ne),(0,I.Z)((0,I.Z)({},de,de&&ue),G,"string"==typeof G)),style:oe}),se)}else le=null;he.isValidElement(le)&&Kt(le)&&(Ut(le)||(le=he.cloneElement(le,{ref:se})));return he.createElement(yn,{ref:ee},le)}));return k.displayName="CSSMotion",k}(xn);var qn="add",zn="keep",Yn="remove",Jn="removed";function wrapKeyToObject(e){var _;return _objectSpread2(_objectSpread2({},_=e&&"object"===runtime_helpers_esm_typeof_typeof(e)&&"key"in e?e:{key:e}),{},{key:String(_.key)})}function parseKeys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(wrapKeyToObject)}function diffKeys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],k=[],I=0,C=_.length,R=parseKeys(e),j=parseKeys(_);R.forEach((function(e){for(var _=!1,R=I;R<C;R+=1){var B=j[R];if(B.key===e.key){I<R&&(k=k.concat(j.slice(I,R).map((function(e){return _objectSpread2(_objectSpread2({},e),{},{status:qn})}))),I=R),k.push(_objectSpread2(_objectSpread2({},B),{},{status:zn})),I+=1,_=!0;break}}_||k.push(_objectSpread2(_objectSpread2({},e),{},{status:Yn}))})),I<C&&(k=k.concat(j.slice(I).map((function(e){return _objectSpread2(_objectSpread2({},e),{},{status:qn})}))));var B={};k.forEach((function(e){var _=e.key;B[_]=(B[_]||0)+1}));var H=Object.keys(B).filter((function(e){return B[e]>1}));return H.forEach((function(e){(k=k.filter((function(_){var k=_.key,I=_.status;return k!==e||I!==Yn}))).forEach((function(_){_.key===e&&(_.status=zn)}))})),k}var Xn=["component","children","onVisibleChanged","onAllRemoved"],Qn=["status"],er=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];(function genCSSMotionList(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$n,k=function(e){inherits_inherits(CSSMotionList,e);var k=createSuper_createSuper(CSSMotionList);function CSSMotionList(){var e;classCallCheck_classCallCheck(this,CSSMotionList);for(var _=arguments.length,C=new Array(_),R=0;R<_;R++)C[R]=arguments[R];return e=k.call.apply(k,[this].concat(C)),(0,I.Z)(assertThisInitialized_assertThisInitialized(e),"state",{keyEntities:[]}),(0,I.Z)(assertThisInitialized_assertThisInitialized(e),"removeKey",(function(_){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==_?e:_objectSpread2(_objectSpread2({},e),{},{status:Jn})}))}}),(function(){0===e.state.keyEntities.filter((function(e){return e.status!==Jn})).length&&e.props.onAllRemoved&&e.props.onAllRemoved()}))})),e}return createClass_createClass(CSSMotionList,[{key:"render",value:function render(){var e=this,k=this.state.keyEntities,I=this.props,R=I.component,j=I.children,B=I.onVisibleChanged,H=(I.onAllRemoved,objectWithoutProperties_objectWithoutProperties(I,Xn)),U=R||he.Fragment,V={};return er.forEach((function(e){V[e]=H[e],delete H[e]})),delete H.keys,he.createElement(U,H,k.map((function(k,I){var R=k.status,H=objectWithoutProperties_objectWithoutProperties(k,Qn),U=R===qn||R===zn;return he.createElement(_,(0,C.Z)({},V,{key:H.key,visible:U,eventProps:H,onVisibleChanged:function onVisibleChanged(_){null==B||B(_,{key:H.key}),_||e.removeKey(H.key)}}),(function(e,_){return j(_objectSpread2(_objectSpread2({},e),{},{index:I}),_)}))})))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(e,_){var k=e.keys,I=_.keyEntities,C=parseKeys(k);return{keyEntities:diffKeys(I,C).filter((function(e){var _=I.find((function(_){var k=_.key;return e.key===k}));return!_||_.status!==Jn||e.status!==Yn}))}}}]),CSSMotionList}(he.Component);return(0,I.Z)(k,"defaultProps",{component:"div"}),k})(xn);const tr=$n;function Arrow(e){var _=e.prefixCls,k=e.align,I=e.arrow,C=e.arrowPos,R=I||{},j=R.className,B=R.content,H=C.x,U=void 0===H?0:H,V=C.y,G=void 0===V?0:V,q=he.useRef();if(!k||!k.points)return null;var z={position:"absolute"};if(!1!==k.autoArrow){var J=k.points[0],Q=k.points[1],ee=J[0],te=J[1],ne=Q[0],re=Q[1];ee!==ne&&["t","b"].includes(ee)?"t"===ee?z.top=0:z.bottom=0:z.top=G,te!==re&&["l","r"].includes(te)?"l"===te?z.left=0:z.right=0:z.left=U}return he.createElement("div",{ref:q,className:on()("".concat(_,"-arrow"),j),style:z},B)}function Mask(e){var _=e.prefixCls,k=e.open,I=e.zIndex,C=e.mask,R=e.motion;return C?he.createElement(tr,extends_extends({},R,{motionAppear:!0,visible:k,removeOnLeave:!0}),(function(e){var k=e.className;return he.createElement("div",{style:{zIndex:I},className:on()("".concat(_,"-mask"),k)})})):null}const nr=he.memo((function(e){return e.children}),(function(e,_){return _.cache}));const rr=he.forwardRef((function(e,_){var k=e.popup,I=e.className,C=e.prefixCls,R=e.style,j=e.target,B=e.onVisibleChanged,H=e.open,U=e.keepDom,V=e.fresh,G=e.onClick,q=e.mask,z=e.arrow,J=e.arrowPos,Q=e.align,ee=e.motion,te=e.maskMotion,ne=e.forceRender,re=e.getPopupContainer,oe=e.autoDestroy,ie=e.portal,ae=e.zIndex,le=e.onMouseEnter,se=e.onMouseLeave,ce=e.onPointerEnter,ue=e.onPointerDownCapture,de=e.ready,pe=e.offsetX,fe=e.offsetY,me=e.offsetR,ge=e.offsetB,ve=e.onAlign,ye=e.onPrepare,be=e.stretch,_e=e.targetWidth,we=e.targetHeight,Ee="function"==typeof k?k():k,Se=H||U,Oe=(null==re?void 0:re.length)>0,Te=slicedToArray_slicedToArray(he.useState(!re||!Oe),2),ke=Te[0],Ie=Te[1];if(Gt((function(){!ke&&Oe&&j&&Ie(!0)}),[ke,Oe,j]),!ke)return null;var Ce="auto",Pe={left:"-1000vw",top:"-1000vh",right:Ce,bottom:Ce};if(de||!H){var Le,Ne=Q.points,De=Q.dynamicInset||(null===(Le=Q._experimental)||void 0===Le?void 0:Le.dynamicInset),Ae=De&&"r"===Ne[0][1],Re=De&&"b"===Ne[0][0];Ae?(Pe.right=me,Pe.left=Ce):(Pe.left=pe,Pe.right=Ce),Re?(Pe.bottom=ge,Pe.top=Ce):(Pe.top=fe,Pe.bottom=Ce)}var xe={};return be&&(be.includes("height")&&we?xe.height=we:be.includes("minHeight")&&we&&(xe.minHeight=we),be.includes("width")&&_e?xe.width=_e:be.includes("minWidth")&&_e&&(xe.minWidth=_e)),H||(xe.pointerEvents="none"),he.createElement(ie,{open:ne||Se,getContainer:re&&function(){return re(j)},autoDestroy:oe},he.createElement(Mask,{prefixCls:C,open:H,zIndex:ae,mask:q,motion:te}),he.createElement(hn,{onResize:ve,disabled:!H},(function(e){return he.createElement(tr,extends_extends({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:ne,leavedClassName:"".concat(C,"-hidden")},ee,{onAppearPrepare:ye,onEnterPrepare:ye,visible:H,onVisibleChanged:function onVisibleChanged(e){var _;null==ee||null===(_=ee.onVisibleChanged)||void 0===_||_.call(ee,e),B(e)}}),(function(k,j){var B=k.className,U=k.style,q=on()(C,B,I);return he.createElement("div",{ref:Ft(e,_,j),className:q,style:objectSpread2_objectSpread2(objectSpread2_objectSpread2(objectSpread2_objectSpread2(objectSpread2_objectSpread2({"--arrow-x":"".concat(J.x||0,"px"),"--arrow-y":"".concat(J.y||0,"px")},Pe),xe),U),{},{boxSizing:"border-box",zIndex:ae},R),onMouseEnter:le,onMouseLeave:se,onPointerEnter:ce,onClick:G,onPointerDownCapture:ue},z&&he.createElement(Arrow,{prefixCls:C,arrow:z,arrowPos:J,align:Q}),he.createElement(nr,{cache:!H&&!V},Ee))}))})))}));const or=he.forwardRef((function(e,_){var k=e.children,I=e.getTriggerDOMNode,C=Kt(k),R=he.useCallback((function(e){Mt(_,I?I(e):e)}),[I]),j=Ht(R,Ut(k));return C?he.cloneElement(k,{ref:j}):k}));const ir=he.createContext(null);function useAction_toArray(e){return e?Array.isArray(e)?e:[e]:[]}function useAction(e,_,k,I){return he.useMemo((function(){var C=useAction_toArray(null!=k?k:_),R=useAction_toArray(null!=I?I:_),j=new Set(C),B=new Set(R);return e&&(j.has("hover")&&(j.delete("hover"),j.add("click")),B.has("hover")&&(B.delete("hover"),B.add("click"))),[j,B]}),[e,_,k,I])}function isPointsEq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],k=arguments.length>2?arguments[2]:void 0;return k?e[0]===_[0]:e[0]===_[0]&&e[1]===_[1]}function getAlignPopupClassName(e,_,k,I){for(var C=k.points,R=Object.keys(e),j=0;j<R.length;j+=1){var B,H=R[j];if(isPointsEq(null===(B=e[H])||void 0===B?void 0:B.points,C,I))return"".concat(_,"-placement-").concat(H)}return""}function getMotion(e,_,k,I){return _||(k?{motionName:"".concat(e,"-").concat(k)}:I?{motionName:I}:null)}function getWin(e){return e.ownerDocument.defaultView}function collectScroller(e){for(var _=[],k=null==e?void 0:e.parentElement,I=["hidden","scroll","clip","auto"];k;){var C=getWin(k).getComputedStyle(k);[C.overflowX,C.overflowY,C.overflow].some((function(e){return I.includes(e)}))&&_.push(k),k=k.parentElement}return _}function toNum(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?_:e}function getPxValue(e){return toNum(parseFloat(e),0)}function getVisibleArea(e,_){var k=objectSpread2_objectSpread2({},e);return(_||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var _=getWin(e).getComputedStyle(e),I=_.overflow,C=_.overflowClipMargin,R=_.borderTopWidth,j=_.borderBottomWidth,B=_.borderLeftWidth,H=_.borderRightWidth,U=e.getBoundingClientRect(),V=e.offsetHeight,G=e.clientHeight,q=e.offsetWidth,z=e.clientWidth,J=getPxValue(R),Q=getPxValue(j),ee=getPxValue(B),te=getPxValue(H),ne=toNum(Math.round(U.width/q*1e3)/1e3),re=toNum(Math.round(U.height/V*1e3)/1e3),oe=(q-z-ee-te)*ne,ie=(V-G-J-Q)*re,ae=J*re,le=Q*re,se=ee*ne,ce=te*ne,ue=0,de=0;if("clip"===I){var pe=getPxValue(C);ue=pe*ne,de=pe*re}var he=U.x+se-ue,fe=U.y+ae-de,me=he+U.width+2*ue-se-ce-oe,ge=fe+U.height+2*de-ae-le-ie;k.left=Math.max(k.left,he),k.top=Math.max(k.top,fe),k.right=Math.min(k.right,me),k.bottom=Math.min(k.bottom,ge)}})),k}function getUnitOffset(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k="".concat(_),I=k.match(/^(.*)\%$/);return I?e*(parseFloat(I[1])/100):parseFloat(k)}function getNumberOffset(e,_){var k=slicedToArray_slicedToArray(_||[],2),I=k[0],C=k[1];return[getUnitOffset(e.width,I),getUnitOffset(e.height,C)]}function splitPoints(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function getAlignPoint(e,_){var k,I=_[0],C=_[1];return k="t"===I?e.y:"b"===I?e.y+e.height:e.y+e.height/2,{x:"l"===C?e.x:"r"===C?e.x+e.width:e.x+e.width/2,y:k}}function reversePoints(e,_){var k={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,I){return I===_?k[e]||"c":e})).join("")}function useAlign(e,_,k,I,C,R,j){var B=slicedToArray_slicedToArray(he.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:C[I]||{}}),2),H=B[0],U=B[1],V=he.useRef(0),G=he.useMemo((function(){return _?collectScroller(_):[]}),[_]),q=he.useRef({});e||function resetFlipCache(){q.current={}}();var z=useEvent_useEvent((function(){if(_&&k&&e){var B,H,V,z,J,Q=_,ee=Q.ownerDocument,te=getWin(Q).getComputedStyle(Q),ne=te.width,re=te.height,oe=te.position,ie=Q.style.left,ae=Q.style.top,le=Q.style.right,se=Q.style.bottom,ce=Q.style.overflow,ue=objectSpread2_objectSpread2(objectSpread2_objectSpread2({},C[I]),R),de=ee.createElement("div");if(null===(B=Q.parentElement)||void 0===B||B.appendChild(de),de.style.left="".concat(Q.offsetLeft,"px"),de.style.top="".concat(Q.offsetTop,"px"),de.style.position=oe,de.style.height="".concat(Q.offsetHeight,"px"),de.style.width="".concat(Q.offsetWidth,"px"),Q.style.left="0",Q.style.top="0",Q.style.right="auto",Q.style.bottom="auto",Q.style.overflow="hidden",Array.isArray(k))J={x:k[0],y:k[1],width:0,height:0};else{var pe,he,fe=k.getBoundingClientRect();fe.x=null!==(pe=fe.x)&&void 0!==pe?pe:fe.left,fe.y=null!==(he=fe.y)&&void 0!==he?he:fe.top,J={x:fe.x,y:fe.y,width:fe.width,height:fe.height}}var me=Q.getBoundingClientRect();me.x=null!==(H=me.x)&&void 0!==H?H:me.left,me.y=null!==(V=me.y)&&void 0!==V?V:me.top;var ge=ee.documentElement,ve=ge.clientWidth,ye=ge.clientHeight,be=ge.scrollWidth,_e=ge.scrollHeight,we=ge.scrollTop,Ee=ge.scrollLeft,Se=me.height,Oe=me.width,Te=J.height,ke=J.width,Ie={left:0,top:0,right:ve,bottom:ye},Ce={left:-Ee,top:-we,right:be-Ee,bottom:_e-we},Pe=ue.htmlRegion,Le="visible",Ne="visibleFirst";"scroll"!==Pe&&Pe!==Ne&&(Pe=Le);var De=Pe===Ne,Ae=getVisibleArea(Ce,G),Re=getVisibleArea(Ie,G),xe=Pe===Le?Re:Ae,je=De?Re:xe;Q.style.left="auto",Q.style.top="auto",Q.style.right="0",Q.style.bottom="0";var Be=Q.getBoundingClientRect();Q.style.left=ie,Q.style.top=ae,Q.style.right=le,Q.style.bottom=se,Q.style.overflow=ce,null===(z=Q.parentElement)||void 0===z||z.removeChild(de);var Me=toNum(Math.round(Oe/parseFloat(ne)*1e3)/1e3),Fe=toNum(Math.round(Se/parseFloat(re)*1e3)/1e3);if(0===Me||0===Fe||isDOM(k)&&!function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var _=e.getBBox(),k=_.width,I=_.height;if(k||I)return!0}if(e.getBoundingClientRect){var C=e.getBoundingClientRect(),R=C.width,j=C.height;if(R||j)return!0}}return!1}(k))return;var He=ue.offset,Ke=ue.targetOffset,Ue=slicedToArray_slicedToArray(getNumberOffset(me,He),2),Ze=Ue[0],Ve=Ue[1],We=slicedToArray_slicedToArray(getNumberOffset(J,Ke),2),Ge=We[0],$e=We[1];J.x-=Ge,J.y-=$e;var qe=slicedToArray_slicedToArray(ue.points||[],2),ze=qe[0],Ye=splitPoints(qe[1]),Je=splitPoints(ze),Xe=getAlignPoint(J,Ye),Qe=getAlignPoint(me,Je),et=objectSpread2_objectSpread2({},ue),tt=Xe.x-Qe.x+Ze,nt=Xe.y-Qe.y+Ve;function getIntersectionVisibleArea(e,_){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xe,I=me.x+e,C=me.y+_,R=I+Oe,j=C+Se,B=Math.max(I,k.left),H=Math.max(C,k.top),U=Math.min(R,k.right),V=Math.min(j,k.bottom);return Math.max(0,(U-B)*(V-H))}var rt,ot,it,at,lt=getIntersectionVisibleArea(tt,nt),st=getIntersectionVisibleArea(tt,nt,Re),ct=getAlignPoint(J,["t","l"]),ut=getAlignPoint(me,["t","l"]),dt=getAlignPoint(J,["b","r"]),pt=getAlignPoint(me,["b","r"]),ht=ue.overflow||{},ft=ht.adjustX,mt=ht.adjustY,gt=ht.shiftX,vt=ht.shiftY,yt=function supportAdjust(e){return"boolean"==typeof e?e:e>=0};function syncNextPopupPosition(){rt=me.y+nt,ot=rt+Se,it=me.x+tt,at=it+Oe}syncNextPopupPosition();var bt=yt(mt),_t=Je[0]===Ye[0];if(bt&&"t"===Je[0]&&(ot>je.bottom||q.current.bt)){var wt=nt;_t?wt-=Se-Te:wt=ct.y-pt.y-Ve;var Et=getIntersectionVisibleArea(tt,wt),St=getIntersectionVisibleArea(tt,wt,Re);Et>lt||Et===lt&&(!De||St>=st)?(q.current.bt=!0,nt=wt,Ve=-Ve,et.points=[reversePoints(Je,0),reversePoints(Ye,0)]):q.current.bt=!1}if(bt&&"b"===Je[0]&&(rt<je.top||q.current.tb)){var Ot=nt;_t?Ot+=Se-Te:Ot=dt.y-ut.y-Ve;var Tt=getIntersectionVisibleArea(tt,Ot),kt=getIntersectionVisibleArea(tt,Ot,Re);Tt>lt||Tt===lt&&(!De||kt>=st)?(q.current.tb=!0,nt=Ot,Ve=-Ve,et.points=[reversePoints(Je,0),reversePoints(Ye,0)]):q.current.tb=!1}var It=yt(ft),Ct=Je[1]===Ye[1];if(It&&"l"===Je[1]&&(at>je.right||q.current.rl)){var Pt=tt;Ct?Pt-=Oe-ke:Pt=ct.x-pt.x-Ze;var Lt=getIntersectionVisibleArea(Pt,nt),Nt=getIntersectionVisibleArea(Pt,nt,Re);Lt>lt||Lt===lt&&(!De||Nt>=st)?(q.current.rl=!0,tt=Pt,Ze=-Ze,et.points=[reversePoints(Je,1),reversePoints(Ye,1)]):q.current.rl=!1}if(It&&"r"===Je[1]&&(it<je.left||q.current.lr)){var Dt=tt;Ct?Dt+=Oe-ke:Dt=dt.x-ut.x-Ze;var At=getIntersectionVisibleArea(Dt,nt),Rt=getIntersectionVisibleArea(Dt,nt,Re);At>lt||At===lt&&(!De||Rt>=st)?(q.current.lr=!0,tt=Dt,Ze=-Ze,et.points=[reversePoints(Je,1),reversePoints(Ye,1)]):q.current.lr=!1}syncNextPopupPosition();var xt=!0===gt?0:gt;"number"==typeof xt&&(it<Re.left&&(tt-=it-Re.left-Ze,J.x+ke<Re.left+xt&&(tt+=J.x-Re.left+ke-xt)),at>Re.right&&(tt-=at-Re.right-Ze,J.x>Re.right-xt&&(tt+=J.x-Re.right+xt)));var jt=!0===vt?0:vt;"number"==typeof jt&&(rt<Re.top&&(nt-=rt-Re.top-Ve,J.y+Te<Re.top+jt&&(nt+=J.y-Re.top+Te-jt)),ot>Re.bottom&&(nt-=ot-Re.bottom-Ve,J.y>Re.bottom-jt&&(nt+=J.y-Re.bottom+jt)));var Bt=me.x+tt,Mt=Bt+Oe,Ft=me.y+nt,Ht=Ft+Se,Kt=J.x,Ut=Kt+ke,Zt=J.y,Vt=Zt+Te,Wt=(Math.max(Bt,Kt)+Math.min(Mt,Ut))/2-Bt,Gt=(Math.max(Ft,Zt)+Math.min(Ht,Vt))/2-Ft;null==j||j(_,et);var $t=Be.right-me.x-(tt+me.width),qt=Be.bottom-me.y-(nt+me.height);1===Me&&(tt=Math.round(tt),$t=Math.round($t)),1===Fe&&(nt=Math.round(nt),qt=Math.round(qt)),U({ready:!0,offsetX:tt/Me,offsetY:nt/Fe,offsetR:$t/Me,offsetB:qt/Fe,arrowX:Wt/Me,arrowY:Gt/Fe,scaleX:Me,scaleY:Fe,align:et})}})),J=function resetReady(){U((function(e){return objectSpread2_objectSpread2(objectSpread2_objectSpread2({},e),{},{ready:!1})}))};return Gt(J,[I]),Gt((function(){e||J()}),[e]),[H.ready,H.offsetX,H.offsetY,H.offsetR,H.offsetB,H.arrowX,H.arrowY,H.scaleX,H.scaleY,H.align,function triggerAlign(){V.current+=1;var e=V.current;Promise.resolve().then((function(){V.current===e&&z()}))}]}function helpers_esm_toConsumableArray_toConsumableArray(e){return function esm_arrayWithoutHoles_arrayWithoutHoles(e){if(Array.isArray(e))return arrayLikeToArray_arrayLikeToArray(e)}(e)||function iterableToArray_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||unsupportedIterableToArray_unsupportedIterableToArray(e)||function nonIterableSpread_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useWatch(e,_,k,I,C){Gt((function(){if(e&&_&&k){var R=k,j=collectScroller(_),B=collectScroller(R),H=getWin(R),U=new Set([H].concat(helpers_esm_toConsumableArray_toConsumableArray(j),helpers_esm_toConsumableArray_toConsumableArray(B)));function notifyScroll(){I(),C()}return U.forEach((function(e){e.addEventListener("scroll",notifyScroll,{passive:!0})})),H.addEventListener("resize",notifyScroll,{passive:!0}),I(),function(){U.forEach((function(e){e.removeEventListener("scroll",notifyScroll),H.removeEventListener("resize",notifyScroll)}))}}}),[e,_,k])}function useWinClick(e,_,k,I,C,R,j,B){var H=he.useRef(e);H.current=e;var U=he.useRef(!1);return he.useEffect((function(){if(_&&I&&(!C||R)){var e=function onPointerDown(){U.current=!1},V=function onTriggerClose(e){var _;!H.current||j((null===(_=e.composedPath)||void 0===_||null===(_=_.call(e))||void 0===_?void 0:_[0])||e.target)||U.current||B(!1)},G=getWin(I);G.addEventListener("pointerdown",e,!0),G.addEventListener("mousedown",V,!0),G.addEventListener("contextmenu",V,!0);var q=getShadowRoot(k);return q&&(q.addEventListener("mousedown",V,!0),q.addEventListener("contextmenu",V,!0)),function(){G.removeEventListener("pointerdown",e,!0),G.removeEventListener("mousedown",V,!0),G.removeEventListener("contextmenu",V,!0),q&&(q.removeEventListener("mousedown",V,!0),q.removeEventListener("contextmenu",V,!0))}}}),[_,k,I,C,R]),function onPopupPointerDown(){U.current=!0}}var ar=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const lr=function generateTrigger(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,_=he.forwardRef((function(_,k){var I=_.prefixCls,C=void 0===I?"rc-trigger-popup":I,R=_.children,j=_.action,B=void 0===j?"hover":j,H=_.showAction,U=_.hideAction,V=_.popupVisible,G=_.defaultPopupVisible,q=_.onPopupVisibleChange,z=_.afterPopupVisibleChange,J=_.mouseEnterDelay,Q=_.mouseLeaveDelay,ee=void 0===Q?.1:Q,te=_.focusDelay,ne=_.blurDelay,re=_.mask,oe=_.maskClosable,ie=void 0===oe||oe,ae=_.getPopupContainer,le=_.forceRender,se=_.autoDestroy,ce=_.destroyPopupOnHide,ue=_.popup,de=_.popupClassName,pe=_.popupStyle,fe=_.popupPlacement,me=_.builtinPlacements,ge=void 0===me?{}:me,ve=_.popupAlign,ye=_.zIndex,be=_.stretch,_e=_.getPopupClassNameFromAlign,we=_.fresh,Ee=_.alignPoint,Se=_.onPopupClick,Oe=_.onPopupAlign,Te=_.arrow,ke=_.popupMotion,Ie=_.maskMotion,Ce=_.popupTransitionName,Pe=_.popupAnimation,Le=_.maskTransitionName,Ne=_.maskAnimation,De=_.className,Ae=_.getTriggerDOMNode,Re=esm_objectWithoutProperties_objectWithoutProperties(_,ar),xe=se||ce||!1,je=slicedToArray_slicedToArray(he.useState(!1),2),Be=je[0],Me=je[1];Gt((function(){Me(isMobile())}),[]);var Fe=he.useRef({}),He=he.useContext(ir),Ke=he.useMemo((function(){return{registerSubPopup:function registerSubPopup(e,_){Fe.current[e]=_,null==He||He.registerSubPopup(e,_)}}}),[He]),Ue=gn(),Ze=slicedToArray_slicedToArray(he.useState(null),2),Ve=Ze[0],We=Ze[1],Ge=he.useRef(null),$e=useEvent_useEvent((function(e){Ge.current=e,isDOM(e)&&Ve!==e&&We(e),null==He||He.registerSubPopup(Ue,e)})),qe=slicedToArray_slicedToArray(he.useState(null),2),ze=qe[0],Ye=qe[1],Je=he.useRef(null),Xe=useEvent_useEvent((function(e){isDOM(e)&&ze!==e&&(Ye(e),Je.current=e)})),Qe=he.Children.only(R),et=(null==Qe?void 0:Qe.props)||{},tt={},nt=useEvent_useEvent((function(e){var _,k,I=ze;return(null==I?void 0:I.contains(e))||(null===(_=getShadowRoot(I))||void 0===_?void 0:_.host)===e||e===I||(null==Ve?void 0:Ve.contains(e))||(null===(k=getShadowRoot(Ve))||void 0===k?void 0:k.host)===e||e===Ve||Object.values(Fe.current).some((function(_){return(null==_?void 0:_.contains(e))||e===_}))})),rt=getMotion(C,ke,Pe,Ce),ot=getMotion(C,Ie,Ne,Le),it=slicedToArray_slicedToArray(he.useState(G||!1),2),at=it[0],lt=it[1],st=null!=V?V:at,ct=useEvent_useEvent((function(e){void 0===V&&lt(e)}));Gt((function(){lt(V||!1)}),[V]);var ut=he.useRef(st);ut.current=st;var dt=he.useRef([]);dt.current=[];var pt=useEvent_useEvent((function(e){var _;ct(e),(null!==(_=dt.current[dt.current.length-1])&&void 0!==_?_:st)!==e&&(dt.current.push(e),null==q||q(e))})),ht=he.useRef(),ft=function clearDelay(){clearTimeout(ht.current)},mt=function triggerOpen(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ft(),0===_?pt(e):ht.current=setTimeout((function(){pt(e)}),1e3*_)};he.useEffect((function(){return ft}),[]);var gt=slicedToArray_slicedToArray(he.useState(!1),2),vt=gt[0],yt=gt[1];Gt((function(e){e&&!st||yt(!0)}),[st]);var bt=slicedToArray_slicedToArray(he.useState(null),2),_t=bt[0],wt=bt[1],Et=slicedToArray_slicedToArray(he.useState(null),2),St=Et[0],Ot=Et[1],Tt=function setMousePosByEvent(e){Ot([e.clientX,e.clientY])},kt=slicedToArray_slicedToArray(useAlign(st,Ve,Ee&&null!==St?St:ze,fe,ge,ve,Oe),11),It=kt[0],Ct=kt[1],Pt=kt[2],Lt=kt[3],Nt=kt[4],Dt=kt[5],At=kt[6],Rt=kt[7],xt=kt[8],jt=kt[9],Bt=kt[10],Mt=slicedToArray_slicedToArray(useAction(Be,B,H,U),2),Ft=Mt[0],Ht=Mt[1],Kt=Ft.has("click"),Ut=Ht.has("click")||Ht.has("contextMenu"),Zt=useEvent_useEvent((function(){vt||Bt()}));useWatch(st,ze,Ve,Zt,(function onScroll(){ut.current&&Ee&&Ut&&mt(!1)})),Gt((function(){Zt()}),[St,fe]),Gt((function(){!st||null!=ge&&ge[fe]||Zt()}),[JSON.stringify(ve)]);var Vt=he.useMemo((function(){var e=getAlignPopupClassName(ge,C,jt,Ee);return on()(e,null==_e?void 0:_e(jt))}),[jt,_e,ge,C,Ee]);he.useImperativeHandle(k,(function(){return{nativeElement:Je.current,popupElement:Ge.current,forceAlign:Zt}}));var Wt=slicedToArray_slicedToArray(he.useState(0),2),$t=Wt[0],qt=Wt[1],zt=slicedToArray_slicedToArray(he.useState(0),2),Yt=zt[0],Jt=zt[1],Xt=function syncTargetSize(){if(be&&ze){var e=ze.getBoundingClientRect();qt(e.width),Jt(e.height)}};function wrapperAction(e,_,k,I){tt[e]=function(C){var R;null==I||I(C),mt(_,k);for(var j=arguments.length,B=new Array(j>1?j-1:0),H=1;H<j;H++)B[H-1]=arguments[H];null===(R=et[e])||void 0===R||R.call.apply(R,[et,C].concat(B))}}Gt((function(){_t&&(Bt(),_t(),wt(null))}),[_t]),(Kt||Ut)&&(tt.onClick=function(e){var _;ut.current&&Ut?mt(!1):!ut.current&&Kt&&(Tt(e),mt(!0));for(var k=arguments.length,I=new Array(k>1?k-1:0),C=1;C<k;C++)I[C-1]=arguments[C];null===(_=et.onClick)||void 0===_||_.call.apply(_,[et,e].concat(I))});var Qt,en,tn=useWinClick(st,Ut,ze,Ve,re,ie,nt,mt),nn=Ft.has("hover"),rn=Ht.has("hover");nn&&(wrapperAction("onMouseEnter",!0,J,(function(e){Tt(e)})),wrapperAction("onPointerEnter",!0,J,(function(e){Tt(e)})),Qt=function onPopupMouseEnter(e){(st||vt)&&null!=Ve&&Ve.contains(e.target)&&mt(!0,J)},Ee&&(tt.onMouseMove=function(e){var _;null===(_=et.onMouseMove)||void 0===_||_.call(et,e)})),rn&&(wrapperAction("onMouseLeave",!1,ee),wrapperAction("onPointerLeave",!1,ee),en=function onPopupMouseLeave(){mt(!1,ee)}),Ft.has("focus")&&wrapperAction("onFocus",!0,te),Ht.has("focus")&&wrapperAction("onBlur",!1,ne),Ft.has("contextMenu")&&(tt.onContextMenu=function(e){var _;ut.current&&Ht.has("contextMenu")?mt(!1):(Tt(e),mt(!0)),e.preventDefault();for(var k=arguments.length,I=new Array(k>1?k-1:0),C=1;C<k;C++)I[C-1]=arguments[C];null===(_=et.onContextMenu)||void 0===_||_.call.apply(_,[et,e].concat(I))}),De&&(tt.className=on()(et.className,De));var an=objectSpread2_objectSpread2(objectSpread2_objectSpread2({},et),tt),ln={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){Re[e]&&(ln[e]=function(){for(var _,k=arguments.length,I=new Array(k),C=0;C<k;C++)I[C]=arguments[C];null===(_=an[e])||void 0===_||_.call.apply(_,[an].concat(I)),Re[e].apply(Re,I)})}));var sn=he.cloneElement(Qe,objectSpread2_objectSpread2(objectSpread2_objectSpread2({},an),ln)),cn={x:Dt,y:At},un=Te?objectSpread2_objectSpread2({},!0!==Te?Te:{}):null;return he.createElement(he.Fragment,null,he.createElement(hn,{disabled:!st,ref:Xe,onResize:function onTargetResize(){Xt(),Zt()}},he.createElement(or,{getTriggerDOMNode:Ae},sn)),he.createElement(ir.Provider,{value:Ke},he.createElement(rr,{portal:e,ref:$e,prefixCls:C,popup:ue,className:on()(de,Vt),style:pe,target:ze,onMouseEnter:Qt,onMouseLeave:en,onPointerEnter:Qt,zIndex:ye,open:st,keepDom:vt,fresh:we,onClick:Se,onPointerDownCapture:tn,mask:re,motion:rt,maskMotion:ot,onVisibleChanged:function onVisibleChanged(e){yt(!1),Bt(),null==z||z(e)},onPrepare:function onPrepare(){return new Promise((function(e){Xt(),wt((function(){return e}))}))},forceRender:le,autoDestroy:xe,getPopupContainer:ae,align:jt,arrow:un,arrowPos:cn,ready:It,offsetX:Ct,offsetY:Pt,offsetR:Lt,offsetB:Nt,onAlign:Zt,stretch:be,targetWidth:$t/Rt,targetHeight:Yt/xt})))}));return _}(nn);var sr={shiftX:64,adjustY:1},cr={adjustX:1,shiftY:!0},ur=[0,0],dr={left:{points:["cr","cl"],overflow:cr,offset:[-4,0],targetOffset:ur},right:{points:["cl","cr"],overflow:cr,offset:[4,0],targetOffset:ur},top:{points:["bc","tc"],overflow:sr,offset:[0,-4],targetOffset:ur},bottom:{points:["tc","bc"],overflow:sr,offset:[0,4],targetOffset:ur},topLeft:{points:["bl","tl"],overflow:sr,offset:[0,-4],targetOffset:ur},leftTop:{points:["tr","tl"],overflow:cr,offset:[-4,0],targetOffset:ur},topRight:{points:["br","tr"],overflow:sr,offset:[0,-4],targetOffset:ur},rightTop:{points:["tl","tr"],overflow:cr,offset:[4,0],targetOffset:ur},bottomRight:{points:["tr","br"],overflow:sr,offset:[0,4],targetOffset:ur},rightBottom:{points:["bl","br"],overflow:cr,offset:[4,0],targetOffset:ur},bottomLeft:{points:["tl","bl"],overflow:sr,offset:[0,4],targetOffset:ur},leftBottom:{points:["br","bl"],overflow:cr,offset:[-4,0],targetOffset:ur}};var pr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],hr=function Tooltip(e,_){var k=e.overlayClassName,I=e.trigger,R=void 0===I?["hover"]:I,j=e.mouseEnterDelay,B=void 0===j?0:j,H=e.mouseLeaveDelay,U=void 0===H?.1:H,V=e.overlayStyle,G=e.prefixCls,q=void 0===G?"rc-tooltip":G,z=e.children,J=e.onVisibleChange,Q=e.afterVisibleChange,ee=e.transitionName,te=e.animation,ne=e.motion,re=e.placement,oe=void 0===re?"right":re,ie=e.align,ae=void 0===ie?{}:ie,le=e.destroyTooltipOnHide,se=void 0!==le&&le,ce=e.defaultVisible,ue=e.getTooltipContainer,de=e.overlayInnerStyle,pe=(e.arrowContent,e.overlay),fe=e.id,me=e.showArrow,ge=void 0===me||me,ve=e.classNames,ye=e.styles,be=objectWithoutProperties_objectWithoutProperties(e,pr),_e=(0,he.useRef)(null);(0,he.useImperativeHandle)(_,(function(){return _e.current}));var we=_objectSpread2({},be);"visible"in e&&(we.popupVisible=e.visible);return he.createElement(lr,(0,C.Z)({popupClassName:Ct()(k,null==ve?void 0:ve.root),prefixCls:q,popup:function getPopupElement(){return he.createElement(Popup,{key:"content",prefixCls:q,id:fe,innerClassName:null==ve?void 0:ve.inner,overlayInnerStyle:_objectSpread2(_objectSpread2({},de),null==ye?void 0:ye.inner)},pe)},action:R,builtinPlacements:dr,popupPlacement:oe,ref:_e,popupAlign:ae,getPopupContainer:ue,onPopupVisibleChange:J,afterPopupVisibleChange:Q,popupTransitionName:ee,popupAnimation:te,popupMotion:ne,defaultPopupVisible:ce,autoDestroy:se,mouseLeaveDelay:U,popupStyle:_objectSpread2(_objectSpread2({},V),null==ye?void 0:ye.root),mouseEnterDelay:B,arrow:ge},we),z)};const fr=(0,he.forwardRef)(hr);Ze.sameDay;const mr=function Popover(e){var _=e.tooltipProps,k=void 0===_?{}:_,I=e.isDisable,C=e.hasPrice,R=e.priceValue,j=e.date,B=_t(),H=B.store.hoverDate,U=B.computes.hoverTip,V=B.tripContext.currency,G=B.globalProps.currency,q=!!H&&H.getTime()===j.getTime()&&!I&&!!U,z=fe().createElement("div",{className:"day-tip"},fe().createElement("p",null,U),C&&!!R&&fe().createElement("p",null,null!=G?G:V,R));return fe().createElement(fr,Ke()({visible:q,overlayClassName:"c-calender-pop__wrapper",placement:"top",trigger:"hover",showArrow:!0,zIndex:99999999999,overlay:z,align:{offset:[0,-10]}},k),e.children)};const gr=function DayCell(e){var _=useI18nWithSSR(6002),k=e.day,I=e.date,C=e.status,R=e.isCurrentMonth,j=e.hasFestival,B=e.onClick,H=e.onMouseEnter,U=e.onMouseLeave,V=e.hasPrice,G=e.priceValue,q=void 0===G?"":G,z=e.priceBgColor,J=e.priceColor,Q=e.isInteract,ee=function useSelectRange(e){var _,k,I=e.status,C=e.date,R=_t().store.range,j=!1,B=!1;return"selected"===I&&(j=C.getTime()===(null==(_=R[0])?void 0:_.getTime()),B=C.getTime()===(null==(k=R[1])?void 0:k.getTime())),{isFirst:j,isLast:B,inRange:!!R&&!!R[0]&&!!R[1]}}({status:C,date:I}),te=ee.isFirst,ne=ee.isLast,re=ee.inRange;if(!R)return fe().createElement("li",null);var oe=!Q||"disable"===C,ie=!oe&&z&&!("selected"===C)&&"in-range"!==C,ae=["none"!==C&&"is-"+C,re&&"in-range",te&&"is-selected-first",ne&&"is-selected-last","disable"!==C&&"is-allow-hover",!Q&&"disabled-interact",V&&"has-price",ie&&"has-bg"].filter(Boolean).join(" "),le=(0,he.useCallback)((function(){"disable"!==C&&B(I,e)}),[C,B]),se={className:ae},ce={};if("disable"!==C){var ue=Object.assign({},getDayOfWeekColor(I.getDay(),_));ie&&(ce.backgroundColor=z),se.role="button",se.tabIndex=0,se.style=ue}var de=(0,he.useCallback)((function(){"disable"!==C&&H(I,e)}),[C]),pe=(0,he.useCallback)((function(){"disable"!==C&&U(I,e)}),[C]);return fe().createElement("li",Ke()({onClick:le,onMouseEnter:de,onMouseLeave:pe},se),fe().createElement(mr,{isDisable:oe,hasPrice:V,priceValue:q,date:I},fe().createElement("div",{className:"tipWrapper",style:ce},fe().createElement("span",{className:"day"},k),j&&!oe&&fe().createElement(Tt,null),V&&fe().createElement(kt,{value:q||"",color:J}))))};var vr=function defaultDayCellRender(e,_){var k=_.handleHover,I=_.handleHoverLeave,C=_.handleSelect,R=_.isInteract;return fe().createElement(gr,Ke()({},e,{onClick:C,onMouseEnter:k,onMouseLeave:I,isInteract:R}))};const yr=function Month(e){var _=e.month,k=e.titleFormatter,I=void 0===k?"ymCalendarString":k,C=e.onSelect,R=e.onHover,j=e.onHoverLeave,B=e.dayCellRender,H=void 0===B?vr:B,U=e.onMouseLeave,V=e.isInteract,G=e.showMonthFestivals,q=void 0!==G&&G,z=function classPrefix(e){return"c-calendar-month__"+e},J=q&&_.getFestivals(),Q=Et(_.date,I),ee=(0,dt.$)();return fe().createElement("div",{className:"c-calendar-month"},fe().createElement("div",{className:z("title")},Q),fe().createElement(St,null),fe().createElement("div",{className:z("days"),onMouseLeave:U},_.getDayCells().map((function(e,k){return fe().createElement("ul",{className:"c-calendar-month__week",key:k},e.days.map((function(e){return H(e,{handleHover:R,handleHoverLeave:j,handleSelect:C,month:_,isInteract:V})})))}))),q&&fe().createElement("ul",{className:"c-calendar-month__festival"},J.map((function(e){return fe().createElement("li",{key:e.date.toString()},fe().createElement(Tt,null),fe().createElement("span",{className:"c-calendar-month__festival-date"},ee.mdShortString(e.date.getTime())),fe().createElement("span",{className:"c-calendar-month__festival-name"},e.label))}))))};const br=function Footer(e){var _,k=e.description,I=void 0===k?null:k,C=e.message,R=e.messageLevel,j=void 0===R?"info":R,B=e.curFestivals,H=void 0===B?[]:B,U=it().festivals,V=_t(),G=V.store.hoverDate,q=V.dateTimeFormatter,z=useTrans(st),J=U.getDayFestivalLabel(1===H.length?null==(_=H[0])?void 0:_.date:G,q,z);return fe().createElement("div",{className:"c-calendar__footer"},fe().createElement("div",{className:"c-calendar__fest"},!!H.length&&fe().createElement(fe().Fragment,null,fe().createElement(Tt,{className:"custom"}),J)),fe().createElement("div",{className:"c-calendar__msg"},fe().createElement("p",{className:"c-calendar__message is-"+j},C),fe().createElement("p",{className:"c-calendar__desc"},I)))};Ze.addMonth,Ze.getMonthLength;var _r=Ze.getToday,wr=Ze.addDay,Er=Ze.getThisSomeday,Sr=[{type:"day",n:0,text:"key.calendar.seo.hottraveldates.today",desc:"Today"},{type:"day",n:1,text:"key.calendar.seo.hottraveldates.tomorrow",desc:"Tomorrow"},{type:"weekend",n:0,text:"key.calendar.seo.hottraveldates.thisweekend",desc:"This Weekend"},{type:"weekend",n:1,text:"key.calendar.seo.hottraveldates.nextweekend",desc:"Next Weekend"}];const Or=function Header(e){var _=_t(),k=_.store,I=(k.startDateOfMonth,k.activeSelectorIdx),C=k.mode,R=_.updateStore,j=_.etUtils.traceAction,B=_.globalProps,H=B.quickSelectors,U=void 0===H?Sr:H,V=B.singleMonthPanel,G=void 0!==V&&V,q=B.quickSelectTitle,z=B.showQuickSelectHeader,J=void 0!==z&&z,Q=B.etParams,ee=void 0===Q?{}:Q,te=e.selectRange,ne=useI18nWithSSR(tt),re=J&&!G,oe=ee.extraParams,ie=void 0===oe?{}:oe,ae=(0,he.useRef)([]),le=function handleSelect(e,_){var k=e.type,C=e.n,B=e.desc;if(I!==_){var H=_r();if("day"===k){var U=wr(C,H);te(U)}else{var V=Er(H,5),G=Er(H,0),q=function toNextWeek(e){return wr(7*C,e)};te(q(V),q(G))}!function setSelected(e){R({activeSelectorIdx:e})}(_),j({type:"quicksel",selector:B}),(0,Ge.g4)(rt,Object.assign({},ie,{clickPos:B}))}};(0,he.useEffect)((function(){re&&ae.current&&ae.current.length&&(0,Ge.g4)(nt,Object.assign({},ie,{tagList:ae.current.map((function(e){return e.desc}))}))}),[]);return re?fe().createElement("div",{className:"c-calendar__header"},fe().createElement("div",{className:"title"},null!=q?q:ne["key.calendar.seo.hottraveldates.title"]),fe().createElement("div",{className:"selectors"},function renderSelectors(){if(!U||!U.length)return null;var e=[];return ae.current=e,U.map((function(_,k){var R=_.text,j=void 0===R?"":R,B=_.type,H=(_.desc,_.n),U="weekend"===B?"weekend-"+k:""+k,V="selector "+(I===U?"active":""),G=_r();return"single"===C&&"weekend"===B||[0,6].includes(G.getDay())&&"weekend"===B&&0===H?null:(e.push(_),fe().createElement("div",{className:V,onClick:function onClick(){return le(_,U)},key:U},ne[j]))}))}())):null};var Tr=k(36341),kr=function noop(){},Ir=function(){function TaskQueue(e){var _=void 0===e?{}:e,k=_.run,I=void 0===k?kr:k,C=_.delay,R=void 0===C?30:C;this.queue=void 0,this.timer=void 0,this.delay=void 0,this.run=void 0,this.queue=[],this.timer=null,this.run=I,this.delay=R}var e=TaskQueue.prototype;return e.push=function push(e){var _=this;this.queue.push(e),clearTimeout(this.timer),this.timer=setTimeout((function(){var e=_.queue;_.queue=[],_.run({queue:e})}),this.delay)},e.cleanup=function cleanup(){this.queue=[],clearTimeout(this.timer),this.timer=null},TaskQueue}(),Cr=function Calendar(e){var _=e.showNightsLabel,k=void 0===_||_,I=e.message,C=e.messageLevel,R=void 0===C?"info":C,j=e.timezoneTip,B=e.timezone,H=e.nightsLabelFormatter,U=void 0===H?"mdeShortString":H,V=e.monthTitleFormatter,G=e.singleMonthPanel,q=void 0!==G&&G,z=e.dayCellRender,J=e.maxNights,Q=e.show,ee=void 0===Q||Q,te=e.style,ne=void 0===te?{}:te,re=e.className,oe=void 0===re?"":re,ie=e.isInteract,ae=void 0===ie||ie,le=e.MonthOrYearChangeCallBack,se=void 0===le?function(){}:le,ce=_t(),ue=ce.tripContext.locale,de=ce.updateStore,pe=wt(e),me=pe.month,ge=pe.setActiveMonthDate,ve=pe.hoverRange,ye=pe.select,be=pe.selectHover,_e=pe.isAvailableDate,we=pe.selectRange,Ee=pe.setHoverDate,Se=ve.nights,Oe=useTranslation(Se>1?"nights":"night"),Te=useTranslation("overRange",J),ke=(0,Tr._)(useTranslation(),"night",ue,Se,Oe),Ie=function useTransWithSSR(e){void 0===e&&(e=[]);var _=(0,he.useState)(Array.isArray(e)?new Array(e.length).fill(""):""),k=_[0],I=_[1],C=(0,et.Q)(tt),R=function getTrans(e){var _,k=null!=(_=C[e])?_:"";if(null==k)return k;for(var I=arguments.length,R=new Array(I>1?I-1:0),j=1;j<I;j++)R[j-1]=arguments[j];return R.length&&(k=replace(k,R)),k},j=function transMapper(e){if(Array.isArray(e)){var _=e[0],k=e[1];return R.apply(void 0,[_].concat(k))}return R(e)};return(0,he.useEffect)((function(){I((function(){return Array.isArray(e)?e.map(j):j(e)}))}),[]),k}(["new_search_local_time_ctrl"])[0],Ce=Et(ve.start,U),Pe=Et(ve.end,U),Le=me(-1),Ne=me(),De=me(1),Ae=me(q?1:2),Re=(0,he.useState)(!1),xe=Re[0],je=Re[1],Be=(0,he.useMemo)((function(){return[Ne,!q&&De].filter(Boolean).reduce((function(e,_){return e.push.apply(e,_.getFestivals()),e}),[])}),[Ne,q]),Me=(0,he.useRef)(new Ir({delay:250,run:function run(e){var _=e.queue.pop();void 0!==_&&de({hoverDate:_})}})),Fe={titleFormatter:V,dayCellRender:z,onSelect:function onSelect(e,_){ae&&(ye(e,_),de({hoverDate:null}))},onHover:function onHover(e,_){_.status;if(ae){be(e),Ee(e);var k=Me.current;k&&k.push(e)}},onHoverLeave:function onHoverLeave(e){de({hoverDate:null}),Ee(void 0);var _=Me.current;_&&_.push(null)},isInteract:ae},He=function isOverRange(e){return J&&J>0&&e>J},Ue=k?He(ve.nights)?Te:function nightsLabel(){return Ce?fe().createElement("span",{className:"c-calendar__desc-line"},fe().createElement("span",{className:"c-calendar__desc-date"},Ce),fe().createElement("span",null," – "),fe().createElement("span",{className:"c-calendar__desc-date"},Pe),fe().createElement("span",{className:"c-calendar__desc-nights"},"(",Se," ",ke,")")):null}():null,Ve=k&&He(ve.nights)?"error":"info";(0,he.useEffect)((function(){je(ee)}),[ee]),(0,he.useEffect)((function(){se({lastMonth:We(me(-1)),currentMonth:We(me()),nextMonth:We(me(1)),afterNextMonth:We(me(2))})}),[Ne.month,Ne.year]);var We=function handleMonthDay(e){var _=e.year,k=e.month,I=e.firstDay(),C=e.lastDay(),R=[];return e.getDayCells().forEach((function(e){e.days.forEach((function(e){e.isCurrentMonth&&"disable"!==e.status&&(R[0]=R[0]?R[0]:e.date,R[1]=R[0]?e.date:"")}))})),{year:_,month:k,firstTolastDay:[I,C],validFirstTolastDay:R}};return fe().createElement("div",{style:ne,className:"c-calendar "+oe+" "+(q?"is-single":"")+" "+(xe?"":"is-hide")},fe().createElement(Or,{selectRange:we}),fe().createElement("div",{className:"c-calendar__body"},fe().createElement(yr,Ke()({month:Ne},Fe,{onMouseLeave:function onMouseLeave(){ae&&ve.reset()}})),!q&&fe().createElement(yr,Ke()({month:De},Fe,{onMouseLeave:function onMouseLeave(){ae&&ve.reset()}})),fe().createElement(Ot,{type:"prev",onClick:function onClick(){return ge(-1)},disable:!_e(Le.lastDay())}),fe().createElement(Ot,{type:"next",onClick:function onClick(){return ge(1)},disable:!_e(Ae.firstDay())})),fe().createElement(br,{message:I||Ue,messageLevel:I?R:Ve,description:j||(void 0===B||B===Ze.localTimezone?Ie:null),curFestivals:Be}))};const Pr=function CalendarWithContext(e){return fe().createElement(bt,e,fe().createElement(Cr,e))};var Lr=function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},Nr=function isNumber(e){return"number"==typeof e};function date_changeDate(e,_){void 0===_&&(_={});var k=function val(k,I){var C=_[k];return"number"==typeof C?C:e[I]()};return new Date(k("year","getFullYear"),k("month","getMonth"),k("day","getDate"),k("hour","getHours"),k("minute","getMinutes"),k("second","getSeconds"),"number"==typeof _.ms?_.ms:0)}var Dr={get localTimezone(){return(new Date).getTimezoneOffset()/-60},isDate:function isDate(e){return e instanceof Date},addMonth:function addMonth(e,_){void 0===e&&(e=1);var k=_||Dr.getToday(),I=k.getMonth()+e;return date_changeDate(k,{month:I,day:1})},addDay:function addDay(e,_){void 0===e&&(e=0);var k=_||Dr.getToday(),I=k.getDate()+e;return date_changeDate(k,{day:I})},now:function now(e){return Dr.getDateInTimezone(new Date,e)},getToday:function getToday(e){var _=Dr.now(e);return Dr.getDay(_)},getDay:function getDay(e,_){return void 0===_&&(_=0),date_changeDate(e,{hour:_,minute:0,second:0})},getDayEnd:function getDayEnd(e){return date_changeDate(e,{hour:23,minute:59,second:59})},getMonthLength:function getMonthLength(e){return date_changeDate(e,{month:e.getMonth()+1,day:0}).getDate()},getFirstMonthLength:function getFirstMonthLength(e,_){var k=Dr.getMonthFirstDay(e).getDay();return k<_?_-k:7-(k-_)},getMonthWeekCount:function getMonthWeekCount(e,_){var k=Dr.getMonthLength(e),I=Dr.getMonthFirstDay(e).getDay(),C=k-(I<_?_-I:7-(I-_));return Math.ceil(C/7)+1},getMonthFirstDay:function getMonthFirstDay(e){return date_changeDate(e,{day:1,hour:0,minute:0,second:0})},getMonthLastDay:function getMonthLastDay(e){var _=date_changeDate(e,{month:e.getMonth()+1,day:0});return Dr.getDayEnd(_)},sameDay:function sameDay(e,_){for(var k=Dr.getDay(e).getTime(),I=0;I<_.length;I++){var C=_[I];if(C&&Dr.getDay(C).getTime()===k)return!0}return!1},sameMonth:function sameMonth(e,_){for(var k=e.getFullYear(),I=e.getMonth(),C=0;C<_.length;C++){var R=_[C];if(R.getFullYear()===k&&R.getMonth()===I)return!0}return!1},diffDays:function diffDays(e,_){var k=(Dr.getDay(_).getTime()-Dr.getDay(e).getTime())/864e5;return Math.floor(Math.abs(k))+1},diffNights:function diffNights(e,_){return e&&_&&Dr.diffDays(e,_)-1||0},isInRange:function isInRange(e,_,k){return!(!_||!k)&&(e.getTime()>=_.getTime()&&e.getTime()<=k.getTime())},isBeforeDay:function isBeforeDay(e,_){return e<Dr.getDay(_)},isBeforeMonth:function isBeforeMonth(e,_){return e<Dr.getMonthFirstDay(_)},getTimestampInTimezone:function getTimestampInTimezone(e,_){if(void 0===_&&(_=0),"number"!=typeof _)return e.getTime();var k=e.getTimezoneOffset()/60+_;return e.getTime()-60*k*60*1e3},getDateInTimezone:function getDateInTimezone(e,_){if(void 0===_&&(_=0),"number"!=typeof _)return new Date(e.getTime());var k=e.getTimezoneOffset()/60+_;return date_changeDate(e,{hour:e.getHours()+k})},repairNumber:function repairNumber(e){return e<10?"0"+e:""+e},getDateStringByDateInfo:function getDateStringByDateInfo(e){return e.getFullYear()+"-"+this.repairNumber(e.getMonth()+1)+"-"+this.repairNumber(e.getDate())}},Ar=function noop(){},Rr=function(){function TaskQueue(e){var _=void 0===e?{}:e,k=_.run,I=void 0===k?Ar:k,C=_.delay,R=void 0===C?30:C;this.queue=void 0,this.timer=void 0,this.delay=void 0,this.run=void 0,this.queue=[],this.timer=null,this.run=I,this.delay=R}var e=TaskQueue.prototype;return e.push=function push(e){var _=this;this.queue.push(e),clearTimeout(this.timer),this.timer=setTimeout((function(){var e=_.queue;_.queue=[],_.run({queue:e})}),this.delay)},e.cleanup=function cleanup(){this.queue=[],clearTimeout(this.timer),this.timer=null},TaskQueue}();function common_classnames(e,_){if(void 0===_&&(_=""),function isString(e){return"string"==typeof e}(e))return _+" "+e;if(function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)){var k=[];return Object.keys(e).forEach((function(_){Reflect.get(e,_)&&k.push(_.toString().trim())})),common_classnames(k,_)}return Lr(e)?_+" "+e.filter(Boolean).join(" "):""}function parseValue(e){return Lr(e)?e.filter((function(e){return e instanceof Date})):e instanceof Date?[e]:[]}function parseDayEnd(e,_,k){void 0===_&&(_=!0);var I=k.timezone,C=void 0===I?0:I,R=(_?Dr.getDayEnd:Dr.getDay,_?null:Dr.getToday(C));return e?Nr(e)?Dr.addDay(e):Dr.getDay(e):R}var xr={appId:330153,pageId:102},jr="key.calendar.hover",Br="new_search_local_time_ctrl",Mr="key.calendar.confirm",Fr="Online_multi_calendar_click",Hr="Online_multi_calendar_duration",Kr="Online_multi_calendar_exposure";var Ur=["selected"],Zr=function(){function Timer(){this.timer=void 0,this.seconds=void 0,this.timer=null,this.seconds=0}var e=Timer.prototype;return e.start=function start(){var e=this;return this.seconds=0,clearInterval(this.timer),this.timer=setInterval((function(){e.seconds+=1}),1e3),this},e.stop=function stop(){return clearInterval(this.timer),this.seconds},Timer}();function ubt_useTrace(e){var _=e.store.selectedDates,k=e.globalProps,I=e.tripContext,C=(e.debug,k.etParams),R=void 0===C?{}:C,j=k.show,B=R.extraParams,H=void 0===B?{}:B,U=R.toggleShow,V=void 0===U?j:U,G=I.locale,q=Object.assign({locale:G},H),z=(0,he.useRef)(new Zr),J=(0,he.useRef)(null),Q=(0,he.useRef)(!1);function traceDuration(e){var _=Object.assign({},q,{durationlength:e,time:(new Date).getTime()});(0,Ge.g4)(Hr,_)}return(0,he.useEffect)((function(){return z.current&&void 0!==V?(V&&function traceDurationStart(){z.current.start()}(),Q.current=V,function(){!function traceDurationEnd(){var e=z.current.stop();e<=0||!Q.current||traceDuration(e)}()}):Ar}),[V]),function useMount(e){var _=(0,he.useRef)(!1);(0,he.useEffect)((function(){return _.current?Ar:(_.current=!0,e())}),[])}((function traceExposure(){var e=Object.assign({},q,{time:(new Date).getTime()});(0,Ge.g4)(Kr,e)})),{traceAction:function traceAction(e){void 0===e&&(e={});var k=e,I=k.selected,C=We()(k,Ur),R=C.type,j=function processRange(e){return e.map((function(e){return e.toDateString()})).join(",")}(null!=I?I:_),B=j+"-"+R;if(B!==J.current){var H=Object.assign({},q,{content:Object.assign({selected:j},C,{time:(new Date).getTime()})});(0,Ge.g4)(Fr,H),J.current=B}},traceDuration:traceDuration}}var Vr=["store"],Wr={hoverDate:null,selectedDates:[]};var Gr,$r=fe().createContext({store:Wr,updateStore:Ar,setStore:Ar,resetStore:Ar,computes:{},dateTimeFormatter:{},tripContext:{},globalProps:{},etUtils:{},methods:{},i18n:{}}),qr=function GlobalContextProvider(e){var _=e.timezone,k=e.value,I=e.defaultValue,C=e.maxSelectCount,R=void 0===C?3:C,j=e.isDisableDate,B=e.startDate,H=void 0===B?null:B,U=e.endDate,V=!!k,G=parseDayEnd(void 0===U?null:U,!0,{timezone:_}),q=parseDayEnd(H,!1,{timezone:_}),z=parseValue(k),J=function isDateDisabled(e){return(null==j?void 0:j(e))||q&&e<q||G&&e>G},Q=function context_useGlobalProvider(e,_){var k=(0,he.useState)(e),I=k[0],C=k[1];return{store:I,updateStore:function updateStore(e){return void 0===e&&(e={}),C((function(_){return Object.assign({},_,e)})),I},setStore:C,resetStore:function resetStore(){return C(e),I}}}(Object.assign({},Wr,{selectedDates:V?z:parseValue(I).filter((function(e){return!J(e)}))})),ee=Q.store,te=We()(Q,Vr),ne=(0,dt.$)(_),re=(0,pt.N)(),oe=ubt_useTrace({store:ee,globalProps:e,tripContext:re}),ie=(0,et.Q)(6002),ae=ee.selectedDates,le=ae.length>=R,se=ae.length<=0,ce=function isUndefined(e){return void 0===e}(_)||_===Dr.localTimezone;return(0,he.useEffect)((function(){V&&(0,te.updateStore)({selectedDates:z})}),[k]),fe().createElement($r.Provider,{value:Object.assign({store:ee},te,{dateTimeFormatter:ne,tripContext:re,globalProps:e,etUtils:oe,computes:{isControlled:V,isOverSelect:le,isLocalTimezone:ce,isNoSelect:se,startDate:q,endDate:G},methods:{isDateDisabled:J},i18n:{l10n:ie}})},e.children)},zr=function useGlobalContext(){return(0,he.useContext)($r)},Yr=function(){function FestivalManager(e){this.festivals={},e&&this.init(e)}var e=FestivalManager.prototype;return e.init=function init(e){void 0===e&&(e={});var _=Object.assign({},"object"==typeof window?window.i18n_6001:{},e),k=this.festivals={};Object.entries(_).forEach((function(e){var _=e[0],I=e[1],C=_.split("-").map(Number),R=C[0],j=C[1],B=C[2];if(R&&j&&B&&I){var H=new Date(R,j-1,B);k[R]||(k[R]={}),k[R][j]||(k[R][j]={}),k[R][j][B]||(k[R][j][B]={date:H,festivals:[]}),k[R][j][B].festivals.push({date:H,label:I})}}))},e.getMonthFestivals=function getMonthFestivals(e,_){return(this.festivals[e]||{})[_]||{}},e.getDayFestivals=function getDayFestivals(e){return(((this.festivals[e.getFullYear()]||{})[e.getMonth()+1]||{})[e.getDate()]||{festivals:[]}).festivals||[]},e.getDayFestivalLabel=function getDayFestivalLabel(e,_,k){void 0===k&&(k="");var I=e&&e instanceof Date?this.getDayFestivals(e):null,C=I&&I.length?I[0]:{label:"",date:null},R=C.label,j=C.date;return R&&_?_.mdShortString(j.getTime())+" "+R:k},FestivalManager}();Gr=Yr,Yr.instance=new Gr;new Yr;var Jr=function useFestival(){var e=(0,et.Q)(6001),_=(0,he.useRef)(Yr.instance);return(0,he.useEffect)((function(){_.current.init(e)}),[]),{festivalMgr:_.current}};function month_createForOfIteratorHelperLoose(e,_){var k="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(k)return(k=k.call(e)).next.bind(k);if(Array.isArray(e)||(k=function month_unsupportedIterableToArray(e,_){if(!e)return;if("string"==typeof e)return month_arrayLikeToArray(e,_);var k=Object.prototype.toString.call(e).slice(8,-1);"Object"===k&&e.constructor&&(k=e.constructor.name);if("Map"===k||"Set"===k)return Array.from(e);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return month_arrayLikeToArray(e,_)}(e))||_&&e&&"number"==typeof e.length){k&&(e=k);var I=0;return function(){return I>=e.length?{done:!0}:{done:!1,value:e[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function month_arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var k=0,I=new Array(_);k<_;k++)I[k]=e[k];return I}var Xr=function(){function CalendarMonth(e,_,k){if(this.options=void 0,this.festivalCalendar=void 0,this.year=void 0,this.month=void 0,this.date=void 0,this.lowPricesObj=void 0,this.hasPrice=void 0,this.date=e,this.year=e.getFullYear(),this.month=e.getMonth()+1,this.festivalCalendar=_,this.options=k,this.lowPricesObj={},this.hasPrice=!1,k.lowPrices){this.hasPrice=!0;for(var I,C=month_createForOfIteratorHelperLoose(k.lowPrices);!(I=C()).done;){var R=I.value,j=R.date;this.lowPricesObj[j]=R}}}var e=CalendarMonth.prototype;return e.getDayCells=function getDayCells(){var e=this,_=this.options.dayOfWeekStart,k=void 0===_?0:_,I=this.date,C=this.firstDay(),R=7-Dr.getFirstMonthLength(I,k),j=Dr.addDay(-R,C),B=Dr.getMonthWeekCount(I,k);return Array.from({length:B}).map((function(_,k){return{days:Array.from({length:7}).map((function(_,C){var R=7*k+C,B=Dr.addDay(R,j),H=e.options.computeDayStatus(B),U=e.festivalCalendar.getDayFestivals(B),V=B.getFullYear()+"-"+(B.getMonth()+1<10?"0"+(B.getMonth()+1):B.getMonth()+1)+"-"+(B.getDate()<10?"0"+B.getDate():B.getDate()),G="",q="",z="";return e.lowPricesObj[V]&&(G=e.lowPricesObj[V].value,q=e.lowPricesObj[V].color||"",z=e.lowPricesObj[V].bgColor||""),{key:String(B.getTime()),date:B,day:B.getDate(),status:H,festivals:U,hasFestival:U&&U.length>0,hasPrice:e.hasPrice,priceValue:G,priceColor:q,priceBgColor:z,get isCurrentMonth(){return B.getMonth()===I.getMonth()},get isPrevMonth(){return B.getMonth()<I.getMonth()},get isNextMonth(){return B.getMonth()>I.getMonth()}}}))}}))},e.getFestivals=function getFestivals(){var e=this.festivalCalendar.getMonthFestivals(this.year,this.month);return Object.values(e).sort((function(e,_){return e.date.getTime()-_.date.getTime()})).reduce((function(e,_){return e.concat(_.festivals||[])}),[])},e.hasFestivals=function hasFestivals(){return!!this.getFestivals().length},e.firstDay=function firstDay(){return new Date(this.year,this.month-1,1)},e.lastDay=function lastDay(){return new Date(this.year,this.month,0)},CalendarMonth}();function useTrans_replace(e,_){return void 0===e&&(e=""),void 0===_&&(_=[]),e.replace(/\{([0-9]+)}/g,(function(e,k){return void 0!==_[k]?_[k]:e}))}function computeDefaultMonth(e){var _=e.startMonthDate,k=e.minStartDate,I=e.timezone;return _?function parseMonthDate(e){return Nr(e)?Dr.addMonth(e):e}(_):k?Dr.addDay(0,k):Dr.getToday(I)}function useCalendar_useCalendar(e){var _=e.timezone,k=e.startMonthDate,I=e.onChange,C=e.lowPrices,R=function useCalendarI18nConfig(){var e=(0,et.Q)(6002);return{sundayColor:e["key.calendar.sunday_font_color"],saturdayColor:e["key.calendar.saturday_font_color"],dayOfWeekStart:Number(e["key.calendar.week_start"])}}(),j=Jr().festivalMgr,B=zr(),H=B.updateStore,U=B.etUtils.traceAction,V=B.computes,G=V.isControlled,q=V.isOverSelect,z=V.startDate,J=B.methods.isDateDisabled,Q=B.store.selectedDates,ee=(0,he.useState)(computeDefaultMonth({startMonthDate:k,minStartDate:z,timezone:_})),te=ee[0],ne=ee[1],re=function setActiveMonth(e){ne("number"==typeof e?Dr.addMonth(e,te):e)},oe=function computeDayStatus(e){var _="none";return J(e)?_="disable":Dr.sameDay(e,Q)?_="selected":q&&(_="disable"),_};return{month:function month(e){return void 0===e&&(e=0),new Xr(Dr.addMonth(e,te),j,{computeDayStatus:oe,dayOfWeekStart:R.dayOfWeekStart,lowPrices:C})},setActiveMonthDate:re,select:function select(e,_){var k=_.status;if(e&&["none","selected"].includes(k)){var C="none"===k,R=C?[].concat(Q,[e]):Q.filter((function(_){return!Dr.sameDay(_,[e])}));G?null==I||I({date:e,selected:R,isSelect:C}):H({selectedDates:R}),U({selected:R,type:C?"select":"unselect"})}},toNextMonth:re.bind(null,1),toPrevMonth:re.bind(null,-1),festivalMgr:j}}function style_getDayOfWeekColor(e,_){switch(void 0===_&&(_={}),e){case 0:return{color:_["key.calendar.sunday_font_color"]||"#3264ff"};case 5:return{color:_["key.calendar.friday_font_color"]||void 0};case 6:return{color:_["key.calendar.saturday_font_color"]||"#3264ff"};default:return{}}}const Qr=function WeekHead(){var e=(0,et.Q)(6002),_=(e["key.l10n.datetime.weekday.names.abbreviations"]||"").split(","),k=function style_getWeekDaySort(e){void 0===e&&(e={});var _=Number(e["key.calendar.week_start"]||0),k=Array.from({length:7}).map((function(e,_){return _}));return k.slice(_).concat(k.slice(0,_))}(e);return fe().createElement("ul",{className:"c-ms-calendar-month__week-head"},k.map((function(k){return fe().createElement("li",{style:style_getDayOfWeekColor(k,e),key:k},_[k])})))};var eo=function ArrowIcon(e){var _,k=e.disable,I=void 0!==k&&k,C=e.onClick,R=["c-ms-calendar-icon-"+e.type,I&&"is-disable"].filter(Boolean).join(" "),j=fe().useCallback((function(){return!I&&C()}),[C]);return fe().createElement("span",((_={})[function Icon_findClickEvent(){return"undefined"==typeof window||"ontouchstart"in document.documentElement?"onTouchStart":"onClick"}()]=j,_.className=R,_))},to=function DotIcon(e){var _=e.className,k=void 0===_?"":_,I=(0,et.Q)(6002)["key.calendar.festival_dot_color"]||"#8592a6";return fe().createElement("i",{className:"c-ms-calendar-icon-dot "+k,style:{backgroundColor:I}})},no=function CheckedIcon(){return fe().createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},fe().createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},fe().createElement("g",{transform:"translate(-2703.000000, -250.000000)",fillRule:"nonzero"},fe().createElement("g",{transform:"translate(2423.000000, 94.000000)"},fe().createElement("g",{transform:"translate(0.000000, 54.000000)"},fe().createElement("g",{transform:"translate(256.000000, 78.000000)"},fe().createElement("g",{id:"arrow",transform:"translate(24.000000, 24.000000)"},fe().createElement("path",{d:"M24,0 L24,20 C24,22.209139 22.209139,24 20,24 L0,24 L0,24 L24,0 Z",fill:"#3264FF"}),fe().createElement("polyline",{id:"Shape",stroke:"#FFFFFF",strokeWidth:"1.2",points:"21 13.8 14.9368421 19.8 11.4 16.3"}))))))))},ro=function Price(e){var _=e.value,k=e.color;return fe().createElement("span",{className:"price",style:{color:k}},_)};const oo=function DayCell(e){var _,k=e.day,I=e.date,C=e.status,R=e.isCurrentMonth,j=e.hasFestival,B=e.onClick,H=e.onMouseEnter,U=e.onMouseLeave,V=e.hasPrice,G=e.priceValue,q=void 0===G?"":G,z=e.priceBgColor,J=e.priceColor,Q=zr().i18n.l10n,ee="disable"===C,te="selected"===C,ne=!ee&&z&&!te,re={status:C},oe=ee?{}:Object.assign({},style_getDayOfWeekColor(I.getDay(),Q));if(ne&&(oe.backgroundColor=z),!R)return fe().createElement("li",null);return fe().createElement("li",{onClick:function handleClick(){ee||B(I,re)},onMouseEnter:function handleMouseEnter(){ee||H(I,re)},onMouseLeave:function handleMouseLeave(){ee||U(I,re)},className:common_classnames((_={},_["is-"+C]="none"!==C,_["is-allow-hover"]="disable"!==C,_["has-price"]=V,_["has-bg"]=ne,_)),style:oe},fe().createElement("span",{className:"day"},k),j&&!ee&&fe().createElement(to,null),V&&fe().createElement(ro,{value:q||"",color:J}),te&&fe().createElement("div",{className:"checkIcon"},fe().createElement(no,null)))};var io=function defaultDayCellRender(e,_){var k=_.handleHover,I=_.handleHoverLeave,C=_.handleSelect;return fe().createElement(oo,Ke()({},e,{onClick:C,onMouseEnter:k,onMouseLeave:I}))},ao=function classPrefix(e){return"c-ms-calendar-month__"+e};const lo=function Month(e){var _=e.month,k=e.titleFormatter,I=void 0===k?"ymCalendarString":k,C=e.onSelect,R=e.onHover,j=e.onHoverLeave,B=e.dayCellRender,H=void 0===B?io:B,U=(e.showMonthFestivals,function useFormatDateTime(e,_,k){void 0===k&&(k="");var I=(0,dt.$)(),C=function format(e){try{return e?I[_](e.getTime()):k}catch(e){return k}};return Lr(e)?e.map((function(e){return C(e)})):C(e)}(_.date,I));return fe().createElement("div",{className:"c-ms-calendar-month"},fe().createElement("div",{className:ao("title")},U),fe().createElement(Qr,null),fe().createElement("div",{className:ao("days")},_.getDayCells().map((function(e,k){return fe().createElement("ul",{className:"c-ms-calendar-month__week",key:k},e.days.map((function(e){return H(e,{handleHover:R,handleHoverLeave:j,handleSelect:C,month:_})})))}))))};const so=function Footer(e){e.description;var _,k=e.curFestivals,I=void 0===k?[]:k,C=Jr().festivalMgr,R=zr(),j=R.store,B=j.hoverDate,H=j.selectedDates,U=R.globalProps,V=U.footerTip,G=U.onOk,q=R.computes,z=q.isLocalTimezone,J=q.isNoSelect,Q=R.dateTimeFormatter,ee=R.etUtils.traceAction,te=function useTrans_useTrans(e){void 0===e&&(e=[]);var _=(0,et.Q)(xr),k=function getTrans(e){var k,I=null!=(k=_[e])?k:"";if(null==I)return I;for(var C=arguments.length,R=new Array(C>1?C-1:0),j=1;j<C;j++)R[j-1]=arguments[j];return R.length&&(I=useTrans_replace(I,R)),I},I=function transMapper(e){if(Array.isArray(e)){var _=e[0],I=e[1];return k.apply(void 0,[_].concat(I))}return k(e)};return Array.isArray(e)?e.map(I):I(e)}([jr,Br,Mr]),ne=te[0],re=te[1],oe=te[2],ie=C.getDayFestivalLabel(1===I.length?null==(_=I[0])?void 0:_.date:B,Q,ne),ae=z?re:null,le=J;return fe().createElement("div",{className:"c-ms-calendar__footer"},fe().createElement("div",{className:"info"},fe().createElement("div",{className:"c-ms-calendar__fest"},!!I.length&&fe().createElement(fe().Fragment,null,fe().createElement(to,{className:"custom"}),ie)),fe().createElement("div",{className:"c-ms-calendar__msg"},null!=V?V:ae)),fe().createElement("div",{className:"action"},fe().createElement("div",{className:common_classnames({disabled:le},"confirm-btn"),onClick:function onClick(){!function onConfirm(){le||(null==G||G({selected:H}),ee({type:"confirm"}))}()}},oe)))};var co=function Calendar(e){e.timezone;var _=e.singleMonthMode,k=void 0!==_&&_,I=e.show,C=void 0===I||I,R=e.style,j=void 0===R?{}:R,B=e.className,H=void 0===B?"":B,U=e.onMonthOrYearChange,V=zr(),G=(V.tripContext.locale,V.methods.isDateDisabled),q=V.updateStore,z=useCalendar_useCalendar(Object.assign({},e)),J=z.month,Q=z.toNextMonth,ee=z.toPrevMonth,te=z.select,ne=J(-1),re=J(),oe=J(1),ie=J(k?1:2),ae=(0,he.useMemo)((function(){return[re,!k&&oe].filter(Boolean).reduce((function(e,_){return e.push.apply(e,_.getFestivals()),e}),[])}),[re,k]),le=(0,he.useRef)(new Rr({delay:100,run:function run(e){var _=e.queue.pop();void 0!==_&&q({hoverDate:_})}})),se={onSelect:function onSelect(e,_){te(e,_),q({hoverDate:null})},onHover:function onHover(e,_){_.status;var k=le.current;k&&k.push(e)},onHoverLeave:function onHoverLeave(e){q({hoverDate:null});var _=le.current;_&&_.push(null)}};(0,he.useEffect)((function(){null==U||U({lastMonth:ce(J(-1)),currentMonth:ce(J()),nextMonth:ce(J(1)),afterNextMonth:ce(J(2))})}),[re.month,re.year]);var ce=function handleMonthDay(e){var _=e.year,k=e.month,I=e.firstDay(),C=e.lastDay(),R=[];return e.getDayCells().forEach((function(e){e.days.forEach((function(e){e.isCurrentMonth&&"disable"!==e.status&&(R[0]=R[0]?R[0]:e.date,R[1]=R[0]?e.date:"")}))})),{year:_,month:k,firstTolastDay:[I,C],validFirstTolastDay:R}};return fe().createElement("div",{style:j,className:common_classnames({"is-single":k,"is-hide":!C},"c-ms-calendar "+H)},fe().createElement("div",{className:"c-ms-calendar__body"},fe().createElement(lo,Ke()({month:re},se)),!k&&fe().createElement(lo,Ke()({month:oe},se)),fe().createElement(eo,{type:"prev",onClick:function onClick(){return ee()},disable:G(ne.lastDay())}),fe().createElement(eo,{type:"next",onClick:function onClick(){return Q()},disable:G(ie.firstDay())})),fe().createElement(so,{curFestivals:ae}))};const uo=function CalendarWithContext(e){return fe().createElement(qr,e,fe().createElement(co,e))};var po="@ctrip/trip-component-platform-online-calendar",ho="4.2.3";try{k(63503),k(70458),k(50352),k(11909),k(42268),k(88755),k(99605),k(80954),k(68559),k(29794),k(57614)}catch(e){try{k(30522),k(19371),k(98837),k(33057),k(56997),k(24336),k(75115),k(96409),k(83276),k(91181)}catch(e){}}const fo=(0,Fe.K)(Pr,{name:po,version:ho});(0,Fe.K)(uo,{name:po,version:ho});var mo=k(98239),go=k(28072),vo=k(39621).default,yo=k(67294);class view_CalendarBoxV8 extends vo{constructor(e){super(e),this.stopPropagation=e=>{e&&e.stopPropagation()}}render(){var e;let{isShow:_,isSelectEnd:k,timeOffset:I,checkIn:C,checkOut:R,top:B,left:U,position:V,className:G,lowPrice:z,changeOnDestinationOrKeyWord:J,getCalendarPrice:Q}=this.state;0===(null===(e=Q)||void 0===e?void 0:e.length)&&(Q=z);const ee="0"==go.Z.get("IBU_showtotalamt")?this.$translate("key.hotel.key.hotel.detail.page.calender.explanation2"):this.$translate("key.hotel.key.hotel.detail.page.calender.explanation3");let te="".concat(this.$translate("calendar_local_time")," ").concat(this.$translate("key.hotel.detail.page.calender.explanation1",H.default.getByKey("cargo.currency"))," ").concat(ee),ne="10320668150"===H.default.getByKey("pageId");return _?yo.createElement("div",{className:j()("".concat((0,q.XG)(this)?"m-calendar-boxV8-b":"m-calendar-boxV8"),G),style:{position:V,top:"".concat(B+(ne?4:12),"px"),left:"".concat((0,q.XG)(this)?U-50:U-16,"px"),borderRadius:"8px"},onClick:this.stopPropagation},yo.createElement(fo,{singleMonthPanel:(0,mo.hJ)(),selectEnd:k,timezone:I/3600,timezoneTip:te,mode:"range",value:[C,R],maxNights:(0,Me.Z)(),onRangeChange:this.rangeChange,onOutOfRange:this.outOfRangeChange,maxEndDate:457,showNightsLabel:!0,lowPrices:J?[]:Q,departTipKey:"key.calendar.departure.hotel",returnTipKey:"key.calender.return.hotel"})):null}}var bo=k(44251),_o=k(17002);const wo=function getTopLeft(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"absolute",k=0,I=0;if(e)if("absolute"===_)for(k=e.offsetTop,I=e.offsetLeft;e.offsetParent;)k+=(e=e.offsetParent).offsetTop,I+=e.offsetLeft;else{let _=e.getBoundingClientRect();if(_)return{top:_.top||0,left:_.left||0}}return{top:k,left:I}};var Eo=k(6729),So=k(12992),Oo=k(23072),To=k(57976);function updateHighPriceRate(e){return{payload:e,type:To.t}}var ko=k(53449);function updateSearchHotelList(e){return{type:ko.E4,payload:e}}var Io=k(48467).default;function calendarBox_listV8_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function calendarBox_listV8_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?calendarBox_listV8_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):calendarBox_listV8_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}_o.w.push(class CalendarBoxV8 extends view_CalendarBoxV8{constructor(e){super(e),this.getLowPriceList=(e,_,k)=>{const{needLowPrice:I}=this.state;if(I){var C;this.$safeLog("logLowPriceCalendarAB",{version:"B"});let I=(null===(C=ke.y7.get("ratePlanRequest"))||void 0===C?void 0:C.data)||e;if(!(0,Pe.xb)(I)){var R,j,B;let e=I;delete e.versionControl;let C=(0,Oo.Z)("LowPrice")||(0,Oo.Z)("lowPrice")||0;_&&k&&(e.checkIn=_,e.checkOut=k),e.minPrice="null"===C||(0,Pe.xb)(C)?0:C,e.oversea="OVERSEA"==(null===(R=H.default.getByKey("initData"))||void 0===R||null===(j=R.base)||void 0===j?void 0:j.regionType)?"T":"F",Io({url:"/getCalendarPrice",silence:!0,data:e,genk:!0,genKeyParam:{a:e.hotelId,b:e.checkIn,c:e.checkOut,d:null===(B=H.default.getByKey("cargo.locale"))||void 0===B?void 0:B.toLocaleLowerCase(),e:2,f:e.cityId}}).then((e=>{let{data:_}=e,k=_.list||[],I=0;k.forEach((e=>{"2"==e.showPriceType&&I++}));let C=k.map((e=>{const{date:_,minPrice:k,showPriceType:C}=e,R="0"==C;return{date:_,value:R?"—":"0"==k?"":(0,So.formatNumber)(k,{short:!0,digit:1}),color:I<=10&&"2"==C?"#FF6F00":R?"#CED2D9":"#8592A6"}}));this.setState({lowPrice:C},(()=>{window.tempLowPriceList=(null==_?void 0:_.list)||[];this.checkSelectedDateHasPrice(_.list)?(bo.Z.dispatch(updateHighPriceRate(!1)),bo.Z.dispatch(updateSearchHotelList(!1))):(bo.Z.dispatch(updateHighPriceRate(!0)),bo.Z.dispatch(updateSearchHotelList(!0)))}))}))}}},this.checkSelectedDateHasPrice=e=>{var _,k,I,C;if(!e||0==e.length)return!1;if(this.state.changeOnDestinationOrKeyWord)return!1;let R=null===(_=document)||void 0===_||null===(k=_.getElementById("checkIn"))||void 0===k?void 0:k.getAttribute("data-key"),j=null===(I=document)||void 0===I||null===(C=I.getElementById("checkOut"))||void 0===C?void 0:C.getAttribute("data-key");if(!R||!j)return!R&&!j;R=R.replaceAll("/","-"),j=j.replaceAll("/","-");let B=!0,H=0,U=0;e.map(((e,_)=>{e.date==R&&(U=_),e.date==j&&(H=_)}));if(!(H-U>0))return!1;for(let _=U;_<H;_++){var V,G;(null===(V=e[_])||void 0===V?void 0:V.showPriceType)>0&&(null===(G=e[_])||void 0===G?void 0:G.minPrice)>0||(B=!1)}return B},this.show=async e=>{const{hasOpen:_}=this.state;_||this.setState({hasOpen:!0,needLowPrice:e.needLowPrice},(()=>{this.getLowPriceList(e.rateplanRequestParam)}));const{target:k,position:I="absolute",offset:C,checkIn:R,checkOut:j,dateType:B="checkIn",timeOffset:U,cityId:V,className:G="",changeCallback:q=(()=>{}),changeOnDestinationOrKeyWord:z=!1,getCalendarPrice:J}=e||{};if(k){const e="F"===H.default.getByKey("initData.TimeOffsetValid"),{checkIn:_,checkOut:Q,nights:ee,timeOffset:te}=e?calendarBox_listV8_objectSpread(calendarBox_listV8_objectSpread({},await(0,Be.Lf)({checkIn:R,checkOut:j,timeOffset:!e&&U,maxNights:(0,Me.Z)()})),{},{timeOffset:-43200}):await(0,Be.v4)({checkIn:R,checkOut:j,timeOffset:!e&&U,cityId:!e&&V,maxNights:(0,Me.Z)()}),{top:ne,left:re}=this.calculatePosition(k,I,C);let oe=!1;"checkOut"===B&&(oe=!0),this.state.isShow||this.$safeLog("logCheckInAndOutDateLayerAction",!0),this.setState({isShow:!0,position:I,top:ne+k.offsetHeight,left:re,isSelectEnd:oe,timeOffset:te,checkIn:_,checkOut:j?Q:void 0,nights:ee,className:G,changeCallback:q,getCalendarPrice:J,changeOnDestinationOrKeyWord:z},(()=>{window.addEventListener("click",this.hide),window.addEventListener("resize",this.hide)}))}},this.hide=()=>{if(this.state.isShow){const{checkIn:e,checkOut:_}=this.state;this.state.changeCallback([(0,Eo.formatToYMDStr)(e),(0,Eo.formatToYMDStr)(_)],"hide"),this.setState({isShow:!1,position:"relative",top:0,left:0,isSelectEnd:!1},(()=>{window.removeEventListener("click",this.hide),window.removeEventListener("resize",this.hide)})),this.$safeLog("logCheckInAndOutDateLayerAction",!1)}},this.resetPosition=e=>{const{target:_,position:k="absolute"}=e;if(_){const{top:e,left:I}=this.calculatePosition(_,k);this.setState({position:k,top:e+_.offsetHeight,left:I})}},this.rangeChange=(e,_)=>{let k={checkIn:e[0],checkOut:e[1]};"start"===_?Object.assign(k,{isSelectEnd:!0}):Object.assign(k,{isSelectEnd:!1}),this.setState(k,(()=>{const{checkIn:e,checkOut:k,lowPrice:I}=this.state;let C=(0,Eo.formatToYMDStr)(e).replace(/\//gi,"-"),R=(0,Eo.formatToYMDStr)(k).replace(/\//gi,"-");I.find((e=>e.date==C))||this.getLowPriceList({},C,R),this.state.changeCallback([(0,Eo.formatToYMDStr)(e),(0,Eo.formatToYMDStr)(k)],_),"end"===_&&setTimeout((()=>{this.checkSelectedDateHasPrice(window.tempLowPriceList)?(bo.Z.dispatch(updateHighPriceRate(!1)),bo.Z.dispatch(updateSearchHotelList(!1))):(bo.Z.dispatch(updateHighPriceRate(!0)),bo.Z.dispatch(updateSearchHotelList(!0)))}),0)}))},this.outOfRangeChange=e=>{const _=(0,Eo.formatToYMDStr)(e[0]),k=(0,Eo.formatToYMDStr)(e[1]),I=(0,Re.e3)(e[0],e[1]);this.$log({logKey:"ibu_htl_c_calender_change_done",logValue:{checkIn:_,checkOut:k,canSearch:I<=(0,Me.Z)()?"T":"F"}})},this.ubtMapping={logCheckInAndOutDateLayerAction:U.Xe,logLowPriceCalendarAB:U.Vz},this.state={isShow:!1,position:"relative",top:0,left:0,isSelectEnd:!1,timeOffset:null,checkIn:"",checkOut:"",nights:0,className:"",changeCallback:()=>{},lowPrice:[],hasOpen:!1,getCalendarPrice:[]}}calculatePosition(e,_,k){let{top:I,left:C}=wo(e,_);const{top:R=0,left:j=0}=k||{},B=document.body.offsetWidth||document.documentElement.offsetWidth;return C+738>B&&(C=B-738),{top:I+R,left:C+j}}});var Co=k(67294);class CalendarV8 extends calendar_view_View{constructor(e){var _;super(e),_=this,this.onClick=(e,_)=>{_&&_.stopPropagation();const{noValid:k,timeOffset:I}=this.props;if(k){const{checkInStr:e,checkOutStr:_,nights:k}=(0,Be.Lf)({timeOffset:I,maxNights:(0,Me.Z)()});this.props.select({checkIn:e,checkOut:_,nights:k})}this.props.clickCallBack&&this.props.clickCallBack(),this.$instance("SearchBoxV8").action("searchMaskShow"),this.openCalendar(e)},this.openCalendar=e=>{this.$instance("SearchBoxV8").action("hideOtherPanel","Calendar"),this.$instance("HomeSearchV8").action("hideOtherPanel","Calendar");let _={};_="checkIn"===e?{checkInFocused:!0,checkOutFocused:!1}:{checkInFocused:!1,checkOutFocused:!0},this.setState(_,(()=>{const{position:_,needLowPrice:k,noValid:I,checkIn:C,checkOut:R,timeOffset:j,changeOnDestinationOrKeyWord:B,getCalendarPrice:U,rateplanRequestParam:V}=this.props;var G;G={regionid:this.props.destinationId,regionname:this.props.destinationValue,searchDateList:[{checkin:C,checkout:R}]},(0,Le.NW)("htl_ol_wcl_search_date_click",logUbtMapping_objectSpread({locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),channeltype:"online"},G)),this.$component("CalendarBoxV8").action("show",{changeOnDestinationOrKeyWord:B,target:this.calendarTarget,noValid:I,position:_,checkIn:C,checkOut:R,getCalendarPrice:U,dateType:e,timeOffset:j||(0,Re.yc)(),needLowPrice:k,rateplanRequestParam:V,changeCallback:(e,_)=>{const k=(0,Re.e3)(e[0],e[1])||0;"hide"!==_?this.props.select({checkIn:e[0],checkOut:e[1],nights:k}):this.$log({logKey:"ibu_htl_c_calender_change_done",logValue:{checkIn:e[0],checkOut:e[1],canSearch:k<=(0,Me.Z)()?"T":"F"}}),"end"===_&&this.$component("CalendarBoxV8").action("hide"),this.setState({checkInFocused:!1,checkOutFocused:"start"===_},(()=>{}))}})}))},this.showTooltip=e=>{this.setState({isShowTooltip:e})},this.focus=()=>{this.openCalendar("checkIn")},this.getShowTipStatus=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{showCalendarDateTip:k,checkIn:I,checkOut:C}=_.props;let R=!e&&k;return R&&I&&C&&(0,J.fw)({checkIn:I,checkOut:C}),R},this.ubtMapping={logSystemChangeClose:U.i7},this.hideDateTip=()=>{this.setState({isClosedTip:!0}),this.$safeLog("logSystemChangeClose")},this.$saveInstance("Calendar"),this.calendarTarget=Co.createRef,this.isArabic=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx)),this.state={checkInFocused:!1,checkOutFocused:!1,timeOffset:null,isClosedTip:!1,isShowTooltip:!1}}static getDerivedStateFromProps(e,_){return e.timeOffset!==_.timeOffset?{timeOffset:e.timeOffset||(0,Re.yc)()}:null}afterAsync(){const e=H.default.getByKey("initData.firstPageList.hotelList"),_=H.default.getByKey("pageId"),k=!checkValidParams()||this.props.destinationValue||!("10320668148"===_||"10320668268"===_)||0!==(null==e?void 0:e.length);this.props.showAfterAsync&&k&&(this.openCalendar("checkIn"),this.$instance("SearchBoxV8").action("searchMaskShow"))}scroll(){const{position:e}=this.props;this.$component("CalendarBoxV8").action("resetPosition",{target:this.calendarTarget,position:e})}isFocus(){return this.state.checkInFocused||this.state.checkOutFocused}hide(){this.$component("CalendarBoxV8").action("hide")}}var Po=k(39621).default,Lo=k(67294);class Buttons extends Po{constructor(e){super(e)}onClick(e){const{onClick:_,disabled:k}=this.props;if(k)return!1;_&&_(e,this.props)}getIcon(){const{loading:e,icon:_}=this.props,k=e?"btn-loading":_;if(k)return Lo.createElement(B.Z,{type:k})}getKid(){const{loading:e,children:_}=this.props;return!e&&Lo.createElement("span",null,_||"default")}render(){const{props:e}=this,{type:_,size:k,radius:I,block:R,className:B,icon:H,iconRight:U,disabled:V,loading:G}=e;let q="u-btn";const z=j()(q,{["".concat(q,"-").concat(_)]:_,["".concat(q,"-").concat(k)]:k,["".concat(q,"-radius").concat(I)]:I,["".concat(q,"-").concat(U?"iconRight":"icon")]:H,["".concat(q,"-block")]:R,["".concat(q,"-disabled")]:V,["".concat(q,"-loading")]:G},B),J=this.getIcon(),Q=this.getKid();return Lo.createElement("button",(0,C.Z)({},this.props,{className:z,disabled:V,onClick:e=>{this.onClick(e)}}),!U&&J,Q,U&&J)}}var No=k(39621).default,Do=k(67294);class Button extends No{constructor(e){super(e),this.minus=e=>{e.nativeEvent.stopPropagation();let{min:_,onChange:k,count:I,type:C}=this.props,R=I>_;I=R?--I:_,R&&k(I),this.$safeLog("logListpageNumChangeDirectionMinus",C,I)},this.plus=e=>{e.nativeEvent.stopPropagation();let{max:_,onChange:k,count:I,type:C}=this.props,R=I<_;I=R?++I:_,R&&k(I),this.$safeLog("logListpageNumChangeDirectionPlus",C,I)},this.ubtMapping={logListpageNumChangeDirectionMinus:U.Dp,logListpageNumChangeDirectionPlus:U.oE},this.onMouseOver=e=>{this.setState({["".concat(e,"Icon")]:"ic_bestir_".concat(e,"_solid")})},this.onMouseOut=e=>{this.setState({["".concat(e,"Icon")]:"ic_bestir_".concat(e)})},this.state={minusIcon:"ic_bestir_minus",plusIcon:"ic_bestir_plus"}}render(){const{min:e,max:_,count:k}=this.props,{minusIcon:I,plusIcon:C}=this.state,R=k<=e,H=k>=_;return Do.createElement("div",{className:"actions"},Do.createElement(B.Z,{onMouseDown:this.minus,onMouseOver:R?()=>{}:()=>this.onMouseOver("minus"),onMouseOut:R?()=>{}:()=>this.onMouseOut("minus"),type:R?"ic_bestir_minus":I,className:j()("icon-btn",{disabled:R})}),Do.createElement("span",{className:"count"},k),Do.createElement(B.Z,{onMouseDown:this.plus,onMouseOver:H?()=>{}:()=>this.onMouseOver("plus"),onMouseOut:H?()=>{}:()=>this.onMouseOut("plus"),type:H?"ic_bestir_plus":C,className:j()("icon-btn",{disabled:H})}))}}Button.defaultProps={count:0,min:0,max:1},Button.propTypes={count:_e().number,min:_e().number,max:_e().number};class Action extends No{constructor(e){super(e)}render(){const{title:e,sub:_}=this.props,k=(0,q.XG)(this);return Do.createElement("div",{className:j()("child-kid",{"child-kid-version-b":k})},Do.createElement("label",null,Do.createElement("span",null,e),Do.createElement("span",null,_)),Do.createElement(Button,this.props))}}Action.defaultProps={title:"",sub:""},Action.propTypes={title:_e().string,sub:_e().string};const Ao=(0,q.XJ)(void 0)||(0,q.eW)(void 0),Ro=Ao?new Array(19).fill("").map(((e,_)=>_>1?String(_-1):1===_?"<1":"-1")):new Array(18).fill("").map(((e,_)=>_?String(_):"<1")),xo="multiTipKey",jo="-1",Bo={0:{ICON:""},1:{ICON:"ic_new_fa_no_smoking"},2:{ICON:"ic_new_fa_no_smoking"},3:{ICON:"ic_new_fa_breakfast"},4:{ICON:"a-Description_extrabed1"},5:{ICON:"ic_new_fa_wifi"},6:{ICON:"ic_new_fa_wifi"},7:{ICON:"ic_new_fa_double_bed"},8:{ICON:"ic_new_fa_double_bed"},9:{ICON:"ic_new_fa_twobeds"},10:{ICON:"ic_new_fa_twobeds"},11:{ICON:"ic_new_fa_smoking"},15:{ICON:"window"}};var Mo=k(39621).default,Fo=k(67294);class Checkbox extends Mo{constructor(e){super(e)}render(){const{data:e,className:_,iconClassName:k="",specialRequest:I=!1}=this.props;return!e||e.length<1?null:Fo.createElement("ul",{className:j()("m-checkbox",_)},e.map(((e,_)=>{var C;let R=0;return I&&e.value&&(R=e.value.split("-")[0]),Fo.createElement("li",{key:_,className:j()("m-checkbox_item",{active:this.state.value.indexOf(e.value)>-1}),onClick:this.handleClick.bind(this,e)},Fo.createElement(Ee.Z,{type:"checkbox",className:k}),I&&(null===(C=Bo[R])||void 0===C?void 0:C.ICON)&&Fo.createElement(Ee.Z,{className:"fac-icon",type:Bo[R].ICON}),Fo.createElement("span",{className:"checkboxTxt",dangerouslySetInnerHTML:{__html:e.text}}))})))}}class CheckBox extends Checkbox{constructor(e){super(e),this.state={value:this.props.value||this.props.defaultValue||[]}}componentDidUpdate(e){void 0!==this.props.value&&e.value!==this.props.value&&this.setState({value:this.props.value})}handleClick(e){const{onChange:_}=this.props;let k=this.state.value;this.state.value.indexOf(e.value)>-1?k.splice(k.indexOf(e.value),1):k.push(e.value),this.setState({value:k}),e&&1189==(null==e?void 0:e.value)&&(1==(null==e?void 0:e.status)?ke.y7.set("feature",e):ke.y7.remove("feature")),_&&_(k)}}var Ho=k(39621).default,Ko=k(67294);class roomguest_view_View extends Ho{constructor(){super(...arguments),this.renderSelectHtml=()=>{const{childSearchPolicy:e={},isShowChildPolicy:_=!1}=this.props;let k=[];this.state.childAges.forEach(((e,_)=>{let I=this.state.childBeds[_]+"+"+this.state.childMeals[_];k.push(I)}));let I=[];const{ageRange:C=[]}=e;return C.length>0&&C.forEach((e=>{if("multi"===e.checkType){let _=[];e.policyItem.forEach((e=>{let k={value:(null==e?void 0:e.bed)+"-"+(null==e?void 0:e.meal),text:e.desc};_.push(k)})),I.push({checkType:e.checkType,maxAge:e.maxAge,minAge:e.minAge,policyItem:_})}else I.push(e)})),Ko.createElement("div",{className:"child-age"},Ko.createElement("p",{className:"child-tips"},"T"===H.default.getByKey("qconfigData.useNewChildPriceSearchBoxText")?this.$translate("key.hotel.searchpage.child.note"):this.$translate("key.hotel.online.homepage.child.age")),Ko.createElement("div",{className:"age-select"},this.state.childAges.map(((e,C)=>Ko.createElement(Selector,{key:C,data:Ro,value:e,bedAndMeal:k[C],onChange:e=>this.selectChange(e,C),show:this.state.agesShow[C],toggleShow:()=>this.selectToggleShow(C),childPolicyData:I,isShowChildPrice:_,index:C,showChildMust:this.state.agesLessthanZero.includes(C)})))))}}render(){const{rooms:e,adults:_,maxAdult:k,children:I,maxChild:C,visible:R,showMultipleTip:U,maxRoom:V,minRoom:G}=this.state,{needFix:z}=this.props,J=this.$translatePlural("key.hotel.online.homepage.searchbox.rooms",e),Q=this.$translatePlural("key.hotel.searchbox.echo.adult",_),ee=this.$translatePlural("key.hotel.searchbox.echo.child",I),te=(0,q.XG)(this),ne=(0,q.eW)(this),re=(0,q.XJ)(this),oe={channeltype:"online",page:H.default.getByKey("pageId"),locale:H.default.getByKey("cargo.locale")},ie=JSON.stringify({ubtKey:"htl_ol_wcl_search_prnumLayer_recomTips_exposure",data:oe}),ae=JSON.stringify({ubtKey:"htl_ol_wcl_search_prnumLayer_childageTips_exposure",data:oe});return Ko.createElement("div",{className:"room-guest-container-v8",style:this.props.style},Ko.createElement("div",{className:j()("room-guest",{"room-guest-hover-versionb":te,"room-guest-wrap-b":te,"room-guest-version-b":te}),onClick:this.togglePanel,ref:this.inputRef},this.props.roomsearch||te?null:Ko.createElement("label",{className:"minNoise-roomGuestLabel"},(()=>re?this.$translate("key.88801001.WAP.select.layer.title.room"):ne?this.$translate("key.88801001.WAP.select.layer.title.guest"):this.$translate("key.hotel.online.homepage.rooms.guests"))()),te&&Ko.createElement(B.Z,{type:"ic_new_user_line",className:"guest-icon"}),ne?Ko.createElement("p",{id:"preload-room-guest",className:j()("info show-hightlight",{"info-versionb":te})},Ko.createElement("span",null,Q),", ",Ko.createElement("span",null,ee),", ","",Ko.createElement("span",null,J)):Ko.createElement("p",{id:"preload-room-guest",className:j()("info show-hightlight",{"info-versionb":te})},Ko.createElement("span",null,J),", ",Ko.createElement("span",null,Q),", ","",Ko.createElement("span",null,ee)),te?null:Ko.createElement(B.Z,{type:R?"ic_new_dropup_line":"ic_new_dropdown_line",className:"icon-arrow"})),R&&Ko.createElement("div",{className:j()("bottom-line",{"bottom-line-version-b":te,"bottom-line-need-fix-version-b":te&&z})}),R&&(ne?Ko.createElement("div",{className:j()("choice",{"popContainer-b":te,"choice-version-b":te}),onClick:e=>{e.stopPropagation()}},Ko.createElement("div",{className:"choice-content"},Ko.createElement(Action,{title:this.$translate("key.hotel.online.homepage.adult"),sub:this.$translate("key.hotel.online.homepage.adult.year"),count:_,min:e,max:k,onChange:this.adultChange,type:"adult"}),Ko.createElement(Action,{title:this.$translate("key.hotel.online.homepage.child"),sub:this.$translate("key.hotel.online.homepage.child.year"),count:I,max:C,onChange:this.childChange,type:"children"}),I>=C?Ko.createElement("p",{className:"child-toast-tip","data-exposure":ae},this.$translate("key.hotel.metapage.children.most.toast")):null,I?this.renderSelectHtml():null,this.state.agesShow.map(((e,_)=>{if(e)return Ko.createElement("ul",{className:j()("ages-list","show")},Ro.map(((e,k)=>Ko.createElement("li",{onClick:()=>this.selectChange(e,_),key:k},Ko.createElement("span",null,e)))))})),Ko.createElement(Action,{title:this.$translate("key.hotel.online.homepage.rooms"),sub:"",count:e,min:G,max:V,onChange:this.roomChange,type:"roomnum"})),U?Ko.createElement("div",{className:"adult-tips","data-exposure":ie},Ko.createElement("div",null,this.$translate("key.88801001.hotel.list.search.box.add.room.tip")),Ko.createElement("div",{className:"adult-tips-close",onClick:this.closeTip},Ko.createElement(B.Z,{type:"close"}))):null,Ko.createElement("div",{className:"done"},Ko.createElement(Buttons,{type:"primary",onClick:this.done},this.$translate("key.hotel.online.homepage.rooms.guests.done")))):Ko.createElement("div",{className:j()("choice",{"popContainer-b":te,"choice-version-b":te}),onClick:e=>{e.stopPropagation()}},Ko.createElement("div",{className:"choice-content"},Ko.createElement(Action,{title:this.$translate("key.hotel.online.homepage.rooms"),sub:"",count:e,min:G,max:V,onChange:this.roomChange,type:"roomnum"}),Ko.createElement(Action,{title:this.$translate("key.hotel.online.homepage.adult"),sub:this.$translate("key.hotel.online.homepage.adult.year"),count:_,min:e,max:k,onChange:this.adultChange,type:"adult"}),Ko.createElement(Action,{title:this.$translate("key.hotel.online.homepage.child"),sub:this.$translate("key.hotel.online.homepage.child.year"),count:I,max:C,onChange:this.childChange,type:"children"}),I>=C?Ko.createElement("p",{className:"child-toast-tip","data-exposure":ae},this.$translate("key.hotel.metapage.children.most.toast")):null,I?this.renderSelectHtml():null,this.state.agesShow.map(((e,_)=>{if(e)return Ko.createElement("ul",{className:j()("ages-list","show")},Ro.map(((e,k)=>Ko.createElement("li",{onClick:()=>this.selectChange(e,_),key:k},Ko.createElement("span",null,e)))))}))),U?Ko.createElement("div",{className:"adult-tips","data-exposure":ie},Ko.createElement("div",null,this.$translate("key.88801001.hotel.list.search.box.add.room.tip")),Ko.createElement("div",{className:"adult-tips-close",onClick:this.closeTip},Ko.createElement(B.Z,{type:"close"}))):null,Ko.createElement("div",{className:"done"},Ko.createElement(Buttons,{type:"primary",onClick:this.done},this.$translate("key.hotel.online.homepage.rooms.guests.done"))))))}}class Selector extends Ho{constructor(e){super(e),this.toggleShowPromise=()=>new Promise((e=>{const{toggleShow:_}=this.props;_(),e(!0)})),this.stopPropagation=e=>{e.nativeEvent.stopImmediatePropagation()},this.state={left:0,top:0}}render(){const{value:e,onChange:_,bedAndMeal:k,isShowChildPrice:I,childPolicyData:C,index:R,showChildMust:U}=this.props;let V=[];"1"==k.split("+")[0]&&V.push("1-0"),"1"==k.split("+")[1]&&V.push("0-1");const G=(0,q.XG)(this),z=e===jo?this.$translate("key.88801001.WAP.select.layer.child.ageneed"):"0"===e?this.$translate("key.hotel.searchpage.child.age").replace("%1$s","< 1"):this.$translatePlural("key.hotel.searchpage.child.age",e,"","%1$s");return I?Ko.createElement("div",{className:"age-select-wrap-child-v8"},Ko.createElement("div",{className:"age-title"},Ko.createElement("div",{className:"age-child"},"T"===H.default.getByKey("qconfigData.useNewChildPriceSearchBoxText")?this.$translate("key.hotel.searchpage.child.order").replace("%1$s",R+1):this.$translate("key.hotel.online.homepage.child.subtitle")),Ko.createElement("div",{className:"age-selected"},Ko.createElement("span",{className:"age-selected-text"},Ko.createElement("span",{className:j()("age-select-agedesc")},"T"===H.default.getByKey("qconfigData.useNewChildPriceSearchBoxText")?z:"0"===e?"< 1":e),Ko.createElement(B.Z,{type:"ic_new_ascending",className:"newSelectIcon"})),Ko.createElement("select",{key:R,className:"age-selected-box",onClick:this.stopPropagation,value:e,onChange:e=>{var k,I;(null==e||null===(k=e.target)||void 0===k?void 0:k.value)&&_(null==e||null===(I=e.target)||void 0===I?void 0:I.value)}},Ro.map(((e,_)=>Ko.createElement("option",{value:"<1"===e?"0":e,key:_},e===jo?this.$translate("key.88801001.WAP.select.layer.child.selectage"):e)))))),C.map(((k,I)=>{var C;return e>=k.minAge&&e<=k.maxAge&&"default"===k.checkType?Ko.createElement("p",{className:"age-desc",key:I},null==k||null===(C=k.policyItem[0])||void 0===C?void 0:C.desc):e>=k.minAge&&e<=k.maxAge&&"multi"===k.checkType?Ko.createElement(CheckBox,{className:"age-checkbox",data:null==k?void 0:k.policyItem,value:V,key:I,onChange:e=>_(e),iconClassName:"icon-top"}):void 0}))):Ko.createElement("div",{className:j()("age-select-container",{"age-select-container-version-b":G,"age-select-container-version":Ao,"age-select-container-version-must":Ao&&e===jo&&U})},Ko.createElement("div",{className:"age-select-content"},Ko.createElement("div",{className:"age-select-desc"},Ko.createElement("span",{className:"age-select-descName"},this.$translate("key.hotel.online.homepage.child.subtitle")),Ko.createElement("span",null,R+1),Ao?Ko.createElement("span",{className:"age-select-must"},"*"):null),Ko.createElement("div",{className:"age-select-text"},Ko.createElement("span",{className:j()("age-select-agedesc",{"age-select-agedesc-version-must":Ao&&e===jo&&U})},z),Ko.createElement(B.Z,{type:"ic_new_ascending",className:"newSelectIcon"}),Ko.createElement("select",{key:R,className:"age-select-wrap-v8",onClick:this.stopPropagation,value:e,onChange:e=>{var k,I;(null==e||null===(k=e.target)||void 0===k?void 0:k.value)&&_(null==e||null===(I=e.target)||void 0===I?void 0:I.value)}},Ro.map(((e,_)=>Ko.createElement("option",{value:"<1"===e?"0":e,key:_},e===jo?this.$translate("key.88801001.WAP.select.layer.child.selectage"):e)))))))}}var Uo=k(87589),Zo=k.n(Uo);const Vo=(0,H.getGData)(),getLegalCount=(e,_)=>isNaN(parseInt(null!=_?_:"",10))?e:parseInt(null!=_?_:"",10),{roomNumbers:Wo,peopleNumbers:Go}=(()=>{var e,_,k,I,C,R,j;if(H.default.getByKey("pageId")===(null===Zo()||void 0===Zo()||null===(e=Zo().mapNewPage)||void 0===e?void 0:e.pageId)){return{roomNumbers:{MIN_ROOM:1,MAX_ROOM:10},peopleNumbers:{ADULT_RATE:8,CHILD_RATE:6}}}return{roomNumbers:{MIN_ROOM:1,MAX_ROOM:getLegalCount(10,null==Vo||null===(_=Vo.qconfigData)||void 0===_||null===(k=_.maxRoomAdultChild)||void 0===k?void 0:k.maxRoom)},peopleNumbers:{ADULT_RATE:getLegalCount(8,null==Vo||null===(I=Vo.qconfigData)||void 0===I||null===(C=I.maxRoomAdultChild)||void 0===C?void 0:C.maxAdultPerRoom),CHILD_RATE:getLegalCount(6,null==Vo||null===(R=Vo.qconfigData)||void 0===R||null===(j=R.maxRoomAdultChild)||void 0===j?void 0:j.maxChildPerRoom)}}})(),$o=Wo,qo=Go;var zo=k(67294);class RoomGuestV8 extends roomguest_view_View{constructor(e){super(e),this.init=e=>{const{rooms:_,adults:k,childs:I,childAges:C,childBeds:R,childMeals:j}=e;this.setState({rooms:_,adults:k,children:I,childAges:C,childBeds:R,childMeals:j,agesShow:C.map((()=>!1)),maxAdult:_*qo.ADULT_RATE,maxChild:_*qo.CHILD_RATE})},this.focus=()=>{this.showPanel()},this.emptyClick=e=>{if(this.state.visible){let k=document.querySelectorAll(".choice"),I=!1;if(Array.prototype.slice.call(k).forEach((_=>{if(_.contains(e.target))return I=!0})),I)return;if(Ao){var _;const k=null===(_=e.target)||void 0===_?void 0:_.className;if(/-btn|-search|searbtn-txt/.test(k)&&this.state.agesLessthanZero.length>0)return}this.hidePanel(),"function"==typeof this.props.handleBlur&&this.props.handleBlur()}},this.roomChange=e=>{this.setMax(e,(()=>{let{adults:_,children:k,maxAdult:I,maxChild:C,childAges:R,childBeds:j,childMeals:B}=this.state;const{isShowChildPolicy:H=!1}=this.props;let U="";_>I&&(_=I,U="adult",this.$safeLog("logListpageNumChangeDirectionMinus",U,_)),_<e&&(_=e,U="adult",this.$safeLog("logListpageNumChangeDirectionPlus",U,_)),k>C&&(k=C,U="children",this.$safeLog("logListpageNumChangeDirectionMinus",U,k)),R.length>C&&(R.length=C),j.length>C&&H&&(j.length=C),B.length>C&&H&&(B.length=C),this.setState({adults:_,children:k,childAges:R,childMeals:B,childBeds:j},(()=>{this.handleInfo()}))}))},this.adultChange=e=>{this.setState({adults:e},(()=>{this.handleInfo()}))},this.childChange=e=>{var _,k,I;const{children:C,childAges:R,childBeds:j,childMeals:B}=this.state,{childSearchPolicy:U={},isShowChildPolicy:V=!1}=this.props,{ageRange:G=[]}=U,q=(0,Ne.Z)("ages"),z=null!==(_=localStorage.getItem("ibu_hotel_search_filter"))&&void 0!==_?_:"[]",J=JSON.parse(z),Q=(null===(k=G[0])||void 0===k||null===(I=k.policyItem[0])||void 0===I?void 0:I.desc)||"";if(e>C){if(Ao)if(!q&&J.length>0){var ee,te;const{roomGuest:_}=J[0],k=null!==(ee=null==_?void 0:_.childAges)&&void 0!==ee?ee:[];R.push(null!==(te=null==k?void 0:k[e-1])&&void 0!==te?te:jo)}else R.push(jo);else R.push("0");if(V){j.push("0"),B.push("0");let e={page:H.default.getByKey("pageId"),context:Q};this.$safeLog("logRoomguestsProvideShow",e)}}else{if(Ao){const{agesLessthanZero:_}=this.state,k=_.length;k>0&&_[k-1]===e&&this.setState({agesLessthanZero:_.filter((_=>_!==e))})}R.pop(),V&&(j.pop(),B.pop())}this.setState({children:e,childAges:R,childBeds:j,childMeals:B},(()=>{this.handleInfo()}));for(var ne=0;ne<R.length;ne++)this.$safeLog("logListpageChildrenAgeChoice",R[ne],ne)},this.setMax=(e,_)=>{this.setState({rooms:e,maxAdult:e*qo.ADULT_RATE,maxChild:e*qo.CHILD_RATE},(()=>{_&&_()}))},this.togglePanel=e=>{e&&e.stopPropagation();const{agesShow:_,visible:k,rooms:I,children:C,adults:R}=this.state;var j;_.forEach(((e,k)=>{!0===e&&(_[k]=!1)})),this.$instance("SearchBoxV8").action("searchMaskShow"),this.$instance("SearchBoxV8").action("hideOtherPanel","RoomGuest"),this.$instance("HomeSearchV8").action("hideOtherPanel","RoomGuest"),this.props.clickCallBack&&this.props.clickCallBack(),j={action:k?"close":"open",adultnum:R||2,roomnum:I||1,childnum:C||0},(0,Le.NW)("htl_ol_wcl_search_prnum_click",logUbtMapping_objectSpread({locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),channeltype:"online"},j)),this.state.visible?this.hidePanel():this.showPanel()},this.showPanel=()=>{this.state.visible||this.setState({visible:!0},(()=>{this.props.clickDone&&!this.props.afterUserAction&&this.props.clickDone(!1),window.addEventListener("click",this.emptyClick),this.$safeLog("logHomePageGuestAndRoomLayerAction","open")}))},this.hidePanel=()=>{Ao&&this.setState({agesLessthanZero:[]}),this.state.visible&&this.setState({visible:!1},(()=>{this.props.clickDone&&this.props.clickDone(!0),this.closeTip(),window.removeEventListener("click",this.emptyClick),this.$safeLog("logHomePageGuestAndRoomLayerAction","close")}))},this.toggleShowSelect=e=>{const{agesShow:_}=this.state;return _.map(((k,I)=>e===I&&!_[I]))},this.selectChange=(e,_)=>{const{childBeds:k,childMeals:I,childAges:C}=this.state,{childSearchPolicy:R={},isShowChildPolicy:j=!1}=this.props,{ageRange:B=[]}=R;Array.isArray(e)?(0==e.length&&(k[_]="0",I[_]="0"),1==e.length&&(k[_]=e.toString().split("-")[0],I[_]=e.toString().split("-")[1]),2==e.length&&(k[_]="1",I[_]="1"),this.setState({childBeds:k,childMeals:I},(()=>{this.handleInfo()}))):(C[_]=e,"<1"===e&&(e=0),j&&(B.forEach((C=>{if(e>=(null==C?void 0:C.minAge)&&e<=(null==C?void 0:C.maxAge)){if("default"===C.checkType){var R,j,B;k[_]=null==C||null===(R=C.policyItem[0])||void 0===R?void 0:R.bed,I[_]=null==C||null===(j=C.policyItem[0])||void 0===j?void 0:j.meal;let e={page:H.default.getByKey("pageId"),context:null==C||null===(B=C.policyItem[0])||void 0===B?void 0:B.desc};this.$safeLog("logRoomguestsProvideShow",e)}"multi"===C.checkType&&(k[_]=0,I[_]=0)}})),e>=12&&(k[_]="-1",I[_]="-1")),this.setState({childAges:C,childBeds:k,childMeals:I,agesShow:this.toggleShowSelect(_)},(()=>{this.handleInfo()})),this.$safeLog("logListpageChildrenAgeChoice",C[_],_))},this.selectToggleShow=e=>{this.setState({agesShow:this.toggleShowSelect(e)})},this.handleInfo=()=>{const{rooms:e,adults:_,children:k,childAges:I,childBeds:C,childMeals:R}=this.state,j={rooms:e,adults:_,children:k,childAges:I,childBeds:C,childMeals:R};let B={page:H.default.getByKey("pageId"),type:{ages:I.join(",")||"",childBeds:C.join(",")||"",childMeals:R.join(",")||""}};this.$safeLog("logPriorityClick",B),this.props.select(j)},this.setAgesLessthanZero=()=>{const{childAges:e}=this.state;this.setState({agesLessthanZero:e.map(((e,_)=>e===jo?_:null)).filter((e=>null!==e))})},this.done=e=>{if(Ao){const{children:e,childAges:_}=this.state;if(e!==_.filter((e=>e!==jo)).length)return void this.setAgesLessthanZero()}e&&e.stopPropagation(),this.hidePanel(),this.handleInfo(),setTimeout((()=>{this.props.handleBlur&&this.props.handleBlur()}),0),this.$safeLog("logListpageGuestAndRoomLayerDoneClick",this.props)},this.closeTip=()=>{const{showMultipleTip:e}=this.state;e&&(localStorage.setItem(xo,Date.now()+2592e6),this.setState({showMultipleTip:!1}))},this.isRequiredPage=()=>{const e=H.default.getByKey("pageId");return["10320668150","10320668148","10320668268"].includes(e)},this.ubtMapping={logHomePageGuestAndRoomLayerAction:U.nF,logListpageGuestAndRoomLayerDoneClick:U.WH,logListpageChildrenAgeChoice:U.aV,logListpageNumChangeDirectionMinus:U.Dp,logListpageNumChangeDirectionPlus:U.oE,logRoomguestsProvideShow:U.cZ,logPriorityClick:U.Ry},this.$saveInstance(this.props.componentName||"");let _=this.props.rooms,k=this.props.childAges.filter((e=>+e>=0&&+e<=17))||[];this.state={rooms:_,maxRoom:$o.MAX_ROOM,minRoom:$o.MIN_ROOM,adults:this.props.adults,maxAdult:_*qo.ADULT_RATE,children:k.length,childAges:k,childBeds:this.props.childBeds,childMeals:this.props.childMeals,childTypes:this.props.childTypes,agesShow:[],maxChild:_*qo.CHILD_RATE,visible:!1,showMultipleTip:!1,agesLessthanZero:[]},this.inputRef=zo.createRef()}componentDidMount(){this.setMax(this.props.rooms),this.init(this.props),(0,z.observe)()}UNSAFE_componentWillReceiveProps(e){this.init(e)}componentDidUpdate(){const{rooms:e,adults:_,showMultipleTip:k,visible:I}=this.state,C=localStorage.getItem(xo),R=1===e&&_>2;(C&&Date.now()-C>0||!C)&&R&&this.isRequiredPage()&&!k&&I?this.setState({showMultipleTip:!0}):R||this.closeTip()}}RoomGuestV8.defaultProps={rooms:1,adults:2,childs:0,childAges:[],childBeds:[],childMeals:[],childTypes:[],childTip:"",select:()=>{},isShowChildPolicy:!1},RoomGuestV8.propTypes={rooms:_e().number,adults:_e().number,childs:_e().number,childTip:_e().string,select:_e().func,isShowChildPolicy:_e().bool};var Yo=k(35469),Jo=k(85529),Xo=k(39621).default,Qo=k(67294);class OnlineButtonV2 extends Xo{render(){return Qo.createElement(Jo.Z,this.props)}}var ei=k(84258),ti=k(39621).default,ni=k(67294);const ri=class OnlineButton extends ti{constructor(e){super(e)}render(){var e;return Ce.Z?ni.createElement(OnlineButtonV2,this.props):ni.createElement(ei.TripContextNodeProvider,{request:null===(e=this.ctx)||void 0===e?void 0:e.req},ni.createElement(OnlineButtonV2,this.props))}};var oi=k(67294);const detailButton=e=>{const{loading:_,roomSearch:k,ctx:I,simpleSearch:C,isAnimation:R,isSearchConditionChanged:H,isSearchBoxVersionB:U,hideRoomGuest:V}=e,G=H&&V&&!_&&U,q=G&&!k?(0,Yo.I)("key.88801001.searchbar.search.button.update.search",null,I):(0,Yo.I)("key.hotel.detail.search.button.search",null,I);return oi.createElement(ri,{type:H||_||U?"solid-primary":"wireframe-primary",className:j()("search-button-new",{withAnimation:R&&!U,"search-button-version-b":U,"search-button-txt-version-b":U,"search-button-txt-middle-version-b":U}),loadingAutoSize:!1,loading:_,size:C?"middle":"large",is_icon_rotate:!1,prefixIcon:oi.createElement(B.Z,{type:G?"ic_refresh":"search",className:j()("searchIcon",{simple:C,"searchIcon-version-b":U})})},oi.createElement("span",{className:"searbtn-txt"},k?(0,Yo.I)("key.hotel.detail.search.button.update",null,I):q))};var ii=k(32127);let ai={finishPage:"10320668152",addReviewsPage:"10320668156",finishReviewsPage:"10650003622",homePage:"10320668150",listPage:"10320668148",listNewPage:"10320668148",metaPage:"10320668268",brgPage:"10650026833",orderDetailPage:"10320668151",mapPage:"10320668154",mapNewPage:"10320668154",bookPage:"10320668149",detailPage:"10320668147"};var li=k(64337),si=k(63732),ci=k(72427),ui=k(23687);function link_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function link_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?link_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):link_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let di=["0","-1",0,-1,void 0,null];const deleteLatLon=e=>(di.includes(e.lat)&&delete e.lat,di.includes(e.lon)&&delete e.lon,e),spliceParamUrl=e=>{let _=Object.keys(e).map((_=>({key:_,val:e[_]}))).reduce((function(e,_,k,I){let C=String(_.val)?"".concat(_.key,"=").concat(encodeURIComponent(_.val)).concat(k===I.length-1?"":"&"):"";return e+"".concat(C)}),"");return"&"===_.slice(-1)&&(_=_.slice(0,-1)),_=_.replace(/\|/g,"~"),_},replaceParamUrl=e=>{let _=window.location.search,k=window.location.pathname;Object.keys(e).map((k=>{_=replaceOrSplice(_,k,e[k])}));let I="".concat(k).concat(_);return I=I.replace(/\|/g,"~"),I},replaceOrSplice=(e,_,k)=>(e||"").toLowerCase().indexOf(_.toLowerCase())>-1?(0,ii.qz)({["".concat(_)]:k},e):k?"".concat((e=>e.indexOf("?")>-1?"".concat(e,"&"):"".concat(e,"?"))(e)).concat(_,"=").concat(k):e,_comSearchWord=(e,_)=>{var k;let I=[],C=_||(null==e||null===(k=e.item)||void 0===k?void 0:k.data);if(!C)return"";let R=["filterID","type","value","subType"],j=["filterId","type","value","subType"];return C&&C.filterID?I=R.map((e=>C[e]||"")):C&&C.filterId&&(I=j.map((e=>C[e]||""))),I=I.join("*"),I},comMultiSearchWord=e=>{var _;let k=[];const I=null==e||null===(_=e.item)||void 0===_?void 0:_.data;var C;if(I){if("[object Array]"===Object.prototype.toString.call(I)&&(k=I),"[object Object]"===Object.prototype.toString.call(I))return _comSearchWord(null,I)}else(null==e?void 0:e.multiFilterItems)&&(k=(null==e||null===(C=e.multiFilterItems)||void 0===C?void 0:C.map((e=>e.data)))||[]);if(k.length)return k.reduce(((e,_,k)=>{const I=_comSearchWord(null,_);return e+(0===k?I:":".concat(I))}),"")},_getListFilters=e=>{var _,k,I,C,R,j;const B=(null==e||null===(_=e.roomGuest)||void 0===_?void 0:_.adults)||2,H=((null==e||null===(k=e.roomGuest)||void 0===k?void 0:k.childAges)||[]).map(((e,_)=>({filterId:"29|".concat(_+=2,"|").concat(e),type:"29",value:"".concat(_,"|").concat(e),subType:"2"}))),U=["15","16","6","7","83","5","23","80","4"];let V=(null==e||null===(I=e.filters)||void 0===I?void 0:I.filter((e=>U.indexOf(e.type)>-1)))||[],G=location.search.toLocaleLowerCase();e.city&&["city=".concat(e.city),"cityid=".concat(e.city)].find((e=>-1!==G.indexOf(e)))?V=null==e?void 0:e.filters:ke.y7.remove("feature"),V.push({filterId:"29|1",type:"29",value:"1|".concat(B),subType:"2"}),V.push(...H);const q=(0,ci.Z)(window,"IBU_HOTEL.initData.searchBarData.search");return q.resultWord!=e.search.resultWord&&(null==q||null===(C=q.item)||void 0===C||null===(R=C.data)||void 0===R?void 0:R.filterId)&&(V=V.filter((e=>q.item.data.filterId!==e.filterId))),((null===(j=V)||void 0===j?void 0:j.map((e=>{const{filterId:_="",type:k="",value:I="",subType:C=""}=e||{};return _+"*"+k+"*"+I+"*"+C})))||[]).join(",")},_getSearchCoordinate=e=>{let _=[];return(0,si.kJ)(e)&&e.length&&(_=e.map((e=>(null==e?void 0:e.coordinateType)?Object.values(e).join("_"):""))),_.join("|")},pi=function originParamHandle(e){var _,k,I,C;let R=arguments.length>1&&void 0!==arguments[1]&&arguments[1],j=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{search:B}=e;let U=0,V=0,{checkIn:G,checkOut:q}=e.calendar;const z="F"===H.default.getByKey("initData.TimeOffsetValid"),{checkInStr:Q,checkOutStr:ee}=(0,Be.Lf)({checkIn:G,checkOut:q,timeOffset:!z&&B.timeOffset,maxNights:(0,Me.Z)()});if(e.filters=[],G=Q,q=ee,(0,si.UK)(B,"coordinateInfos")){let e=B.coordinateInfos.find((e=>"GOOGLE"===e.coordinateType));U=e&&e.latitude||0,V=e&&e.longitude||0}R&&"11079"===e.search.code&&(e.search.code="228");const te=(null===(_=e.filters)||void 0===_||null===(k=_.filter((e=>"15|Range"==e.filterId))[0])||void 0===k?void 0:k.value.split("|"))||[];let ne={},re="S"===B.resultType?B.code:0;const oe=null!==(I="number"==typeof(null==B?void 0:B.city)?B.city:null==B||null===(C=B.city)||void 0===C?void 0:C.geoCode)&&void 0!==I?I:0,ie=comMultiSearchWord(B);var ae,le,se,ce;j?ne=link_objectSpread(link_objectSpread({city:oe,cityName:(0,si.UK)(B,"city.currentLocaleName")||"",provinceId:(0,si.UK)(B,"province.geoCode")||0,countryId:(0,si.UK)(B,"country.geoCode")||0,districtId:re,checkin:G,checkout:q,starlist:e.star.join(","),lowPrice:te.length?te[0]:0,highPrice:te.length>=1?+te[1]:-1,barCurr:(0,li.zC)(),lat:U,lon:V,searchType:B.resultType,searchWord:(0,J.Qn)(B)},ie?{searchValue:ie}:{}),{},{searchCoordinate:_getSearchCoordinate(B.coordinateInfos),crn:e.roomGuest.rooms||1,adult:e.roomGuest.adults||2,children:e.roomGuest.children||0,ages:(null===(ae=e.roomGuest.childAges)||void 0===ae?void 0:ae.join(","))||"",beds:(null===(le=e.roomGuest.childBeds)||void 0===le?void 0:le.join(","))||"",meals:(null===(se=e.roomGuest.childMeals)||void 0===se?void 0:se.join(","))||"",googlePlaceId:"",searchBoxArg:"t",label:(0,Ne.Z)("label")||"",travelPurpose:~~e.travel,ctm_ref:"ix_sb_dl",domestic:"OVERSEA"!==(0,si.UK)(B,"cityType"),rate:(0,Ne.Z)("rate")||"",discount:(0,Ne.Z)("discount")||(0,Ne.Z)("discounts")||"",payType:(0,Ne.Z)("payType")||"",bookPolicy:(0,Ne.Z)("bookPolicy")||"",bedType:(0,Ne.Z)("bedType")||"",bookable:(0,Ne.Z)("bookable")||"",breakfast:(0,Ne.Z)("breakfast")||"",edmHotelData:(0,Ne.Z)("edmHotelData")||"",listFilters:_getListFilters(Object.assign({},e,{city:oe}))}):ne=link_objectSpread(link_objectSpread({city:oe,cityName:(0,si.UK)(B,"city.currentLocaleName")||"",provinceId:(0,si.UK)(B,"province.geoCode")||0,countryId:(0,si.UK)(B,"country.geoCode")||0,districtId:re,checkin:G,checkout:q,starlist:e.star.join(","),lowPrice:te.length?te[0]:0,highPrice:te.length>=1?+te[1]:-1,barCurr:(0,li.zC)(),lat:U,lon:V,searchType:B.resultType,searchWord:(0,J.Qn)(B)},ie?{searchValue:ie}:{}),{},{searchCoordinate:_getSearchCoordinate(B.coordinateInfos),crn:e.roomGuest.rooms||1,adult:e.roomGuest.adults||2,children:e.roomGuest.children||0,ages:(null===(ce=e.roomGuest.childAges)||void 0===ce?void 0:ce.join(","))||"",googlePlaceId:"",searchBoxArg:"t",label:(0,Ne.Z)("label")||"",travelPurpose:~~e.travel,ctm_ref:"ix_sb_dl",domestic:"OVERSEA"!==(0,si.UK)(B,"cityType"),rate:(0,Ne.Z)("rate")||"",discount:(0,Ne.Z)("discount")||(0,Ne.Z)("discounts")||"",payType:(0,Ne.Z)("payType")||"",bookPolicy:(0,Ne.Z)("bookPolicy")||"",bedType:(0,Ne.Z)("bedType")||"",bookable:(0,Ne.Z)("bookable")||"",breakfast:(0,Ne.Z)("breakfast")||"",edmHotelData:(0,Ne.Z)("edmHotelData")||"",listFilters:_getListFilters(Object.assign({},e,{city:oe}))});const ue=(0,Ne.Z)("barCurr"),de=(0,Ne.Z)("curr");return de&&de!==ue||(ne=Object.assign({},ne,{highPrice:Number(te[1])||"",lowPrice:Number(te[0])||"",showtotalamt:e.showtotalamt||"",barCurr:ue})),ne},linkSearch=e=>{const{param:_,isMap:k,isShowChildPolicy:I}=e;let C=pi(_,!1,I,k);if(C=deleteLatLon(C),document.getElementById("page_id").value===ai.metaPage&&!window.mainProcess)return ke.y7.setDirect("metaOpenCalendar",!0),replaceParamUrl(C);let R=spliceParamUrl(C),j="/hotels/".concat(k?"map":"list","?").concat(k?R.replace("isMeta=1",""):R);return(0,ui.op)(j)};const setSearchHistory=e=>{let _=JSON.parse(JSON.stringify(e));delete _.highPrice,delete _.lowPrice;let k=ke.Xb.get(V.Mb)||[];k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1?arguments[1]:void 0,k=!0,I=0;return e.length>0&&(k=e.every(((e,k)=>e.search.resultWord!==_.search.resultWord||(I=k,!1)))),k||e.splice(I,1),e.unshift(_),e}(k,_),k.length>3&&(k.length=3),ke.Xb.setDirect(V.Mb,k)};var hi=k(9676),fi=k(24986);const mi=function getCalendarRelDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{relindate:_=0,reloutdate:k=0,relatedate:I=0,checkIn:C,checkOut:R}=e;_=+_||0,k=+k||0,I=+I||0;let j=(new Date).toLocaleDateString();if(C=new Date(C),R=new Date(R),_&&k){let e=C;C=(0,Re.bU)(e,_).date,R=(0,Re.bU)(e,k).date}else I&&(R=(0,Re.bU)(R,I).date);if(C.getTime()>=R.getTime()){C=new Date(j);let e=new Date(j);e=(0,Re.bU)(e,1).date,R=e}return{checkIn:(0,hi._W)(C),checkOut:(0,hi._W)(R),nights:(0,Re.e3)(C,R)}};var gi=k(96025),vi=k(8326);var yi=k(39621).default,bi=k(67294);class V8HeaderBackground extends yi{constructor(e){super(e)}render(){return bi.createElement("div",{className:(0,q.XG)(this)?"V8-listbackground-b":"V8-listbackground",id:"V8-listbackground"})}}var _i=k(39621).default,wi=k(67294);class V8SearchBorderRadius extends _i{constructor(e){super(e)}render(){const{needFix:e,maskShow:_}=this.props;return wi.createElement("div",{className:j()("list-search-borderRadius",{"list-search-borderRadius-needFix":e,"list-search-borderRadius-maskShow":_}),id:"list-search-borderRadius"})}}var Ei=k(83634),Si=k(25291);function updateDestination(e){return{type:"BFF_DESTINATION_UPDATE",key:Si.mo,data:e}}function updateCalendar(e){return{type:Ei.pH,key:Si.XN,data:e}}function updateRoomGuest(e){return{type:Ei.DN,key:Si.In,data:e}}function updateKeyword(e){return{type:Ei.Wr,key:Si.rK,data:e}}function updateAllData(e){return{type:Ei.Mj,data:e}}function updateLowPrice(e){return{type:Ei.Ic,key:Si.wT,data:e}}function updateHighPrice(e){return{type:Ei.AE,key:Si.KA,data:e}}const Oi="CLEAR_PRICE_RANGE";var Ti=k(90339),ki=k(39621).default,Ii=k(35425).default,Ci=k(24367).default,Pi=k(67294);function Searchbox_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function Searchbox_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?Searchbox_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):Searchbox_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class SearchBoxV8 extends ki{constructor(e){var _;super(e),_=this,this.componentWillUnmount=()=>{(this.isListPage||this.isDetailPage)&&(window.removeEventListener("scroll",this.scrollFix),window.removeEventListener("resize",this.computedSearchBarHeight))},this.computedSearchBarHeight=(0,Ie.P2)((()=>{var e;const _=null===(e=this.searchRef.current)||void 0===e?void 0:e.offsetHeight,{searchResize:k}=this.props;k&&k(_),this.setState({searchBarHeight:_}),function v8HeaderResizeFix(){var e;const _=Ce.Z?null===(e=document)||void 0===e?void 0:e.getElementById("list-search-borderRadius"):null;_&&(_.style.top="",_.style.height="")}()}),10),this.getSearchBarHeight=()=>{var e;return this.state.searchBarHeight||(null===(e=this.searchRef.current)||void 0===e?void 0:e.offsetHeight)||0},this.getSearchBarFixed=()=>this.state.needFix,this.scrollFix=()=>{var e,_;const k=-document.body.getBoundingClientRect().top;let{needFix:I}=this.state,C=wo(this.searchBoxPlaceHolder.current).top;C>this.max&&(this.max=C),I=k>this.max,this.setState({needFix:I});const{fixToggle:R}=this.props;R&&R(I),this.calendarRef&&(null===(e=this.calendarRef.current)||void 0===e?void 0:e.isFocus())&&(null===(_=this.calendarRef.current)||void 0===_||_.scroll())},this.initAll=()=>{!this.props.isDetailSearch&&!this.props.isDetailSearch&&this.computedSearchBarHeight(),this.initDateByQuery(),this.initRoomGuest(),this.combineCookieData(),this.props.isDetailSearch&&this.initHotelName(),this.props.getHighQualitySeo&&this.props.getHighQualitySeo()&&(window.mainProcess=!0,this.updateSearchHotelList())},this.initHotelName=()=>{const{dispatch:e,updateSearchInputKeyword:_}=this.props;e(_((0,ci.Z)(H.default,"data.initData.base.hotelName")))},this.initDateByQuery=()=>{const{searchBarData:e}=this.props||{},{calendar:_}=e||{};if(_&&_.needSelectTime)return;let k=function getSearchBarCalendarOffsetData(){var e,_,k;let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=arguments.length>1?arguments[1]:void 0,R=(0,Ne.Z)("checkin",C)||"",j=(0,Ne.Z)("checkout",C)||"",B=(0,Ne.Z)("relindate",C)||0,U=(0,Ne.Z)("reloutdate",C)||0,V=(0,Ne.Z)("relatedate",C)||0;const G=null===(e=I[fi.mo])||void 0===e?void 0:e.timeOffset,q="F"===H.default.getByKey("initData.TimeOffsetValid");let z=null;return z=(0,Be.Lf)({checkIn:null===(_=I[fi.XN])||void 0===_?void 0:_.checkIn,checkOut:null===(k=I[fi.XN])||void 0===k?void 0:k.checkOut,timeOffset:!q&&G,maxNights:(0,Me.Z)(C)}),R&&j&&(B=U=0),mi({checkIn:z.checkInStr,checkOut:z.checkOutStr,relindate:B,reloutdate:U,relatedate:V})}(e),I=Object.assign({},e,{[V.XN]:k});const C="F"===H.default.getByKey("initData.TimeOffsetValid");this.patchAll(I,C)},this.combineCookieData=()=>{var e,_,k;const{search:I,calendar:C,roomGuest:R}=this.props.searchBarData;(0,J.fw)({checkIn:null==C?void 0:C.checkIn,checkOut:null==C?void 0:C.checkOut}),(0,J.ig)({resultType:I.resultType,countryId:null==I||null===(e=I.country)||void 0===e?void 0:e.geoCode,provinceId:null==I||null===(_=I.province)||void 0===_?void 0:_.geoCode,cityId:null==I||null===(k=I.city)||void 0===k?void 0:k.geoCode,keywords:null==I?void 0:I.resultWord,searchValue:comMultiSearchWord(I)}),(0,J.pR)({adults:null==R?void 0:R.adults,children:null==R?void 0:R.children,childAges:null==R?void 0:R.childAges,rooms:null==R?void 0:R.rooms})},this.initRoomGuest=()=>{var e;const{roomGuest:_}=this.props.searchBarData,{jpChildSearchPolicy:k=[],childSearchPolicy:I={}}=this.props;let C=(null==_?void 0:_.rooms)||1,R=(null==_?void 0:_.adults)||2,j=(null==_?void 0:_.children)||0,B=(null==_||null===(e=_.childAges)||void 0===e?void 0:e.join(","))||(0,li.a8)(Number((0,Ne.Z)("children"))||0,(0,Ne.Z)("ages")),H=(0,Ne.Z)("beds"),U=(0,Ne.Z)("meals"),V=(0,Ne.Z)("types"),G=parseInt(C),q=parseInt(R),z=parseInt(j),J=B?B.split(",").filter((e=>/\d+$/.test(e))):[],Q=H?H.split(","):[],ee=U?U.split(","):[],te=V?V.split(","):[];const re=this.isShowChildPolicy()||!1;if(G&&q&&q/G<=qo.ADULT_RATE){if(z/G>qo.CHILD_RATE){z=qo.CHILD_RATE,J.length=qo.CHILD_RATE,window.history.replaceState(null,"",replaceParamUrl({children:z,ages:J.join(",")}));let e=setInterval((()=>{this.props.pending||(Ii({content:this.$translatePlural("key.88801001.hotel.metapage.children.most.toast",qo.CHILD_RATE),animationTime:4,iconClass:"error-remind"}),this.$safeLog("logToastShow",1,this.$translatePlural("key.88801001.hotel.metapage.children.most.toast",qo.CHILD_RATE),ne.Oc.CHILDREN_MOST_88801001_KEY),clearInterval(e))}),1e3)}(re&&!(0,Pe.xb)(I)&&J.length>0&&0==Q.length&&0==ee.length||re&&!(0,Pe.xb)(I)&&J.length>0&&(Q.length!==J.length||ee.length!=J.length))&&J.forEach(((e,_)=>{e<=5||e>=12?(Q[_]=0,ee[_]=0):(Q[_]=1,ee[_]=1)})),!(0,Pe.xb)(I)&&re||!(0,Pe.xb)(k)||(Q=[],ee=[],te=[]);const e=function initCurGuestInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if((null==_?void 0:_.length)<1)return e;let{childAges:k=[],childBeds:I=[],childMeals:C=[],childTypes:R=[],rooms:j,adults:B,children:H}=e;return k.forEach(((e,k)=>{const j=_.filter((_=>e>=_.minAge&&e<=_.maxAge)).sort(((e,_)=>e.guestType<_.guestType?1:e.guestType>_.guestType?-1:0)).find((_=>e>=_.minAge&&e<=_.maxAge))||{},{guestType:B="",bed:H=0,meal:U=0}=j,V=B||"Adult";R[k]=V,"Adult"==V?(I[k]=0,C[k]=0):(I[k]=H,C[k]=U)})),{rooms:j,adults:B,children:H,childAges:k,childBeds:I,childMeals:C,childTypes:R}}({rooms:G,adults:q,children:z,childAges:J,childBeds:Q,childMeals:ee,childTypes:te},k);this.props.dispatch(this.props.updateRoomGuest(e)),(null==k?void 0:k.length)>0&&this.props.dispatch(this.props.updateChildSelectList({isFirst:!0,jpChildSearchPolicy:k,roomGuest:e}))}},this.actionFlow=e=>{switch(e){case V.mo:this.calendarRef.current.focus();break;case V.XN:this.roomguestRef.current.focus();break;default:return}},this.updateSearchHotelList=()=>{this.roomSearch()&&this.props.dispatch(this.props.updateSearchHotelList(!0))},this.destinationChange=function(e){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};window.mainProcess=!0,_.updateSearchHotelList(),_.changeOnDestinationOrKeyWord=!0,k()},this.keywordChange=function(e){var k;let I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};_.changeOnDestinationOrKeyWord=!0;const{dispatch:C,updateKeyword:R,updateSearchInputKeyword:j,updateDestination:B,searchBarData:H}=_.props;var U;(window.mainProcess=!0,_.updateSearchHotelList(),e=null===(k=e)||void 0===k?void 0:k.trim())||(C(R({})),(null==H||null===(U=H.search)||void 0===U?void 0:U.resultWord)&&(H.search.item={data:null},H.search.resultType="CT",H.search.resultWord="",C(B(H.search))));C(j(e)),I()},this.select=function(e,k){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{dispatch:C,updateDestination:R,updateKeyword:j,updateSearchInputKeyword:B,updateCalendar:H,updateRoomGuest:U,masterHotelId:G,initData:q={}}=_.props,{jpChildSearchPolicy:z=[]}=q,J={[V.mo]:e=>{let{resultType:k=""}=e||{};_.setState({changeDestination:!0}),k!=V.VS.HOTELFEATURE&&(C(R(e)),C(j({})),C(B("")),_.userActionStateChange(),_.updateSearchHotelList())},[V.XN]:e=>{const{calendar:k}=_.props.searchBarData||{},{needSelectTime:R,checkIn:j,checkOut:B}=k||{},{checkIn:U,checkOut:V}=e||{};C(H(Searchbox_objectSpread(Searchbox_objectSpread({},e),{},{needSelectTime:R}))),U&&V&&(!I&&_.userActionStateChange(),_.setState({oldCheckIn:U,oldCheckOut:V})),_.$safeLog("logCheckInAndOutDateChange",{checkIn:U,checkOut:V,oldCheckIn:j,oldCheckOut:B},G)},[V.In]:e=>{C(U(e)),_.userActionStateChange(),(null==z?void 0:z.length)>0&&C(_.props.updateChildSelectList({jpChildSearchPolicy:z,roomGuest:e}))},[V.rK]:e=>{C(j(e)),C(B(e.isDirectSearch?null:e.resultWord))}};Array.isArray(e)?e.forEach(((e,_)=>{J["".concat(e)](k[_])})):J["".concat(e)](k);const Q=ke.y7.get("price_type");Q&&1===Q&&e===V.In&&(C(updateHighPrice(-1)),C(updateLowPrice(0)),_.$event.emit(Oi))},this.initStarAndPriceRange=()=>{let e=(0,Ne.Z)("highPrice")||"";return e=-1!==e.indexOf("+")?-1:e,{star:(0,Ne.Z)("starlist").split(",").filter((e=>e)),highPrice:e,lowPrice:(0,Ne.Z)("lowPrice"),showtotalamt:go.Z.get("IBU_showtotalamt")}},this.setSearchHistoryInStorege=e=>{if(!(null==e?void 0:e.newContent))return;let _=(0,J.IS)(e),k=(0,J.Te)(e);ke.Xb.set("DestinationValueStorage",Object.assign({},{resultWord:_,resultWordVersionB:k,locale:H.default.getByKey("cargo.locale")}))},this.historySelect=e=>{if(ke.Xb.remove("DestinationValueStorage"),this.setSearchHistoryInStorege((null==e?void 0:e.search)||{}),function logSearchHisClick(){var e,_,k,I,C,R,j,B,U,V,G,q,z;let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Le.NW)("htl_ol_wcl_his_card_click",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),channeltype:"online",adultnum:null==J||null===(e=J.roomGuest)||void 0===e?void 0:e.adults,roomnum:null==J||null===(_=J.roomGuest)||void 0===_?void 0:_.rooms,childnum:(null==J||null===(k=J.roomGuest)||void 0===k?void 0:k.children)||0,searchDateList:[{checkin:null==J||null===(I=J.calendar)||void 0===I?void 0:I.checkIn,checkout:null==J||null===(C=J.calendar)||void 0===C?void 0:C.checkOut}],regionid:(null==J||null===(R=J.search)||void 0===R||null===(j=R.city)||void 0===j?void 0:j.geoCode)||(null==J||null===(B=J.search)||void 0===B||null===(U=B.province)||void 0===U?void 0:U.geoCode)||(null==J||null===(V=J.search)||void 0===V||null===(G=V.country)||void 0===G?void 0:G.geoCode)||0,regionname:null==J||null===(q=J.search)||void 0===q?void 0:q.resultWord,regiontype:null==J||null===(z=J.search)||void 0===z?void 0:z.resultType})}(e),this.patchAll(e),this.updateSearchHotelList(),this.changeOnDestinationOrKeyWord=!0,this.userActionStateChange(),this.setState({changeDestination:!0}),e&&e.search){const _=(0,J.ak)(e.search);new Promise((_=>{var k;const I=null===(k=this.destinationRef)||void 0===k?void 0:k.current;var C;I?I.setState({inputValue:(0,J.Qn)(null==e?void 0:e.search),versionBValue:(0,J.Hs)(null==e?void 0:e.search),resultMultiFilterText:(0,J.zZ)(null==e||null===(C=e.search)||void 0===C?void 0:C.displayTags)},_):_()})),new Promise((e=>{var k;const I=null===(k=this.keywordRef)||void 0===k?void 0:k.current;I?I.setState({inputValue:_},e):e()}))}},this.destinationSelect=e=>{var _;this.changeOnDestinationOrKeyWord=!0,this.select(V.mo,e);const k=null===(_=this.keywordRef)||void 0===_?void 0:_.current,I=(0,J.ak)(e);k&&k.setState({inputValue:I}),this.setSearchHistoryInStorege(e)},this.keywordSelect=function(e,k){let I=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{renderFilters:C}=_.props;_.changeOnDestinationOrKeyWord=!0;let R=(0,J.hZ)(C,["10","18","41","50","139"]);if(_.select(e,k,!0),I){let{resultType:e="",item:I={},resultWord:C=""}=k||{};const{searchBarData:B}=_.props;_.setState({serachLoading:!0});let H=Object.assign({},B,{search:e!=V.VS.HOTELFEATURE?k:Searchbox_objectSpread(Searchbox_objectSpread({},B.search),{},{resultType:e,resultWord:C,item:I})},_.initStarAndPriceRange());const{search:U,calendar:G,roomGuest:q}=H;if(H.filters=R,setSearchHistory(H),e!=V.VS.HOTELFEATURE){var j;const e=(0,J.IS)(k),I=null===(j=_.destinationRef)||void 0===j?void 0:j.current;I&&I.setState({inputValue:e})}_.$safeLog("log".concat(_.logKeyPrefix,"HotelSearch"),U,G,q,_.props),window.location.href=linkSearch({param:H,isMap:_.props.isMap})}},this.roomSearch=()=>{var e,_;return!(null===(e=this.props)||void 0===e||null===(_=e.initData)||void 0===_?void 0:_.updateHotelList)&&this.props.updateRoomListBySearchBar},this.openMetaPage=()=>{const{searchBarData:e}=this.props,{calendar:_,roomGuest:k}=e;let I={checkin:_.checkIn.replace(/\//gi,"-"),checkout:_.checkOut.replace(/\//gi,"-"),adult:k.adults,children:k.children,ages:k.childAges.join(",")};(0,li.vL)(window.location.href).pathHotel&&(I.hotelid=(0,li.vL)(window.location.href).pathHotel);let C=replaceParamUrl(I);window.open("/hotels/list/searchresults?".concat(C.split("?")[1]))},this.search=()=>{var e,_,k;const{renderFilters:I,isSwitchNewFilter:C,dispatch:R,selectedFilterList:j}=this.props;(0,Ti.gW)(),(0,Ti.gS)(),(0,Le.ap)("htl_t_online_list_search_click",{triggerTime:+new Date,page:this.isDetailPage?"10320668147":"10320668148"});const{calendar:B={},search:U={},roomGuest:V={}}=(null===(e=this.props)||void 0===e?void 0:e.searchBarData)||{},{checkIn:G="",checkOut:q=""}=B||{},{resultType:z,city:Q,country:ee,province:te,resultWord:ne}=U,{adults:re,children:oe,childAges:ie,rooms:ae}=V;if(Ao&&oe!==(null==ie?void 0:ie.filter((e=>e!==jo)).length)){var le,se;const e=null===(le=this.roomguestRef)||void 0===le?void 0:le.current;return(null==e||null===(se=e.state)||void 0===se?void 0:se.visible)||(e.showPanel(),this.searchMaskShow()),e.setAgesLessthanZero(),void(0,Le.ap)("htl_t_online_list_search_click",{triggerTime:+new Date,page:"10320668148",isChildNumError:"childNumError"})}let ce=C?j:(0,J.hZ)(I),ue=this.roomSearch();if(this.searchMaskHide(!0),ue&&3!=H.default.getByKey("seoType")&&(0,gi.tB)("detail-room-list"),this.props.isDetailSearch&&this.$safeLog("logClickDetailSearhButton"),(0,J.fw)({checkIn:G,checkOut:q}),(0,J.ig)({resultType:z,countryId:null==ee?void 0:ee.geoCode,provinceId:null==te?void 0:te.geoCode,cityId:null==Q?void 0:Q.geoCode,keywords:ne,searchValue:comMultiSearchWord(U)}),(0,J.pR)({adults:re,children:oe,childAges:ie,rooms:ae}),ue)return void this.setState({serachLoading:!0,afterUserAction:!1},(()=>{this.props.updateRoomListBySearchBar()}));if(!this.destinationRef.current.validate())return;const de=this.destinationRef.current;de.state.assoVisible&&de.hidePanel();const pe=null===(_=this.keywordRef)||void 0===_?void 0:_.current;var he;((null==pe||null===(k=pe.state)||void 0===k?void 0:k.visible)&&pe.hidePanel(),this.state.changeDestination)&&(R(updateHighPrice(-1)),R(updateLowPrice(0)),ce=null===(he=ce)||void 0===he?void 0:he.filter((e=>"15|Range"!==(null==e?void 0:e.filterId))));let fe=this.props.getHighQualitySeo&&"highQuality"===this.props.getHighQualitySeo();!function logSearchBtnClick(){var e,_,k,I,C,R,j,B,U,V,G,q,z,J,Q,ee,te,ne,re,oe;let ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{searchBarData:ae,actionType:le}=ie;(0,Le.NW)("htl_ol_wcl_search_searchBt_click",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),channeltype:"online",adultnum:null==ae||null===(e=ae.roomGuest)||void 0===e?void 0:e.adults,roomnum:null==ae||null===(_=ae.roomGuest)||void 0===_?void 0:_.rooms,childnum:(null==ae||null===(k=ae.roomGuest)||void 0===k?void 0:k.children)||0,searchDateList:[{checkin:null==ae||null===(I=ae.calendar)||void 0===I?void 0:I.checkIn,checkout:null==ae||null===(C=ae.calendar)||void 0===C?void 0:C.checkOut}],regionid:(null==ae||null===(R=ae.search)||void 0===R||null===(j=R.city)||void 0===j?void 0:j.geoCode)||(null==ae||null===(B=ae.search)||void 0===B||null===(U=B.province)||void 0===U?void 0:U.geoCode)||(null==ae||null===(V=ae.search)||void 0===V||null===(G=V.country)||void 0===G?void 0:G.geoCode)||0,regionname:(null==ae||null===(q=ae.search)||void 0===q||null===(z=q.city)||void 0===z?void 0:z.currentLocaleName)||(null==ae||null===(J=ae.search)||void 0===J||null===(Q=J.Province)||void 0===Q?void 0:Q.currentLocaleName)||(null==ae||null===(ee=ae.search)||void 0===ee||null===(te=ee.country)||void 0===te?void 0:te.currentLocaleName)||(null==ae||null===(ne=ae.search)||void 0===ne?void 0:ne.resultWord),regiontype:(null==ae||null===(re=ae.search)||void 0===re?void 0:re.resultType)||null,keyword:(null==ae||null===(oe=ae.search)||void 0===oe?void 0:oe.resultWord)||"",buttontype:le?"update":"search"})}({searchBarData:this.props.searchBarData,actionType:this.state.afterUserAction}),this.setState({serachLoading:!fe,afterUserAction:!1,changeDestination:!1},(()=>{const{searchBarData:e,searchInputKeyword:_}=this.props,{search:k,calendar:I,roomGuest:C}=e;let R=this.props.getHighQualitySeo&&this.props.getHighQualitySeo();setSearchHistory(e);const j=function getKeywordDirectSearch(e,_){let k=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==_?void 0:_.trim())if(null==e?void 0:e.search){var I,C;e.search.item=k?{data:{filterId:"31|"+(null==e||null===(I=e.search)||void 0===I?void 0:I.code),type:"31",value:""+(null==e||null===(C=e.search)||void 0===C?void 0:C.code),subType:"1"}}:{data:{filterId:"30|"+_,type:"30",value:""+_,subType:"1"}},e.search.resultType="H",e.search.resultWord=_}else{var R,j,B,H;e.search.item={data:{filterId:"19|"+(null==e||null===(R=e.search)||void 0===R?void 0:R.code),type:"19",value:""+(null==e||null===(j=e.search)||void 0===j?void 0:j.code),subType:"1"}},e.search.resultType="CT",e.search.resultWord=(null==e||null===(B=e.search)||void 0===B||null===(H=B.city)||void 0===H?void 0:H.currentLocaleName)||""}return e}(e,_,R);this.$safeLog("log".concat(this.logKeyPrefix,"HotelSearch"),k,I,C,this.props,ue),j.filters=ce;let B=linkSearch({param:j,isMap:this.props.isMap,isShowChildPolicy:this.isShowChildPolicy()});fe?window.open(B):window.location.href=B,(e=>{var _,k;const{search:I={},calendar:C={},roomGuest:R={},travel:j,star:B,keyword:H}=e||{};"undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push&&dataLayer.push({event:"search_destination",search_term:(null==I?void 0:I.displayName)||"",number_of_nights:(null==C?void 0:C.nights)||"",number_of_rooms:(null==R?void 0:R.rooms)||"",end_date:(null==C||null===(_=C.checkOut)||void 0===_?void 0:_.replace(/\//g,"-"))||"",start_date:(null==C||null===(k=C.checkIn)||void 0===k?void 0:k.replace(/\//g,"-"))||"",number_of_adults:(null==R?void 0:R.adults)||"",number_of_children:(null==R?void 0:R.children)||"",travel_purpose:j?"work":"non-work",star_rating:(B||[]).join(","),search_keyword:(null==H?void 0:H.word)||""})})(e)}))},this.resetTimeOffset=e=>{const{updateCalendar:_,dispatch:k,searchBarData:I={}}=this.props,{calendar:C}=I,{checkIn:R,checkOut:j}=C||{},{checkInStr:B,checkOutStr:H,nights:U}=(0,Be.Lf)({checkIn:R,checkOut:j,timeOffset:e,maxNights:(0,Me.Z)()});k(_({checkIn:B,checkOut:H,nights:U}))},this.isShowChildPolicy=()=>{var e,_,k;const{searchBarData:I={},countryId:C=0,childSearchPolicy:R={}}=this.props;let j=!1,B=!1,U=!1;const{search:V={}}=I,G=(null==V||null===(e=V.country)||void 0===e?void 0:e.geoCode)||C;return(null==R?void 0:R.matchLocale)&&G&&(null==R?void 0:R.matchLocale.toString().indexOf(null===(_=H.default.getByKey("cargo"))||void 0===_?void 0:_.locale))>-1&&(null==R?void 0:R.matchCountry.toString().indexOf(G))>-1&&(j=!0),(null==R?void 0:R.limitLocale)&&G&&-1==(null==R?void 0:R.limitLocale.toString().indexOf(null===(k=H.default.getByKey("cargo"))||void 0===k?void 0:k.locale))&&(null==R?void 0:R.matchCountry.toString().indexOf(G))>-1&&(B=!0),U=j&&!B||!j&&B,U},this.hideOtherPanel=e=>{var _,k,I,C;"Destination"!=e&&(null===(_=this.destinationRef.current)||void 0===_||_.hidePanel());"Calendar"!=e&&(null===(k=this.calendarRef.current)||void 0===k||k.hide());"RoomGuest"!=e&&(null===(I=this.roomguestRef.current)||void 0===I||I.hidePanel());"Keyword"!=e&&(null===(C=this.keywordRef.current)||void 0===C||C.hidePanel())},this.searchMaskShow=()=>{if(!this.state.maskShow){this.setState({maskShow:!0,isSearchTipBubbleVisible:!1});const e=this.head||document.getElementById("ibu_hotel_header"),_=this.searchRef.current,k=document.querySelector(".smart-drawer_mask");e&&(this.head=e,e.style.zIndex=10002),_&&(_.style.zIndex=10001,0===document.body.getBoundingClientRect().top&&k&&(document.body.style.position="",window.scrollTo(0,wo(_).top))),Ci.show({maskClosable:!0,hide:this.searchMaskHide,style:_?{marginTop:parseInt(wo(_).top+document.body.getBoundingClientRect().top+_.clientHeight/2)+"px"}:""})}},this.userActionStateChange=()=>{this.setState({afterUserAction:!0})},this.searchMaskHide=e=>{if(this.state.maskShow){this.setState({maskShow:!1}),this.state.afterUserAction&&(this.$safeLog("logSearchTipBubbleVisible",{text:this.searchTipBubbleText}),this.setState({isSearchTipBubbleVisible:!0}));const R=this.head||document.getElementById("ibu_hotel_header"),j=this.searchRef.current;var _,k,I,C;if(R&&(this.head=R,R.style.zIndex=""),j&&(j.style.zIndex=""),!e)if(!(null===(_=this.props.searchBarData)||void 0===_||null===(k=_.calendar)||void 0===k?void 0:k.checkIn)||!(null===(I=this.props.searchBarData)||void 0===I||null===(C=I.calendar)||void 0===C?void 0:C.checkOut)){const{oldCheckIn:e,oldCheckOut:_}=this.state,k=(0,Re.e3)(e,_)||0;this.select("calendar",{checkIn:e,checkOut:_,nights:k},!0)}Ci.hide()}},this.patchAll=(e,_)=>{var k;const{updateAllData:I,updateSearchInputKeyword:C,dispatch:R,showCalendarAfterAsync:j}=this.props,{checkIn:B,checkOut:H,timeOffset:U,needSelectTime:G}=null==e?void 0:e[V.XN],q=U||(null==e||null===(k=e.search)||void 0===k?void 0:k.timeOffset)||0;if(G)return;const z=(0,J.EV)(),{checkInStr:Q,checkOutStr:ee,nights:te}=(0,Be.Lf)({checkIn:B,checkOut:H,timeOffset:!_&&q,maxNights:(0,Me.Z)()});if(this.showCalendarDateTip=(0,li.xC)(Q,ee,_,q),j&&(this.showCalendarDateTip=!1),this.showCalendarDateTip){const e={manualcheckin:Q,manualcheckout:ee,systemcheckin:null==z?void 0:z.checkIn,systemcheckout:null==z?void 0:z.checkOut};this.$safeLog("logSystemChangeCal",e)}R(I(Object.assign({},e,{calendar:{checkIn:Q,checkOut:ee,nights:te}}))),R(C(""))},this.lowQualitySearch=()=>{const e=this.props.searchInputKeyword,_=this.props.searchBarData[V.mo],k=this.props.countryId,I=this.props.masterHotelId;this.select(V.rK,{word:e,displayName:e,id:I,cityId:null==_?void 0:_.id,_cityId:null==_?void 0:_.id,type:V.VS.Hotel,isDirectSearch:!1,countryId:k,resultWord:e},!1)},this.onClick=()=>{const{searchBarData:e}=this.props,_=e[V.mo]?e[V.mo].timeOffset:e[V.rK].timeOffset,k=(0,Re.SQ)(_).dateStr;ke.Xb.set("showDateBoxBlink",k)},this.bubbleClose=()=>{this.$safeLog("logSearchTipBubbleClose",{text:this.searchTipBubbleText}),this.setState({isSearchTipBubbleVisible:!1}),(0,q.XG)(this)&&this.closeBubbleStorage()},this.checkBubbleDisplay=()=>{if(!(0,q.XG)(this))return void this.showBubble();const e=ke.Xb.get("bubbleClosedTime");if(e){(new Date).getTime()-e>6048e5&&this.showBubble()}else this.showBubble()},this.showBubble=()=>{this.setState({bubbleCanShow:!0})},this.closeBubbleStorage=()=>{const e=(new Date).getTime();ke.Xb.set("bubbleClosedTime",e),this.setState({bubbleCanShow:!1})},this.getDestination=()=>{var e,_,k,I,C,R,j,B,U;const{searchBarData:V,renderFilters:G}=null!==(e=this.props)&&void 0!==e?e:{},q=ke.Xb.get("DestinationValueStorage")||{};let z=(0,J.Qn)(V.search)||(0,J.IS)((0,si.UK)(this.props,"searchBarData.search"))||"",Q=(0,J.Hs)(V.search)||((null==q?void 0:q.locale)===H.default.getByKey("cargo.locale")&&z===(null==q?void 0:q.resultWord)?null==q?void 0:q.resultWordVersionB:(0,J.Te)((0,si.UK)(this.props,"searchBarData.search"))||"");const ee=(null==V||null===(_=V.search)||void 0===_||null===(k=_.city)||void 0===k?void 0:k.geoCode)||(null==V||null===(I=V.search)||void 0===I||null===(C=I.province)||void 0===C?void 0:C.geoCode)||(null==V||null===(R=V.search)||void 0===R||null===(j=R.country)||void 0===j?void 0:j.geoCode)||0;var te,ne,re,oe,ie,ae;(0,Pe.xb)(null==G?void 0:G.filterProperty)||(z=(null==V||null===(te=V.search)||void 0===te||null===(ne=te.city)||void 0===ne?void 0:ne.currentLocaleName)||(null==V||null===(re=V.search)||void 0===re||null===(oe=re.Province)||void 0===oe?void 0:oe.currentLocaleName)||(null==V||null===(ie=V.search)||void 0===ie||null===(ae=ie.country)||void 0===ae?void 0:ae.currentLocaleName)||z);return{destinationValue:z,destinationId:ee,versionBValue:Q,triggerFromSearchPropertyShowChangeTip:null==V||null===(B=V.search)||void 0===B?void 0:B.triggerFromSearchPropertyShowChangeTip,resultMultiFilterText:(0,J.zZ)(null==V||null===(U=V.search)||void 0===U?void 0:U.displayTags)}},this.$saveInstance(),this.ubtMapping=Searchbox_objectSpread(Searchbox_objectSpread({},this.props.ubtMapping),{},{logToastShow:U.cQ,logSearchLineShow:U.Ad,logClickDetailSearhButton:U.jG,logSystemChangeCal:U.S1,logSearchTipBubbleVisible:U.tl,logSearchTipBubbleClose:U.RR});const k=H.default.getByKey("pageName");this.isListPage="listPage"===k||"metaPage"===k||"listNewPage"===k||"metaNewPage"===k,this.isDetailPage="detailPage"===k,this.isSeoAid=(e=>{const _=(0,Ne.Z)("from_page",e);return!(0,Ne.Z)("checkIn",e)&&!(0,Ne.Z)("checkOut",e)&&"orderlist"!==_})(this.ctx),this.state={serachLoading:!1,searchBarHeight:0,maskShow:!1,afterUserAction:!1,changeDestination:!1,isSearchTipBubbleVisible:!1,oldCheckIn:this.props.searchBarData[V.XN].checkIn,oldCheckOut:this.props.searchBarData[V.XN].checkOut,bubbleCanShow:!1,hideRoomGuest:!0},this.logKeyPrefix=(0,Le.h8)(),this.searchRef=Pi.createRef(),this.destinationRef=Pi.createRef(),this.calendarRef=Pi.createRef(),this.roomguestRef=Pi.createRef(),this.keywordRef=Pi.createRef(),this.searchBoxPlaceHolder=Pi.createRef(),this.max=0,this.head=null,this.changeOnDestinationOrKeyWord=!1,this.showCalendarDateTip=!1,this.searchTipBubbleText=this.$translate("key.88801001.hotelsearch.change")}afterAsync(){}componentDidMount(){var e;this.initAll(),(this.isListPage||this.isDetailPage)&&(window.addEventListener("scroll",this.scrollFix),window.addEventListener("resize",this.computedSearchBarHeight));const _=(null===(e=this.searchRef.current)||void 0===e?void 0:e.clientHeight)>88?2:1;this.$safeLog("logSearchLineShow",_),this.checkBubbleDisplay()}componentDidUpdate(e){var _,k,I,C;if((null==e?void 0:e.roomListStatus)!==(null===(_=this.props)||void 0===_?void 0:_.roomListStatus)){var R;const e=vi.Xy.LOADING===(null===(R=this.props)||void 0===R?void 0:R.roomListStatus);this.setState({serachLoading:e})}1===e.roomListLoading&&0===this.props.roomListLoading&&this.setState({serachLoading:!1}),(null==e||null===(k=e.initData)||void 0===k?void 0:k.naviFixed)!==(null===(I=this.props)||void 0===I||null===(C=I.initData)||void 0===C?void 0:C.naviFixed)&&this.calendarRef&&this.calendarRef.current.scroll(),this.props.isDetailSearch&&(null==e?void 0:e.searchInputKeyword)!==this.props.searchInputKeyword&&this.props.getHighQualitySeo&&this.props.getHighQualitySeo()&&this.lowQualitySearch()}render(){var e,_,k,I,C;const{needFix:R,serachLoading:U,maskShow:G,afterUserAction:z,isSearchTipBubbleVisible:J,bubbleCanShow:Q,hideRoomGuest:ee}=this.state,{searchBarData:te,isMap:ne,initData:re,fixedSimpleStyle:oe,shortSearch:ie,showCalendarAfterAsync:ae,needLowPrice:le,forwardRef:se,countryId:ce,childSearchPolicy:ue,useListBtn:de=!1,getCalendarPrice:pe=[],rateplanRequestParam:he}=this.props,fe=this.isShowChildPolicy()||!1,{jpChildSearchPolicy:me=[]}=re||{},ge=re||{},{destinationValue:ve,destinationId:ye,versionBValue:be,triggerFromSearchPropertyShowChangeTip:_e,resultMultiFilterText:we}=this.getDestination(),Ee=JSON.stringify({ubtKey:"htl_ol_wcl_search_exposure",data:{channeltype:"online",page:H.default.getByKey("pageId"),locale:H.default.getByKey("cargo.locale"),adultnum:null==te||null===(e=te.roomGuest)||void 0===e?void 0:e.adults,roomnum:null==te||null===(_=te.roomGuest)||void 0===_?void 0:_.rooms,childnum:null==te||null===(k=te.roomGuest)||void 0===k?void 0:k.children,searchDateList:[{checkin:null==te||null===(I=te.calendar)||void 0===I?void 0:I.checkIn,checkout:null==te||null===(C=te.calendar)||void 0===C?void 0:C.checkOut}],regionid:ye,regionname:ve}}),Se=(0,q.XG)(this);return Pi.createElement(Pi.Fragment,null,Pi.createElement("div",{ref:this.searchBoxPlaceHolder}),!ne&&Pi.createElement(V8HeaderBackground,null),Pi.createElement("div",{className:j()("searchBox-v8",{isMap:ne,"searchBox-v8-version-b":Se}),ref:se?this.searchRef=se:this.searchRef,"data-exposure":Ee},ne?Pi.createElement("div",{className:"logo-item"},Pi.createElement("a",{className:"logo",href:"/hotels/home"})):Pi.createElement(V8SearchBorderRadius,{needFix:R,maskShow:G}),Pi.createElement("div",{id:"hotel_searchBox",className:j()("list-search-container","list-search-container-dark","searchBarVersionB",{isMap:ne,"simple-search":R&&oe,"short-search":ie,listpage:this.isListPage,detailpage:this.isDetailPage,"list-search-container-versionb":Se,"simple-search-version-b":Se,"short-search-version-b":Se})},Pi.createElement("ul",{className:j()("ul",{isMap:ne,"ul-version-b":Se}),onClick:this.onClick},Pi.createElement("li",{className:j()("list-item list-destination",{"list-item-versionb":Se,"list-destination-version-b":Se})},Pi.createElement(DestinationV8,{destinationId:ye,value:ve,versionBValue:be,triggerFromSearchPropertyShowChangeTip:_e,onChange:this.destinationChange,ref:this.destinationRef,select:e=>this.destinationSelect(e),next:()=>this.actionFlow(V.mo),historySelect:this.historySelect,resetTimeOffset:this.resetTimeOffset,calendarRef:this.calendarRef,roomguestRef:this.roomguestRef,keywordRef:this.keywordRef,resultMultiFilterText:we}),Se?Pi.createElement("div",{class:"divider"}):null),Pi.createElement("li",{className:j()("list-item list-calendar",{"list-item-versionb":Se,"version-b":Se})},Pi.createElement(CalendarV8,{ref:this.calendarRef,searchRef:this.searchRef,select:e=>this.select(V.XN,e),next:()=>this.actionFlow(V.XN),noValid:te[V.XN].needSelectTime,checkIn:te[V.XN].checkIn,checkOut:te[V.XN].checkOut,nights:te[V.XN].nights,rateplanRequestParam:he,destinationId:ye,destinationValue:ve,getCalendarPrice:pe,timeOffset:te[V.mo]?te[V.mo].timeOffset:te[V.rK].timeOffset,position:R||ge?"fixed":"absolute",showAfterAsync:ae,needLowPrice:le,clickCallBack:()=>this.onClick(),changeOnDestinationOrKeyWord:this.changeOnDestinationOrKeyWord,showCalendarDateTip:this.showCalendarDateTip}),Se?Pi.createElement("div",{class:"divider"}):null),Pi.createElement("li",{className:j()("list-item list-roomguest",{"list-item-versionb":Se,"version-b":Se})},Pi.createElement(RoomGuestV8,{rooms:te[V.In].rooms,adults:te[V.In].adults,childs:te[V.In].children,childAges:te[V.In].childAges,countryId:ce,childBeds:te[V.In].childBeds,childMeals:te[V.In].childMeals,childTypes:te[V.In].childTypes,jpChildSearchPolicy:me,btnClickSearch:this.search,select:e=>this.select(V.In,e),ref:this.roomguestRef,afterUserAction:z,clickCallBack:()=>this.onClick(),clickDone:e=>{Se&&this.setState({hideRoomGuest:e})},childSearchPolicy:ue,isShowChildPolicy:fe,needFix:this.state.needFix})),Pi.createElement("li",{className:j()("list-item list-btn",{"list-btn-version-b":Se}),onClick:this.search},G&&z&&!Se&&Pi.createElement("div",{className:j()("list-btn-animation","isAnimation")}),this.isListPage&&J&&!U&&Q&&Pi.createElement("div",{className:"".concat(Se?"list-btn-bubble-b":"list-btn-bubble"," ").concat(R&&Se?"list-btn-bubble-b-needfix":""," "),onClick:e=>{e.stopPropagation()}},Pi.createElement("div",{className:"list-bubble-txt"},this.searchTipBubbleText),Pi.createElement(B.Z,{type:"ic_new_close_line",className:"list-btn-bubble-close",onClick:e=>{e.stopPropagation(),this.bubbleClose()}})),Pi.createElement(detailButton,{simpleSearch:R&&oe,isAnimation:G&&z,isSearchConditionChanged:z,hideRoomGuest:ee,isMaskShow:G,loading:U,roomSearch:!de&&this.roomSearch(),ctx:this.ctx,isSearchBoxVersionB:Se}))))))}}SearchBoxV8.defaultProps={searchBarData:V.ZV};const Li=Pi.forwardRef(((e,_)=>Pi.createElement(SearchBoxV8,(0,C.Z)({forwardRef:_},e))));var Ni=k(68661),Di=k(54482),Ai=k(64512);function updateSearchInputKeyword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:Ai.A,data:e}}var Ri,xi=k(39621).default,ji=k(67294);const Bi=(0,Ni.$j)((e=>{const{searchBarData:_,searchCondition:k,searchInputKeyword:I,filterCondition:C,ajaxLoad:R,initData:j,filters:B,renderFilters:H}=e,{jpChildSearchPolicy:U=[],childSearchPolicy:V={},isSwitchNewFilter:G=!1}=j;return{ajaxLoad:R,searchBarData:_,searchCondition:k,filterCondition:C,searchInputKeyword:I,childSearchPolicy:V,jpChildSearchPolicy:U,filters:B,renderFilters:H,isSwitchNewFilter:G}}))(Ri=(0,Di.zy)((e=>{let{selectedFilterList:_,getChangedSelected:k}=e;return{selectedFilterList:_,getChangedSelected:k}}))(Ri=class ListSearch extends xi{constructor(e){super(e),this.ubtMapping={loglistpageHotelSearch:U.aA,logCheckInAndOutDateChange:U.CJ,logmetapageHotelSearch:U.kH}}render(){var e,_;const k={updateDestination:updateDestination,updateCalendar:updateCalendar,updateRoomGuest:updateRoomGuest,updateKeyword:updateKeyword,updateAllData:updateAllData,updateSearchInputKeyword:updateSearchInputKeyword,ubtMapping:this.ubtMapping,countryId:this.props.searchCondition.countryId||0,fixedSimpleStyle:!0,shortSearch:!0,showCalendarAfterAsync:null===(e=this.props.searchBarData)||void 0===e||null===(_=e.calendar)||void 0===_?void 0:_.needSelectTime,pending:this.props.ajaxLoad.pending};return ji.createElement(Li,(0,C.Z)({},this.props,k))}})||Ri)||Ri;var Mi=k(39621).default,Fi=k(67294);class soldOutCard_view_View extends Mi{render(){return this.props.bookableVisible?Fi.createElement("div",{className:"date-wrap"},Fi.createElement("div",{className:"date-wrap_left"},Fi.createElement(B.Z,{type:"ic_new_calendar_line",className:"calendar"}),Fi.createElement("div",{className:"dec"},Fi.createElement("h3",null,this.$translate("key.hotel.list.page.wanted.hotels.description")),Fi.createElement("p",null,this.$translate("key.hotel.list.page.bookable.hotels.description")))),Fi.createElement("button",{onClick:this.onClick},this.$translate("key.hotel.list.page.bookable.button"))):null}}var Hi=k(30018);const updateBookableVisible=e=>({type:Hi.C,payload:e});var Ki=k(76605),Ui=k(3479);const removeViewBookOnly=e=>_=>{let k=(0,Ui.Z)(e,"list",[]).map((e=>(1===e.value&&(e.status=1),e)));_((0,Ki.W9)({bookable:Object.assign({},e,{list:k})})),_(updateBookableVisible(!1))};var Zi,Vi;let Wi=(0,Ni.$j)((e=>({bookable:e.filterCondition.bookable,bookableVisible:e.bookableVisible})))(((Vi=class SoldOutCard extends soldOutCard_view_View{constructor(e){super(e),this.onClick=()=>{this.props.dispatch(removeViewBookOnly(this.props.bookable))},this.state={}}}).defaultProps={data:{},bookableVisible:!0},Vi.propTypes={data:_e().object,bookableVisible:_e().bool},Zi=Vi))||Zi;var Gi=k(39621).default,$i=k(67294);class ColorIcon extends Gi{constructor(e){super(e)}render(){let{type:e,className:_,style:k}=this.props;const I={ic_pointplus:["path1","path2"],ic_new_trip_coins:["path1","path2","path3"],ic_price_assurance:["path1","path2","path3","path4"]}[e]||[];return I.length?$i.createElement("i",{className:"smartcoloricon ".concat(_," ").concat("color-icon-"+e),style:k},I.map(((e,_)=>$i.createElement("i",{key:_,className:e})))):null}}var qi=k(27562),zi=k(39621).default,Yi=k(67294);class encourageCard_view_View extends zi{constructor(e){super(e),this.renderBar=()=>{const{leftRotate:e,rightRotate:_,leftDuration:k}=this.state;let I={transition:"all ".concat(k,"s linear"),transform:"rotate(".concat(e,"deg)")},C={transform:"rotate(".concat(_,"deg)")};const{encourage:{type:R,description:j,percent:H},bookableVisible:U}=this.props,{visible:V}=this.state;let G={1:()=>Yi.createElement("div",{className:"booking-wrap",ref:this.areaRef},Yi.createElement("div",{className:"pie"},Yi.createElement("div",{className:"rate"},Yi.createElement("div",{className:"percent-left"},Yi.createElement("div",{className:"real",style:I})),Yi.createElement("div",{className:"percent-right"},Yi.createElement("div",{className:"real",style:C})))),Yi.createElement("p",{className:"title"},Yi.createElement("span",{className:"booked"},j),H>50&&U?Yi.createElement("span",{className:"bookable",onClick:this.bookable},this.$translate("view_bookable_only")):null),Yi.createElement(B.Z,{type:"close",className:"close",onClick:()=>this.close("bookout")})),2:()=>Yi.createElement("div",{className:"booking-wrap",ref:this.airhotelRef},Yi.createElement(B.Z,{type:"ic_new_bu_flight",className:"cross-bu"}),Yi.createElement("p",{className:"title"},Yi.createElement("span",{className:"booked"},j)),Yi.createElement(B.Z,{type:"close",className:"close",onClick:()=>this.close("flight")})),3:()=>Yi.createElement("div",{className:"booking-wrap"},Yi.createElement(B.Z,{type:"ic_new_bu_train",className:"cross-bu"}),Yi.createElement("p",{className:"title"},Yi.createElement("span",{className:"booked"},j)),Yi.createElement(B.Z,{type:"close",className:"close",onClick:this.close})),5:()=>Yi.createElement("div",{className:"booking-wrap easy-cancel",ref:this.easyCancleRef},Yi.createElement(B.Z,{type:"ic_new_guarantee",className:"cancel-icon"}),Yi.createElement(qi.uB,{parentlabel:"div",txt:j,className:"title",childlabel:"span"}),Yi.createElement(B.Z,{type:"close",className:"close",onClick:()=>this.close("cancellation_guarantee")})),4:()=>Yi.createElement("div",{className:"booking-wrap",ref:this.tripcoinsRef},Yi.createElement(ColorIcon,{type:"ic_new_trip_coins",className:"tripcoins"}),Yi.createElement("p",{className:"title"},Yi.createElement("span",{className:"booked",dangerouslySetInnerHTML:{__html:j.replace(/\{0\}/gi,'<em style="color: #FF6F00">').replace(/\{\/0\}/gi,"</em>")}})),Yi.createElement(B.Z,{type:"close",className:"close",onClick:()=>this.close("tripcoins")}))};return V&&R&&G[R]?Yi.createElement("li",null,G[R]()):null}}render(){const{encourage:{type:e,description:_,percent:k},hotelListType:I}=this.props,{visible:C}=this.state;if(!e&&!_&&!C)return null;switch(e){case 1:return"None"!==I&&k>0?this.renderBar():null;case 5:return this.renderBar();default:return"None"!==I?this.renderBar():null}}}function exposure(e){let{target:_,selector:k="",callBack:I,judgeType:C=0,throttleTime:R=200,exposureOnce:j=!0}=e;if(I&&(_||k)){let e=_,B=(0,Ie.P2)((()=>{!e&&k&&(e=document.querySelector(k)),ifExposure(e,C)&&(I&&I(),j&&document.removeEventListener("scroll",B))}),R);return document.addEventListener("scroll",B),B}return null}function scrollOnScreen(e){let{target:_,selector:k,callBack:I,judgeType:C=0,waitTimes:R=250,exposureOnce:j=!1}=e;if(I&&(_||k)){let e=_;const B=(0,Ie.Ds)((()=>{!e&&k&&(e=document.querySelector(k)),ifExposure(e,C)&&(I&&I(),j&&document.removeEventListener("scroll",B))}),R);return document.addEventListener("scroll",B),B}return null}function ifExposure(e,_){if(e){const k=e.getBoundingClientRect&&e.getBoundingClientRect()||{},I=document.documentElement.clientHeight;switch(_){case 1:return k.top<I;case 2:return k.bottom<=I;case 3:return!(k.top>=I||k.bottom<=165);case 4:return!(k.top>=I||k.bottom<=220);case 5:return k.top>170&&k.top<I;case 6:return!(k.top>=I||k.bottom<=80);case 7:return k.bottom<165;default:return!(k.top>=I||k.bottom<=0)}}return!1}function removeScroll(e){document.removeEventListener("scroll",e)}const Ji="Meal",Xi="Breakfast",Qi="HotelMeal",ea="MultiMeal",ta="InstanceConfirm",na="FreeCancel",ra="FreeCancelList",oa="NotInstanceConfirm",ia="NotFreeCancel",aa="LadderCancellation";const la={1:"PROMOTION",2:"FLIGHTMEMBERDEAL",3:"NEWVEIL",4:"TRAINMEMBERDEAL",5:"DISCOUNT",6:"GIFT",7:"POINTOFORDER",8:"POINT",9:"AIRLINE",16:"EASYCANCEL",17:"MINPRICE",18:"CONDITIONALMINPRICE",19:"SINGAPORE_PROMOTION",20:"TICKETS_MEMBER_DEAL",21:"TAKE_CARS_MEMBER_DEAL",22:"FERRY_MEMBER_DEAL",23:"CARS_MEMBER_DEAL",24:"VACATION_MEMBER_DEAL",25:"VISA_MEMBER_DEAL",26:"CRUISE_SHIP_MEMBER_DEAL"},sa={0:"LOGOUTMEMBERDEAL",1:"SILVERMEMBERDEAL",2:"GOLDMEMBERDEAL",3:"PLATINUMMEMBERDEAL",4:"DIAMONDMEMBERDEAL",5:"GOLD_TRIAL_DEAL",6:"DIAMOND_TRIAL_DEAL",7:"EDM_USER_DIAMOND_TRIAL",8:"ACTIVITY_SECTION_MEMBER"},ca={BREAKFAST:1,KINGBED:2,TWOBEDS:4,SINGLEBED:8,MULTIBEDS:16,FREECANCEL:32,INSTANTCONFIRM:64,PAYATHOTEL:128,PAYATONLINE:256},ua=((0,Yo.I)("resx.onlinehotelresource.hotel_roomdata_breakfast_include_v2"),(0,Yo.I)("resx.onlinehotelresource.labeltext_hotel_freecancelation"),(0,Yo.I)("resx.onlinehotelresource.text_twinbed"),(0,Yo.I)("resx.onlinehotelresource.text_doublebedsize"),(0,Yo.I)("key.hotel.filter.single.bed"),(0,Yo.I)("key.hotel.filter.multiple.beds"),(0,Yo.I)("resx.onlinehotelresource.hotel_detail_instant_confirmation_v2"),(0,Yo.I)("resx.onlinehotelresource.text_payathotel"),(0,Yo.I)("resx.onlinehotelresource.v3_hotel_detail_roomdetail_payment_prepaynow"),(e,_)=>{let k="",I=[];return e&&e.length&&_&&_.length&&_.forEach((_=>{let C=e.find((e=>e.type===_));C&&(k="".concat(k).concat(C.content||C.text||""),I.push(C.hover||""))})),{title:k,contents:I}});var da=k(34904),pa=k(48368),ha=k(8304);function listNewPage_logUbtMapping_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function listNewPage_logUbtMapping_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?listNewPage_logUbtMapping_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):listNewPage_logUbtMapping_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const intTypeToString=e=>{switch(e){case 1:return"Promotion label";case 2:return"Airplane Cross Member Label";case 3:return"Veil label";case 4:return"Train cross member label";case 5:return"coupon";case 6:return"gift";case 7:return"Today coupon";case 8:return"trip points";case 9:return"Airline points"}},filterElement=(e,_)=>{if(!e||null===e)return null;{const k=e.filter((e=>e.status));if("string"===_)return k.length>0?k[0].text:null;if("array"===_)return k.length>0?k.map((e=>e.text)):null}},logHotelMapClick=e=>({logKey:"P0104_SP0000_M0005_ID0002_click",logValue:{masterhotelid:e,page:H.default.getByKey("pageId"),locale:H.default.getByKey("cargo.locale")},logDesc:"click the hotel map",actionType:"click"}),logHotelShow=e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_hotel_show",actionType:"scroll",logValue:{hotels:e||null},logDesc:"hotel show"}),logActivityLabelShow=e=>({logKey:"ibu_htl_list_tag_show",action:"scroll",logValue:listNewPage_logUbtMapping_objectSpread({},e),logDesc:"card label show"}),logListTagShow=e=>({logKey:"ibu_htl_list_tag_show",action:"scroll",logValue:listNewPage_logUbtMapping_objectSpread({},e),logDesc:"hotel show"}),logUbtHotelList=(e,_)=>{var k,I;const{hotelList:C=[]}=e,R=e&&(null==C?void 0:C.length)>0?null===(k=C[0])||void 0===k||null===(I=k.trace)||void 0===I?void 0:I.traceLogId:"";return{logKey:"ibu_htl_".concat((0,Le.h8)(),"_wholeprocess"),logDesc:"".concat((0,Le.h8)(),"_wholeprocess"),actionType:"load",logValue:{tracelogid:R,querysource:_}}},logUbtMetaHotel=e=>{const{priceLogParam:_={},roomList:k=[],card:I={}}=e||{},C=k.map((e=>{const{priceLogParam:_}=e||{};return{roomkey:_.roomkey,rrtoken:_.rrtoken,showprice:"T"}})),R=(0,da.Z)();return{logDesc:"metapage_meta_hotel_wholeprocess",logKey:"ibu_htl_metapage_meta_hotel_wholeprocess",actionType:"load",logValue:{hoteldetail:{trace:{rateplantracelogid:_.rateplantracelogid,timestamp:(new Date).getTime().toString()},hotelid:I&&I.base&&I.base.hotelId,roomlist:C},roomid:void 0===R.roomid?"":R.roomid,roomnum:void 0===R.crn?"":R.crn,currency:void 0===R.currency?"":R.currency,displayprice:void 0===R.bp?"":R.bp,displaytax:void 0===R.tf?"":R.tf,displaypricetype:(j=go.Z.get("IBU_showtotalamt"),"1"===j?"inctotal":"2"===j?"incavg":"0"===j?"exavg":"")}};var j},logFoldBar=e=>({logKey:"ibu_htl_listpage_fullroom_click",logDesc:"listpage_fullroom_click",actionType:"click",logValue:{subTab:"1"===(0,Ne.Z)("domestic")?"inland":"oversea",clicktype:e?"unfold":"fold"}}),logshowFoldBar=()=>({logKey:"ibu_htl_listpage_fullroom_show",logDesc:"listpage_fullroom_show",actionType:"show",logValue:{subTab:"1"===(0,Ne.Z)("domestic")?"inland":"oversea"}}),logListpageSortChoice=e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_=e.text)})),{logKey:"ibu_htl_"+(0,Le.h8)()+"_sort_choice",logDesc:"sort_choice",logValue:{sortname:_||null}}},logShowBanner=(e,_)=>{const{encourage:k}=_||{};return{logKey:"ibu_htl_listpage_banner_show",logDesc:"show banner",actionType:"scroll",logValue:listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},e),{},{percentage:(null==k?void 0:k.percent)||null,subtype:(null==k?void 0:k.subtype)||null})}},logClickBanner=e=>{const{encourage:_}=e||{};return{logKey:"ibu_htl_listpage_banner_click",logDesc:"click banner",actionType:"click",logValue:{type:"bookout",percentage:null==_?void 0:_.percent,subtype:(null==_?void 0:_.subtype)||""}}},logCloseBanner=(e,_)=>{const{encourage:k}=_||{};return{logKey:"ibu_htl_listpage_banner_close",logDesc:"close banner",actionType:"click",logValue:{type:e,percentage:null==k?void 0:k.percent,subtype:(null==k?void 0:k.subtype)||""}}},logPreSaleShow=e=>({logKey:"ibu_htl_metapage_presale_banner_show",logDesc:"presale_banner_show",actionType:"scroll",logValue:{productUrl:e}}),fa=function logPreSaleClick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{logKey:"ibu_htl_metapage_presale_product_buy",logDesc:"presale_product_buy",actionType:"click",logValue:{productid:e,productUrl:_}}},logMetapageSelectRoomClick=e=>{var _,k,I,C;return{logKey:"ibu_htl_metapage_selectroom_click",logDesc:"metapage_selectroom_click",actionType:"click",logValue:{masterhotelid:(null==e||null===(_=e.baseroominfo)||void 0===_?void 0:_.masterhotelid)||null,baseroomid:(null==e||null===(k=e.trace)||void 0===k?void 0:k.baseroomid)||null,roomid:(null==e||null===(I=e.base)||void 0===I?void 0:I.roomId)||null,roomuniquekey:(null==e||null===(C=e.trace)||void 0===C?void 0:C.roomuniquekey)||null}}},logMetapageLayerAction=(e,_,k)=>{var I,C,R,j;return{logKey:"ibu_htl_metapage_layer_action",logDesc:"metapage_layer_action",actionType:"hover",logValue:{masterhotelid:(null==k||null===(I=k.baseroominfo)||void 0===I?void 0:I.masterhotelid)||null,baseroomid:(null==k||null===(C=k.trace)||void 0===C?void 0:C.baseroomid)||null,roomid:(null==k||null===(R=k.base)||void 0===R?void 0:R.roomId)||null,roomuniquekey:(null==k||null===(j=k.trace)||void 0===j?void 0:j.roomuniquekey)||null,action:e,position:_||null}}},logMetahtlPriceLayerExp=()=>({logKey:"htl_t_online_pricelayer_exposure",logDesc:"metapage_pricelayer_exposure",actionType:"hover",logValue:{page:H.default.getByKey("pageId"),locale:H.default.getByKey("cargo.locale")}}),listSoldOut=e=>({logKey:"ibu_htl_list_soldout_load",logDesc:"hotellist sold out",actionType:"show",logValue:{masterhotelid:e,locale:H.default.getByKey("cargo.locale"),pageid:H.default.getByKey("pageId")}}),logShowResult=e=>({logKey:"ibu_htl_".concat((0,Le.h8)(),"_gold_exp_benefit_result"),logDesc:"gold_exp_benefit_result",actionType:"click",logValue:{result:e,page:H.default.getByKey("pageId")||"",position:"screenbottom"}}),load=e=>{var _,k,I,C;const{searchCondition:R,filterCondition:j,searchBarData:B}=e||{};return{url:window.location.href,referrer:document.referrer||window.location.href,edm_id:(0,Ne.Z)("edm_id")||"",oldcheckin:null===(_=(0,Ne.Z)("checkin")||null)||void 0===_?void 0:_.replace(/\//g,"-"),oldcheckout:null===(k=(0,Ne.Z)("checkout")||null)||void 0===k?void 0:k.replace(/\//g,"-"),newcheckin:null===(I=B.calendar.checkIn||(0,Ne.Z)("checkin"))||void 0===I?void 0:I.replace(/\//g,"-"),newcheckout:null===(C=B.calendar.checkOut||(0,Ne.Z)("checkout"))||void 0===C?void 0:C.replace(/\//g,"-"),searchparameter:{id:R.optionId||null,type:R.optionType||null,word:R.keyword||null,cityid:R.cityId||null,cityname:R.cityName||null,lat:R.lat||null,lon:R.lng||null,coordtype:R.mapType||null,checkin:R.checkIn||null,checkout:R.checkOut||null,roomnum:R.roomNum||null,adult:R.adult||null,child:R.child||null,age:R.age||null,filter:{pricefilter:{min:0===(0,Ne.Z)("lowPrice")?null:(0,Ne.Z)("lowPrice"),max:-1===(0,Ne.Z)("highPrice")?null:(0,Ne.Z)("highPrice"),currency:H.default.getByKey("cargo.currency")},commentscorefilter:{min:(0,Ne.Z)("rate")||null},star:(0,Ne.Z)("starlist")||null,includefreebreakfast:(0,Ne.Z)("breakfast")||null,bookable:(0,Ne.Z)("bookable")||null,paytype:j.payType?"1":null},sortname:R.sortType||null},currency:H.default.getByKey("cargo.currency"),locale:H.default.getByKey("cargo.locale")}},filterLoad=e=>{var _,k,I,C,R,j,B,H,U,V,G,q,z,J;const{filter:Q={}}=e||{};let ee=null===(_=Q.priceType)||void 0===_?void 0:_.list,te=null===(k=Q.bookPolicy)||void 0===k?void 0:k.list,ne=null===(I=Q.amenty)||void 0===I?void 0:I.list,re=null===(C=Q.bedType)||void 0===C?void 0:C.list,oe=null===(R=Q.brand)||void 0===R?void 0:R.list,ie=null===(j=Q.feature)||void 0===j?void 0:j.list,ae=null===(B=Q.category)||void 0===B?void 0:B.list,le=null===(H=Q.discount)||void 0===H?void 0:H.list,se=null===(U=Q.zone)||void 0===U?void 0:U.list,ce=null===(V=Q.landmark)||void 0===V?void 0:V.list,ue=null===(G=Q.airportTrainstation)||void 0===G?void 0:G.list,de=null===(q=Q.metro)||void 0===q?void 0:q.lineList,pe=null===(z=Q.location)||void 0===z?void 0:z.list,he=null===(J=Q.cityId)||void 0===J?void 0:J.list,fe=filterElement(ee,"string"),me=(null==te?void 0:te.filter((e=>1===e.value&&e.status)).length)>0?1:null,ge=(null==te?void 0:te.filter((e=>2===e.value&&e.status)).length)>0?1:null,ve=filterElement(ne,"array"),ye=filterElement(re,"string"),be=filterElement(oe,"array"),_e=filterElement(ie,"array"),we=filterElement(ae,"array"),Ee=filterElement(le,"array"),Se=filterElement(se,"array"),Oe=filterElement(ce,"array"),Te=(null==ue?void 0:ue.filter((e=>e.status)).length)>0?null==ue?void 0:ue.filter((e=>e.status))[0].type:"",ke=filterElement(ue,"string"),Ie="",Ce="",Pe=null==de?void 0:de.filter((e=>e.status));if(Pe&&Pe.length>0&&(Ie=Pe.map((e=>e.title))||null,Pe.map((e=>e.siteList))&&Pe.map((e=>e.siteList)).length>0)){const e=Pe.map((e=>e.siteList));Ce=filterElement(e[0],"string")}return{searchparameter:{filter:{pricefilter:{type:fe||null},freecancel:me||null,instantconfirm:ge||null,facility:ve||null,bed:ye||null,brands:be||null,staytypes:we||null,themehotels:_e||null,benefitfilter:{all:null,promotion:null,codes:null},discounts:Ee||null},locationfilter:{distance:null,commercialareas:Se||null,landmarks:Oe||null,trafficpointfilter:{traffictype:Te||null,name:ke||null},metrofilter:{maglev:null,linename:Ie||null,stationname:Ce||null},districts:filterElement(pe,"array")||null,citys:filterElement(he,"array")||null}}}},logDecryptPrice=()=>{const e=performance.getEntriesByName("hote1Start")[0].startTime,_=performance.getEntriesByName("hote1End")[0].startTime,k=performance.timing.domContentLoadedEventEnd-performance.timing.fetchStart;return{logKey:"ibu_htl_"+(0,Le.h8)()+"_decrypt_price_perf",logValue:{locale:H.default.getByKey("cargo.locale"),aid:(0,Ne.Z)("allianceid"),sid:(0,Ne.Z)("sid"),networkTime:_-e,domReadyTime:e-k},logDesc:"click of viewed hotel listpage"}},metaLoad=(e,_)=>{var k;const{base:I,position:C,picture:R,money:j,trace:B}=_||{},H=(null==_||null===(k=_.metaHotel)||void 0===k?void 0:k.roomList)?_.metaHotel.roomList:null;let U=[];if(H)for(let e=0;e<H.length;e++){let _={},k=[];for(let _=0;_<H[e].promotion.list.length;_++){let I={};I=Object.assign(I,{title:intTypeToString(H[e].promotion.list[_].type)||null,contents:H[e].promotion.list[_].text||null}),k.push(I)}const getMemberContentsAndHovers=e=>{let _=[];return e&&e.list&&e.list.length&&e.list.forEach((e=>{_.push(e.content||"")})),{contents:_}};let C=[listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].facility,["Wifi","NoWifi","Network"])),{},{type:"netinfo"}),listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].policy,[na,ia])),{},{type:"cancelinfo"}),listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].policy,[ta,oa])),{},{type:"confirminfo"}),listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].facility,["NoMeal",Ji,Xi,ea,Qi])),{},{type:"mealinfo"}),{title:H[e].bed&&H[e].bed.contentList&&H[e].bed.contentList.join&&H[e].bed.contentList.join(""),contents:H[e].bed.contentListHover,type:"bedinfo"},listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].promotion,[])),{},{type:"giftinfo"}),listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].promotion,[])),{},{type:"tripcoins"}),listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({title:""},getMemberContentsAndHovers(H[e].member)),{},{type:"veilinfo"}),listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].promotion,[])),{},{type:"airlinecoupon"}),listNewPage_logUbtMapping_objectSpread(listNewPage_logUbtMapping_objectSpread({},ua(H[e].promotion,[10])),{},{type:"promotion"})];_=Object.assign(_,{baseroominfo:H[e].baseroominfo||null,roominfo:{masterhotelid:I.hotelId||null,baseroomid:H[e].trace.baseroomid||null,roomid:H[e].base.roomId||null,roomuniquekey:H[e].trace.roomuniquekey||null,roomname:H[e].base.roomName||null,roomsize:H[e].trace.roomsize||null,floorinfo:H[e].trace.floorinfo||null,maxperson:H[e].trace.maxperson||null,smokeinfo:H[e].trace.smokeinfo||null,windowinfo:H[e].trace.windowinfo||null,nocreditmessage:H[e].trace.nocreditmessage||null,addbedinfo:H[e].trace.addbedinfo||null,paytype:H[e].base.paytype||null,addbreakfast:H[e].trace.addbreakfast||null,cancelpriceinfo:H[e].money.priceDelete||null,showpriceinfo:H[e].money.price||null,showwithtaxpriceinfo:H[e].trace.showwithtaxpriceinfo||null,pricelayerinfo:H[e].roomLayerInfo||null,items:C||null,propertyvaluelist:H[e].propertyvaluelist||null,roomdatapromotioninfo:{roomcard:k||null}}}),U.push(_)}return{tophotelloadtime:e||null,hotelinfo:{masterhotelid:I&&I.hotelId?I.hotelId:null,hotelname:I&&I.hotelName?I.hotelName:null,zonename:C&&C.area?C.area:null,imageurl:R&&R.defaultUrl?R.defaultUrl:null,priceinfo:j&&j.price?j.price:null,cancelpriceinfo:j&&j.priceDelete?j.priceDelete:null,discountpercent:B&&B.discountpercent?B.discountpercent:null,pointsplusinfo:B&&B.pointsplusinfo?B.pointsplusinfo:null},showrooms:U||null}},noImageLog=(e,_,k)=>{var I,C;return{logDesc:"no image log hotel listpage",logKey:"ibu_htl_list_nohotelimage_load",logValue:{cityid:null===(I=e.position)||void 0===I?void 0:I.cityId,hotelid:null===(C=e.base)||void 0===C?void 0:C.hotelId,type:_,locale:H.default.getByKey("cargo.locale"),isLogin:H.default.getByKey("isLogged")?"T":"F",picurl:k}}},picloadMonitorList=(e,_,k,I,C,R)=>({logKey:"ibu_htl_picload_monitor",logDesc:"Image loading time",actionType:"load",keyId:"204418",logValue:{cityid:e.position.cityId,hotelid:e.base.hotelId,roomid:"",type:_,locat:k,picSize:C,loadtime:I,picurl:R,locale:H.default.getByKey("cargo.locale")}}),clearFiltersLoad=()=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_clearFilters_load",logDesc:"no hotle with filters load"}),clearFiltersClick=()=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_clearFilters_click",logDesc:"clear filters button click"}),metaHotelListCardRendered=(e,_)=>{const k=+new Date;return{logKey:"ibu_htl_c_online_meta_htlpiceshow_load",logDesc:"The user enters the list page - Meta List force out the picture rendering completion time",actionType:"load",keyId:"200785",logValue:{inlisttime:e,htllshowtime:k,timegap:k-e,loadSuccess:_}}},metaHotelListCardPriceRendered=(e,_)=>{var k,I;const C=null!==(k=null===ha.Z||void 0===ha.Z||null===(I=ha.Z.timing)||void 0===I?void 0:I.domContentLoadedEventStart)&&void 0!==k?k:Date.now();return{logKey:"ibu_htl_c_online_meta_htlpriceshow_load",logDesc:"The user enters the list page - Meta List force out the price rendering completion time",actionType:"load",keyId:"200785",logValue:{inlisttime:e,htllshowtime:C,timegap:C-e,loadSuccess:_}}},hotelListCardRendered=(e,_)=>{var k,I;const C=null!==(k=null===ha.Z||void 0===ha.Z||null===(I=ha.Z.timing)||void 0===I?void 0:I.domContentLoadedEventStart)&&void 0!==k?k:Date.now();return{logKey:"ibu_htl_c_online_list_htlshow_load",logDesc:"hotel list card info rendered",keyId:"200774",actionType:"load",logValue:{inlisttime:e,htllshowtime:C,timegap:C-e,loadSuccess:_}}},logHotelCardClick=e=>({logKey:"P0104_SP0000_M0005_ID0001_click",logDesc:"hotel card click",actionType:"click",logValue:e}),logHotelCardExposure=e=>({logKey:"P0104_SP0000_M0005_ID0001_exposure",logDesc:"hotel card exposure",actionType:"exposure",logValue:e}),onlineListHotelPictureExposure=e=>({logKey:"htl_t_online_list_hotel_picture_exposure",logDesc:"hotel pincture exposure",actionType:"exposure",logValue:e}),logFullListBottom=e=>({logKey:"P0104_SP0000_M0000_ID0001_exposure",logDesc:"full list bottom",logValue:{locale:H.default.getByKey("cargo.locale")}}),logMainListBottom=e=>({logKey:"P0104_SP0000_M0000_ID0002_exposure",logDesc:"main list bottom",logValue:{lmasterhotelid_tracelogid:e.masterhotelid_tracelogid,locale:H.default.getByKey("cargo.locale"),htllist_query_id:(0,Ti.RL)()||""}}),logUbtHotelListBatchRefresh=e=>{var _;const{preList:k=[],res:I={hotelList:[]},param:C,preBatchRefresh:R}=e||{res:{hotelList:[]},preList:[]};let j={data:(null===(_=I.hotelList)||void 0===_?void 0:_.map((e=>{let{hotelBasicInfo:_,discountLabels:I,promotion:C,roomInfo:R,tags:j,trace:B,extensions:H}=e,U=_.hotelId,{discountLabels:V,promotion:G,roomInfo:q,tags:z,trace:J,extensions:Q}=k.find((e=>e.hotelBasicInfo.hotelId===U))||{};return{hotelId:U,discountLabels:{old:V,new:I},promotion:{old:G,new:C},roomInfo:{old:q,new:R},trace:{old:J,new:B},tags:{old:z,new:j},extensions:{old:Q,new:H}}})))||null,batchId:R.batchId,batchSeqNo:R.batchSeqNo,type:C.queryTag,pageType:(0,Le.ci)()};return{logKey:"ibu_htl_".concat((0,Le.h8)(),"_batchRefresh"),logDesc:"".concat((0,Le.h8)(),"_batchRefresh"),keyId:219092,actionType:"load",logValue:j}},logListMiddlePoiCardSlide=e=>{const{cityId:_}=e;(0,pa.NW)("htl_t_online_list_recommend_location_silde",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),cityid:_||""})},logInboundBannerClick=e=>({logKey:"htl_t_online_list_htllist_friendlyhtl_click",logDesc:"inbound banner click",actionType:"click",logValue:e}),ma=function logAdDsaLayer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,pa.NW)("htl_t_online_list_htllist_adsLayer_exposure",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),masterhotelid:e.hotelId||"",status:e.status||""})};var ga,va,ya=k(67294);let ba=(0,Ni.$j)((e=>({bookable:e.filterCondition.bookable,bookableVisible:e.bookableVisible,hotelListType:(0,ci.Z)(e,"longList.hotelList.type","")})))(((va=class EncourageCard extends encourageCard_view_View{constructor(e){super(e),this.startRotate=e=>{let{encourage:{percent:_}}=e;if(_>50){let e=360*(_-50)/100,k=1*(_-50)/100;this.setState({rightRotate:180}),setTimeout((()=>{this.setState({leftRotate:e,leftDuration:k})}),500)}else{let e=360*_/100;this.setState({rightRotate:e})}},this.close=e=>{removeScroll(this.ScrollFunction),this.setState({visible:!1},(()=>{e&&this.$safeLog("logCloseBanner",e,this.props)}))},this.bookable=()=>{this.props.dispatch(removeViewBookOnly(this.props.bookable)),this.$safeLog("logClickBanner",this.props)},this.ubtMapping={logShowBanner:logShowBanner,logClickBanner:logClickBanner,logCloseBanner:logCloseBanner},this.state={leftRotate:0,leftDuration:0,rightRotate:0,visible:!0},this.areaRef=ya.createRef(),this.airhotelRef=ya.createRef(),this.easyCancleRef=ya.createRef(),this.tripcoinsRef=ya.createRef(),this.ScrollFunction=null}scrollOnScreenTemplate(e){let{ref:_,type:k}=e;_&&!this.ScrollFunction&&(this.ScrollFunction=scrollOnScreen({target:_,callBack:()=>{this.$safeLog("logShowBanner",{type:k},this.props)}}))}componentDidMount(){[{ref:this.areaRef.current,type:"bookout"},{ref:this.airhotelRef.current,type:"flight"},{ref:this.easyCancleRef.current,type:"cancellation_guarantee"},{ref:this.tripcoinsRef.current,type:"tripcoins"}].forEach((e=>{this.scrollOnScreenTemplate(e)}))}componentWillUnmount(){removeScroll(this.ScrollFunction)}UNSAFE_componentWillReceiveProps(e){this.startRotate(e)}}).defaultProps={encourage:{},bookableVisible:!0},va.propTypes={encourage:_e().object,bookableVisible:_e().bool},ga=va))||ga;var _a=k(39621).default,wa=k(67294);class whyCard_view_View extends _a{constructor(){super(...arguments),this.renderScore=()=>this.$translate("key.hotel.landing.page.trustpilot")}render(){return wa.createElement("div",{className:"list-card-why"},wa.createElement("p",{className:"title"},this.$translate("key.hotel.landing.page.why.book")),wa.createElement("div",{className:"main"},wa.createElement("span",{className:"info"},"TrustScore"),wa.createElement("span",{className:"score"},this.$translate("key.hotel.landing.page.trustpilot.score")),wa.createElement("span",{className:"star"}),wa.createElement("span",{className:"info"},"based on 3,866 reviews"),wa.createElement("span",{className:"logo"})),wa.createElement("p",{className:"footer"},this.$translate("key.hotel.landing.page.nasdaq")))}}class WhyCard extends whyCard_view_View{constructor(e){super(e),this.state={}}}WhyCard.defaultProps={},WhyCard.propTypes={};var Ea=k(16353),Sa=k(39621).default,Oa=k(67294);class Demo extends Sa{constructor(e){super(e),this.onClick=()=>{const{data:{url:e}}=this.props;e&&window.open(e)},this.state={}}render(){const{data:{imageUrl:e}}=this.props;return e?Oa.createElement("div",{className:"list-card-ad-v8",onClick:this.onClick},Oa.createElement(Ea.Z,{src:e,height:"unset",className:"ad-v8-img"})):null}}Demo.defaultProps={data:{}},Demo.propTypes={data:_e().object};const Ta="SEARCH_INPUT_KEYWORD_UPDATE";function actionCreator_updateSearchInputKeyword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:Ta,data:e}}function actionCreator_updateKeyword(e){return{type:"KEYWORD_UPDATE",key:Si.rK,data:e}}function actionCreator_updateStarRate(e){return{type:"STAR_RATE_UPDATE",key:Si.Js,data:e}}function actionCreator_updateLowPrice(e){return{type:"LOW_PRICE_UPDATE",key:Si.wT,data:e}}function actionCreator_updateHighPrice(e){return{type:"HIGH_PRICE_UPDATE",key:Si.KA,data:e}}function updatePosition(e){return{type:"POSITION_UPDATE",payload:e}}function updateSeachConditionDirectSearch(e){return{type:"SEARCHCONDITION_DIRECTSEARCH_UPDATE",payload:e}}const clearKeyword=()=>e=>{e(actionCreator_updateSearchInputKeyword("")),e(actionCreator_updateKeyword({})),e(updatePosition({lat:0,lng:0}))},actionCreator_updateBookableVisible=e=>({type:"UPDATE_BOOKABLE_VISIBLE",payload:e}),toggleNormalLastPage=e=>({type:"TOGGLE_NORMAL_LAST_PAGE",payload:e}),toggleRecommendLastPage=e=>({type:"TOGGLE_RECOMMEND_LAST_PAGE",payload:e}),resetOptionInfo_reset=()=>{let e=window.location.href,_="0"!==(0,Ne.Z)("domestic")?fi.VS.City:fi.VS.IntlCity,k=(0,Ne.Z)("city")||(0,Ne.Z)("cityId");e=(0,ii.qz)({optionId:k},e),e=(0,ii.qz)({optionName:""},e),e=(0,ii.qz)({optionType:_},e),window.history.replaceState(null,"",e)},resetOptionInfo=e=>{if(e){(0,Ne.Z)("optionId")==="".concat(e.value)&&resetOptionInfo_reset()}else resetOptionInfo_reset()};class OptionType{constructor(e){this.getQuery=e=>Ce.Z?(0,Ne.Z)(e):(0,ci.Z)(this.query,e,""),this.getOptionType=()=>this.getQuery("optionType"),this.provinceLevel=()=>{const e=this.getQuery("city")||this.getQuery("cityId");return Number(e)<=0},this.isProvinceDistrict=()=>{const e=this.getOptionType();return fi.Gd.includes(e)},this.isDirectSearch=()=>"1"===this.getQuery("directSearch"),this.query=e||{}}}function updateGeneralFilters(e){return{type:"UPDATE_GENERAL_FILTERS",payload:e}}function updatePriceFilter(e){return{type:"UPDATE_PRICE_FILTER",payload:e}}function updateQuickFilters(e){return{type:"UPDATE_QUICK_FILTERS",payload:e}}function removeFilter(e){return{type:"REMOVE_FILTER",payload:e}}function trace_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function trace_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?trace_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):trace_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const commonTraceInfo=()=>{var e;return{regionid:H.default.getByKey("initData.searchBarData.search.code")||"",regionname:H.default.getByKey("initData.searchBarData.search.resultWord")||H.default.getByKey("initData.searchBarData.search.city.currentLocaleName")||"",regiontype:("CT"===(e=H.default.getByKey("initData.searchBarData.search.resultType"))||""===e?1:"P"===e?2:"C"===e?3:"S"===e?4:0)||0,locale:H.default.getByKey("cargo.locale")||""||"",page:H.default.getByKey("pageId")||""||"",des_cityid:H.default.getByKey("initData.searchBarData.search.city.geoCode")||0}},sendFilterClickTrace=e=>{(0,Le.NW)("htl_t_online_list_filter_filter_click",trace_objectSpread(trace_objectSpread({},commonTraceInfo()),e))},sendFilterCancelTrace=e=>{const{page:_,locale:k,des_cityid:I}=commonTraceInfo();(0,Le.NW)("htl_t_online_list_filter_clean_click",trace_objectSpread({page:_,locale:k,des_cityid:I},e))},sendFilterShowAllTrace=e=>{(0,Le.NW)("htl_t_online_list_filter_showall_click",trace_objectSpread(trace_objectSpread({},commonTraceInfo()),e))},locationLayerCloseTrace=()=>{(0,Le.NW)("htl_t_online_list_filter_layerclose_click",trace_objectSpread({},commonTraceInfo()))},sendFilterShowTrace=e=>{const{filter:_,rank:k,is_layer:I,filtertypename:C}=e;return JSON.stringify({ubtKey:"htl_t_online_list_filter_filter_exposure",data:trace_objectSpread(trace_objectSpread({},commonTraceInfo()),{},{filterid:_.filterId,filtertype:_.type,filtername:_.text||_.value,filterrank:k,is_layer:I,filtertypename:C})})};var ka,Ia=k(39621).default,Ca=k(67294);let Pa=(0,Ni.$j)((e=>({searchBarData:e.searchBarData})))(ka=class FilterItem extends Ia{constructor(e){super(e),this.close=()=>{var e,_,k,I,C;const R=Ce.Z&&H.default.getByKey("pageName"),{data:j,dispatch:B}=this.props,U="1"===(0,Ne.Z)("directSearch");if(R||(B(toggleRecommendLastPage(!1)),B(toggleNormalLastPage(!1))),B(removeFilter({filter:j,type:j.key})),U)j.isHitDirectSearch&&(B(clearKeyword()),B(updateSeachConditionDirectSearch(0)));else{if(String((0,ci.Z)(j,"value",""))===(0,Ne.Z)("optionId")){B(clearKeyword());(new OptionType).isProvinceDistrict()||resetOptionInfo()}}"bookable"===j.key&&1===j.value&&B(actionCreator_updateBookableVisible(!0)),"1"===j.key&&"1189"==j.value&&ke.y7.remove("feature"),"star"===j.key&&B(actionCreator_updateStarRate([])),"priceRange"===j.key&&(B(actionCreator_updateLowPrice(0)),B(actionCreator_updateHighPrice(-1))),(null===(e=this.props)||void 0===e||null===(_=e.searchBarData)||void 0===_||null===(k=_.search)||void 0===k||null===(I=k.item)||void 0===I||null===(C=I.data)||void 0===C?void 0:C.filterId)===(null==j?void 0:j.filterId)&&B({type:"SEARCHBARDATA_CLEAR_KEYWORD"}),"15"!==(null==j?void 0:j.key)&&sendFilterCancelTrace({filtertype:null==j?void 0:j.type,filtername:null==j?void 0:j.text,filterid:null==j?void 0:j.filterId})}}render(){const{name:e,data:_}=this.props;return Ca.createElement("div",{className:"choosen-item-v8",onClick:this.close},Ca.createElement("span",{className:j()("name font-bold",{priceName:"15"===(null==_?void 0:_.key)})},e),Ca.createElement(B.Z,{type:"ic_new_close_line",className:"close"}))}})||ka;const initFilterData=(e,_)=>{let k=(0,li.hZ)(e,_),I=[],C=null;const R=["50","18","10","9","41","8","139"];k.forEach((e=>{"80"!=e.type&&"17"!=e.type&&(I.push(e),R.includes(e.type)&&(C=Object.assign({},e)))}));let j="",B={};if(C)switch(C.key){case"8":j="Zone",B.zoneCode=C.value;break;case"50":case"landmark":j="Markland",B.landMarkCode=C.value;break;case"18":j="Location";break;case"10":j="Airport"}return H.default.setByKey("locationFilter",j?Object.assign(B,{poiCode:C.value,poiName:encodeURIComponent(C.text),optionId:C.value,optionType:j,latitude:C.lat,longitude:C.lng}):{}),I};var La=k(39621).default,Na=k(67294);class tab_v8_view_View extends La{constructor(){super(...arguments),this.hoverContent=()=>Na.createElement("div",{className:"cma-content"},Na.createElement("h3",null,Na.createElement("strong",null,this.$translate("key.hotel.list.page.cma.sort.explanation.title.online"))),Na.createElement("p",null,this.$translate("key.hotel.list.page.cma.sort.explanation.detail1.online")),Na.createElement("p",null,this.$translate("key.hotel.list.page.cma.sort.explanation.detail2.online"))),this.mouseOver=e=>{const _=this.$component("ToolTip"),k={content:this.hoverContent(),target:e.target,triPlacement:"middle",dark:!1,zIndex:10002};_.action("show",k)},this.mouseOut=()=>{this.$component("ToolTip").action("hide")}}render(){var e;const{visible:_,allData:k,currentSelectedItem:I}=this.state;return k.length>0?Na.createElement("div",{className:"tab-sort-v8",id:"list_hotel_sort",ref:this.sortRef,onClick:()=>this.setState({visible:!_})},Na.createElement("span",null,Na.createElement(B.Z,{className:"sort-selector-icon",type:"General_sort"}),this.$translate("resx.onlinehotelresource.labeltext_hotel_sortby")+":"," ",(null==I||null===(e=I[0])||void 0===e?void 0:e.text)||""),Na.createElement(B.Z,{className:"sort-arrowIcon",type:_?"arrowLineUp":"arrowLineDown"}),_&&Na.createElement("div",{className:"drop-selector"},k.map(((e,_)=>{if(e.isShow){var k;const{text:C,filterId:R}=e,H=R===(null==I||null===(k=I[0])||void 0===k?void 0:k.filterId),U=j()("drop-options",{active:H});return Na.createElement("span",{className:U,key:_,onClick:()=>this.updateSortResult(e)},C,H?Na.createElement(B.Z,{className:"drop-option-active-icon",type:"check"}):null)}})))):null}}const Da={"de-XX":5,"en-XX":5,"fr-XX":5,"nl-XX":5,"zh-HK":6,"ko-KR":6,"ja-JP":6,"es-ES":5,"it-IT":5,"ru-RU":4,"th-TH":5,"id-ID":5,"ms-MY":5,"vi-VN":5,"pl-PL":5,"el-GR":5,"tr-TR":5,"pt-BR":5},Aa={"de-XX":3,"en-XX":3,"fr-XX":3,"nl-XX":3,"zh-HK":4,"ko-KR":4,"ja-JP":4,"es-ES":3,"it-IT":3,"ru-RU":2,"th-TH":3,"id-ID":3,"ms-MY":3,"vi-VN":3,"pl-PL":3,"el-GR":3,"tr-TR":3,"pt-BR":3},Ra=function getLocale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",_=H.default.getByKey("cargo.locale","")||e||"";return _.indexOf("en")>-1?_="en-XX":_.indexOf("de")>-1?_="de-XX":_.indexOf("fr")>-1?_="fr-XX":_.indexOf("nl")>-1&&(_="nl-XX"),_};let limitLen=e=>Ce.Z&&document.body.clientWidth<=768?Aa[Ra()]||3:Da[Ra(e)]||5;const splitSortData=(e,_)=>{const k=limitLen(_);let I=e.slice(0,k),C=e.slice(k);if(C.some((e=>e.status))){let e,_=C.find(((_,k)=>{if(_.status)return e=k,_.status})),k=I.pop();I.push(_),C.splice(e,1,k)}const R=I.concat(C);return{showData:I,hideData:C,allData:R}},initCurrentIndex=(e,_)=>{const k=limitLen(_);let I=-1;return e.forEach(((e,_)=>{let{status:k}=e;k&&(I=_)})),I>=k&&(I=k-1),I};var xa=k(46925);function actionCreator_updateGeneralFilters(e){return{type:xa.oW,payload:e}}function actionCreator_removeFilter(e){return{type:xa.l3,payload:e}}function actionCreator_removeALLFilters(e){return{type:xa.em,payload:e}}var ja,Ba,Ma=k(67294);let Fa=(0,Ni.$j)((e=>{var _,k;const{renderFilters:I,filterCondition:C,initData:R}=e;return{data:(null==I||null===(_=I.generalFilters[17])||void 0===_?void 0:_.list)||[],type:null==C||null===(k=C.star)||void 0===k?void 0:k.type,locale:(null==R?void 0:R.locale)||"",renderFilters:I}}))(((Ba=class TabV8 extends tab_v8_view_View{constructor(e){super(e),this.sortRef=Ma.createRef(),this.componentWillUnmount=()=>{document.removeEventListener("scroll",this.scrollFix)},this.update=(e,_)=>{this.setState({currentIndex:e});let k=_.filter((e=>e.status))||[];this.props.dispatch(actionCreator_updateGeneralFilters({filters:k,type:"17"})),this.$safeLog("logListpageSortChoice",_)},this.updateSortResult=e=>{this.props.dispatch(actionCreator_updateGeneralFilters({filters:[e],type:"17"})),this.setState({currentSelectedItem:[e],visible:!1})},this.showChange=e=>{const{currentIndex:_,showData:k,hideData:I}=this.state;if(e===_)return;let C=k.map(((_,k)=>Object.assign({},_,{status:e===k?1:0})));this.update(e,[...C,...I])},this.hideChange=(e,_)=>{let{showData:k,hideData:I}=this.state;k=ae()(k),k.forEach((e=>e.status=0));const C=k.pop();C.status=0,e.status=1,k.push(e),I.splice(_,1,C),this.update(limitLen-1,[...k,...I])},this.scrollFix=(0,Ie.P2)((()=>{const e=document.querySelector(".tab-sort-placeholder-v8"),_=(null==e?void 0:e.getBoundingClientRect().top)||0,k=document.querySelector(".list-search-container"),I=(null==k?void 0:k.clientHeight)||0;_<=I?this.setState({needFixed:!0,fixedTop:I}):this.setState({needFixed:!1})}),10),this.ubtMapping={logListpageSortChoice:logListpageSortChoice};const{data:_,locale:k}=e;this.state=Object.assign({currentIndex:-1,visible:!1,showData:[],hideData:[],needFixed:!1,fixedTop:0},{currentIndex:initCurrentIndex(_,k)},splitSortData(_,k),{currentSelectedItem:splitSortData(_,k).allData.filter((e=>(null==e?void 0:e.isShow)&&1===(null==e?void 0:e.status)))||[]})}static getDerivedStateFromProps(e){const{data:_,locale:k}=e;return Object.assign({},{currentIndex:initCurrentIndex(_,k)},splitSortData(_,k),{currentSelectedItem:_.filter((e=>(null==e?void 0:e.isShow)&&1===(null==e?void 0:e.status)))||[]})}componentDidMount(){document.addEventListener("click",(e=>{this.sortRef.current&&!this.sortRef.current.contains(e.target)&&this.setState({visible:!1})}));!H.default.getByKey("listPageFilterFixed",this.ctx)&&document.addEventListener("scroll",this.scrollFix)}}).defaultProps={data:[],type:""},Ba.propTypes={data:_e().array},ja=Ba))||ja;var Ha=k(5649),Ka=k(39621).default,Ua=k(67294);const Za=class Progress extends Ka{constructor(e){super(e),this.startProgress=()=>{this.setState({progress:0}),this.timer=setInterval((()=>{this.setState((e=>e.progress<90?{progress:e.progress+4.5}:(e.progress>=99.99&&clearInterval(this.timer),{progress:e.progress+.05})))}),50)},this.completeProgress=()=>{clearInterval(this.timer),this.setState({progress:100},(()=>{setTimeout((()=>{this.setState({progress:0})}),100)}))},this.state={progress:0}}componentDidUpdate(e){e.breathing!==this.props.breathing&&(this.props.breathing?this.startProgress():this.completeProgress())}componentWillUnmount(){clearInterval(this.timer)}render(){const{progress:e}=this.state;return Ua.createElement(Ua.Fragment,null,e>0&&Ua.createElement("div",{className:"progress"},Ua.createElement("div",{className:"progress-percent",style:{width:"".concat(e,"%")}})))}};var Va=k(67294);function DropdownSelector(e){var _,k;const[I,C]=(0,he.useState)(!1),R=(0,he.useRef)(null),H=null!==(_=null===(k=e.options.find((_=>_.value===e.currentValue)))||void 0===k?void 0:k.text)&&void 0!==_?_:"";return(0,he.useEffect)((()=>{if(!I)return;const handleClick=e=>{R.current&&!R.current.contains(e.target)&&C(!1)};return document.addEventListener("click",handleClick),()=>document.removeEventListener("click",handleClick)}),[I]),Va.createElement("span",{className:"dropdown-selector",ref:R,onClick:()=>C(!I)},Va.createElement("span",null,Va.createElement(B.Z,{className:"dropdown-selector-icon",type:"General_price"}),H),Va.createElement(B.Z,{className:"dropdown-selector-arrow-icon",type:I?"arrowLineUp":"arrowLineDown"}),I?Va.createElement("div",{className:"dropdown-selector-option-list"},e.options.map(((_,k)=>{const I=_.value===e.currentValue,C=j()("dropdown-selector-options",{active:I});return Va.createElement("span",{className:C,key:"".concat(_.text,"_").concat(k),onClick:()=>e.onChange(_.value)},_.text,I?Va.createElement(B.Z,{className:"dropdown-selector-active-icon",type:"check"}):null)}))):null)}var Wa=k(67294);let renderDialog=(e,_,k,I)=>{let{clear:C,apply:R,isSingle:j}=k.options,{data:B,isNewMap:H}=k.props,U={data:JSON.parse(JSON.stringify(B||k.props[I])),clear:C,apply:R,onChange:k.onChange.bind(k),show:e,isSingle:j,isLeftFilters:H};return"brandFilter"===I&&(U.type="brand"),Wa.createElement(_,U)};const Ga="HEALTH_UPDATE";function updateAreas(e){return{type:"AREAS_UPDATE",payload:e}}function updateBedType(e){return{type:"BEDTYPE_UPDATE",payload:e}}function updateLocation(e){return{type:"LOCATION_UPDATE",payload:e}}function updateAmenities(e){return{type:"AMENITIES_UPDATE",payload:e}}function updateDiscounts(e){return{type:"DISCOUNTS_UPDATE",payload:e}}function updatePopularFilters(e){return{type:"POPULARFILTERS_UPDATE",payload:e}}function updateZone(e){return{type:"ZONES_UPDATE",payload:e}}function updateLandmark(e){return{type:"LANDMARKS_UPDATE",payload:e}}function updateAirportTrainstations(e){return{type:"AIRPORTANDRAILWAYSTATION_UPDATE",payload:e}}function updateMetro(e){return{type:"METROS_UPDATE",payload:e}}function updateCity(e){return{type:"CITYS_UPDATE",payload:e}}function updateHotArea(e){return{type:"HOTAREA_UPDATE",payload:e}}const toggleDirectSearchSwitch=e=>({type:"TOGGLE_DIRECTSEARCH_SWITCH",payload:e});var $a=k(78768),qa=k(39621).default,za=k(67294);function decorators_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}const decorators=e=>class extends qa{constructor(){var e;super(...arguments),e=this,this.options={},this.emitUpdate=function(_,k,I){let C=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],R=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];C&&e.logUserBehavies(I,_),R&&k&&k(_),Object.keys(_).forEach((k=>{const I=_[k].list?_[k].list:void 0;I&&I.forEach((_=>{_.isHitDirectSearch&&0===_.status&&(e.props.store.dispatch(clearKeyword()),e.props.store.dispatch(toggleDirectSearchSwitch(!1)))}))}))},this.ubtMapping={logListpageFilterItemAction:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_filteritem_action",logValue:{filteritem:Object.keys(e).toString(),action:"hide"},logDesc:"Filter operation"}),logListpageFilterItemClickClear:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_filteritem_click_clean",logValue:{filtername:Object.keys(e).toString()},logDesc:"filter item click clear"}),logListpageFilterLayerClickShowResult:e=>{var _,k,I,C,R,j,B,U,V,G,q,z,J,Q,ee,te,ne;let re=$a.Z.getState();const oe=Object.assign({},re.filterCondition,e);let ie=null===(_=oe.priceType)||void 0===_?void 0:_.list;const ae=null===(k=oe.priceRange)||void 0===k?void 0:k.priceLow,le=null===(I=oe.priceRange)||void 0===I?void 0:I.priceHigh;let se=null===(C=oe.rate)||void 0===C?void 0:C.list,ce=null===(R=oe.star)||void 0===R?void 0:R.list,ue=null===(j=oe.bookPolicy)||void 0===j?void 0:j.list,de=null===(B=oe.amenty)||void 0===B?void 0:B.list,pe=null===(U=oe.bedType)||void 0===U?void 0:U.list,he=null===(V=oe.brand)||void 0===V?void 0:V.list,fe=null===(G=oe.feature)||void 0===G?void 0:G.list,me=null===(q=oe.category)||void 0===q?void 0:q.list,ge=null===(z=oe.discount)||void 0===z?void 0:z.list,ve=oe.payType.list,ye=null==ve?void 0:ve.filter((e=>1===e.status)).map((e=>e.text)).toString(),be=null==ie?void 0:ie.filter((e=>1===e.status)).map((e=>e.text)).toString(),_e="";null==se||se.forEach((e=>{_e?_e>e.value&&(_e=e.value):_e=e.value}));let we=null==ce?void 0:ce.filter((e=>1===e.status)).map((e=>e.value)),Ee="",Se="";null==ue||ue.forEach((e=>{1===e.value&&e.status&&(Ee=1),2===e.value&&e.status&&(Se=1)}));let Oe=null==de?void 0:de.filter((e=>1===e.status)).map((e=>e.text)),Te=null==pe?void 0:pe.filter((e=>1===e.status)).map((e=>e.text)).toString(),ke=null==he?void 0:he.filter((e=>1===e.status)).map((e=>e.text)),Ie=null==fe?void 0:fe.filter((e=>1===e.status)).map((e=>e.text)),Ce=null==me?void 0:me.filter((e=>1===e.status)).map((e=>e.text));ge=null===(J=ge)||void 0===J?void 0:J.filter((e=>1===e.status)).map((e=>e.text));let Pe=["amenty","brand","feature","category"],Ne=new Map([["amenty","facility"],["brand","brands"],["feature","themehotels"],["category","staytypes"]]),De={pricefilter:{type:be||null,min:0===ae?null:ae,max:-1===le?null:le,currency:H.default.getByKey("cargo.currency")||""},commentscorefilter:{min:_e||null},star:we||null,includefreebreakfast:(null===(Q=oe.breakfast)||void 0===Q||null===(ee=Q.list[0])||void 0===ee?void 0:ee.status)?1:null,bookable:(null===(te=oe.bookable)||void 0===te||null===(ne=te.list[0])||void 0===ne?void 0:ne.status)?1:null,paytype:ye||null,freecancel:Ee||null,instantconfirm:Se||null,facility:Oe||null,bed:Te||null,brands:ke||null,staytypes:Ce||null,themehotels:Ie||null,benefitfilter:ge};var Ae;Object.keys(e).some((e=>Pe.includes(e)))&&(De[Ne.get(Object.keys(e)[0])]=null===(Ae=Object.values(e)[0].list)||void 0===Ae?void 0:Ae.filter((e=>e.status)).map((e=>e.text)).join(","));return{logKey:"ibu_htl_"+(0,Le.h8)()+"_filterlayer_click_showresult",logValue:De,logDesc:"filter floating layer click to show the results"}}},this.syncQuickFilter=(e,_,k)=>{const{popularFilters:I}=e;var C;_.length>0&&(null==I||null===(C=I.list)||void 0===C||C.forEach((e=>{"4|2"!=e.filterId&&"4|1"!=e.filterId||(e.status=0),_.forEach((_=>{e.filterId==_.filterId&&(e.status=_.status)}))})));0==_.length&&("bedType"==k&&I.list.forEach((e=>{"4"==e.type&&(e.status=0)})),"breakfast"==k&&I.list.forEach((e=>{"5"==e.type&&(e.status=0)})),"bookPolicy"==k&&I.list.forEach((e=>{"23"==e.type&&(e.status=0)})));let R=I.list.filter((e=>1==e.status));this.emitUpdate({filters:R},e.updateQuickFilters,"UPDATE_POPULAR")},this.updateMetroState=(e,_)=>{let k=!_.length;return e.lineList.map((e=>{e.status=0,k?e.status=0:e.title===_[0].lineTitle&&(e.status=1),e.siteList.map((e=>{e.status=0,e.status=k?0:e.value===_[0].value&&1}))})),e}}setRef(e){this.instanceComponent=e}logUserBehavies(e,_){e=e.toLowerCase();["brand","category","features","amenties"].filter((_=>e.includes(_))).length&&(e.includes("apply")&&this.$safeLog("logListpageFilterLayerClickShowResult",_),e.includes("clear")&&this.$safeLog("logListpageFilterItemClickClear",_))}getSelectedText(e){null==e||e.forEach((e=>{if(1===e.status||!0===e.status)return e.text}))}initCityRelactionOptions(){return{zones:{dispatch:updateZone,key:"zone"},metros:{dispatch:updateMetro,key:"metro"},landmarks:{dispatch:updateLandmark,key:"landmark"},locations:{dispatch:updateLocation,key:"location"},areas:{dispatch:updateAreas,key:"areas"},hotArea:{dispatch:updateHotArea,key:"hotArea"},airportTrainstations:{dispatch:updateAirportTrainstations,key:"airportTrainstation"},cityId:{dispatch:updateCity,key:"cityId"}}}getDispatchInfoByType(e){return this.initCityRelactionOptions()[e]||{}}clearOtherLocation(e,_,k){let C=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e=e.split(","),_=_||this.props.store.dispatch;let R=this.initCityRelactionOptions();Object.keys(R).filter((_=>!e.includes(_))).forEach((e=>{let j=R[e],B={};!k[e]&&(k[e]="metros"===e?{lineList:[],title:""}:{list:[],title:""}),k[e].lineList?k[e].lineList.map((e=>{!C&&(e.status=0),e.siteList.map((e=>{!C&&(e.status=0)}))})):"cityId"!==e&&k[e].list.map((e=>{!C&&(e.status=0)})),B[j.key]=function decorators_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?decorators_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):decorators_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}({},k[e]),_(j.dispatch(B))}))}asyncDataByDialog(e,_){let{data:{list:k,title:I}}=e,C=_.map((e=>e.value));return k.map((e=>{e.status=0,C.includes(e.value)&&(e.status=1)})),{list:k,title:I}}render(){return za.createElement(e,(0,C.Z)({},this.props,{setRef:this.setRef.bind(this),logUserBehavies:this.logUserBehavies.bind(this),clearOtherLocation:this.clearOtherLocation.bind(this),emitUpdate:this.emitUpdate.bind(this),asyncDataByDialog:this.asyncDataByDialog.bind(this),getDispatchInfoByType:this.getDispatchInfoByType.bind(this),syncQuickFilter:this.syncQuickFilter.bind(this),updateMetroState:this.updateMetroState.bind(this),renderDialog:renderDialog}))}},getFactor=(e,_,k)=>{if(k&&k.checkIn&&k.checkOut&&k.roomNum){let I=new Date(k.checkIn),C=(new Date(k.checkOut)-I)/864e5*k.roomNum,R=e.find((e=>1===e.status)),j=R&&R.value;if([1,3].includes(Number(_))&&[0,2].includes(Number(j)))return 1/C;if([1,3].includes(Number(j))&&[0,2].includes(Number(_)))return C}return 1};var Ya,Ja=k(39621).default,Xa=k(67294);let Qa=decorators(Ya=(0,Ni.$j)((e=>({priceRange:e.renderFilters.priceFilter,priceType:e.renderFilters.generalFilters[80],searchCondition:e.searchCondition})),{updateGeneralFilters:updateGeneralFilters,updatePriceFilter:updatePriceFilter})(Ya=class PriceTypeSelector extends Ja{constructor(){super(...arguments),this.getSelectedPriceType=e=>{if(!Array.isArray(e))return;const _=e.find((e=>1===e.status));return isNaN(Number(null==_?void 0:_.value))||Number(_.value)<0?void 0:_},this.getPriceTypeOptionList=()=>{var e;return Array.isArray(null===(e=this.props.priceType)||void 0===e?void 0:e.list)?this.props.priceType.list.map((e=>({text:e.text,value:e.value}))):[]},this.onChangePriceType=e=>{var _,k;const I=this.getSelectedPriceType(null===(_=this.props.priceType)||void 0===_?void 0:_.list),C=ae()(null===(k=this.props.priceType)||void 0===k?void 0:k.list).map((_=>(_.value===e?_.status=1:_.status=0,_))),R=this.getSelectedPriceType(C);this.props.emitUpdate({filters:R?[R]:[],type:"80"},this.props.updateGeneralFilters,"ibu_htl_listpage_price_type");let{priceHigh:j,priceLow:B}=this.props.priceRange;this.props.updatePriceFilter({priceHigh:j,priceLow:B,factor:getFactor(C,null==I?void 0:I.value,this.props.searchCondition)}),this.$safeLog("logListpagePriceChoiceType",{list:C},this.props),ke.y7.set("price_type",e)},this.ubtMapping={logListpagePriceChoiceType:U.O3,logListpagePriceChoiceRange:U.Fc}}render(){var e;const _=this.getSelectedPriceType(null===(e=this.props.priceType)||void 0===e?void 0:e.list),k=this.getPriceTypeOptionList();return Xa.createElement("div",{className:"price-type-selector"},Xa.createElement(DropdownSelector,{currentValue:null==_?void 0:_.value,options:k,onChange:this.onChangePriceType}))}})||Ya)||Ya;var el=k(39621).default,tl=k(67294);class Filter extends el{constructor(e){super(e),this.renderIcon=e=>{let{value:_,iconType:k}=e;const I="Diamond"===k;let C=new Array(Number(_)).fill("");return tl.createElement(tl.Fragment,null,C.map(((e,_)=>tl.createElement(B.Z,{style:{color:"#ffb400"},key:_,d:e,type:I?"ic_new_diamond":"ic_new_star"}))))},this.renderResultTitle=()=>{const e=(0,Ui.Z)(this.props,"longList.isSSR")||!1,_=(0,Ui.Z)(this.props,"longList.hotelListAddtionInfo.hotelTotalNum")||0,k=(0,Ui.Z)(this.props,"longList.metaHotel.hotelBasicInfo.hotelId")||(0,Ui.Z)(this.props,"metaHotel.hotelBasicInfo.hotelId");let I=e?_:(0,Ha.C0)(this.props.searchCondition);k&&(I+=1);return this.$translatePlural("hotel_list_found",I)},this.renderChoosen=e=>e.map(((e,_)=>{const{type:k}=e,I="16"==k,C="6"===k;let R=e.text;if(C&&(0,q.rq)(this)){let _=e.text.match(/[\d]|[,]|[.]/g).join(""),k=2*Number(_.replace(",","."));R=e.text.replace(_,k)}return I&&(R=this.renderIcon(e)),tl.createElement(Pa,{key:_,name:R,data:e})})),this.hasBrg=!1}render(){const{data:e}=this.state,{isMapPage:_,showCma:k,metaHotel:I={},breathing:C}=this.props;let R=(0,Ui.Z)(this.props,"longList.hotelList");const H=!((null==R?void 0:R.length)>0),U=((0,Oo.Z)("searchType",this.ctx,""),(0,q.JT)(this));return tl.createElement("div",{className:j()("current-filter-wrap-v8",{map:_})},tl.createElement("div",{className:"filter-title ".concat(U?"version-b":""," ")},_?null:tl.createElement("h3",{className:H?"no-result":"",dangerouslySetInnerHTML:{__html:this.renderResultTitle()}}),tl.createElement("div",{className:"selector-container"},tl.createElement(Fa,null),tl.createElement(Qa,null))),k&&((null==R?void 0:R.length)>0||I)?tl.createElement("div",{className:"cmaTip"},tl.createElement("span",{className:"cmaTip-title"},this.$translate("key.hotel.cma.sort.explanation")),tl.createElement(B.Z,{type:"ic_new_info_line",className:"cmaTip-icon",onMouseOver:this.showCmaTips,onMouseOut:this.mouseOut})):null,!!e.length&&tl.createElement("div",{className:"filter-current"},tl.createElement("div",{className:"filter-selected"},tl.createElement("span",null,this.$translate("key.hotel.list.page.filter.selected")+":")),this.renderChoosen(e),tl.createElement("div",{className:"clear-all clearfix",onClick:this.clearAll},tl.createElement(B.Z,{type:"ic_trash"}),tl.createElement("span",{className:"clear-all__text"},this.$translate("key.hotel.online.list.clear.bottom")))),tl.createElement(Za,{breathing:C}))}}var nl,rl,ol=k(67294);let il=(0,Ni.$j)((e=>{const{filterCondition:_,longList:k,renderFilters:I,searchCondition:C,metaHotel:R}=e;return{longList:k,filterCondition:_,renderFilters:I,searchCondition:C,metaHotel:R}}))(((rl=class CurrentFilter extends Filter{constructor(e){super(e),this.initData=e=>{var _;let k=initFilterData(e.renderFilters,this.ctx);const I=(null===(_=this.state.data)||void 0===_?void 0:_.length)!==(null==k?void 0:k.length)||!1;this.setState({data:k},(()=>{I&&this.$safeLog("logFilterItemCount",null==k?void 0:k.length)}))},this.clearAll=()=>{ke.y7.remove("feature"),this.props.dispatch(actionCreator_removeALLFilters()),this.props.dispatch({type:"SEARCHBARDATA_CLEAR_KEYWORD"}),this.$safeLog("logListFilterClearAll"),sendFilterCancelTrace({filtertype:"",filtername:"",filterid:""})},this.mouseOut=()=>{this.$component("ToolTip").action("hide")},this.showCmaTips=e=>{const _=ol.createElement("div",null,this.$translate("key.hotel.list.page.cma.sort.explanation.detail2.online")),k=this.$component("ToolTip"),I={content:_,target:e.target,triPlacement:"middle",zIndex:10002,maxWidth:"550px",borderRadius:8};k.action("show",I)},this.ubtMapping={logFilterItemCount:U.Kt,logListFilterClearAll:U.aJ};const _=initFilterData(e.renderFilters,this.ctx);this.state={data:_||[]}}componentDidMount(){var e;this.$safeLog("logFilterItemCount",null===(e=this.state.data)||void 0===e?void 0:e.length)}UNSAFE_componentWillReceiveProps(e){this.initData(e)}}).defaultProps={filterCondition:{}},rl.propTypes={filterCondition:_e().object},nl=rl))||nl;var al,ll,sl=k(68361),cl=k(67294);let ul=(0,Di.zy)((e=>{let{renderViewFilters:_,onChange:k}=e;return{data:(null==_?void 0:_.sortFilters)||[],renderFilters:_,provideValueChange:k}}))(al=(0,Ni.$j)((e=>{var _;const{filterCondition:k,initData:I}=e;return{type:null==k||null===(_=k.star)||void 0===_?void 0:_.type,locale:(null==I?void 0:I.locale)||""}}))(((ll=class TabV8 extends tab_v8_view_View{constructor(e){super(e),this.sortRef=cl.createRef(),this.componentWillUnmount=()=>{document.removeEventListener("scroll",this.scrollFix)},this.update=(e,_)=>{this.setState({currentIndex:e});let k=_.filter((e=>e.status))||[];this.props.dispatch(updateGeneralFilters({filters:k,type:"17"})),this.$safeLog("logListpageSortChoice",_)},this.updateSortResult=e=>{this.props.provideValueChange({type:sl.j.SORT,value:{filterId:null==e?void 0:e.filterId,value:e.value}}),this.setState({currentSelectedItem:[e],visible:!1})},this.showChange=e=>{const{currentIndex:_,showData:k,hideData:I}=this.state;if(e===_)return;let C=k.map(((_,k)=>Object.assign({},_,{status:e===k?1:0})));this.update(e,[...C,...I])},this.hideChange=(e,_)=>{let{showData:k,hideData:I}=this.state;k=ae()(k),k.forEach((e=>e.status=0));const C=k.pop();C.status=0,e.status=1,k.push(e),I.splice(_,1,C),this.update(limitLen-1,[...k,...I])},this.scrollFix=(0,Ie.P2)((()=>{const e=document.querySelector(".tab-sort-placeholder-v8"),_=(null==e?void 0:e.getBoundingClientRect().top)||0,k=document.querySelector(".list-search-container"),I=(null==k?void 0:k.clientHeight)||0;_<=I?this.setState({needFixed:!0,fixedTop:I}):this.setState({needFixed:!1})}),10),this.ubtMapping={logListpageSortChoice:logListpageSortChoice};const{data:_,locale:k}=e;this.state=Object.assign({currentIndex:-1,visible:!1,showData:[],hideData:[],needFixed:!1,fixedTop:0},{currentIndex:initCurrentIndex(_,k)},splitSortData(_,k),{currentSelectedItem:splitSortData(_,k).allData.filter((e=>(null==e?void 0:e.isShow)&&1===(null==e?void 0:e.status)))||[]})}static getDerivedStateFromProps(e){const{data:_,locale:k}=e;return Object.assign({},{currentIndex:initCurrentIndex(_,k)},splitSortData(_,k),{currentSelectedItem:_.filter((e=>(null==e?void 0:e.isShow)&&1===(null==e?void 0:e.status)))||[]})}componentDidMount(){document.addEventListener("click",(e=>{this.sortRef.current&&!this.sortRef.current.contains(e.target)&&this.setState({visible:!1})}));!H.default.getByKey("listPageFilterFixed",this.ctx)&&document.addEventListener("scroll",this.scrollFix)}}).defaultProps={data:[],type:""},ll.propTypes={data:_e().array},al=ll))||al)||al;var dl,pl=k(39621).default,hl=k(67294);let fl=decorators(dl=(0,Di.zy)((e=>{let{renderViewFilters:_,onChange:k}=e;return{priceTypeOptions:null==_?void 0:_.amountShowTypes,provideValueChange:k}}))(dl=(0,Ni.$j)((e=>({searchCondition:e.searchCondition})),{updateGeneralFilters:updateGeneralFilters,updatePriceFilter:updatePriceFilter})(dl=class PriceTypeSelector extends pl{constructor(){super(...arguments),this.getSelectedPriceType=e=>{if(!Array.isArray(e))return;const _=e.find((e=>1===e.status));return isNaN(Number(null==_?void 0:_.value))||Number(_.value)<0?void 0:_},this.getPriceTypeOptionList=()=>{const{priceTypeOptions:e}=this.props;return Array.isArray(e)?e.map((e=>({text:e.text,value:e.value}))):[]},this.onChangePriceType=e=>{var _;const k=ae()(null===(_=this.props)||void 0===_?void 0:_.priceTypeOptions).map((_=>(_.value===e?_.status=1:_.status=0,_))),I=this.getSelectedPriceType(k);this.props.provideValueChange({type:sl.j.PRICE_TYPE,value:{filterId:null==I?void 0:I.filterId,value:I.value}}),this.$safeLog("logListpagePriceChoiceType",{list:k},this.props),ke.y7.set("price_type",e)},this.ubtMapping={logListpagePriceChoiceType:U.O3,logListpagePriceChoiceRange:U.Fc}}render(){var e;const _=this.getSelectedPriceType(null===(e=this.props)||void 0===e?void 0:e.priceTypeOptions),k=this.getPriceTypeOptionList();return hl.createElement("div",{className:"price-type-selector"},hl.createElement(DropdownSelector,{currentValue:null==_?void 0:_.value,options:k,onChange:this.onChangePriceType}))}})||dl)||dl)||dl;var ml,gl=k(39621).default,vl=k(67294);let yl=(0,Di.zy)((e=>{let{onChange:_}=e;return{onChange:_}}))(ml=(0,Ni.$j)((e=>({searchBarData:e.searchBarData})))(ml=class SelectedTags extends gl{constructor(e){super(e),this.close=()=>{var e,_,k,I,C;const R=Ce.Z&&H.default.getByKey("pageName"),{data:j,dispatch:B}=this.props,U="1"===(0,Ne.Z)("directSearch");if(R||(B(toggleRecommendLastPage(!1)),B(toggleNormalLastPage(!1))),this.props.onChange({value:j}),U)j.isHitDirectSearch&&(B(clearKeyword()),B(updateSeachConditionDirectSearch(0)));else{if(String((0,ci.Z)(j,"value",""))===(0,Ne.Z)("optionId")){B(clearKeyword());(new OptionType).isProvinceDistrict()||resetOptionInfo()}}"bookable"===j.key&&1===j.value&&B(actionCreator_updateBookableVisible(!0)),"1"===j.key&&"1189"==j.value&&ke.y7.remove("feature"),"star"===j.key&&B(actionCreator_updateStarRate([])),"priceRange"===j.key&&(B(actionCreator_updateLowPrice(0)),B(actionCreator_updateHighPrice(-1))),(null===(e=this.props)||void 0===e||null===(_=e.searchBarData)||void 0===_||null===(k=_.search)||void 0===k||null===(I=k.item)||void 0===I||null===(C=I.data)||void 0===C?void 0:C.filterId)===(null==j?void 0:j.filterId)&&B({type:"SEARCHBARDATA_CLEAR_KEYWORD"}),"15"!==(null==j?void 0:j.key)&&sendFilterCancelTrace({filtertype:null==j?void 0:j.type,filtername:null==j?void 0:j.text,filterid:null==j?void 0:j.filterId})}}render(){const{name:e,data:_}=this.props;return vl.createElement("div",{className:"choosen-item-v8",onClick:this.close},vl.createElement("span",{className:j()("name font-bold",{priceName:"15"===(null==_?void 0:_.key)})},e),vl.createElement(B.Z,{type:"ic_new_close_line",className:"close"}))}})||ml)||ml;var bl=k(67294);const selectedItem=e=>{let{$translate:_,choosenData:k,Icon:I}=e;const{clearAllFilters:C}=(0,he.useContext)(Di.fo);return bl.createElement("div",{className:"filter-current"},bl.createElement("div",{className:"filter-selected"},bl.createElement("span",null,_("key.hotel.list.page.filter.selected")+":")),k,bl.createElement("div",{className:"clear-all clearfix",onClick:C},bl.createElement(I,{type:"ic_trash"}),bl.createElement("span",{className:"clear-all__text"},_("key.hotel.online.list.clear.bottom"))))};var _l=k(39621).default,wl=k(67294);class view_Filter extends _l{constructor(e){super(e),this.renderIcon=e=>{let{value:_,iconType:k}=e;const I="Diamond"===k;let C=new Array(Number(_)).fill("");return wl.createElement(wl.Fragment,null,C.map(((e,_)=>wl.createElement(B.Z,{style:{color:"#ffb400"},key:_,d:e,type:I?"ic_new_diamond":"ic_new_star"}))))},this.renderResultTitle=()=>{const e=(0,Ui.Z)(this.props,"longList.isSSR")||!1,_=(0,Ui.Z)(this.props,"longList.hotelListAddtionInfo.hotelTotalNum")||0,k=(0,Ui.Z)(this.props,"longList.metaHotel.hotelBasicInfo.hotelId")||(0,Ui.Z)(this.props,"metaHotel.hotelBasicInfo.hotelId");let I=e?_:(0,Ha.C0)(this.props.searchCondition);k&&(I+=1);return this.$translatePlural("hotel_list_found",I)},this.renderChoosen=e=>e.map(((e,_)=>{const{type:k}=e,I="16"==k,C="6"===k;let R=e.text;if(C&&(0,q.rq)(this)){let _=e.text.match(/[\d]|[,]|[.]/g).join(""),k=2*Number(_.replace(",","."));R=e.text.replace(_,k)}return I&&(R=this.renderIcon(e)),wl.createElement(yl,{key:_,name:R,data:e})})),this.hasBrg=!1}render(){const{data:e}=this.state,{isMapPage:_,showCma:k,metaHotel:I={},breathing:C}=this.props;let R=(0,Ui.Z)(this.props,"longList.hotelList");const H=!((null==R?void 0:R.length)>0),U=(0,q.JT)(this);return wl.createElement("div",{className:j()("current-filter-wrap-v8",{map:_})},wl.createElement("div",{className:"filter-title ".concat(U?"version-b":""," ")},_?null:wl.createElement("h3",{className:H?"no-result":"",dangerouslySetInnerHTML:{__html:this.renderResultTitle()}}),wl.createElement("div",{className:"selector-container"},wl.createElement(ul,null),wl.createElement(fl,null))),k&&((null==R?void 0:R.length)>0||I)?wl.createElement("div",{className:"cmaTip"},wl.createElement("span",{className:"cmaTip-title"},this.$translate("key.hotel.cma.sort.explanation")),wl.createElement(B.Z,{type:"ic_new_info_line",className:"cmaTip-icon",onMouseOver:this.showCmaTips,onMouseOut:this.mouseOut})):null,!!(null==e?void 0:e.length)&&wl.createElement(selectedItem,{$translate:this.$translate,choosenData:this.renderChoosen(e),Icon:B.Z}),wl.createElement(Za,{breathing:C}))}}var El,Sl,Ol=k(67294);let Tl=(0,Di.zy)((e=>{let{slectedTagList:_}=e;return{slectedTagList:_}}))(El=(0,Ni.$j)((e=>{const{filterCondition:_,longList:k,renderFilters:I,searchCondition:C,metaHotel:R}=e;return{longList:k,filterCondition:_,renderFilters:I,searchCondition:C,metaHotel:R}}))(((Sl=class CurrentFilter extends view_Filter{constructor(e){super(e),this.initData=e=>{var _;let k=e.slectedTagList;const I=(null===(_=this.state.data)||void 0===_?void 0:_.length)!==(null==k?void 0:k.length)||!1;this.setState({data:k},(()=>{I&&this.$safeLog("logFilterItemCount",null==k?void 0:k.length)}))},this.mouseOut=()=>{this.$component("ToolTip").action("hide")},this.showCmaTips=e=>{const _=Ol.createElement("div",null,this.$translate("key.hotel.list.page.cma.sort.explanation.detail2.online")),k=this.$component("ToolTip"),I={content:_,target:e.target,triPlacement:"middle",zIndex:10002,maxWidth:"550px",borderRadius:8};k.action("show",I)},this.ubtMapping={logFilterItemCount:U.Kt,logListFilterClearAll:U.aJ};const _=e.slectedTagList;this.state={data:_||[]}}componentDidMount(){var e;this.$safeLog("logFilterItemCount",null===(e=this.state.data)||void 0===e?void 0:e.length)}UNSAFE_componentWillReceiveProps(e){this.initData(e)}}).defaultProps={filterCondition:{}},Sl.propTypes={filterCondition:_e().object},El=Sl))||El)||El;var kl=k(76151),Il=k(39621).default,Cl=k(67294);class view_HotelTag extends Il{constructor(e){super(e)}render(){const{hotelTag:e}=this.props;return Cl.createElement("div",{className:"list-card-tag"},Cl.createElement("div",{className:"m-hotelTag"},Cl.createElement("div",{className:j()("m-hotelTag_list","minNoiseListCardHotelTag")},Cl.createElement("span",{className:"m-hotelTag_list_content"},e.tagName))))}}class HotelTag extends view_HotelTag{constructor(e){super(e)}componentDidMount(){this.$safeLog()}}var Pl=k(39621).default,Ll=k(67294);class HotelFeatureInfo extends Pl{constructor(e){super(e),this.renderHotelCategory=()=>{const{featureInfo:e=[],hotelCategory:_=null}=this.props;return _?(null==_?void 0:_.isDisplay)&&(null==_?void 0:_.categoryName)?Ll.createElement("div",{className:"m-featureInfo"},Ll.createElement("span",{className:"m-featureInfo_content"},null==_?void 0:_.categoryName)):null:(null==e?void 0:e.length)?e.filter((e=>!["highlight_built","highlight_renovated","MuslimFriendly","muslim_friendly"].includes(e.featureType))).map(((e,_)=>Ll.createElement("div",{className:"m-featureInfo",key:_},Ll.createElement("span",{className:"m-featureInfo_content"},e.featureName)))):null}}render(){const e=this.renderHotelCategory();return e?Ll.createElement("div",{className:"list-card-featureInfo"},e):null}}const Nl=10001,Dl=310005,Al=310006,Rl=310007,xl=310008,jl=310009,Bl={[202333]:"m-hotelTag_list",[10041]:"m-hotelTag_lowCarbon",[10039]:"m-hotelTag_muslin",[Nl]:"highlight-tag",[40006]:"discount-tag",[400030]:"promotion-tag",[400031]:"promotion-tag",[400032]:"promotion-tag",[400033]:"promotion-tag",[400034]:"promotion-tag",[400035]:"promotion-tag",[400036]:"promotion-tag",[400030]:"promotion-tag",[10009]:"encourage-tag-enhanced",[10011]:"encourage-tag",[Dl]:"silver-member-tag",[Al]:"gold-member-tag",[Rl]:"platinum-member-tag",[xl]:"diamond-member-tag",[jl]:"golden-diamond-member-tag"},Ml={[Dl]:"https://dimg04.tripcdn.com/images/1re5k12000ghrtz3qD1E4.png",[Al]:"https://dimg04.tripcdn.com/images/1re3p12000ghrrk5477B9.png",[Rl]:"https://dimg04.tripcdn.com/images/1re6d12000ghrqx6u19E0.png",[xl]:"https://dimg04.tripcdn.com/images/1re2712000ghrre93FD0C.png",[jl]:"https://dimg04.tripcdn.com/images/1re2212000ghru0o83F52.png"};var Fl=k(39621).default,Hl=k(67294);class view_HotelHeadTag extends Fl{constructor(e){super(e),this.getTagClassName=e=>e?Bl[e]:"m-hotelTag_list"}render(){const{hotelTagInfo:e}=this.props,{tagTitle:_,tagTemplateId:k,tagIcon:I}=e,C=this.getTagClassName(k);return Hl.createElement("div",{className:"list-card-tag"},Hl.createElement("div",{className:"m-hotelTag"},Hl.createElement("div",{className:C},I&&_&&Hl.createElement("img",{src:I,className:"m-hotelTag_list_lowCarbon_icon"}),Hl.createElement("span",{className:"m-hotelTag_list_content"},_))))}}class HotelHeadTag extends view_HotelHeadTag{constructor(e){super(e)}componentDidMount(){this.$safeLog()}}var Kl=k(62455),Ul=k(39621).default,Zl=k(67294);class title_view_View extends Ul{render(){var e,_;const{type:k}=this.props,{hotelBasicInfo:{medalInfo:I={},hotelName:C="",hotelNames:R=[]},hotelStarInfo:B={},hotelBasicInfo:H,hotelFeatureTagInfo:U=[],hotelCategory:V=null,hotelDecorateInfo:G={},hotelNameTags:z=[]}=this.props.card;let J="";const Q="meta"==k,ee=null==U?void 0:U.find((e=>"MuslimFriendly"===(null==e?void 0:e.featureType)||"muslim_friendly"===(null==e?void 0:e.featureType)));switch(null==B?void 0:B.starType){case 0:J="diamond";break;case 1:J="star";break;case 2:J="circle";break;default:J="diamond"}const te=(null==R?void 0:R[0])||C,ne=null==R?void 0:R[1];const{rightClickLink:re}=this.state,oe=(0,q.fo)(this);return Zl.createElement("div",{className:"list-card-tagAndTitle"},Zl.createElement("div",{className:j()("list-card-title",{"list-cardb-title":(0,q.H5)(this)||(0,q.Lf)(this)}),onClick:e=>{this.props.toDetail(k,"title"),e.stopPropagation(),e.preventDefault()}},te?re?Zl.createElement("a",{href:re,className:"name"},te):Zl.createElement("span",{className:"name"},te):null,Zl.createElement(HotelFeatureInfo,{featureInfo:U,hotelCategory:V}),Zl.createElement(kl.Z,{type:J.toLowerCase(),num:null==B?void 0:B.star,iconStyle:{color:"#ffb400"}}),Number(I.medalType)>3?I.badgeHover?Zl.createElement("span",{className:"thumb thumb-".concat(I.medalType),onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut}):Zl.createElement("span",{className:"thumb thumb-".concat(I.medalType)}):null,z.length>0?z.map(((e,_)=>(e.tagIcon=Q?Kl.c4[e.tagTemplateId]:e.tagIcon,Zl.createElement(HotelHeadTag,{key:_,hotelTagInfo:e})))):Zl.createElement(Zl.Fragment,null,!(0,Pe.xb)(G)&&G.tagName?Zl.createElement(HotelTag,{hotelTag:G}):!(0,Pe.xb)(U)&&!(0,Pe.xb)(null==U||null===(e=U.filter((e=>["highlight_built","highlight_renovated"].includes(e.featureType))))||void 0===e?void 0:e[0])&&Zl.createElement(HotelTag,{hotelTag:null===(_=U.filter((e=>["highlight_built","highlight_renovated"].includes(e.featureType))).map((e=>({tagName:e.featureName}))))||void 0===_?void 0:_[0]}),ee&&ee.featureName&&Zl.createElement("div",{className:"list-card-tag"},Zl.createElement("div",{className:"m-hotelTag"},Zl.createElement("div",{className:"m-hotelTag_muslin"},Zl.createElement("span",{className:"muslim_tag"},ee.featureName))))),(null==H?void 0:H.isAdHotel)&&Zl.createElement("span",{className:"ad_tag",onMouseOver:e=>{e.persist(),this.adMouseOver(e)},onMouseOut:this.onMouseOut},this.$translate("key.hotel.list.card.ad"))),oe?null:ne?Zl.createElement("div",{className:"list-card-subTitle"},ne):null)}}var Vl=k(94361),Wl=k(39621).default,Gl=k(67294);class AdInfoLoading extends Wl{constructor(e){super(e)}loadingItemComponent(e){return Gl.createElement("div",{className:"ad-loading-item",style:{width:e}})}loadingComponent(){return Gl.createElement(Gl.Fragment,null,Gl.createElement("div",{className:"ad-loading-one"},this.loadingItemComponent("112px"),this.loadingItemComponent("400px"),this.loadingItemComponent("400px")),Gl.createElement("div",{className:"ad-loading-two"},this.loadingItemComponent("112px"),this.loadingItemComponent("400px")),Gl.createElement("div",{className:"ad-loading-three"},this.loadingItemComponent("112px"),this.loadingItemComponent("400px")))}render(){return Gl.createElement("div",{className:"adInfo"},this.loadingComponent())}}var $l=k(39621).default,ql=k(67294);class AdsData extends $l{constructor(e){super(e)}adsDataCompoent(){const{adPublisher:e,adPayer:_}=this.props,k=!e||!_;return ql.createElement(ql.Fragment,null,ql.createElement("div",{className:j()("adReason",{onlyAdReason:k})},ql.createElement("div",{className:"ad-title"},this.$translate("key.88801001.hotel.ad.rec1")),ql.createElement("ul",{className:"ad-ul"},ql.createElement("li",{className:"ad-info-data"},this.$translate("key.88801001.hotel.ad.rec2")),ql.createElement("li",{className:"ad-info-data"},this.$translate("key.88801001.hotel.ad.rec3")))),k?null:ql.createElement(ql.Fragment,null,ql.createElement("div",{className:"adPublisher"},ql.createElement("div",{className:"ad-title"},this.$translate("key.88801001.hotel.ad.Advertiser1")),ql.createElement("div",{className:"ad-info-data"},e)),ql.createElement("div",{className:"adPayer"},ql.createElement("div",{className:"ad-title"},this.$translate("key.88801001.hotel.ad.payer1")),ql.createElement("div",{className:"ad-info-data"},_))))}loadingErrorComponent(){return ql.createElement(ql.Fragment,null,this.$translate("key.88801001.list.page.ad.error"))}render(){const{showError:e}=this.props;return ql.createElement("div",{className:"adInfo"},e?this.loadingErrorComponent():this.adsDataCompoent())}}var zl,Yl,Jl=k(67294),Xl=k(48467).default;let Ql=(0,Vl.ZP)(((Yl=class Title extends title_view_View{constructor(e){super(e),this.onMouseOver=e=>{const _=this.$component("ToolTip"),{hotelBasicInfo:{medalInfo:k={}}}=this.props.card,I={content:Jl.createElement("p",{className:"badgeHover",style:{maxWidth:350}},k.badgeHover),target:e.target,triPlacement:"middle"};_.action("show",I)},this.adMouseOver=this.debounce((e=>{e.persist(),this.adShow(e)}),"T"===(null===H.default||void 0===H.default?void 0:H.default.getByKey("qconfigData.isSwitchAdDsa"))?1e3:500),this.adShow=async e=>{const _=H.default.getByKey("cargo.locale")||"",k="adInfo_".concat(_),I=this.$component("ToolTip");if(!("T"===H.default.getByKey("qconfigData.isSwitchAdDsa"))){const _={content:this.$translate("key.hotel.list.page.ad.explanation"),target:e.target,triPlacement:"middle"};return void I.action("show",_)}const{hotelBasicInfo:{adTraceid:C,hotelId:R}}=this.props.card,j=ke.y7.get(k)||[];if((null==j?void 0:j.length)>0){const _=null==j?void 0:j.find((e=>e.hotelId===R)),k=null==_?void 0:_.adPublisher,C=null==_?void 0:_.adPayer,B={content:Jl.createElement(AdsData,{adPublisher:k,adPayer:C}),target:e.target,triPlacement:"middle",delayTime:1,borderRadius:4};if(_)return ma({hotelId:R,status:"success"}),void I.action("show",B)}e.persist();const B={content:Jl.createElement(AdInfoLoading,null),target:e.target,triPlacement:"middle",borderRadius:4};I.action("show",B),e.persist();const U={hotelId:R,adTraceId:C},{data:V}=await Xl({url:"/getAdDsaData",bff:!0,data:U,bffV3:!0,bffCode:31454}),{errorCode:G,adPublisher:q,adPayer:z}=V||{},J=0!==G;if(J)ma({hotelId:R,status:"fail"});else{const e={hotelId:R,adPublisher:q,adPayer:z};ke.y7.set(k,[...j,e]),ma({hotelId:R,status:"success"})}const Q={content:Jl.createElement(AdsData,{adPublisher:q,adPayer:z,showError:J}),target:e.target,triPlacement:"middle",delayTime:1,borderRadius:4};I.action("show",Q)},this.onMouseOut=()=>{this.$component("ToolTip").action("hide")},this.state={rightClickLink:null},this.receiveChannel=null,this.toDetailChannel=null}debounce(e,_){let k;return function(){for(var I=arguments.length,C=new Array(I),R=0;R<I;R++)C[R]=arguments[R];const j=this;clearTimeout(k),k=setTimeout((()=>{e.apply(j,C)}),_)}}componentDidUpdate(e){var _,k;if((null===(_=e.trace)||void 0===_?void 0:_.traceLogId)!==(null===(k=this.props.trace)||void 0===k?void 0:k.traceLogId)){var I,C;const e=(null===(I=this.props)||void 0===I?void 0:I.toDetailByRightClick(this.props.type,"title"))+"&isRightClick=T",_=H.default.getByKey("cargo.locale")||"",k=(null===(C=H.default.getByKey("qconfigData.rightClickToDetailLocale"))||void 0===C?void 0:C.split(","))||[];""!==_&&k.includes(_)&&"T"===H.default.getByKey("aLinkSwitch")&&"undefined"!=typeof BroadcastChannel&&this.setState({rightClickLink:e})}}componentDidMount(){var e,_;const{type:k,trace:I={},card:C={}}=this.props,{traceLogId:R}=I,j=(null===(e=this.props)||void 0===e?void 0:e.toDetailByRightClick(k,"title"))+"&isRightClick=T",B=H.default.getByKey("cargo.locale")||"",U=(null===(_=H.default.getByKey("qconfigData.rightClickToDetailLocale"))||void 0===_?void 0:_.split(","))||[];""!==B&&U.includes(B)&&"T"===H.default.getByKey("aLinkSwitch")&&"undefined"!=typeof BroadcastChannel&&(this.setState({rightClickLink:j}),this.receiveChannel=new BroadcastChannel("detailToList"),this.toDetailChannel=new BroadcastChannel("listToDetail"),this.receiveChannel.addEventListener("message",(e=>{var _,I;const{rc_masterhotelid_tracelogid:j,hotelId:B}=(null==e?void 0:e.data)||{};if(j===R&&B===(null==C||null===(_=C.hotelBasicInfo)||void 0===_||null===(I=_.hotelId)||void 0===I?void 0:I.toString())){var H;null===(H=this.props)||void 0===H||H.otherLogicFunc(k),(0,Le.ap)("htl_t_online_dtlpage_post_message_to_listpage",{actionType:"click",rc_masterhotelid_tracelogid:j,hotelId:B});const{rmlistqid:e,getqid:_}=this.props.getQidData(),I={sessionData:this.props.getSessionData(k),rc_masterhotelid_tracelogid:j,hotelId:B,rmlistqid:e,getqid:_};this.toDetailChannel.postMessage(I)}})))}componentWillUnmount(){if("undefined"!=typeof BroadcastChannel)try{this.receiveChannel&&this.receiveChannel.close(),this.toDetailChannel&&this.toDetailChannel.close()}catch(e){}}}).defaultProps={base:{starType:"",star:0,hotelName:"",hotelId:0,book:"",badge:"",badgeHover:""}},Yl.propTypes={base:_e().shape({starType:_e().string,star:_e().number,hotelName:_e().string,hotelId:_e().number,book:_e().string,badge:_e().string,badgeHover:_e().string})},zl=Yl))||zl;var es=k(39621).default,ts=k(67294);class transport_view_View extends es{constructor(){super(...arguments),this.ubtMapping={logHotelMapClick:logHotelMapClick},this.onMouseOver=(e,_)=>{if(e){const k=this.$component("ToolTip"),I={target:_.target,content:ts.createElement("div",{className:"metro_hover"},e.map(((e,_)=>ts.createElement("div",{key:_,className:"metro_hover_item"},e.content)))),maxWidth:"768px"};k&&k.action("show",I)}},this.onMouseOut=()=>{const e=this.$component("ToolTip");e&&e.action("hide")},this.showMap=e=>{var _;const{toggleShowMap:k=(()=>{}),card:I}=this.props;this.$safeLog("logHotelMapClick",null==I||null===(_=I.hotelBasicInfo)||void 0===_?void 0:_.hotelId),k(I),e.stopPropagation()}}render(){const{card:e}=this.props,_=(0,ci.Z)(e.positionInfo,"positionDesc",""),k=_&&_.split("|")||[],I=(0,q.Lf)(this)?"a-location2x":"ic_new_map";return ts.createElement("div",{className:"list-card-transport-v8"},ts.createElement("p",{className:"transport"},k.length?ts.createElement("span",{className:"trans-icon"},ts.createElement(B.Z,{type:I,className:"map-icon"})):null,function renderPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?ts.createElement(ts.Fragment,null,e.map(((e,_)=>ts.createElement(ts.Fragment,{key:_},ts.createElement("span",null,e),ts.createElement("span",{className:"split-dot"}))))):null}(k),ts.createElement("span",{className:"map",onClick:this.showMap},this.$translate("key.hotel.sort.viewmap"))))}}var ns=k(67294);class Transport extends transport_view_View{constructor(e){super(e),this.poi=e=>{let _=/(<strong>)(.*)(<\/strong>)/;if(_.test(e)){const k={__html:"".concat(e.replace(_,"<strong>".concat(e.match(_)[2],"</strong>")))};return ns.createElement("span",{dangerouslySetInnerHTML:k})}return e}}}Transport.defaultProps={position:{cityId:-1,area:"",poi:"",lat:"",lng:""},transport:{desc:"",hover:[],type:0}},Transport.propTypes={positon:_e().shape({cityId:_e().number,area:_e().string,poi:_e().string,lat:_e().string,lng:_e().string}),transport:_e().shape({desc:_e().string,hover:_e().array,type:_e().number})};var rs=k(39621).default,os=k(67294);class Line extends rs{render(){let{number:e,content:_,scoreAvg:k}=this.props;const I=e.replace(",",".")/5*100,C=(0,q.dB)(this)&&k&&Number(e)>Number(k),R=C?"#009dab":"#1136a6";e=e?this.$localization.formatNumber((0,q.rq)(this)?2*Number(e.toString().replace(",",".")):e,{digit:1,digitMin:1}):e;const B=(0,Pe.xb)(k)?0:(null==k?void 0:k.replace(",","."))/5*100,U=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx))?{right:"calc(".concat(B,"% - 7px)")}:{left:"calc(".concat(B,"% - 7px)")};return os.createElement("div",{className:"line"},os.createElement("p",{className:"describe"},os.createElement("span",{className:"category"},_),os.createElement("span",{className:"score",style:{color:R}},C&&os.createElement(Ee.Z,{type:"High"}),"10.0"===e||"10,0"===e?10:e)),os.createElement("div",{className:j()("bg",{mb8:!(0,q.dB)(this)&&k})},os.createElement("p",{className:"hightlight",style:{width:"".concat(I,"%"),background:R}}),!(0,q.dB)(this)&&k&&os.createElement("img",{className:"avgIcon",style:U,src:"https://ak-d.tripcdn.com/images/1re3z12000dpqu7rpEE0A.png"})))}}class Score extends rs{constructor(e){super(e)}render(){const{avgDesc:e,data:_}=this.props,k=_.some((e=>!(0,Pe.xb)(e.scoreAvg)&&Number(e.number)>Number(e.scoreAvg)));return os.createElement("div",{className:"comment-score-wrap-v8"},_.map(((e,_)=>os.createElement(Line,(0,C.Z)({},e,{key:_})))),!(0,q.dB)(this)&&e&&os.createElement("div",{className:"avgDesc"},os.createElement("img",{className:"icon",src:"https://ak-d.tripcdn.com/images/1re3z12000dpqu7rpEE0A.png"}),os.createElement("span",{className:"desc"},e)),(0,q.dB)(this)&&k&&os.createElement("div",{className:"avgDesc"},os.createElement(Ee.Z,{type:"High",className:"high-icon"}),os.createElement("span",{className:"desc"},e)))}}Score.deafultProps={data:[]},Score.propTypes={data:_e().array};var is=k(39621).default,as=k(67294);class OneSentenceComment extends is{render(){var e,_;const{type:k}=this.props,I=(null===(e=this.props.tags)||void 0===e?void 0:e.find((e=>"OneSentenceComment"===e.tagTitle)))||{},C=(null===(_=this.props.tags)||void 0===_?void 0:_.find((e=>"12250"==e.tagId)))||{},R=I.name?I.name.split("|"):[];return R.length||C.tagDesc?as.createElement("div",{className:"list-encourage-review"},R.length?as.createElement("p",{className:"review-rt"},R.map(((e,_)=>as.createElement("span",{className:"review-item",key:_},"meta"==k?e:'"'.concat(e,'"'))))):null,C.tagDesc&&as.createElement("span",{className:"familyRecommend"},C.tagDesc)):null}}var ls=k(67294);function Comment(e){const _=(0,he.useRef)(null),k=(0,se.asyncComponent)("ToolTip"),{ctx:I,$translate:C}=(0,he.useContext)(pe.P),{card:R,type:B,toDetail:U,inboundHighlightTags:V}=e,G="meta"==B,{comment:z={}}=e,{tags:J,commentInfo:Q}=R,ee=null==Q?void 0:Q.commenterNumber,te=null==Q?void 0:Q.commentDescription;let ne=(null==Q?void 0:Q.commentScore)||0;ne=ne?(0,So.formatNumber)((0,q.H$)(I)?2*ne:ne,{digit:1,digitMin:1,ctx:I}):ne;let re=G?(0,ci.Z)(z,"taUrl",""):(0,ci.Z)(Q,"taUrl",""),oe=G?(0,ci.Z)(z,"taAlt",""):(0,ci.Z)(Q,"taAlt","");return ne?ls.createElement("div",null,ls.createElement("section",{className:j()("list-card-comment","list-card-comment-versionB","listHoverVB",{"list-card-comment-meta":"meta"==B})},ls.createElement("div",{className:"me"},ls.createElement("div",{className:"subme"},ls.createElement("span",{className:"inherit",onMouseEnter:_=>{var R,j,B,U;const{commentInfo:V,score:{hover:G}}=e;if(!G&&!(null==V||null===(R=V.subScore)||void 0===R?void 0:R.length))return;const{positionInfo:{cityName:z=""}}=e,J=null===(j=(0,ci.Z)(V,"subScore",[]))||void 0===j?void 0:j.some((e=>!(0,Pe.xb)(e.scoreAvg))),Q=null===(B=(0,ci.Z)(V,"subScore",[]))||void 0===B?void 0:B.some((e=>!(0,Pe.xb)(e.scoreAvg)&&Number(e.number)>Number(e.scoreAvg)));let ee="";(0,q.dB)(I)&&Q&&z?ee=C("key.88801001.review.above.average.level",z):!(0,q.dB)(I)&&J&&z&&(ee=C("key.88801001.review.average.level",z)),(0,pa.NW)("htl_t_online_list_cmt_hover",{masterhotelid:(null==e||null===(U=e.hotelBasicInfo)||void 0===U?void 0:U.hotelId)||"",page:H.default.getByKey("pageId"),locale:H.default.getByKey("cargo.locale")});const te={content:G||ls.createElement(Score,{data:(0,ci.Z)(V,"subScore",[]),avgDesc:ee}),target:_.currentTarget,triPlacement:"middle",dark:!!G,zIndex:1e3,borderRadius:4,className:"tooltip-border"};k.action("show",te)},onMouseLeave:()=>{k.action("hide")}},ls.createElement("div",{className:"score",ref:_,onMouseDown:e=>{U(B,"review"),e.stopPropagation()}},ls.createElement("span",{className:"real"},"10.0"===ne||"10,0"===ne?10:ne),ls.createElement("span",{className:"full"},"/"),ls.createElement("span",{className:"full"},(0,q.H$)(I)?10:5)),te&&ls.createElement("div",{className:"describe"},ls.createElement("p",{className:"outstanding"},te)),ee&&ls.createElement("div",{className:j()("count",{"count-inbound":!(0,Pe.xb)(V)})},ls.createElement("a",{onClick:e=>{U(B,"review"),e.stopPropagation()}},ee))),(0,Pe.xb)(V)&&ls.createElement(OneSentenceComment,{tags:J,type:B,desc:te}),re?ls.createElement("div",{className:"ta"},ls.createElement("div",{className:"ta-info",onClick:e=>{U(B,"taReview"),e.stopPropagation()}},ls.createElement("div",{className:"ta-img_wrapper"},ls.createElement("div",{className:"ta-logo"}),ls.createElement("img",{className:"ta-img",src:re,alt:oe})))):null)))):null}Comment.defaultProps={comment:{url:"",content:"",taUrl:"",taReview:"",taAlt:""},score:{number:"",desc:"",hover:"",subScore:[],positionScore:""}};const ss=(0,Vl.ZP)(Comment);var cs=k(39621).default,us=k(67294);class view_AccountLog extends cs{constructor(e){super(e),this.renderDetail=e=>{const{discountNote:_,roomkey:k}=this.props.data||{},I=e?"signInNote-metaroom":"signInNote",C=!e;return us.createElement("div",{className:I,ref:e=>{this.logRef=e}},us.createElement("div",{className:"signInNote-content"},us.createElement(Ee.Z,{className:"normal-icon",type:"ic_unlock"}),us.createElement("div",{className:"des-with-icon",style:{justifyContent:"flex-end"},dangerouslySetInnerHTML:{__html:_},onClick:this.showLoginComponent(k,C)})))},this.renderList=()=>{const{discountNote:e,type:_,masterHotelId:k,className:I="",listCardMaskPriceB:C,hidePrice:R}=this.props.data||{};return us.createElement("div",{className:"".concat(_,"-decorator ").concat(I),ref:e=>{this.logRef=e}},us.createElement("div",{className:j()("text","minNoiseText",C?"list-mask-price-hide-vb":"")},C?R?null:us.createElement(Ee.Z,{type:"a-filledbeifen3x",className:"normal-icon lock"}):us.createElement(Ee.Z,{type:"ic_unlock",className:"lock"}),us.createElement("div",{className:"other",onClick:this.showLoginComponent(k,!1),dangerouslySetInnerHTML:{__html:e}})))}}render(){switch(this.props.pageName){case"listpage":return this.renderList();case"detailpage":return this.renderDetail(!1);case"metapage":return this.renderDetail(!0);default:return null}}}const link_replaceOrSplice=(e,_,k)=>(0,ii.qz)({["".concat(_)]:k},e),ps="u-action0",hs="u-action1";class AccountLog extends view_AccountLog{constructor(e){super(e),this.ID_TYPES=[ps,hs],this.ACTION_TYPE={[ps]:"showLogin",[hs]:"register"},this.LOG_TYPE={[ps]:"login",[hs]:"register"},this.showLoginComponent=(e,_)=>k=>{k.stopPropagation();const{id:I}=k.target||{};if(this.ID_TYPES.includes(I)){const k=this.LOG_TYPE[I];this.$safeLog("clickLoginOrRegister",this.props,k);("listpage"===this.props.pageName||!1)&&this.$safeLog("clickLogin",this.props,"login"===k?1:2),this.$component("Account").action(this.ACTION_TYPE[I],{paramObj:{},successCallback:()=>{this.$safeLog("showLoginOrRegisterResult",this.props,k,"success");let C=window.location.href;I===ps?C=link_replaceOrSplice(C,"signInType",1):I===hs&&(C=link_replaceOrSplice(C,"signInType",2)),e&&!_?C=link_replaceOrSplice(C,"signInHotelId",e):e&&_&&(C=link_replaceOrSplice(C,"signInRoomKey",e)),_&&(0,gi.tB)("detail-room-list"),window.history.replaceState(null,"",C),window.location.reload()},failcallback:()=>{this.$safeLog("showLoginOrRegisterResult",this.props,k,"failure")}})}},this.ubtMapping={clickLoginOrRegister:U.yA,showLoginOrRegisterResult:U.EQ,showLoginInfo:U.Cf,clickLogin:U.zC,showLogin:U.TX},this.scrollFunction=null}componentDidMount(){if(this.logRef){const e="detailpage"===this.props.pageName||!1,_="listpage"===this.props.pageName||!1;this.scrollFunction=scrollOnScreen({target:this.logRef,judgeType:e?6:3,callBack:()=>{this.$safeLog("showLoginInfo",this.props),_&&this.$safeLog("showLogin",this.props)}})}}componentWillUnmount(){this.scrollFunction&&removeScroll(this.scrollFunction)}}var fs=k(14714);const ms="InstanceConfirm",gs="FreeCancel",vs="FreeCancelList",ys="Credit",bs="RateCode",_s="NotInstanceConfirm",ws="NotFreeCancel",Es="LadderCancellation",Ss=367,Os=368,Ts=371,ks="mealRewards",Is="cancelRewards",Cs="otherMemberRewards",Ps=300051,Ls=300061,Ns=300071,Ds=300081,As=300091,Rs={[Ps]:"https://dimg04.tripcdn.com/images/1re5k12000ghrtz3qD1E4.png",[Ls]:"https://dimg04.tripcdn.com/images/1re3p12000ghrrk5477B9.png",[Ns]:"https://dimg04.tripcdn.com/images/1re6d12000ghrqx6u19E0.png",[Ds]:"https://dimg04.tripcdn.com/images/1re2712000ghrre93FD0C.png",[As]:"https://dimg04.tripcdn.com/images/1re2212000ghru0o83F52.png"},xs={[Ps]:"silver-member-tag",[Ls]:"gold-member-tag",[Ns]:"platinum-member-tag",[Ds]:"diamond-member-tag",[As]:"golden-diamond-member-tag"};var js=k(39621).default,Bs=k(67294);class promotion_view_View extends js{constructor(e){super(e),this.minNoiseContent=()=>{const{tags:e=[],isListCardRoomB:_}=this.props;return Bs.createElement(Bs.Fragment,null,e.map(((e,k)=>{let{text:I,tagIcon:C,icon:R}=e;return"ic_new_tripcoins"===(C||R)?(-1!=I.indexOf("{0}")&&(I=I.replace("{0}",'<span class="tripcoins-price">'),I=I.replace("{/0}","</span>")),Bs.createElement("div",{className:"tripcoins-box"},!_&&Bs.createElement(ColorIcon,{type:"ic_new_trip_coins",className:"tripcoins"}),Bs.createElement("span",{className:"tripcoins-text",dangerouslySetInnerHTML:{__html:I}}))):Bs.createElement("p",{key:k,style:{color:"#EC3C77",background:"rgba(249, 76, 134, 0.08)",padding:"2px 4px",fontSize:"12px",lineHeight:"16px",borderRadius:"2px"}},Bs.createElement("span",null,I))})))}}getTagInfo(e){let _="";switch(e){case 2:_=this.$translate("key.hotel.online.flyer.cross.label");break;case 4:_=this.$translate("key.hotel.online.train.cross.label");break;case 20:_=this.$translate("key.hotel.online.ticket.cross.label");break;case 21:_=this.$translate("key.hotel.online.car.cross.label");break;case 23:_=this.$translate("key.hotel.online.bus.cross.label");break;case 24:_=this.$translate("key.hotel.online.tours.cross.label");break;case 26:_=this.$translate("key.hotel.online.cruises.cross.label")}return _}render(){const{tags:e=[]}=this.props;return e.length?Bs.createElement("div",{className:"list-card-promotion"},this.minNoiseContent()):null}}class Promotion extends promotion_view_View{constructor(e){super(e),this.state={}}}Promotion.defaultProps={tags:[]},Promotion.propTypes={tags:_e().array};var Ms=k(67117),Fs=k(39621).default,Hs=k(67294);class CpxBedHover extends Fs{constructor(e){super(e),this.renderCpxBedDetail=e=>{let _="";return _=(null==e?void 0:e.length)>1?e.join(" "):(null==e?void 0:e.length)?e[0]:"",Hs.createElement("span",{className:"cpxBedInfo_content_bed"},_)}}render(){const{cpxBedInfo:e}=this.props,{title:_,bedDetail:k=[],content:I=[]}=e,C=0===k.length&&(0,Ms.kJ)(I)?I:k;return Hs.createElement("div",{className:"cpxBedInfo"},!(0,Pe.xb)(C)&&C.map(((e,_)=>Hs.createElement("div",{className:j()("cpxBedInfo_content",{onlyItem:1===C.length}),key:_},C.length>1&&(e.roomName||e.room)&&Hs.createElement("div",{className:"cpxBedInfo_content_room"},e.roomName||e.room),!(0,Pe.xb)(e.detail)&&Hs.createElement("ul",{className:"cpxBedInfo_content_ul"},this.renderCpxBedDetail(e.detail))))),_&&Hs.createElement("p",{className:"cpxBedInfo_title"},_))}}var Ks=k(39621).default,Us=k(67294);class view_RoomAdvantageTag extends Ks{constructor(e){super(e)}render(){const{tagInfo:e}=this.props,_=null==e?void 0:e.length;return _&&_?Us.createElement("div",{className:"room-advantage-tags"},e.map(((e,k)=>{return Us.createElement(Us.Fragment,{key:k},Us.createElement("span",{className:"member-reward-tag ".concat((I=e.tagTemplateId,Bl[I]))},void 0!==Ml[e.tagTemplateId]?Us.createElement("img",{className:"member-reward-tag-icon",src:Ml[e.tagTemplateId]}):null,e.tagTitle),_-1!==k?Us.createElement("span",{className:"split-dot"}):null);var I}))):null}}class RoomAdvantageTag extends view_RoomAdvantageTag{constructor(e){super(e)}}var Zs=k(67294);function EncourageTag(e){const{hotelTagInfo:_}=e,{tagTitle:k,tagTemplateId:I}=_,C=(e=>e?Bl[e]:"encourage-tag")(I);return Zs.createElement("div",{className:C},k)}const Vs={ic_new_double_bed:"a-ic_doublebed_outlined",ic_new_twobeds:"a-ic_twobeds_outlined",ic_new_bed:"a-ic_singlebed_outlined",ic_new_fa_multiple_beds:"a-ic_multiplebeds_outlined",ic_new_multiple_beds:"a-ic_multiplebeds_outlined",ic_new_twodouble_bed:"a-ic_wodoublebed_outlined",ic_new_sofabed:"ic_sofabed_outlined"};var Ws=k(39621).default,Gs=k(67294);class RoomLeft extends Ws{constructor(e){var _;super(e),_=this,this.renderBedList=e=>(e||[]).map(((e,_)=>Gs.createElement("p",{key:_,className:"bed-desc"},e))),this.bedMouseOver=e=>{let _=this.props.card.roomInfo;_||(_=this.props.roomInfo);const k=(0,ci.Z)(_,"bed.contentListHover",null)||[];k.length>0&&this.onMouseOver(e,this.renderBedList(k))},this.cpxMouseOver=e=>_=>{const k=this.$component("ToolTip"),I={content:Gs.createElement(CpxBedHover,{cpxBedInfo:e}),target:_.target,triPlacement:"middle",dark:!1,borderRadius:4,zIndex:10001};k.action("show",I)},this.renderBed=e=>e&&Gs.createElement("span",{className:"bedContent"},e),this.renderBedIcon=e=>(e||[]).map(((e,_)=>{const k=(0,q.Lf)(this)?Vs[e]:e;return"/"===e?Gs.createElement("span",{key:_,className:"gang"},"/"):Gs.createElement(B.Z,{onMouseOver:this.bedMouseOver,onMouseOut:this.onMouseOut,className:"bed-icon-customer ".concat(e),type:k,key:_})})),this.renderCpxBedIcon=(e,_)=>{if((0,Pe.xb)(null==e?void 0:e.bedDetail))return null;if((null==_?void 0:_.length)>0)return(_||[]).map(((_,k)=>{const I=(0,q.Lf)(this)?Vs[_]:_;return"/"===_?Gs.createElement("span",{key:k,className:"gang"},"/"):Gs.createElement(B.Z,{onMouseOver:this.cpxMouseOver(e),onMouseOut:this.onMouseOut,className:"bed-icon-customer ".concat(_),type:I,key:k})}));const k=(0,q.Lf)(this)?Vs.ic_new_multiple_beds:"ic_new_multiple_beds";return Gs.createElement(B.Z,{onMouseOver:this.cpxMouseOver(e),onMouseOut:this.onMouseOut,className:"bed-icon-customer ic_new_multiple_beds",type:k})},this.renderPerson=function(e){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;k||(k=(0,q.Lf)(_)?"ic_new_user_line":"ic_new_fa_occupant");let C=new Array(e).fill("");return C.length>I?Gs.createElement("p",{className:"render-person"},Gs.createElement(B.Z,{type:k}),Gs.createElement("span",{className:"rate"},Gs.createElement("span",null,"x"),Gs.createElement("span",null,e))):C.map(((e,_)=>Gs.createElement(B.Z,{key:_,type:k})))},this.renderWithChildPrice=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const k=(0,q.Lf)(_)?"ic_new_user_line":"ic_new_fa_occupant",I=(0,q.Lf)(_)?"a-MostPopularAmenitibeifen22":"ic_new_child";return Gs.createElement("p",{style:{cursor:"pointer"},onMouseOver:k=>(null==e?void 0:e.guestHover)&&_.onMouseOver(k,null==e?void 0:e.guestHover,!0),onMouseOut:_.onMouseOut},Gs.createElement("p",{className:"room-panel-roominfo-people-icons"},_.renderPerson((null==e?void 0:e.adultCount)||0,k,2),Gs.createElement(B.Z,{type:"ic_plus"}),_.renderPerson((null==e?void 0:e.childCount)||0,I,2)))},this.metaRenderWithChildPrice=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const k=(0,q.Lf)(_)?"ic_new_user_line":"ic_new_fa_occupant",I=(0,q.Lf)(_)?"a-MostPopularAmenitibeifen22":"ic_new_child";return Gs.createElement("p",{style:{cursor:"pointer"},onMouseOver:k=>e.desc&&_.onMouseOver(k,e.desc,!0),onMouseOut:_.onMouseOut},Gs.createElement("p",{className:"room-panel-roominfo-people-icons"},_.renderPerson(e.adults,k,2),Gs.createElement(B.Z,{Icon:!0,type:"ic_plus"}),_.renderPerson(e.children,I,2)))},this.onMouseOver=function(e,k){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(I){let e={page:H.default.getByKey("pageId",_.ctx),type:k||""};_.$safeLog("logTagShow",e)}const C=_.$component("ToolTip"),R={content:k,target:e.target,triPlacement:"middle",dark:!1,zIndex:999,borderRadius:4};C.action("show",R);let j="";e.target.querySelector("p")?j=e.target.querySelector("p").innerHTML:e.target.querySelector("span")&&(j=e.target.querySelector("span").innerHTML),_.$safeLog("logMetapageLayerAction","expand",j,_.props)},this.onMouseOut=e=>{this.$component("ToolTip").action("hide");let _="";e.target.querySelector("p")?_=e.target.querySelector("p").innerHTML:e.target.querySelector("span")&&(_=e.target.querySelector("span").innerHTML),this.$safeLog("logMetapageLayerAction","hide",_,this.props)},this.ubtMapping={logMetapageLayerAction:logMetapageLayerAction,logTagShow:U.w2},this.showRoomTitle=e=>e&&e.text?Gs.createElement("div",{className:"room-type-title"},Gs.createElement("div",{className:"room-type-icon"}),Gs.createElement("span",null,e.text)):null,this.renderEncourageTag=(e,_,k)=>{const{card:I}=this.props,{roomTags:C={}}=I,{encourageTags:R=[]}=C;return R.length>0?R.map((e=>Gs.createElement(EncourageTag,{hotelTagInfo:e}))):Gs.createElement(Gs.Fragment,null,e&&Gs.createElement("div",{className:j()("encourageStyle","minNoiseEncourage")},e.additionText),_&&Gs.createElement("div",{className:"encourageMsg"},_.additionText),k&&Gs.createElement("div",{className:"encourageMsg"},k.additionText))}}componentDidMount(){}getMetaPolicyText(e){var _,k,I,C,R,j;let B="";const H=[];if(!e)return B;var U,V;(null==e||null===(_=e.childrenTag)||void 0===_?void 0:_.tag)&&H.push({content:null==e||null===(U=e.childrenTag)||void 0===U?void 0:U.tag,mainType:"CHILDTAG",highlight:[1,2].includes(null==e||null===(V=e.childrenTag)||void 0===V?void 0:V.type)});const G=null===(k=e.policy)||void 0===k?void 0:k.find((e=>{let{type:_}=e;return[gs,vs,Es].includes(_)})),q=null===(I=e.labelsV2)||void 0===I?void 0:I.find((e=>e.positionId===Os));q?H.push({mainType:Is,content:null==q?void 0:q.name,templateId:null==q?void 0:q.tagTemplateId}):G&&(G.mainType="freeCancel",H.push(Object.assign(G,{highlight:!0})));const z=null===(C=e.facility)||void 0===C?void 0:C.find((e=>{let{type:_}=e;return[fs.K5,fs.FA,fs.$v,fs.hR].includes(_)})),J=null===(R=e.labelsV2)||void 0===R?void 0:R.find((e=>e.positionId===Ss));if(J)H.push({mainType:ks,content:null==J?void 0:J.name,templateId:null==J?void 0:J.tagTemplateId});else if(z){z.mainType="meal";const{extras:e,content:_}=z,k=null==e?void 0:e.find((e=>"MealBriefDesc"===e.key));H.push(Object.assign(z,{highlight:!0,content:(null==k?void 0:k.value)||_}))}const Q=null===(j=e.labelsV2)||void 0===j?void 0:j.find((e=>e.positionId===Ts));Q&&H.push({mainType:Cs,content:null==Q?void 0:Q.name,templateId:null==Q?void 0:Q.tagTemplateId});let ee=[];return null==H||H.forEach((e=>{e.content&&ee.push({text:e.content,highlight:e.highlight,mainType:e.mainType,templateId:e.templateId})})),B=this.getdotConnectText(ee),B}getdotConnectText(e){var _,k;let I=null==e?void 0:e.length;const C=null!==(_=null==e?void 0:e.filter((e=>e.mainType!==Cs)))&&void 0!==_?_:[],R=null!==(k=null==e?void 0:e.filter((e=>e.mainType===Cs)))&&void 0!==k?k:[];return I?Gs.createElement(Gs.Fragment,null,C.length>0?Gs.createElement("div",{className:"policy-wrapper"},C.map(((e,_)=>Gs.createElement(Gs.Fragment,{key:_},Rs[e.templateId]?Gs.createElement("img",{className:"member-reward-tagicon",src:Rs[e.templateId]}):null,Gs.createElement("span",{className:j()({minNoiseHighlight:!e.templateId,highlight:e.highlight,[xs[e.templateId]]:e.templateId})},e.text),C.length-1!==_?Gs.createElement("span",{className:"split-dot"}):null)))):null,R.length>0?Gs.createElement("div",{className:"policy-wrapper other-policy-wrapper"},R.map(((e,_)=>Gs.createElement(Gs.Fragment,{key:_},Gs.createElement("span",{className:j()({minNoiseHighlight:!e.templateId,[xs[e.templateId]]:e.templateId,memberRewardTag:e.templateId})},Rs[e.templateId]?Gs.createElement("img",{className:"member-reward-tagicon",src:Rs[e.templateId]}):null,e.text))))):null):null}getPolicyText(e){var _,k,I,C;let R="",j=[],B=null===(_=(e||[]).find((e=>"ChildrenStayFree"===(null==e?void 0:e.additionName))))||void 0===_?void 0:_.additionText;B&&j.push({text:B,highlight:!0});let H=null===(k=(e||[]).find((e=>"ChildrenNormalTag"===(null==e?void 0:e.additionName))))||void 0===k?void 0:k.additionText;H&&j.push({text:H,highlight:!1});let U=null===(I=(e||[]).find((e=>"FreeCancelMessage"===(null==e?void 0:e.additionName))))||void 0===I?void 0:I.additionText;U&&j.push({text:U,highlight:!0});let V=null===(C=(e||[]).find((e=>"FreeBreakfast"===(null==e?void 0:e.additionName))))||void 0===C?void 0:C.additionText;return V&&j.push({text:V,highlight:!0}),R=this.getdotConnectText(j),R}getNewPolicyText(e,_){return e.length>0?Gs.createElement(RoomAdvantageTag,{tagInfo:e}):this.getPolicyText(_||[])}render(){var e,_,k,I,C,R,H,U,V;let{type:G,card:q,bed:z,base:J,roomQuantity:Q}=this.props;const{roomInfo:ee,saleRoom:te,hotelBasicInfo:ne={},tags:re=[],discountLabels:oe=[],roomTags:ie={}}=q,{advantageTags:ae=[]}=ie,{additionTexts:le,guestInfoEntity:se={}}=ne,ce="meta"==G,ue=ce?(0,ci.Z)(z,"list",null)||(0,ci.Z)(J.bed,"list",null)||[]:(0,ci.Z)(ee,"bed.list",null)||[];let de=(0,ci.Z)(ee,"bed.cpxBedInfo",null)||{};const pe=ce?this.getMetaPolicyText(this.props.roomInfo):this.getNewPolicyText(ae,le),he=null==le?void 0:le.find((e=>"LowestPriceWillSellout"===e.additionName)),fe=null==le?void 0:le.find((e=>"LastBooking"===e.additionName)),me=null==re?void 0:re.find((e=>"HotelHotTags"===e.tagTitle)),ge=null===(e=this.props.roomInfo)||void 0===e||null===(_=e.labelsV2)||void 0===_?void 0:_.some((e=>e.positionId===Ts));return Gs.createElement("div",{className:j()("room-panel-roominfo",{"room-panel-roominfo-meta":ce})},Gs.createElement("div",{className:j()("room-panel-roominfo-middle",{"room-panel-roominfo-middle-meta":ce})},Q>0&&Gs.createElement("span",{className:"room-quantity"},Q,Gs.createElement(B.Z,{type:"close"})),Gs.createElement("span",{className:"room-panel-roominfo-name"},ce?null==J?void 0:J.roomName:null==ee?void 0:ee.physicalRoomName),Gs.createElement(Gs.Fragment,null,ce?Gs.createElement("span",{className:"room-panel-roominfo-people"},(null==J?void 0:J.guestCount)?this.metaRenderWithChildPrice(null==J?void 0:J.guestCount):this.renderPerson(null==J?void 0:J.person)):Gs.createElement("span",{className:"room-panel-roominfo-people"},(null==se?void 0:se.childCount)>0?this.renderWithChildPrice(se):this.renderPerson(te.person)),(!!ue.length||!(0,Pe.xb)(de))&&Gs.createElement("span",{className:"room-panel-roominfo-bed"},(0,Pe.xb)(de)?this.renderBedIcon(ue):this.renderCpxBedIcon(de,ue)))),Gs.createElement("div",{className:j()("roominfo-content",{"mb-6":ge})},pe&&Gs.createElement("div",{className:"room-policy"},pe),(null==oe?void 0:oe.length)?Gs.createElement(Promotion,{tags:oe.filter((e=>6===e.type)),isPlainStyle:!0}):null,"meta"===(null===(k=this.props)||void 0===k?void 0:k.type)&&(null===(I=this.props)||void 0===I||null===(C=I.roomInfo)||void 0===C||null===(R=C.encourage)||void 0===R?void 0:R.coins)?Gs.createElement("div",{className:"tripcoins-box"},Gs.createElement(ColorIcon,{type:"ic_new_trip_coins",className:"tripcoins"}),Gs.createElement("span",{className:"tripcoins-text"},null===(H=this.props)||void 0===H||null===(U=H.roomInfo)||void 0===U||null===(V=U.encourage)||void 0===V?void 0:V.coins)):null,this.renderEncourageTag(he,fe,me)))}}var $s=k(6146),qs=k(39621).default,zs=k(67294);class view_LogButton extends qs{constructor(e){super(e)}render(){const{masterHotelId:e,priceMask:_,roomId:k}=this.props.data||{};return zs.createElement("div",{className:"log-button-container"},zs.createElement(ri,{className:"log-button",suffixIcon:zs.createElement(Ee.Z,{type:"ic_new_more_line1",className:"log-button-icon"}),onMouseLeave:this.priceOnMouseOut,onMouseEnter:this.priceOnMouseEnter,onWheel:this.priceOnMouseOut,onClick:this.showLoginComponent(e,_,k,!1)},this.$translate("key.hotel.online.meta.login.bottom.member")))}}var Ys=k(15393),Js=k(74019);const tools_link_replaceOrSplice=(e,_,k)=>(e||"").toLowerCase().indexOf(_.toLowerCase())>-1?(0,ii.qz)({["".concat(_)]:k},e):k?"".concat((e=>e.indexOf("?")>-1?"".concat(e,"&"):"".concat(e,"?"))(e)).concat(_,"=").concat(k):e;var Xs=k(63035);const Qs="u-action0",ec="u-action1";class LogButton extends view_LogButton{constructor(e){super(e),this.ID_TYPES=[Qs,ec],this.ACTION_TYPE={[Qs]:"showLogin",[ec]:"register"},this.LOG_TYPE={[Qs]:"login",[ec]:"register"},this.priceOnMouseOut=()=>{const e=this.$component("ToolTip");e&&e.action("hide")},this.priceOnMouseEnter=e=>{const _=this.$component("ToolTip"),k={target:e.target,content:this.$translate("key.hotel.online.meta.login.hover.member")};_&&_.action("show",k)},this.showLoginComponent=(e,_,k,I)=>C=>{let{id:R}=C.target||{};if(R=Qs,this.ID_TYPES.includes(R)){const j=this.LOG_TYPE[R];this.$safeLog("clickLoginOrRegister",this.props,j);("listpage"===this.props.pageName||!1)&&this.$safeLog("clickLogin",this.props,"login"===j?1:2);const B=H.default.getByKey("pageId");"10320668268"==B&&C.stopPropagation(),this.$component("Account").action(this.ACTION_TYPE[R],{paramObj:{},successCallback:()=>{this.$safeLog("showLoginOrRegisterResult",this.props,j,"success"),this.$safeLog("showLoginOrRegisterResultShow",B,e,k,!!_,"login"===j?1:2,1);let C=window.location.href;R===Qs?C=tools_link_replaceOrSplice(C,"signInType",1):R===ec&&(C=tools_link_replaceOrSplice(C,"signInType",2)),e&&!I?C=tools_link_replaceOrSplice(C,"signInHotelId",e):e&&I&&(C=tools_link_replaceOrSplice(C,"signInRoomKey",e)),I&&(0,gi.tB)("detail-room-list"),window.history.replaceState(null,"",C),window.location.reload()},failcallback:()=>{this.$safeLog("showLoginOrRegisterResult",this.props,j,"failure"),this.$safeLog("showLoginOrRegisterResultShow",B,e,k,!!_,"login"===j?1:2,0)}})}},this.ubtMapping={clickLoginOrRegister:Xs.yA,showLoginOrRegisterResult:Xs.EQ,showLoginInfo:Xs.Cf,clickLogin:Xs.zC,showLogin:Xs.TX,showLoginOrRegisterResultShow:Xs.zi},this.scrollFunction=null}componentDidMount(){if(this.logRef){const e="detailpage"===this.props.pageName||!1,_="listpage"===this.props.pageName||!1;this.scrollFunction=(0,$s.x)({target:this.logRef,judgeType:e?6:3,callBack:()=>{this.$safeLog("showLoginInfo",this.props),_&&this.$safeLog("showLogin",this.props)}})}}componentWillUnmount(){this.scrollFunction&&(0,$s.aF)(this.scrollFunction)}}var tc=k(39621).default,nc=k(67294);class price_Price extends tc{render(){const{ctx:e,props:_}=this,{currency:k,price:I,className:C,hidePrice:R}=_;let j=null;return R?(j=(0,So.formatCurrency)(k,0,{digit:0,digitTop:2,zeroNeedCurrency:!0,ctx:e}),j=j&&j.replace("0",""),j="".concat(j," <span class='hide-price'>?</span>"),nc.createElement("div",{className:C,dangerouslySetInnerHTML:{__html:j}})):(j=(0,So.formatCurrency)(k,I,{digit:0,digitTop:2,zeroNeedCurrency:1==R,ctx:e}),nc.createElement("div",{className:C,dangerouslySetInnerHTML:{__html:j}}))}}var rc=k(47360);const oc="NOT_LOGIN_MEMBER",ic="SILVER_MEMBER",ac="GOLD_MEMBER",lc="PLATINUM_MEMBER",sc="DIAMOND_MEMBER",cc="TRIAL_GOLD_MEMBER",uc="CROSS_USER_DIAMOND_TRIAL_MEMBER",dc="EDM_MEMBER",pc="ACTIVITY_SECTION_MEMBER",hc="PLATINUM_TRIAL_DEAL",fc={0:oc,1:ic,2:ac,3:lc,4:sc,5:cc,6:uc,7:dc,8:pc},mc={23:oc,24:ic,25:ac,26:lc,27:sc,28:"DIAMOND_GOLD_TRIAL",29:cc,30:uc,31:dc,32:pc,33:"PLATINUM_TRIAL_DEAL"},gc={LOGOUTMEMBERDEAL:oc,SILVERMEMBERDEAL:ic,GOLDMEMBERDEAL:ac,PLATINUMMEMBERDEAL:lc,DIAMONDMEMBERDEAL:sc,GOLD_TRIAL_DEAL:cc,DIAMOND_TRIAL_DEAL:uc,EDM_USER_DIAMOND_TRIAL:dc,ACTIVITY_SECTION_MEMBER:pc,PLATINUM_TRIAL_DEAL:hc},vc={[oc]:"unlogin",[ic]:"silver",[ac]:"gold",[lc]:"platinum",[sc]:"diamond",[cc]:"gold",[uc]:"diamond",[dc]:"edm",[pc]:"trial",[hc]:"platinum"};var yc,bc,_c=k(92585),wc=k(39621).default,Ec=k(67294);let Sc=(0,_c.P)(((bc=class MemberMedalB extends wc{constructor(e){super(e),this.getType=e=>(0,Pe.hj)(e)?mc[e]||fc[e]:gc[e],this.handleMouseOver=(e,_)=>k=>{if(_){let I=_;if(_.indexOf("{break}")>-1){const e=_.split("{break}")[0],k=_.split(e)[1].replace(/\{break\}/g,"<br>");I=Ec.createElement("div",{className:"breaked"},Ec.createElement("span",{className:"breaked-title"},e),Ec.createElement("span",{className:"breaked-content",dangerouslySetInnerHTML:this.createContentMarkup(k)}))}this.onMouseOver(k,I,e)}},this.handleMouseOut=(e,_)=>()=>{this.onMouseOut(e,_)},this.createContentMarkup=e=>({__html:e})}render(){const{memberStyle:e="",memberStyleType:_=0,memberType:k,memberName:I,customerClass:C,memberHover:R}=this.props;if(void 0===mc[k]&&void 0===fc[k]&&void 0===gc[k])return null;let B=this.getType(k);return B===pc?Ec.createElement(rc.Z,{text:I}):Ec.createElement("div",{className:j()(C,"md_member_medalB","ib",vc[B],"GROUP_VEIL"===e||1===_?"groupid":"",R?"hover":""),onMouseOver:R?this.handleMouseOver(I,R):null,onMouseOut:R?this.handleMouseOut(I,R):null},Ec.createElement("span",{className:"min-noise-member"},I),B===dc?Ec.createElement("div",{className:"member-icon"},Ec.createElement("i",{className:"u-icon u-icon-bg_member md_icon_bg"},Ec.createElement("span",{className:"edm_icon md_icon"}))):null)}}).defaultProps={memberType:0,memberName:"",customerClass:""},yc=bc))||yc;var Oc=k(40567),Tc=k(39621).default,kc=k(67294);class book_view_View extends Tc{constructor(e){super(e),this.state={}}render(){var e,_;const{maskInfo:k={}}=(null===(e=this.props)||void 0===e||null===(_=e.data)||void 0===_?void 0:_.base)||{},{index:I,data:C={}}=this.props,{money:R={}}=C||{},{lowerPriceButton:B,bookButton:H,memberButton:U}=k,{topFont:V,bottomFont:G}=this.state;return(0,Pe.xb)(k)?kc.createElement("div",{className:"book-box",id:I},kc.createElement("div",{className:"book",onClick:this.handleClick},this.getButtonText())):kc.createElement("div",{className:"book-box",id:I},H&&kc.createElement("div",{className:"book-top",style:Oc.C?{fontSize:"".concat(V,"px")}:{},onClick:this.handleBook,ref:e=>{this.topRef=e}},H,(null==R?void 0:R.payType)&&kc.createElement("p",{className:"desc"},R.payType)),kc.createElement("div",{ref:e=>{this.bottomRef=e},style:Oc.C?{fontSize:"".concat(G,"px")}:{},className:j()("book-bottom",H?"needradius":""),onClick:this.handleRegister,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver},U||B))}}book_view_View.propTypes={},book_view_View.defaultProps={};var Ic=k(93986);function updateBaseRooms(e){return{type:Ic.V0,payload:e}}function filterAndSortBaseRooms(e,_){return{type:Ic.Yt,payload:e,callback:_}}function afterFirstLoadBaseRooms(e){return{type:Ic.AL,payload:e}}function updatePriceTag(e){return{type:Ic.jv,payload:e}}function updateListStatus(e){return{type:Ic.Vf,payload:e}}function refreshChildPolicy(e){return{type:Ic.Zx,payload:e}}function updateExperienceMemberReward(e){return{type:Ic.h$,payload:e}}function updateBookingStatus(e){return{type:Ic.eb,payload:e}}var Cc=k(34406);function updateNearbyHotelData(e){return{payload:e,type:Cc.j}}var Pc=k(58550),Lc=k(78556),Nc=k(48467).default;const updateNearbyHotel=e=>_=>new Promise((k=>{var I;let{masterHotelId:C,cityId:R,timeOffset:j,mapType:B}=H.default.getByKey("initData.base")||{},U=H.default.getByKey("initData.isNearbyHotelListFromBff")||!1,V=H.default.getByKey("initData.hotelDetailBFF")||{};const G=U?null==V||null===(I=V.hotelPositionInfo)||void 0===I?void 0:I.mapType:B;let q=(0,Pc.Z)();const z=(e=>{let{rateplanParam:_,query:k,masterHotelId:I,cityId:C,ctx:R=null,timeOffset:j,isNearbyHotelListFromBff:B,mapType:H}=e;const{adult:U,child:V,age:G,roomNum:q,feature:z=[]}=_||{},{checkInStr:J,checkOutStr:Q}=(0,Be.Lf)({checkIn:k.checkin,checkOut:k.checkout,timeOffset:j,maxNights:(0,Ys.Z)()}),ee=[{key:"230421_IBU_htlnb",value:(0,Lc.Fe)(void 0)?"T":"F"}];return(0,Lc.nk)(void 0)&&ee.push({key:"NewTaxDescForAmountshowtype0",value:""}),B?{searchCondition:{adult:U,child:V,age:G,hotelId:I,cityId:C,checkIn:J.replace(/\//g,""),checkOut:Q.replace(/\//g,""),roomQuantity:q,pageSize:20,priceType:"undefined"==go.Z.get("IBU_showtotalamt")?"":go.Z.get("IBU_showtotalamt")},mapType:H,filterCondition:{rate:Number(k.rate)||0,priceRange:{highPrice:Number(k.highprice)||-1,lowPrice:Number(k.lowprice)||0}},nearbyHotHotel:{hotelId:I,hotelCityId:C,nearbySubType:"TripHotelDetail"},edmHotelData:k.edmhoteldata}:{searchCondition:{adult:U,child:V,age:G,cityName:k.cityname||"",cityId:C,checkIn:J.replace(/\//g,"-"),checkOut:Q.replace(/\//g,"-"),roomNum:q,travelPurpose:k.travelpurpose,masterHotelId:I,priceType:"undefined"==go.Z.get("IBU_showtotalamt")?"":go.Z.get("IBU_showtotalamt"),url:R?R.request.url:window.location.href},filterCondition:{star:k.star,rate:Number(k.rate)||0,priceRange:{highPrice:Number(k.highprice)||-1,lowPrice:Number(k.lowprice)||0},feature:z.length>0?z:void 0},extensions:ee,masterHotelId:I,isNewMap:"1",edmHotelData:k.edmhoteldata}})({rateplanParam:e,query:q,masterHotelId:C,cityId:R,timeOffset:j,isNearbyHotelListFromBff:U,mapType:G});U?Nc({url:"/ctGetNearbyHotelList",data:z,bff:!0,bffV3:!0,silence:!0}).then((e=>{let{data:I,success:C,fail:R}=e;C((()=>{var e;I.list=null!==(e=I.hotelList)&&void 0!==e?e:[],_(updateNearbyHotelData(I)),k(I)})),R((e=>{(0,te.fU)({logDesc:"ibu_htl_detailpage_hotelsearch_error",logKey:"ibu_htl_detailpage_hotelsearch_error",actionType:"load",logValue:{message:e&&e.message||"",stack:e&&e.stack||""}}),k()}))})):Nc({url:"/hotelSearchNearby",data:z,silence:!0}).then((e=>{let{data:I,success:C,fail:R}=e;C((()=>{_(updateNearbyHotelData(I)),k(I)})),R((e=>{(0,te.fU)({logDesc:"ibu_htl_detailpage_hotelsearch_error",logKey:"ibu_htl_detailpage_hotelsearch_error",actionType:"load",logValue:{message:e&&e.message||"",stack:e&&e.stack||""}}),k()}))}))}));var Dc=k(54959),Ac=k(20978);const Rc="NOT_LOGIN_MEMBER",xc="SILVER_MEMBER",jc="GOLD_MEMBER",Bc="PLATINUM_MEMBER",Mc="DIAMOND_MEMBER",Fc="TRIAL_GOLD_MEMBER",Hc="CROSS_USER_DIAMOND_TRIAL_MEMBER",Kc="EDM_MEMBER",Uc="ACTIVITY_SECTION_MEMBER",Zc={0:Rc,1:xc,2:jc,3:Bc,4:Mc,5:Fc,6:Hc,7:Kc,8:Uc},Vc={LOGOUTMEMBERDEAL:Rc,SILVERMEMBERDEAL:xc,GOLDMEMBERDEAL:jc,PLATINUMMEMBERDEAL:Bc,DIAMONDMEMBERDEAL:Mc,GOLD_TRIAL_DEAL:Fc,DIAMOND_TRIAL_DEAL:Hc,EDM_USER_DIAMOND_TRIAL:Kc,ACTIVITY_SECTION_MEMBER:Uc},Wc={[Rc]:"unlogin",[xc]:"silver",[jc]:"gold",[Bc]:"platinum",[Mc]:"diamond",[Fc]:"gold",[Hc]:"diamond",[Kc]:"edm",[Uc]:"trial"};var Gc,$c,qc=k(39621).default,zc=k(67294);let Yc=(0,_c.P)((($c=class MemberMedal extends qc{constructor(e){super(e),this.getType=e=>(0,Pe.hj)(e)?Zc[e]:Vc[e],this.handleMouseOver=(e,_)=>k=>{if(_){let I=_;if(_.indexOf("{break}")>-1){const e=_.split("{break}")[0],k=_.split(e)[1].replace(/\{break\}/g,"<br>");I=zc.createElement("div",{className:"breaked"},zc.createElement("span",{className:"breaked-title"},e),zc.createElement("span",{className:"breaked-content",dangerouslySetInnerHTML:this.createContentMarkup(k)}))}this.onMouseOver(k,I,e)}},this.handleMouseOut=(e,_)=>()=>{this.onMouseOut(e,_)},this.createContentMarkup=e=>({__html:e})}render(){const{memberType:e,memberName:_,customerClass:k,memberHover:I}=this.props;if(void 0===Zc[e]&&void 0===Vc[e])return null;let C=this.getType(e);return C===Uc?zc.createElement(rc.Z,{text:_}):zc.createElement("div",{className:j()(k,"md_member_medal","ib",Wc[C],I?"hover":""),onMouseOver:I?this.handleMouseOver(_,I):null,onMouseOut:I?this.handleMouseOut(_,I):null},zc.createElement("span",{className:"md_member_name"},_),zc.createElement("div",{className:"member-icon"},zc.createElement("i",{className:"u-icon u-icon-bg_member md_icon_bg"},C===Kc?zc.createElement("span",{className:"edm_icon md_icon"}):zc.createElement("i",{className:"u-icon md_icon ".concat("diamond"===Wc[C]?"u-icon-ic_new_diamondmember":"u-icon-ic_new_member")}))))}}).defaultProps={memberType:0,memberName:"",customerClass:""},Gc=$c))||Gc;var Jc=k(39621).default,Xc=k(24367).default,Qc=k(67294);class GoldenMask extends Jc{constructor(e){super(e),this.handleClick=()=>{const{refresh:e=!1,onClick:_,hideMask:k=!0}=this.props;_&&_(),k&&Xc.hide("SURE"),e&&window.location.reload()},this.ubtMapping={logHotelGoldenShow:Xs.s4},this.hasItalicFont=()=>{let e=(go.Z.get("ibulocale")||"").replace("_","-").toLocaleLowerCase();return!!["ja-jp","zh-hk","ko-kr","zh-tw"].find((_=>_===e))};let{subTitle:_=""}=e;this.style=this.hasItalicFont()?" s-font":"",this.subTitle=_.replace("{0}","<span class='".concat(this.style,"'>")).replace("{/0}","</span>")}componentDidMount(){const{data:{page:e=""}={}}=this.props;this.$safeLog("logHotelGoldenShow","".concat(e,"page"))}render(){const{title:e="",subTitle:_="",btnMsg:k="",label:I}=this.props;return e&&_?Qc.createElement("div",{className:"pop-golden"},Qc.createElement("h2",{className:this.style},e),I&&Qc.createElement(Yc,I),Qc.createElement("div",{className:"subtitle",dangerouslySetInnerHTML:{__html:this.subTitle}}),Qc.createElement("div",{className:"btn"},Qc.createElement(Ac.Z,{type:"primary",className:"btn",onClick:this.handleClick},k))):null}}const getContentsAndHovers_getContentsAndHovers=(e,_)=>{let k="",I=[];return e&&e.length&&_&&_.length&&_.forEach((_=>{let C=e.find((e=>e.type===_));C&&(k="".concat(k).concat(C.content||C.text||""),I.push(C.hover||""))})),{title:k,contents:I}};function ubtlogext_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function ubtlogext_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ubtlogext_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ubtlogext_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const logClickBook=e=>{const{masterHotelId:_,base:k={},member:I,facility:C,policy:R,promotion:j,money:B={},roomLayerInfo:H={},bed:U={}}=e.saleRoom||{},{roomId:V,availParam:G={},maxGuest:q}=k,{roomUniqueKey:z}=G,{payType:J,price:Q,priceDelete:ee,priceNote:te}=B,{roomId:ne,roomName:re,roomSize:oe,roomFloor:ie,addBed:ae}=e.baseRoom||{},le=(0,Js.zC)(),getContent=(e,_)=>{if(e&&e.length){const k=e.find((e=>e.type===_));return k?k.content:""}return""};return{logDesc:"roominfo",logKey:"ibu_htl_".concat((0,pa.h8)(),"_roominfo"),actionType:"click",logValue:{datasource:"book",masterhotelid:_,baseroomid:ne,roomid:V,roomuniquekey:z,roomname:re,roomsize:oe&&oe.text,floorinfo:ie,maxperson:q,smokeinfo:getContent(C,fs.qX)+getContent(C,fs.E0),windowinfo:getContent(C,fs.Rz)+getContent(C,fs.Km),nocreditmessage:getContent(R,ys),addbedinfo:ae,paytype:J,addbreakfast:getContent(C,fs.$v),cancelpriceinfo:(0,So.formatCurrency)(le,ee,{digit:0})||"",showpriceinfo:(0,So.formatCurrency)(le,Q,{digit:0})||"",showwithtaxpriceinfo:te||"",pricelayerinfo:(e=>{const _=[];return e&&(e.titleInfo&&_.push([e.titleInfo.title,e.titleInfo.meal]),e.prePaidInfo&&e.prePaidInfo.list&&e.prePaidInfo.list.length&&e.prePaidInfo.list.forEach((e=>{e&&_.push([e.title,e.content]),e&&e.detailList&&e.detailList.length&&e.detailList.forEach((e=>{e&&_.push([e.title,e.content])}))})),e.frontdeskPaidInfo&&e.frontdeskPaidInfo.list&&e.frontdeskPaidInfo.list.length&&(e.frontdeskPaidInfo.list.forEach((e=>{e&&_.push([e.title,e.content])})),e.frontdeskPaidInfo.title&&_.push([e.frontdeskPaidInfo.title,e.frontdeskPaidInfo.price])),e.afterCheckInInfo&&e.afterCheckInInfo.tripCoinsInfo&&e.afterCheckInInfo.tripCoinsInfo.list&&e.afterCheckInInfo.tripCoinsInfo.list.length&&e.afterCheckInInfo.tripCoinsInfo.list.forEach((e=>{e&&_.push([e.title,e.content])})),e.totalInfo&&(_.push([e.totalInfo.title,e.totalInfo.price]),e.totalInfo.note&&_.push([e.totalInfo.note,""]))),_})(H),items:[ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(C,[fs.kF,fs.jd,fs.Zc])),{},{type:"netinfo"}),ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(R,[gs,ws])),{},{type:"cancelinfo"}),ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(R,[ms,_s])),{},{type:"confirminfo"}),ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(C,[fs.hu,fs.K5,fs.FA,fs.hR,fs.$v])),{},{type:"mealinfo"}),{title:U&&U.contentList&&U.contentList.join&&U.contentList.join(""),contents:U.contentListHover,type:"bedinfo"},ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(j,["GIFT"])),{},{type:"giftinfo"}),ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(j,["POINTOFORDER"])),{},{type:"tripcoins"}),{title:I?I.memberDesc:"",contents:I?I.memberHover:"",type:"veilinfo"},ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(j,["MILEAGE"])),{},{type:"airlinecoupon"}),ubtlogext_objectSpread(ubtlogext_objectSpread({},getContentsAndHovers_getContentsAndHovers(j,["COUPON"])),{},{type:"promotion"})],propertyvaluelist:[getContent(R,bs),((e,_)=>{if(e&&e.length){const k=e.find((e=>e.type===_));return k?k.hover:""}return""})(R,bs)].filter((e=>""!==e)),roomdatapromotioninfo:{roomcard:getContentsAndHovers_getContentsAndHovers(j,["PROMOTION"])}}}};function ubtlog_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function ubtlog_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ubtlog_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ubtlog_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const hoteldetailprice=(e,_)=>{const{searchBarData:k={}}=e,{roomGuest:I={},calendar:C={}}=k,{priceLogParam:R={},filterValue:j=0,baseRooms:B=[]}=_,H=B.reduce(((e,_)=>(e.push(..._.saleRoom),e)),[]).map((e=>{const{priceLogParam:_={},base:k={},useEffect:I={}}=e;return{roomtype:I.roomtype,roomkey:_.roomkey,rrtoken:_.rrtoken,issproom:I.issproom,showprice:1===k.buttonType||2===k.buttonType?"T":"F"}}));return{logDesc:"detailpage_wholeprocess",logKey:"ibu_htl_detailpage_wholeprocess",actionType:"load",logValue:{hoteldetails:{frompage:(0,Ti.ss)()?"1":"0",trace:{rateplantracelogid:R.rateplantracelogid,timestamp:(new Date).getTime().toString()},hotelid:(e.masterHotelId||"").toString(),roomlist:H},ubtquerycondition:{adult:"".concat(I.adults),child:"".concat(I.children),childages:"".concat((I.childAges||[]).join(",")),roomnum:"".concat(I.rooms),checkin:"".concat((C.checkIn||"").replace(/\//g,"-")),checkout:"".concat((C.checkOut||"").replace(/\//g,"-")),filtercondition:(e=>{const _=["1","onedoublebed","twobeds","onesinglebed","multiplebeds","1","1","payathotel","prepayonline"];return[["breakfast",[0]],["instantconfirmation",[6]],["freecancellation",[5]],["paytype",[7,8]],["bedtype",[1,2,3,4]]].reduce(((k,I)=>(k[I[0]]=I[1].filter((_=>{return(k=e,e=>(1<<e&k)>0)(_);var k})).map((e=>_[e])).join("|"),k)),{})})(j)}}}},logNoRoom=e=>({logDesc:"noroom_show",logKey:"ibu_htl_detailpage_noroom_show",actionType:"load",logValue:{masterhotelid:(e.masterHotelId||"").toString()}}),showFirstBaseRoom=()=>{var e;const _=null===ha.Z||void 0===ha.Z||null===(e=ha.Z.timing)||void 0===e?void 0:e.navigationStart,k=+new Date;return{logDesc:"User goes to details page - first house rendering complete (price included)",logKey:"ibu_htl_c_online_dtl_roomshow_load",keyId:"200777",logValue:{indtltime:_,roomlshowtime:k,timegap:k-_}}},logNoRoomReason=e=>({logDesc:"ibu_htl_detailpage_noroom_show_reason",logKey:"ibu_htl_detailpage_noroom_show_reason",actionType:"load",logValue:{message:e&&e.message||"",stack:e&&e.stack||""}}),logRoomListLoadTime=e=>{var _;return{logDesc:"module_load_time",logKey:"ibu_htl_detailpage_module_load_time",actionType:"load",logValue:{masterhotelid:e,module:"roominfo",time:+new Date-~~(null===ha.Z||void 0===ha.Z||null===(_=ha.Z.timing)||void 0===_?void 0:_.navigationStart)}}},logStartPriceRoom=(e,_)=>{const k={baseRoom:e.baseRoom,saleRoom:ubtlog_objectSpread(ubtlog_objectSpread({},e.saleRoom&&e.saleRoom.length&&e.saleRoom[0]),{},{masterHotelId:_})},I=logClickBook(k);return I&&I.logValue&&I.logValue.datasource&&delete I.logValue.datasource,{logDesc:"startprice_roominfo",logKey:"ibu_htl_detailpage_startprice_roominfo",actionType:"load",logValue:I}},logUpdateRoomErr=e=>({logDesc:"ibu_htl_".concat((0,pa.h8)(),"_updateroom_error"),logKey:"ibu_htl_".concat((0,pa.h8)(),"_updateroom_error"),actionType:"load",logValue:{message:e&&e.message||"",stack:e&&e.stack||"",err:e}});var eu=k(74107);function updateSoldOutData(e){return{payload:e,type:eu.p}}var tu=k(57781),nu=k(79007),ru=k(48467).default;function updateCalendarPrice(e){var _,k;let I=e||{};delete I.versionControl;let C=(0,Oo.Z)("LowPrice")||(0,Oo.Z)("lowPrice")||0;return I.minPrice="null"===C||(0,Pe.xb)(C)?0:C,I.oversea="OVERSEA"==(null===(_=H.default.getByKey("initData"))||void 0===_||null===(k=_.base)||void 0===k?void 0:k.regionType)?"T":"F",e=>{var _;ru({url:"/getCalendarPrice",silence:!0,data:I,genk:!0,genKeyParam:{a:I.hotelId,b:I.checkIn,c:I.checkOut,d:null===(_=H.default.getByKey("cargo.locale"))||void 0===_?void 0:_.toLocaleLowerCase(),e:2,f:I.cityId},success:_=>{let k=(null==_?void 0:_.list)||[],I=0;k.forEach((e=>{"2"==e.showPriceType&&I++}));let C=k.map((e=>{const{date:_,minPrice:k,showPriceType:C}=e,R="0"==C;return{date:_,value:R?"—":"0"==k?"":(0,So.formatNumber)(k,{short:!0,digit:1}),color:I<=10&&"2"==C?"#FF6F00":R?"#CED2D9":"#8592A6"}}));e({type:nu.n,payload:C||[]}),window.tempLowPriceList=(null==_?void 0:_.list)||[]}})}}var ou=k(31061);var iu=k(48467).default,au=k(24367).default;function dispatch_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function dispatch_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?dispatch_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):dispatch_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let lu=!1;const updateRooms=(e,_)=>k=>{var I,C;k(updateListStatus(vi.Xy.LOADING)),k(function updateDetention(e){return{type:ou.I,payload:e}}({countDown:0}));let R={genk:!0,genKeyParam:{a:e.masterHotelId,b:e.checkIn,c:e.checkOut,d:null===(I=H.default.getByKey("cargo.locale"))||void 0===I?void 0:I.toLocaleLowerCase(),e:2,f:e.cityId||""}},j=ke.y7.get("list_map_firstToDetail");j&&(ke.y7.remove("list_map_firstToDetail"),e.searchTags=[{key:"ENTER_DETAIL_TYPE",value:j+""}]);const B=null===(C=window)||void 0===C?void 0:C.devicePixelRatio,U=B>1.5?"H":B>1&&B<=1.5?"M":"L";return Object.assign(R,{url:"/rateplan",silence:!0,data:e,soaCode:16709,ignoreUbtHead:!0,deviceConfig:U}),ke.y7.set("ratePlanRequest",R),_&&(0,Dc.ve)(pa.sP,"start rateplan request"),iu(R)};function getPriceType(e,_){const k={exavg:"0",inctotal:"1",incavg:"2",cmatotal:"3"};let I=_||e;Object.keys(k).includes(I)&&(I=k[I]);const C=["0","1","2","3"].includes(I),R="IBU_showtotalamt";C&&go.Z.set(R,I,{domain:"",expires:""});const j="undefined"==go.Z.get(R)?"":go.Z.get(R);return C?I:j||""}function getParam(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=(0,Pc.Z)(),{pathHotel:I}=(0,Js.vL)(window.location.href),C=k.tagid?Object.assign({},{prepayDiscount:k.tagid}):null,R=C?[Object.assign({},{value:"-1",discountValue:JSON.stringify(C)})]:null;const j=ke.y7.get("unAvailableRoomInfo");j&&ke.y7.remove("unAvailableRoomInfo");const B=(0,Oo.Z)("minPriceRoomKey")||"";let{checkIn:H,checkOut:U,needSelectTime:V,timeOffset:G}=_.calendar||{};if(V){const e=(0,Re.SQ)(G).dateStr;H=(0,Re.bU)(e,7).dateStr,U=(0,Re.bU)(e,8).dateStr}return{checkIn:(0,hi._W)(H,"-"),checkOut:(0,hi._W)(U,"-"),priceType:getPriceType(k.display,k.showtotalamt),adult:_.roomGuest&&_.roomGuest.adults,popularFacilityType:"1"===k.travelpurpose?"Business":"",mpRoom:k.mproom,fgt:k.fgt,hotelUniqueKey:k.stand||k.hoteluniquekey||k.uniquekey,child:_.roomGuest&&_.roomGuest.children,roomNum:_.roomGuest&&_.roomGuest.rooms,masterHotelId:e,age:_.roomGuest&&_.roomGuest.childAges&&_.roomGuest.childAges.length&&_.roomGuest.childAges.join(",")||"",childBed:_.roomGuest&&_.roomGuest.childBeds&&_.roomGuest.childBeds.length&&_.roomGuest.childBeds.join(",")||"",childMeal:_.roomGuest&&_.roomGuest.childMeals&&_.roomGuest.childMeals.length&&_.roomGuest.childMeals.join(",")||"",childType:_.roomGuest&&_.roomGuest.childTypes&&_.roomGuest.childTypes.length&&_.roomGuest.childTypes.join(",")||"",cityId:k.city||k.cityid,discounts:k.discounts,roomkey:k.roomkey,minCurr:k.mincurr,minPrice:k.minprice,fixsubhotel:k.fixsubhotel,hotel:I||k.hotelid||k.hotel,versionControl:[{key:"RoomCardVersionB",value:"T"}],signInRoomKey:k.signinroomkey||"",signInType:k.signintype||0,filterCondition:R?{discount:R}:null,unAvailableRoomInfo:j,minPriceRoomKey:B,edmHotelData:(0,Oo.Z)("edmHotelData"),priceExt:k.priceext||"",guideLogin:"T",needTagMerge:"T"}}function replaceParamVal(e,_){let k=location?location.href.toString():"";e.forEach((function(e,I){k=tools_link_replaceOrSplice(k,e,_[I])})),history.replaceState(null,"",k)}function getFilterValueFromUrl(){return vi.lB.reduce(((e,_)=>e|((0,Oo.Z)(_.key,"")===_.value?_.filterValue:0)),0)}function updateSeoCode(e){const _=document.querySelector('script[type="application/ld+json"]');if(_&&_.innerHTML)try{const k=JSON.parse(_.innerHTML),I=(0,Ui.Z)(e,"saleRoom[0].money.price")||"",C=H.default.getByKey("cargo.currency")||"",R=(0,Yo.I)("key.hotel.online.detail.seo.from.price",(0,So.formatCurrency)(C,I));k.priceRange=R,_.innerHTML=JSON.stringify(k)}catch(e){(0,te.fU)({logDesc:"err_hoteldetail_seopriceparse",logKey:"err_hoteldetail_seopriceparse",actionType:"load",logValue:{message:e.message}})}}function getPriceRangeFromUrl(){let e=0,_=+(0,Oo.Z)("LowPrice")||0,k=(0,Oo.Z)("HighPrice")||-1;k&&k.includes&&k.includes("+")?(e=+k.slice(0,k.length-1),k=-1):k=+k;let I={};return I=(0,Oo.Z)("barcurr")!==(0,Js.zC)()?{low:0,high:-1,max:0}:{low:_,high:k,max:e},I}function showGoldenMask(e){let _={title:(0,Yo.I)("key.hotel.homepage.gold.membership.free.trial.pop-up"),subTitle:e,btnMsg:(0,Yo.I)("key.hotel.book.goldtrial.button"),page:"detail"};Ce.Z&&au.show({Child:GoldenMask,data:_,header:"close",animation:!0,fclass:"goldenInfo",callback:()=>{}})}const saveBrowserPrice=(e,_)=>{const k=(0,Ui.Z)(e,"baseRooms[0].saleRoom[0].money.price",""),I=(0,Ui.Z)(e,"priceType","");if(!k)return;let C=ke.Xb.get(vi.pZ)||{};const R="hotelId_".concat(_.hotel);if(delete C[R],Object.keys(C).length>=40)for(let e in C){if(Object.keys(C).length<=30)break;delete C[e]}const j=(0,Js.zC)(),B="".concat(_.roomNum,"_").concat((0,Re.e3)(_.checkIn,_.checkOut));C[R]={price:k,currency:j,priceType:I,num_night:B},ke.Xb.set(vi.pZ,C)},su=function updateRoomList(e){let _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return k=>{var I,C,R,j;const B=e||{},U={initData:B.initData,soloHotelInfo:B.initData&&B.initData.soloHotelInfo||null,baseRoom:B.baseRoom,childPolicy:B.initData&&B.initData.childPolicy||{},searchBarData:B.searchBarData,masterHotelId:null===(I=B.initData)||void 0===I||null===(C=I.base)||void 0===C?void 0:C.masterHotelId,searchedNum:null===(R=B.baseRoom)||void 0===R?void 0:R.searchedNum};let V=getParam(U.masterHotelId,U.searchBarData),{checkIn:G="",checkOut:q="",adult:z=1,child:J=0,roomNum:Q=1,age:ee="",childBed:ne="",childMeal:re="",childType:oe="",needTagMerge:ie=""}=V,ae=(0,Oo.Z)("feature")||"";if((null===(j=U.baseRoom)||void 0===j?void 0:j.firstLoad)||replaceParamVal(["checkin","checkout","adult","children","crn","ages","beds","meals","types"],[G,q,z,J,Q,ee,ne,re,oe,ie]),(ke.y7.get("feature")||"1189"==ae)&&(V.feature=["1189"]),U.soloHotelInfo)return k(updateNearbyHotel(V)),void k(updateListStatus(vi.Xy.SOLOHOTEL));const removeNationalityCookie=()=>{go.Z.remove("restrict")};k(updateCalendarPrice(V)),k(updateRooms(V,_)).then((e=>{let{data:_,success:I,fail:C}=e;if(removeNationalityCookie(),!_||_.errorType)throw"no response";I((()=>{var e,I,C,R;const{baseRooms:j=[],compensatedRoom:B=[],soldoutRoom:G=[],hotelInspireInfo:q={},experienceMemberReward:z={},bookingStatus:J=0,priceLogParam:Q,traceId:ee,_duration:ne}=_;H.default.setByKey("traceId",ee),H.default.setByKey("priceLogParam",Q),saveBrowserPrice(_,V),(null==z?void 0:z.desc)&&showGoldenMask(z.desc),_.masterHotelId=U.masterHotelId,k(updateBaseRooms(_)),k(updateSoldOutData({isSoldOut:!1}));const re=(null===(e=U.baseRoom)||void 0===e?void 0:e.firstLoad)?getFilterValueFromUrl():0;let oe=null;(null===(I=U.baseRoom)||void 0===I?void 0:I.firstLoad)&&(oe=getPriceRangeFromUrl());const ie={low:oe?oe.low:U.baseRoom.low,high:oe?oe.high:U.baseRoom.high,firstLoad:null===(C=U.baseRoom)||void 0===C?void 0:C.firstLoad,filterValue:re};if(k(updatePriceTag({low:ie.low||0,high:ie.high||-1,max:oe?oe.max:0})),k(filterAndSortBaseRooms({baseRooms:j,compensatedRoom:B,context:ie})),null===(R=U.baseRoom)||void 0===R?void 0:R.firstLoad){const e=U.baseRoom&&U.baseRoom.brs&&U.baseRoom.brs.length&&U.baseRoom.brs[0];(0,te.fU)(logStartPriceRoom(e,U.masterHotelId)),updateSeoCode(e),(0,te.fU)(logRoomListLoadTime(U.masterHotelId)),k(afterFirstLoadBaseRooms({firstLoad:!1,hotelInspireInfo:q})),(0,tu.vp)(U,e),(0,Dc.or)(pa.sP,{name:"rateplan request",value:ne})}if(k(refreshChildPolicy(V.child>0)),(0,te.fU)(hoteldetailprice(U,dispatch_objectSpread(dispatch_objectSpread({},_),ie))),j.length||B.length||(0,te.fU)(logNoRoom(U)),z&&Object.keys(z).length&&k(updateExperienceMemberReward(z)),J&&k(updateBookingStatus(vi.Xy.NOTAVAILABLE)),!lu)if(lu=!0,j.length>0){(0,Ui.Z)(_,"baseRooms[0].saleRoom[0].money.price","")&&(0,te.fU)(showFirstBaseRoom())}else if(B.length>0){(0,Ui.Z)(_,"compensatedRoom[0].saleRoom[0].money.price","")&&(0,te.fU)(showFirstBaseRoom())}else if(G.length>0){(0,Ui.Z)(_,"soldoutRoom[0].saleRoom[0].money.price","")&&(0,te.fU)(showFirstBaseRoom())}})),C((e=>{k(updateListStatus(vi.Xy.SOLDOUT)),(0,te.fU)(logNoRoom(U)),(0,te.fU)(logNoRoomReason(e))}))})).catch((e=>{removeNationalityCookie(),k(updateListStatus(vi.Xy.SOLDOUT)),(0,te.fU)(logUpdateRoomErr(e))})),k(updateNearbyHotel(V))}},cu="ROOMLISTUPDATE",uu="ROOMLISTLOADING";var du=k(17735);const pu=function getCalendarRelDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{relindate:_=0,reloutdate:k=0,relatedate:I=0,checkIn:C,checkOut:R}=e;_=+_||0,k=+k||0,I=+I||0;let j=(new Date).toLocaleDateString();if(C=new Date(C),R=new Date(R),_&&k){let e=C;C=(0,Re.bU)(e,_).date,R=(0,Re.bU)(e,k).date}else I&&(R=(0,Re.bU)(R,I).date);if(C.getTime()>=R.getTime()){C=new Date(j);let e=new Date(j);e=(0,Re.bU)(e,1).date,R=e}return{checkIn:(0,hi._W)(C),checkOut:(0,hi._W)(R),nights:(0,Re.e3)(C,R)}},hu="SEARCHUPDATE";const fu=0,mu=1,gu=2,vu=4,yu=6,bu=7;var _u=k(82015),wu=k(43411);const tools_guestVerify=(e,_)=>{const k=H.default.getByKey("GuestVerify");e&&k&&k({email:e,callback:e=>{const{success:k,fail:I}=_||{};if("1"===(null==e?void 0:e.returnCode))k?k():window.location.reload();else if(I)I();else{const e="//".concat(window.location.host,"/order/all");window.open(e)}}})};var Eu=k(49688),Su=k(48467).default,Ou=k(24499).default;const verifyRequest=e=>{const{position:_,orderId:k,url:I,requestData:C={},silence:R=!1,loading:j,success:B,fail:H,failTrace:U}=e||{};Su({url:I,silence:R,loading:j,data:Object.assign({},C,{token:(0,Oo.Z)("token"),sign:(0,Oo.Z)("tripsignature")}),success:e=>{const{ShowLogin:I,email:C}=e||{};I||C?modifyToken(_,k,C):B&&B(e)},fail:e=>{"function"==typeof U&&U(e),H?H(e):Ou.show({title:(0,Yo.I)("error_parameter"),style:{width:"560px"},button:[{text:(0,Yo.I)("common_sure")}],close:!0,maskClosable:!0})}})},modifyToken=(e,_,k)=>{Ou.hide(),(0,te.fU)({logKey:"ibu_htl_".concat((0,pa.h8)(),"_modify_token"),logDesc:"modify_token",logValue:{position:e,orderid:_}}),k?tools_guestVerify(k,{success:()=>{verifyResult(e,_,"success"),window.location.reload()},fail:()=>{verifyResult(e,_,"close")}}):(0,se.asyncComponent)("Account").action("showLogin",{paramObj:{},successCallback:()=>{verifyResult(e,_,"success"),window.location.reload()},closeCallback:()=>{verifyResult(e,_,"close")}})},verifyResult=(e,_,k)=>{(0,te.fU)({logKey:"ibu_htl_".concat((0,pa.h8)(),"_modify_token_result"),logDesc:"modify_token_result",logValue:{position:e,orderid:_,result:k}})};var Tu=k(7533);const getRoomList=e=>_=>{const k=Number((0,Oo.Z)("orderid")),I=(0,Oo.Z)("cityId"),C=Number((0,Oo.Z)("hotelid"));let{checkIn:R="",checkOut:j=""}=(null==e?void 0:e.calendar)||{};R=R.replace(/\//g,"-"),j=j.replace(/\//g,"-"),_(function loadOrderRoomList(){return{type:uu}}()),verifyRequest({position:"getrooms",orderId:k,url:"/modifyRoomType",requestData:{orderId:k,cityId:I,masterHotelId:C,checkIn:R,checkOut:j},silence:!0,success:k=>{const{baseRooms:I,originRoomInfo:C,roomNum:R,timeOffset:j}=k||{},B=(e=>{var _,k,I,C;let{checkIn:R="",checkOut:j=""}=(null==e?void 0:e.calendar)||{};R=null===(_=R)||void 0===_?void 0:_.replace(/\//g,"-"),j=null===(k=j)||void 0===k?void 0:k.replace(/\//g,"-");let B=null===(I=(0,Oo.Z)("checkin"))||void 0===I?void 0:I.replace(/\//g,"-"),H=null===(C=(0,Oo.Z)("checkout"))||void 0===C?void 0:C.replace(/\//g,"-");return B&&H&&B===R&&H===j})(e);_(function updateOrderRoomList(e){return{type:cu,payload:e}}({baseRooms:I,originRoomInfo:C,originOrderRoom:B})),_(function updateSearch(e){return{type:hu,payload:e}}({timeOffset:j,roomNum:R}))}})};var ku=k(53956);function book_ubtlog_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function book_ubtlog_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?book_ubtlog_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):book_ubtlog_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const getBasicInfoFromProps=e=>{var _,k,I,C,R,j,B,H,U;return{masterhotelid:((null==e||null===(_=e.data)||void 0===_?void 0:_.masterHotelId)||(null==e||null===(k=e.data)||void 0===k||null===(I=k.baseroominfo)||void 0===I?void 0:I.masterhotelid))+"",baseroomid:(null==e||null===(C=e.baseRoom)||void 0===C?void 0:C.roomId)+"",roomid:(null==e||null===(R=e.data)||void 0===R||null===(j=R.base)||void 0===j?void 0:j.roomId)+"",roomuniquekey:null==e||null===(B=e.data)||void 0===B||null===(H=B.base)||void 0===H||null===(U=H.availParam)||void 0===U?void 0:U.roomUniqueKey}},getContent=(e,_)=>{if(e&&e.length){const k=e.find((e=>e.type===_));return k?k.content:""}return""},Iu=function showLoginOrRegisterResultShow(e,_,k,I,C,R){let j=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",B={page:e,masterhotelid:_,roomid:k,ishidepriceroom:I,type:C,result:R,errorcause:j};return{logKey:"ibu_htl_".concat((0,pa.R0)(),"_loginresult_show"),logValue:B,logDesc:"loginresult_show"}},logBaseRoomInfo=e=>{let _=[],k=[];return e.baseRoom.album.list.forEach((e=>{_.push(e.url)})),e.baseRoom.facility.forEach((e=>{k.push(e.text)})),{logDesc:"baseroominfo",logKey:"ibu_htl_".concat((0,pa.h8)(),"_baseroominfo"),actionType:"click",logValue:{masterhotelid:e.data.masterHotelId,baseroomid:e.baseRoom.roomId,roomname:e.baseRoom.roomName,roomsize:e.baseRoom.roomSize&&e.baseRoom.roomSize.text,bedinfo:e.data.bed&&e.data.bed.contentList,floorinfo:e.baseRoom.roomFloor,imageurl:e.baseRoom.album.list[0].url,roomdescription:e.baseRoom.note,roomfacilities:k,roomimageurls:_,windowinfo:getContent(e.data.facility,fs.Rz)+getContent(e.data.facility,fs.Km),cancelpriceinfo:e.data.money.priceDelete,showpriceinfo:e.data.money.price}}},BookClick=e=>{var _,k,I,C;let R="fit";return 8==(8&(null===(_=e.data)||void 0===_||null===(k=_.useEffect)||void 0===k?void 0:k.roomtype))&&(R="nofit"),(null===(I=e.data)||void 0===I||null===(C=I.base)||void 0===C?void 0:C.favorateRoom)&&(R="recommend"),{logDesc:"room_click",logKey:"ibu_htl_allpage_room_click",keyId:"188776",actionType:"click",logValue:{masterhotelid:e.data.masterHotelId,baseroomid:e.baseRoom.roomId,roomid:e.data.base.roomId,roomuniquekey:e.data.base.availParam.roomUniqueKey,roommoduletype:R,pagename:(0,pa.h8)()}}},logShowPriceChange=(e,_)=>({logDesc:"pricechange_prompt",logKey:"ibu_htl_dtl_pricechange_show",keyId:"198256",actionType:"show",logValue:{text:_&&_.message,direction:_&&_.priceChange,pagename:(0,pa.h8)(),vid:(0,pa.vQ)(go.Z.get("_bfa")),hotelId:getBasicInfoFromProps(e).masterhotelid,roomid:getBasicInfoFromProps(e).roomid,locale:H.default.getByKey("cargo.locale"),isLogin:H.default.getByKey("isLogged")?"T":"F",pageId:H.default.getByKey("pageId")}}),logPriceChangeAction=(e,_)=>({logDesc:"pricechange_action",logKey:"ibu_htl_".concat((0,pa.h8)(),"_pricechange_action"),actionType:"click",logValue:book_ubtlog_objectSpread(book_ubtlog_objectSpread({},getBasicInfoFromProps(e)),{},{action:_})}),logPriceChangeBtnClick=(e,_)=>({logDesc:"pricechange_action",logKey:"ibu_htl_dtl_pricechangebtn_click",keyId:"198257",actionType:"click",logValue:{type:_,vid:(0,pa.vQ)(go.Z.get("_bfa")),hotelId:getBasicInfoFromProps(e).masterhotelid,roomid:getBasicInfoFromProps(e).roomid,locale:H.default.getByKey("cargo.locale"),isLogin:H.default.getByKey("isLogged")?"T":"F",pageId:H.default.getByKey("pageId")}}),logSaleoutAction=(e,_)=>({logDesc:"saleout_action",logKey:"ibu_htl_".concat((0,pa.h8)(),"_saleout_action"),actionType:"click",logValue:book_ubtlog_objectSpread(book_ubtlog_objectSpread({},getBasicInfoFromProps(e)),{},{action:_})}),logSaleoutConfrimShow=(e,_)=>({logDesc:"saleout_cofirm_show",logKey:"ibu_htl_dtl_fullsale_show",keyId:"199045",actionType:"click",logValue:book_ubtlog_objectSpread(book_ubtlog_objectSpread({},getBasicInfoFromProps(e)),{},{pagename:(0,pa.h8)(),vid:(0,pa.vQ)(go.Z.get("_bfa")),locale:H.default.getByKey("cargo.locale"),pageId:H.default.getByKey("pageId"),message:_})}),logSoldoutBookBtnClick=e=>({logDesc:"sold out book btn click",logKey:"ibu_htl_fillorderpage_load",actionType:"click",logValue:book_ubtlog_objectSpread({},e)}),logAlertShow=(e,_)=>({logDesc:"detailPage_alert_shows",logKey:"ibu_htl_alert_show",keyId:"202441",actionType:"show",logValue:{locale:H.default.getByKey("cargo.locale"),pageId:H.default.getByKey("pageId"),type:_,message:e}}),logSignIn=e=>({logDesc:"sign_in",logKey:"ibu_htl_".concat((0,pa.h8)(),"_sign_in"),actionType:"click",logValue:getBasicInfoFromProps(e)}),logShowKeepBook=(e,_,k,I)=>{let C="dataexception";return k&&I?C="roomnumnotsatisfied,personnumnotsatisfied":k?C="roomnumnotsatisfied":I&&(C="personnumnotsatisfied"),{logDesc:"keepbook_show",logKey:"ibu_htl_".concat((0,pa.h8)(),"_keepbook_show"),actionType:"click",logValue:book_ubtlog_objectSpread(book_ubtlog_objectSpread({},getBasicInfoFromProps(e)),{},{text:_,reason:C})}},logShowKeepBookByService=(e,_)=>({logDesc:"keepbook_show",logKey:"P0106_SP0000_M0012_ID0001_exposure",actionType:"show",logValue:{orderRemindType:e=Number(e)+1,ischild:_,locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId")}}),logKeepBookAction=(e,_)=>({logDesc:"keepbook_action",logKey:"ibu_htl_".concat((0,pa.h8)(),"_keepbook_action"),actionType:"click",logValue:book_ubtlog_objectSpread(book_ubtlog_objectSpread({},getBasicInfoFromProps(e)),{},{action:_})}),logKeepBookActionByService=(e,_,k)=>({logDesc:"keepbook_action",logKey:"P0106_SP0000_M0012_ID0001_click",actionType:"click",logValue:{orderRemindType:e=Number(e)+1,ischild:_,buttonType:k,locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId")}}),logRoomLoginClick=(e,_)=>{var k,I,C,R,j;return{logDesc:"dtl_roomlogin_click",logKey:"ibu_htl_dtl_roomlogin_click",actionType:"click",logValue:{masterhotelid:((null==e||null===(k=e.data)||void 0===k?void 0:k.masterHotelId)||(null==e||null===(I=e.data)||void 0===I||null===(C=I.baseroominfo)||void 0===C?void 0:C.masterhotelid))+"",roomid:(null==e||null===(R=e.data)||void 0===R||null===(j=R.base)||void 0===j?void 0:j.roomId)+"",type:_,page:H.default.getByKey("pageId")}}},logRoomLoginShow=(e,_)=>{var k,I,C,R,j;return{logDesc:"dtl_roomlogin_show",logKey:"ibu_htl_dtl_roomlogin_show",actionType:"show",logValue:{masterhotelid:((null==e||null===(k=e.data)||void 0===k?void 0:k.masterHotelId)||(null==e||null===(I=e.data)||void 0===I||null===(C=I.baseroominfo)||void 0===C?void 0:C.masterhotelid))+"",roomid:(null==e||null===(R=e.data)||void 0===R||null===(j=R.base)||void 0===j?void 0:j.roomId)+"",type:_,page:H.default.getByKey("pageId")}}},logChildRoomClick=e=>{var _,k,I;return{logDesc:"dtl_jp_child_room_baseinfo_click",logKey:"ibu_htl_c_online_dtl_room_baseinfo_click",actionType:"click",logValue:{masterhotelid:getBasicInfoFromProps(e).masterhotelid,childrentype:(null==e||null===(_=e.data)||void 0===_||null===(k=_.base)||void 0===k||null===(I=k.guestCount)||void 0===I?void 0:I.childType)||"",page:H.default.getByKey("pageId")}}};var Cu=k(61686),Pu=k(39621).default,Lu=k(67294);class Txt extends Pu{constructor(e){super(e)}getIcon(){const{icon:e}=this.props;if(e)return Lu.createElement(Ee.Z,{type:e})}getKid(){const{lineType:e,children:_}=this.props;return Lu.createElement("span",{className:e&&"u-txt_".concat(e)},_||"default")}render(){const{type:e,className:_,icon:k,iconRight:I}=this.props;let R="u-txt";const B=j()(R,{["".concat(R,"-").concat(e)]:e,["".concat(R,"-icon")]:k},_),H=this.getIcon(),U=this.getKid();return Lu.createElement("span",(0,C.Z)({},this.props,{className:B}),!I&&H,U,I&&H)}}var Nu=k(39621).default,Du=k(67294);class unit_price_Price extends Nu{constructor(e){super(e)}render(){const{price:e,currency:_,className:k,type:I}=this.props,R=j()("u-price",k,I);return Du.createElement("div",(0,C.Z)({},this.props,{className:R}),Du.createElement("span",{dangerouslySetInnerHTML:{__html:(0,So.formatFragement)(_,e,{ctx:this.ctx,option:{currencyFormatCustomized:"<span class='u-price_currency'>${value}</span>",numberFormatCustomized:"<span class='u-price_num'>${value}</span>"}})}}),this.props.off&&Du.createElement(Txt,{className:"u-price_off"}," ",this.props.off))}}var Au=k(39621).default,Ru=k(67294);class CheckInOut extends Au{constructor(e){super(e)}render(){const{checkIn:e,checkOut:_,isHourRoom:k}=this.props,I=k?(0,Re.gD)(e,_)/36e5|0:(0,Re.e3)(e,_);return Ru.createElement("div",{className:"m-checkInOut"},e&&Ru.createElement("div",{className:"m-checkInOut_time"},Ru.createElement("div",{className:"timeLable"},this.$translate("orderdetail_input_checkin")),Ru.createElement("div",{className:j()("time",{smallFont:"ru-RU"===this.$locale})},this.$localeDate(k?"ymdhmseShortString":"ymdeShortString",e))),Ru.createElement("div",{className:"m-checkInOut_qty"},k?this.$translatePlural("key.hotel.orderdetail.hourlyroom.hour",I):this.$translatePlural("key.hotel.common.night",I)),_&&Ru.createElement("div",{className:"m-checkInOut_time checkOut"},Ru.createElement("div",{className:"timeLable"},this.$translate("orderdetail_input_checkout")),Ru.createElement("div",{className:j()("time",{smallFont:"ru-RU"===this.$locale})},this.$localeDate(k?"ymdhmseShortString":"ymdeShortString",_))))}}const goToPay=(e,_,k)=>{if(e)if(e.createPayOrderSwitch&&e.payLink){let _=e.payLink;_.includes("pageId")||_.includes("/complete")||(_=e.payLink+"&pageId=10320668153"),window.location.href=k?"".concat(_,"&returnUrl=").concat(encodeURIComponent(k)):"".concat(_)}else toPost(e.FormData||e.PostData||e.formData,_)},toPost=(e,_)=>{const k="string"==typeof e;try{let _=document.createElement("div");_.innerHTML=k?e:e.content,document.body.appendChild(_),(k?_.firstChild:_.querySelector("#".concat(e.domId.replace("#","")))).submit()}catch(k){(0,te.fU)({logKey:"ibu_htl_error",logDesc:"toPost_error",logValue:{errorInfo:k,formData:e}}),_&&_()}};var xu=k(70286);const ju=function isNaverAid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xu.FW.COOKIE;const _=(0,xu.Gm)({type:e})||{},k=(0,Oo.Z)("Allianceid")||_.AllianceID||"";return"854457"===k};k(48467).default;var Bu=k(35425).default,Mu=k(24499).default;const modifyOrder=e=>{const{position:_,orderId:k,requestData:I={},IgnoreRepeat:C=!1,updateCallback:R}=e||{},j=go.Z.get("naverLabel");verifyRequest({position:_,orderId:k,url:"/ModifyOrder",requestData:Object.assign({},I,{IgnoreRepeat:C,callbackUrl:"//".concat(location.host,"/hotels/complete"),nlabel:!(0,Pe.xb)(j)&&ju()?j:"",rmsToken:(0,Tu.e)(),deviceBrand:(0,du.g_)()||""}),success:e=>{const{Code:_,orderid:C,ExceptionMsg:j}=e||{};switch(logCreateNewOrderV1(C,j),_){case fu:case bu:logCreateNewOrder(C,k),goToPay(e);break;case mu:logCreateNewOrder(C,k),function showPriceChangeModal(e){Mu.show({fclass:"warning",title:e.ExceptionMsg,button:[{text:(0,Yo.I)("orderdetail_continue_book"),sure:()=>{goToPay(e)}},{text:(0,Yo.I)("common_leave")}]})}(e);break;case gu:!function showRepeatModal(e){Mu.show({fclass:"warning",title:e,button:[{text:(0,Yo.I)("common_know")}]})}(j);break;case vu:!function showRepeatCityModal(e,_,k){Mu.show({fclass:"warning",title:e,button:[{text:(0,Yo.I)("orderdetail_continue_book"),sure:()=>{modifyOrder({position:"cityPepeat",orderId:_,requestData:k})}},{text:(0,Yo.I)("common_leave")}]})}(j,k,I);break;case yu:Bu({content:j,fclass:"success"}),logToastShow(j),R&&R(),(e=>{const _=H.default.getByKey("initData.orderInfo.orderID")||"",k=[];null==k||k.push({TagDataType:"WrapTripPartial",TagDataValue:"T"}),Su({url:"/getOrderDetail",silence:!0,data:{orderid:_,token:(0,Oo.Z)("token"),TimeZone:(0,Re.iT)(),searchTags:k,sign:(0,Oo.Z)("tripsignature")},success:k=>{const{errorType:I=""}=k||{};if(I==Eu.QS.EMAILVERIFICATION){const{I18nOnlineGuestVerifySDK:e}=window;try{(new e).show({orderId:_,moduleName:"HtlOnlineOrderDetail",successCallback:()=>{window.location.reload()}})}catch(e){return}}else{const{ShowLogin:_,email:I}=k||{};_?(0,wu.Z)():I?tools_guestVerify(I):((0,_u.c)(k),e&&e(k))}}})})();break;default:Bu({content:j,fclass:"warning"}),logToastShow(j)}},failTrace:e=>{logCreateNewOrderV1("",JSON.stringify(e))}})};function logToastShow(e){(0,te.fU)({logKey:"ibu_htl_c_online_toast_show",logValue:{page:H.default.getByKey("pageId")||"",locale:H.default.getByKey("cargo.locale")||"",popType:10,pop_msg:e}})}function logCreateNewOrder(e,_){(0,te.fU)({logKey:"ibu_htl_".concat((0,pa.h8)(),"_createneworder"),logDesc:"create_neworder",logValue:{oldorderid:_,neworderid:e}})}function logCreateNewOrderV1(e,_){(0,te.fU)({logKey:"htl_t_online_orddtl_ordedit_submit_load",logDesc:"create_neworder_v1",logValue:{page:H.default.getByKey("pageId")||"",locale:H.default.getByKey("cargo.locale")||"",orderid:e||"",message:_||""}})}var Fu=k(39621).default,Hu=k(24499).default,Ku=k(67294);class ModifyMask extends Fu{constructor(e){super(e),this.state={},this.ubtMapping={logToastShow:U.cQ}}getBtnDisplayText(){const{data:e={}}=this.props,{Action:_={}}=e;switch(_.type){case 1:return this.$translate("common_submit");case 2:return this.$translate("common_topay");case 3:return this.$translate("common_toguarantee");default:return this.$translate("common_submit")}}submit(){Hu.hide();const{checkIn:e,checkOut:_}=this.props;modifyOrder({position:"checkdate",orderId:this.props.orderId,requestData:{TimeZone:(0,Re.iT)(),CheckIn:(e||"").replace(/\//g,"-"),CheckOut:(_||"").replace(/\//g,"-")}})}render(){const{data:e={},checkIn:_,checkOut:k}=this.props,{roomName:I,roomDesc:C}=(null==e?void 0:e.RoomInfo)||{};return Ku.createElement("div",{className:"m-checkDate"},Ku.createElement("div",{className:"m-checkDate_tip"},this.$translate("key.hotel.orderdetail.manage.confirm.prompt.order")),Ku.createElement("div",{className:"m-checkDate_date"},Ku.createElement(CheckInOut,{checkIn:_,checkOut:k})),Ku.createElement("div",{className:"m-checkDate-room"},I?Ku.createElement("p",{className:"m-checkDate-room-name"},I):null,C?Ku.createElement("p",{className:"m-checkDate-room-desc"},C):null),Ku.createElement("div",{className:"m-checkDate-price"},Ku.createElement("div",{className:"m-checkDate-price-table"},(e.Price||[]).map(((e,_)=>{if(e)return Ku.createElement("div",{key:_,className:j()("m-checkDate-price-tr","primary")},Ku.createElement("div",{className:"title"},e.title),e.price&&e.currency&&Ku.createElement("div",{className:"text"},Ku.createElement(unit_price_Price,{price:e.price,currency:e.currency,className:j()({orange:1===e.style})})))})))),Ku.createElement("div",{className:"m-checkDate-description"},(e.Description||[]).map(((e,_)=>Ku.createElement("div",{key:_,className:"m-checkDate-description-item"},Ku.createElement(Ee.Z,{type:"prompt"}),Ku.createElement("div",{className:"text"},e.text))))),Ku.createElement("div",{className:"m-checkDate-btn"},Ku.createElement(Ac.Z,{type:"primary",onClick:this.submit.bind(this)},this.getBtnDisplayText())))}}var Uu=k(95528),Zu=k(31903);class optionType_OptionType{constructor(e){this.getQuery=e=>Ce.Z?(0,Oo.Z)(e):(0,Ui.Z)(this.query,e,""),this.getOptionType=()=>this.getQuery("optionType"),this.provinceLevel=()=>{const e=this.getQuery("city")||this.getQuery("cityId");return Number(e)<=0},this.isProvinceDistrict=()=>{const e=this.getOptionType();return Si.Gd.includes(e)},this.isDirectSearch=()=>"1"===this.getQuery("directSearch"),this.query=e||{}}}const Vu=function recursiveSort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_="";return e.forEach((e=>{1===e.status&&(_=e.list&&0!==e.list.length?Vu(e.list):e.value)})),_},getDeduplication=e=>{const{pageNo:_,isRecommend:k,store:I}=e;let C=[];if(k){const e=I.getState(),k=(0,Ui.Z)(e,"longList.hotelList.list",[]);let R=(0,Ui.Z)(e,"metaHotel.card.base.hotelId","");C=[...k,..._>1?(0,Ui.Z)(e,"longList.moreHotel.list",[]):[]].map((e=>e.base.hotelId)),R&&C.unshift(R)}return C};const hotelSearchSearchCondition=(e,_)=>{const{poi:k,mapParam:I={},searchCondition:C,initData:R,sortInfo:j,pageNo:B}=e;let U=function handleDateRel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const _="F"===H.default.getByKey("initData.TimeOffsetValid");let{checkInStr:k,checkOutStr:I,nights:C}=(0,Be.Lf)({checkIn:e.checkIn,checkOut:e.checkOut,timeOffset:!_&&e.timeOffset,maxNights:(0,Ys.Z)()}),R=(0,Oo.Z)("relindate")||0,j=(0,Oo.Z)("reloutdate")||0,B=(0,Oo.Z)("relatedate")||0;return e.checkIn&&e.checkOut&&(R=j=0),pu({checkIn:k,checkOut:I,nights:C,relindate:R,reloutdate:j,relatedate:B})}(C),V=(e=>{let _,k,I=(0,Ui.Z)(e,"optionType",""),C=(0,Ui.Z)(e,"optionId","");!Number(C)&&[Si.VS.City,Si.VS.IntlCity].includes(I)&&(C=(0,Ui.Z)(e,"city","")||(0,Ui.Z)(e,"cityId",""));try{_=decodeURIComponent((0,Ui.Z)(e,"optionName","")),k=decodeURIComponent((0,Ui.Z)(e,"display",""))}catch(I){_=(0,Ui.Z)(e,"optionName",""),k=(0,Ui.Z)(e,"display","")}const R=new optionType_OptionType(e),{isProvinceDistrict:j,isDirectSearch:B,getOptionType:H}=R;return{optionType:I,destination:j()||B()&&H()===Si.VS.District?k:"",keyword:Si.hS.indexOf(I)>-1&&!B()?"":_,optionId:C}})({optionId:(0,Oo.Z)("optionId"),optionType:(0,Oo.Z)("optionType"),optionName:(0,Oo.Z)("optionName"),display:(0,Oo.Z)("display")});return Object.assign(C,k.lat&&k.lng||_?k:{}),Object.assign({},C,{url:window.location.href,mapType:(0,Ui.Z)(R,"mapInfo.type","")},V,{checkIn:U.checkIn.replace(/\//g,"-"),checkOut:U.checkOut.replace(/\//g,"-"),sortType:Vu(j.list),pageNo:B},I)};var Wu=k(91734),Gu=k(48467).default,$u=k(39621).default,qu=k(67294);function toDetail_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function toDetail_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?toDetail_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):toDetail_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const getFindResult=e=>{const _=(e||[]).find((e=>e.status));return _?_.value:void 0},getFilterResult=e=>(e||[]).filter((e=>e.status)).map((e=>e.value)).join(",")||void 0,getPriceRange=(e,_,k,I)=>{const C=(0,ii.WH)("barcurr")||void 0;return C&&C===k?_<=0?e<=0?e=_=void 0:-1===_&&(_=0):e<=_&&(e=-1===e?I+"+":_=void 0):e=_=void 0,{HighPrice:e,LowPrice:_}},getSearchCondition=e=>{const{searchCondition:_,searchBarData:k}=e;if("detailPage"===H.default.getByKey("pageName")){var I,C,R;const{roomGuest:e,calendar:_,travel:j}=k||{};return{adult:null==e?void 0:e.adults,child:null==e?void 0:e.children,checkIn:null==_||null===(I=_.checkIn)||void 0===I?void 0:I.replace(/\//g,"-"),checkOut:null==_||null===(C=_.checkOut)||void 0===C?void 0:C.replace(/\//g,"-"),roomNum:null==e?void 0:e.rooms,age:null==e||null===(R=e.childAges)||void 0===R?void 0:R.join(","),travelPurpose:j?1:0}}return _||{}},getBedType=(e,_,k,I)=>e?"kingSize":_?"twinBed":k?"multiBed":I?"singleBed":"",zu=function generateUrlToDetail(e,_){var k,I,C,R,j,B;let U=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{Type:V,Position:G,position:q,base:z,trace:Q,priceLogParam:ee,matchFilter:te,logoTag:ne}=_;let{cityUrlName:re,hotelUrlName:oe,hotelId:ie,bookUrl:ae}=z||{};const{adult:le,age:se,child:ce,roomNum:ue,travelPurpose:de,checkIn:pe,checkOut:he}=getSearchCondition(e),{searchBarData:fe}=e,{roomGuest:me={}}=fe||{},ge=(null==z?void 0:z.guestCount)||{};let ve=se,ye="",be="",_e="";var we;if((null==ge?void 0:ge.childBed)&&(null==ge?void 0:ge.childMeal)&&(null==ge?void 0:ge.childType))ve=(null===(we=ge.ages)||void 0===we?void 0:we.join(","))||se,ye=ge.childBed.join(","),be=ge.childMeal.join(","),_e=ge.childType.join(",");else if((null==me||null===(k=me.childAges)||void 0===k?void 0:k.length)>0&&(null==me||null===(I=me.childBeds)||void 0===I?void 0:I.length)==(null==me||null===(C=me.childAges)||void 0===C?void 0:C.length)&&(null==me||null===(R=me.childMeals)||void 0===R?void 0:R.length)==(null==me||null===(j=me.childAges)||void 0===j?void 0:j.length)){var Ee,Se,Oe;ve=(null===(Ee=me.childAges)||void 0===Ee?void 0:Ee.join(","))||se,ye=(null==me||null===(Se=me.childBeds)||void 0===Se?void 0:Se.join(","))||"",be=(null==me||null===(Oe=me.childMeals)||void 0===Oe?void 0:Oe.join(","))||""}const Te=(0,ii.WH)("curr")||H.default.getByKey("cargo.currency")||void 0,Ie=(0,ii.WH)("subChannel");let{cityId:Ce,regionType:Pe}=q||{},{hoteluniquekey:Le,traceLogId:Ne=""}=Q||{};if("book"===G){const{card:_}=e.longList.metaHotel||{},{base:k,trace:I,position:C}=_||{};re=(null==k?void 0:k.cityUrlName)||void 0,oe=(null==k?void 0:k.hotelUrlName)||void 0,ie=(null==k?void 0:k.hotelId)||void 0,Ce=(null==C?void 0:C.cityId)||void 0,Le=(null==I?void 0:I.hoteluniquekey)||void 0}const{discount:De,star:Ae,rate:xe,breakfast:je,bookPolicy:Be,bedType:Me,payType:Fe}=e.filterCondition||{},He=getFilterResult(null==De?void 0:De.list),Ke=getFilterResult(null==Ae?void 0:Ae.list),Ue=getFilterResult(null==xe?void 0:xe.list),Ze=getFilterResult(null==je?void 0:je.list),Ve=getFilterResult(null==Be?void 0:Be.list),We=getFindResult(null==Me?void 0:Me.list),Ge=getFindResult(null==Fe?void 0:Fe.list);let $e="";ke.y7.get("feature")&&($e=ke.y7.get("feature").value||"");let qe={cityEnName:re,hotelEnName:oe,cityId:Ce,hotelId:ie,checkIn:pe,checkOut:he,adult:le,children:ce,crn:ue,ages:ve,beds:ye,meals:be,types:_e,travelpurpose:de,curr:Te,discounts:He,starlist:Ke,rating:Ue,fgt:(0,ii.WH)("fgt")||void 0,hasAidInUrl:!("meta"!==V||!(0,ii.WH)("allianceid"))||void 0,mincurr:(0,ii.WH)("mincurr")||void 0,minprice:(0,ii.WH)("minprice")||void 0,roomkey:"book"===G&&ee?ee.roomkey:void 0,mproom:"meta"===V&&(0,ii.WH)("mproom")||void 0,link:G,hoteluniquekey:Le,edmHotelData:(0,ii.WH)("edmHotelData")||void 0,utoken:(0,ii.WH)("utoken")||void 0,subChannel:Ie,feature:""===$e?void 0:$e,masterhotelid_tracelogid:(null==_||null===(B=_.trace)||void 0===B?void 0:B.traceLogId)||Ne,NewTaxDescForAmountshowtype0:H.default.getByKey("abResults","").includes("230815_IBU_pcpto")?"T":"F"};const ze=H.default.getByKey("locationFilter")||{};qe=Object.assign({},qe,ze);const Ye=(0,ii.WH)("barcurr")||void 0,{priceRange:Je}=e.filterCondition||{},{priceHigh:Xe,priceLow:Qe,priceBarMax:et}=Je||{},{HighPrice:tt,LowPrice:nt}=getPriceRange(Xe,Qe,Te,et);if("more"===V){let{highPrice:e,lowPrice:_,breakfast:k,immediate:I,freecancel:C,bedType:R,payType:j}=te||{};const{HighPrice:B,LowPrice:H}=getPriceRange(e,_,Te,et);[tt,nt,B,H].includes(void 0)||(qe=Object.assign({},qe,{barcurr:Ye&&Ye===Te?Ye:void 0,HighPrice:B,LowPrice:H})),qe=Object.assign({},qe,{breakfast:k?Ze:void 0,immediate:I&&-1!==(Ve||"").indexOf("2")?1:void 0,freecancel:C&&-1!==(Ve||"").indexOf("1")?1:void 0,kingsize:"KINGBED"===R&&1===We?1:void 0,twinbed:"TWINBED"===R&&2===We?1:void 0,multibed:"MULTIBED"===R&&4===We?1:void 0,singlebed:"SINGLEBED"===R&&3===We?1:void 0,fg:"fg"===j&&1===Ge?1:void 0,pp:"pp"===j&&2===Ge?1:void 0})}else qe=Object.assign({},qe,{barcurr:Ye&&Ye===Te?Ye:void 0,HighPrice:tt,LowPrice:nt,breakfast:Ze||void 0,immediate:-1!==(Ve||"").indexOf("2")?1:void 0,freecancel:-1!==(Ve||"").indexOf("1")?1:void 0,kingsize:1===We?1:void 0,twinbed:2===We?1:void 0,multibed:4===We?1:void 0,singlebed:3===We?1:void 0,fg:1===Ge?1:void 0,pp:2===Ge?1:void 0});let rt=(0,Uu.getDetailUrl)({data:qe,style:"S"})||ae;if(U)return rt;const ot=[];if(ot.push(_),(0,tu.lk)("select_item",null==e?void 0:e.searchCondition,ot),(0,J.yE)(ie),H.default.getByKey("pageId")===pa.Jb&&"labelColor"===e.longList.fontColor){const{timestamp:k,traceLogId:I}=_.trace||{},{soldOut:C,price:R=-1,priceDelete:j=-1,priceMask:B}=_.money||{},{promote:U,promotePercent:G}=_.discount||{},{hotelId:q,groupId:z,brandId:J,roomId:Q,maskInfo:ee}=_.base||{},{kingsize:te,twinbed:ne,multibed:re,singlebed:oe,fg:ie,pp:ae}=qe,se=H.default.getByKey("isLogged");var it,at,lt;if(Number(R))ke.y7.set("list_hotel_info",{timestamp:k,traceLogId:I,isMaskPrice:!!B,locale:H.default.getByKey("cargo.locale"),pageId:pa.Jb,isMemberLogin:se?"T":"F",isCrawler:"F",vid:(0,pa.vQ)(go.Z.get("_bfa")),uid:se?go.Z.get("uid"):"",cityId:Ce,regionType:Pe,adult:le,child:ce,roomNum:ue,checkIn:pe,checkOut:he,days:(0,Re.e3)(pe,he),bookable:C?"F":"T",hotelId:q,groupId:z,brandId:J,roomId:Q,hotelType:V,displayprice:{price:R,currency:(0,Js.zC)(),priceType:go.Z.get("IBU_showtotalamt")},discount:{priceDelete:j,percent:G||"",amount:U||""},searchCondition:{hasBreakfast:qe.breakfast?"T":"F",freecancel:qe.freecancel?"T":"F",immediateConfirm:qe.immediate?"T":"F",payType:ie?"fg":ae?"pp":"",bedType:getBedType(te,ne,re,oe),priceRange:{barcurr:qe.barcurr||"",highPrice:void 0!==qe.HighPrice?"".concat(qe.HighPrice):"",lowPrice:void 0!==qe.LowPrice?"".concat(qe.LowPrice):""}},pageType:(0,pa.ci)(),metaFlag:(null===(it=e.longList)||void 0===it?void 0:it.isMetaPage)||"T"===(null===(at=((null===(lt=e.longList)||void 0===lt?void 0:lt.extraFlag)||[]).find((e=>"meta"===e.key)))||void 0===at?void 0:at.value)||!1},{timeout:(new Date).getTime()+3e5})}ne&&ke.y7.set("logoTag",{hotelId:ie,logoTag:ne}),"meta"==V&&(0,Wu.bQ)(),rt&&window.open(rt),ke.y7.remove("list_hotel_info")},sendAdLog=e=>{const{base:_,adTag:k,index:I,searchCondition:C,hotelid:R}=e||{};var j;j={searchCondition:C,filterCondition:{},scenario:1,rmsToken:(0,Tu.e)(),traceAdContextId:null==k?void 0:k.traceAdContextId,source:10,sequence:I+1||0,isAdHotel:null==k?void 0:k.isAdTag,hotelId:+(null==_?void 0:_.hotelId)||R||0},Gu({url:"/clickAdPosition",data:j,silence:!0})},Yu="udpateRoomList";var Ju=k(48467).default;function bookAndConfirmApi_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function bookAndConfirmApi_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?bookAndConfirmApi_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):bookAndConfirmApi_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}var Xu=k(14890);const Qu={FreeCancel:1,NotFreeCancel:3,LadderCancellation:2},getPriceInfo=e=>{var _,k;const{searchBarData:I,data:C}=e||{},{calendar:R,roomGuest:j}=I||{},{adults:B,children:U,rooms:V}=j||{},{checkIn:G,checkOut:q}=R||{},{bookInfo:z,money:Q,newMoney:ee,base:te}=C||{},{total:ne,payType:re,moneyItemInfo:oe,includedTax:ie,excludedFee:ae}=ee||{},le=H.default.getByKey("initData")||{},{cityId:se="",cityName:ce="",regionType:ue="",masterHotelId:de}=le.base||{};let pe="",he="",fe="",me="";if(z&&z.length)for(let e=0;e<z.length;e++){const{type:_,hover:k}=z[e]||{};-1!==[fs.hu,fs.K5,fs.FA,fs.$v,fs.hR].indexOf(_)?(pe=_,he=k):-1!==[fs.iv,fs.xN,fs.Ak].indexOf(_)&&(fe=Qu[_],me=JSON.stringify(k||""))}const ge=(oe||[]).filter((e=>"promotion"===e.type));let ve=[];return ve.push({key:"ABTestResult",value:(0,Lc.PL)()?"B":"A"}),{timestamp:null===(_=H.default.getByKey("priceLogParam"))||void 0===_?void 0:_.timestamp,traceLogId:null===(k=H.default.getByKey("priceLogParam"))||void 0===k?void 0:k.rateplantracelogid,locale:H.default.getByKey("cargo.locale"),vid:(0,pa.vQ)(go.Z.get("_bfa")),pageId:pa.pt,isMemberLogin:H.default.getByKey("isLogged")?"T":"F",hotelId:de||"",roomId:(null==te?void 0:te.roomId)||"",isCrawler:(0,J.iO)(H.default.getByKey("traceId")),cityId:se,cityName:ce,regionType:ue,adult:B,child:U,roomNum:V,checkIn:G,checkOut:q,days:(0,Re.e3)(G,q),bookable:"T",mealsType:pe,mealsDescription:he,cancelType:fe,cancelDescription:me,displayPrice:{price:Q?Q.price:-1,currency:(0,Js.zC)(),priceType:go.Z.get("IBU_showtotalamt")},discount:ge.map((e=>({type:e.subType||"unknown",price:e.price}))),tax:{includedTax:ie?ie.price:-1,excludedFee:ae?ae.price:-1},totalPrice:{price:ne?ne.content:-1,payType:re},isMaskPrice:!(!(null==te?void 0:te.maskInfo)&&!(null==te?void 0:te.signInNote)),traceFlag:ve}};var ed=k(33589);var td,nd,rd=k(24499).default,od=k(67294);function book_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function book_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?book_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):book_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let id=((nd=class Book extends book_view_View{constructor(e){var _;super(e),_=this,this.handleClick=()=>{var e,_,k,I,C,R,j,B,U,V,G,q,z,J,Q,ee,te,ne,re,oe,ie,ae,le,se,ce,ue,de,pe,he,fe,me,ge,ve,ye,be,_e,we,Ee,Se,Oe,Te,Ie;(0,Dc.wA)("book click");const Ce=ke.y7.get("detail_query_id");Ce?(ke.y7.set("detail_query_id_order",Ce),ke.y7.remove("list_exposure_query_id")):ke.y7.set("detail_query_id_order",(0,Ti.RL)());const{searchBarData:Pe={}}=this.props||{},{roomGuest:Le}=Pe||{},{adults:Ne,children:De=0,rooms:Ae}=Le||{};let Re=[{filtername:"adult",filtervalue:Ne},{filtername:"child",filtervalue:De},{filtername:"roomnum",filtervalue:Ae}];const xe=function getSaleRoomRatePlanId(e){var _,k;return((null==e||null===(_=e.base)||void 0===_||null===(k=_.availParam)||void 0===k?void 0:k.roomkey)||"").split("_")[1]||""}(null===(e=this.props)||void 0===e?void 0:e.data);let je=0;(null===(_=this.props.data)||void 0===_||null===(k=_.childrenWordsType)||void 0===k?void 0:k.tag)?je=2:(null===(I=this.props.data)||void 0===I||null===(C=I.base)||void 0===C||null===(R=C.guestCount)||void 0===R?void 0:R.children)>0&&(je=1),this.$safeLog("logSaleCardClick",{rmlist_tracelogid:(null===(j=this.props)||void 0===j||null===(B=j.extraFlag)||void 0===B||null===(U=B.filter((e=>"rmlist_tracelogid"===(null==e?void 0:e.key))))||void 0===U||null===(V=U[0])||void 0===V?void 0:V.value)||null,masterhotelid:(null===(G=this.props)||void 0===G||null===(q=G.extraFlag)||void 0===q||null===(z=q.filter((e=>"masterhotelid_token"===(null==e?void 0:e.key))))||void 0===z||null===(J=z[0])||void 0===J?void 0:J.value)||null,masterhotelid_token:(null===(Q=this.props)||void 0===Q||null===(ee=Q.extraFlag)||void 0===ee||null===(te=ee.filter((e=>"masterhotelid_token"===(null==e?void 0:e.key))))||void 0===te||null===(ne=te[0])||void 0===ne?void 0:ne.value)||null,roomid:(null===(re=this.props)||void 0===re||null===(oe=re.data)||void 0===oe||null===(ie=oe.base)||void 0===ie?void 0:ie.roomId)||null,pkg_id:(null===(ae=this.props)||void 0===ae||null===(le=ae.data)||void 0===le||null===(se=le.xProOption)||void 0===se?void 0:se.pkId)||null,room_token:(null===(ce=this.props)||void 0===ce||null===(ue=ce.data)||void 0===ue?void 0:ue.roomToken)||null,page:H.default.getByKey("pageId"),locale:H.default.getByKey("cargo.locale"),rm_mbrm_rank:(null===(de=this.props)||void 0===de?void 0:de.outerIndex)+1,rm_rmlist_rank:(null===(pe=this.props)||void 0===pe?void 0:pe.rank)+1,roomPackageType:23==(null===(he=this.props)||void 0===he||null===(fe=he.data)||void 0===fe||null===(me=fe.xProOption)||void 0===me?void 0:me.pkType)?1:2,rm_dispatchid:(null===(ge=this.props)||void 0===ge||null===(ve=ge.extraFlag)||void 0===ve||null===(ye=ve.filter((e=>"rm_dispatchid"===(null==e?void 0:e.key))))||void 0===ye||null===(be=ye[0])||void 0===be?void 0:be.value)||null,masterhotelid_dispatchid:null,rm_taglist:null===(_e=this.props)||void 0===_e||null===(we=_e.data)||void 0===we||null===(Ee=we.logTags)||void 0===Ee?void 0:Ee.map((e=>({tagfeatureid:null==e?void 0:e.tagfeatureid,tagtitle:null==e?void 0:e.tagtitle}))),rmlist_query_id:Ce||(0,Ti.RL)()||"",filterlist:Re||[],rateplanid:xe,offertype:De>0?je:"",moduletype:De>0?(null===(Se=this.props.data)||void 0===Se||null===(Oe=Se.base)||void 0===Oe||null===(Te=Oe.guestCount)||void 0===Te||null===(Ie=Te.childType)||void 0===Ie?void 0:Ie.length)>0?2:1:""});const{source:Be,isCompensatedRoom:Me,data:Fe={}}=this.props,He=(0,Ui.Z)(this.props,"data.base.buttonType","book");var Ke,Ue;if(Me&&1===He)this.$safeLog("logBaseRoomInfo",this.props),this.$safeLog("BookClick",this.props),(null==Fe||null===(Ke=Fe.base)||void 0===Ke||null===(Ue=Ke.guestCount)||void 0===Ue?void 0:Ue.childType)&&this.$safeLog("logChildRoomClick",this.props),this.checkRoomAndAdultByService().then(this.bookRoom,this.showRoomsAdults);else if(1===He||"meta"===Be){var Ze,Ve;this.$safeLog("logClickBook",{saleRoom:this.props.data,baseRoom:this.props.baseRoom}),this.$safeLog("logBaseRoomInfo",this.props),this.$safeLog("BookClick",this.props),(null==Fe||null===(Ze=Fe.base)||void 0===Ze||null===(Ve=Ze.guestCount)||void 0===Ve?void 0:Ve.childType)&&this.$safeLog("logChildRoomClick",this.props),this.checkRoomAndAdultByService().then(this.bookRoom,this.showRoomsAdults)}else this.$safeLog("logSignIn",this.props),this.signup()},this.login=()=>{this.$component("Account").action("showLogin",{paramObj:{},successCallback:this.loginSuccess,failcallback:this.loginFail})},this.signup=()=>{this.$component("Account").action("register",{paramObj:{},successCallback:this.registerSuccess,failcallback:this.registerFail})},this.loginSuccess=()=>{var e,_,k,I,C;const{roomId:R}=(null===(e=this.props)||void 0===e||null===(_=e.data)||void 0===_?void 0:_.base)||{},{masterHotelId:j}=(null===(k=this.props)||void 0===k?void 0:k.data)||{},{priceMask:B}=(null===(I=this.props)||void 0===I||null===(C=I.data)||void 0===C?void 0:C.money)||{},U=H.default.getByKey("pageId",this.ctx);this.$safeLog("showLoginOrRegisterResultShow",U,j,R,!!B,1,1),window.location.reload()},this.registerSuccess=()=>{var e,_,k,I,C;const{roomId:R}=(null===(e=this.props)||void 0===e||null===(_=e.data)||void 0===_?void 0:_.base)||{},{masterHotelId:j}=(null===(k=this.props)||void 0===k?void 0:k.data)||{},{priceMask:B}=(null===(I=this.props)||void 0===I||null===(C=I.data)||void 0===C?void 0:C.money)||{},U=H.default.getByKey("pageId",this.ctx);this.$safeLog("showLoginOrRegisterResultShow",U,j,R,!!B,2,1),window.location.reload()},this.loginFail=e=>{var _,k,I,C,R;const{roomId:j}=(null===(_=this.props)||void 0===_||null===(k=_.data)||void 0===k?void 0:k.base)||{},{masterHotelId:B}=(null===(I=this.props)||void 0===I?void 0:I.data)||{},{priceMask:U}=(null===(C=this.props)||void 0===C||null===(R=C.data)||void 0===R?void 0:R.money)||{},V=H.default.getByKey("pageId",this.ctx);this.$safeLog("showLoginOrRegisterResultShow",V,B,j,!!U,1,0),this.$log({logKey:"loginFail error",logDesc:"error",logValue:{errorInfo:JSON.stringify(e)}})},this.registerFail=e=>{var _,k,I,C,R;const{roomId:j}=(null===(_=this.props)||void 0===_||null===(k=_.data)||void 0===k?void 0:k.base)||{},{masterHotelId:B}=(null===(I=this.props)||void 0===I?void 0:I.data)||{},{priceMask:U}=(null===(C=this.props)||void 0===C||null===(R=C.data)||void 0===R?void 0:R.money)||{},V=H.default.getByKey("pageId",this.ctx);this.$safeLog("showLoginOrRegisterResultShow",V,B,j,!!U,2,0),this.$log({logKey:"loginFail error",logDesc:"error",logValue:{errorInfo:JSON.stringify(e)}})},this.getCheckInCheckout=()=>{let e=new Date,_=e.getDate(),k=new Date;return k.setDate(_+1),{checkIn:e.toLocaleDateString().replace(/\//g,"-"),checkOut:k.toLocaleDateString().replace(/\//g,"-")}},this.getParam=()=>{let e=(0,Pc.Z)();const{searchBarData:_,data:k={},city:I,baseRoom:C}=this.props||{},{price:R}=k.money||{},{availParam:j={},minQuantity:B,maxQuantity:U,guestCount:V={}}=k.base||{};let{checkIn:G,checkOut:q}=this.getCheckInCheckout();const{calendar:z,roomGuest:J,search:Q}=_||{},{rooms:ee=1,childAges:te,childBeds:ne=[],childMeals:re=[],adults:oe}=J||{};G=((null==z?void 0:z.checkIn)||"").replace(/\//g,"-")||G,q=((null==z?void 0:z.checkOut)||"").replace(/\//g,"-")||q;const ie=ee<B?B:ee>U?U:ee;this.bookParam=book_objectSpread(book_objectSpread({price:R,checkIn:G,checkOut:q,paymentCurrency:(0,Js.zC)(),adult:oe,popularFacilityType:"1"===e.travelpurpose?"Business":"",masterHotelId:k.masterHotelId||k.baseroominfo.masterhotelid||"",ages:null==te?void 0:te.join(","),childBed:(null==ne?void 0:ne.join(","))||"",childMeal:(null==re?void 0:re.join(","))||"",childType:(null==V?void 0:V.childType)||"",city:(null==Q?void 0:Q._cityId)||I||0,roomQuantity:ie,selectRoomQuantity:ee,timeZone:(new Date).getTimezoneOffset()/-60,priceType:go.Z.get("IBU_showtotalamt")||"",lastPage:1,mproom:e.mproom||"",fgt:e.fgt||"",discounts:e.discounts||"",hoteluniquekey:e.hoteluniquekey||e.stand||e.uniquekey},j),{},{edmHotelData:e.edmhoteldata,roomId:C.roomId,subChannel:e.subchannel,searchTags:"ja-JP"===H.default.getByKey("cargo.locale")?[{TagDataType:"EnableJapanSubsidy",TagDataValue:"T"}]:[]})},this.showRoomsAdults=e=>{rd.show({title:e&&e.message,fclass:"warning",button:[{text:this.$translate("key.hotel.detail.page.continue.book"),sure:()=>{this.$safeLog("logKeepBookAction",this.props,"keepbook"),e.ubtLogInfo&&this.$safeLog("logKeepBookActionByService",e.ubtLogInfo.orderRemindType,e.ubtLogInfo.ischild,"continue"),this.bookRoom()}},{text:this.$translate("key.hotel.detail.page.back.to.detail"),sure:()=>{this.$safeLog("logKeepBookAction",this.props,"back"),e.ubtLogInfo&&this.$safeLog("logKeepBookActionByService",e.ubtLogInfo.orderRemindType,e.ubtLogInfo.ischild,"back")}}]}),this.$safeLog("logAlert",e&&e.message,18)},this.showSoldOut=function(e,k){var I,C,R,j,B,H,U;let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";k&&ke.y7.setDirect("unAvailableRoomInfo",k);const{source:q}=_.props;_.$safeLog("logSaleoutConfrimShow",_.props,_.$translate("key.hotel.landing.page.notavailable")),_.$safeLog("logAlertShow",_.$translate("key.hotel.landing.page.notavailable"),"1");const z=ke.y7.get("detail_query_id")||(0,Ti.RL)()||"",J={listqueryid:z,room_token:G,ordload_tracelogid:V,saleout:"T",masterhotelid:_.props.masterHotelId,roomid:(null===(I=_.props)||void 0===I||null===(C=I.data)||void 0===C||null===(R=C.base)||void 0===R?void 0:R.roomId)||null,listtracelogid:(null===(j=_.props.extraFlag)||void 0===j||null===(B=j.find((e=>"masterhotelid_tracelogid"===e.key)))||void 0===B?void 0:B.value)||"",detailtracelogid:(null===(H=_.props.extraFlag)||void 0===H||null===(U=H.find((e=>"rmlist_tracelogid"===e.key)))||void 0===U?void 0:U.value)||""};_.$safeLog("logSoldoutBookBtnClick",J),(0,Ti.gS)(),(0,Ti.gW)(),"meta"===q?rd.show({title:_.$translate("key.hotel.landing.page.notavailable"),fclass:"warning",button:[{text:_.$translate("key.hotel.landing.page.notavailable.button"),sure:()=>{_.$event.emit(Yu),_.props.toDetail("meta","book"),_.$safeLog("logSaleoutAction",_.props,"toDetail")}},{text:_.$translate("common_cancel"),sure:()=>{_.$event.emit(Yu),_.$safeLog("logSaleoutAction",_.props,"close")}}]}):rd.show({title:e&&e.message,fclass:"warning",button:[{text:_.$translate("common_sure"),sure:()=>{_.props.updateRoomListAction(_.props),_.$safeLog("logSaleoutAction",_.props,"close")}}]})},this.showPriceDown=(e,_)=>{rd.show({title:e&&e.message,fclass:"success",button:[{text:this.$translate("key.hotel.detail.page.continue.book"),sure:()=>{this.$safeLog("logPriceChangeAction",this.props,"continue"),this.$safeLog("logPriceChangeBtnClick",this.props,"continue"),this.jumpToBook(_)}}]})},this.showPriceUp=(e,_)=>{const{source:k}=this.props,I=[{text:this.$translate("key.hotel.detail.page.continue.book"),sure:()=>{this.$safeLog("logPriceChangeAction",this.props,"continue"),this.$safeLog("logPriceChangeBtnClick",this.props,"continue"),this.jumpToBook(_)}}];"meta"!==k&&I.push({text:this.$translate("key.hotel.detail.page.back.to.detail"),sure:()=>{this.$safeLog("logPriceChangeAction",this.props,"leave"),this.$safeLog("logPriceChangeBtnClick",this.props,"continue"),this.props.updateRoomListAction(this.props)}}),rd.show({title:e&&e.message,fclass:"warning",button:I})},this.jumpToBook=e=>{var _,k,I,C,R,j,B,U,V;const{roomkey:G,baseRoom:q,source:z,data:J}=this.props||{},{roomId:Q}=q||{},{newMoney:ee}=J||{},te=this.getArrivalSelectedSoaKey(e),ne=1===H.default.getByKey("takedetailcurr",this.ctx)?(0,Oo.Z)("curr"):null,re=H.default.getByKey("ServerData",this.ctx);re&&ke.y7.setDirect("BOOKANDCONFIRM_PARAM",{ServerData:re,checkIn:this.bookParam.checkIn,checkOut:this.bookParam.checkOut,hotelId:this.bookParam.masterHotelId,city:this.bookParam.city,soaArrivalTimeKey:te,payToken:null===(_=e.prePaymentInfo)||void 0===_?void 0:_.payToken}),ke.y7.setDirect("BACKROOMKEY",{roomkey:G,roomId:Q}),ke.y7.remove("trip_hotel_new_bookPageRetainInfo"),ke.y7.setDirect("bookInfo",{room_token:(null===(k=this.props)||void 0===k||null===(I=k.data)||void 0===I?void 0:I.roomToken)||null,listtracelogid:(null===(C=this.props.extraFlag)||void 0===C||null===(R=C.find((e=>"masterhotelid_tracelogid"===e.key)))||void 0===R?void 0:R.value)||0,detailtracelogid:(null===(j=this.props.extraFlag)||void 0===j||null===(B=j.find((e=>"rmlist_tracelogid"===e.key)))||void 0===B?void 0:B.value)||0,detaildispatchid:(null===(U=this.props.extraFlag)||void 0===U||null===(V=U.find((e=>"rm_dispatchid"===e.key)))||void 0===V?void 0:V.value)||0}),ee&&(e=>{ke.y7.set("detail_room_info",getPriceInfo(e),{timeout:(new Date).getTime()+3e5})})(this.props),(0,ku.R)(this.bookParam,ne,"meta"===z)},this.getButtonText=()=>{var e;const{data:_={},roomkey:k,btnText:I}=this.props;let C=(null===(e=ke.y7.get("BACKROOMKEY"))||void 0===e?void 0:e.roomkey)||"";return I||(C&&k===C?this.$translate("key.hotel.booking.rooms.button.continue.booking"):_.base&&1!==_.base.buttonType?this.$translate("key.hotel.listpage.veil.joinnow"):this.$translate("resx.onlinehotelresource.buttontext_book"))},this.handleRegister=()=>{var e,_;const{maskInfo:k={}}=(null===(e=this.props)||void 0===e||null===(_=e.data)||void 0===_?void 0:_.base)||{},{lowerPriceButton:I}=k;this.$safeLog("logRoomLoginClick",this.props,I?1:2),this.signup()},this.handleBook=()=>{(0,Dc.wA)("book click"),this.checkRoomAndAdultByService().then(this.bookRoom,this.showRoomsAdults)},this.handleMouseOut=()=>{const e=this.$component("ToolTip");e&&e.action("hide")},this.handleMouseOver=e=>{var _,k;const{maskInfo:I={}}=(null===(_=this.props)||void 0===_||null===(k=_.data)||void 0===k?void 0:k.base)||{},{lowerPriceHover:C,memberHover:R}=I,j=this.$component("ToolTip"),B={target:e.target,content:od.createElement("div",{className:"book-hover"},C||R),maxWidth:"396px"};j&&j.action("show",B)},this.checkRoomAndAdult=()=>{const{searchBarData:e={},data:_={},computeRoomPerson:k=0}=this.props||{};return new Promise(((I,C)=>{let R={};const{maxGuest:j,guestCount:B,minQuantity:H,maxQuantity:U}=_.base||{},V=B?((null==B?void 0:B.adults)||0)+((null==B?void 0:B.children)||0):j,{adults:G,children:q,rooms:z}=e.roomGuest||{},J=G+q,Q=z>U,ee=Q?V*U<J:V<k,te=this.$translate("key.hotel.detail.page.booking.continue"),ne=this.$translatePlural("key.hotel.detail.page.guests.fit.room",U),guestMaxQuantity=e=>(B&&I(),this.$translatePlural("key.hotel.detail.page.guests.fit.room.adult",e));z<H?(R.message=this.$translate("dw_book_min_rooms_with_discount",H)+te,this.$safeLog("logShowKeepBook",this.props,R.message,!0),C(R)):Q&&ee?(R.message=this.$translate("key.hotel.detail.page.guests.max.with.room",[ne,guestMaxQuantity(V*U)]),this.$safeLog("logShowKeepBook",this.props,R.message,!0,!0),C(R)):Q&&!ee?(R.message=this.$translate("key.hotel.detail.page.guests.fit.with.room",[ne,guestMaxQuantity(J)]),this.$safeLog("logShowKeepBook",this.props,R.message,!0),C(R)):!Q&&ee?(R.message=this.$translate("key.hotel.detail.page.not.fit.guests",guestMaxQuantity(V*z)),this.$safeLog("logShowKeepBook",this.props,R.message,!1,!0),C(R)):I()}))},this.checkRoomAndAdultByService=()=>{const{data:e={},isCompensatedRoom:_=!1}=this.props||{},{bookTip:k={},base:I={}}=e;let C={};return new Promise(((e,R)=>{const{guestCount:j}=I;if("object"!=typeof k||0==Object.keys(k).length)e();else{const{text:e="",type:I=0}=k;C.message=e,C.ubtLogInfo={orderRemindType:I,ischild:j?1:0},_||this.$safeLog("logShowKeepBook",this.props,C.message,!0,!0),this.$safeLog("logShowKeepBookByService",I,j?1:0),R(C)}}))},this.delayBookRoom=(0,ed.Ds)((()=>{this.commonBook()}),1e3,this),this.bookRoom=()=>{(0,_c.J)()?this.modifyOrderPageBook():this.delayBookRoom()},this.ubtMapping={logClickBook:logClickBook,logShowPriceChange:logShowPriceChange,logPriceChangeAction:logPriceChangeAction,logPriceChangeBtnClick:logPriceChangeBtnClick,logSaleoutAction:logSaleoutAction,logSignIn:logSignIn,logShowKeepBook:logShowKeepBook,logShowKeepBookByService:logShowKeepBookByService,logKeepBookAction:logKeepBookAction,logKeepBookActionByService:logKeepBookActionByService,logBaseRoomInfo:logBaseRoomInfo,BookClick:BookClick,logSaleoutConfrimShow:logSaleoutConfrimShow,logAlertShow:logAlertShow,logRoomLoginClick:logRoomLoginClick,logRoomLoginShow:logRoomLoginShow,showLoginOrRegisterResultShow:Iu,logChildRoomClick:logChildRoomClick,logAlert:Xs.lZ,logSaleCardClick:Cu.Xb,logSoldoutBookBtnClick:logSoldoutBookBtnClick},this.state={topFont:16,bottomFont:16},this.props.onBookRef&&this.props.onBookRef(this)}componentWillUnmount(){this.scrollFunction&&(0,$s.aF)(this.scrollFunction)}componentDidMount(){var e,_;if(this.topRef&&(null===(e=this.topRef.childNodes)||void 0===e||null===(_=e[0])||void 0===_?void 0:_.length)>20&&this.setState({topFont:14}),this.bottomRef){var k,I,C,R;const{maskInfo:e={}}=(null===(k=this.props)||void 0===k||null===(I=k.data)||void 0===I?void 0:I.base)||{},{lowerPriceButton:_}=e;this.scrollFunction=(0,$s.x)({target:this.bottomRef,judgeType:6,callBack:()=>{this.$safeLog("logRoomLoginShow",this.props,_?1:2)}}),(null===(C=this.bottomRef.childNodes)||void 0===C||null===(R=C[0])||void 0===R?void 0:R.length)>20&&this.setState({bottomFont:14})}}getDefaultSelect(e,_){if(e&&e.length){let k=e.find((e=>e.key===_));return k||e[0]}return{}}getArrivalSelectedSoaKey(e){let _="";const{Arrival:k={}}=e;if(!(0,Pe.xb)(k)&&3===(null==k?void 0:k.type)){const{time:e,fdefault:I=""}=k,C=this.getDefaultSelect(e,I);_=(null==C?void 0:C.soaArrivalTimeKey)||""}return _}modifyOrderPageBook(){var e,_,k,I;const{searchBarData:C={},data:R={}}=this.props||{};let j={checkIn:null===(e=C.calendar)||void 0===e||null===(_=e.checkIn)||void 0===_?void 0:_.replace(/\//g,"-"),checkOut:null===(k=C.calendar)||void 0===k||null===(I=k.checkOut)||void 0===I?void 0:I.replace(/\//g,"-"),timeOffset:Ce.Z?(new Date).getTimezoneOffset()/-60:"",roomUniqueKey:(0,Ui.Z)(R,"base.availParam.roomUniqueKey")},B=(0,Oo.Z)("orderid");const{checkIn:H,checkOut:U}=j;var V;(V=j,V.rmsToken=(0,Tu.e)(),V.deviceBrand=(0,du.g_)()||"",new Promise(((e,_)=>{verifyRequest({position:"hotelavailable",orderId:Number((0,Oo.Z)("orderid")),url:"/CheckHotelAvailableByOrder",requestData:V,success:_=>{e({data:_,success:e=>e()})},fail:e=>{_(e)}})}))).then((e=>{let{data:_,success:k}=e;k((()=>{_.Tip&&1===_.Tip.type?(this.setState({errorMsg:""}),rd.show({title:this.$translate("orderdetail_update_date"),content:od.createElement(ModifyMask,{data:_,orderId:B,checkIn:H,checkOut:U}),close:!1,maskClosable:!0,button:[],className:"modify-order"})):(rd.show({title:this.$translate("orderdetail_date_tip_content"),fclass:"warning",button:[{text:this.$translate("common_sure"),sure:()=>{getRoomList()}}]}),this.$safeLog("logAlert",this.$translate("orderdetail_date_tip_content"),27))}))}))}newErrorcodeDialog(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0){var _,k,I;let C=null===(_=e.find((e=>"ERROR_BUTTON_TYPE"===e.key)))||void 0===_?void 0:_.value,R=null===(k=e.find((e=>"ERROR_SHOW_MESSAGE"===e.key)))||void 0===k?void 0:k.value,j=null===(I=e.find((e=>"REFRESH_RESERVATION"===e.key)))||void 0===I?void 0:I.value;if(C&&R&&j)return!0}return!1}commonBook(){this.getParam(),(e=>{var _;const{expires:k}=H.default.getByKey("qconfigData.bookAndConfirmCache")||{};return e.rmsToken=(0,Tu.e)(),Ju({url:"/bookAndConfirm",loading:{type:"serviceGuarantee",position:"detailPage book"},setCache:!0,useCache:!1,expires:k,data:bookAndConfirmApi_objectSpread({},e),soaCode:16709,genk:!0,genKeyParam:{a:e.masterHotelId.toString(),b:e.checkIn,c:e.checkOut,d:null===(_=H.default.getByKey("cargo.locale"))||void 0===_?void 0:_.toLocaleLowerCase(),e:2,f:e.city||""}})})(this.bookParam).then((e=>{let{data:_,success:k,fail:I}=e;if(!_||_.errorType)throw"no response";k((()=>{var e;const{Tip:k,RoomDetail:I,_duration:C,traceId:R,priceTrace:j={},extraFlag:B=[]}=_||{},U=(null===(e=B.find((e=>"roomToken"===(null==e?void 0:e.key))))||void 0===e?void 0:e.value)||"",V=(null==j?void 0:j.controllerUbtTraceLogId)||"",G=!this.newErrorcodeDialog(null==_?void 0:_.tags);switch(k&&k.type){case 5:this.$safeLog("logShowPriceChange",this.props,k),this.$safeLog("logAlertShow",k,"2"),"up"===k.priceChange?G&&this.showPriceUp(k,_):"down"===k.priceChange&&G&&this.showPriceDown(k,_),(0,Dc.vP)("book click");break;case 0:case 2:case 3:case 4:{this.showSoldOut(k,null==I?void 0:I.roomKey,V,U),(0,Dc.vP)("book click");const{newMoney:e}=this.props.data||{},{priceTrace:C,HotelDetail:j}=_||{},{timestamp:B="",controllerUbtTraceLogId:G}=C||{},{regionType:ne=""}=j||{},{extraFlag:re=[]}=this.props||{};if(e){var q,z,Q,ee,te;const k={detailinfo:getPriceInfo(this.props),bookinfo:{timestamp:B,traceLogId:G||"",pageId:pa.pt,bookable:"F",totalPrice:{price:-1},IsFromDetail:"T",isMemberLogin:H.default.getByKey("isLogged",this.ctx)?"T":"F",regionType:ne,isCrawler:(0,J.iO)(R),nationalityLimit:(null==_||null===(q=_.nationalityInfo)||void 0===q||null===(z=q.tips)||void 0===z?void 0:z.find((e=>"NationalityPolicy"===e.title)))?"T":"F",remittaxAmout:(null==_||null===(Q=_.nationalityInfo)||void 0===Q||null===(ee=Q.tips)||void 0===ee?void 0:ee.find((e=>"RemitTaxAmount"===e.title)))||"",amountShowType:go.Z.get("IBU_showtotalamt")||"",balanceType:(null==e?void 0:e.payType)||""}},I="T"===(null===(te=re.find((e=>"meta"===e.key)))||void 0===te?void 0:te.value),{AllianceID:C,SID:j}=(0,xu.ZP)({type:xu.FW.COOKIE})||{};if(I)return;(0,Dc.NW)("ibu_htl_c_online_dtl2ord_price_load",book_objectSpread(book_objectSpread({},k),{},{isFromMetaPage:I,aid:C,sid:j}))}break}default:this.jumpToBook(_),(0,Dc.or)(pa.sP,{name:"bookAndConfirm request",value:C})}})),I((e=>{this.$log({logKey:"bookRoom error",logDesc:"error",logValue:{errorInfo:JSON.stringify(e)}})}))})).catch((e=>{(0,te.fU)(logUpdateRoomErr(e))}))}}).defaultProps={},nd.propTypes={},ad=td=nd,class LinkToDetail extends $u{constructor(e){var _;super(e),_=this,this.toDetail=function(e,I){var C,R,j,B,U,V,G,q,z,J,Q,ee,te,ne,re,oe,ie,ae,le,se,ce,ue,de,pe,he,fe;let me=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const ge=ke.y7.get("list_exposure_query_id");ge?(ke.y7.set("detail_query_id",ge),ke.y7.remove("list_exposure_query_id")):ke.y7.set("detail_query_id",(0,Ti.RL)());const ve={masterhotelid:(null===(C=_.props)||void 0===C||null===(R=C.base)||void 0===R?void 0:R.hotelId)||(null===(j=_.props)||void 0===j?void 0:j.hotelId)||(null===(B=_.props)||void 0===B?void 0:B.hotelid)||(null===(U=_.props)||void 0===U||null===(V=U.hotelBasicInfo)||void 0===V?void 0:V.hotelId)||null,masterhotelid_token:(null===(G=_.props)||void 0===G||null===(q=G.base)||void 0===q?void 0:q.hotelId)||(null===(z=_.props)||void 0===z?void 0:z.hotelId)||(null===(J=_.props)||void 0===J?void 0:J.hotelid)||(null===(Q=_.props)||void 0===Q||null===(ee=Q.hotelBasicInfo)||void 0===ee?void 0:ee.hotelId)||null,locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),rank_in_qid:(null===(te=_.props)||void 0===te?void 0:te.index)||0,masterhotelid_tracelogid:(null===(ne=_.props)||void 0===ne||null===(re=ne.trace)||void 0===re?void 0:re.traceLogId)||(null===(oe=_.props)||void 0===oe||null===(ie=oe.metaHotel)||void 0===ie||null===(ae=ie.priceLogParam)||void 0===ae?void 0:ae.rateplantracelogid)||(null===(le=_.props)||void 0===le||null===(se=le.rawData)||void 0===se||null===(ce=se.priceLogParam)||void 0===ce?void 0:ce.rateplantracelogid)||"",htllist_query_id:ge||(0,Ti.RL)()||"",mt_reffername:(0,li.XL)(),htl_taglist:null===(ue=_.props)||void 0===ue||null===(de=ue.metaHotel)||void 0===de||null===(pe=de.roomList)||void 0===pe||null===(he=pe[0])||void 0===he||null===(fe=he.logTags)||void 0===fe?void 0:fe.map((e=>({tagfeatureid:null==e?void 0:e.tagfeatureid,tagtitle:null==e?void 0:e.tagtitle,tagname:null==e?void 0:e.tagName,tagvalue:null==e?void 0:e.tagValue})))};_.$safeLog("logHotelCardClick",ve);let ye="detailPage"===H.default.getByKey("pageName")?k(44251).Z:k(64528).Z;const be=ye.getState();_.$safeLog("logListpageSearchHotel",_.props),me&&_.$safeLog("logHotelLocationScoreClick",_.props);const{searchCondition:_e={},filterCondition:we={}}=be;sendAdLog(toDetail_objectSpread(toDetail_objectSpread({},_.props),{},{searchCondition:_e,filterCondition:we})),zu(be,Object.assign({},_.props,{Type:e,Position:I}))},this.ubtMapping={logListpageSearchHotel:e=>{var _;const{picture:k,trace:I,money:C,base:R,controllerUbtTraceLogId:j,promotion:B=[],member:H={},discount:U={}}=e||{},V=Oc.C?(0,Js.zC)():"",G={digit:0};let q=[];for(let e=0;e<(null==B?void 0:B.length);e++)q.push({tagtitle:B[e].type.length?B[e].type:la[B[e].type],tagname:B[e].text||""});(null==H||null===(_=H.list)||void 0===_?void 0:_.length)>0&&q.push({tagtitle:sa[H.list[0].type]||H.list[0].type,tagname:H.list[0].content||""}),(null==U?void 0:U.promotePercent)&&q.push({tagtitle:"DISCOUNTPERCENT",tagname:U.promotePercent||""});const z={masterhotelid:null==R?void 0:R.hotelId,hoteluniquekey:I&&I.hoteluniquekey?I.hoteluniquekey:null,hotelname:null==R?void 0:R.hotelName,zonename:I&&I.zonename?I.zonename:null,imageurl:(null==k?void 0:k.defaultUrl)||null,priceinfo:(null==C?void 0:C.price)?(0,So.formatCurrency)(V,C.price,G):null,cancelpriceinfo:(null==C?void 0:C.priceDelete)?(0,So.formatCurrency)(V,C.priceDelete,G):null,discountpercent:I&&I.discountpercent?I.discountpercent:null,pointsplusinfo:I&&I.pointsplusinfo?I.pointsplusinfo:null,qid:(0,Ti.RL)()||null,tracelogid:j||null,new_taglist:q||null};return{logKey:"ibu_htl_"+(0,pa.h8)()+"_selectedhotel",logValue:z,logDesc:"Select the hotel"}},logHotelLocationScoreClick:e=>{const{base:_}=e||{};return{logKey:"ibu_htl_"+(0,pa.h8)()+"_location_score",logValue:{hotelid:null==_?void 0:_.hotelId},logDesc:" click location score",actionType:"click"}},logHotelCardClick:e=>({logKey:"P0104_SP0000_M0005_ID0001_click",logDesc:"hotel card click",actionType:"click",logValue:e})}}render(){return qu.createElement(ad,(0,C.Z)({},this.props,{toDetail:this.toDetail}))}}||td);var ad;const ld=(0,Ni.$j)((e=>({city:e.initData&&e.initData.base&&e.initData.base.cityId||0,initData:e.initData,soloHotelInfo:e.initData&&e.initData.soloHotelInfo||null,childPolicy:e.initData&&e.initData.childPolicy||{},searchBarData:e.searchBarData,masterHotelId:e.initData&&e.initData.base&&e.initData.base.masterHotelId})),(e=>({updateRoomListAction:(0,Xu.DE)(su,e)})))(id);var sd=k(39621).default,cd=k(67294);const ud="detail-pricemask-v8";class view_PriceMaskDetail extends sd{constructor(e){super(e)}render(){const{isCMA:e,newMoneyItemInfo:_,total:k,excludedFee:I,cmaTotal:C,points:R,oneSentenceTax:B}=this.props;return cd.createElement("div",{className:"".concat(ud)},cd.createElement("div",{className:"".concat(ud,"_head")},cd.createElement("span",{className:"title"},this.$translate("detailPage_PriceDetail"))),cd.createElement("div",{className:"".concat(ud,"_container")},!!(null==_?void 0:_.length)&&this.renderContentInfo(),(null==k?void 0:k.title)&&((null==k?void 0:k.content)||(null==k?void 0:k.localCurrency))&&cd.createElement("div",{className:j()("".concat(ud,"_total"))},cd.createElement("div",{className:"".concat(ud,"_total_title")},k.title),cd.createElement("div",{className:"".concat(ud,"_total_content")},cd.createElement("div",{className:"pricewrap"},(null==k?void 0:k.approx)&&cd.createElement("span",{className:"approx"},k.approx),cd.createElement("span",{className:j()("price",{small:(null==C?void 0:C.title)&&(null==C?void 0:C.content)&&!(0,Pe.xb)(I)})},k.price&&(0,So.formatCurrency)(k.currency,k.price)||k.content)),(null==k?void 0:k.localCurrency)&&cd.createElement("div",{className:"localCurrency"},(null==k?void 0:k.localCurrencyApprox)&&cd.createElement("span",null,k.localCurrencyApprox),cd.createElement("span",null,k.localCurrency)),"F"===e&&(null==I?void 0:I.description)&&cd.createElement("div",{className:"excludedFee"},cd.createElement("span",null,I.description)),!((null==C?void 0:C.title)&&(null==C?void 0:C.content))&&B&&cd.createElement("div",{className:"oneSentenceTax"},B))),(null==C?void 0:C.title)&&(null==C?void 0:C.content)&&!(0,Pe.xb)(I)&&cd.createElement("div",{className:"".concat(ud,"_cmaTotal")},cd.createElement("div",{className:"".concat(ud,"_cmaTotal_title")},C.title),cd.createElement("div",{className:"".concat(ud,"_cmaTotal_content")},cd.createElement("div",{className:"pricewrap"},C.approx&&cd.createElement("span",{className:"approx"},C.approx),cd.createElement("span",{className:"price"},C.price&&(0,So.formatCurrency)(C.currency,C.price)||C.content)),(null==C?void 0:C.localCurrencyDesc)&&cd.createElement("div",{className:"localCurrency"},cd.createElement("span",null,C.localCurrencyDesc)),"T"===e&&(null==C?void 0:C.title)&&(null==C?void 0:C.content)&&(null==I?void 0:I.includeHotelTaxDesc)&&cd.createElement("div",{className:"excludedFee"},cd.createElement("span",null,I.includeHotelTaxDesc)),(null==C?void 0:C.title)&&(null==C?void 0:C.content)&&B&&cd.createElement("div",{className:"oneSentenceTax"},B))),R&&(null==R?void 0:R.title)&&cd.createElement("div",{className:"".concat(ud,"_coins")},cd.createElement("div",{className:"tripCoinsImg"}),cd.createElement(qi.uB,{className:"tripCoinsContent",parentlabel:"div",txt:null==R?void 0:R.title,childlabel:"span"})),this.renderLeaveReturn()))}renderLeaveReturn(){const{leaveReturn:e,naverReturn:_}=this.props;return(null==e?void 0:e.coinsPrice)||(null==_?void 0:_.content)?cd.createElement("div",{className:"".concat(ud,"_afterStay")},cd.createElement("div",{className:"afterStayTitle"},this.$translate("key.hotel.book.detail.page.coins.earn.title")),(null==e?void 0:e.coinsPrice)&&cd.createElement("div",{className:"afterStayRight"},cd.createElement("div",{className:"coin-icon"}),cd.createElement("div",{className:"afterStayContent"},e.coinsPrice)),(null==_?void 0:_.content)&&this.renderNaverPoints(_)):null}renderContentInfo(){const{newMoneyItemInfo:e}=this.props;return cd.createElement("div",{className:"".concat(ud,"_content")},e.map(((e,_)=>{var k,I,C,R;return cd.createElement("div",{key:_,className:"".concat(ud,"_content_list")},"allDiscount"!==e.type&&cd.createElement("div",{className:"".concat(ud,"_content_list_title")},cd.createElement("div",{className:"title"},cd.createElement("span",{className:"titleName"},null==e?void 0:e.title.split(/\{0\}(.*?)\{\/0\}/).map(((e,_)=>_%2==0?cd.createElement("span",{key:_,className:"titleName"},e):cd.createElement("span",{key:_,className:"promotion"},e))))),(e.amount&&e.currency||e.price)&&cd.createElement("div",{className:j()("titlePrice",{roomPrice:"roomprice"===e.type||"taxandfee"===e.type})},e.amount&&"roomprice"!==e.type&&"-",e.amount&&(0,So.formatCurrency)(e.currency,e.amount)||e.price)),"allDiscount"!==e.type&&(null===(k=this.props)||void 0===k?void 0:k.veilDiffPriceZeroDesc)&&"roomprice"===e.type&&cd.createElement("div",{className:"remindClassName"},null===(I=this.props)||void 0===I?void 0:I.veilDiffPriceZeroDesc),"allDiscount"===(null==e?void 0:e.type)&&cd.createElement("div",{className:"allDiscount_title"},cd.createElement("div",{className:"outter"},cd.createElement(cd.Fragment,null,null==e?void 0:e.title.split(/\{0\}(.*?)\{\/0\}/).map(((e,_)=>_%2==0?cd.createElement("span",{key:_,className:"titleName"},e):cd.createElement("span",{key:_,className:"promotion"},e)))),(e.amount&&e.currency||e.price)&&cd.createElement("span",{className:j()("titlePrice",{promotion:"roomprice"!==e.type&&"taxandfee"!==e.type})},e.amount&&"roomprice"!==e.type&&"taxandfee"!==e.type&&"-",e.amount&&(0,So.formatCurrency)(e.currency,e.amount)||e.price)),(null==e||null===(C=e.subItemInfos)||void 0===C?void 0:C.length)>0&&"allDiscount"===(null==e?void 0:e.type)&&cd.createElement("div",{className:"allDiscount_priceDetail"},null==e||null===(R=e.subItemInfos)||void 0===R?void 0:R.map(((e,_)=>e.title&&e.subTitle&&cd.createElement("div",{key:_,className:"allDiscount_priceDetail_list"},cd.createElement("span",{className:"allDiscount_priceDetail_list_title"},e.title),cd.createElement("span",{className:"allDiscount_priceDetail_list_price"},e.subTitle)))))))})))}}var dd=k(67294);class PriceMaskDetail extends view_PriceMaskDetail{constructor(e){super(e),this.renderNaverPoints=e=>dd.createElement("div",{className:"naverPoints"},dd.createElement("div",{className:"naverPoints_cnt"},dd.createElement("span",{className:"naverPoints_cnt_tit"},e.title),dd.createElement("span",{className:"naverPoints_cnt_txt"},e.content)),dd.createElement("p",{className:"naverPoints_tip"},e.tip)),this.toggleShowRoomPrice=()=>{const{showRoomPrice:e}=this.state;this.setState({showRoomPrice:!e})},this.state={showRoomPrice:!1}}onMouseOver(e,_){const k=this.$component("ToolTip"),{borderRadius:I="0"}=this.props,C={target:_.target,borderRadius:I,content:dd.createElement("div",{className:"mouseHover",dangerouslySetInnerHTML:{__html:e.replace(/{break}/g,"<br>")}})};k&&k.action("show",C)}onMouseOut(){const e=this.$component("ToolTip");e&&e.action("hide")}}var pd=k(39621).default,hd=k(67294);class view_PerNightPriceMask extends pd{constructor(e){super(e)}render(){var e;let{newMoney:_,metaNewMoney:k}=this.props,I=_||k;return(null==I||null===(e=I.newMoneyItemInfo)||void 0===e?void 0:e.length)>0&&hd.createElement(PriceMaskDetail,(0,C.Z)({},I,{isfillOrder:!1}))}}class PerNightPriceMask extends view_PerNightPriceMask{constructor(e){super(e)}}var fd=k(39621).default,md=k(67294);class view_NewPriceTag extends fd{constructor(e){super(e),this.getTagClassName=e=>e?Bl[e]:"promotion-tag"}render(){const{hotelTagInfo:e}=this.props,{tagTitle:_,tagTemplateId:k}=e,I=this.getTagClassName(k);return md.createElement("div",{className:"price-tag"},md.createElement("div",{className:I},_))}}class NewPriceTag extends view_NewPriceTag{constructor(e){super(e)}componentDidMount(){this.$safeLog()}}var gd=k(67294);const vd="PrepayOnline",yd="PayAtHotel",bd="PriceIncludeAllTax",_d="RoomRateAvg",wd=function hasType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.some((e=>e.type===_))},Ed=function getPriceByType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.find((e=>e.type===_))},RenderLeaveReturn=e=>{const{$translate:_}=(0,he.useContext)(pe.P),{metaNewMoney:k={}}=e,{leaveReturn:I,naverReturn:C}=k;return(null==I?void 0:I.coinsPrice)||(null==C?void 0:C.content)?gd.createElement("div",{className:"meta_afterStay"},gd.createElement("div",{className:"afterStayTitle"},_("key.hotel.book.detail.page.coins.earn.title")),(null==I?void 0:I.coinsPrice)&&gd.createElement("div",{className:"afterStayRight"},gd.createElement("div",{className:"coin-icon"}),gd.createElement("div",{className:"afterStayContent"},I.coinsPrice)),(null==C?void 0:C.content)&&(e=>gd.createElement("div",{className:"naverPoints"},gd.createElement("div",{className:"naverPoints_cnt"},gd.createElement("span",{className:"naverPoints_cnt_tit"},e.title),gd.createElement("span",{className:"naverPoints_cnt_txt"},e.content)),gd.createElement("p",{className:"naverPoints_tip"},e.tip)))(C)):null},MetaPriceTotal=e=>{const{metaNewMoney:_={}}=e,{payDetailInfoList:k=[]}=_,I=function getTotalPrice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const _=wd(e,vd),k=wd(e,yd);return Ed(e,_&&k?bd:_&&!k?vd:yd)}(k),C=wd(k,_d)?(e=>{var _;const k=e.find((e=>e.type===_d)),I=(null==k?void 0:k.desc)||"",C=null==k||null===(_=k.extentions)||void 0===_?void 0:_.find((e=>"HighLight"===e.type)),R=null==C?void 0:C.value;if(!R)return I;const j=I.replace(/\$/g,""),B=R.replace(/\$/g,""),H=new RegExp(B,"g");return j.replace(H,"<span class='highlight'>".concat(R,"</span>"))})(k):"";return gd.createElement("div",{className:"total-price"},gd.createElement("div",{className:"total-pay"},gd.createElement("span",null,null==I?void 0:I.title),gd.createElement("span",{className:"total-pay-price"},null==I?void 0:I.desc)),C?gd.createElement("div",{className:"additional"},gd.createElement("span",{className:"additional-desc",dangerouslySetInnerHTML:{__html:C}})):null,gd.createElement(RenderLeaveReturn,{metaNewMoney:_}))},MetaPriceRoom=e=>{const{$translate:_}=(0,he.useContext)(pe.P),{metaNewMoney:k}=e,{newMoneyItemInfo:I=[],veilDiffPriceZeroDesc:C="",excludedFee:R={},includedTax:j={},payDetailInfoList:B=[]}=k,H=I.find((e=>"roomprice"===e.type)),U=I.find((e=>"promotion"===e.type)),V=I.filter((e=>"allDiscount"===e.type)),G=V.length>0?V[0].subItemInfos:[],{list:q=[]}=R,{hover:z=[]}=j,J=wd(B,vd)&&wd(B,yd),Q=wd(B,yd)&&!wd(B,vd),ee=Ed(B,vd);return gd.createElement("div",null,gd.createElement("div",{className:"price-title"},gd.createElement("span",{className:"title"},_("detailPage_PriceDetail"))),gd.createElement("div",{className:"price-details"},gd.createElement("div",{className:"room-price"},gd.createElement("span",{className:"price-name"},null==H?void 0:H.title),gd.createElement("span",{className:"price-value"},null==H?void 0:H.price)),C?gd.createElement("div",{className:"price-mask"},C):null,U?gd.createElement("div",{className:"promotion"},gd.createElement("span",{className:"promotion-title"},null==U?void 0:U.title),gd.createElement("span",{className:"promotion-price"},"-",null==U?void 0:U.amount)):null,null==G?void 0:G.map(((e,_)=>gd.createElement("div",{className:"promotion",key:_},gd.createElement("span",{className:"promotion-title"},e.title),gd.createElement("span",{className:"promotion-price"},e.subTitle)))),z.map(((e,_)=>gd.createElement("div",{className:"tax",key:_},gd.createElement("span",{className:"tax-title"},e.title),gd.createElement("span",{className:"tax-price"},e.content)))),Q?q.map(((e,_)=>gd.createElement("div",{className:"tax",key:_},gd.createElement("span",{className:"tax-title"},e.title),gd.createElement("span",{className:"tax-price"},e.content)))):null,J?gd.createElement("div",{className:"prepay"},gd.createElement("span",null,null==ee?void 0:ee.title),gd.createElement("span",{className:"prepay-price"},null==ee?void 0:ee.desc)):null))},MetaPriceTax=e=>{const{metaNewMoney:_}=e,{excludedFee:k={},payDetailInfoList:I=[]}=_,{list:C=[]}=k,R=Ed(I,yd);return gd.createElement("div",{className:"tax-in-hotel"},C.map(((e,_)=>gd.createElement("div",{className:"tax",key:_},gd.createElement("span",{className:"tax-title"},e.title),gd.createElement("span",{className:"tax-price"},e.content)))),gd.createElement("div",{className:"pay-at-hotel"},gd.createElement("span",null,null==R?void 0:R.title),gd.createElement("span",{className:"pay-at-hotel-price"},null==R?void 0:R.desc)))};function MetaPriceCard(e){const{metaNewMoney:_}=e,{payDetailInfoList:k=[]}=_,I=wd(k,vd)&&wd(k,yd);return gd.createElement("div",{className:"meta-price"},gd.createElement(MetaPriceRoom,{metaNewMoney:_}),I?gd.createElement(MetaPriceTax,{metaNewMoney:_}):null,gd.createElement(MetaPriceTotal,{metaNewMoney:_}))}var Sd,Od,Td=k(39621).default,kd=k(67294);function roomRight_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function roomRight_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?roomRight_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):roomRight_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let Id=(0,Vl.ZP)(((Od=class RoomRight extends Td{constructor(e){var _;super(e),_=this,this.priceReg=/^\d+.?\d*$/,this.renderDiscountTag=()=>{const{tags:e,card:_}=this.props,{roomTags:k={}}=_,{discountPercentTags:I=[]}=k,C=null==e?void 0:e.find((e=>"DISCOUNTPERCENT"===e.tagTitle)),R=null==e?void 0:e.find((e=>"DISCOUNTAMOUNT"===e.tagTitle)),j=(0,li.zC)(this.ctx);return I.length>0?kd.createElement("div",{className:"list-card-discount-tags"},I.map((e=>kd.createElement(NewPriceTag,{hotelTagInfo:e})))):kd.createElement(kd.Fragment,null,C?kd.createElement("div",{className:"minNoiseFavour"},this.generateDiscountPersent(null==C?void 0:C.value)):null,R?kd.createElement("div",{className:"minNoiseFavour"},"".concat(this.$translate("key.hotel.list.promo.discount.price",(0,So.formatCurrency)(j,R.value,{digitTop:0,ctx:this.ctx})))):null)},this.renderPriceTag=(e,_,k,I)=>{const C="meta"==this.props.type;return e.length>0?e.map((e=>kd.createElement(NewPriceTag,{hotelTagInfo:e}))):kd.createElement(kd.Fragment,null,H.default.getByKey("isLogged",this.ctx)&&(null==_?void 0:_.text)?kd.createElement("div",{style:{display:I||C?"block":"inline-block",justifyContent:"flex-end",marginBottom:"6px"}},kd.createElement(Sc,{memberType:null==_?void 0:_.type,memberName:null==_?void 0:_.text,memberStyleType:null==_?void 0:_.memberStyleType})):null,k.length?kd.createElement(Promotion,{tags:k}):null)},this.onMouseOver=function(e,k){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(I){let e={page:H.default.getByKey("pageId",_.ctx),type:k||""};_.$safeLog("logTagShow",e)}const C=_.$component("ToolTip"),R={content:k,target:e.target,triPlacement:"middle",dark:!1,zIndex:999,borderRadius:4};C.action("show",R);let j="";e.target.querySelector("p")?j=e.target.querySelector("p").innerHTML:e.target.querySelector("span")&&(j=e.target.querySelector("span").innerHTML),_.$safeLog("logMetapageLayerAction","expand",j,_.props)},this.onMouseOut=e=>{this.$component("ToolTip").action("hide");let _="";e.target.querySelector("p")?_=e.target.querySelector("p").innerHTML:e.target.querySelector("span")&&(_=e.target.querySelector("span").innerHTML),this.$safeLog("logMetapageLayerAction","hide",_,this.props)},this.ubtMapping={logMetapageSelectRoomClick:logMetapageSelectRoomClick,logMetapageLayerAction:logMetapageLayerAction,logMetahtlPriceLayerExp:logMetahtlPriceLayerExp,logTagShow:U.w2,PriceTagShow:U.ZW},this.priceOnMouseEnter=e=>{const _=(0,q.bd)(this),{newMoney:k,metaNewMoney:I}=this.props||{};if(!k&&!I)return;const C=this.$component("ToolTip"),R=_?kd.createElement(MetaPriceCard,{newMoney:k,metaNewMoney:I}):kd.createElement(PerNightPriceMask,{newMoney:k,metaNewMoney:I}),j="meta-real-priceB ".concat(_?"meta-price-layerB":""),B={target:e.target,borderRadius:_?8:0,content:(k||I)&&R,className:j};C&&C.action("show",B),this.$safeLog("logMetahtlPriceLayerExp")},this.priceOnMouseOut=()=>{const e=this.$component("ToolTip");e&&e.action("hide")},this.toBook=e=>{const{money:_,type:k}=this.props;if("normal"===k&&(0,Le.ap)("htl_t_online_list_hotellist_click",{triggerTime:+new Date,page:"10320668148"}),"more"===k&&(0,Le.ap)("htl_t_online_list_recomhotellist_click",{triggerTime:+new Date,page:"10320668148"}),!_||!_.soldOut){let _="button";"meta"===k&&(_="book",this.$safeLog("logMetapageSelectRoomClick",this.prop)),this.props.toDetail(k,_),e.stopPropagation()}},this.toMember=()=>{this.$component("Account").action("toMember",{paramObj:{needMask:!0},successCallback:()=>{window.location.reload()},failcallback:()=>{}})},this.renderSearchInfo=(e,_)=>{var k;const{adult:I,child:C,roomNum:R,checkIn:j,checkOut:B}=e,H=null!==(k=(0,Re.e3)(j,B))&&void 0!==k?k:1,U=this.$translatePlural("key.hotel.online.homepage.searchbox.rooms",_>0?_:R),V=this.$translatePlural("key.hotel.searchbox.echo.adult",I),G=this.$translatePlural("key.hotel.searchbox.echo.child",C),q=this.$translatePlural("key.hotel.common.night",H);return kd.createElement("p",{className:"room-panel-searchinfo"},kd.createElement("span",{className:"desc"},U,","),kd.createElement("span",{className:"desc"},V,","),C>0?kd.createElement("span",{className:"desc"},G,","):null,kd.createElement("span",{className:"desc"},q))},this.state={visible:!1,left:0,top:0,needUpdate:!1},this.hoverRef=kd.createRef(),this.priceRef=kd.createRef()}componentDidMount(){let{discountLabels:e=[],card:_={}}=this.props;const{hotelBasicInfo:k={},roomTags:I={}}=_,{promotionTags:C=[],discountPercentTags:R=[]}=I,{hotelId:j}=k,B=(null==e?void 0:e.find((e=>Kl.dt[e.type]&&1)))||{};let U=(null==e?void 0:e.filter((e=>!(14===e.type||![1,2,3,4,5,6,15].find((_=>_==e.type))))))||[],V=[];for(let e=0;e<(null==U?void 0:U.length);e++)V.push({tagtitle:Kl.M4[U[e].type],tagname:U[e].text});!(0,Pe.xb)(B)&&(null==B?void 0:B.text)&&V.push({tagtitle:Kl.dt[B.type],tagname:B.text||""});const G=this.getDiscountTxt();G&&V.push({tagtitle:"DISCOUNTPERCENT",tagname:G});for(let e=0;e<(null==C?void 0:C.length);e++)V.push({tagtitle:"PROMOTION",tagname:C[e].tagTitle});for(let e=0;e<(null==R?void 0:R.length);e++)V.push({tagtitle:"DISCOUNTPERCENT",tagname:R[e].tagTitle});let q={locale:H.default.getByKey("cargo",this.ctx).locale,new_taglist:V,masterhotelid:j,page:H.default.getByKey("pageId",this.ctx)||""};this.$safeLog("PriceTagShow",q)}generateDiscountPersent(e){let _="";return e&&(_="".concat(this.$translate("key.hotel.list.promo.discount.price.percentage","".concat(e)))||""),_}getDiscountTxt(){let e="";const{tags:_=[]}=this.props,k=null==_?void 0:_.find((e=>"DISCOUNTPERCENT"===e.tagTitle)),I=null==_?void 0:_.find((e=>"DISCOUNTAMOUNT"===e.tagTitle)),C=(0,li.zC)(this.ctx);return k&&(e=this.generateDiscountPersent(null==k?void 0:k.value)),I&&(e="".concat(this.$translate("key.hotel.list.promo.discount.price",(0,So.formatCurrency)(C,I.value,{digitTop:0})))),e}renderBtn(e,_,k,I,C,R,j){const H=(0,q.Yh)(this),{baseroominfo:U,priceLogParam:V,roomInfo:G,computeRoomPerson:z,base:J,type:Q}=this.props,{loginAccountABReault:ee}=j;return e?"meta"===Q&&"A"===ee?kd.createElement(LogButton,{data:roomRight_objectSpread(roomRight_objectSpread({},_),{},{priceMask:I,roomId:C})}):kd.createElement(ri,{is_icon_rotate:!1,suffixIcon:kd.createElement(B.Z,{type:"ic_new_more_line1",className:"btn-icon"}),onClick:this.toBook},this.$translate("key.hotel.listpage.see.availibility")):H&&"meta"===Q?kd.createElement(ld,{data:G,baseRoom:roomRight_objectSpread(roomRight_objectSpread({},U),J),roomkey:null==V?void 0:V.roomkey,btnText:J.book,source:"meta",computeRoomPerson:z,index:R}):kd.createElement(ri,{is_icon_rotate:!1,suffixIcon:kd.createElement(B.Z,{type:"ic_new_more_line1",className:"btn-icon"}),onClick:this.toBook},this.$translate("key.hotel.listpage.see.availibility"))}render(){var e,_,k,I,C,R,H,U,V,G,z,J;let{money:Q={},discountNote:ee,fontColor:te,type:ne,card:re,base:oe,specialPriceLabels:ie=[],taxPayAtHotel_Controller:ae=""}=this.props;const{minRoomInfo:le={},hotelBasicInfo:se={},promotion:ce=[],index:ue,discountLabels:de=[],roomTags:pe={}}=re,{promotionTags:he=[]}=pe,{originPrice:fe,price:me,priceExplanation:ge="",hidePrice:ve}=se,ye="meta"==ne,be=!!(0,ci.Z)(Q,"priceMask",null),_e=null===(e=ie[0])||void 0===e?void 0:e.text,we=(null===(_=this.props)||void 0===_?void 0:_.extraFlag)||[];let Ee="",Se="A";we.map((e=>{"LoginTip"===e.key&&(Ee=e.value||""),"LoginAB"===e.key&&(Se=e.value)}));const Oe={loginAccountTip:Ee,loginAccountABReault:Se},Te=(0,li.zC)(this.ctx),ke=ye?(0,ci.Z)(oe,"signInNote",""):(0,ci.Z)(re.hotelBasicInfo,"signInNote",""),Ie=ye?(0,ci.Z)(oe,"roomId",""):(0,ci.Z)(le,"roomId",""),Ce={masterHotelId:this.props.card.hotelBasicInfo.hotelId,discountNote:ee,type:null===(k=re.hotelBasicInfo)||void 0===k||null===(I=k.decorator)||void 0===I?void 0:I.type,_self:this},Pe="meta"!==ne?ce:null==ce||null===(C=ce.list)||void 0===C?void 0:C.filter((e=>19===e.type)),{normalList:Le}=((e,_)=>{let k,I;return _?(e||[]).forEach((e=>{(_ instanceof Array?_.indexOf(e.type)>-1:e.type===_)?(I||(I=[]),I.push(e)):(k||(k=[]),k.push(e))})):k=e,{normalList:k,separateList:I}})(Pe,[7,19]),Ne=ye?(null==Q?void 0:Q.priceDelete)||"":fe,De=ye?(null==Q?void 0:Q.price)||"":me,Ae=ye?be:ve,Re=be?"":null==Q?void 0:Q.extraChargeDescNew,xe=ye?Re||"":ge,je=null==de?void 0:de.find((e=>Kl.dt[e.type]&&1));let Be=(null===(R=this.props.roomInfo)||void 0===R||null===(H=R.promotion)||void 0===H||null===(U=H.list)||void 0===U?void 0:U.filter((e=>[1,2,3,4,7,10,18,19,20,21,22,23,24,25,26].find((_=>_==e.type)))))||[];(null===(V=Be)||void 0===V?void 0:V.length)&&(Be=[].concat(Be[0]));let Me=(null==de?void 0:de.filter((e=>!(14===e.type||![1,2,3,4,5,15].find((_=>_==e.type))))))||[];(null===(G=Me)||void 0===G?void 0:G.length)&&(Me=[].concat(Me[0]));const Fe=2===(null===(z=this.props.roomList)||void 0===z?void 0:z.length)||ye?"room-panel-price-btn-meta":"";return(null==Q?void 0:Q.priceSoldOutTag)?kd.createElement("div",{className:"room-panel-soldout"},kd.createElement(B.Z,{type:"warning"}),Q.priceSoldOutTag):kd.createElement("div",{className:j()("room-panel-rt",{"room-panel-rt-meta":ye}),id:"room-panel-rt".concat(ue)},kd.createElement("div",{className:j()("room-panel-price-btn ".concat(Fe))},kd.createElement("div",{className:j()("room-panel-price",{"room-panel-price-meta":ye})},kd.createElement("div",{className:"room-panel-promotion"},this.renderPriceTag(he,je,Me,Le),kd.createElement("div",{className:"link-box"},he.length<1&&_e?kd.createElement("div",{className:"mobile-lable"},_e):null,this.renderDiscountTag())),Q.priceLowestTag&&"meta"!==(null===(J=this.props)||void 0===J?void 0:J.type)&&kd.createElement("div",{className:"lowestPrice"},kd.createElement("div",{className:"text"},Q.priceLowestTag)),kd.createElement("div",{className:j()("whole",{"whole-meta":ye})},Ne&&this.priceReg.test(Ne)?kd.createElement("span",{className:"underline"},(0,So.formatCurrency)(Te,Ne,{digit:0,digitTop:2,ctx:this.ctx})):null,De&&this.priceReg.test(De)||Ae?kd.createElement("div",{className:j()("real",te),id:"meta-real-price",ref:this.priceRef},kd.createElement("span",{ref:this.hoverRef,onMouseOut:!ke&&"meta"===ne&&this.priceOnMouseOut||void 0,onMouseOver:!ke&&"meta"===ne&&this.priceOnMouseEnter||void 0},(0,q.er)(this)&&Ae?null:kd.createElement(price_Price,{price:De,currency:Te,hidePrice:Ae,isMetaRoom:ye}))):kd.createElement("div",{className:"v8-price-holder"})),(()=>{if(!xe)return null;if(!(xe.includes("{0}")&&xe.includes("{/0}")))return kd.createElement("p",{className:"price-explain",dangerouslySetInnerHTML:{__html:xe.replace(/\n/g,"<br/>")}});const e=xe.replace("{0}",'<span class="not-break">').replace("{/0}","</span>");return kd.createElement("p",{className:"price-explain",dangerouslySetInnerHTML:{__html:e}})})(),(()=>{const e=ye?ae:(0,ci.Z)(se,"payAtHotelTaxText","");if(!e)return null;return"0"===go.Z.get("IBU_showtotalamt")?kd.createElement("p",{className:"price-explain tax"},this.$translate("key.hotel.detail.additional.charges.may.apply")):!!e&&kd.createElement("p",{className:"price-explain tax"},e)})()),kd.createElement("div",{className:j()("btn-bottom",{"btn-bottom-meta":ye})},this.renderBtn(ke,Ce,!0,null,Ie,"room-panel-rt".concat(ue),Oe))))}}).defaultProps={},Od.propTypes={},Sd=Od))||Sd;var Cd=k(39621).default,Pd=k(67294);class roomLeftB extends Cd{constructor(e){var _;super(e),_=this,this.renderPolicy=(e,_)=>{const k=this.getPolicyText(e,_);return Pd.createElement("div",{className:"room-policy"},Pd.createElement(RoomAdvantageTag,{tagInfo:null==k?void 0:k.filter((e=>11550!==e.tagId))}),Pd.createElement(RoomAdvantageTag,{tagInfo:null==k?void 0:k.filter((e=>11550===e.tagId))}))},this.renderBedList=e=>(e||[]).map(((e,_)=>Pd.createElement("p",{key:_,className:"bed-desc"},e))),this.bedMouseOver=e=>{let _=this.props.card.roomInfo;_||(_=this.props.roomInfo);const k=(0,ci.Z)(_,"bed.contentListHover",null)||[];k.length>0&&this.onMouseOver(e,this.renderBedList(k))},this.cpxMouseOver=e=>_=>{const k=this.$component("ToolTip"),I={content:Pd.createElement(CpxBedHover,{cpxBedInfo:e}),target:_.target,triPlacement:"middle",dark:!1,borderRadius:4,zIndex:10001};k.action("show",I)},this.renderBed=e=>e&&Pd.createElement("span",{className:"bedContent"},e),this.renderBedIcon=e=>(e||[]).map(((e,_)=>{const k=Vs[e];return"/"===e?Pd.createElement("span",{key:_,className:"gang"},"/"):Pd.createElement(B.Z,{onMouseOver:this.bedMouseOver,onMouseOut:this.onMouseOut,className:"bed-icon-customer ".concat(e),type:k,key:_})})),this.renderCpxBedIcon=(e,_)=>(0,Pe.xb)(null==e?void 0:e.bedDetail)?null:(null==_?void 0:_.length)>0?(_||[]).map(((_,k)=>{const I=Vs[_];return"/"===_?Pd.createElement("span",{key:k,className:"gang"},"/"):Pd.createElement(B.Z,{onMouseOver:this.cpxMouseOver(e),onMouseOut:this.onMouseOut,className:"bed-icon-customer ".concat(_),type:I,key:k})})):Pd.createElement(B.Z,{onMouseOver:this.cpxMouseOver(e),onMouseOut:this.onMouseOut,className:"bed-icon-customer ic_new_multiple_beds",type:"ic_new_multiple_beds"}),this.renderPerson=function(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ic_new_user_line",k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,I=new Array(e).fill("");return I.length>k?Pd.createElement("p",{className:"render-person"},Pd.createElement(B.Z,{type:_}),Pd.createElement("span",{className:"rate"},Pd.createElement("span",null,"x"),Pd.createElement("span",null,e))):I.map(((e,k)=>Pd.createElement(B.Z,{key:k,type:_})))},this.renderWithChildPrice=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pd.createElement("p",{style:{cursor:"pointer"},onMouseOver:k=>(null==e?void 0:e.guestHover)&&_.onMouseOver(k,null==e?void 0:e.guestHover,!0),onMouseOut:_.onMouseOut},Pd.createElement("p",{className:"room-panel-roominfo-people-icons"},_.renderPerson((null==e?void 0:e.adultCount)||0,"ic_new_user_line",2),Pd.createElement(B.Z,{type:"ic_plus"}),_.renderPerson((null==e?void 0:e.childCount)||0,"a-MostPopularAmenitibeifen22",2)))},this.onMouseOver=function(e,k){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(I){let e={page:H.default.getByKey("pageId",_.ctx),type:k||""};_.$safeLog("logTagShow",e)}const C=_.$component("ToolTip"),R={content:k,target:e.target,triPlacement:"middle",dark:!1,zIndex:999,borderRadius:4};C.action("show",R);let j="";e.target.querySelector("p")?j=e.target.querySelector("p").innerHTML:e.target.querySelector("span")&&(j=e.target.querySelector("span").innerHTML),_.$safeLog("logMetapageLayerAction","expand",j,_.props)},this.onMouseOut=e=>{this.$component("ToolTip").action("hide");let _="";e.target.querySelector("p")?_=e.target.querySelector("p").innerHTML:e.target.querySelector("span")&&(_=e.target.querySelector("span").innerHTML),this.$safeLog("logMetapageLayerAction","hide",_,this.props)},this.renderEncourageTag=(e,_,k)=>{const{card:I}=this.props,{roomTags:C={}}=I,{encourageTags:R=[]}=C;return R.length>0?R.map((e=>Pd.createElement(EncourageTag,{hotelTagInfo:e}))):Pd.createElement(Pd.Fragment,null,e&&Pd.createElement("div",{className:j()("encourageStyle","minNoiseEncourage")},e.additionText),_&&Pd.createElement("div",{className:"encourageMsg"},_.additionText),k&&Pd.createElement("div",{className:"encourageMsg"},k.additionText))}}componentDidMount(){}getPolicyText(e,_){var k,I,C,R;if((null==e?void 0:e.length)>0)return e;let j=[],B=null===(k=(_||[]).find((e=>"ChildrenStayFree"===(null==e?void 0:e.additionName))))||void 0===k?void 0:k.additionText;B&&j.push({tagTemplateId:Nl,tagTitle:B,highlight:!0});let H=null===(I=(_||[]).find((e=>"ChildrenNormalTag"===(null==e?void 0:e.additionName))))||void 0===I?void 0:I.additionText;H&&j.push({tagTemplateId:Nl,tagTitle:H,highlight:!1});let U=null===(C=(_||[]).find((e=>"FreeCancelMessage"===(null==e?void 0:e.additionName))))||void 0===C?void 0:C.additionText;U&&j.push({tagTemplateId:Nl,tagTitle:U,highlight:!0});let V=null===(R=(_||[]).find((e=>"FreeBreakfast"===(null==e?void 0:e.additionName))))||void 0===R?void 0:R.additionText;return V&&j.push({tagTemplateId:Nl,tagTitle:V,highlight:!0}),j}render(){var e;let{card:_,roomNum:k,roomQuantity:I}=this.props;const{roomInfo:C={},hotelBasicInfo:R={},tags:B=[],roomTags:H={},discountLabels:U=[],saleRoom:V={}}=_,{advantageTags:G=[]}=H,{additionTexts:q,guestInfoEntity:z={}}=R,{bed:J}=C,Q=null==q?void 0:q.find((e=>"LowestPriceWillSellout"===e.additionName)),ee=null==q?void 0:q.find((e=>"LastBooking"===e.additionName)),te=null==B?void 0:B.find((e=>"HotelHotTags"===e.tagTitle)),ne=(null==B||null===(e=B.filter((e=>350===(null==e?void 0:e.tagPosition))))||void 0===e||e.map((e=>null==e?void 0:e.tagTitle)),I||k),re=ne>1,oe=(0,ci.Z)(C,"bed.list",null)||[];let ie=(0,ci.Z)(C,"bed.cpxBedInfo",null)||{};return Pd.createElement("div",{className:"roominfo-left"},re&&Pd.createElement("div",{className:"roominfo-left-title"},Pd.createElement("div",{className:"roominfo-left-roomnum"},ne,Pd.createElement("span",null,"x")),Pd.createElement("span",{className:"roominfo-left-name"},null==C?void 0:C.physicalRoomName),Pd.createElement(Pd.Fragment,null,Pd.createElement("span",{className:"room-panel-roominfo-people"},(null==z?void 0:z.childCount)>0?this.renderWithChildPrice(z):this.renderPerson(V.person)),(!!oe.length||!(0,Pe.xb)(ie))&&Pd.createElement("span",{className:"room-panel-roominfo-bed"},(0,Pe.xb)(ie)?this.renderBedIcon(oe):this.renderCpxBedIcon(ie,oe)))),!re&&Pd.createElement("div",{className:"roominfo-left-single-name"},Pd.createElement("span",{className:"physicalRoomName"},null==C?void 0:C.physicalRoomName),Pd.createElement("span",{className:"room-panel-roominfo-people"},(null==z?void 0:z.childCount)>0?this.renderWithChildPrice(z):this.renderPerson(V.person)),(!!oe.length||!(0,Pe.xb)(ie))&&Pd.createElement("span",{className:"room-panel-roominfo-bed"},(0,Pe.xb)(ie)?this.renderBedIcon(oe):this.renderCpxBedIcon(ie,oe))),Pd.createElement("div",{className:j()("roominfo-left-content",{"roominfo-left-multiroom":re})},this.renderPolicy(G,q),(null==U?void 0:U.length)?Pd.createElement(Promotion,{tags:U.filter((e=>6===e.type)),isPlainStyle:!0,isListCardRoomB:!0}):null,this.renderEncourageTag(Q,ee,te)))}}var Ld,Nd=k(39621).default,Dd=k(67294);let Ad=(0,Vl.ZP)(Ld=class Room extends Nd{constructor(e){super(e),this.toMember=()=>{this.$component("Account").action("toMember",{paramObj:{needMask:!0},successCallback:()=>{window.location.reload()},failcallback:()=>{}})}}render(){var e,_;let{money:k={},type:I,card:R,hotelSoldOut:B,bed:U,base:V,isShowLoginAccount:G="",isLogin:z=!1,roomQuantity:J,searchCondition:Q}=this.props;if(B)return null;const{hotelBasicInfo:ee={},promotion:te=[]}=R,{hotelId:ne=0}=ee,re="meta"==I,oe=!!(0,ci.Z)(k,"soldOut",""),ie=!!(0,ci.Z)(k,"priceMask",null),ae=null==te||null===(e=te.list)||void 0===e?void 0:e.find((e=>17===(null==e?void 0:e.type))),le=(null===(_=this.props)||void 0===_?void 0:_.extraFlag)||[];let se="",ce="A";le.map((e=>{"LoginTip"===e.key&&(se=e.value||""),"LoginAB"===e.key&&(ce=e.value)}));let ue={type:"LoginDealV8",masterHotelId:ne,discountNote:(0,li.xA)(se,H.default.getByKey("isLogged",this.ctx)),className:"special",isHidePrice:ie?1:0};const de=j()("room-type",{"room-type-common":ae},{soldout:oe},{"room-type-meta":re},{"room-type-meta-minNoise":re},{"room-type-account":!!G||re&&!!se&&"B"===ce||z},{"room-type-b":(0,q.H5)(this)||(0,q.Lf)(this)});return Dd.createElement(Dd.Fragment,null,Dd.createElement("div",{className:de},!(0,q.H5)(this)&&!(0,q.Lf)(this)||re?Dd.createElement(RoomLeft,{type:I,card:R,bed:U,base:V,roomQuantity:J,roomInfo:this.props.roomInfo}):Dd.createElement(roomLeftB,{type:I,card:R,bed:U,base:V,roomQuantity:J,roomInfo:this.props.roomInfo,roomNum:(null==Q?void 0:Q.roomNum)||1}),Dd.createElement(Id,(0,C.Z)({},this.props,{isListCardRoomB:((0,q.H5)(this)||(0,q.Lf)(this))&&!re}))),"B"===ce&&se&&re&&Dd.createElement(AccountLog,{data:ue,pageName:"listpage"}))}})||Ld;var Rd=k(39621).default,xd=k(67294);class canNotBeOrder_view_View extends Rd{render(){const{soldOutSize:e,iconSize:_}=this.state;return xd.createElement("div",{className:"sold-out-btn",ref:this.btnRef},xd.createElement(B.Z,{type:"ic_new_warning",className:"sold-out-warn",style:_?{fontSize:_}:{}}),xd.createElement("span",{style:e?{fontSize:e}:{}},this.props.text))}}const isBigScreen=()=>document.body.clientWidth>=1280;var jd=k(67294);class CanNotBeOrderBtn extends canNotBeOrder_view_View{constructor(e){super(e),this.state={soldOutSize:null,iconSize:null},this.btnRef=jd.createRef()}UNSAFE_componentWillReceiveProps(){const e=this.btnRef.current;if(!e)return;const _=parseFloat(getComputedStyle(e).width);(isBigScreen()&&_>184||!isBigScreen()&&_>143)&&this.setState({soldOutSize:14,iconSize:18})}}CanNotBeOrderBtn.defaultProps={text:"Sold Out"},CanNotBeOrderBtn.propTypes={text:_e().string};var Bd=k(70380),Md=k(39621).default,Fd=k(67294);class SoldOutRecommendInfo extends Md{constructor(e){super(e),this.renderSearchSoldOut=()=>Fd.createElement("div",{className:j()("roomlist-soldout")},this.$translate("key.hotel.detail.page.soldout"))}renderRecommend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,{checkIn:I,checkOut:C,price:R,rooms:B,guests:H}=e;I=this.$localeDate("mdFullString",I),C=this.$localeDate("mdFullString",C);const U=this.$translatePlural("key.hotel.online.homepage.searchbox.rooms",B),V=this.$translatePlural("key.hotel.online.homepage.searchbox.guests",H);return Fd.createElement("div",{className:j()("recommend-item",{single:1===k}),key:_,onClick:this.gotoDetail.bind(this,e,+_+1)},Fd.createElement("div",{className:"main"},Fd.createElement("div",{className:"date"},Fd.createElement("span",null,I," - ",C),Fd.createElement("span",{className:"roll"},Fd.createElement(Ee.Z,{type:"arrowRight"}))),Fd.createElement("p",{className:"guest"},U,", ",V),Fd.createElement("p",{className:"price"},R)))}renderMetaRecommend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,{checkIn:I,checkOut:C,price:R,rooms:B,guests:H,extraChargeDescNew:U="",taxAndFeeSummary:V=""}=e;I=this.$localeDate("mdShortString",I),C=this.$localeDate("mdShortString",C);const G=this.$translatePlural("key.hotel.online.homepage.searchbox.rooms",B),q=this.$translatePlural("key.hotel.online.homepage.searchbox.guests",H);return Fd.createElement("div",{className:j()("recommend-item-metav8",{single:1===k}),key:_,onClick:this.gotoDetail.bind(this,e,+_+1)},Fd.createElement("div",{className:j()("main",{"no-single":k>1})},Fd.createElement("div",null,Fd.createElement("div",{className:"date"},Fd.createElement("span",null,I," - ",C)),Fd.createElement("p",{className:"guest"},G,", ",q)),Fd.createElement("p",{className:j()("price",{"no-single-price":k>1})},R),Fd.createElement("p",{className:"model"},U),!!V&&Fd.createElement("p",{className:"taxFee"},V)),Fd.createElement("div",{className:"roll"},Fd.createElement(Ee.Z,{type:"arrowRight"})))}render(){const{isMeta:e=!1,isCompress:_}=this.props,{soldOutRecommendList:k=[],soldoutTitle:I="",noSoldoutTitle:C=""}=this.state.data||{};return(I||C)&&k.length?Fd.createElement(Fd.Fragment,null,!e&&Fd.createElement("div",{className:"roomlist-soldout-recommend"},I),!!k.length&&Fd.createElement("div",{className:j()("m-soldout-recommend",{"m-soldout-detail":!e,"m-soldout-compress":_})},e&&Fd.createElement("div",{className:j()("soldouttitle","soldouttitle-meta-v8")},I),e?Fd.createElement("div",{className:"list"},k.map(((e,_)=>this.renderMetaRecommend(e,_,k.length)))):Fd.createElement("div",{className:"list"},k.map(((e,_)=>this.renderRecommend(e,_,k.length)))))):e?null:this.renderSearchSoldOut()}}var Hd,Kd=k(48467).default;function soldout_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function soldout_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?soldout_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):soldout_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let Ud=(0,Ni.$j)((e=>{const{searchCondition:_={},searchBarData:k,metaHotel:I,baseRoom:C,initData:R}=e;return{searchCondition:_,searchBarData:k,metaHotel:I,baseRoom:C,initData:R,cityForDetail:(0,ci.Z)(e,"initData.base.cityId")||0}}),(e=>({dispatch:e})))(Hd=class SoldOutRecommendCard extends SoldOutRecommendInfo{constructor(e){var _;super(e),_=this,this.updateMetaSoldOutTitle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1?arguments[1]:void 0,I=arguments.length>2?arguments[2]:void 0;const{isMeta:C=!1,updateMetaHotelTitle:R}=_.props;if(!C)return!1;let j=Object.assign({},(null==e?void 0:e.card)||{});j.decorator.title&&(j.decorator.title=k.title),k.title&&j.decorator.title&&I(R({card:j}))},this.gotoDetail=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,I=arguments.length>2?arguments[2]:void 0;const{masterhotelid:C,isMeta:R=!1,searchBarData:j,dispatch:B,updateCalendar:H,updateRoomList:U}=_.props,{bookUrl:V,checkIn:G,checkOut:q,price:z}=e;_.$safeLog("logClick",{masterhotelid:C,index:k,price:z,date:"".concat(G," - ").concat(q),page:_.pageName}),I&&I.stopPropagation();const J=(0,Ne.Z)("fgt");let Q=J&&V?"".concat(V,"&fgt=").concat(J):"".concat(V);if(R&&Q&&window.open(Q),!R){var ee;const{checkInStr:e,checkOutStr:k,nights:I}=(0,Be.Lf)({checkIn:G,checkOut:q,timeOffset:null==j||null===(ee=j.search)||void 0===ee?void 0:ee.timeOffset,maxNights:(0,Me.Z)()});B(H({checkIn:e,checkOut:k,nights:I})),setTimeout((()=>{B(U(_.props))}),0)}},this.ubtMapping={logShow:U.kE,logClick:U.xb,viewDateLoad:U.dM,viewDateClick:U.uT},this.state={data:{title:"",soldoutTitle:"",noSoldoutTitle:"",soldOutRecommendList:[]}},this.pageName=e.isMeta?"metapage":"detailpage"}componentDidMount(){setTimeout((()=>{this.sendAjax()}),10)}sendAjax(){var e;const{searchCondition:_,searchBarData:{roomGuest:{rooms:k=1,adults:I=1,children:C,childAges:R}={},calendar:{checkIn:j="",checkOut:B=""}={}}={},isHotelSoldOut:U=!1,masterhotelid:V=0,dispatch:G,metaHotel:q,updateSoldOutData:z,cityForDetail:J}=this.props;let Q={checkIn:j.replace(/\//g,"-"),checkOut:B.replace(/\//g,"-"),adult:I,child:C,age:R.length?R.join():"",roomNum:k,priceType:+(go.Z.get("IBU_showtotalamt")||_.priceType),hotelId:(0,Ne.Z)("hotelid")||V,cityId:_.cityId||J||0},ee={data:{searchCondition:Q,meta:{fgt:(0,Ne.Z)("fgt")}},genk:!0,genKeyParam:{a:0,b:Q.checkIn,c:Q.checkOut,d:null===(e=H.default.getByKey("cargo.locale"))||void 0===e?void 0:e.toLocaleLowerCase(),e:2},silence:!0,url:"/metaRecommendSearch"};Kd(ee).then((e=>{let{data:_,success:k}=e;k((()=>{var e;const k={masterhotelid:V,recommenddates:(_.soldOutRecommendList||[]).map((e=>{let{price:_,checkIn:k,checkOut:I}=e;return{price:_,date:"".concat(k," - ").concat(I)}})),page:this.pageName};this.$safeLog("logShow",k),(null===(e=_.soldOutRecommendList)||void 0===e?void 0:e.length)||this.$safeLog("viewDateLoad",{hotelid:V,checkin:j,checkout:B}),z&&G(z(soldout_objectSpread(soldout_objectSpread({},_),{},{isSoldOut:U}))),this.updateMetaSoldOutTitle(null==q?void 0:q.rawData,_,G),((null==_?void 0:_.soldOutRecommendList)||[]).map((e=>{let _=Object.assign({},Q,e,{hotelid:(0,Ne.Z)("hotelid")});_.crn=_.roomNum,_.children=_.child,_.ages=_.age,e.bookUrl=(0,Bd.ZP)({data:_}),e.rooms=_.roomNum,e.guests=+_.adult+ +_.child})),this.setState({data:_})}))}))}})||Hd;const Zd={CARD_ALL_WIDTH:866,FIXED_WIDTH:268,CARD_DISTANCE:8,PRICE_WIDTH:66,CARD_MIN_WIDTH:194,CARD_PADDING:16};var Vd=k(39621).default,Wd=k(67294);class calendarRecommendInfo extends Vd{constructor(e){super(e),this.renderSearchSoldOut=()=>Wd.createElement("div",{className:j()("detailpage-soldout")},Wd.createElement("div",{className:"m-notavailable-img"}),Wd.createElement("div",{className:"norecomdate"},this.$translate("key.hotel.online.detailpage.htlseach.noroom.norecomdate"))),this.renderNoresult=()=>Wd.createElement("div",{className:"no-results"},Wd.createElement(Ee.Z,{type:"ic_new_warning",className:"sold-out-warn"}),Wd.createElement("span",null,this.$translate("key.hotel.online.listpage.htlseach.noroom.norecomdate"))),this.onClick=e=>{const{masterhotelid:_=0}=this.props;e.stopPropagation(),(0,se.instanceComponent)("Calendar").action("openCalendar","checkIn"),(0,se.instanceComponent)("SearchBoxV8").action("searchMaskShow"),this.$safeLog("moreDates",{masterhotelid:_})},this.renderOperate=()=>{const{isContinueScroll:e=!0,isRightBtn:_=!0}=this.state;let k=this.isArabic?"":"hidden-btn",I=this.isArabic?"hidden-btn":"";const C=this.isArabic?!_:_;return!e&&C&&(k=this.isArabic?"hidden-btn":"",I=this.isArabic?"":"hidden-btn"),Wd.createElement(Wd.Fragment,null,Wd.createElement("div",{className:j()("operate-btn operate-btn-left","".concat(k)),onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.clickRecommendCardScroll(!1)}},Wd.createElement(Ee.Z,{type:"back",className:"operate-btn-icon icon-left"})),Wd.createElement("div",{className:j()("operate-btn operate-btn-right","".concat(I)),onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.clickRecommendCardScroll(!0)}},Wd.createElement(Ee.Z,{type:"arrowRight",className:"operate-btn-icon"})),Wd.createElement("div",{className:j()("right-background","".concat(!e||this.isArabic?"hidden-btn":""))}))},this.clickRecommendCardScroll=e=>{var _,k;const{currentIndex:I=0}=this.state,C=(null===(_=this.contentRef.current)||void 0===_?void 0:_.scrollWidth)-(null===(k=this.contentRef.current)||void 0===k?void 0:k.clientWidth);let R=0;if(R=this.isArabic?e?I-1:I+1:e?I+1:I-1,R<0)return;const j=this.getAllElements("recommend-item","class"),B=j[R].offsetLeft,H=j[R].offsetWidth+Zd.CARD_PADDING,U=this.isArabic?H:-B;this.setState({currentIndex:R,isContinueScroll:!!(C>Math.abs(U)*R),scrollOffset:U*R,isRightBtn:e})},this.getAllElements=(e,_)=>{var k;let I=null;return I="id"===_?"#".concat(e.replace(/\^#/,"")):"class"==_?".".concat(e.replace(/\^./,"")):"".concat(e.replace(/\^(.|#)/,"")),null===(k=this.contentRef.current)||void 0===k?void 0:k.querySelectorAll(I)},this.getTextWidth=(e,_)=>{const k=document.createElement("canvas").getContext("2d");k.font=_;return k.measureText(e).width},this.contentRef=Wd.createRef(),this.containerRef=Wd.createRef()}renderDetailRecommend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,{checkIn:k,checkOut:I,minPrice:C,currency:R}=e;k=this.$localeDate("mdShortString",k),I=this.$localeDate("mdShortString",I);const{isFromBffRoomListNew:j=!1}=this.props;return Wd.createElement("div",{className:"recommend-item",key:_,onClick:this.gotoDetail.bind(this,e,+_+1,j)},Wd.createElement("div",{className:"main"},Wd.createElement("div",{className:"date"},Wd.createElement("span",null,k," - ",I)),Wd.createElement("p",{className:"price"},this.$translate("key.hotel.online.htlseach.noroom.norecomdate.price",(0,So.formatCurrency)(R,C,{digit:0,digitTop:2})))),Wd.createElement("div",{className:"roll"},Wd.createElement(Ee.Z,{type:"arrowRight"})))}renderListRecommend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,{checkIn:I,checkOut:C,minPrice:R,currency:B}=e;I=this.$localeDate("mdShortString",I),C=this.$localeDate("mdShortString",C);const{isFromBffRoomListNew:H=!1}=this.props;return Wd.createElement("div",{className:j()("recommend-item",{single:1===k}),key:_,onClick:this.gotoDetail.bind(this,e,+_+1,H)},Wd.createElement("div",{className:j()("main",{"no-single":k>1})},Wd.createElement("div",{className:"date"},Wd.createElement("span",null,I," - ",C)),Wd.createElement("p",{className:j()("price",{"no-single-price":k>1})},this.$translate("key.hotel.online.htlseach.noroom.norecomdate.price",(0,So.formatCurrency)(B,R,{digit:0,digitTop:2,ctx:this.ctx})))),Wd.createElement("div",{className:"roll"},Wd.createElement(Ee.Z,{type:"arrowRight"})))}render(){const{pageName:e}=this.props,{isNeedScroll:_,scrollOffset:k=0,isTitleTipB:I}=this.state,{priceRecommendInfos:C}=this.state.data||{};return(null==C?void 0:C.length)?Wd.createElement(Wd.Fragment,null,!!C.length&&Wd.createElement("div",{className:j()("soldout-recommend")},I?Wd.createElement("div",{className:"title-tipB"},this.$translate("key.hotel.online.detailpage.htlseach.noroom.desc")):Wd.createElement("div",{className:"title-box"},Wd.createElement(Ee.Z,{type:"information",style:{fontSize:"16px"}}),Wd.createElement("div",{className:"title",style:{marginLeft:"5px"}},this.$translate("key.hotel.online.listpage.htlseach.noroom.desc"))),"metapage"===e||"listpage"===e?Wd.createElement("div",{className:j()("hidden",_?"scroll-container":""),ref:this.containerRef},Wd.createElement("div",{className:"list",ref:this.contentRef,style:{transform:"translateX(".concat(k,"px)")}},C.map(((e,_)=>this.renderListRecommend(e,_,C.length)))),_&&this.renderOperate()):Wd.createElement("div",{className:"list"},C.map(((e,_)=>this.renderDetailRecommend(e,_,C.length))),Wd.createElement("div",{className:"recommend-item",onClick:e=>this.onClick(e)},Wd.createElement("div",{className:"main"},Wd.createElement("div",{className:"moreDates"},this.$translate("key.hotel.online.detailpage.htlseach.noroom.moredates.btn"))),Wd.createElement("div",{className:"roll"},Wd.createElement(Ee.Z,{type:"arrowRight"})))))):"metapage"===e||"listpage"===e?this.renderNoresult():null}}var Gd=k(55391);function updateRefreshRooms(e){return{payload:e,type:Gd.W}}var $d=k(46002),qd=k(24713);const toggleFromMetaToMain=e=>({type:qd.L,payload:e});var zd=k(24567);const tools_optionInfo_resetOptionInfo=()=>{let e=window.location.href,_="0"!==(0,Ne.Z)("domestic")?fi.VS.City:fi.VS.IntlCity,k=(0,Ne.Z)("city")||(0,Ne.Z)("cityId");e=(0,ii.qz)({optionId:k},e),e=(0,ii.qz)({optionName:""},e),e=(0,ii.qz)({optionType:_},e),window.history.replaceState(null,"",e)},Yd=function recursiveSort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_="";return e.forEach((e=>{1===e.status&&(_=e.list&&0!==e.list.length?Yd(e.list):e.value)})),_},getPreHotelIds=e=>{const{store:_}=e;if(_){const e=_.getState();let k=(0,ci.Z)(e,"longList.hotelList",null)||(0,ci.Z)(e,"longList.hotelList.list",[]);if(!k.length)return k;return[...k].map((e=>Number(e.hotelBasicInfo.hotelId)))}return[]};const helper_hotelSearchSearchCondition=(e,_)=>{const{poi:k,mapParam:I={},searchCondition:C,initData:R,sortInfo:j,pageNo:B}=e;let U=function helper_handleDateRel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const _="F"===H.default.getByKey("initData.TimeOffsetValid");let{checkInStr:k,checkOutStr:I,nights:C}=(0,Be.Lf)({checkIn:e.checkIn,checkOut:e.checkOut,timeOffset:!_&&e.timeOffset,maxNights:(0,Me.Z)()}),R=(0,Ne.Z)("relindate")||0,j=(0,Ne.Z)("reloutdate")||0,B=(0,Ne.Z)("relatedate")||0;return e.checkIn&&e.checkOut&&(R=j=0),mi({checkIn:k,checkOut:I,nights:C,relindate:R,reloutdate:j,relatedate:B})}(C),V=(e=>{let _,k,I=(0,ci.Z)(e,"optionType",""),C=(0,ci.Z)(e,"optionId","");!Number(C)&&[fi.VS.City,fi.VS.IntlCity].includes(I)&&(C=(0,ci.Z)(e,"city","")||(0,ci.Z)(e,"cityId",""));try{_=decodeURIComponent((0,ci.Z)(e,"optionName","")),k=decodeURIComponent((0,ci.Z)(e,"display",""))}catch(I){_=(0,ci.Z)(e,"optionName",""),k=(0,ci.Z)(e,"display","")}const R=new OptionType(e),{isProvinceDistrict:j,isDirectSearch:B,getOptionType:H}=R;return{optionType:I,destination:j()||B()&&H()===fi.VS.District?k:"",keyword:fi.hS.indexOf(I)>-1&&!B()?"":_,optionId:C}})({optionId:(0,Ne.Z)("optionId"),optionType:(0,Ne.Z)("optionType"),optionName:(0,Ne.Z)("optionName"),display:(0,Ne.Z)("display")});return Object.assign(C,k.lat&&k.lng||_?k:{}),Object.assign({},C,{url:window.location.href,mapType:(0,ci.Z)(R,"mapInfo.type","")},V,{checkIn:U.checkIn.replace(/\//g,"-"),checkOut:U.checkOut.replace(/\//g,"-"),sortType:Yd(j.list),pageNo:B},I)},list=e=>{let{sortInfo:_,filterCondition:k,pageNo:I,isRecommend:C,edmHotelData:R,filters:j}=e;k=(0,li.MA)(k);let B,{poi:H,filterParam:U,noSelectedFilter:V}=(e=>{let _={},k={lat:0,lng:0};return(0,Ne.Z)("optionId")||(k={lat:(0,Ne.Z)("lat"),lng:(0,Ne.Z)("lon")}),Object.keys(e).map((I=>{if(I===zd.Wj.PRICERANGE)return void(_[I]={lowPrice:e[I].priceLow,highPrice:e[I].priceHigh,curr:(0,Ne.Z)("barCurr")||(0,li.zC)()});if(~[zd.Wj.GuestRating,zd.Wj.PRICETYPE].indexOf(I)){const k=(0,ci.Z)(e[I],"list",[]);return void(_[I]=(e=>{let _="";return e&&e[0]&&(_=e[0].value),_})(k))}if(I===zd.Wj.BRAND){let k=(0,ci.Z)(e[I],"list",[]);return void(_[I]=k.map((e=>({value:e.value,type:e.type}))))}if(I===zd.Wj.DISCOUNTS){let k=(0,ci.Z)(e[I],"list",[]);return void(_[I]=k.map((e=>({value:e.value,discountValue:e.discountValue}))))}if(I===zd.Wj.AIRPORTANDRAILWAYSTATION){let C=(0,ci.Z)(e[I],"list",[]);return void(_[I]=C.map((e=>{if(e.status)return(k.lat=e.lat)&&(k.lng=e.lng),{value:e.value,type:e.type}})))}if(I===zd.Wj.HOTAREA){let C=(0,ci.Z)(e[I],"list",[]);return void(_[I]=C.map((e=>{let{value:_,type:I,lat:C=0,lng:R=0}=e;return k.lat=C,k.lng=R,{value:_,type:I}})))}if(~[zd.Wj.ZONES,zd.Wj.LANDMARKS,zd.Wj.AIRPORTANDRAILWAYSTATION,zd.Wj.METROS,zd.Wj.LOCATION].indexOf(I)){let _=I===zd.Wj.METROS,C=I===zd.Wj.ZONES,R=(0,ci.Z)(e[I],"".concat(_?"lineList":"list"),[]),j=R.filter((e=>e.status));_?R.filter((e=>e.status)).forEach((e=>{let _=e.siteList.find((e=>e.status));_&&(k.lat=_.lat)&&(k.lng=_.lng)})):C?1===j.length&&(k.lat=j[0].lat)&&(k.lng=j[0].lng):j.length&&(k.lat=j[0].lat)&&(k.lng=j[0].lng)}const C=e[I].list;C&&(_[I]=C.map((e=>e.value)))})),{filterParam:_,poi:k,noSelectedFilter:!k.lat&&!k.lng||!1}})(k),G=helper_hotelSearchSearchCondition(Object.assign({},e,{poi:H}),V);((e,_)=>{let k=!0;return Object.keys(e).map((_=>{let I=e[_],C=null==I?void 0:I.list;_!==zd.Wj.PRICETYPE&&C&&C.length&&(k=!1)})),_.list.forEach((e=>{e.status&&_.userChanged&&(k=!1)})),k})(k,_)?(B=(0,$d.Z)(),$a.Z.dispatch(toggleFromMetaToMain(!1))):(B=$d.L,$a.Z.dispatch(toggleFromMetaToMain(!0)));let q=(e=>{let{isRecommend:_,store:k,pageNo:I,filterParam:C,searchParam:R,filters:j}=e;_&&(C.bookable=[1]);const B=(0,ci.Z)(k.getState(),"seqId.normalSeqId",""),H=(0,ci.Z)(k.getState(),"seqId.recommendSeqId","");return{seqid:I>1?_?H:B:"",preHotelIds:getPreHotelIds({pageNo:I,isRecommend:_,store:k}),filterCondition:C,searchCondition:R,filters:j}})({isRecommend:C,store:$a.Z,pageNo:I,filterParam:U,searchParam:G,filters:j});return R&&(q.edmHotelData=R),q.tripWalkDriveSwitch="T",Object.assign({},q,{meta:B})};var Jd,Xd=k(48467).default;function calendarRecommend_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function calendarRecommend_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?calendarRecommend_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):calendarRecommend_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let Qd=(0,Ni.$j)((e=>{const{searchCondition:_={},filterCondition:k,sortInfo:I,renderFilters:C,searchBarData:R,metaHotel:j,baseRoom:B,initData:H}=e;return{searchCondition:_,filterCondition:k,sortInfo:I,renderFilters:C,searchBarData:R,metaHotel:j,baseRoom:B,initData:H,cityForDetail:(0,ci.Z)(e,"initData.base.cityId")||0}}),(e=>({dispatch:e})))(Jd=class CalendarRecommendCard extends calendarRecommendInfo{constructor(e){var _,k;super(e),_=this,this.getDetailParam=()=>{let{cityId:e,timeOffset:_}=H.default.getByKey("initData.base")||{},k=(0,da.Z)(),I=(0,Be.Lf)({checkIn:k.checkin,checkOut:k.checkout,timeOffset:_,maxNights:(0,Me.Z)()});return{searchCondition:{adult:Number(k.adult)||1,child:Number(k.children)||0,age:decodeURIComponent(k.ages||""),cityName:k.cityname||"",cityId:e,checkIn:I.checkInStr.replace(/\//g,"-"),checkOut:I.checkOutStr.replace(/\//g,"-"),roomNum:Number(k.crn)||1,travelPurpose:k.travelpurpose,pageNo:1,pageSize:10,priceType:go.Z.get("IBU_showtotalamt"),url:window.location.href},filterCondition:{},deduplication:[],preHotelIds:[],seqid:""}},this.getListParam=()=>{const{searchCondition:e,filterCondition:_,sortInfo:k,initData:I,renderFilters:C}=this.props;let R=list({initData:I,searchCondition:e,filterCondition:_,sortInfo:k,pageNo:1}),j=(0,J.hZ)(C,["10","18","41","50","139"]);return R.filters=j,R},this.handlePriceCalendar=(e,_)=>{var k,I;const{searchBarData:{roomGuest:{rooms:C=1,adults:R=1,children:j,childAges:B}={},calendar:{checkIn:H="",checkOut:U=""}={}}={},isHotelSoldOut:V=!1,masterhotelid:G=0,dispatch:q,updateSoldOutData:z,setNoBookableRoom:J,masterhotelid_tracelogid:Q,rmlist_tracelogid:ee}=this.props,te={masterhotelid:G,recommenddates:(e.priceRecommendInfos||[]).map((e=>{let{minPrice:_,checkIn:k,checkOut:I}=e;return{minPrice:_,date:"".concat(k," - ").concat(I)}})),page:this.pageName};this.$safeLog("logShow",te),(null===(k=e.priceRecommendInfos)||void 0===k?void 0:k.length)||(J&&J(!0),this.$safeLog("viewDateLoad",{hotelid:G,checkin:H,checkout:U})),z&&q(z(calendarRecommend_objectSpread(calendarRecommend_objectSpread({},e),{},{isSoldOut:V}))),(null===(I=e.priceRecommendInfos)||void 0===I?void 0:I.length)&&e.priceRecommendInfos.map(((e,k)=>{this.$safeLog("listDatecardExposure",{masterhotelid:G,index:k,price:e.minPrice,checkIn:e.checkIn,checkOut:e.checkOut,masterhotelid_tracelogid:Q});let I=Object.assign({},_,e,{hotelId:(0,Ne.Z)("hotelid")||G,hasAidInUrl:!("metapage"!==this.pageName||!(0,ii.WH)("allianceid"))||void 0});I.crn=C,I.children=j,I.ages=B,I.adult=R,e.bookUrl=(0,Bd.ZP)({data:I}),e.rooms=C,e.guests=+R+ +j}));const ne=this.handleRecommendCardIsScroll(e.priceRecommendInfos);this.setState({data:e,isNeedScroll:ne})},this.updateMetaSoldOutTitle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1?arguments[1]:void 0,I=arguments.length>2?arguments[2]:void 0;const{pageName:C,updateMetaHotelTitle:R}=_.props;if("detailpage"===C)return!1;let j=Object.assign({},(null==e?void 0:e.card)||{});j.decorator.title&&(j.decorator.title=k.title),k.title&&j.decorator.title&&I(R({card:j}))},this.gotoDetail=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,I=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3?arguments[3]:void 0;const{masterhotelid:R,pageName:j,searchBarData:B,dispatch:H,updateCalendar:U,updateRoomList:V,masterhotelid_tracelogid:G,rmlist_tracelogid:q}=_.props,{bookUrl:z,checkIn:Q,checkOut:ee,minPrice:te}=e;"detailpage"===j&&(0,J.fw)({checkIn:Q.replace(/\-/g,"/"),checkOut:ee.replace(/\-/g,"/")}),"detailpage"===j&&(0,se.instanceComponent)("Calendar").action("showTooltip",{ShowTooltip:!0}),_.$safeLog("logClick",{masterhotelid:R,index:k,price:te,date:"".concat(Q," - ").concat(ee),page:_.pageName}),C&&C.stopPropagation();const ne=(0,Ne.Z)("fgt");let re=ne&&z?"".concat(z,"&fgt=").concat(ne):"".concat(z);if("detailpage"!==j&&re&&window.open(re),"detailpage"===j){var oe;(0,Ti.gS)(),(0,Ti.gW)();const{checkInStr:e,checkOutStr:C,nights:j}=(0,Be.Lf)({checkIn:Q,checkOut:ee,timeOffset:null==B||null===(oe=B.search)||void 0===oe?void 0:oe.timeOffset,maxNights:(0,Me.Z)()});H(U({checkIn:e,checkOut:C,nights:j})),setTimeout((()=>{H(I?updateRefreshRooms(!0):V(_.props))}),0),_.$safeLog("detailDatecardClick",{masterhotelid:R,index:k-1,price:te,checkIn:Q,checkOut:ee,rmlist_tracelogid:q})}else _.$safeLog("listDatecardClick",{masterhotelid:R,index:k-1,price:te,checkIn:Q,checkOut:ee,masterhotelid_tracelogid:G})},this.handleRecommendCardIsScroll=e=>{if(!e||!(null==e?void 0:e.length))return!1;const _=null==e?void 0:e.find((e=>({minPrice:null==e?void 0:e.minPrice,currency:null==e?void 0:e.currency}))),k=this.$translate("key.hotel.online.htlseach.noroom.norecomdate.price",(0,So.formatCurrency)(null==_?void 0:_.currency,null==_?void 0:_.minPrice,{digit:0,digitTop:2,ctx:this.ctx})),I=this.getTextWidth(k,"14px Arial")||Zd.CARD_MIN_WIDTH,{CARD_ALL_WIDTH:C,FIXED_WIDTH:R,CARD_DISTANCE:j,PRICE_WIDTH:B}=Zd;return I+B>(C-R-j*(e.length-1))/e.length},this.getTextWidth=(e,_)=>{const k=document.createElement("canvas").getContext("2d");k.font=_;return k.measureText(e).width},this.ubtMapping={logShow:U.kE,logClick:U.xb,viewDateLoad:U.dM,viewDateClick:U.uT,listDatecardClick:U.EV,moreDates:U.WW,listDatecardExposure:U.k,detailDatecardClick:U.Mx,detailDatecardExposure:U.Cl},this.isArabic=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx)),this.state={isTitleTipB:(0,q.Lf)(this),data:{priceRecommendInfos:null!==(k=e.fromHotelListPriceRecommendInfos)&&void 0!==k?k:[],fetching:!1,currentIndex:0,isContinueScroll:!0,isNeedScroll:!1,scrollOffset:0,isRightBtn:!0}},this.pageName=e.pageName}componentDidMount(){var e,_,k,I;!(null===(e=this.state.data)||void 0===e?void 0:e.priceRecommendInfos)||(null===(_=this.state.data)||void 0===_||null===(k=_.priceRecommendInfos)||void 0===k?void 0:k.length)<1?setTimeout((()=>{this.getHotelPriceCalendarData()}),10):this.handlePriceCalendar({priceRecommendInfos:null!==(I=this.state.data.priceRecommendInfos)&&void 0!==I?I:[],fetching:!1},{})}needFetchRecomDate(){const{searchBarData:{calendar:{nights:e}={}}={}}=this.props;let _=!1;const{isIsolation:k,isolationNight:I}=this.getIsolationTag();return _=k&&e>=I||!k,_}getIsolationTag(){var e,_;const{initData:k={}}=this.props,{labels:I=[]}=k||{};let C=[],R=[],j=!1,B=0,H="",U="";return I.map((e=>{"ACTIVITY"===e.type&&C.push(e)})),C.map((e=>{const{extendList:_=[]}=e;_.map((e=>{"IS_ISOLATION_HOTEL"===e.type&&"T"==e.value&&(j=!0,R=_),"ISOLATION_MATCH_NIGHT"===e.type&&(B=e.value||0)}))})),U=(null===(e=R)||void 0===e||null===(_=e.find((e=>"SUBTAGID"===e.type)))||void 0===_?void 0:_.value)||"",B>0&&(H=this.$translatePlural("key.hotel.detailpage.quarantine.tip",B)),{isIsolation:j,isolationNight:B,isolationTip:H,subtagid:U}}getHotelPriceCalendarData(){var e,_;const{masterhotelid:k=0,setNoBookableRoom:I,cannotReserveRecommend:C}=this.props;if("detailpage"===this.pageName){if(!(this.needFetchRecomDate()||!1))return}let R="metapage"===this.pageName||"listpage"===this.pageName?this.getListParam():this.getDetailParam();const{searchCondition:j}=R,B=(0,Ha.LT)(j);let U=(0,J.tV)(Object.assign({},R,{searchSessionId:B,cannotReserveRecommend:C}));U.search.hotelIds=[{id:k}],U.search.location.coordinates=null===(e=U.search.location.coordinates)||void 0===e?void 0:e.map((e=>{var _,k;return calendarRecommend_objectSpread(calendarRecommend_objectSpread({},e),{},{latitude:(null==e||null===(_=e.latitude)||void 0===_?void 0:_.toString())||"",longitude:(null==e||null===(k=e.longitude)||void 0===k?void 0:k.toString())||""})}));const V=go.Z.get("IBU_showtotalamt");var G,q,z,Q,ee,te,ne,re;"detailpage"===this.pageName&&("0"===V&&(null==U||null===(G=U.search)||void 0===G||null===(q=G.filters)||void 0===q||q.push({filterId:"80|0|0",type:"80",value:"0"})),"1"===V&&(null==U||null===(z=U.search)||void 0===z||null===(Q=z.filters)||void 0===Q||Q.push({filterId:"80|1|0",type:"80",value:"1"})),"2"===V&&(null==U||null===(ee=U.search)||void 0===ee||null===(te=ee.filters)||void 0===te||te.push({filterId:"80|2|0",type:"80",value:"2"})),"3"===V&&(null==U||null===(ne=U.search)||void 0===ne||null===(re=ne.filters)||void 0===re||re.push({filterId:"80|3|0",type:"80",value:"3"})));let oe={data:U,url:"/getHotelPriceCalendar",bff:!0,bffV2:!0,genk:!0,checkReferer:!0,silence:!0,currency:(0,Js.zC)(this.ctx),genKeyParam:{a:0,b:"",c:"",d:null===(_=H.default.getByKey("cargo.locale",this.ctx))||void 0===_?void 0:_.toLocaleLowerCase(),e:2}};this.setState({fetching:!0}),Xd(oe).then((e=>{let{data:_,success:k,fail:C}=e;k((()=>{this.handlePriceCalendar(_,U),this.setState({fetching:!1})})),C((()=>{this.setState({fetching:!1}),I&&I(!0)}))}))}})||Jd;var ep=k(16564);const updateMetaHotel=e=>({type:ep.iB,payload:e}),updateMetaHotelTitle=e=>({type:ep.Ci,payload:e}),clearMetaHotel=()=>({type:ep.Lg,payload:null});var tp=k(61191);function actionCreator_updateSoldOutData(e){return{payload:e,type:tp.p}}var np=k(39621).default,rp=k(67294);class PreSale extends np{constructor(e){super(e),this.ubtMapping={logPreSaleShow:logPreSaleShow,logPreSaleClick:fa},this.goTo=(e,_)=>{_&&_.stopPropagation();let{preSale:{productId:k=0}={}}=this.props||{preSale:{}};e&&(e="".concat(window.location.origin,"/hotels/presale?path=").concat(e.replace("?","&"),"&width=828&height=828"),this.$safeLog("logPreSaleClick",k,e),window.open(e))},this.state={visible:!1,left:0,top:0}}componentDidMount(){let{preSale:{productUrl:e=""}={}}=this.props||{preSale:{}};this.$safeLog("logPreSaleShow",e)}render(){let{preSale:e}=this.props;if(!e)return null;let{productName:_="",productUrl:k="",tags:I=[],price:C="",originPrice:R="",saleDesc:H="",useRule:U=""}=e||{};C===R&&(R="");return rp.createElement("div",{className:"presale-room-type"},rp.createElement("div",{className:j()("p-room",{})},rp.createElement("div",{className:"left"},rp.createElement("div",{className:"img"}),rp.createElement("div",{className:"taginfo"},rp.createElement("h3",{className:""},_),rp.createElement("div",{className:"list"},I.map(((e,_)=>rp.createElement("div",{key:_},rp.createElement(B.Z,{type:2===e.iconType?"time_process":"checklist",className:2===e.iconType?"time":"pre-icon"}),e.name)))),rp.createElement("div",{className:"rules"},U))),rp.createElement("div",{className:"pre-right"},rp.createElement("div",{className:"circle circle-top"}),rp.createElement("div",{className:"circle circle-bottom"}),rp.createElement("div",{className:"infos"},rp.createElement("div",{className:"price"},R,rp.createElement("span",null,C)),rp.createElement("div",{className:"btn",onClick:this.goTo.bind(this,k)},rp.createElement(Buttons,{type:"warn",size:"lg",className:"pre-btn"},this.$translate("key.hotel.meta.presale.buynow"))),rp.createElement("div",{className:"sold"},H)))))}}const localSignInNote=e=>{let _=!1;var k,I;Oc.C?_=H.default.getByKey("localSignInNote"):_=null==e||null===(k=e.ctx)||void 0===k||null===(I=k.state)||void 0===I?void 0:I.localSignInNote;return _};var op=k(9836),ip=k(23866),ap=k(17945);var lp=k(5469),sp=k(67294);function HotelBottomBanner(e){return sp.createElement("div",{className:"hotel-bottom-banner-container"},sp.createElement("span",{className:"hotel-bottom-banner-text"},e.text))}const cp="htl_t_online_list_htllist_picbotom_click",up="htl_t_online_list_htllist_twosides_click",dp=236,pp="//images3.c-ctrip.com/hotel_online_images/bff/nophoto.png";var hp=k(39621).default,fp=k(67294);class HotelCardImg extends hp{constructor(e){super(e),this.ubtMapping={metaHotelListCardRendered:metaHotelListCardRendered},this.changeSelectImg=e=>{const _=e<0?4:e>4?0:e;this.setState({swiperTransition:"all 0.2s ease-in-out",showHDImgIndex:e,indicatorIndex:_,offsetLeft:-236*(e+1)})},this.handleIndicatorHover=(e,_)=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.changeSelectImg(_),this.setState({showOperate:!1}),this.logImageHover(_)},this.changeLeftImg=()=>{const{showHDImgIndex:e}=this.state,_=e-1;this.changeSelectImg(_),_<0?(setTimeout((()=>{this.setState({swiperTransition:"none",showHDImgIndex:4,offsetLeft:-1180})}),200),this.logTwoSidesClick("left",4)):this.logTwoSidesClick("left",_)},this.changeRightImg=()=>{const{showHDImgIndex:e}=this.state,_=e+1;this.changeSelectImg(_),_>4?(setTimeout((()=>{this.setState({swiperTransition:"none",showHDImgIndex:0,offsetLeft:-236})}),200),this.logTwoSidesClick("right",0)):this.logTwoSidesClick("right",_)},this.multiRef=fp.createRef(),this.state={firstRender:!0,imgIsError:!1,showHDImgIndex:0,indicatorIndex:0,offsetLeft:-236,showOperate:!1,swiperTransition:"all 0.2s ease-in-out"};const{ImgList:_=[]}=e;this.hotelImgRoundLoadList=_.map((e=>{const _=e.find((e=>32===e.position)),k=e.filter((e=>32!==e.position)).sort(((e,_)=>_.position-e.position));return _&&k.push(_),k.map((e=>{var _;return null!==(_=e.url)&&void 0!==_?_:""}))}))}handleImageLoaded(e){const{rank:_}=this.props,{firstRender:k}=this.state,I="10320668268"==H.default.getByKey("pageId");var C;0===_&&I&&k&&(this.setState({firstRender:!1}),this.$safeLog("metaHotelListCardRendered",null===ha.Z||void 0===ha.Z||null===(C=ha.Z.timing)||void 0===C?void 0:C.navigationStart,e))}logImageClick(e){const{masterhotelid_tracelogid:_,masterhotelid:k,rank:I}=this.props,C={locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),masterhotelid:k,masterhotelid_rank:null!=I?I:0,masterhotelid_tracelogid:_,pic_rank:e};(0,pa.NW)("htl_t_online_list_hotel_picture_click",C)}logImageHover(e){const{masterhotelid:_}=this.props,k={locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),masterhotelid:_,pictureNum:e};(0,pa.NW)(cp,k)}logTwoSidesClick(e,_){const{masterhotelid:k}=this.props,I={locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),masterhotelid:k,clickType:e,pictureNum:_};(0,pa.NW)(up,I)}renderOperate(){const{showOperate:e}=this.state;return fp.createElement(fp.Fragment,null,e?fp.createElement(fp.Fragment,null,fp.createElement("div",{className:"operate-btn operate-btn-left",onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.changeLeftImg()}},fp.createElement(B.Z,{type:"back",className:"operate-btn-icon icon-left"})),fp.createElement("div",{className:"operate-btn operate-btn-right",onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.changeRightImg()}},fp.createElement(B.Z,{type:"arrowRight",className:"operate-btn-icon icon-right"}))):null)}renderIndicator(){var e;return fp.createElement("div",{className:"indicator"},fp.createElement("div",{className:"indicator-area",onMouseLeave:()=>{this.setState({showOperate:!0})}},null===(e=this.hotelImgRoundLoadList)||void 0===e?void 0:e.map(((e,_)=>fp.createElement("span",{key:_,className:"indicator-item ".concat(_===this.state.indicatorIndex?"active":""),onMouseEnter:e=>{this.handleIndicatorHover(e,_)}})))))}renderBottomBanner(){const{hotelCertificationContent:e}=this.props;return fp.createElement("div",{className:"images-bottom-banner multi"},this.renderIndicator(),fp.createElement(fp.Fragment,null,e?fp.createElement(HotelBottomBanner,{text:e}):null))}renderInboundTag(){const{inboundTag:e}=this.props;return e?fp.createElement("div",{className:"inbound_tag"},fp.createElement("div",{className:"inbound_tag_content"},fp.createElement("img",{className:"tag-icon",src:"https://dimg04.tripcdn.com/images/1re1e12000f3ia5caBF98.png"}),fp.createElement("span",{className:"tag-text"},e))):null}render(){var e,_,k,I,C,R;const{offsetLeft:j,swiperTransition:B}=this.state,H=null===(e=this.hotelImgRoundLoadList)||void 0===e||null===(_=e[0])||void 0===_?void 0:_[1],U=null===(k=this.hotelImgRoundLoadList)||void 0===k||null===(I=k[4])||void 0===I?void 0:I[1];return fp.createElement("div",{className:"listcard-imgB",onMouseEnter:()=>{this.setState({showOperate:!0})},onMouseLeave:e=>{e.stopPropagation(),this.setState({showOperate:!1})}},5!==(null===(C=this.hotelImgRoundLoadList)||void 0===C?void 0:C.length)?fp.createElement("div",{className:"single-images"},fp.createElement(op.Z,{onClick:()=>{this.logImageClick(0)},alt:"hotel overview picture",ssr:!0,src:H,className:"single-images-item ".concat(this.state.imgIsError||!H?"bg-gray-trip-com":""),onError:()=>{this.handleImageLoaded(!1),this.setState({imgIsError:!0})},onSuccess:()=>this.handleImageLoaded(!0),errorSrc:pp,bgColor:"",noPictureMode:!1}),this.renderInboundTag(),this.props.hotelCertificationContent?fp.createElement("div",{className:"images-bottom-banner"},fp.createElement(HotelBottomBanner,{text:this.props.hotelCertificationContent})):null):fp.createElement(fp.Fragment,null,fp.createElement("div",{className:"multi-images",style:{transform:"translateX(".concat(j,"px)"),transition:B}},fp.createElement(op.Z,{errorSrc:pp,alt:"hotel overview picture",ssr:!0,src:U,className:"multi-images-item",width:"".concat(dp,"px"),onError:()=>{this.handleImageLoaded(!1),this.setState({imgIsError:!0})},onSuccess:()=>this.handleImageLoaded(!0)}),null===(R=this.hotelImgRoundLoadList)||void 0===R?void 0:R.map(((e,_)=>{const k=null==e?void 0:e[1];return fp.createElement(op.Z,{key:_,errorSrc:pp,alt:"hotel overview picture",ssr:!0,src:k,className:"multi-images-item",width:"".concat(dp,"px"),onError:()=>{this.handleImageLoaded(!1),this.setState({imgIsError:!0})},onSuccess:()=>this.handleImageLoaded(!0)})})),fp.createElement(op.Z,{errorSrc:pp,alt:"hotel overview picture",ssr:!0,src:H,className:"multi-images-item",width:"".concat(dp,"px"),onError:()=>{this.handleImageLoaded(!1),this.setState({imgIsError:!0})},onSuccess:()=>this.handleImageLoaded(!0)})),this.renderInboundTag(),this.renderOperate(),this.renderBottomBanner()))}}var mp=k(39621).default,gp=k(67294);class compressmeta_view_View extends mp{constructor(){super(...arguments),this.firstNoHotelImgLog=e=>{e||0!=~~this.props.index||this.handleImageErrored()},this._getLogoTagUrl=e=>{var _;const k=null==e?void 0:e.find((e=>30020===e.tagId));if(null==k||null===(_=k.labelExtensions)||void 0===_?void 0:_.length){let e=k.labelExtensions.find((e=>"tagIcon"===e.type));return null==e?void 0:e.value}return""},this._getHotelCertificationTagContent=e=>{const _=null==e?void 0:e.find((e=>301014===e.tagId));return null==_?void 0:_.value},this.getCannotReserveRecommend=()=>{var e,_,k;const{multiDateRecommend:I,card:C}=this.props;if((null==I?void 0:I.dateCountLimit)&&(null==I||null===(e=I.recommendDateList)||void 0===e?void 0:e.length))return{dateCountLimit:null==I?void 0:I.dateCountLimit,hotelId:null==C||null===(_=C.hotelBasicInfo)||void 0===_?void 0:_.hotelId,recommendDateList:null==I||null===(k=I.recommendDateList)||void 0===k?void 0:k.map((e=>({checkInDate:null==e?void 0:e.checkIn,checkOutDate:null==e?void 0:e.checkOut})))}},this.renderInboundHighlightTags=e=>(0,Pe.xb)(e)?null:gp.createElement("div",{className:"inbound-highlight"},gp.createElement("img",{className:"panda-icon",src:"https://dimg04.tripcdn.com/images/1re1e12000f3ia5caBF98.png"}),e.map(((_,k)=>gp.createElement(gp.Fragment,{key:k},gp.createElement("span",{className:"inbound-desc"},_),e.length-1!==k?gp.createElement("span",{className:"split-dot"}):null))))}getAvailableRoomList(e){const{type:_}=this.props,k=ke.y7.get("unAvailableRoomInfo");return"meta"===_&&k?null==e?void 0:e.filter((e=>{var _,I;return(null===(_=e.base)||void 0===_||null===(I=_.availParam)||void 0===I?void 0:I.roomkey)!==k})):e}getAdvantage(e){var _,k;const I=[];if(!e)return I;const C=null===(_=e.facility)||void 0===_?void 0:_.find((e=>{let{type:_}=e;return[Ji,Xi,Qi,ea].includes(_)}));C&&(C.mainType="meal",I.push(C));const R=null===(k=e.policy)||void 0===k?void 0:k.find((e=>{let{type:_}=e;return[na,ra].includes(_)}));return R&&(R.mainType="freeCancel",[na,aa].includes(R.type)&&(R.content=this.$translate("key.hotel.metalp.freecancel")),I.push(R)),I}render(){var e,_,k,I,R,U,V,G,z,J,Q,ee,te,ne,re;const{money:oe={},position:ie,fontColor:ae,card:le,toggleShowMap:se,preSale:ce,roomList:ue,discount:de,encourage:pe,decorator:he,type:fe,member:me,baseroominfo:ge,tags:ve,activityTagListA:ye=[],activityTagListB:be=[],extensions:_e={},rawData:we={},isNeedCalendarRecommend:Ee,isShowLoginAccount:Se="",isLogin:Oe=!1,activeLoginAccount:Te=(()=>{})}=this.props,{labels:ke=[],InboundHighLightInfo:Ie={}}=(null==we?void 0:we.card)||{};let Ce="";ke.forEach((e=>{const{extendList:_=[]}=e;_.forEach((e=>{"ISOLATION_HOTEL_DESC"===(null==e?void 0:e.type)&&(Ce=(null==e?void 0:e.value)||"")}))}));const Le="meta"==fe,{quarantineTip:Ne=""}=_e,De=!!Ne||!!Ce,Ae=H.default.getByKey("qconfigData.listPageHotelTags",this.ctx)||1;let Re="//images3.c-ctrip.com/hotel_online_images/bff/nophoto.png",xe=this._getLogoTagUrl(ve)||"";const je=this._getHotelCertificationTagContent(ve);ce&&2===(null==ue?void 0:ue.length)&&ue.splice(1);const Be=this.getAvailableRoomList(ue),Me=!!(0,ci.Z)(le.hotelBasicInfo,"isFullRoom",""),Fe=(0,ci.Z)(null==le||null===(e=le.hotelBasicInfo)||void 0===e?void 0:e.hotelCloseInfo,"type",0),He=(0,ci.Z)(null==le||null===(_=le.hotelBasicInfo)||void 0===_?void 0:_.hotelCloseInfo,"typeTitle",""),Ke=(0,ci.Z)(null==le||null===(k=le.hotelBasicInfo)||void 0===k?void 0:k.canNotBeOrderedInfo,"messageBold",""),Ue=[2,3].some((e=>e==Fe)),Ze=!Le&&(Me||Ue),Ve=Le&&(!!(0,ci.Z)(oe,"soldOut","")||!(null==Be?void 0:Be.length)),We=Ze||Ve||Ke.length>0,{hotelBasicInfo:Ge}=le,{hotelMultiImgs:$e=[]}=Ge;let qe=(null==Ge?void 0:Ge.signInNote)?(0,li.xA)(Ge.signInNote,H.default.getByKey("isLogged",this.ctx),"veil-line"):"",ze=(null==Ge?void 0:Ge.hotelId)||0,Ye=null==Ge?void 0:Ge.hotelImg;const Je="meta"===fe&&!Ve&&Be.length&&!!(0,ci.Z)(Be[0].money,"isPriceSoldOut",""),Xe="meta"===fe&&!Ve&&Be.length&&!!(0,ci.Z)(Be[0].money,"priceDropTag",""),Qe="Single"===(null==Ge||null===(I=Ge.decorator)||void 0===I?void 0:I.type)||Le,et="meta"===this.props.type?null===(R=this.props)||void 0===R||null===(U=R.rawData)||void 0===U||null===(V=U.priceLogParam)||void 0===V?void 0:V.rateplantracelogid:(null===(G=this.props)||void 0===G||null===(z=G.trace)||void 0===z?void 0:z.traceLogId)||"",tt=((null==Ge?void 0:Ge.hotelImgRoundLoad)||[]).sort(((e,_)=>e.group-_.group)).map((e=>e.url)),nt=JSON.stringify({ubtKey:"more"===fe?"htl_t_online_list_recomhotellist_exposure":"htl_t_online_list_hotellist_exposure",data:{}}),rt=null==Ge||null===(J=Ge.additionTexts)||void 0===J?void 0:J.find((e=>"FreeAddBabyBed"===e.additionName||"SuitableForFamily"===e.additionName)),{freeAddBabyBedTag:ot="",topAwardInfo:it={}}=Ge,{hotelRank:at,lableId:lt,rankId:st,listSubTitle:ct="",rankType:ut}=it,dt=4===ut?"https://dimg04.tripcdn.com/images/1re5512000ec1vbgh6CE9.png":"https://dimg04.tripcdn.com/images/1re3i12000ec1uteo4BA1.png",pt=JSON.stringify({ubtKey:"htl_t_online_list_htllist_awardlist_exposure",data:{hotelrank:at,labelid:lt,rankingid:st,masterhotelid:ze,locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId")}}),ht=this.getCannotReserveRecommend(),ft=(0,q.JT)(this),mt=ft?"imgSizeVersionB":"imgSizeVersionA",gt=Le?null==Ie?void 0:Ie.inboundHighLightImageTag:null==Ge||null===(Q=Ge.inbound)||void 0===Q?void 0:Q.title,vt=1===(null==Be?void 0:Be.length)?"list-fs-meta-single":"",yt="meta"==fe?null==we||null===(ee=we.card)||void 0===ee||null===(te=ee.InboundHighLightInfo)||void 0===te?void 0:te.inboundHighLightTags:(null==ve||null===(ne=ve.filter((e=>392===(null==e?void 0:e.tagPosition))))||void 0===ne?void 0:ne.map((e=>null==e?void 0:e.tagTitle)))||[];return gp.createElement("div",{className:"compressmeta-hotel-wrap-v8",ref:this.metaCardRef,onClick:this.toBook,id:ze,key:ze,"data-exposure":nt,"data-send":"devTrace"},gp.createElement("div",{className:"hotel-info"},gp.createElement("div",{className:j()("lf",mt),ref:this.cardImgRef},ft?gp.createElement(HotelCardImg,{key:ze,ImgList:$e,hotelCertificationContent:je,inboundTag:gt,activityTagListA:ye,masterhotelid_tracelogid:et,masterhotelid:ze||0,rank:this.props.index}):gp.createElement(gp.Fragment,null,(null==tt?void 0:tt.length)>0?gp.createElement(ap.Z,{key:ze,alt:"hotel overview picture",ssr:!0,errorSrc:Re,srcList:tt,onError:this.handleImageErrored.bind(this),onSuccess:this.handleImageLoaded.bind(this)}):gp.createElement(op.Z,{alt:"hotel overview picture",ssr:!0,errorSrc:Re,src:(0,ip.m2)(Ye,"_R_640_440_R5_D"),onError:this.handleImageErrored.bind(this),onSuccess:this.handleImageLoaded.bind(this)}),gt&&gp.createElement("div",{className:"lf_inbound_tag"},gp.createElement("div",{className:"lf_inbound_tag_content"},gp.createElement("img",{className:"tag-icon",src:"https://dimg04.tripcdn.com/images/1re1e12000f3ia5caBF98.png"}),gp.createElement("span",{className:"tag-text"},gt))),xe&&!gt&&gp.createElement(op.Z,{alt:"logo",className:"lf_logo",src:xe,ssr:!0,width:"auto",height:"43px"}),je?gp.createElement("div",{className:"hotel-certification-container"},gp.createElement(HotelBottomBanner,{text:je})):null,ye.length>0&&gp.createElement("div",{className:"lf_tag"},gp.createElement(B.Z,{type:"ic_new_bu_hotel",className:"lf-tag-icon"}),null===(re=ye[0])||void 0===re?void 0:re.name))),gp.createElement("div",{className:j()("rt",mt,vt)},gp.createElement("div",{className:j()("rt-head",{"rt-head-meta":Le})},gp.createElement("div",{className:"rt-head-title"},gp.createElement(Ql,this.props),gp.createElement("div",{className:"rt-head-title-label"},gp.createElement(ss,(0,C.Z)({},this.props,{that:this,inboundHighlightTags:yt})),this.renderInboundHighlightTags(yt)),gp.createElement(Transport,{position:ie,transport:(0,ci.Z)(this.props,"transport",{}),card:le,toggleShowMap:se}),""!==ct&&gp.createElement("div",{className:"topAwardInfo","data-exposure":pt},gp.createElement("img",{className:"topAwardInfo_logo",src:dt}),gp.createElement("span",{className:"topAwardInfo_text"},ct)),!(0,Pe.xb)(ot)&&Le&&gp.createElement("div",{className:"free-babybed"},gp.createElement(B.Z,{type:"filled10"}),ot),rt&&gp.createElement("div",{className:"free-babybed"},gp.createElement(B.Z,{type:"filled10"}),rt.additionText),be.length>0&&gp.createElement("div",{className:"rt-tags"},gp.createElement(B.Z,{type:"ic_new_bu_hotel",className:"rt-tags-icon"}),be.slice(0,Ae).map((e=>gp.createElement("span",{className:"rt-tags-item"},null==e?void 0:e.name)))),De&&gp.createElement("div",{className:"rt-quarantineHotelTips"},gp.createElement(B.Z,{type:"ic_new_warning_line"}),gp.createElement("span",{className:"rt-quarantineHotelTips-text"},Ne||Ce))),gp.createElement("div",{className:(0,lp.ok)("rt-head-reviewandstatus",{"rt-head-reviewandstatus-meta":Le})},(0,q.qx)(this)&&Qe||!We||De?null:gp.createElement("div",{className:"sold-wrap-meta"},gp.createElement(CanNotBeOrderBtn,{text:Ue&&He?He:Ke||this.$translate("hotel_list_buttontext_soldout")})))),Je&&!De&&gp.createElement("div",{className:"rt-priceSoldOutLabel"},gp.createElement("div",{className:"rt-priceSoldOutText"},gp.createElement(B.Z,{type:"information",style:{fontSize:"14px"}}),gp.createElement("div",{style:{marginLeft:"6px"}},this.$translate("key.hotel.meta.landingpage.ratechange")))),De&&gp.createElement("div",{className:"quarantineTip-wrap"},gp.createElement("div",{className:"quarantineTipButton",onClick:this.chooseDate},gp.createElement("span",null,this.$translate("key.hotel.online.listpage.quarantine.tip")),gp.createElement(B.Z,{type:"arrowRight"}))),Xe&&!De&&gp.createElement("div",{className:"rt-priceDropLabel"},gp.createElement("div",{className:"rt-priceDropText"},gp.createElement(B.Z,{type:"dropdown",style:{fontSize:"16px"}}),gp.createElement("div",{style:{marginLeft:"6px"}},this.$translate("key.hotel.meta.landingpage.ratedrop")))),Le?null==Be?void 0:Be.map(((e,_)=>{var k;let I="";if(null===(k=e.base)||void 0===k?void 0:k.signInNote){var R,j,B;let _=localSignInNote(this)?this.$translate("key.hotel.detail.member.price.log.in"):e.base.signInNote;(null===(R=e.base)||void 0===R?void 0:R.maskInfo)&&(null===(j=e.base)||void 0===j||null===(B=j.maskInfo)||void 0===B?void 0:B.signInNote)&&(_=e.base.maskInfo.signInNote),I=(0,li.xA)(_,H.default.getByKey("isLogged"),"veil-line")}let U="";const{money:V={}}=e,{taxPayAtHotel:G=""}=V;return U=G,De?null:gp.createElement(Ad,(0,C.Z)({key:_},this.props,e,{advantage:this.getAdvantage(e),hotelSoldOut:Ze,fontColor:ae,discountNote:I,discount:de,encourage:pe,decorator:he,taxPayAtHotel_Controller:U,type:fe,member:me,roomInfo:e,baseroominfo:ge,computeRoomPerson:null==le?void 0:le.computeRoomPerson,roomQuantity:(null==e?void 0:e.roomQuantity)||0}))})):De?null:gp.createElement(gp.Fragment,null,gp.createElement(Ad,(0,C.Z)({},this.props,{hotelSoldOut:Ze,fontColor:ae,discountNote:qe,discount:de,encourage:pe,decorator:he,type:fe,member:me,baseroominfo:ge,computeRoomPerson:null==le?void 0:le.computeRoomPerson,roomQuantity:(null==le?void 0:le.combinedRoomQuality)||0})),(Se||Oe)&&Te(!0)),!(0,q.qx)(this)&&Ve&&Le&&!De?gp.createElement(Ud,{isHotelSoldOut:Ve,isMeta:!0,isCompress:!0,masterhotelid:ze||0,updateMetaHotelTitle:updateMetaHotelTitle,updateSoldOutData:actionCreator_updateSoldOutData}):null,"T"===Ee&&(0,q.qx)(this)&&Ve&&Le&&!De?gp.createElement(Qd,{isHotelSoldOut:Ve,cannotReserveRecommend:ht,pageName:"metapage",masterhotelid_tracelogid:et,masterhotelid:ze||0,updateMetaHotelTitle:updateMetaHotelTitle,updateSoldOutData:actionCreator_updateSoldOutData}):null,(0,q.qx)(this)&&Ze&&Qe&&!De?gp.createElement(Qd,{fromHotelListPriceRecommendInfos:null==le?void 0:le.priceRecommendInfos,isHotelSoldOut:!0,pageName:"listpage",masterhotelid_tracelogid:et,masterhotelid:ze||0,updateSoldOutData:actionCreator_updateSoldOutData}):null)),ce&&gp.createElement(PreSale,{preSale:ce}))}}var vp=k(39621).default,yp=k(67294);class coloricon_ColorIcon extends vp{constructor(e){super(e)}render(){let{type:e,className:_,style:k}=this.props;const I={ic_pointplus:["path1","path2"],ic_new_trip_coins:["path1","path2","path3"],ic_price_assurance:["path1","path2","path3","path4"]}[e]||[];return I.length?yp.createElement("i",{className:"smartcoloricon ".concat(_," ").concat("color-icon-"+e),style:k},I.map(((e,_)=>yp.createElement("i",{key:_,className:e})))):null}}var bp=k(39621).default,_p=k(67294);class WithIcon extends bp{render(){let{type:e,name:_="",iconSize:k=18,color:I,fontSize:C=14,green:R,greenBox:B,orange:H,underline:U,red:V,iconRed:G,style:q,iconStyle:z,onMouseOver:J,onMouseOut:Q,hover:ee,question:te,spanClass:ne,fontStyle:re,className:oe,isColorIcon:ie,onClick:ae}=this.props;z=Object.assign({},{fontSize:"".concat(k,"px"),alignSelf:"flex-start"},z),re=Object.assign({},{fontSize:"".concat(C,"px")},re);const le=j()({"desc-text":!0,green:R,greenBox:B,red:V,orange:H,underline:U,"underline-green":R&&U,"underline-red":V&&U,"underline-orange":H&&U,hover:ee,spanClass:ne});return-1!=_.indexOf("{0}")&&(_=_.replace("{0}",'<span style="font-weight: 700;">'),_=_.replace("{/0}","</span>")),_="<span>"+_+"</span>",_p.createElement("div",{className:j()("des-with-icon",{green:R,greenBox:B,red:V,iconRed:G,orange:H}),style:Object.assign({},{color:I},q)},_p.createElement("div",{style:{display:"flex",alignItems:"center"}},ie?e&&_p.createElement(coloricon_ColorIcon,{type:e,style:z,className:oe}):e&&_p.createElement(Ee.Z,{className:"normal-icon ".concat(oe),type:e,style:z}),te?_p.createElement("div",{className:"underline_question",onClick:ae,onMouseOver:J,onMouseOut:Q},_p.createElement("span",{style:re,className:le},_p.createElement("span",{dangerouslySetInnerHTML:{__html:_}})),_p.createElement(Ee.Z,{type:"ic_new_question"})):_p.createElement("div",{style:re,className:le,onClick:ae,onMouseOver:J,onMouseOut:Q},_p.createElement("span",{dangerouslySetInnerHTML:{__html:_}}))))}}var wp=k(39621).default,Ep=k(67294);class CountDown extends wp{constructor(e){super(e),this.compute=()=>{const{time:e}=this.state;let _=Math.floor(e/3600),k=Math.floor((e-3600*_)/60),I=e-3600*_-60*k;this.setState({hour:_,minute:k,second:I})},this.formate=e=>e<10?"0".concat(e):e,this.count=()=>{let{time:e}=this.state;this.timerId=setInterval((()=>{e>0?this.setState({time:--e},this.compute):clearInterval(this.timerId)}),1e3)},this.state={time:this.props.time||0,hour:0,minute:0,second:0}}componentDidMount(){this.count()}render(){const{hour:e,minute:_,second:k}=this.state;return Ep.createElement("div",{className:"count-down-wrap"},Ep.createElement("span",{className:"cell"},this.formate(e)),Ep.createElement("span",{className:"colon"},":"),Ep.createElement("span",{className:"cell"},this.formate(_)),Ep.createElement("span",{className:"colon"},":"),Ep.createElement("span",{className:"cell"},this.formate(k)))}}var Sp=k(39621).default,Op=k(67294);var Tp,kp=k(67294);function compressmeta_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function compressmeta_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?compressmeta_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):compressmeta_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const Ip=(e=>class WithDecorator extends Sp{constructor(e){var _;super(e),_=this,this.guideBar=()=>{const{decorator:{title:e="",type:_,countDown:k}}=this.props.hotelBasicInfo||{};let I="";if("MetaPriceDropped"===_)I="dropdown";else if("Meta"===_)I="good";else{if("LimitTime"!==_)return;I="ic_new_countdown_line"}return Op.createElement("div",{className:"".concat(_,"-decoratorab")},Op.createElement(WithIcon,{type:I,name:e,color:"#fff",iconSize:"20",fontSize:"14",style:{display:"flex",alignItems:"center",fontWeight:"bold"}}),"LimitTime"===_&&Op.createElement(CountDown,{time:k}))},this.login=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{card:{hotelBasicInfo:{hotelId:k=0,decorator:{signInNote:I="",type:C="SignInTop"}={},hidePrice:R=!1}}={}}=_.props;e&&(C="LoginDealV8"),C=C="LoginDealV8",!I&&localSignInNote(_)&&(I=_.$translate("key.hotel.detail.member.price.log.in"));const j=(0,li.xA)(I,H.default.getByKey("isLogged",_.ctx)),B=e?"special ".concat((0,q.H5)(_)||(0,q.Lf)(_)?"listcard-b-wrapper":""):"";let U={type:C,masterHotelId:k,discountNote:j,className:B,isHidePrice:R?1:0,listCardMaskPriceB:(0,q.er)(_),hidePrice:R};return Op.createElement(AccountLog,{data:U,pageName:"listpage"})},this.lowestPriceBanner=()=>{const e=(0,ci.Z)(this.props,"base.recommendLowestPrice","");return Op.createElement("div",{className:"lowestPrice-decorate"},Op.createElement("i",{className:"icon"}),Op.createElement("span",{className:"text"},e))}}render(){let _=(0,ci.Z)(this.props.hotelBasicInfo,"decorator.type",""),k=(0,ci.Z)(this.props.hotelBasicInfo,"decorator.signInNote","");const I=(0,ci.Z)(this.props,"base.recommendLowestPrice",""),R=(0,ci.Z)(this.props,"base.maskInfo.lowerPriceNote","");let B="LoginDeal"===_||"SignInTop"===_||!(0,Pe.xb)(R),{price:H,soldOut:U,priceMask:V}=(this.props||{}).money||{},G="Single"===_;const q=G&&H&&V&&!U||G&&k;return Op.createElement("div",{className:j()("with-decorator-wrap-v8",{"with-decorator-wrap_lowestPrice":I})},Op.createElement("div",{className:"border ".concat(_,"-border")},Op.createElement(e,(0,C.Z)({},this.props,{isShowLoginAccount:q,activeLoginAccount:this.login,isLogin:B}))))}})(Tp=(0,Vl.ZP)(Tp=class CompressMeta extends compressmeta_view_View{constructor(e){super(e),this.updateRoomList=()=>{this.setState({needUpdate:!this.state.needUpdate})},this.hotelCardExporsure=()=>{var e,_,k,I,C,R,j,B,U,V,G,q,z,J,Q,ee,te,ne,re,oe,ie,ae,le,se,ce,ue,de,pe,he,fe,me,ge,ve,ye,be,_e,we;const Ee=(0,Ti.RL)()||"",{advantageTags:Se=[],discountPercentTags:Oe=[],encourageTags:Te=[],promotionTags:Ie=[]}=(null===(e=this.props)||void 0===e?void 0:e.roomTags)||{};Ee||(0,Ti.gS)(Ee);const Ce=(0,Ne.Z)("sourcefromseo_tracelogid")||"",Pe="meta"===this.props.type?(null===(_=this.props.base)||void 0===_||null===(k=_.guestCount)||void 0===k?void 0:k.children)>0:(null===(I=this.props.hotelBasicInfo)||void 0===I||null===(C=I.guestInfoEntity)||void 0===C?void 0:C.childCount)>0||!1;let Le=0;("meta"===this.props.type?null===(R=this.props.roomInfo)||void 0===R||null===(j=R.childrenTag)||void 0===j?void 0:j.tag:(null===(B=this.props.hotelBasicInfo)||void 0===B||null===(U=B.additionTexts)||void 0===U||null===(V=U.find((e=>"ChildrenStayFree"===(null==e?void 0:e.additionName))))||void 0===V?void 0:V.additionText)||!1)?Le=2:Pe&&(Le=1);const De=(null===(G=this.props)||void 0===G||null===(q=G.hotelBasicInfo)||void 0===q?void 0:q.hotelId)||null;this.$safeLog("logHotelCardExposure",{is_meta_first:"meta"===(null===(z=this.props)||void 0===z?void 0:z.type)?"T":"F",masterhotelid:De,masterhotelid_token:(null===(J=this.props)||void 0===J||null===(Q=J.hotelBasicInfo)||void 0===Q?void 0:Q.hotelId)||null,locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),rank_in_qid:(null===(ee=this.props)||void 0===ee?void 0:ee.index)||0,masterhotelid_tracelogid:"meta"===this.props.type?null===(te=this.props)||void 0===te||null===(ne=te.rawData)||void 0===ne||null===(re=ne.priceLogParam)||void 0===re?void 0:re.rateplantracelogid:(null===(oe=this.props)||void 0===oe||null===(ie=oe.trace)||void 0===ie?void 0:ie.traceLogId)||"",htllist_query_id:(0,Ti.RL)()||"",sourcefrom_query_id:"meta"===(null===(ae=this.props)||void 0===ae?void 0:ae.type)?(0,Ti.$w)():null,sourcefrom_tracelogid:"meta"===(null===(le=this.props)||void 0===le?void 0:le.type)?Ce:null,mt_reffername:(0,li.XL)(),htl_taglist:[...(null===(se=this.props.tags)||void 0===se?void 0:se.map((e=>({tagfeatureid:null==e?void 0:e.tagId,tagtitle:null==e?void 0:e.tagTitle,tagname:null==e?void 0:e.name,tagvalue:null==e?void 0:e.value}))))||[],...Se,...Oe,...Te,...Ie],offertype:(null===(ce=this.props.ubtLogData)||void 0===ce?void 0:ce.children)>0?Le:"",issearchhotel:"normal"===(null===(ue=this.props)||void 0===ue?void 0:ue.type)?"T":"F",htlshowtime:+new Date,roomnum:null===(de=this.props)||void 0===de||null===(pe=de.roomList)||void 0===pe?void 0:pe.length,context:(null===(he=this.props.rawData)||void 0===he||null===(fe=he.card)||void 0===fe||null===(me=fe.money)||void 0===me?void 0:me.soldOut)?"soldout":(null===(ge=this.props.card)||void 0===ge||null===(ve=ge.money)||void 0===ve?void 0:ve.priceDropTag)?"pricedown":"",room_token:(null===(ye=this.props.rawData)||void 0===ye||null===(be=ye.roomList)||void 0===be||null===(_e=be[0])||void 0===_e?void 0:_e.roomToken)||"",dispatchid:null===(we=this.props.extensions)||void 0===we?void 0:we.dispatchId,isrefresh:(window.CHANGED_PRICE_HOTELS_DATA||{})[De]?"T":"F"}),ke.y7.set("list_exposure_query_id",(0,Ti.RL)()||"")},this.toBook=()=>{const{money:e,type:_}=this.props;if(!e||!e.soldOut){let e="button";"meta"===_&&(e="book",this.$safeLog("logMetapageSelectRoomClick",this.prop)),this.props.toDetail(_,e)}},this.chooseDate=e=>{e.stopPropagation(),this.$instance("Calendar").action("onClick","checkIn")},this.onBookRef=e=>{this.bookRef=e},this.ubtMapping={load:metaLoad,logHotelShow:logHotelShow,logListTagShow:logListTagShow,noImageLog:noImageLog,listSoldOut:listSoldOut,picloadMonitorList:picloadMonitorList,logMetapageSelectRoomClick:logMetapageSelectRoomClick,logHotelCardExposure:logHotelCardExposure,logHotelCardClick:logHotelCardClick,onlineListHotelPictureExposure:onlineListHotelPictureExposure},this.state={needUpdate:!1},this.metaCardRef=kp.createRef(),this.cardImgRef=kp.createRef()}componentWillUnmount(){this.$event.removeListener(Yu,this.updateRoomList)}componentDidMount(){var e,_,k,I,C,R;this.$event.on(Yu,this.updateRoomList);let j="";if(this.props.card.money&&this.props.card.money.soldOut&&this.$safeLog("listSoldOut",this.props.card.base.hotelId),(null===(e=this.props)||void 0===e||null===(_=e.picture)||void 0===_?void 0:_.list)||this.$safeLog("noImageLog",this.props,"1",""),ha.Z&&(ha.Z.mark("metaRoomLoad"),ha.Z.timing.domLoading)){var B,U,V,G,J,Q,ee,te,ne,re,oe,ie,ae,le,se,ce,ue,de;ha.Z.clearMeasures("domready_recommendroomloaded"),ha.Z.measure("domready_recommendroomloaded","domLoading","metaRoomLoad");var pe=ha.Z.getEntriesByName("domready_recommendroomloaded");j=Math.round(pe.length&&pe[0].duration||-1);const e=(null===(B=this.metaCardRef)||void 0===B?void 0:B.current)&&ifExposure(this.metaCardRef.current,1);e&&this.$safeLog("logHotelShow",[{masterhotelid:(null===(U=this.props)||void 0===U||null===(V=U.base)||void 0===V?void 0:V.hotelId)||null,qid:(0,Ti.RL)()||null,tracelogid:null===(G=this.props)||void 0===G?void 0:G.controllerUbtTraceLogId}]),(null===(J=this.metaCardRef)||void 0===J?void 0:J.current)&&exposure({target:this.metaCardRef.current,judgeType:3,exposureOnce:!0,callBack:this.hotelCardExporsure})();const _=compressmeta_objectSpread(compressmeta_objectSpread({},this.props.ubtLogData),{},{rank_in_qid:this.props.index+1||0,canclepriceinfo:this.props.hotelBasicInfo.originPrice||0,showpriceinfo:this.props.hotelBasicInfo.price||0,showwithtaxpriceinfo:this.props.hotelBasicInfo.afterTaxPrice||null,htldist:this.props.positionInfo.positionDesc||"",regiontype:this.props.positionInfo.coordinate.coordinateType||"",regionid:this.props.positionInfo.coordinate.cityId||0,locale:H.default.getByKey("cargo.locale")||"",listqueryid:(0,Ti.RL)()||"",comment_keywordtype:3,htlist_recomm_type:(0,Pe.xb)(null===(Q=this.props)||void 0===Q||null===(ee=Q.hotelBasicInfo)||void 0===ee?void 0:ee.decorator)?"NORMAL"==this.props.queryType?"mainlist":"reclist_searchcompensate":"reclist_onlyone",taginfo:{masterhotelid:(null===(te=this.props.hotelBasicInfo)||void 0===te?void 0:te.hotelId)||0,cityid:(null===(ne=this.props.positionInfo)||void 0===ne?void 0:ne.cityId)||0,htl_taglist:{tagfeatureid:null===(re=this.props)||void 0===re||null===(oe=re.hotelDecorateInfo)||void 0===oe?void 0:oe.tagId,tagid:null===(ie=this.props)||void 0===ie||null===(ae=ie.hotelDecorateInfo)||void 0===ae?void 0:ae.subTagId,tagposition:null===(le=this.props)||void 0===le||null===(se=le.hotelDecorateInfo)||void 0===se?void 0:se.tagPosition,tagtitle:null===(ce=this.props)||void 0===ce||null===(ue=ce.hotelDecorateInfo)||void 0===ue?void 0:ue.tagName}}});e&&this.$safeLog("logListTagShow",_),(null===(de=this.metaCardRef)||void 0===de?void 0:de.current)&&exposure({target:this.metaCardRef.current,judgeType:3,exposureOnce:!0,callBack:()=>{var e,_,k;this.props.pushExposureHotel({masterhotelid:(null===(e=this.props)||void 0===e||null===(_=e.base)||void 0===_?void 0:_.hotelId)||null,qid:(0,Ti.RL)()||null,tracelogid:null===(k=this.props)||void 0===k?void 0:k.controllerUbtTraceLogId})}})}this.$safeLog("load",j,this.props);const he=null===(k=this.cardImgRef)||void 0===k||null===(I=k.current)||void 0===I?void 0:I.clientHeight,fe=(0,q.JT)(this)?236:200,me=(0,q.JT)(this)?he:he-32,ge={locale:null===H.default||void 0===H.default||null===(C=H.default.getByKey("cargo"))||void 0===C?void 0:C.locale,page:(null===H.default||void 0===H.default?void 0:H.default.getByKey("pageId"))||"",picture_property:{width:fe,height:me},masterHotelId:null===(R=this.props.hotelBasicInfo)||void 0===R?void 0:R.hotelId};this.$safeLog("onlineListHotelPictureExposure",ge),(0,z.observe)()}handleImageErrored(){var e,_;this.$safeLog("noImageLog",this.props,"2",null===(e=this.props.picture)||void 0===e||null===(_=e.list)||void 0===_?void 0:_[0]);const{index:k}=this.props;0==~~k&&this.props.firstListCardLog(!1,k)}handleImageLoaded(){const{index:e}=this.props;0==~~e&&this.props.firstListCardLog(!0,e),"function"==typeof this.props.imgLoaded&&this.props.imgLoaded()}})||Tp)||Tp;var Cp=k(76457);const dispatcher_clearKeyword=()=>e=>{e(updateSearchInputKeyword("")),e(updateKeyword({})),e((0,Cp.jH)({lat:0,lng:0}))};var Pp=k(78031);const actionCreator_toggleNormalLastPage=e=>({type:Pp.fu,payload:e}),actionCreator_toggleRecommendLastPage=e=>({type:Pp._2,payload:e}),tools_resetOptionInfo_reset=()=>{let e=window.location.href,_="0"!==(0,Ne.Z)("domestic")?fi.VS.City:fi.VS.IntlCity,k=(0,Ne.Z)("city")||(0,Ne.Z)("cityId");e=(0,ii.qz)({optionId:k},e),e=(0,ii.qz)({optionName:""},e),e=(0,ii.qz)({optionType:_},e),window.history.replaceState(null,"",e)};var Lp,Np=k(39621).default,Dp=k(67294);(0,Ni.$j)((e=>({searchBarData:e.searchBarData})))(Lp=class FilterItem extends Np{constructor(e){super(e),this.close=()=>{var e,_,k,I,C;const R=Ce.Z&&H.default.getByKey("pageName"),{data:j,dispatch:B,store:U}=this.props,V="1"===(0,Ne.Z)("directSearch");if(R||(B(actionCreator_toggleRecommendLastPage(!1)),B(actionCreator_toggleNormalLastPage(!1))),B(actionCreator_removeFilter({filter:j,type:j.key})),V)j.isHitDirectSearch&&(B(dispatcher_clearKeyword()),B((0,Cp.CZ)(0)));else{if(String((0,ci.Z)(j,"value",""))===(0,Ne.Z)("optionId")){B(dispatcher_clearKeyword());(new OptionType).isProvinceDistrict()||(G?(0,Ne.Z)("optionId")==="".concat(G.value)&&tools_resetOptionInfo_reset():tools_resetOptionInfo_reset())}}var G;"bookable"===j.key&&1===j.value&&B(updateBookableVisible(!0)),"1"===j.key&&"1189"==j.value&&ke.y7.remove("feature"),"star"===j.key&&B(function updateStarRate(e){return{type:Ei.aC,key:Si.Js,data:e}}([])),"priceRange"===j.key&&(B(updateLowPrice(0)),B(updateHighPrice(-1))),(null===(e=this.props)||void 0===e||null===(_=e.searchBarData)||void 0===_||null===(k=_.search)||void 0===k||null===(I=k.item)||void 0===I||null===(C=I.data)||void 0===C?void 0:C.filterId)===(null==j?void 0:j.filterId)&&B({type:"SEARCHBARDATA_CLEAR_KEYWORD"})}}render(){const{name:e}=this.props;return Dp.createElement("div",{className:"choosen-item"},Dp.createElement("span",{className:"name font-bold"},e),Dp.createElement(B.Z,{type:"ic_new_close_line",className:"close",onClick:this.close}))}});var Ap=k(39621).default,Rp=k(67294);class emptyCard_view_View extends Ap{render(){const{isSwitchNewFilter:e,renderFilters:_,selectedFilterList:k}=this.props,I=(e?k:(e=>{let _=(0,li.hZ)(e),k=[],I=null;const C=["50","18","10","9","41","8","139"];_.forEach((e=>{"80"!=e.type&&"17"!=e.type&&(k.push(e),C.includes(e.type)&&(I=Object.assign({},e)))}));let R="",j={};if(I)switch(I.key){case"8":R="Zone",j.zoneCode=I.value;break;case"50":case"landmark":R="Markland",j.landMarkCode=I.value;break;case"18":R="Location";break;case"10":R="Airport"}return H.default.setByKey("locationFilter",R?Object.assign(j,{poiCode:I.value,poiName:encodeURIComponent(I.text),optionId:I.value,optionType:R,latitude:I.lat,longitude:I.lng}):{}),k})(_)).length>0,C=JSON.stringify({ubtKey:"htl_t_online_list_no_resulthotellist_exposure",data:{}});return I?Rp.createElement("div",{className:"empty-wrap_filter",ref:this.emptyWithFilterRef,"data-exposure":C,"data-send":"devTrace"},Rp.createElement("div",{className:"img-div"}),Rp.createElement("div",{className:"content"},Rp.createElement("div",{className:"nores-title"},this.$translate("key.hotel.list.page.search.hotels.no.result")),Rp.createElement("p",{className:"sub"},this.$translate("key.hotel.list.page.search.hotels.no.result.try")),Rp.createElement("button",{className:"clear",onClick:this.clearAll},this.$translate("key.hotel.list.page.search.hotels.no.result.clear.all")))):Rp.createElement("div",{className:"empty-wrap_search","data-exposure":C,"data-send":"devTrace"},this.$translate("key.hotel.list.page.search.hotels.no.result.hotel"))}}var xp,jp=k(67294);let Bp=(0,Di.zy)((e=>{let{clearAllFilters:_,selectedFilterList:k}=e;return{clearAllFilters:_,selectedFilterList:k}}))(xp=(0,Ni.$j)((e=>{var _;return{isSwitchNewFilter:null===(_=e.initData)||void 0===_?void 0:_.isSwitchNewFilter,filterCondition:e.filterCondition,renderFilters:e.renderFilters}}))(xp=class Empty extends emptyCard_view_View{constructor(e){super(e),this.ubtMapping={clearFiltersLoad:clearFiltersLoad,clearFiltersClick:clearFiltersClick},this.clearAll=()=>{const{isSwitchNewFilter:e,clearAllFilters:_,dispatch:k}=this.props;e?_():k(actionCreator_removeALLFilters()),this.$safeLog("clearFiltersClick")},this.state={},this.emptyWithFilterRef=jp.createRef()}componentDidMount(){var e;(null===(e=this.emptyWithFilterRef)||void 0===e?void 0:e.current)&&exposure({target:this.emptyWithFilterRef.current,callBack:()=>{this.$safeLog("clearFiltersLoad")}})}})||xp)||xp;var Mp=k(67294);class v8listHolder_view_View extends se.default{render(){const{small:e,isVersionB:_}=this.state,k=e?[276,216,140]:[359,270,172],I=e?"small":"big",C="margin24";return Mp.createElement("div",{className:"list-holder"},Mp.createElement("div",{className:"avatar avatar-".concat(I," ").concat(_?"avatar-versionB":"")},Mp.createElement(Placeholder,{type:"rect",space:0,color:"#f5f7fa",borderRadius:4})),Mp.createElement("div",{className:"line"},Mp.createElement("div",{className:"left"},k.map(((e,_)=>Mp.createElement("div",{key:_,className:C,style:{width:e,height:24}},Mp.createElement(Placeholder,{type:"list",space:0,color:"#f5f7fa",borderRadius:4}))))),Mp.createElement("div",{className:"right"},Mp.createElement("div",{className:C,style:{width:e?80:107,height:24}},Mp.createElement(Placeholder,{type:"list",space:0,color:"#f5f7fa",borderRadius:4})),Mp.createElement("div",{className:"rt-bottom"},Mp.createElement("div",{className:C,style:{width:e?80:107,height:24}},Mp.createElement(Placeholder,{type:"list",space:0,color:"#f5f7fa",borderRadius:4})),Mp.createElement("div",{style:{width:e?140:172,height:24}},Mp.createElement(Placeholder,{type:"list",space:0,color:"#f5f7fa",borderRadius:4}))))))}}class ListHolder extends v8listHolder_view_View{constructor(e){super(e),this.resize=(0,Ie.P2)((()=>{let e=document.documentElement.clientWidth;const{small:_}=this.state;e<1280?!_&&this.setState({small:!0}):_&&this.setState({small:!1})}),10);const _=(0,q.JT)(this);this.state={small:!1,isVersionB:_}}componentDidMount(){this.resize(),window.addEventListener("resize",this.resize)}componentWillUnmout(){window.removeEventListener("resize",this.resize)}}var Fp=k(39621).default,Hp=k(67294);class crumb_view_View extends Fp{render(){const{crumbs:e}=this.props;return Hp.createElement("div",{className:"list-crumb"},e.map(((e,_)=>{const{text:k,link:I}=e;return 0===_?Hp.createElement("span",{className:"crumb-item",key:_,onClick:()=>this.onClick(I)},k):Hp.createElement(Hp.Fragment,{key:_},Hp.createElement("span",{className:"crumb-arrow"},">"),Hp.createElement("span",{className:"crumb-item",onClick:()=>this.onClick(I)},k))})))}}class Crumb extends crumb_view_View{constructor(e){super(e),this.onClick=e=>{window.open(e)},this.state={}}}Crumb.defaultProps={crumbs:[]},Crumb.propTypes={crumbs:_e().array};const Kp=(0,Ni.$j)((e=>({crumbs:(0,ci.Z)(e,"initData.crumbs",[])})))(Crumb);var Up=k(38226),Zp=k(39621).default,Vp=k(67294);class memberReward_view_View extends Zp{render(){const{show:e}=this.state,{fclass:_=""}=this.props,k=[{className:"light"},{onClick:this.onClickBtn,className:"login"}],I=(0,q.JT)(this);return Vp.createElement(Vp.Fragment,null,e&&Vp.createElement("div",{className:"member-reward ".concat(I?"version-b":""," ").concat(_," "),ref:this.memberRewardRef,"data-exposure":this.loginBannerExposureData},Vp.createElement("section",{className:"member-reward_left"},Vp.createElement("div",{className:"member-reward_icon"},Vp.createElement(Ea.Z,{src:"https://ak-d.tripcdn.com/images/1re3e12000dkrm458F601.png",ssr:!0,bgColor:"transparent"})),Vp.createElement("div",{className:"member-reward_content"},Vp.createElement(Up.u,{txt:this.$translate("key.88801001.hotel.userbenefits.listpage.newuser.unlogin.new"),parentlabel:"div",childlabel:"span",childProps:k,isBreak:!0})))))}}const Wp="NOT_LOGIN_MEMBER",Gp="SILVER_MEMBER",$p="GOLD_MEMBER",qp="PLATINUM_MEMBER",zp="DIAMOND_MEMBER",Yp="TRIAL_GOLD_MEMBER",Jp="CROSS_USER_DIAMOND_TRIAL_MEMBER",Xp="EDM_MEMBER",Qp="ACTIVITY_SECTION_MEMBER",eh={23:Wp,24:Gp,25:$p,26:qp,27:zp,28:"DIAMOND_GOLD_TRIAL",29:Yp,30:Jp,31:Xp,32:Qp,33:"PLATINUM_TRIAL_DEAL"},th={LOGOUTMEMBERDEAL:Wp,SILVERMEMBERDEAL:Gp,GOLDMEMBERDEAL:$p,PLATINUMMEMBERDEAL:qp,DIAMONDMEMBERDEAL:zp,GOLD_TRIAL_DEAL:Yp,DIAMOND_TRIAL_DEAL:Jp,EDM_USER_DIAMOND_TRIAL:Xp,ACTIVITY_SECTION_MEMBER:Qp},nh={[Wp]:"unlogin",[Gp]:"silver",[$p]:"gold",[qp]:"platinum",[zp]:"diamond",[Yp]:"gold",[Jp]:"diamond",[Xp]:"edm",[Qp]:"trial"};var rh,oh,ih=k(39621).default,ah=k(67294);let lh=(0,_c.P)(((oh=class MemberMedal extends ih{constructor(e){super(e),this.getType=e=>(0,Pe.hj)(e)?eh[e]:th[e],this.handleMouseOver=(e,_)=>k=>{if(_){let I=_;if(_.indexOf("{break}")>-1){const e=_.split("{break}")[0],k=_.split(e)[1].replace(/\{break\}/g,"<br>");I=ah.createElement("div",{className:"breaked"},ah.createElement("span",{className:"breaked-title"},e),ah.createElement("span",{className:"breaked-content",dangerouslySetInnerHTML:this.createContentMarkup(k)}))}this.onMouseOver(k,I,e)}},this.handleMouseOut=(e,_)=>()=>{this.onMouseOut(e,_)},this.createContentMarkup=e=>({__html:e})}render(){const{memberType:e,memberName:_,customerClass:k,memberHover:I}=this.props;if(void 0===eh[e]&&void 0===th[e])return null;let C=this.getType(e);return C===Qp?ah.createElement(rc.Z,{text:_}):ah.createElement("div",{className:j()(k,"md_member_medal","ib",nh[C],I?"hover":""),onMouseOver:I?this.handleMouseOver(_,I):null,onMouseOut:I?this.handleMouseOut(_,I):null},ah.createElement("span",{className:"md_member_name"},_),ah.createElement("div",{className:"member-icon"},ah.createElement("i",{className:"u-icon u-icon-bg_member md_icon_bg"},C===Xp?ah.createElement("span",{className:"edm_icon md_icon"}):ah.createElement("i",{className:"u-icon md_icon ".concat("diamond"===nh[C]?"u-icon-ic_new_diamondmember":"u-icon-ic_new_member")}))))}}).defaultProps={memberType:0,memberName:"",customerClass:""},rh=oh))||rh;var sh=k(39621).default,ch=k(24367).default,uh=k(67294);class popMask_GoldenMask extends sh{constructor(e){super(e),this.handleClick=()=>{const{refresh:e=!1,onClick:_,hideMask:k=!0}=this.props;_&&_(),k&&ch.hide("SURE"),e&&window.location.reload()},this.ubtMapping={logHotelGoldenShow:U.s4},this.hasItalicFont=()=>{let e=(go.Z.get("ibulocale")||"").replace("_","-").toLocaleLowerCase();return!!["ja-jp","zh-hk","ko-kr","zh-tw"].find((_=>_===e))};let{subTitle:_=""}=e;this.style=this.hasItalicFont()?" s-font":"",this.subTitle=_.replace("{0}","<span class='".concat(this.style,"'>")).replace("{/0}","</span>")}componentDidMount(){const{data:{page:e=""}={}}=this.props;this.$safeLog("logHotelGoldenShow","".concat(e,"page"))}render(){const{title:e="",subTitle:_="",btnMsg:k="",label:I}=this.props;return e&&_?uh.createElement("div",{className:"pop-golden"},uh.createElement("h2",{className:this.style},e),I&&uh.createElement(lh,I),uh.createElement("div",{className:"subtitle",dangerouslySetInnerHTML:{__html:this.subTitle}}),uh.createElement("div",{className:"btn"},uh.createElement(Ac.Z,{type:"primary",className:"btn",onClick:this.handleClick},k))):null}}var dh=k(48467).default;const fetchActivityBenefits=async()=>{const e=await dh({url:"/getMarketInfo",data:{searchTags:[{tagDataType:"OPEN_NEW_CORSS_NEW_BANNER",tagDataValue:"T"},{tagDataType:"NEW_USER_ENABLE_AUTO_ACTIVITY",tagDataValue:"T"},{tagDataType:"ENABLE_AUTO_ACTIVITY",tagDataValue:"T"}]},bff:!0,silence:!0}),{data:_}=e;return _};var ph=k(48467).default,hh=k(35425).default,fh=k(24367).default,mh=k(67294);class MemberReward extends memberReward_view_View{constructor(e){var _,k;super(e),this.fetchVip=()=>{ph({url:"/recordUserReward",data:{recordType:"EXPERIENCE_MEMBER_UPGRADE"},silence:!0}).then((e=>{let{data:_,success:k}=e;k((()=>{this.requestCallBack(_)}))}))},this.requestCallBack=e=>{const{RecordResult:_,RecordResultMessage:k}=e;if("F"===_&&(k?(hh({content:k,fclass:"failure"},(()=>{window.location.reload()})),this.$safeLog("logToastShow",21,k,ne.Oc.REWARD_CLAIM_FAILURE)):window.location.reload()),"T"===_){let e={title:this.$translate("key.hotel.homepage.gold.membership.free.trial.pop-up"),subTitle:k,btnMsg:this.$translate("key.hotel.book.goldtrial.button"),page:window.location.href.match(/searchresults/gi)?"meta":"list",refresh:!0};fh.show({Child:popMask_GoldenMask,data:e,header:"close",animation:!0,fclass:"goldenInfo",callback:()=>{}})}this.$safeLog("logShowResult",_)},this.onClickBtn=()=>{this.$safeLog("logClickLogin"),this.$component("Account").action("register",{paramObj:{},successCallback:async()=>{this.$safeLog("logShowResult","T"),await fetchActivityBenefits(),window.location.reload()},failcallback:()=>{}})},this.ubtMapping={logClickLogin:U.Hn,logBenefitShow:U.k9,logShowResult:U.cL,logToastShow:U.cQ},this.loginBannerExposureData=JSON.stringify({ubtKey:"htl_t_online_list_loginbanner_exposure",data:{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),cityId:(null===(_=this.props.initData)||void 0===_||null===(k=_.searchCondition)||void 0===k?void 0:k.cityId)||""}}),this.state={show:!0},this.memberRewardRef=mh.createRef(),this.ScrollFunction=null}componentDidMount(){(0,z.observe)()}}var gh=function Component(e){var _=e.infoItems,k=e.background,I=e.className;if(!_)return null;var C=Array.isArray(_)?_:[_];if(0===C.length)return null;var R=j()("tcb-notification",I,"tcb-notification-bg-".concat(k));return fe().createElement("div",{className:R},fe().createElement("ul",{className:"tcb-notification-list"},C.map((function(e,_){var k=e.title,I=e.content,C=e.linkText,R=e.linkUrl;return fe().createElement("li",{className:"tcb-notification-item",key:_},k&&fe().createElement("span",{className:"tcb-notification-tit"},k),I&&fe().createElement("span",{className:"tcb-notification-cnt"},I),C&&R&&fe().createElement("a",{className:"tcb-notification-link",rel:"noopener noreferrer",target:"_blank",href:R},C))}))))};gh.defaultProps={background:"white"};const vh=gh;var yh,bh=k(39621).default,_h=k(67294);let wh=(0,Ni.$j)((e=>({longList:e.longList,metaHotel:e.metaHotel,filters:e.filters,renderFilters:e.renderFilters})))(yh=class MapFilter extends bh{constructor(e){super(e),this.redirectMap=()=>{const{renderFilters:e}=this.props;let _,k=/&?lat=((-?\d+)(\.\d+)|(-?\d+))/gi,I=/&?lon=((-?\d+)(\.\d+)|(-?\d+))/gi,C=~location.pathname.toLowerCase().indexOf("/searchresults"),R="hotel"===(0,Ne.Z)("optionType").toLowerCase();if(C||R)try{const{metaHotel:e,longList:{hotelList:R}}=this.props;let j=location.search.replace(k,"").replace(I,"");_="//".concat(location.host,"/hotels/map").concat(j,"&lat=").concat(C?e.card.position.lat:R.list[0].position.lat,"&lon=").concat(C?e.card.position.lng:R.list[0].position.lng,"&").concat(C?"isMeta=1":"")}catch(e){let C=location.search.replace(k,"").replace(I,"");_="//".concat(location.host,"/hotels/map").concat(C,"&lat=0&lon=0")}else _="//".concat(location.host,"/hotels/map").concat(location.search);this.$safeLog("logListpageShowMap"),location.href=_},this.ubtMapping={logListpageShowMap:U.M3},this.options={}}render(){const{curWidth:e="",curHeight:_="",title:k=this.$translate("key.hotel.list.map.show.on.map"),isQuickly:I=!1}=this.props;return _h.createElement("div",{className:"mapfilter-wrap"},_h.createElement("div",{className:"mapfilter-container bg-map ".concat(I?" float":""),style:{width:e,height:_},onClick:this.redirectMap},_h.createElement("div",{className:"map-item"},_h.createElement(B.Z,{type:"ic_new_map",className:I?"map_location_quick":"map_location"}),_h.createElement("div",{className:I?"map-txt-new_quick":"map-txt-new"},k))))}})||yh;var Eh=k(67294);class v8Noticification extends se.default{constructor(e){super(e),this.state={}}render(){const{infoItems:e=[]}=this.props,{linkUrl:_,linkText:k,content:I}=e[0];return Eh.createElement("div",{className:j()("newlist-noticification-V8","minNoiseNoticification")},Eh.createElement(Ee.Z,{type:"ic_new_warning_line",className:"newlist-noticification-V8-icon"}),Eh.createElement("div",{className:"newlist-noticification-V8-content"},I),Eh.createElement("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"tcb-notification-link newlist-noticification-V8-link"},k))}}var Sh=k(39621).default,Oh=k(67294);class view_CrossModal extends Sh{constructor(e){super(e),this.renderBannerItem=(e,_)=>{var k,I,C;const{sceneType:R,isTemporary:H}=this.props,U="crossUser"===R,V=!0===H&&U&&"userProperty"!==(null==e?void 0:e.type),G=V||1==(null==e||null===(k=e.couponInfo)||void 0===k?void 0:k.status)?"0.6":"1";return Oh.createElement("div",{key:_,className:j()("itemWrap",{"itemWrap-crossUser_bg":U})},Oh.createElement("div",{className:"itemWrap-left"},Oh.createElement("div",{className:j()("itemWrap-tag",{"crossUser-tag":U}),style:{opacity:G}},V&&Oh.createElement(B.Z,{type:"ic_lock",className:"lock-icon"}),e.title),Oh.createElement("div",{className:"itemWrap-main"},Oh.createElement("div",{className:j()("itemWrap-leftTitle",{"crossUser-title":U}),style:{opacity:G}},(null==e?void 0:e.subTitle)||""),Oh.createElement("ul",{className:"couponItem-promoCodeDetail",style:{opacity:G}},(null==e||null===(I=e.details)||void 0===I?void 0:I.length)>0&&(null==e||null===(C=e.details)||void 0===C?void 0:C.map((e=>Oh.createElement("li",{className:"couponItem-promoCodeInfo  multi-coupon"},e||""))))),this.renderCouponInfo(null==e?void 0:e.couponInfo,G),Oh.createElement("div",{className:"itemWrap-desc",style:{opacity:G}},(null==e?void 0:e.desc)||""))),Oh.createElement("div",{className:j()("itemWrap-right",{"crossUser-dash":U}),style:{opacity:G}},Oh.createElement("img",{className:"itemWrap-rightImg",src:null==e?void 0:e.icon})))},this.renderCouponInfo=(e,_)=>e?Oh.createElement(Oh.Fragment,null,Oh.createElement("div",{className:"couponItem-time"},Oh.createElement("span",{style:{opacity:_}},Oh.createElement("span",null,(null==e?void 0:e.startTime)||""),(null==e?void 0:e.startTime)&&(null==e?void 0:e.endTime)?Oh.createElement("span",null,"-"):null,Oh.createElement("span",null,(null==e?void 0:e.endTime)||"")),Oh.createElement("span",{className:"couponItem-detail",onMouseOver:this.mouseOver.bind(this,null==e?void 0:e.details),onMouseOut:this.mouseOut.bind(this)},this.$translate("key.hotel.userbenefits.floating.promo.code.detail"))),1==(null==e?void 0:e.status)&&Oh.createElement("div",{className:"couponItem-disable"},null==e?void 0:e.disableReason)):null,this.state={show:!1,showBorderBottom:!1},this.newUserPropertyIconMap={USER:"https://ak-d.tripcdn.com/images/1re6l12000dks4t6zD262.png",COUPON:"https://ak-d.tripcdn.com/images/1re6z12000dks5jc15312.png",COINS:"https://ak-d.tripcdn.com/images/1re3512000dks52t51E7B.png"},this.crossPropertyIconMap={USER:"https://ak-d.tripcdn.com/images/1re2812000dks4ztsB58F.png",COUPON:"https://ak-d.tripcdn.com/images/1re5r12000dks58doC640.png",COINS:"https://ak-d.tripcdn.com/images/1re3512000dks52t51E7B.png"}}render(){const{show:e=!1,showBorderBottom:_=!1}=this.state,{normalBannerInfo:k={},isTemporary:I=!1,hasClaimed:C,sceneType:R}=this.props,{mainTitle:j,popBannerList:H=[]}=k,U=!0===I&&"crossUser"===R;return Oh.createElement(Oh.Fragment,null,e?Oh.createElement("div",{className:"crossModal-Mask"},Oh.createElement("div",{className:"crossModal-container"},Oh.createElement("div",{style:{borderBottom:_?"1px solid #dadfe6":"none"},className:"crossModal-title"},Oh.createElement("div",{className:"crossModal-header"},Oh.createElement("div",{className:"crossModal-text"},j)),Oh.createElement("div",{className:"closeIcon"},Oh.createElement(B.Z,{onClick:this._close,type:"ic_new_close_line"}))),Oh.createElement("div",{id:"mainContent",className:"crossModal-content",style:{maxHeight:U?"445px":"536px"}},null==H?void 0:H.map(((e,_)=>this.renderBannerItem(e,_)))),Oh.createElement("div",{className:"shadow"}),C&&Oh.createElement("div",{className:"loginButton",onClick:this.onClickBookBtn},this.$translate("key.88801001.hotel.userbenefits.cta.book.now")),U&&Oh.createElement(Oh.Fragment,null,Oh.createElement("div",{className:"loginButton lockBtn",onClick:this.goLogin},this.$translate("key.hotel.userbenefits.banner.crossselluser.claimed.unlock")),Oh.createElement("div",{className:"loginDesc"},this.$translate("key.hotel.userbenefits.floating.crossselluser.claimed.unlock"))))):null)}}var Th=k(51603),kh=k(67294);class CrossModal extends view_CrossModal{constructor(e){var _;super(e),_=this,this.ubtMapping={crossBannerClick:U.ZM,crossDialogExposure:U.Xg,crossFloatingShow:U.fD,unlockAllClick:U.LC},this.handleScroll=e=>{var _;0==((null==e||null===(_=e.target)||void 0===_?void 0:_.scrollTop)||0)?this.setState({showBorderBottom:!1}):this.setState({showBorderBottom:!0})},this._close=()=>{this.setState({show:!1},(()=>{Th.Z.unfreeze()}))},this._open=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.setState({show:!0},(()=>{Th.Z.freeze()})),_.$safeLog("crossBannerClick",e),_.$safeLog("crossDialogExposure",k)},this.mouseOut=()=>{const e=this.$component("ToolTip");e&&e.action("hide")},this.goLogin=()=>{this.$component("Account").action("showLogin",{paramObj:{username:""},successCallback:()=>{window.location.reload()},failcallback:()=>{}}),this.$safeLog("unlockAllClick")},this.onClickBookBtn=()=>{this._close()},this.mouseOver=function(){var e;let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",I=arguments.length>1?arguments[1]:void 0;const C=_.$component("ToolTip"),R=null==k||null===(e=k.map)||void 0===e?void 0:e.call(k,((e,_)=>kh.createElement("div",{className:"crossModalTip",key:_},kh.createElement("div",{className:"termTitle"},null==e?void 0:e.title),kh.createElement("div",{className:"termContent",dangerouslySetInnerHTML:{__html:null==e?void 0:e.value}})))),j={target:I.target,content:R,borderRadius:4,maxWidth:480,isFixed:!0};C&&C.action("show",j);const B=_.props.logBannerData,H={login_status:null==B?void 0:B.login_status,userTag:null==B?void 0:B.userTag,traceExt:null==B?void 0:B.traceExt};_.$safeLog("crossFloatingShow",H)}}componentDidUpdate(){var e,_,k;Ce.Z&&((null===(e=document)||void 0===e?void 0:e.getElementById("mainContent"))&&(null===(_=document)||void 0===_||null===(k=_.getElementById("mainContent"))||void 0===k||k.addEventListener("scroll",this.handleScroll)))}}var Ih=k(39621).default,Ch=k(35425).default,Ph=k(67294);class view_CrossBanner extends Ih{constructor(e){super(e),this.ubtMapping={crossBannerClick:U.ZM,crossBannerExposure:U.rl},this.onClickBanner=async(e,_)=>{const{logBannerData:k,logPopBannerData:I}=this.getLogBannerData();if(e&&_){var C,R,j,B;const e=await fetchActivityBenefits(),_=0===(null==e||null===(C=e.normalBannerInfo)||void 0===C||null===(R=C.receivedActivityInfo)||void 0===R?void 0:R.status);var H,U;if(!(0,Pe.xb)(null==e||null===(j=e.normalBannerInfo)||void 0===j||null===(B=j.receivedActivityInfo)||void 0===B?void 0:B.message))Ch({content:(null==e||null===(H=e.normalBannerInfo)||void 0===H||null===(U=H.receivedActivityInfo)||void 0===U?void 0:U.message)||"",fclass:_?"success":""},(()=>{window.location.reload()}))}else this.crossModalRef.current._open(k,I)},this.getLogBannerData=()=>{const{crossBanner:e={}}=this.props,{normalBannerInfo:_={},unclaimedActivityInfos:k=[],authInfo:I,traceExt:C=""}=e,{bannerList:R=[]}=_,j=!(0,Pe.xb)(k),B=(null==I?void 0:I.isLogin)&&!(null==I?void 0:I.isMember);let U=[];null==R||R.map((e=>{U.push(null==e?void 0:e.type)}));let V=U.filter(((e,_,k)=>k.indexOf(e,0)===_));const G={receivetype:j?0:1,membertype:B?0:1,login_status:(null==I?void 0:I.isLogin)?1:0,userTag:null==e?void 0:e.sceneType,locale:H.default.getByKey("cargo.locale"),rightstype:V.join()||"",traceExt:C};return{logBannerData:G,logPopBannerData:Object.assign({},G,{promotioncode:[].join()||""})}},this.newUserBannerIconMap={userProperty:"https://ak-d.tripcdn.com/images/1re0f12000dkrm2jf1AD7.png",coupon:"https://ak-d.tripcdn.com/images/1re4912000dkrm56jA775.png",coins:"https://ak-d.tripcdn.com/images/1re1n12000dkrm7fx2E9C.png",backCoins:"https://ak-d.tripcdn.com/images/1re1n12000dkrm7fx2E9C.png"},this.bannerTitleImg={crossUser:"//ak-d.tripcdn.com/images/1re3m12000cj3wnlz1628.png",newUser:"https://ak-d.tripcdn.com/images/1re3e12000dkrm458F601.png"},this.crossUserBannerIconMap={userProperty:"https://ak-d.tripcdn.com/images/1re3r12000dpg6lox260D.png",coupon:"https://ak-d.tripcdn.com/images/1re7312000dpg6efg4B9B.png",coins:"https://ak-d.tripcdn.com/images/1re1n12000dkrm7fx2E9C.png",backCoins:"https://ak-d.tripcdn.com/images/1re1n12000dkrm7fx2E9C.png"}}componentDidMount(){(0,z.observe)()}render(){const{crossBanner:e={}}=this.props,{normalBannerInfo:_={},unclaimedActivityInfos:k=[],sceneType:I,authInfo:C}=e,{title:R,bannerList:H=[]}=_,U=!(0,Pe.xb)(k),V=(null==C?void 0:C.isLogin)&&(null==C?void 0:C.isMember)||!1,G=(null==C?void 0:C.isLogin)&&!(null==C?void 0:C.isMember),q=!U&&G&&"crossUser"===I,z="crossUser"===I?this.crossUserBannerIconMap:this.newUserBannerIconMap,{logBannerData:J}=this.getLogBannerData(),Q=JSON.stringify({ubtKey:"htl_t_online_list_crosssell_banner_exposure",data:J});return H.length?Ph.createElement(Ph.Fragment,null,Ph.createElement("div",{className:"crossBanner","data-exposure":Q,onClick:()=>{this.onClickBanner(U,V)}},Ph.createElement("div",{className:"crossBanner-left"},Ph.createElement("img",{className:"crossBanner-leftImg",src:this.bannerTitleImg[I]}),Ph.createElement("div",{className:"crossBanner-leftTitle"},R),Ph.createElement("div",{className:"crossBanner-leftStamp"},(null==H?void 0:H.length)>0&&H.map(((e,_)=>Ph.createElement("div",{key:_,className:j()("crossBanner-leftStampItem",{"bannerItem-crossUser":"crossUser"===I,isLock:q&&"userProperty"!==(null==e?void 0:e.type)})},Ph.createElement("img",{src:z[null==e?void 0:e.type],className:"crossBanner-leftStampItemIcon"}),Ph.createElement("div",{className:j()("crossBanner-leftStampItemValue",{"crossUser-text":"crossUser"===I})},null==e?void 0:e.value))))),Ph.createElement("div",{className:"shadow"})),Ph.createElement("div",{className:"crossBanner-right"},Ph.createElement("div",{className:"crossBanner-button"},U&&Ph.createElement("div",{className:"claim"},this.$translate("key.hotel.userbenefits.banner.crossselluser.claim")),!U&&V&&Ph.createElement("div",{className:"hasClaimed"},Ph.createElement("span",null,this.$translate("key.hotel.userbenefits.banner.crossselluser.claimed")),Ph.createElement(B.Z,{type:"ic_new_more_line1"})),q&&Ph.createElement("div",{className:"unlock"},Ph.createElement("span",null,this.$translate("key.hotel.userbenefits.banner.crossselluser.claimed.unlock")),Ph.createElement(B.Z,{type:"ic_new_more_line1"}))))),Ph.createElement(CrossModal,{ref:this.crossModalRef,isTemporary:G,sceneType:I,normalBannerInfo:_,logBannerData:J,hasClaimed:!U&&V})):null}}var Lh=k(86163),Nh=k(67294);function withHooksHOC(e){return _=>{const k=(0,Lh.qS)(H.default.getByKey("cargo.locale"))||{};return Nh.createElement(e,(0,C.Z)({loginStatus:k},_))}}var Dh=k(67294);const Ah=withHooksHOC(class CrossBanner extends view_CrossBanner{constructor(e){super(e),this.crossModalRef=Dh.createRef()}});var Rh=k(85354),xh=k.n(Rh),jh=function(e){function ErrorBoundary(){return e.apply(this,arguments)||this}xh()(ErrorBoundary,e);var _=ErrorBoundary.prototype;return _.componentDidCatch=function componentDidCatch(e,_){var k={name:this.props.name,version:this.props.version,errorName:null==e?void 0:e.name,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,componentStack:null==_?void 0:_.componentStack,url:window.location.href};throw"undefined"!=typeof window&&(0,Ge.v4)("ibu_component_usage_onerror",JSON.stringify(k)),e},_.render=function render(){return this.props.children},ErrorBoundary}(he.Component),Bh=function track(e){if(Mh()){var _=Object.assign({},e,{url:Fh()});(0,Ge.v4)("ibu_component_usage_onload",JSON.stringify(_))}},Mh=function reportOrNot(){var e=100*Math.random()<10;try{return!!window.location.href.includes("forceToReport=true")||e}catch(_){return e}},Fh=function getUrl(){var e,_=null==(e=window.location.href.split("?"))?void 0:e[0];return _.length>0&&"/"===_[_.length-1]&&(_=_.substring(0,_.length-1)),_};const Hh=JSON.parse('{"u2":"@ctrip/trip-component-platform-online-banner-basic","i8":"2.0.1"}');var Kh=function isPureObject(e){return function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)&&!(0,he.isValidElement)(e)},Uh=function isUndefined(e){return void 0===typeof e},Zh=function isString(e){return"string"==typeof e};const Vh=function DefaultMode(e){var _,k=e.mode,I=e.i18n,C=e.content,R=void 0===C?{}:C,j=e.traceAction,B=e.onButtonClick,H=function sanitizeContent(e){var _=e.title,k=e.subtitle,I=e.branding,C=e.link,R=function isValidText(e){return Kh(e)&&!Uh(e.key)},j=function sanitize(e,_,k){var I;return e(_)?_:((I={})[k]=_,I)};return{title:j(R,_,"key"),subtitle:j(R,k,"key"),branding:j((function isValidImage(e){return Kh(e)&&Zh(e.url)}),I,"url"),link:j(R,C,"key")}}(R),U=H.title,V=H.subtitle,G=H.branding,q=H.link,z=R.action,J=void 0!==z&&z;return fe().createElement("div",{className:(0,lp.ok)("mode-wrapper","mode-"+k)},fe().createElement("div",{className:"left"},R.branding&&fe().createElement("div",{className:"branding"},fe().createElement("img",{src:G.url,style:G.style,alt:"branding"})),fe().createElement("div",{className:"detail"},R.title&&fe().createElement("p",{className:"title",style:U.style,dangerouslySetInnerHTML:{__html:I[U.key]}}),R.subtitle&&fe().createElement("p",{className:"subtitle",style:V.style,dangerouslySetInnerHTML:{__html:I[V.key]}}),R.link&&fe().createElement("a",{className:"link",href:q.href,style:q.style,target:null!=(_=q.target)?_:"_blank"},I[q.key]))),fe().createElement("div",{className:"right"},J&&function renderActionButton(){var e=J,_=e.key,k=e.style,C=e.href,R=e.target,H=void 0===R?"_blank":R,U=function isFunction(e){return"function"==typeof e}(B)?void 0:C;return fe().createElement("a",{className:(0,lp.ok)("btn action"),style:k,href:U,target:H,onClick:function onClick(e){return function handleClick(e,_){null==B||B(e),null==j||j({targetLink:_})}(e,U)}},I[_])}()))};var Wh=k(41431);const Gh=function CommonWrapper(e){var _=e.content,k=_.close,I=void 0!==k&&k,C=_.bg,R=void 0===C?{}:C,j=_.bannerStyle,B=e.customId,H=e.isRtl,U=e.traceClose,V=function sanitizeBg(e,_,k){void 0===k&&(k={}),Zh(e)&&(e={url:e});var I=e,C=I.url,R=I.bgColor,j=I.rtlUrl,B=Object.assign({},k),H=_&&null!=j?j:C;return H&&(B.backgroundImage="url("+H+")"),R&&(B.backgroundColor=R),{styles:B}}(R,H,j).styles,G=function getCookieId(e){return"--basic-banner-"+e}(B),q=(0,Wh.B)(G),z=q[0],J=q[1],Q=!!z,ee=(0,he.useState)(!Q),te=ee[0],ne=ee[1],re=function handleClose(e){var _=I,k=_.onClose,C=_.hideOnceClose,R=void 0===C||C;ne(!1),U(),null==k||k(e),R&&setTimeout((function(){return J(1)}))};return te?fe().createElement("div",{className:(0,lp.ok)("banner-wrapper",{"non-closable":!I}),style:V},I&&function renderCloseButton(){var e=I,_=e.position,k=void 0===_?"corner":_,C=(e.onClose,e.customNode),R=!Uh(C)&&(0,he.isValidElement)(C);return fe().createElement("div",{className:(0,lp.ok)("close",k,{default:!R}),onClick:re},R?C:null)}(),e.children):null};var $h=k(48926),qh=k.n($h),zh=k(87757),Yh=k.n(zh),Jh=k(32407),Xh=k(68926),Qh=k(15474),ef=k(73584),tf={primaryBtnKey:"key_home_install"},nf=function useModifiedConfig(e,_,k){var I=(0,he.useRef)({show:function show(){},timeout:0,scrollCb:function scrollCb(){},prevTimeStamp:-1e3}),C=function createConfig(){var C=function mergeDefaultContent(e,_){var k=Object.assign({},tf,_||{}),I=e.mode,C=Object.assign({},k,(k.modes||{})[I]||{});delete C.modes;var R=Object.assign({},e);return R.content=Object.assign({},C,R.content),R}(e,_);return!0!==k&&(C=function rewriteShow(e,_){var k=e.content,I=k.showAfterXHeight,C=k.showAfterXSeconds;e.content=Object.assign({},e.content||{}),((I||-1)>0||(C||-1)>0)&&(e.content.show=!1);(0,Xh.$c)().isBrowser&&("number"==typeof C&&C>0&&(clearTimeout(_.current.timeout),_.current.timeout=window.setTimeout((function(){_.current.show()}),1e3*C)),"number"==typeof I&&I>0&&(window.removeEventListener("scroll",_.current.scrollCb),_.current.scrollCb=function(e){var k=e.timeStamp-_.current.prevTimeStamp;k>120||k<5?_.current.prevTimeStamp=e.timeStamp:window.pageYOffset>window.innerHeight*I&&(_.current.show(),window.removeEventListener("scroll",_.current.scrollCb))},window.addEventListener("scroll",_.current.scrollCb)));return e}(C,I)),C},R=(0,he.useState)(C),j=R[0],B=R[1];return I.current.show=function(){var e=Object.assign({},j.content||{},{show:!0});B((function(_){return Object.assign({},_,{content:e})}))},(0,he.useEffect)((function(){B(C())}),[e]),j};var rf="/restapi/soa2/24884/json/getConfiguration",of=(0,Xh.$c)(),af=null,lf={content:{}},sf=function generateCacheKey(e,_,k){var I,C,R=e.split("/"),j=R[R.length-1].toLowerCase(),B=Object.assign({},_,null!=k&&null!=(I=k.dev)&&I.version?{version:null==k||null==(C=k.dev)?void 0:C.version}:{});return B&&0!==Object.keys(B).length&&Object.keys(B).sort().forEach((function(e){"object"==typeof B[e]?j+=JSON.stringify(B[e]):void 0!==B[e]&&(j+=String(B[e]))})),j},cf=function isParamsValid(e){var _,k,I=!!(e.platform&&e.componentType&&e.version&&e.pageId&&null!=(_=e.head)&&_.locale&&null!=(k=e.head)&&k.currency);return I},uf=function getAPIGatewayHost(e){var _=(of.isNode?(null==e?void 0:e.host)||"":window.location.host).replace(/\/$/,""),k=new RegExp("(tripcorp|tripqate|localhost)").test(_)?"fat":"prod",I=of.isNode?"server":"client";return(of.isNode?"http:":window.location.protocol)+"//"+{fat:{server:"gateway.m.fws.qa.nt.ctripcorp.com",client:"gateway.m.fws.qa.nt.ctripcorp.com"},prod:{server:"apigateway.ctripcorp.com",client:"www.trip.com"}}[k][I]},df=function transform(e){for(var _=Object.assign({},e),k=["aid","sid","taskId","promotionId"],I=0;I<k.length;I++)void 0!==_[k[I]]&&(_[k[I]]=Number.parseInt(_[k[I]]||0,10));k=["pageId","customId"];for(var C=0;C<k.length;C++)void 0!==_[k[C]]&&(_[k[C]]=String(_[k[C]]||""));return _},pf=function(){var e=qh()(Yh().mark((function _callee(e,_){var k,I,C,R,j;return Yh().wrap((function _callee$(B){for(;;)switch(B.prev=B.next){case 0:if("undefined"!=typeof window){B.next=10;break}return B.prev=1,"string"==typeof(null==(k=((null==_?void 0:_.cookie)||"").match(/_bfa=([^;]+);/))?void 0:k[1])&&(I=k[1].split("."),C=I[1]+"."+I[2],e.head.vID=C),B.abrupt("return",e);case 7:return B.prev=7,B.t0=B.catch(1),B.abrupt("return",e);case 10:return B.prev=10,B.next=13,(0,ef.lR)();case 13:return R=B.sent,j=R.vid,e.head.vID=j,B.abrupt("return",e);case 19:return B.prev=19,B.t1=B.catch(10),B.abrupt("return",e);case 22:case"end":return B.stop()}}),_callee,null,[[1,7],[10,19]])})));return function addVid(_,k){return e.apply(this,arguments)}}(),hf=function(){var e=qh()(Yh().mark((function _callee5(e,_,k){var I,C,R,j,B,H,U,V,G;return Yh().wrap((function _callee5$(q){for(;;)switch(q.prev=q.next){case 0:if(I=e.customParams,C=Object.assign({},e,null!=_&&_.union?{aid:_.union.aid,sid:_.union.sid}:{},{customParam:I},null!=k&&k.version?{version:null==k?void 0:k.version}:{}),R=null==_?void 0:_.userAgent,null==_||delete _.userAgent,delete C.customParams,!cf(C)){q.next=19;break}return j=df(C),B=sf(rf,j),q.next=10,pf(j,_);case 10:return H=q.sent,q.next=13,qh()(Yh().mark((function _callee4(){return Yh().wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:if(!of.isNode||null==_||!_.RPC){e.next=6;break}if(af){e.next=5;break}return af=new _.RPC({serviceName:"appgrowthplatformservice",serviceCode:"24884"}),e.next=5,af.init();case 5:return e.abrupt("return",function(){var e=qh()(Yh().mark((function _callee2(e){return Yh().wrap((function _callee2$(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,af.invoke({method:"getConfiguration",args:e,reqEphemeralParams:{headers:{"User-Agent":R}}});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}}),_callee2)})));return function(_){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",function(){var e=qh()(Yh().mark((function _callee3(e){return Yh().wrap((function _callee3$(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,Qh.W)({url:uf(_)+rf,data:e,contentType:"application/json",dataType:"json",method:"POST",withCredentials:!0});case 2:return k.abrupt("return",k.sent);case 3:case"end":return k.stop()}}),_callee3)})));return function(_){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),_callee4)})))();case 13:return U=q.sent,q.next=16,U(H).catch((function(e){return null}));case 16:return V=q.sent,G=function(){if(V&&"Success"===V.ResponseStatus.Ack&&"Success"===V.responseHead.errorCode){var e=V.amounts?V.amounts.reduce((function(e,_){return e[_.key]=_,e}),{}):void 0;return Object.assign({},V.baseInfo,{content:JSON.parse(V.content),task:V.task,promotion:V.promotion,amounts:e,properties:V.properties})}return lf}(),q.abrupt("return",{cacheKey:B,rawConfig:G});case 19:return q.abrupt("return",{cacheKey:"",rawConfig:lf});case 20:case"end":return q.stop()}}),_callee5)})));return function fetchConfig(_,k,I){return e.apply(this,arguments)}}(),ff=function useConfig(e){var _=e.rawConfig,k=e.tcpCacheKey,I=e.options,C=void 0===I?{}:I,R=e.params,j=e.defaultContent,B=e.noOverwriteShow,H=(0,he.useMemo)((function(){return df(R)}),[R]),U=(0,he.useMemo)((function(){return function cache(e){var _=e.tcpCacheKey,k=function setCache(e,k){if(of.isBrowser&&e&&k){var I="string"==typeof k?k:JSON.stringify(k||{});window.sessionStorage.setItem(_+"."+e,I)}};return of.isBrowser&&window[_]&&k(window[_].cacheKey,window[_].config),{setCache:k,getCache:function getCache(e,k){if(of.isBrowser&&e){var I=window.sessionStorage.getItem(_+"."+e);return I?JSON.parse(I):k}return lf}}}({tcpCacheKey:k})}),[k]),V=U.getCache,G=U.setCache,q=(0,he.useMemo)((function(){var e,_,k;return!of.isNode||null!=(e=C.dev)&&e.disableServerConfig||null==(_=C.ssr)||!_.rawConfig?cf(H)?sf(rf,H,C):"":(null==(k=C.ssr)?void 0:k.cacheKey)||""}),[H]),z=(0,he.useState)((function(){var e,k,I;return _||(!of.isNode||null!=(e=C.dev)&&e.disableServerConfig||null==(k=C.ssr)||!k.rawConfig?null!=(I=C.dev)&&I.rawConfig?C.dev.rawConfig:V(q,lf):C.ssr.rawConfig)})),J=z[0],Q=z[1],ee=nf(J,j,B),te=(0,he.useState)((function(){var e,k;return!!_||(!(null==(e=C.dev)||!e.disableServerConfig)||!(null==(k=C.ssr)||!k.rawConfig))})),ne=te[0],re=te[1];return(0,he.useEffect)((function(){var e;if(!_&&(null==(e=C.dev)||!e.disableServerConfig)&&q){var k=V(q);(k?Promise.resolve({cacheKey:q,rawConfig:k}):hf(Object.assign({},H),void 0,C.dev)).then((function(e){var _=e.cacheKey,k=e.rawConfig;Q(k||lf),re(!0),G(_,k)}))}}),[q]),{isInited:ne,cacheKey:q,config:ee,rawConfig:J}};var mf=k(39339),gf=k(6465);var vf=["option"],yf=["exposureByScroll"],bf={action:"ibu_public_agc_online_basic_component_click",exposure:"ibu_public_agc_online_basic_component_exposure",close:"ibu_public_agc_online_basic_component_close"},_f={action:"ibu_public_agc_h5_basic_component_click",exposure:"ibu_public_agc_h5_basic_component_exposure",close:"ibu_public_agc_h5_basic_component_close"};function mergeExtraOptions(e,_){void 0===_&&(_={});var k=e.option,I=void 0===k?{}:k,C=We()(e,vf);return Object.assign({},C,{option:Object.assign({},I,_)})}var wf={appId:"330153"},Ef=function createTrackEnv(e){var _="online"===function sanitizePlat(e,_){return e||(_.indexOf("-online-")>-1?"Online":"H5")}(e.platform,e.componentName).toLocaleLowerCase()?bf:_f;return{useTrack:function useTrack(k){var I=k.exposureByScroll,C=We()(k,yf),R=Object.assign({},e,C),j=!I||!I.el,B=(0,he.useRef)(!1),H=function onExposure(e){return(0,Ge.g4)(_.exposure,mergeExtraOptions(R,e))},U=function useDebounced(e,_){var k=this;void 0===_&&(_=200);var I=(0,he.useRef)(null);return function(){for(var C=arguments.length,R=new Array(C),j=0;j<C;j++)R[j]=arguments[j];var B=k;I.current||clearTimeout(I.current),I.current=setTimeout((function(){e.call.apply(e,[B].concat(R))}),_)}}((function(){var e=I.el;e&&e.current&&!B.current&&(0,gf.isInViewport)(e.current)&&(H(),B.current=!0,window.removeEventListener("scroll",U))}));return function lifeCycle_useMount(e){var _=(0,he.useRef)(!1);(0,he.useEffect)((function(){return _.current?(_.current=!0,gf.noop):e()}),[])}((function(){return j?(H(),gf.noop):(U(),window.addEventListener("scroll",U),function(){return window.removeEventListener("scroll",U)})})),{onAction:function onAction(e){return(0,Ge.g4)(_.action,mergeExtraOptions(R,e))},onExposure:H,onClose:function onClose(e){return(0,Ge.g4)(_.close,mergeExtraOptions(R,e))}}}}}({componentName:Hh.u2,version:Hh.i8}).useTrack,Sf=Jh.formatLocale,Of={platform:"Online",componentType:"online-banner-basic",version:Hh.i8};function useComponent(e){var _=e.pageId,k=e.customId,I=e.taskId,C=e.promotionId,R=e.options,j=void 0===R?{}:R,B=e.onVisibleChange,H=e.hide,U=void 0!==H&&H,V=e.customParams,G=void 0===V?{}:V,q=(e.onClose,e.configId,(0,et.Q)(wf)),z=(0,pt.N)(),J=z.locale,Q=z.currency,ee=Sf(J,"aa-BB"),te=(0,lp.eZ)(ee),ne=(0,mf.wZ)(),re=ne.aid,oe=ne.sid,ie=(ne.ouid,(0,he.useRef)(null)),ae=ff({tcpCacheKey:"__agc_online_banner_basic",options:j,params:Object.assign({},Of,{head:{locale:ee,currency:Q},platform:"Online",componentType:"online-banner-basic",version:Hh.i8,pageId:_,aid:Number.parseInt(re||"0",10),sid:Number.parseInt(oe||"0",10),customId:k,taskId:I,promotionId:C,customParams:G})}),le=ae.config,se=ae.isInited,ce=ae.rawConfig,ue=!U&&se&&!function isNotMatchAGC(e){return!e.content||"{}"===JSON.stringify(e.content)}(ce),de=Ef({pageid:_,locale:ee,configid:le.configId,mode:le.mode,position:le.position,exposureByScroll:{el:ie}}),pe=de.onClose,fe=de.onAction;return(0,he.useEffect)((function(){B&&B(ue)}),[ue]),{locale:ee,isRtl:te,el:ie,traceClose:pe,i18n:q,config:le,traceAction:fe,show:ue}}const Tf=function AnalyticsWrapper(e,_,k){return void 0===k&&(k=!1),function(I){return(0,he.useEffect)((function(){Bh(_)}),[]),e.displayName=_.name+":"+_.version,k?fe().createElement(jh,{name:_.name,version:_.version},fe().createElement(e,I)):fe().createElement(e,I)}}((function OnlineBannerBasic(e){var _=useComponent(e),k=_.isRtl,I=_.el,C=_.traceClose,R=_.i18n,j=_.config,B=_.traceAction,H=_.show,U=j.mode,V=void 0===U?"default":U,G=j.content,q=e.className,z=void 0===q?"":q,J=e.customId,Q=void 0===J?"default":J,ee=e.onButtonClick,te={content:G,mode:V,customId:Q,isRtl:k,traceClose:C,i18n:R,traceAction:B,onButtonClick:ee};return H?fe().createElement("div",{className:(0,lp.ok)("obb-wrapper",{className:z}),dir:k?"rtl":"ltr",id:Q,ref:I},fe().createElement(Gh,te,function dispatchComponents(){var e;switch(V){case"default":default:e=Vh}return fe().createElement(e,te)}())):null}),{name:Hh.u2,version:Hh.i8});var kf=k(39621).default,If=k(67294);class CommonOnlineListBanner extends kf{render(){const e=(0,ii.WH)("city",this.ctx,0)||(0,ii.WH)("cityId",this.ctx,0),{popCommonLoginComponentAction:_=(()=>{}),commonBannerSsrData:k={}}=this.props;return If.createElement("li",null,If.createElement(Tf,{customParams:{customParam1:e.toString()},pageId:H.default.getByKey("pageId",this.ctx),onButtonClick:_,options:{ssr:k}}))}}var Cf=k(39621).default,Pf=k(67294);class view_NewUserBannerList extends Cf{constructor(e){super(e)}render(){var e;const{crossBanner:_={}}=this.props,{homeBanner:k,unclaimedActivityInfos:I=[],authInfo:C,traceExt:R="",sceneType:j}=_;if((0,Pe.xb)(k)||(0,Pe.xb)(null==k?void 0:k.subItems))return null;const B=JSON.stringify({ubtKey:"htl_t_online_list_promotion_newuser_exposure",data:{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),status:(null==I?void 0:I.length)>0?"0":"1",login_status:(null==C?void 0:C.isLogin)?1:0,userTag:null!=j?j:"",traceExt:R}}),U=(0,q.JT)(this);return Pf.createElement("div",{className:"newUserBanner ".concat(U?"version-b":""," "),"data-exposure":B},Pf.createElement("div",{className:"newUserBanner-peopleImg"}),Pf.createElement("img",{className:"newUserBanner-leftImg",src:"//ak-d.tripcdn.com/images/1re2p12000dks6cbf3908.png"}),Pf.createElement("div",{className:"newUserBanner-content"},Pf.createElement(qi.uB,{parentlabel:"span",txt:null==k?void 0:k.title,className:"newUserBanner-title",childlabel:"span"}),Pf.createElement("div",{className:"newUserBanner-description"},Pf.createElement("div",{className:"newUserBanner-subItem"},null==k||null===(e=k.subItems)||void 0===e?void 0:e.map(((e,_)=>Pf.createElement("div",{className:"newUserBanner-item",key:_},Pf.createElement(Ee.Z,{type:"advantage_yes",className:"newUserBanner-descIcon"}),Pf.createElement("p",{className:"newUserBanner-desc"},e))))),Pf.createElement("div",{className:"newUserBanner-rightImg"},Pf.createElement("div",{className:"newUserBanner-btn",onClick:this.onClickBtn},Pf.createElement("span",null,this.$translate("key.88801001.hotel.userbenefits.homepage.newuser.cta")),Pf.createElement(Ee.Z,{type:"ic_new_more_line1",className:"btnIcon"}))))))}}class NewUserBannerList extends view_NewUserBannerList{constructor(e){super(e),this.ubtMapping={logShowResult:logShowResult},this.recieveBenefits=async()=>{await fetchActivityBenefits(),window.location.reload()},this.onClickBtn=()=>{const{authInfo:e}=this.props.crossBanner;(e=>{const{unclaimedActivityInfos:_=[],authInfo:k,traceExt:I="",sceneType:C}=e;(0,pa.NW)("htl_t_online_list_promotion_newuser_click",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),status:(null==_?void 0:_.length)>0?"0":"1",login_status:(null==k?void 0:k.isLogin)?1:0,userTag:null!=C?C:"",traceExt:I})})(this.props.crossBanner),(null==e?void 0:e.isLogin)&&(null==e?void 0:e.isMember)?this.recieveBenefits():this.$component("Account").action("register",{paramObj:{},successCallback:async()=>{this.$safeLog("logShowResult","T"),this.recieveBenefits()},failcallback:()=>{}})}}componentDidMount(){}}const isShowListNewBanner=e=>(null==e?void 0:e.specialActivityBanner)&&!(0,Pe.xb)(null==e?void 0:e.homeBanner);var Lf=k(39621).default,Nf=k(67294);class middlePoiFilters_view_View extends Lf{constructor(){super(...arguments),this.renderPoiCard=(e,_)=>{var k,I,C;const{searchCondition:R,isSwitchNewFilter:B,selectedFilterList:U}=this.props,{poiTitle:V="",poiRate:G=""}=e;if(!V)return null;const q=G?null===(k=this.$translate("key.88801001.hotel.listpage.poirecommend"))||void 0===k?void 0:k.replace("%1$s",G):"";let z=B?U:(0,J.hZ)(this.props.renderFilters)||"";const Q=(null==z?void 0:z.some((_=>{var k;return(null==_?void 0:_.filterId)===(null==e||null===(k=e.filterData)||void 0===k?void 0:k.filterId)||(null==_?void 0:_.filterId)===(null==e?void 0:e.relatedFilterId)})))||!1,ee=JSON.stringify({ubtKey:"htl_t_online_list_recommend_location_exposure",data:{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),filtername:V,filterid:null==e||null===(I=e.filterData)||void 0===I?void 0:I.filterId,filtertype:null==e||null===(C=e.filterData)||void 0===C?void 0:C.type,filterrank:_+1,cityid:(null==R?void 0:R.cityId)||""}});return Nf.createElement("div",{className:j()("poiCard",{selected:Q}),key:_,onClick:this.onClickPoiCard.bind(this,e,_,Q),"data-exposure":ee},Nf.createElement("div",{className:"poiCard-content"},V&&Nf.createElement("p",{className:j()("poiCard-title",{selected:Q})},Nf.createElement("span",null,V)),q&&Nf.createElement("p",null,Nf.createElement(qi.uB,{parentlabel:"span",txt:q,className:"poiCard-rate",childlabel:"span"}))))}}render(){const{poiFilters:e=[]}=this.props;return!e||0===e.length||e.length<5?null:Nf.createElement("div",{className:"poiFilters-wrap"},Nf.createElement("div",{className:"poiFilters-bg"}),Nf.createElement("div",{className:"poiFilters-title"},this.$translate("key.hotel.listpage.middle.recommend.popular.location")),Nf.createElement("div",{className:"poiFilters-list",ref:this.middlePoiRef},null==e?void 0:e.map(((e,_)=>this.renderPoiCard(e,_)))),Nf.createElement("div",{id:"leftPoiArrow",className:"poi-arrow left",onClick:this.onClickLeftArrow},Nf.createElement(B.Z,{type:"ic_new_back_line",className:"arrow-icon"})),Nf.createElement("div",{id:"rightPoiArrow",className:"poi-arrow right",onClick:this.onClickRightArrow},Nf.createElement(B.Z,{type:"ic_new_more_line1",className:"arrow-icon"})))}}var Df=k(88960);function updatePoiFilters(e){return{type:Df.y,payload:e}}var Af,Rf=k(67294);let xf=(0,Di.zy)((e=>{let{selectedFilterList:_,onChange:k,clearCurTypeFilter:I}=e;return{selectedFilterList:_,provideValueChange:k,clearCurTypeFilter:I}}))(Af=(0,Ni.$j)((e=>{var _,k,I;return{searchCondition:e.searchCondition,renderFilters:e.renderFilters,generalFilters:null===(_=e.renderFilters)||void 0===_?void 0:_.generalFilters,poiFilters:null===(k=e.hotelAdditionInfo)||void 0===k?void 0:k.poiFilters,isSwitchNewFilter:null===(I=e.initData)||void 0===I?void 0:I.isSwitchNewFilter}}),{updateGeneralFilters:updateGeneralFilters,updatePoiFilters:updatePoiFilters})(Af=class MiddlePoiFilters extends middlePoiFilters_view_View{constructor(e){super(e),this.isScrollAtEnd=e=>(null==e?void 0:e.scrollLeft)>=(null==e?void 0:e.scrollWidth)-(null==e?void 0:e.clientWidth),this.checkArrowShowOrHide=()=>{const e=this.middlePoiRef.current,_=document.getElementById("leftPoiArrow"),k=document.getElementById("rightPoiArrow");e.addEventListener("scroll",(()=>{this.isScrollAtEnd(e)?k.style.visibility="hidden":e.scrollWidth>e.clientWidth?k.style.visibility="visible":k.style.visibility="hidden",(null==e?void 0:e.scrollLeft)>0?_.style.visibility="visible":_.style.visibility="hidden"}))},this.checkScrollable=()=>{var e;const _=this.middlePoiRef.current,k=document.getElementById("leftPoiArrow"),I=document.getElementById("rightPoiArrow"),C=(null==_||null===(e=_.children[0])||void 0===e?void 0:e.offsetHeight)/2;k.style.bottom=C+"px",I.style.bottom=C+"px",_.scrollWidth>_.clientWidth?I.style.visibility="visible":I.style.visibility="hidden",_.scrollLeft>0?k.style.visibility="visible":k.style.visibility="hidden"},this.onClickLeftArrow=()=>{const{searchCondition:e}=this.props;logListMiddlePoiCardSlide({cityId:(null==e?void 0:e.cityId)||""});const _=this.middlePoiRef.current,k=_.scrollLeft,I=Array.from(_.children).map((e=>e.offsetWidth+16));let C=0,R=0;for(let e=I.length-1;e>=0;e--)if(R+=I[e],R>_.clientWidth){C=k-(R-I[e]);break}_.scrollTo({left:C,behavior:"smooth"})},this.onClickRightArrow=()=>{const{searchCondition:e}=this.props;logListMiddlePoiCardSlide({cityId:(null==e?void 0:e.cityId)||""});const _=this.middlePoiRef.current,k=_.scrollLeft,I=Array.from(_.children).map((e=>e.offsetWidth+16));let C=0,R=0;for(let e=0;e<I.length;e++)if(R+=I[e],R>_.clientWidth){C=k+R-I[e];break}_.scrollTo({left:C,behavior:"smooth"})},this.getAllFilters=e=>{let _=[];return Object.keys(e).forEach((k=>{var I,C,R;"41"==k?null===(I=e[41])||void 0===I||null===(C=I.lineList)||void 0===C||C.forEach((e=>{_=_.concat((null==e?void 0:e.siteList)||[])})):_=_.concat(null===(R=e[k])||void 0===R?void 0:R.list)})),_},this.getSelectedFilter=e=>{var _;const{generalFilters:k={}}=this.props;return{selectedFilter:(null===(_=this.filterList)||void 0===_?void 0:_.filter((_=>(null==_?void 0:_.filterId)===(null==e?void 0:e.filterId))))||[],selectedKeys:Object.keys(k).filter((_=>{let I=null;var C,R,j,B;"41"===_?null===(C=k[41])||void 0===C||null===(R=C.lineList)||void 0===R||R.forEach((_=>{var k;(null==_||null===(k=_.siteList)||void 0===k?void 0:k.some((_=>(null==_?void 0:_.filterId)===(null==e?void 0:e.filterId))))&&(I=_)})):(null===(j=k[_])||void 0===j||null===(B=j.list)||void 0===B?void 0:B.some((_=>(null==_?void 0:_.filterId)===(null==e?void 0:e.filterId))))&&(I=k[_]);return null!==I}))}},this.onClickPoiCard=(e,_,k)=>{const{searchCondition:I,provideValueChange:C,isSwitchNewFilter:R,clearCurTypeFilter:j}=this.props;if((e=>{var _,k;const{item:I,index:C,cityId:R}=e;(0,pa.NW)("htl_t_online_list_recommend_location_click",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),filtername:(null==I?void 0:I.poiTitle)||"",filterid:null==I||null===(_=I.filterData)||void 0===_?void 0:_.filterId,filtertype:null==I||null===(k=I.filterData)||void 0===k?void 0:k.type,filterrank:C+1,cityid:R||""})})({item:e,index:_,cityId:(null==I?void 0:I.cityId)||""}),R){var B;if(k)j({targetFilterId:null==e||null===(B=e.filterData)||void 0===B?void 0:B.filterId});else C({value:e.filterData})}else{var U,V;const _=Object.assign({},null==e?void 0:e.filterData,{filterId:null==e||null===(U=e.filterData)||void 0===U?void 0:U.filterId,status:1,text:null==e?void 0:e.poiTitle}),{selectedFilter:I,selectedKeys:C}=this.getSelectedFilter(_);this.props.updateGeneralFilters({filters:k?[]:I,type:null==C?void 0:C[0]});const R=(null===(V=this.props.poiFilters)||void 0===V?void 0:V.filter((_=>{var k,I;return(null==_||null===(k=_.filterData)||void 0===k?void 0:k.filterId)!==(null==e||null===(I=e.filterData)||void 0===I?void 0:I.filterId)})))||[];this.props.updatePoiFilters([e,...R])}},this.state={},this.filterList=[],this.middlePoiRef=Rf.createRef()}componentDidMount(){this.filterList=this.getAllFilters(this.props.generalFilters),this.checkScrollable(),this.checkArrowShowOrHide(),window.addEventListener("resize",this.checkScrollable)}componentWillUnmount(){const e=this.middlePoiRef.current;window.removeEventListener("resize",this.checkScrollable),e.removeEventListener("scroll",this.checkArrowShowOrHide)}})||Af)||Af;var jf=k(39621).default,Bf=k(67294);class InBoundModalView extends jf{constructor(e){super(e),this.render=()=>{var e;const{inboundBanner:_}=this.props;return Bf.createElement("div",{className:"inbound-modal-content"},Bf.createElement("div",{className:"inbound-modal-image"}),Bf.createElement("div",{className:"inbound-modal-middle"},Bf.createElement("ul",null,null==_||null===(e=_.details)||void 0===e?void 0:e.map(((e,_)=>{var k;return Bf.createElement("li",{key:_},Bf.createElement("div",{className:"inbound-modal-middle-title"},Bf.createElement(B.Z,{type:"advantage_yes",className:"inbound-modal-descIcon"}),Bf.createElement("span",{className:"inbound-modal-middle-titlespan"},null==e?void 0:e.title),Bf.createElement("ul",null,null==e||null===(k=e.contents)||void 0===k?void 0:k.map(((e,_)=>Bf.createElement("li",{key:_},Bf.createElement("div",{className:"inbound-modal-middle-content"},Bf.createElement("p",{className:"inbound-modal-middle-content-icon"},"·"),Bf.createElement("p",{className:"inbound-modal-middle-content-p"},e))))))))}))),Bf.createElement("div",{class:"white-gradient"})))}}}var Mf=k(39621).default,Ff=k(67294);class FriendlyBannerView extends Mf{constructor(e){super(e)}render(){var e,_,k,I,C,R,j,B,U,V,G,z,J,Q,ee,te,ne,re,oe,ie,ae;const{inboundBanner:le={}}=this.props;if((0,Pe.xb)(le))return null;const{title:se="",contents:ce=[]}=le,ue=JSON.stringify({ubtKey:"htl_t_online_list_htllist_friendlyhtl_exposure",data:{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),regionname:null===(e=this.props)||void 0===e||null===(_=e.searchBarData)||void 0===_||null===(k=_.search)||void 0===k?void 0:k.resultWord,regionid:(null===(I=this.props)||void 0===I||null===(C=I.searchBarData)||void 0===C||null===(R=C.search)||void 0===R||null===(j=R.city)||void 0===j?void 0:j.geoCode)||(null===(B=this.props)||void 0===B||null===(U=B.searchBarData)||void 0===U||null===(V=U.search)||void 0===V||null===(G=V.province)||void 0===G?void 0:G.geoCode)||(null===(z=this.props)||void 0===z||null===(J=z.searchBarData)||void 0===J||null===(Q=J.search)||void 0===Q||null===(ee=Q.country)||void 0===ee?void 0:ee.geoCode)||(null===(te=this.props)||void 0===te||null===(ne=te.searchBarData)||void 0===ne||null===(re=ne.search)||void 0===re?void 0:re.resultType)||null,regiontype:null===(oe=this.props)||void 0===oe||null===(ie=oe.searchBarData)||void 0===ie||null===(ae=ie.search)||void 0===ae?void 0:ae.resultType}}),de=(0,q.JT)(this);return Ff.createElement("div",{className:"FriendlyBanner ".concat(de?"version-b":""),onClick:this.activeInboundModal,"data-exposure":ue},Ff.createElement("div",{className:"friendlyBanner-left"},Ff.createElement("div",{className:"friendlyBanner-up"},Ff.createElement("img",{className:"friendlyBanner-pandaIcon",src:"https://dimg04.tripcdn.com/images/1re1e12000f3ia5caBF98.png"}),Ff.createElement("div",{className:"friendlyBanner-title"},se&&Ff.createElement("span",null,se),Ff.createElement("span",{className:"friendlyBanner-show-details"},this.$translate("key.88801001.hotel.china.travel.show.detail")))),(null==ce?void 0:ce.length)>0&&Ff.createElement("div",{className:"friendlyBanner-content"},null==ce?void 0:ce.map(((e,_)=>Ff.createElement("p",{className:"friendlyBanner-desc",key:_},Ff.createElement(Ee.Z,{type:"advantage_yes",className:"friendlyBanner-descIcon"}),e))))))}}var Hf,Kf=k(24499).default,Uf=k(67294);let Zf=(0,Ni.$j)((e=>{var _;return{inboundBanner:null===(_=e.hotelAdditionInfo)||void 0===_?void 0:_.inboundBanner,searchBarData:e.searchBarData}}))(Hf=class FriendlyBanner extends FriendlyBannerView{constructor(e){super(e),this.activeInboundModal=()=>{var e,_,k,I,C,R,j,B,U;const{inboundBanner:V,searchBarData:G}=this.props;Kf.show({className:"inbound-modal",title:Uf.createElement(Uf.Fragment,null,Uf.createElement("img",{className:"inbound-modal-pandaIcon",src:"https://dimg04.tripcdn.com/images/1re1e12000f3ia5caBF98.png"}),Uf.createElement("span",{className:"custom-title"},null==V?void 0:V.title)),content:Uf.createElement(InBoundModalView,{inboundBanner:V}),button:[{text:this.$translate("key.88801001.hotel.china.travel.hover.book")}],close:!0,maskClosable:!0});const q={locale:null===H.default||void 0===H.default?void 0:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),regionname:null==G||null===(e=G.search)||void 0===e?void 0:e.resultWord,regionid:(null==G||null===(_=G.search)||void 0===_||null===(k=_.city)||void 0===k?void 0:k.geoCode)||(null==G||null===(I=G.search)||void 0===I||null===(C=I.province)||void 0===C?void 0:C.geoCode)||(null==G||null===(R=G.search)||void 0===R||null===(j=R.country)||void 0===j?void 0:j.geoCode)||(null==G||null===(B=G.search)||void 0===B?void 0:B.resultType)||null,regiontype:null==G||null===(U=G.search)||void 0===U?void 0:U.resultType};this.$safeLog("logInboundBannerClick",q)},this.ubtMapping={logInboundBannerClick:logInboundBannerClick}}})||Hf;var Vf=k(39621).default,Wf=k(67294);function view_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function view_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?view_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):view_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class v8longList_view_View extends Vf{constructor(e){super(e),this.renderToggleSoldOutHotels=()=>{const{isFold:e}=this.state;return Wf.createElement("div",{className:"toggle-sold-out-hotels",ref:this.toggleRef,onClick:this.toggleSoldOutClick},Wf.createElement("span",{className:"toggle-title"},e?this.$translate("key.hotel.list.page.soldout.fold.online"):this.$translate("key.hotel.list.page.soldout.unfold.online")),Wf.createElement(B.Z,{className:"icon-circle-arrow",type:e?"ic_new_showmore_line":"ic_new_showless_line"}))},this.uniqueBannerCard=e=>{const{index:_,data:k,CardComp:I,prefix:C,isNormal:R}=e,j=this.props.experienceMemberReward;let B="first".concat(C,"Index"),H="".concat(_).concat(R);return void 0===this[B]&&(this[B]=H),"EncourageCard"===C?Wf.createElement(I,{encourage:k}):("LoginCard"!==C||(0,Pe.xb)(j))&&H===this[B]?Wf.createElement(I,{data:k}):null},this.renderItem=(e,_,k,I)=>{var R,j,B,U,V,G,q,z,J,Q;const{needFlodedIndex:ee,isFold:te}=this.state,{fontColor:ne,controllerUbtTraceLogId:re,toggleShowMap:oe,longList:ie,searchCondition:ae}=this.props,{hotelListAddtionInfo:le={},ResponseStatus:se,ubtTraceInfo:ce}=ie||{},{tags:ue=[]}=e,{subStamp:de=3001547}=le;if(k&&te&&_>ee)return null;let pe=[],he=[],fe=[];ue.map((e=>{"ACTIVITY"===e.tagTitle&&pe.push(e)})),pe.map((e=>{if(4==e.tagPosition&&"undefined"!=typeof window){var _=document.createElement("span");_.setAttribute("style","visibility: hidden"),_.setAttribute("style","fontSize:12px"),_.innerText=e.name,document.body.appendChild(_),_.offsetWidth<132?he.push(e):fe.unshift(e),document.body.removeChild(_)}289==e.tagPosition&&fe.push(e)}));let me=(0,ci.Z)(e,"banner",{}),ge={1:{CardComp:Wi,prefix:"SoldOutCard"},2:{CardComp:Demo,prefix:"AdCard"},3:{CardComp:WhyCard,prefix:"WhyCard"},5:{CardComp:ba,prefix:"EncourageCard"}};const ve={hotelnum:(null==le?void 0:le.hotelTotalNum)||"",qid:(null==se?void 0:se.Extension.CLOGGING_TRACE_ID)||"",checkOut:(null===(R=this.props.searchCondition)||void 0===R?void 0:R.checkOut)||"",checkIn:(null===(j=this.props.searchCondition)||void 0===j?void 0:j.checkIn)||"",adult:(null===(B=this.props.searchCondition)||void 0===B?void 0:B.adult)||0,children:(null===(U=this.props.searchCondition)||void 0===U?void 0:U.child)||0,user_country:H.default.getByKey("cargo.locale",this.ctx)||"",keyword:(null===(V=this.props.searchCondition)||void 0===V?void 0:V.keyword)||"",price_currency:H.default.getByKey("cargo.currency",this.ctx)||"",price_type:(null===(G=this.props.initData)||void 0===G||null===(q=G.filterCondition)||void 0===q?void 0:q.priceType)||0,reqfilterlist:(null===(z=this.props.initData)||void 0===z?void 0:z.filterCondition)||[],sort:(null===(J=this.props.searchCondition)||void 0===J?void 0:J.sortType)||"",methoid:ce&&ce.hotel_result_show_methodid||""},ye=Wf.createElement(Ip,(0,C.Z)({},e,{ubtLogData:ve,fontColor:ne,controllerUbtTraceLogId:re,pushExposureHotel:this.pushExposureHotel,card:e,toggleShowMap:oe,type:I,index:_,firstListCardLog:this.firstListCardLog.bind(this),activityTagListA:he,activityTagListB:fe,subStamp:de,imgLoaded:this.imgLoaded.bind(this),expResList:(null===(Q=this.props.longList)||void 0===Q?void 0:Q.expResList)||[],searchCondition:ae}));return Wf.createElement(Wf.Fragment,{key:_},Wf.createElement("li",null,ye),me.type&&Wf.createElement("li",null,(()=>ge[me.type]?this.uniqueBannerCard(Object.assign({index:_,data:me,isNormal:k},ge[me.type])):null)()),k&&ee===_?this.renderToggleSoldOutHotels():null)},this.highlightText=e=>e.replace(/\{0\}/g,'<span class="highLightText">').replace(/\{\/0\}/g,"</span>"),this.renderTip=()=>{var e,_,k,I,C,R;return(0,Pe.xb)(null===(e=this.props.longList)||void 0===e||null===(_=e.hotelListAddtionInfo)||void 0===_||null===(k=_.searchCompensateInfo)||void 0===k?void 0:k.oneResultClueMessage)?null:Wf.createElement("p",{className:"single-hotel-tip"},null===(I=this.props.longList)||void 0===I||null===(C=I.hotelListAddtionInfo)||void 0===C||null===(R=C.searchCompensateInfo)||void 0===R?void 0:R.oneResultClueMessage)},this.showMoreHotel=()=>{if(!this.mainListExposured){const e={locale:H.default.getByKey("cargo.locale",this.ctx)};this.$safeLog("logFullListBottom",e),this.mainListExposured=!1}const e=(0,ci.Z)(this.props,"moreHotel.list",[]),_=(0,ci.Z)(this.props,"moreHotel.newTitle",""),k=(0,ci.Z)(this.props,"moreHotel.title",""),I=_||k;return Wf.createElement(Wf.Fragment,null,I?Wf.createElement("p",{className:"more-hotel-title font-bold",dangerouslySetInnerHTML:{__html:this.highlightText(I)}}):null,(0,si.kJ)(e)&&e.map(((e,_)=>this.renderItem(e,_,!1,"more"))))},this.memberReward=(e,_)=>{const{crossBanner:k={}}=this.props;return Wf.createElement(MemberReward,{data:e,initData:_,crossBanner:k})},this.newUserBanner=e=>Wf.createElement(NewUserBannerList,{crossBanner:e}),this.recommendationMapping=e=>{const{hotelList:_=[]}=this.props;_.forEach((_=>{var k;if(e.target.id==(null===(k=_.hotelBasicInfo)||void 0===k?void 0:k.hotelId)){var I,C,R;let e={},k=[],j={};e.page=H.default.getByKey("pageId",this.ctx),e.cancelpriceinfo=(null===(I=_.hotelBasicInfo)||void 0===I?void 0:I.originPrice)||0,e.locale=H.default.getByKey("cargo.locale",this.ctx)||"",e.listqueryid=(0,Ti.RL)()||"",j.masterhotelid=(null===(C=_.hotelBasicInfo)||void 0===C?void 0:C.hotelId)||0,j.cityid=(null===(R=_.positionInfo)||void 0===R?void 0:R.cityId)||0,_.tags.forEach((e=>{if("ACTIVITY"===(null==e?void 0:e.tagTitle)){let _={tagfeatureid:e.tagId,tagid:e.subTagId,tagposition:e.tagPosition,tagtitle:e.tagTitle};k.push(_)}})),j.htl_taglist=k,e.taginfo=j,k.length>0&&this.activityRecommendation(e)}}))},this.handleScroll=e=>{var _;if(null===(_=window)||void 0===_?void 0:_.IntersectionObserver){var k=this.factoryInstance();e.forEach((e=>{var _,I,C,R,j,B;0==this.dataMap.get(null===(_=e.hotelBasicInfo)||void 0===_?void 0:_.hotelId)&&document.getElementById(null===(I=e.hotelBasicInfo)||void 0===I?void 0:I.hotelId)&&k.observe(document.getElementById(null===(j=e.hotelBasicInfo)||void 0===j?void 0:j.hotelId));1==this.dataMap.get(null===(C=e.hotelBasicInfo)||void 0===C?void 0:C.hotelId)&&document.getElementById(null===(R=e.hotelBasicInfo)||void 0===R?void 0:R.hotelId)&&k.unobserve(document.getElementById(null===(B=e.hotelBasicInfo)||void 0===B?void 0:B.hotelId))}))}},this.normalHotel=()=>{const e=(0,ci.Z)(this.props,"hotelList",[]),_=(0,ci.Z)(this.props,"popCommonLoginComponentAction",(()=>{})),k=(0,ci.Z)(this.props,"commonBannerSsrData",{}),I=this.props.tripcoinsReward,C=this.props.experienceMemberReward,R=this.props.initData,{crossBanner:j,bannerLoaded:B,hotelAdditionInfo:U}=this.props,V=isShowListNewBanner(j),G=B&&(!(0,Pe.xb)(C)||I||V),z=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx));return e.length>0&&"undefined"!=typeof window&&window.addEventListener("scroll",this.handleScroll.bind(this,e)),e.length?e.map(((e,I)=>{var B,H,J;return 0===I?Wf.createElement(Wf.Fragment,{key:I},this.renderItem(e,I,!0,"normal"),Wf.createElement(CommonOnlineListBanner,{popCommonLoginComponentAction:_,commonBannerSsrData:k})):1===I&&G?Wf.createElement(Wf.Fragment,{key:I},this.renderItem(e,I,!0,"normal"),V?this.newUserBanner(j):this.memberReward(C,R)):I!==((null==U||null===(B=U.inboundBanner)||void 0===B?void 0:B.index)||3)-1||(0,Pe.xb)(null==U?void 0:U.inboundBanner)?(0,q.$3)(this)&&!z&&9===I&&(null===(H=this.props.hotelAdditionInfo)||void 0===H||null===(J=H.poiFilters)||void 0===J?void 0:J.length)>0?Wf.createElement(Wf.Fragment,{key:I},this.renderItem(e,I,!0,"normal"),Wf.createElement(xf,null)):this.renderItem(e,I,!0,"normal"):Wf.createElement(Wf.Fragment,{key:I},this.renderItem(e,I,!0,"normal"),Wf.createElement(Zf,null))})):Wf.createElement(Bp,null)},this.metaHotel=()=>{var e,_,k,I,R,j,B,U,V,G,q,z,J,Q,ee,te;const{metaHotel:ne,fontColor:re,controllerUbtTraceLogId:oe,toggleShowMap:ie}=this.props,ae=(0,ci.Z)(ne,"card",{}),le={hotelnum:(null===(e=this.props.longList)||void 0===e||null===(_=e.hotelListAddtionInfo)||void 0===_?void 0:_.hotelTotalNum)||"",qid:(null===(k=this.props.longList)||void 0===k||null===(I=k.ResponseStatus)||void 0===I?void 0:I.Extension.CLOGGING_TRACE_ID)||"",checkOut:(null===(R=this.props.searchCondition)||void 0===R?void 0:R.checkOut)||"",checkIn:(null===(j=this.props.searchCondition)||void 0===j?void 0:j.checkIn)||"",adult:(null===(B=this.props.searchCondition)||void 0===B?void 0:B.adult)||0,children:(null===(U=this.props.searchCondition)||void 0===U?void 0:U.child)||0,user_country:H.default.getByKey("cargo.locale",this.ctx)||"",keyword:(null===(V=this.props.searchCondition)||void 0===V?void 0:V.keyword)||"",price_currency:H.default.getByKey("cargo.currency",this.ctx)||"",price_type:(null===(G=this.props.initData)||void 0===G||null===(q=G.filterCondition)||void 0===q?void 0:q.priceType)||0,reqfilterlist:(null===(z=this.props.initData)||void 0===z?void 0:z.filterCondition)||[],sort:(null===(J=this.props.searchCondition)||void 0===J?void 0:J.sortType)||"",methoid:(null===(Q=this.props.longList)||void 0===Q||null===(ee=Q.ubtTraceInfo)||void 0===ee?void 0:ee.hotel_result_show_methodid)||""},{tags:se=[]}=ne;let ce=[],ue=[],de=[];se.map((e=>{"ACTIVITY"===e.tagTitle&&ce.push(e)})),ce.map((e=>{if(4==e.tagPosition&&"undefined"!=typeof window){var _=document.createElement("span");_.setAttribute("style","visibility: hidden"),_.setAttribute("style","fontSize:12px"),_.innerText=e.name,document.body.appendChild(_),_.offsetWidth<132?ue.push(e):de.unshift(e),document.body.removeChild(_)}289==e.tagPosition&&de.push(e)}));let pe=view_objectSpread(view_objectSpread({},ne),{},{fontColor:re,controllerUbtTraceLogId:oe,pushExposureHotel:this.pushExposureHotel,type:"meta",card:ne,roomList:ne.roomList,preSale:ne.preSale,multiDateRecommend:null==ne||null===(te=ne.rawData)||void 0===te?void 0:te.multiDateRecommend,toggleShowMap:ie,ubtLogData:le,activityTagListA:ue,activityTagListB:de});return Object.assign(pe,view_objectSpread({},ae),{trace:Object.assign(pe.trace,ae.trace)}),Wf.createElement("li",null,Wf.createElement(Ip,(0,C.Z)({},pe,{firstListCardLog:this.firstListCardLog.bind(this)})))},this.getKakaoSwitch=()=>{var e,_;return!!(null===(e=this.kakaoRef)||void 0===e||null===(_=e.current)||void 0===_?void 0:_.kakaoSwitch)},this.renderShipLoading=e=>e?Wf.createElement("div",{className:"loading"},Wf.createElement("div",{className:"search-ship"}),Wf.createElement("span",null,this.$translate("resx.onlinehotelresource.list_searchmorehotels"))):null,this.renderBtnLoading=e=>Wf.createElement("div",{className:"list-btn-more"},Wf.createElement("div",{className:"list-btn-more_content",onClick:this.moreSearchClick},e?Wf.createElement("div",{className:"search-btn-loading"}):null,Wf.createElement("span",null,e?this.$translate("resx.onlinehotelresource.list_searchmorehotels"):this.$translate("resx.onlinehotelresource.list_seemorehotels")))),this.renderLoadButton=()=>{const{lastPage:{recommendLastPage:e,normalLastPage:_},ajaxLoad:{loading:k,normalPageNo:I,recommendPageNo:C}}=this.props,{isFold:R,showFoldedBar:j}=this.state,B=(0,ci.Z)(this.props,"ajaxLoad.type","")===zd.L7.normal?I:C,renderNothing=()=>Wf.createElement("p",{className:"nothing"},this.$translate("resx.onlinehotelresource.list_searchdone"));if(this.pageNoPosition!==B){const e={locale:H.default.getByKey("cargo.locale",this.ctx)||""};this.$safeLog("logFullListBottom",e),this.pageNoPosition=B}if(j){if(R&&e||_&&e)return renderNothing()}else if(e)return renderNothing();return Wf.createElement(Wf.Fragment,null,Wf.createElement("div",{className:"none-ref",style:{height:0}}),this.loadingPlaceholder(k))},this.renderList=()=>{const e=(0,ci.Z)(this.props,"lastPage.normalLastPage",""),{metaHotel:_,ajaxLoad:{loading:k}}=this.props,{isFold:I,showFoldedBar:C}=this.state;return Wf.createElement(Wf.Fragment,null,(0,si.Ew)(_)?null:this.metaHotel(),this.normalHotel(),this.renderTip(),!C||e||I?null:this.renderLoadButton(),I||e?this.showMoreHotel():null,I||e||!C?this.renderLoadButton():null,Wf.createElement(Kp,null))},this.renderPlaceholder=()=>new Array(20).fill("").map(((e,_)=>Wf.createElement("li",{key:_},Wf.createElement(ListHolder,{data:e})))),this.loadingPlaceholder=e=>e?new Array(3).fill("").map(((e,_)=>Wf.createElement("li",{key:_},Wf.createElement(ListHolder,{data:e})))):null,this.showFilter=()=>{let[e]=document.getElementsByClassName("filter-wrap"),[_]=document.getElementsByClassName("filter-mask"),[k]=document.getElementsByClassName("mapfilter-wrap-v8"),[I]=document.getElementsByClassName("quickfilter"),[C]=document.getElementsByClassName("m-recentHotels");_&&(_.style.display="block"),e&&(e.style.display="block")&&(e.className+=" filter-wrap-small"),k&&(k.style.display="none"),I&&(I.style.display="none"),C&&(C.style.marginBottom=0)},this.redirectMap=()=>{let e,_=/&?lat=((-?\d+)(\.\d+)|(-?\d+))/gi,k=/&?lon=((-?\d+)(\.\d+)|(-?\d+))/gi;if(location&&~location.pathname.toLowerCase().indexOf("/searchresults"))try{const{metaHotel:{card:{position:{lat:I,lng:C}}}}=this.props;let R=location.search.replace(_,"").replace(k,"");e="//".concat(location.host,"/hotels/map").concat(R,"&lat=").concat(I,"&lon=").concat(C)}catch(I){let C=location.search.replace(_,"").replace(k,"");e="//".concat(location.host,"/hotels/map").concat(C,"&lat=0&lon=0")}else e="//".concat(location.host,"/hotels/map").concat(location.search);this.$safeLog("logListpageShowMap"),location.href=e},this.renderQuickFilter=()=>Wf.createElement("div",{className:"small-filter ",style:{dispaly:"none"}},Wf.createElement("div",{className:"f-left",onClick:this.showFilter.bind(this)},Wf.createElement("span",null,Wf.createElement(B.Z,{type:"ic_new_filter_line"})),this.$translate("key.hotel.list.page.filter")||"Filter"),Wf.createElement("div",{className:"f-split"}),Wf.createElement("div",{className:"f-right",onClick:this.redirectMap.bind(this)},Wf.createElement("span",null,Wf.createElement(B.Z,{type:"ic_new_map_line"})),this.$translate("key.hotel.list.page.map")||"Map")),this.filterChange=e=>{this.props.dispatch(actionCreator_updateGeneralFilters({filters:[e],type:"17"}))},this.onMouseOver=e=>{var _;e.preventDefault(),e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation();const{renderFilters:k={}}=this.props,I=((null==k||null===(_=k.generalFilters[17])||void 0===_?void 0:_.list)||[]).find((e=>e&&1===e.status)),{value:C}=I;if("3"!==C&&"4"!==C&&"1"!==C)return;let R=this.$translate("key.hotel.sort.explanation");"3"!==C&&"4"!==C||(R=this.$translate("key.hotel.listpage.pricerank.hover")),this.$component("ToolTip").action("show",{content:Wf.createElement("p",{className:"rec-explain"},R),target:e.target,triPlacement:"middle",dark:!1,zIndex:9999})},this.onMouseOut=()=>{this.$component("ToolTip").action("hide")},this.hoverContent=()=>Wf.createElement("div",{className:"cma-content"},Wf.createElement("h3",null,Wf.createElement("strong",null,this.$translate("key.hotel.list.page.cma.sort.explanation.title.online"))),Wf.createElement("p",null,this.$translate("key.hotel.list.page.cma.sort.explanation.detail1.online")),Wf.createElement("p",null,this.$translate("key.hotel.list.page.cma.sort.explanation.detail2.online"))),this.mouseOver=e=>{const _=this.$component("ToolTip"),k={content:this.hoverContent(),target:e.target,triPlacement:"middle",dark:!1,zIndex:10002};_.action("show",k)},this.mouseOut=()=>{this.$component("ToolTip").action("hide")},this.renderHead=()=>{const{breathing:e=!1,showCma:_,initData:k}=this.props,{isSwitchNewFilter:I}=k||{};return Wf.createElement("li",{className:"long-list-head"},Wf.createElement("article",null,Wf.createElement("div",{className:"filterWrapper"},I?Wf.createElement(Tl,{breathing:e,showCma:_}):Wf.createElement(il,{breathing:e,showCma:_}))),Wf.createElement(wh,{curHeight:"100%"}))},this.dataMap=new Map,this.mainListExposured=!1,this.fullListExposured=!1,this.pageNoPosition=-1}getRoomList(e){var _,k;return[{facility:(null==e||null===(_=e.quality)||void 0===_?void 0:_.map((e=>({content:e.text,type:Xi}))))||null,policy:(null==e||null===(k=e.encourage)||void 0===k?void 0:k.freeCancelTag)?[{content:e.encourage.freeCancelTag,type:ra}]:null,promotion:e.promotion,money:e.money,base:e.base}]}factoryInstance(){if(!e)var e=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>.8&&0==this.dataMap.get(Number(e.target.id))&&(this.dataMap.set(Number(e.target.id),!0),this.recommendationMapping(e))}))}),{threshold:[.8]});return e}render(){var e,_;const{encourage:k,announcements:I,ajaxLoad:{breathing:C},hotelList:R=[],crossBanner:j={},hasCticket:B=""}=this.props;this.dataMap.size<1&&R.length&&R.forEach((e=>{var _;this.dataMap.set(null===(_=e.hotelBasicInfo)||void 0===_?void 0:_.hotelId,!1)}));const H=null==I?void 0:I.filter((e=>e.linkUrl.indexOf("travel-restrictions-covid-19")>-1||e.linkUrl.indexOf("trip-com-update-on-novel-coronavirus-country-region-entry-restrictions")>-1)),U=null==I?void 0:I.filter((e=>-1==e.linkUrl.indexOf("travel-restrictions-covid-19")&&-1==e.linkUrl.indexOf("trip-com-update-on-novel-coronavirus-country-region-entry-restrictions"))),V=(0,q.JT)(this);return Wf.createElement("ul",{className:"long-list long-list-v8 ".concat(V?"version-b":""," ")},this.renderHead(),Wf.createElement(Wf.Fragment,null,(null==I?void 0:I.length)?Wf.createElement("li",null,!!(null==H?void 0:H.length)&&Wf.createElement(v8Noticification,{infoItems:H}),!!(null==U?void 0:U.length)&&Wf.createElement(vh,{infoItems:U,background:"orange",className:"m-announcement"})):Wf.createElement(ba,{encourage:k})),Wf.createElement(Wf.Fragment,null,!(0,Pe.xb)(null==j?void 0:j.normalBannerInfo)&&!(null==j?void 0:j.specialActivityBanner)&&(null==j||null===(e=j.normalBannerInfo)||void 0===e||null===(_=e.bannerList)||void 0===_?void 0:_.length)>0?Wf.createElement("li",null,Wf.createElement(Ah,{crossBanner:j,hasCticket:B})):null),C?this.renderPlaceholder():this.renderList())}}var Gf=k(72307),$f=k.n(Gf),qf=k(75990);function resetLongListData(e){return{type:qf.ji,payload:e}}var zf=k(38484);const toggleAjaxLoad=e=>({type:"TOGGLE_AJAX_LOADING",payload:e}),toggleAjaxPend=e=>({type:"TOGGLE_AJAX_PENDING",payload:e}),toggleAjaxBreath=e=>({type:"TOGGLE_AJAX_BREATHING",payload:e}),addAjaxPageNo=e=>({type:"ADD_AJAX_PAGENO",payload:e}),restAjaxPageNo=e=>({type:"RESET_AJAX_PAGENO",payload:e}),toggleAjaxLoadType=e=>({type:"TOGGLE_AJAX_LOAD_TYPE",payload:e});var Yf=k(8924);var Jf=k(65662);function log_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function log_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?log_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):log_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const logNoHotelReason=e=>{(0,te.fU)({logKey:"ibu_htl_".concat((0,Le.h8)(),"_nohotel_show_reason"),logDesc:"nohotel_show_reason",logValue:{message:e&&e.message||"",stack:e&&e.stack||""}})},logNoHotel=e=>{(0,te.fU)({logKey:"ibu_htl_".concat((0,Le.h8)(),"_nohotel_show"),logDesc:"nohotel_show",logValue:{reason:e}})},logClickFilterHotelListResult=(e,_)=>{(0,te.i4)(de.UBT_TYPE.TRACE,"htl_t_online_list_filter_result_click",{page:H.default.getByKey("pageId"),regionid:null==_?void 0:_.regionId,regiontype:null==_?void 0:_.regionType,regionname:null==_?void 0:_.regionName,listtracelogid:null==_?void 0:_.traceLogID,isnoresult:null==_?void 0:_.isNoResult,issersucceed:null==_?void 0:_.isserSucceed,hotelnum:null==_?void 0:_.hotelTotalNum,is_fastfilter:"",is_myLocation:"F",listqueryid:null==_?void 0:_.listQueryId,listFiliterDispatchId:"",filterlist:null!=e?e:[]})},Xf=function logSecondLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const _=+new Date-e.loadtime;(0,te.i4)(de.UBT_TYPE.TRACE,"ibu_htl_t_online_mainpage_secondary_load",{page:H.default.getByKey("pageId"),cityid:H.default.getByKey("initData.searchCondition.cityId"),loadstatus:e.loadstatus||0,loadtime:_,masterhotelid:0,locale:H.default.getByKey("locale"),actionname:e.actionname||5,traceLogID:e.traceLogID||""})},Qf=function logListNoHotel(){var e,_,k;let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C="htl_t_online_listpage_nohotel_show",R={page:H.default.getByKey("pageId"),locale:H.default.getByKey("locale")||(0,Ne.Z)("locale"),position:I.position,traceLogId:null!==(e=I.traceLogId)&&void 0!==e?e:"",reason:null!==(_=I.reason)&&void 0!==_?_:0,pageindex:null!==(k=I.pageindex)&&void 0!==k?k:0};"10320668148"!==H.default.getByKey("pageId")&&(C="htl_t_online_metapage_nohotel_show",delete R.pageindex,R=log_objectSpread(log_objectSpread({},R),{},{masterhotelid:(0,Ne.Z)("hotelid"),allianceid:(0,Ne.Z)("Allianceid"),sid:(0,Ne.Z)("Sid")})),(0,te.i4)(de.UBT_TYPE.TRACE,C,R)};var em=k(28063);const toggleShouldReplaceUrl=e=>({type:em.K,payload:e});var tm=k(21915);var nm=k(17169);const updateRecommendTimes=e=>({type:nm.h,payload:e});var rm=k(50030),om=k(66811);const refreshStrategy=(e,_)=>{const k=H.default.getByKey(_)||[];for(let _=0;_<k.length;_++)if(e<=k[_].stageTime||_===k.length-1)return k[_].interval;return 6e4},im=function getRefreshTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"qconfigData.dynamicRefreshTimer";const k=Date.now();return refreshStrategy(k-e,_)};var am=k(3438);function updataBatchParams(e){return{type:am.p,payload:e}}var lm=k(54547),sm=k(48467).default;function dispatcher_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function dispatcher_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?dispatcher_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):dispatcher_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const isFirstPage=e=>e&&e.searchCondition&&1===e.searchCondition.pageNo;let cm=!0;const getRegionInfo=e=>{var _,k,I,C,R,j;return(null==e||null===(_=e.city)||void 0===_?void 0:_.geoCode)>0?{regionId:null==e||null===(C=e.city)||void 0===C?void 0:C.geoCode,regionType:1,regionName:null==e?void 0:e.resultWord}:(null==e||null===(k=e.province)||void 0===k?void 0:k.geoCode)>0?{regionId:null==e||null===(R=e.province)||void 0===R?void 0:R.geoCode,regionType:2,regionName:null==e?void 0:e.resultWord}:(null==e||null===(I=e.country)||void 0===I?void 0:I.geoCode)>0?{regionId:null==e||null===(j=e.country)||void 0===j?void 0:j.geoCode,regionType:3,regionName:null==e?void 0:e.resultWord}:{regionId:"",regionType:0,regionName:null==e?void 0:e.resultWord}},getLogFilters=e=>null==e?void 0:e.map((e=>({filtertype:null==e?void 0:e.type,filtername:"",filtertitle:"",filtersubtype:null==e?void 0:e.subType,filterid:null==e?void 0:e.filterId,is_recommend:"F"}))),updateLongList=(e,_)=>k=>{var I,C,R,j,B,U,V,G,q,z,Q,ee,ne,re,oe,ie,ae;const{loading:le,pending:se,breathing:ce,resetWholePage:ue,resetRecommend:de,ssrHotelSearch:pe,checkBatchRefresh:he,isReplaceUrl:fe}=e,me=Boolean(pe);if(delete e.ssrHotelSearch,delete e.loading,delete e.pending,delete e.breathing,delete e.resetWholePage,delete e.resetRecommend,delete e.checkBatchRefresh,delete e.isReplaceUrl,le&&k(toggleAjaxLoad(Math.max((null===$a.Z||void 0===$a.Z||null===(I=$a.Z.getState())||void 0===I||null===(C=I.ajaxLoad)||void 0===C?void 0:C.loading)+1||0,1))),se&&k(toggleAjaxPend(Math.max((null===$a.Z||void 0===$a.Z||null===(R=$a.Z.getState())||void 0===R||null===(j=R.ajaxLoad)||void 0===j?void 0:j.pending)+1||0,1))),k(function updateWebPushCount(e){return{type:qf.AO,payload:e}}({countDown:H.default.getByKey("webPushCountDown")||3e4})),ce){k(toggleAjaxBreath(!0));const e=$a.Z.getState().longList;e.hotelList&&(e.hotelList.list=[],k(resetLongListData(e)))}const removeAll=(e,_)=>{var I,C,R,j;e&&k(toggleAjaxLoad(Math.min((null===$a.Z||void 0===$a.Z||null===(I=$a.Z.getState())||void 0===I||null===(C=I.ajaxLoad)||void 0===C?void 0:C.loading)-1||0,1))),_&&k(toggleAjaxPend(Math.min((null===$a.Z||void 0===$a.Z||null===(R=$a.Z.getState())||void 0===R||null===(j=R.ajaxLoad)||void 0===j?void 0:j.pending)-1||0,1))),k(toggleAjaxBreath(!1))},ge=e.queryTag,ve=ge===zd.L7.normal,ye=ge===zd.L7.recommend,be="10320668268"==H.default.getByKey("pageId");var _e,we;(e&&e.searchCondition&&1===e.searchCondition.pageNo&&((0,Ti.gS)(e.Qid),(0,Ti.s2)()),k(function actionCreator_updateDetention(e){return{type:Yf.I,payload:e}}({countDown:0})),null==e||null===(B=e.searchCondition)||void 0===B?void 0:B.cityId)||(e.searchCondition=Object.assign((null===(_e=H.default.getByKey("initParams"))||void 0===_e||null===(we=_e.body)||void 0===we?void 0:we.searchCondition)||{},e.searchCondition));if(!(null==e||null===(U=e.searchCondition)||void 0===U?void 0:U.keyword)){const _=(0,Oo.Z)("featureValue");e.searchCondition=Object.assign({},e.searchCondition,{keyword:_})}const{searchCondition:Ee,preHotelIds:Se=[]}=e,Oe=(0,Ha.LT)(Ee);k((0,zf.N)({searchSessionId:Oe}));const Te=$a.Z.getState(),{priceLow:ke,priceHigh:Ie}=Te.filterCondition.priceRange||{priceHigh:0,priceLow:0};let Ce=Te.singleHotelInfo,Ne=null===(V=Te.longList||{})||void 0===V||null===(G=V.hotelList)||void 0===G?void 0:G[0];var De;ye&&!Ce?(Ce={},Ne&&Object.assign(Ce,Ne.positionInfo,Ne.hotelStarInfo,{hotelId:Se.length?Se[0]:0,hotelName:(null==Ne||null===(De=Ne.hotelBasicInfo)||void 0===De?void 0:De.hotelName)||""}),Ne&&k(function updateSingleRecommendHotelInfo(e){return{type:tm.M,payload:e}}(Ce))):Ce=Ne?dispatcher_objectSpread(dispatcher_objectSpread({},Ne.positionInfo),Ne.hotelStarInfo):null;const Ae=(null===$a.Z||void 0===$a.Z||null===(q=$a.Z.getState())||void 0===q||null===(z=q.searchBarData)||void 0===z||null===(Q=z.search)||void 0===Q?void 0:Q.resultType)||"",Re=(null===$a.Z||void 0===$a.Z||null===(ee=$a.Z.getState())||void 0===ee||null===(ne=ee.recommendTimes)||void 0===ne?void 0:ne.times)||0,xe=(0,Oo.Z)("crossPromotionId")||"";xe&&(e.searchCondition=Object.assign({},e.searchCondition,{crossPromotionId:xe}));let je=(0,J.tV)(Object.assign({},e,{searchSessionId:Oe,isRecommend:ye,singleHotelInfo:Ce,priceRange:{priceHigh:Ie,priceLow:ke},resultType:Ae,recommendTimes:Re}));if(Object.assign(je,{guideLogin:"T"}),!(je.search.pageIndex>1&&(null===(re=je)||void 0===re||null===(oe=re.batchRefreshHotelIds)||void 0===oe?void 0:oe.length))){var Be,Me,Fe;if(!ye)clearTimeout(null===(Be=window)||void 0===Be?void 0:Be.dynamicRefreshTimers);if(window&&!(null===(ie=window)||void 0===ie||null===(ae=ie.listSecondaryLoading)||void 0===ae?void 0:ae.time))window.listSecondaryLoading={time:Date.now(),actionname:ye&&1===(null===(Me=je)||void 0===Me||null===(Fe=Me.search)||void 0===Fe?void 0:Fe.pageIndex)?lm.C.compensate:lm.C.scrollRefresh};return new Promise((I=>{var C;(0,Pe.mf)(_)&&(je=_(je));const R=null===(C=window)||void 0===C?void 0:C.devicePixelRatio,j=R>1.5?"H":R>1&&R<=1.5?"M":"L",B=Date.now();sm(dispatcher_objectSpread(dispatcher_objectSpread({url:"/getHotelList",bff:!0,data:je},(0,J.RN)(e)),{},{deviceConfig:j,fail:()=>{(0,Le.ap)("ibu_htl_online_time_token_gethotellist",{value:{timeToken:0,isRecommend:ye,isMeta:be,dynamicRefresh:!1},success:!1,locale:H.default.getByKey("cargo.locale")})}})).then((_=>{var C,R,j,U,V,G,q,z;const J=Date.now()-B;var Q,ee;(null===(C=window)||void 0===C||null===(R=C.listSecondaryLoading)||void 0===R?void 0:R.time)&&(window.listSecondaryLoading.shouldLoad=!0,window.listSecondaryLoading.traceLogID=null===(Q=je)||void 0===Q||null===(ee=Q.head)||void 0===ee?void 0:ee.traceLogID);let{data:ne={}}=_;const{nextBatchTime:re}=(0,ci.Z)(ne,"batchRefreshPolicy",{nextBatchTime:0,allBatchTime:0}),oe=H.default.getByKey("initData.enableDynamicRefresh");if(oe&&!ye){var ie;k(function updateDynamicTime(e){return{type:om.V,payload:e}}(Date.now())),clearTimeout(null===(ie=window)||void 0===ie?void 0:ie.dynamicRefreshTimers);const _=im();window.dynamicRefreshTimers=setTimeout((()=>{refreshList(e)}),_)}const{recommendTimes:ae=0}=(0,ci.Z)(ne,"moreHotel",{})||{};k(updateRecommendTimes(ae)),k(toggleShouldReplaceUrl(!1));const pe=(0,ci.Z)(ne,"hotelListAddtionInfo",{}),{isShowIntelligentSortItem:ge=!1,combineFilters:_e=[],isSupportWalkDriveSort:we=!1,searchCompensateInfo:Ee={},poiFilters:Se=[]}=pe;(null==Se?void 0:Se.length)>0&&k(updatePoiFilters(Se));const{oneResultClueMessage:Oe=""}=Ee,{longList:Te,searchBarData:ke}=$a.Z.getState(),Ie=Oe||(null==Te||null===(j=Te.hotelListAddtionInfo)||void 0===j||null===(U=j.searchCompensateInfo)||void 0===U?void 0:U.oneResultClueMessage),Ne="H"===(null==ke||null===(V=ke.search)||void 0===V?void 0:V.resultType)&&""!==(null==ke||null===(G=ke.search)||void 0===G?void 0:G.resultWord);!(0,Pe.xb)(Ce)&&Ne&&(ne=Object.assign({},ne,{hotelListAddtionInfo:dispatcher_objectSpread(dispatcher_objectSpread({},pe),{},{searchCompensateInfo:{oneResultClueMessage:Ie}})}));const De=we,Ae=[];if(_e.forEach((_=>{var k;if(-1!==["29","30","31","15","36"].indexOf(_.type))return;const I=null===(k=e.originFilters_left)||void 0===k?void 0:k.find((e=>e.filterId==_.filterId));I?I.type==_.type&&I.value!==_.value&&Ae.push(_):Ae.push(_)})),Ae.length||!ye){const{renderFilters:e,searchCondition:_}=$a.Z.getState(),I=(0,rm.ng)(!1,e,_e,!1,ge,_,void 0,De);k(function actionCreator_updatRenderFilters(e){return{type:xa.sM,payload:e}}(I))}k(toggleShouldReplaceUrl(!0)),removeAll(le,se);let Re="".concat(ve?"hotelList":"moreHotel"),xe=[];var Be,Me,Fe,He;ve?xe=(null===(Be=ne)||void 0===Be?void 0:Be.hotelList)||[]:xe=(null===(Me=ne)||void 0===Me||null===(Fe=Me.moreHotel)||void 0===Fe?void 0:Fe.list)||[];if(!ve&&(null===(q=ne[Re])||void 0===q?void 0:q.length)&&(ne[Re].list=JSON.parse(JSON.stringify(xe.list))),ne.hotelListDeduplicateSwitch="T"===H.default.getByKey("qconfigData.hotelListDeduplicateSwitch"),isFirstPage(e)&&((e=>{const{res:_,originFilterCondition:k}=e,I={breakfast:"breakfasts",payType:"payTypes",bedType:"bedTypes",bookPolicy:"bookPolicies",bookable:"bookables"},C=(0,Ui.Z)(_,"directSearchFilter",{});Object.keys(C).forEach((e=>{const _=C[e];if(_&&_.length){const C=k[e].list,R=k.popularFilters.list;C.forEach((k=>{_.forEach((_=>{String(k.value)===String(_)&&(k.status=1,k.isHitDirectSearch=!0,R.forEach((_=>{_.code==="".concat(I[e],"_").concat(k.value)&&(_.status=1,_.isHitDirectSearch=!0)})))}))}))}}))})({data:ne,originFilterCondition:$a.Z.getState().filterCondition}),ne.tripcoinsReward&&function updateTripCoins(e){return{type:qf.ck,payload:e}}(ne.tripcoinsReward),ne.experienceMemberReward&&function actionCreator_updateExperienceMemberReward(e){return{type:qf.Zz,payload:e}}(ne.experienceMemberReward),ne.controllerUbtTraceLogId&&function updateControllerUbtTraceLogId(e){return{type:qf.o4,payload:e}}(ne.controllerUbtTraceLogId)),k(ve?(He=ne.seqid,{type:Jf.X,payload:He}):(e=>({type:Jf.F,payload:e}))(ne.seqid)),0===xe.length||"T"===ne.isNeedRecommend?ve?(k(actionCreator_toggleNormalLastPage(!0)),k(toggleAjaxLoadType(zd.L7.recommend))):k(actionCreator_toggleRecommendLastPage(!0)):ve?(k(actionCreator_toggleNormalLastPage(!1)),k(toggleAjaxLoadType(zd.L7.normal))):k(actionCreator_toggleRecommendLastPage(!1)),0===xe.length){var Ke,Ue,Ze,Ve;const e=null===(Ke=je)||void 0===Ke||null===(Ue=Ke.head)||void 0===Ue?void 0:Ue.traceLogID;Qf({tracelogId:e,position:ve?"list":"recommend",reason:1,pageindex:null===(Ze=je)||void 0===Ze||null===(Ve=Ze.search)||void 0===Ve?void 0:Ve.pageIndex})}let We=!!(null===(z=je.batchRefresh)||void 0===z?void 0:z.batchSeqNo);if(je.search.pageIndex<=1&&We){var Ge;let e=(ve?$a.Z.getState().longList.hotelList:$a.Z.getState().longList.moreHotel.list)||[],_=(null===(Ge=xe)||void 0===Ge?void 0:Ge.map((e=>e.hotelBasicInfo.hotelId)))||[];e.map((e=>(delete e.card,e)));let k=JSON.parse(JSON.stringify(e));k.length&&(ne[Re]=k.map((e=>{var k;let I=e.hotelBasicInfo.hotelId;return-1!==_.indexOf(e.hotelBasicInfo.hotelId)?null===(k=xe)||void 0===k?void 0:k.find((e=>e.hotelBasicInfo.hotelId===I)):e})))}if(ue){k(resetLongListData(ne)),k(actionCreator_toggleRecommendLastPage(!1)),k(updatePoiFilters([]));const{normalPageNo:e,recommendPageNo:_}=$a.Z.getState().ajaxLoad||{};We&&(e>1||_>1)||(k(restAjaxPageNo({key:"normalPageNo",pageNo:2})),k(restAjaxPageNo({key:"recommendPageNo",pageNo:1})))}else de?(k(restAjaxPageNo({key:"recommendPageNo",pageNo:2})),k(function resetRecommendListData(e){return{type:qf.a9,payload:e}}(ne))):(k(ve?function updateNormalListData(e){return{type:qf.B9,payload:e}}(ne):function updateRecommendListData(e){return{type:qf.Pn,payload:e}}(ne)),k(addAjaxPageNo(ve?{key:"normalPageNo"}:{key:"recommendPageNo"})));if(("T"===ne.isNeedRecommend&&(H.default.getByKey("ssrHotelSearch")||!(0,Oo.Z)("feature")||!(0,Oo.Z)("featureValue")||0!==xe.length||!cm)||"T"===ne.isNeedRecommend&&me)&&(e.filterCondition.bookable=[1],e.searchCondition.pageNo=1,e.resetRecommend=!0,e.queryTag=zd.L7.recommend,e.ssrHotelSearch=me,e.loading=!0,e.preHotelIds=getPreHotelIds({store:$a.Z}),e.preHotelCount=e.preHotelIds.length,k(updateLongList(e))),cm=!1,ce&&((0,mo.pP)()||(0,mo.m)()?window.scrollTo(0,0):window.scrollTo({top:0,left:0,behavior:"smooth"})),0===xe.length&&isFirstPage(e)&&logNoHotel(1),e&&e.searchCondition&&isFirstPage(e)){if(ve){var $e,qe,ze,Ye,Je,Xe;const _=getRegionInfo(null==e||null===($e=e.searchBarData)||void 0===$e?void 0:$e.search),k=getLogFilters(null==e?void 0:e.filters);logClickFilterHotelListResult(k,{regionId:null==_?void 0:_.regionId,regionType:null==_?void 0:_.regionType,regionName:null==_?void 0:_.regionName,traceLogID:null===(qe=je)||void 0===qe||null===(ze=qe.head)||void 0===ze?void 0:ze.traceLogID,isNoResult:0===(null===(Ye=xe)||void 0===Ye?void 0:Ye.length)?1:0,isserSucceed:"T",hotelTotalNum:null==pe?void 0:pe.hotelTotalNum,listQueryId:null===(Je=je)||void 0===Je||null===(Xe=Je.head)||void 0===Xe?void 0:Xe.qid})}(()=>{var e;const _=+new Date-~~(null===ha.Z||void 0===ha.Z||null===(e=ha.Z.timing)||void 0===e?void 0:e.navigationStart);(0,te.fU)({logKey:"ibu_htl_".concat((0,Le.h8)(),"_module_load_time"),logDesc:"module_load_time",logValue:{module:"hotellist_page_1",time:_}})})()}try{if("undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push&&ne.GtmData){let e=JSON.parse(ne.GtmData);dataLayer.push({event:"LoadHotelList",productIds:e&&e.productIds.join(",")})}}catch(e){}var Qe;fe&&!oe&&($a.Z.dispatch(updataBatchParams({isBatch:!1})),clearTimeout(null===(Qe=window)||void 0===Qe?void 0:Qe.batchReqTimers),re&&(window.batchReqTimers=setTimeout((()=>{he&&he(ne)}),+re)));Object.assign(ne,{_params:je}),I(ne),(0,Le.ap)("ibu_htl_online_time_token_gethotellist",{value:{timeToken:J,isRecommend:ye,isMeta:be,dynamicRefresh:!1},success:!0,locale:H.default.getByKey("cargo.locale")})})).catch((_=>{var k,C,R,j,B,H;"abort"!==_.errorType&&removeAll(),logNoHotelReason(_);const U=null===(k=je)||void 0===k||null===(C=k.head)||void 0===C?void 0:C.traceLogID;if(Qf({tracelogId:U,position:ve?"list":"recommend",reason:2,pageindex:null===(R=je)||void 0===R||null===(j=R.search)||void 0===j?void 0:j.pageIndex}),e&&e.searchCondition&&1===e.searchCondition.pageNo){if(ve){var V,G,q,z,J;const _=getRegionInfo(null==e||null===(V=e.searchBarData)||void 0===V?void 0:V.search),k=getLogFilters(null==e?void 0:e.filters);logClickFilterHotelListResult(k,{regionId:null==_?void 0:_.regionId,regionType:null==_?void 0:_.regionType,regionName:null==_?void 0:_.regionName,traceLogID:null===(G=je)||void 0===G||null===(q=G.head)||void 0===q?void 0:q.traceLogID,isNoResult:0,isserSucceed:"F",hotelTotalNum:0,listQueryId:null===(z=je)||void 0===z||null===(J=z.head)||void 0===J?void 0:J.qid})}logNoHotel(2)}var Q,ee,te,ne,re,oe;(null===(B=window)||void 0===B||null===(H=B.listSecondaryLoading)||void 0===H?void 0:H.time)&&(Xf({loadstatus:0,loadtime:null===(Q=window)||void 0===Q||null===(ee=Q.listSecondaryLoading)||void 0===ee?void 0:ee.time,actionname:null===(te=window)||void 0===te||null===(ne=te.listSecondaryLoading)||void 0===ne?void 0:ne.actionname,traceLogID:null===(re=je)||void 0===re||null===(oe=re.head)||void 0===oe?void 0:oe.traceLogID}),window.listSecondaryLoading=null);I()}))}))}},um=function getFoldIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=-1;if("T"===H.default.getByKey("qconfigData.closeFoldBar"))return _;let k=e.length;for(let R=0;R<k;R++){var I,C;if(-1!==_||R===k-1)break;(null===(I=e[R])||void 0===I||null===(C=I.hotelBasicInfo)||void 0===C?void 0:C.isFullRoomCanFold)&&(_=R)}return _};var dm=k(48712),pm=k(79409);const resetFoldStatus=e=>({type:pm.u,payload:e});var hm=k(48467).default;function batchFirstHotelList_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function batchFirstHotelList_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?batchFirstHotelList_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):batchFirstHotelList_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const batchFirstHotelList=e=>{const{param:_,res:k,batchSeq:I}=e;((e,_,k)=>{const{batchSearch:I={},searchCondition:C={}}=e,R=(0,ci.Z)(_,"batchSearchInfo.batchId",""),j=(0,ci.Z)(_,"hotelList.list",[]);I.batchId=R,I.batchSeq=k,I.hotelList=j.map((e=>{var _;return null==e||null===(_=e.base)||void 0===_?void 0:_.hotelId})).filter((e=>e)),C.pageSize=20})(_,k,I);const C=(0,Ha.LT)(null==_?void 0:_.searchCondition);return e=>{var k;let I=(0,J.tV)(Object.assign({},_,{searchSessionId:C}));e((0,zf.N)({searchSessionId:C})),Object.assign(I,{guideLogin:"T"});const R=null===(k=window)||void 0===k?void 0:k.devicePixelRatio,j=R>1.5?"H":R>1&&R<=1.5?"M":"L";return new Promise((k=>{hm(batchFirstHotelList_objectSpread(batchFirstHotelList_objectSpread({url:"/getHotelList",bff:!0,data:I},(0,J.RN)(_)),{},{deviceConfig:j})).then((I=>{const{data:C={}}=I;e(function refreshFirstHotelList(e){return{type:qf.zV,payload:e}}({param:_,data:C})),k(C)}))}))}};let fm=[];const refreshFirstListPageData=(e,_)=>k=>{if("labelColor"!==(0,ci.Z)(k,"fontColor",{}))return;if((0,ci.Z)(_,"queryTag","")===zd.L7.recommend){const{longList:{hotelList:e}}=$a.Z.getState();Object.assign(k,{hotelList:e})}return e(function batchRefreshFirstHotelList(e){return{type:qf.u7,payload:e}}({res:k})),new Promise((I=>{var C;const R=(0,ci.Z)(_,"queryTag",""),j=(0,ci.Z)(_,"searchCondition.pageNo",0),B=(0,ci.Z)(k,"batchRefreshPolicy",{});let H=k.hotelList||(null===(C=k.hotelList)||void 0===C?void 0:C.list)||[];var U;R===zd.L7.recommend&&(H=(null==k||null===(U=k.moreHotel)||void 0===U?void 0:U.list)||[]);const V=(0,ci.Z)(k,"preBatchRefresh",{}),{nextBatchTime:G=0}=B,{searchCondition:q,renderFilters:z,singleRecommendHotelInfo:{singleHotelInfo:Q=null}}=$a.Z.getState(),ee=(0,J.hZ)(z);if(+G>0&&!k.isMetaPage&&j<=1&&R!==zd.L7.meta&&H.length){var te;Object.assign(_,{batchRefreshHotelIds:H.map((e=>({id:e.hotelBasicInfo.hotelId})))||[],batchRefreshpolicy:V,searchCondition:q,filters:ee,singleHotelInfo:Q});var ne;if(!((null===(te=(0,J.tV)(Object.assign({},_)).search)||void 0===te?void 0:te.filters.filter((e=>e.type===zd.sF)).length)>0))clearTimeout(null===(ne=window)||void 0===ne?void 0:ne.batchReqTimers),window.batchReqTimers=setTimeout((()=>{e(updataBatchParams({isBatch:!0})),e((e=>{const{param:_}=e,k=(0,Ha.LT)(null==_?void 0:_.searchCondition);return e=>{let I=(0,J.tV)(Object.assign({},_,{searchSessionId:k}));return new Promise((k=>{var C;const R=null===(C=window)||void 0===C?void 0:C.devicePixelRatio,j=R>1.5?"H":R>1&&R<=1.5?"M":"L";return hm(batchFirstHotelList_objectSpread(batchFirstHotelList_objectSpread({url:"/getHotelList",bff:!0,data:I},(0,J.RN)(_)),{},{deviceConfig:j})).then((_=>{const{data:C={}}=_;refreshFirstListPageData(e,I)(C),k(C)}))}))}})({param:_})).then((()=>{e(updataBatchParams({isBatch:!1}))}))}),+B.nextBatchTime)}I(k)}))};var mm,gm=k(48467).default,vm=k(67294);function v8longList_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function v8longList_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?v8longList_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):v8longList_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let ym=null,bm=null;const{getPriceRange:_m}=dm.Z;let wm=(0,Di.zy)((e=>{let{selectedFilterList:_}=e;return{selectedFilterList:_}}))(mm=(0,Ni.$j)((e=>{const{longList:_,longList:{hotelList:k,resultTitle:I,moreHotel:C,encourage:R,isNeedRecommend:j,fontColor:B,announcements:H,goldenDiscount:U,diamondDiscount:V,controllerUbtTraceLogId:G,tripcoinsReward:q,experienceMemberReward:z},hotelAdditionInfo:J,metaHotel:Q,initData:ee,lastPage:te,ajaxLoad:ne,searchCondition:re,searchBarData:oe,filterCondition:ie,sortInfo:ae,foldInitStatus:le,filters:se,ubtTraceInfo:ce,renderFilters:ue}=e;return{initData:ee,longList:_,hotelList:k,metaHotel:Q,resultTitle:I,moreHotel:C,isNeedRecommend:"T"===j,encourage:R||{},announcements:H,lastPage:te,hotelAdditionInfo:J,ajaxLoad:ne,isNormal:(0,ci.Z)(ne,"type","")===zd.L7.normal,searchCondition:re,searchBarData:oe,filterCondition:ie,sortInfo:ae,foldInitStatus:le,fontColor:B,goldenDiscount:U,diamondDiscount:V,controllerUbtTraceLogId:G,tripcoinsReward:q,experienceMemberReward:z,filters:se,ubtTraceInfo:ce,renderFilters:ue}}))(mm=class LongList extends v8longList_view_View{constructor(e){var _;super(e),_=this,this.baseParam=e=>{let{pageNo:_=1,isRecommend:k}=e;const{searchCondition:I,filterCondition:C,sortInfo:R,initData:j}=this.props;return list({initData:j,searchCondition:I,filterCondition:C,sortInfo:R,pageNo:_,isRecommend:k,edmHotelData:(0,Ne.Z)("edmHotelData")})},this.addEmptyBatchSearch=e=>{e.batchSearch={},e.batchSearch.openBatch=1},this.refreshFirstListPageSSR=e=>{let _=this.baseParam({pageNo:1,isRecommend:!1});_.sessionId=(0,si.uG)(),_.queryTag=zd.L7.normal,this.addEmptyBatchSearch(_),((e,_)=>k=>{if("labelColor"===(0,ci.Z)(k,"fontColor",{}))return new Promise((I=>{const C=(0,ci.Z)(_,"queryTag",""),R=(0,ci.Z)(_,"searchCondition.pageNo",0),j=(0,ci.Z)(k,"batchSearchInfo",{}),B=!!(0,ci.Z)(k,"hotelList.list",[]).length,{batchTime:H=[],batchId:U}=j;if(1===R&&C===zd.L7.normal&&H.length&&U&&B){fm.map((e=>{clearTimeout(e)})),fm=[];for(let I=0;I<H.length;I++){let C=setTimeout((()=>{e(batchFirstHotelList({param:_,res:k,batchSeq:I+1}))}),H[I]);fm.push(C)}}I(k)}))})(this.props.dispatch,_)(e)},this.checkBatchRefresh=function(e){let k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=_.baseParam({pageNo:1,isRecommend:!1});I.sessionId=(0,si.uG)(),I.queryTag=zd.L7.normal,_.hah=1,k&&(I.queryTag=zd.L7.recommend),e&&refreshFirstListPageData(_.props.dispatch,I)(e)},this.scrollToShowMetaRoom=()=>{const{normalPageNo:e,pending:_}=this.props.ajaxLoad;(e=>{try{const{normalPageNo:_,pending:k,top:I}=e;let C=document.querySelector(".Meta-decorator"),R=document.querySelector(".with-decorator-wrap-v8");"10320668268"===document.querySelector("#page_id").value&&1===_&&!k&&C&&R&&window.scrollTo({top:I,left:0,behavior:"smooth"})}catch(e){}})({normalPageNo:e,pending:_,top:242})},this.scrollLoad=(0,Ie.P2)((()=>{var e,_;const{ajaxLoad:{loading:k,normalPageNo:I,recommendPageNo:C},lastPage:{recommendLastPage:R,normalLastPage:j},isNormal:B,hotelList:H,moreHotel:U,metaHotel:V}=this.props;k||this.isBottom()&&(!R||!j&&B)&&((null==H?void 0:H.length)>0||(null==U||null===(e=U.list)||void 0===e?void 0:e.length)>0||(null==V||null===(_=V.list)||void 0===_?void 0:_.length)>0)&&(I>1||C>1)&&this.getListData()}),100),this.isBottom=()=>{let e=document.querySelector(".none-ref");if(!e)return;let{top:_}=e.getBoundingClientRect();return _<document.documentElement.clientHeight+200},this.getDecryptHotelPrice=()=>{let e=[],_=[],k=0;const I=(0,ci.Z)(this.props,"hotelList.list",[]),C=(0,ci.Z)(this.props,"metaHotel",{}),R=(0,ci.Z)(C,"roomList",[]);Object.keys(C).length&&(k=R.length,_=R.map((e=>{const{money:{price:_,priceDelete:k,afterTaxPrice:I},base:{roomId:C}}=e;return{hotelId:C,realPrice:_||"",deletePrice:k||"",afterTaxPrice:I}})));const j=I.map((e=>{const{money:{price:_,priceDelete:k,afterTaxPrice:I},base:{hotelId:C}}=e;return{hotelId:C,realPrice:_||"",deletePrice:k||"",afterTaxPrice:I}}));if(e=[..._,...j],e.length){var B;const{searchCondition:_}=this.props;ha.Z.mark("hote1Start"),gm({data:{list:e,checkIn:_.checkIn,checkOut:_.checkOut},url:"/hote1search",soaCode:16709,silence:!0,genk:!0,genKeyParam:{a:0,b:_.checkIn,c:_.checkOut,d:null===(B=H.default.getByKey("cargo.locale",this.ctx))||void 0===B?void 0:B.toLocaleLowerCase(),e:2,f:_.cityId}}).then((e=>{let{data:_,success:j}=e;j((()=>{ha.Z.mark("hote1End"),this.$safeLog("logDecryptPrice");const e=_.list;if(e){const parchPrice=(e,_)=>{e.forEach(((e,k)=>{var I,C,R;e.money.price=null===(I=_[k])||void 0===I?void 0:I.realPrice,e.money.priceDelete=null===(C=_[k])||void 0===C?void 0:C.deletePrice,(null===(R=_[k])||void 0===R?void 0:R.afterTaxPrice)&&(e.money.afterTaxPrice=_[k].afterTaxPrice)}))};if(k){const _=e.splice(0,k);parchPrice(R,_),C.roomList=R,this.props.dispatch(updateMetaHotel(C))}parchPrice(I,e);let j=ae()(this.props.longList);j.hotelList.list=I,j.fontColor=_.fontColor,this.props.dispatch(resetLongListData(j))}}))}))}},this.reFetchRecommendListData=()=>{let e=this.baseParam({pageNo:1,isRecommend:!0});return e.sessionId=(0,si.uG)(),e.resetRecommend=!0,e.queryTag=zd.L7.recommend,this.getListData(e)},this.getFirstHotelCityId=()=>{const{metaHotel:e,hotelList:_}=this.props;let k=null;return e?(k=(0,ci.Z)(e,"card.position.cityId"),k):_.list?(k=(0,ci.Z)(_,"list[0].position.cityId"),k):k},this.reFetchFilter=e=>{try{const _=(0,ci.Z)(e,"filterCondition.cityId",[]).length>0,k=this.getFirstHotelCityId();this.needRefetchFlag&&k&&gm({url:"/hotelListInit",silence:!0,soaCode:16709,data:{requestType:_?1:2,meta:e.meta,filterCondition:e.filterCondition,searchCondition:Object.assign({},e.searchCondition,{cityId:k}),isNewMap:"1",timeout:1500}}).then((e=>{let{data:_,success:k,fail:I}=e;k((()=>{this.needRefetchFlag=!1;const e=_.filterInfo;delete e.airportTrainstations,delete e.hotArea,delete e.landmarks,delete e.locations,delete e.metros,delete e.zones,this.props.dispatch(toggleShouldReplaceUrl(!1)),this.props.dispatch((0,Ki.Of)(e)),this.props.dispatch(toggleShouldReplaceUrl(!0))})),I((e=>{this.$safeLog("province_district_fetchfilter_fail",e)}))}))}catch(e){this.$safeLog("province_district_fetchfilter_error",e)}},this.getIsNeedRequestMetaHotel=e=>{let _=!!("10320668268"==H.default.getByKey("pageId"));if(_){var k,I;const C=H.default.getByKey("initData.urlChoosedFilters")||[];null==e||null===(k=e.search)||void 0===k||null===(I=k.filters)||void 0===I||I.forEach((e=>{C.find((_=>_.type==e.type&&_.value==e.value))||(_=!1)}))}return _},this.getListData=e=>{var _;const{isSwitchNewFilter:k,originPriceInfo:I}=this.props.initData,{selectedFilterList:C}=this.props,R=this;let j=e;const{initData:B,longList:U,searchBarData:V,renderFilters:G}=this.props;if(!j){let{ajaxLoad:{normalPageNo:e,recommendPageNo:_},isNormal:k}=this.props,I=k?e:_;j=this.baseParam({pageNo:I,isRecommend:!k}),j.loading=!0,j.queryTag=k?"NORMAL":"TRIP_RECOMMEND",j.Qid=null==B?void 0:B.Qid}(null==B?void 0:B.openBatch)&&(null===(_=j.searchCondition)||void 0===_?void 0:_.pageNo)>1&&U.batchSearchInfo&&j.searchCondition.pageNo++;let q=k?C:(0,J.hZ)(G);q=q.map((e=>{if("15"===e.type){var _;const[k,C]=(null==e||null===(_=e.value)||void 0===_?void 0:_.split("|"))||[];return v8longList_objectSpread(v8longList_objectSpread({},e),{},{title:_m(+k,+("max"===C?"-1":C),null==I?void 0:I.originPriceBarMax)})}return e})),j.filters=q,j.originFilters_left=q;const z=JSON.parse(JSON.stringify(j)),Q=(0,Ne.Z)("feature")&&(0,Ne.Z)("featureValue");return Q&&Object.assign(j,{filterCondition:v8longList_objectSpread(v8longList_objectSpread({},j.filterCondition),{},{feature:(0,Ne.Z)("feature")&&(0,Ne.Z)("feature").split(",")||[]})}),j.preHotelIds=getPreHotelIds({store:$a.Z}),j.preHotelCount=j.preHotelIds.length||0,j.searchBarData=j.searchBarData||V,new Promise((e=>{const _="10320668268"==H.default.getByKey("pageId");this.props.dispatch(updateLongList(j,_?e=>(R.getIsNeedRequestMetaHotel(e)||(0,si.Ew)(e)||(e.queryTag=zd.L7.normal),e):null)).then((_=>{var k;this.$safeLog("logUbtHotelList",_,j.queryTag),_&&_.metaHotel&&this.$safeLog("logUbtMetaHotel",_.metaHotel),this.props.isNormal&&this.getPosIndexSoldOut(_),e(_),(null===(k=j.searchCondition)||void 0===k?void 0:k.pageNo)<=1&&this.checkBatchRefresh(_,!0),this.reFetchFilter(z),this.props.displayKeyword(),"NORMAL"===j.queryTag&&!this.props.ssrHotelSearch&&!(null==_?void 0:_.hotelList.length)&&Q&&this.reGetHotelList()}))}))},this.reGetHotelList=()=>{!this.featureNeedResearch&&(this.featureNeedResearch=!0,this.props.researchHotels())},this.moreSearchClick=()=>{this.props.loading||this.getListData()},this.logExposureHotels=()=>{var e;(null===(e=this.exporsureHotels)||void 0===e?void 0:e.length)&&this.$safeLog("logHotelShow",this.exporsureHotels),this.exporsureHotels=[]},this.pushExposureHotel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_.exporsureHotels.push(e)},this.firstListCardLog=(e,_)=>{if(!this.firstCardLoaded&&0==~~_){var k;this.firstCardLoaded=!0;"10320668268"==H.default.getByKey("pageId")&&this.$safeLog("metaHotelListCardRendered",null===ha.Z||void 0===ha.Z||null===(k=ha.Z.timing)||void 0===k?void 0:k.navigationStart,e)}},this.imgLoaded=()=>{this.imgLoadedNum=this.imgLoadedNum+1},this.ubtMapping={logShowBanner:logShowBanner,logHotelShow:logHotelShow,logUbtHotelList:logUbtHotelList,logUbtMetaHotel:logUbtMetaHotel,logFoldBar:logFoldBar,logshowFoldBar:logshowFoldBar,logDecryptPrice:logDecryptPrice,metaHotelListCardRendered:metaHotelListCardRendered,logActivityLabelShow:logActivityLabelShow,logFullListBottom:logFullListBottom,logMainListBottom:logMainListBottom,metaHotelListCardPriceRendered:metaHotelListCardPriceRendered},this.activityRecommendation=e=>{this.$safeLog("logActivityLabelShow",e)},this.setFoldBarInfo=function(e){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;const I=(0,ci.Z)(e,"hotelList",[]);let{needFlodedIndex:C,isFold:R}=_.state;C=um(I);let j=-1!==C;R=_.props.foldInitStatus?j:R,_.setState({needFlodedIndex:C,showFoldedBar:j,isFold:R},k)},this.getPosIndexSoldOut=e=>{this.setFoldBarInfo(e,(()=>{let{isFold:e}=this.state;e&&(this.props.dispatch(toggleAjaxLoadType(zd.L7.recommend)),this.reFetchRecommendListData())}))},this.toggleSoldOutClick=()=>{const{isFold:e}=this.state;this.$safeLog("logFoldBar",e),this.props.dispatch(resetFoldStatus(!1)),this.setState({isFold:!e},(()=>{const{isFold:e}=this.state,{dispatch:_}=this.props;_(toggleAjaxLoadType(e?zd.L7.recommend:zd.L7.normal))}))},this.state={list:new Array(4).fill(""),isFold:!1,showFoldedBar:!1,needFlodedIndex:-1,exporsureHotels:[],ceilSuggestion:!1,ceilSuggestionTop:0},this.MAX_LOAD_PAGE=3,this.toggleRef=vm.createRef(),this.mainlistRef=vm.createRef(),this.hasLoginDeal=!1,this.exporsureHotels=[],this.logExposureHotels=(0,Ie.Ds)(this.logExposureHotels,200).bind(this),this.ceilSuggestionLock=!1,this.searchBox=null,this.needRefetchFlag=fi.Gd.includes((0,Ne.Z)("optionType")),this.kakaoRef=vm.createRef(),this.firstCardLoaded=!1,this.pageNoPosition=-1,this.imgLoadedNum=0}componentDidMount(){var e,_,k;window.addEventListener("scroll",this.scrollLoad),window.addEventListener("scroll",this.logExposureHotels);const{isNeedRecommend:I,initData:{ssrHotelSearch:C,openBatch:R,needHotelResearch:j,ssrPriceEncrypt:B},isNormal:H,longList:U,dispatch:V,metaHotel:G}=this.props,q=!!(null===(e=U.batchRefreshPolicy)||void 0===e?void 0:e.nextBatchTime);if(C)B&&this.getDecryptHotelPrice(),H&&this.getPosIndexSoldOut(U),this.reFetchFilter(this.baseParam({pageNo:1,isRecommend:!1})),I&&!j&&this.getListData(),this.$safeLog("logUbtHotelList",U,(null==U?void 0:U.metaHotel)?"LANDPAGE":"NORMAL"),U&&U.metaHotel&&this.$safeLog("logUbtMetaHotel",U.metaHotel),I&&this.checkBatchRefresh(U);else{let e=this.baseParam({pageNo:1,isRecommend:!1});e.sessionId=(0,si.uG)(),e.breathing=!0,e.resetWholePage=!0,e.queryTag=zd.L7.normal,e.topHotelIds=(0,Ne.Z)("topHotelIds")||"",q?this.getListData(e).then((e=>{this.checkBatchRefresh(e)})):this.getListData(e).then((()=>{}))}var z;((null===(_=this.props.announcements)||void 0===_?void 0:_.length)&&this.$safeLog("logShowBanner",{type:"important_notice"}),this.observeHotel(),null==G||null===(k=G.roomList)||void 0===k?void 0:k.length)&&this.$safeLog("metaHotelListCardPriceRendered",null===ha.Z||void 0===ha.Z||null===(z=ha.Z.timing)||void 0===z?void 0:z.navigationStart,!0)}componentDidUpdate(e){var _,k,I,C,R,j,B,H,U,V;(this.props.hotelList!==e.hotelList&&this.observeHotel(),this.props.hotelList!==e.hotelList||this.props.moreHotel!==e.moreHotel)&&((null===(_=window)||void 0===_||null===(k=_.listSecondaryLoading)||void 0===k?void 0:k.time)&&(null===(I=window)||void 0===I||null===(C=I.listSecondaryLoading)||void 0===C?void 0:C.shouldLoad)&&(Xf({loadstatus:1,loadtime:null===(R=window)||void 0===R||null===(j=R.listSecondaryLoading)||void 0===j?void 0:j.time,actionname:null===(B=window)||void 0===B||null===(H=B.listSecondaryLoading)||void 0===H?void 0:H.actionname,traceLogID:null===(U=window)||void 0===U||null===(V=U.listSecondaryLoading)||void 0===V?void 0:V.traceLogID}),window.listSecondaryLoading=null))}componentWillUnmount(){bm&&(bm.disconnect(),bm=null),window.removeEventListener("scroll",this.scrollLoad),window.removeEventListener("scroll",this.logExposureHotels)}observeHotel(){const e=this.props.hotelList||[];bm||(bm=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>.8&&(ym=e.target.id)}))}),{threshold:[.8]})),e.forEach((e=>{var _,k;document.getElementById(null===(_=e.hotelBasicInfo)||void 0===_?void 0:_.hotelId)&&bm.observe(document.getElementById(null===(k=e.hotelBasicInfo)||void 0===k?void 0:k.hotelId))}))}afterAsync(){var e,_;const{searchCondition:k,initData:I}=this.props;((e,_,k)=>{const I=H.default.getByKey("cargo.locale"),C=H.default.getByKey("cargo.currency")||"",{adult:R,child:j,checkIn:B,checkOut:U,roomNum:V=0,countryId:G}=_||{},q=(0,hi._W)(B,"-")||"",z=(0,hi._W)(U,"-")||"",J=(0,Re.e3)(q,z)||0;let Q=[];null==k||k.map((e=>{const{money:{price:_}={},base:{hotelName:k,hotelId:C}={},position:{cityId:R}={}}=e;Q.push({item_name:k||"",item_id:C||"",price:_||"",item_list_name:"hotel",item_category:"",item_category_2:"",item_category_3:I,item_category_4:G,item_category_5:R,quantity:V*J})})),"undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push&&dataLayer.push({event:e,number_of_nights:J,number_of_rooms:V||"",number_of_adults:R||"",number_of_children:j||0,end_date:z,start_date:q,prd_type:"hotel",ecommerce:{currecy:C,items:Q}})})("view_item_list",k,null==I||null===(e=I.firstPageList)||void 0===e||null===(_=e.hotelList)||void 0===_?void 0:_.hotels)}UNSAFE_componentWillReceiveProps(e){e.foldInitStatus&&this.setFoldBarInfo(e)}})||mm)||mm;const Em=function storageChangedPriceHotels(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const _=window.CHANGED_PRICE_HOTELS_DATA||{};window.CHANGED_PRICE_HOTELS_DATA=v8longList_objectSpread(v8longList_objectSpread({},_),e.reduce(((e,_)=>(e[_.hotelBasicInfo.hotelId]=!0,e)),{}))},refreshList=e=>{var _,k,I,C,R,j,B,U,V,G,q,z,Q;(null==e||null===(_=e.searchCondition)||void 0===_?void 0:_.cityId)||(e.searchCondition=Object.assign((null===(z=H.default.getByKey("initParams"))||void 0===z||null===(Q=z.body)||void 0===Q?void 0:Q.searchCondition)||{},e.searchCondition));e.queryTag=e.queryTag===zd.L7.recommend?zd.L7.normal:e.queryTag;if(!(null==e||null===(k=e.searchCondition)||void 0===k?void 0:k.keyword)){const _=(0,Ne.Z)("featureValue");e.searchCondition=Object.assign({},e.searchCondition,{keyword:_})}const{searchCondition:ee}=e,te=(0,Ha.LT)(ee),ne=$a.Z.getState(),{priceLow:re,priceHigh:oe}=(null===(I=ne.filterCondition)||void 0===I?void 0:I.priceRange)||{priceHigh:0,priceLow:0};let ie=ne.singleHotelInfo,ae=null===(C=ne.longList||{})||void 0===C||null===(R=C.hotelList)||void 0===R?void 0:R[0];ie=ae?v8longList_objectSpread(v8longList_objectSpread({},ae.positionInfo),ae.hotelStarInfo):null;const le=(null===$a.Z||void 0===$a.Z||null===(j=$a.Z.getState())||void 0===j||null===(B=j.searchBarData)||void 0===B||null===(U=B.search)||void 0===U?void 0:U.resultType)||"",se=(null===$a.Z||void 0===$a.Z||null===(V=$a.Z.getState())||void 0===V||null===(G=V.recommendTimes)||void 0===G?void 0:G.times)||0,ce=(0,Ne.Z)("crossPromotionId")||"";ce&&(e.searchCondition=Object.assign({},e.searchCondition,{crossPromotionId:ce}));let ue=(0,J.tV)(Object.assign({},e,{searchSessionId:te,isRecommend:false,singleHotelInfo:ie,priceRange:{priceHigh:oe,priceLow:re},resultType:le,recommendTimes:se,dynamicBus:!0}));Object.assign(ue,{guideLogin:"T"});const{hotelList:de=[]}=ne.longList||{},pe="10320668268"==H.default.getByKey("pageId"),he=H.default.getByKey("initData.enableDynamicRefresh");if(he){let e=[];const _=de.length,k=ym,I=de.findIndex((e=>{var _;return(null===(_=e.hotelBasicInfo)||void 0===_?void 0:_.hotelId)==k}));if(null===k||-1===I||_<20)e=_<20?de:de.slice(0,20);else{let k=I-10,C=I+10;k<0?(k=0,C=20):C>_&&(C=_,k=_-20),e=de.slice(k,C)}const C=[];e.forEach((e=>{e.token&&C.push(e.token)})),Object.assign(ue,{tokenList:C})}const fe=null===(q=window)||void 0===q?void 0:q.devicePixelRatio,me=fe>1.5?"H":fe>1&&fe<=1.5?"M":"L",ge=Date.now();gm(v8longList_objectSpread(v8longList_objectSpread({url:"/getHotelListDynamicRefresh",bff:!0,data:ue},(0,J.RN)(e)),{},{deviceConfig:me})).then((_=>{const{data:k={}}=_;if(he){var I,C;clearTimeout(null===(I=window)||void 0===I?void 0:I.dynamicRefreshTimers);const{dynamicRefreshTime:_}=ne,R=im(_);window.dynamicRefreshTimers=setTimeout((()=>{refreshList(e)}),R),(null==k||null===(C=k.hotelList)||void 0===C?void 0:C.length)>0&&($a.Z.dispatch(function refreshLongListData(e){return{type:qf.ww,payload:e}}(k)),(0,Ti.s2)(),Em(null==k?void 0:k.hotelList));const j=Date.now()-ge;(0,Le.ap)("ibu_htl_online_time_token_gethotellist",{value:{timeToken:j,isRecommend:false,isMeta:pe,dynamicRefresh:!0},success:!0,locale:H.default.getByKey("cargo.locale")})}})).catch((_=>{logNoHotelReason(_),e&&e.searchCondition&&1===e.searchCondition.pageNo&&logNoHotel(2)}))},refreshMetaList=e=>{var _,k;let{searchCondition:I,initData:C,filterCondition:R,sortInfo:j,filters:B=[]}=e;clearTimeout(null===(_=window)||void 0===_?void 0:_.dynamicRefreshMetaTimers);const U=list({initData:C,searchCondition:I,filterCondition:R,sortInfo:j,pageNo:1,edmHotelData:(0,ii.WH)("edmHotelData")});U.queryTag=zd.L7.normal,U.preHotelIds=getPreHotelIds({store:$a.Z}),U.preHotelCount=U.preHotelIds.length||0;(null==C?void 0:C.openBatch)&&(U.batchSearch={},U.batchSearch.openBatch=1);const V=JSON.parse(JSON.stringify(U));var G,z;(B.forEach((e=>{"80"==e.type&&V.filterCondition&&(V.filterCondition.priceType=e.value)})),delete V.ssrHotelSearch,delete V.loading,delete V.pending,delete V.resetRecommend,delete V.preHotelIds,delete V.preHotelCount,V.queryTag="NORMAL",V.searchCondition.cityId)||(V.searchCondition=Object.assign((null===(G=H.default.getByKey("initParams"))||void 0===G||null===(z=G.body)||void 0===z?void 0:z.searchCondition)||{},V.searchCondition));if(!V.searchCondition.keyword){const e=(0,Ne.Z)("featureValue");V.searchCondition=Object.assign({},V.searchCondition,{keyword:e})}const J=[{tagType:"TaxDescForAmountshowtype2",tagValue:"T"}];(0,q.nk)(void 0)&&J.push({tagType:"NewTaxDescForAmountshowtype0",tagValue:""}),(0,q.TL)()&&J.push({tagType:"NeedHighlightsModule",tagValue:"T"}),(0,q.JT)()&&J.push({tagType:"MultiMainHotelPics",tagValue:"T"}),(0,q.bd)()&&J.push({tagType:"MetaNewPriceLayer",tagValue:"T"}),V.searchCondition.dynamicRefresh="T";const Q=Date.now(),setNextDynamicRefreshMetaTimers=()=>{const e=im(window.LISTPAGE_READY_TIME,"qconfigData.dynamicRefreshMetaTimerConf");window.dynamicRefreshMetaTimers=setTimeout((()=>{refreshMetaList({searchCondition:I,initData:C,filterCondition:R,sortInfo:j,filters:B})}),e)};gm({url:"/HotelSearch",silence:!0,singleton:!0,currency:(0,li.zC)(),data:Object.assign(V,{guideLogin:"T",needTagMerge:"T",tags:J}),genk:!0,genKeyParam:{a:0,b:V.searchCondition.checkIn,c:V.searchCondition.checkOut,d:null===(k=H.default.getByKey("cargo.locale"))||void 0===k?void 0:k.toLocaleLowerCase(),e:2,f:V.searchCondition.cityId},timeout:8e3,fail:()=>{setNextDynamicRefreshMetaTimers(),(0,Le.ap)("ibu_htl_online_time_token_gethotellist",{value:{timeToken:0,isRecommend:!1,isMeta:!0,isMetaDynamicRefresh:!0,dynamicRefresh:!0},success:!1,locale:H.default.getByKey("cargo.locale")})}}).then((e=>{var _,k,I,C;const R=Date.now()-Q,j=$a.Z.getState(),B=null==j||null===(_=j.longList)||void 0===_?void 0:_.metaHotel;if((null==e||null===(k=e.data)||void 0===k?void 0:k.metaHotel)&&!$f()(null==B?void 0:B.roomList,null==e||null===(I=e.data)||void 0===I||null===(C=I.metaHotel)||void 0===C?void 0:C.roomList)){var U,V,G,q;const _=null==e||null===(U=e.data)||void 0===U||null===(V=U.metaHotel)||void 0===V||null===(G=V.card)||void 0===G||null===(q=G.base)||void 0===q?void 0:q.hotelId;Em([{hotelBasicInfo:{hotelId:_}}]);let k=(0,li.DS)((0,ci.Z)(e,"data.metaHotel",{}),null==e?void 0:e.isNeedCalendarRecommend);$a.Z.dispatch(updateMetaHotel(v8longList_objectSpread(v8longList_objectSpread({},B),{},{roomList:k.roomList,rawData:k.rawData,trace:k.trace,isNeedCalendarRecommend:null==k?void 0:k.isNeedCalendarRecommend})))}setNextDynamicRefreshMetaTimers(),(0,Le.ap)("ibu_htl_online_time_token_gethotellist",{value:{timeToken:R,isRecommend:!1,isMeta:!0,isMetaDynamicRefresh:!0,dynamicRefresh:!0},success:!0,locale:H.default.getByKey("cargo.locale")})}))};var Sm=k(44904);var Om=k(39621).default;function base_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function base_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?base_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):base_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const Tm={Hotel:"H"};class BaseReplace extends Om{constructor(e){var _;super(e),_=this,this.formateAirportTrainStation=(e,_)=>{let k=_[0],I="",C="";return k&&(I=k.type,C=k.value),e=link_replaceOrSplice(e,"airportTrainstationType",I),e=link_replaceOrSplice(e,"airportTrainstationValue",C)},this.formatePriceRange=(e,_)=>{const{lowPrice:k=0,highPrice:I=-1}=_.length&&_[0];return e=link_replaceOrSplice(e,"lowPrice",k),e=link_replaceOrSplice(e,"highPrice",I),e=link_replaceOrSplice(e,"barCurr",(0,li.zC)())},this.formatePriceType=(e,_)=>{let k=_[0]&&_[0].value;return go.Z.set("IBU_showtotalamt","".concat(k),{expires:7}),e},this.fotmateBrand=(e,_)=>{let k="",I="";return _.forEach(((e,C)=>{let R=C===_.length-1;k+=R?e.type:"".concat(e.type,","),I+=R?e.value:"".concat(e.value,",")})),e=link_replaceOrSplice(e,"brandType",k),e=link_replaceOrSplice(e,"brandValue",I)},this.fotmateHotArea=(e,_)=>{let k="",I="";return _.forEach((e=>{k=e.type,I=encodeURIComponent(e.value)})),e=link_replaceOrSplice(e,"hotAreaType",k),e=link_replaceOrSplice(e,"hotAreaValue",I)},this.updateWithAreas=e=>{var _;let k="",I=(null===(_=this.props.filters)||void 0===_?void 0:_.areas)||[],C=null==I?void 0:I.length;return I.forEach(((e,_)=>{k+=_===C-1?e.value:"".concat(e.value,",")})),e=link_replaceOrSplice(e,"areas",k)},this.flattenSubItems=e=>{const _={};return function recurse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((e=>{var k,I;(null==e||null===(k=e.data)||void 0===k?void 0:k.filterId)&&(_[e.data.filterId]=!0),(null==e||null===(I=e.subItems)||void 0===I?void 0:I.length)>0&&recurse(e.subItems)}))}(e),_},this.getSearchValuesIfFromPackObj=(e,_)=>{var k,I,C;const{isSwitchNewFilter:R,originFilterData:j,newFilterData:B}=e;let H=(null==_||null===(k=_.search)||void 0===k||null===(I=k.item)||void 0===I?void 0:I.data)||[];var U;if("[object Array]"!==Object.prototype.toString.call(H)&&(H=[H]),R)return null===(U=H)||void 0===U?void 0:U.reduce(((e,_)=>{var k;return base_objectSpread(base_objectSpread({},e),{},{[_.filterId]:!!(null==j||null===(k=j.filterMap)||void 0===k?void 0:k[_.filterId])})}),{});const V=base_objectSpread(base_objectSpread({},this.flattenSubItems(null==B?void 0:B.filters)),this.flattenSubItems(null==B?void 0:B.quickFilters));return null===(C=H)||void 0===C?void 0:C.reduce(((e,_)=>base_objectSpread(base_objectSpread({},e),{},{[_.filterId]:null==V?void 0:V[_.filterId]})),{})},this.getCombineSearchValueFilters=(e,_,k)=>{var I,C,R;let j=ae()(e);const B=ae()(_),H=this.getSearchValuesIfFromPackObj(k,B);let U=(null==B||null===(I=B.search)||void 0===I||null===(C=I.item)||void 0===C?void 0:C.data)||[];"[object Array]"!==Object.prototype.toString.call(U)&&(U=[U]);const V=["13","12","11","50","18","10","9","41","8","139"],G=null==e?void 0:e.some((e=>{var _,k;const I=null==e||null===(_=e.filterId)||void 0===_||null===(k=_.split("|"))||void 0===k?void 0:k[0];return V.includes(I)}),{});return null===(R=U)||void 0===R||R.forEach((e=>{const _=j.some((_=>e.filterId===_.filterId)),k=H[e.filterId];_||k||G&&"31"!==e.type||j.push(e)})),j},this.clearSearchBarKeyWords=function(){var e,_,k;let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],C=arguments.length>1?arguments[1]:void 0,R=arguments.length>2?arguments[2]:void 0;const j=["80","17","29"],B=I.every((e=>j.includes(e.type)));let H=!1;const U=null==R||null===(e=R.search)||void 0===e||null===(_=e.item)||void 0===_?void 0:_.data,V=1===(null==U?void 0:U.length)&&"31"===(null===(k=U[0])||void 0===k?void 0:k.type);U instanceof Array&&!V&&(H=U.some((e=>!I.some((_=>_.filterId===e.filterId))))),(B||H)&&C({type:"SEARCHBARDATA_CLEAR_KEYWORD"})},this.updateWithSort=(e,_)=>{let k="";return e.forEach((e=>{if(!k){let{list:_,status:I,value:C}=e;_=_||[],I&&(0===_.length?k=C:_.forEach((e=>{e.status&&(k=e.value)})))}})),_=_.indexOf("sort")>-1?(0,ii.qz)({sort:k},_):"".concat((e=>e.indexOf("?")>-1?"".concat(e,"&"):"".concat(e,"?"))(_),"sort=").concat(k)},this.handler=e=>{let{url:_,data:k,key:I}=e,C=I===zd.Wj.STARRATING,R=I===zd.Wj.BRAND,j=I===zd.Wj.PRICERANGE,B=I===zd.Wj.AIRPORTANDRAILWAYSTATION,H=I===zd.Wj.PRICETYPE,U=I===zd.Wj.HOTAREA,V=I===zd.Wj.POPULARFILTERS,G=I===zd.Wj.DISCOUNTS,q=I===zd.Wj.ZONES;I=C?"starlist":I;let z=k.length,J="";return j?this.formatePriceRange(_,k):B?this.formateAirportTrainStation(_,k):R?this.fotmateBrand(_,k):U?this.fotmateHotArea(_,k):H?this.formatePriceType(_,k):(k.forEach(((e,_)=>{let k=_===z-1;J+=V?k?e.filterId:"".concat(e.filterId,","):G?k?"".concat(e.subValue,"|").concat(e.filterId):"".concat(e.subValue,"|").concat(e.filterId,","):q?k?e.value.split("|")[0]:"".concat(e.value.split("|")[0],","):k?e.value:"".concat(e.value,",")})),link_replaceOrSplice(_,I,J))},this.updateWithFilter=e=>{let _=(0,li.MA)(e),k=window.location.href;return Object.keys(_).map((e=>{let I=_[e].list;(0,Ms.kJ)(I)&&(k=this.handler({key:e,url:k,data:I}))})),k},this.removeEDMHotelList=e=>e.replace(/([?&])topHotelIds=[^&]*(&?)/,((e,_,k)=>"?"===_?"?":k)),this.encode_Url=e=>{const _=e.replace(/\|/g,"~").split("?")||[];let k=_[1].split("&")||[];k.length>0&&(k=k.map((e=>{const _=e.split("=")||[];return _[1]=encodeURIComponent(_[1]),_.join("=")})));const I=k.join("&");return _[0]+"?"+I},this.updateUrlFilterProperty=(e,_,k,I,C)=>{var R,j;let B=(0,si.en)(e);if((null==B?void 0:B.searchs)&&(null==_?void 0:_.resultType)===Tm.Hotel)return B.searchs.searchType=null==_?void 0:_.resultType,B.searchs.searchWord=null==_?void 0:_.resultWord,B.searchs.searchValue=comMultiSearchWord(_),B.searchs.searchCoordinate=(e=>{let _=[];return(0,Sm.kJ)(e)&&e.length&&(_=e.map((e=>(null==e?void 0:e.coordinateType)?Object.values(e).join("_"):""))),_.join("|")})(null==_?void 0:_.coordinateInfos),B.searchs.filterProperty=Tm.Hotel.toLowerCase(),B.searchs.countryId=null==_?void 0:_.country.geoCode,B.searchs.provinceId=null==_?void 0:_.province.geoCode,B.searchs.city=null==_?void 0:_.city.geoCode,B.searchs.cityName=null==_?void 0:_.city.currentLocaleName,(0,si.Q2)(B.origin+B.pathname,B.searchs);const H=null==k||null===(R=k.search)||void 0===R||null===(j=R.item)||void 0===j?void 0:j.data;if(H instanceof Array){const e=H.reduce(((e,_)=>I.some((e=>e.filterId===_.filterId))?[...e,_]:e),[]),_=this.getSearchValuesIfFromPackObj(C,k);if(null==e?void 0:e.length){const k=(e=>{if(e.length)return e.reduce(((e,_,k)=>{const I=_comSearchWord(null,_);return e+(0===k?I:":".concat(I))}),"")})(e);return B.searchs.searchValue=k,e.every((e=>_[e.filterId]))&&(B.searchs.searchWord=void 0),(0,si.Q2)(B.origin+B.pathname,B.searchs)}}return B.searchs.searchType=void 0,B.searchs.searchWord=void 0,B.searchs.searchValue=void 0,B.searchs.searchCoordinate=void 0,B.searchs.filterProperty=void 0,(0,si.Q2)(B.origin+B.pathname,B.searchs)},this.getFiltersExcludeSearchValue=(e,_)=>{var k,I;const C=null==_||null===(k=_.search)||void 0===k||null===(I=k.item)||void 0===I?void 0:I.data;return"[object Array]"!==Object.prototype.toString.call(C)?e:e.reduce(((e,_)=>-1===(null==C?void 0:C.findIndex((e=>e.filterId===_.filterId)))?[...e,_]:e),[])},this.updateUrl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],k=arguments.length>1?arguments[1]:void 0,I=arguments.length>2?arguments[2]:void 0,C=arguments.length>3?arguments[3]:void 0,R=window.location.href;const j=_.getFiltersExcludeSearchValue(e,I);R=_.updateUrlFilterProperty(R,null==k?void 0:k.filterProperty,I,e,C),R=_.removeEDMHotelList(R),R=_.addFilters2URL(R,j),R=_.handleStarListMapping(R,e),R=_.encode_Url(R),window.history.replaceState(null,"",R)}}addFilters2URL(e,_){let k=["filterId","type","value","subType","childValue","propertyValue","title","clickcount","sumClickcount","isSelect"],I=[];_.forEach((_=>{var C;"80"==_.type&&(go.Z.set("IBU_showtotalamt","".concat(_.value),{expires:7}),"T"===H.default.getByKey("qconfigData.metaPriceTypeFilterRemoveEffectSwitch")&&["exavg","incavg","inctotal"].includes(null===(C=(0,ii.u0)())||void 0===C?void 0:C.display)&&(e=link_replaceOrSplice(e,"display","")));if("15"==_.type&&(e=link_replaceOrSplice(e,"barCurr",(0,li.zC)()),_.priceBarMax>-1&&(e=link_replaceOrSplice(e,"barMax",_.priceBarMax)),_.value)){let k=_.value.split("|")||[];k[0]&&(e=link_replaceOrSplice(e,"lowPrice",k[0])),k[1]&&(e=link_replaceOrSplice(e,"highPrice",k[1]))}let R=[];k.forEach((e=>{_[e]&&R.push(_[e])})),I.push(R.join("*"))}));let C=I.join(",");return e=link_replaceOrSplice(e,"listFilters",C)}handleStarListMapping(e,_){let k=e;if(!_.find((e=>"16"==e.type))){const e=k.split("?")||[];if(e.length){let _=e[1].split("&")||[],I=-1;_.forEach(((e,_)=>{e&&"starlist"==e.split("=")[0]&&(I=_)})),-1!=I&&(_.splice(I,1),k=e[0]+"?"+_.join("&"))}}return k}changeSearchTypeToDestination(e){return-1!=e.indexOf("searchType=H")&&(e=(e=(e=e.replace(/([?&])searchType=H[^&]*(&?)/,((e,_,k)=>"".concat(_,"searchType=CT").concat(k)))).replace(/([?&])searchWord=[^&]*(&?)/,((e,_,k)=>"?"===_?"?":k))).replace(/([?&])searchValue=[^&]*(&?)/,((e,_,k)=>"?"===_?"?":k))),e}}var km,Im=k(48467).default;let Cm=(0,Ni.$j)((e=>{const{initData:_,searchCondition:k,searchBarData:I,filterCondition:C,sortInfo:R,fontColor:j,renderFilters:B}=e;return{initData:_,sortInfo:R,searchCondition:k,searchBarData:I,filterCondition:C,fontColor:j,renderFilters:B}}))(km=class ReplaceUrl extends BaseReplace{constructor(e){var _;super(e),_=this,this.init=async function(){var e;let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{searchCondition:I,searchBarData:C,filterCondition:R,sortInfo:j,initData:B,dispatch:U,renderFilters:V={}}=_.props;U(updateRecommendTimes(0));let G={},z=(0,J.hZ)(V);z=_.getCombineSearchValueFilters(z,C,B),_.updateUrl(z,V,C,B),_.clearSearchBarKeyWords(z,U,C),$a.Z.getState().directSearch||(I.directSearch=0),G=list({initData:B,searchCondition:I,filterCondition:R,sortInfo:j,pageNo:1,edmHotelData:(0,ii.WH)("edmHotelData")}),G.filters=z,G.originFilters_left=z||[],G.breathing=!0,G.resetWholePage=!0,G.searchBarData=C,G.queryTag=zd.L7.normal,G.preHotelIds=getPreHotelIds({store:$a.Z}),G.preHotelCount=G.preHotelIds.length||0;const Q=null==B?void 0:B.openBatch;Q&&(G.batchSearch={},G.batchSearch.openBatch=1);const ee="10320668268"==H.default.getByKey("pageId");let te=!!ee,ne={};if(te){ne=JSON.parse(JSON.stringify(G));const e=H.default.getByKey("initData.urlChoosedFilters")||[];z.forEach((_=>{let k=e.find((e=>e.type==_.type&&e.value==_.value));"80"==_.type&&ne.filterCondition?ne.filterCondition.priceType=_.value:k||(te=!1)}))}if(ee)if(te){var re,oe;const{loading:e,pending:k,breathing:I}=G;var ie,ae;if(e&&U(toggleAjaxLoad(!0)),k&&U(toggleAjaxPend(!0)),I&&U(toggleAjaxBreath(!0)),delete ne.ssrHotelSearch,delete ne.loading,delete ne.pending,delete ne.breathing,delete ne.resetWholePage,delete ne.resetRecommend,delete ne.filters,delete ne.searchBarData,delete ne.preHotelIds,delete ne.preHotelCount,ne.queryTag="NORMAL",!ne.searchCondition.cityId)ne.searchCondition=Object.assign((null===(ie=H.default.getByKey("initParams"))||void 0===ie||null===(ae=ie.body)||void 0===ae?void 0:ae.searchCondition)||{},ne.searchCondition);if(!ne.searchCondition.keyword){const e=(0,Oo.Z)("featureValue");ne.searchCondition=Object.assign({},ne.searchCondition,{keyword:e})}const C=[{tagType:"TaxDescForAmountshowtype2",tagValue:"T"}];(0,q.nk)(_)&&C.push({tagType:"NewTaxDescForAmountshowtype0",tagValue:""}),(0,q.TL)(_)&&C.push({tagType:"NeedHighlightsModule",tagValue:"T"}),(0,q.JT)(_)&&C.push({tagType:"MultiMainHotelPics",tagValue:"T"}),(0,q.bd)(_)&&C.push({tagType:"MetaNewPriceLayer",tagValue:"T"}),ne.searchCondition.dynamicRefresh="F";let R=new Promise((e=>{var _;Im({url:"/HotelSearch",silence:!0,singleton:!0,currency:(0,li.zC)(),data:Object.assign(ne,{guideLogin:"T",needTagMerge:"T",tags:C}),genk:!0,genKeyParam:{a:0,b:ne.searchCondition.checkIn,c:ne.searchCondition.checkOut,d:null===(_=H.default.getByKey("cargo.locale"))||void 0===_?void 0:_.toLocaleLowerCase(),e:2,f:ne.searchCondition.cityId},timeout:8e3}).then((_=>{let{success:k,fail:I,data:C}=_;const R=C;k((()=>{e(R)})),I((()=>{e()}))}))}));const j=await R,{metaHotel:B={}}=j||{};if(!(0,si.Ew)(B)&&(null==B||null===(re=B.card)||void 0===re||null===(oe=re.base)||void 0===oe?void 0:oe.hotelId)){let e=(0,li.DS)((0,ci.Z)(j,"metaHotel",{}),null==j?void 0:j.isNeedCalendarRecommend);U(updateMetaHotel(e))}else U(clearMetaHotel())}else U(clearMetaHotel());U(resetFoldStatus(!0));JSON.parse(JSON.stringify(G));const beforeFetch=e=>(te||(0,si.Ew)(e)||(e.queryTag=zd.L7.normal),e);G.isReplaceUrl=!0,Object.assign(G,k,{checkBatchRefresh:_.checkBatchRefresh.bind(_)}),$a.Z.dispatch(updataBatchParams({isBatch:!1})),(null===(e=window)||void 0===e?void 0:e.batchReqTimers)&&clearTimeout(window.batchReqTimers),U(updateLongList(G,beforeFetch)).then((e=>{if($a.Z.dispatch(updataBatchParams({isBatch:!1})),_.$safeLog("logUbtHotelList",e),-1!==um((0,ci.Z)(e,"hotelList.list",[]))){let e=list({initData:B,searchCondition:I,filterCondition:R,sortInfo:j,pageNo:1,edmHotelData:(0,ii.WH)("edmHotelData")});e.resetRecommend=!0,e.queryTag=zd.L7.recommend,e.searchBarData=C,U(updateLongList(e)),U(toggleAjaxLoadType(zd.L7.recommend))}}))},this.checkBatchRefresh=e=>{const{dispatch:_}=this.props,{batchRefreshPolicy:k={},isNeedRecommend:I,hotelList:C=[],fontColor:R,isMetaPage:j=!1,preBatchRefresh:B}=e||{};if((null==k?void 0:k.nextBatchTime)&&+k.nextBatchTime>0&&!j&&"T"!==I&&"labelColor"===R&&(null==C?void 0:C.length)&&"T"==H.default.getByKey("qconfigData.enableBatchRefreshPolicy")){let e={};e.batchRefreshHotelIds=C.map((e=>({id:e.hotelBasicInfo.hotelId})))||[],e.batchRefreshpolicy=B,e.isBatch=!0,e.checkBatchRefresh=this.checkBatchRefresh.bind(this),e.breathing=!1,_(updataBatchParams({isBatch:!0})),this.init(e)}},this.ubtMapping={logUbtHotelList:U.KD},this.isSamePriceType=(e,_)=>{const k=(0,Vl.oG)(e).filter((e=>"80"===e.type)),I=(0,Vl.oG)(_).filter((e=>"80"===e.type));return $f()(k,I)}}componentDidUpdate(e){$f()(e.renderFilters,this.props.renderFilters)||$a.Z.getState().shouldReplaceUrl&&this.init({})}render(){return null}})||km;var Pm,Lm=k(48467).default;const{getCorrectedSelectedFilterList:Nm}=dm.Z;let Dm=(0,Di.zy)((e=>{let{selectedFilterList:_,replaceAllSelected:k,updateIsShowWalkDrive:I}=e;return{selectedFilterList:_,replaceAllSelected:k,updateIsShowWalkDrive:I}}))(Pm=(0,Ni.$j)((e=>{const{initData:_,searchCondition:k,searchBarData:I,filterCondition:C,sortInfo:R,fontColor:j,renderFilters:B}=e;return{initData:_,sortInfo:R,searchCondition:k,searchBarData:I,filterCondition:C,fontColor:j,renderFilters:B,filterProperty:null==B?void 0:B.filterProperty}}))(Pm=class ReplaceUrl extends BaseReplace{constructor(e){var _;super(e),_=this,this.init=async function(){var e;let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{searchCondition:I,searchBarData:C,filterCondition:R,sortInfo:j,initData:B,dispatch:U,renderFilters:V={},selectedFilterList:G,replaceAllSelected:z,updateIsShowWalkDrive:J}=_.props;U(updateRecommendTimes(0));let Q={},ee=_.getCombineSearchValueFilters(G,C,B);_.updateUrl(ee,V,C,B),_.clearSearchBarKeyWords(ee,U,C),$a.Z.getState().directSearch||(I.directSearch=0),Q=list({initData:B,searchCondition:I,filterCondition:R,sortInfo:j,pageNo:1,edmHotelData:(0,ii.WH)("edmHotelData")}),Q.filters=ee,Q.originFilters_left=ee||[],Q.breathing=!0,Q.resetWholePage=!0,Q.searchBarData=C,Q.queryTag=zd.L7.normal,Q.preHotelIds=getPreHotelIds({store:$a.Z}),Q.preHotelCount=Q.preHotelIds.length||0;const te=null==B?void 0:B.openBatch;te&&(Q.batchSearch={},Q.batchSearch.openBatch=1);const ne="10320668268"==H.default.getByKey("pageId");let re=!!ne,oe={};if(re){oe=JSON.parse(JSON.stringify(Q));const e=H.default.getByKey("initData.urlChoosedFilters")||[];ee.forEach((_=>{let k=e.find((e=>e.type==_.type&&e.value==_.value));"80"==_.type&&oe.filterCondition?oe.filterCondition.priceType=_.value:k||(re=!1)}))}if(ne)if(re){var ie,ae;const{loading:e,pending:k,breathing:I}=Q;var le,se;if(e&&U(toggleAjaxLoad(!0)),k&&U(toggleAjaxPend(!0)),I&&U(toggleAjaxBreath(!0)),delete oe.ssrHotelSearch,delete oe.loading,delete oe.pending,delete oe.breathing,delete oe.resetWholePage,delete oe.resetRecommend,delete oe.filters,delete oe.searchBarData,delete oe.preHotelIds,delete oe.preHotelCount,oe.queryTag="NORMAL",!oe.searchCondition.cityId)oe.searchCondition=Object.assign((null===(le=H.default.getByKey("initParams"))||void 0===le||null===(se=le.body)||void 0===se?void 0:se.searchCondition)||{},oe.searchCondition);if(!oe.searchCondition.keyword){const e=(0,Oo.Z)("featureValue");oe.searchCondition=Object.assign({},oe.searchCondition,{keyword:e})}const C=[{tagType:"TaxDescForAmountshowtype2",tagValue:"T"}];(0,q.nk)(_)&&C.push({tagType:"NewTaxDescForAmountshowtype0",tagValue:""}),(0,q.JT)(_)&&C.push({tagType:"MultiMainHotelPics",tagValue:"T"}),(0,q.TL)(_)&&C.push({tagType:"NeedHighlightsModule",tagValue:"T"}),(0,q.bd)(_)&&C.push({tagType:"MetaNewPriceLayer",tagValue:"T"}),oe.searchCondition.dynamicRefresh="F";let R=new Promise((e=>{var _;Lm({url:"/HotelSearch",silence:!0,singleton:!0,currency:(0,li.zC)(),data:Object.assign(oe,{guideLogin:"T",needTagMerge:"T",tags:C}),genk:!0,genKeyParam:{a:0,b:oe.searchCondition.checkIn,c:oe.searchCondition.checkOut,d:null===(_=H.default.getByKey("cargo.locale"))||void 0===_?void 0:_.toLocaleLowerCase(),e:2,f:oe.searchCondition.cityId},timeout:8e3}).then((_=>{let{success:k,fail:I,data:C}=_;const R=C;k((()=>{e(R)})),I((()=>{e()}))}))}));const j=await R,{metaHotel:B={}}=j||{};if(!(0,si.Ew)(B)&&(null==B||null===(ie=B.card)||void 0===ie||null===(ae=ie.base)||void 0===ae?void 0:ae.hotelId)){let e=(0,li.DS)((0,ci.Z)(j,"metaHotel",{}),null==j?void 0:j.isNeedCalendarRecommend);U(updateMetaHotel(e))}else U(clearMetaHotel())}else U(clearMetaHotel());U(resetFoldStatus(!0));const beforeFetch=e=>(re||(0,si.Ew)(e)||(e.queryTag=zd.L7.normal),e);Q.isReplaceUrl=!0,Object.assign(Q,k,{checkBatchRefresh:_.checkBatchRefresh.bind(_)}),$a.Z.dispatch(updataBatchParams({isBatch:!1})),(null===(e=window)||void 0===e?void 0:e.batchReqTimers)&&clearTimeout(window.batchReqTimers),U(updateLongList(Q,beforeFetch)).then((e=>{var k;const{combineFilters:H=[],isSupportWalkDriveSort:V}=(null==e?void 0:e.hotelListAddtionInfo)||{};if((null===(k=Q)||void 0===k?void 0:k.queryTag)===zd.L7.normal&&(null==H?void 0:H.length)&&(_.notNeedFreshList=!0,z(Nm({newSelectedFilterList:H,isSupportWalkDriveSort:V}))),J(V),$a.Z.dispatch(updataBatchParams({isBatch:!1})),_.$safeLog("logUbtHotelList",e),-1!==um((0,ci.Z)(e,"hotelList.list",[]))){let e=list({initData:B,searchCondition:I,filterCondition:R,sortInfo:j,pageNo:1,edmHotelData:(0,ii.WH)("edmHotelData")});e.resetRecommend=!0,e.queryTag=zd.L7.recommend,e.searchBarData=C,U(updateLongList(e)),U(toggleAjaxLoadType(zd.L7.recommend))}}))},this.checkBatchRefresh=e=>{const{dispatch:_}=this.props,{batchRefreshPolicy:k={},isNeedRecommend:I,hotelList:C=[],fontColor:R,isMetaPage:j=!1,preBatchRefresh:B}=e||{};if((null==k?void 0:k.nextBatchTime)&&+k.nextBatchTime>0&&!j&&"T"!==I&&"labelColor"===R&&(null==C?void 0:C.length)&&"T"==H.default.getByKey("qconfigData.enableBatchRefreshPolicy")){let e={};e.batchRefreshHotelIds=C.map((e=>({id:e.hotelBasicInfo.hotelId})))||[],e.batchRefreshpolicy=B,e.isBatch=!0,e.checkBatchRefresh=this.checkBatchRefresh.bind(this),e.breathing=!1,_(updataBatchParams({isBatch:!0})),this.init(e)}},this.ubtMapping={logUbtHotelList:U.KD},this.isSamePriceType=(e,_)=>{const k=(0,Vl.oG)(e).filter((e=>"80"===e.type)),I=(0,Vl.oG)(_).filter((e=>"80"===e.type));return $f()(k,I)},this.notNeedFreshList=!1}componentDidUpdate(e){const{selectedFilterList:_,filterProperty:k}=e,{selectedFilterList:I,filterProperty:C}=this.props;$f()(_,I)&&$f()(k,C)||this.notNeedFreshList?this.notNeedFreshList=!1:$a.Z.getState().shouldReplaceUrl&&this.init({})}render(){return null}})||Pm)||Pm;var Am=k(86026),Rm=k(27907);const xm={logLoadingShow:()=>({actionType:"load",logValue:{position:"listPage init"},logKey:"ibu_htl_".concat((0,pa.h8)(),"_loading_show")})},jm=(0,Ni.$j)((e=>{const{pending:_}=e.ajaxLoad||{};return{pending:_}}))((e=>{const{pending:_}=e;return(0,he.useEffect)((()=>{_&&Rm.p.call({ubtMapping:xm},"logLoadingShow")}),[_]),_?fe().createElement(Am.Z,{platform:"Online",loadingPreset:"goodPrice",pageId:H.default.getByKey("pageId")}):null}));var Bm=k(10707),Mm=k(39621).default,Fm=k(67294);class Cobrand extends Mm{constructor(e){super(e)}componentDidMount(){const e=H.default.getByKey("cargo.site");let _="HK"===e?"cn":"EN"===e?_:e.toLowerCase(),k=(0,Js.zC)(),I=document.getElementsByClassName("mc-hd__logo")[0];I&&(I.style.backgroundImage="url("+this.props.pic+")",I.style.backgroundSize="contain",I.href="https://www.sawadee.com/?lg="+_+"&cur="+k+"&p=trip.com"),setTimeout((()=>{let e=document.getElementsByClassName("mc-hd__logo-con")[0],_=document.getElementById("sawadee_tripLogo");e.parentNode&&e.parentNode.insertBefore(_,e.nextSibling),document.getElementById("sawadee_tripLogo").style.display="block"}),100),document.getElementsByClassName("mc-hd__nav-con")[0]&&(document.getElementsByClassName("mc-hd__nav-con")[0].style.display="none")}render(){return Fm.createElement("div",{id:"sawadee_tripLogo",style:{display:"none"}},Fm.createElement("a",{className:"sawadee_trip_img",href:""},"Trip.com"),Fm.createElement("span",{className:"sawadee_powerby"},this.$translate("key.hotel.navigation.bar.powered.by")||"Powered by"))}}class Partner extends Cobrand{constructor(e){super(e)}}var Hm=k(6779),Km=k(35466),Um=k(39621).default,Zm=k(67294);class CookieBannerComponent extends Um{constructor(e){super(e),this.onConfirm=e=>{},this.ubtMapping={logCookieBannerAcceptState:e=>{let _=(0,Le.h8)();return{logDesc:"cookie_banner_click",logKey:"ibu_htl_".concat(_,"_cookie_banner_click"),actionType:"click",logValue:{page:(0,Le.h8)(),result:e}}}},this.config=e.onConfirm||{}}render(){return Ce.Z?Zm.createElement(Km.P,null,Zm.createElement(Hm.Z,{onConfirm:this.onConfirm})):null}}const Vm={mapView:()=>Promise.all([k.e(840),k.e(1)]).then(k.bind(k,31622)),listNewMapView:()=>Promise.all([k.e(840),k.e(582)]).then(k.bind(k,12401)),listNewGoogleOneTap:()=>Promise.all([k.e(840),k.e(933)]).then(k.bind(k,30155)),listNewSafariOneTap:()=>Promise.all([k.e(840),k.e(933)]).then(k.bind(k,77909)),listContinueBook:()=>Promise.all([k.e(840),k.e(933)]).then(k.bind(k,67928)),recentHotels:()=>k.e(101).then(k.bind(k,67612)),reviewList:()=>"T"===(H.default.getByKey("qconfigData.switchNewReviewList")||"T")?Promise.all([k.e(840),k.e(646)]).then(k.bind(k,63561)):Promise.all([k.e(840),k.e(646)]).then(k.bind(k,1841)),nearbyHotels:()=>Promise.all([k.e(840),k.e(646)]).then(k.bind(k,64400)),hotelInfo:()=>Promise.all([k.e(840),k.e(608)]).then(k.bind(k,38266))};var Wm=k(39621).default,Gm=k(48467).default,$m=k(67294);function asyncComponent(e){return Ce.Z?class AsyncComponent extends Wm{constructor(){super(...arguments),this.state={component:null,masterHotelId:0},this._getApiData=async()=>{let{isCallMapApi:e=!1}=this.props,_={};if(e){let{hotelBasicInfo:{hotelId:e},positionInfo:{cityId:k}}=this.props.initData,I={masterHotelId:e,cityId:k,mapType:"gg"===this.props.mapType?"GOOGLE":"MAPBOX",isNewMap:"1"},[C,R]=await Promise.all([this._fetchPoi(I),Promise.resolve([])]);Object.assign(_,{poiList:C,nearByHotelList:R,masterHotelId:e})}return _},this._getNewNearbyPoi=e=>{if(e.length){var _;return{popular:e.find((e=>1===e.id)),transport:e.find((e=>2===e.id)),landmarks:e.find((e=>3===e.id)),dining:e.find((e=>4===e.id)),shopping:e.find((e=>5===e.id)),initListTab:(null===(_=e.find((e=>{var _;return 1!==e.id&&(null===(_=e.places)||void 0===_?void 0:_.length)>0})))||void 0===_?void 0:_.id)||2,initTopTab:0}}return{initTopTab:1}},this._fetchPoi=async e=>{var _;const k=null===(_=window)||void 0===_?void 0:_.devicePixelRatio,I=k>1.5?"H":k>1&&k<=1.5?"M":"L";return await Gm({url:"/getPlaceInfo",bff:!0,data:e,deviceConfig:I,silence:!0}).then((e=>{let{data:_}=e;const k=[];for(let e in _){var I;(null===(I=_[e])||void 0===I?void 0:I.id)&&(k[e]=_[e])}return this._getNewNearbyPoi(k)}))}}async componentDidMount(){const{default:_}=await Vm[e]();let k=await this._getApiData();window._apiData=k,this.setState({component:$m.createElement(_,(0,C.Z)({},this.props,k)),masterHotelId:k.masterHotelId,apiData:k})}render(){return"reviewList"===e?this.state.component||$m.createElement("div",{className:"roomlist-loading"},$m.createElement("div",{className:"m-loading-img"})):this.state.component}}:null}class webPush_view_View extends se.default{constructor(e){super(e)}render(){return Ce.Z&&(0,mo.i7)()?this.verifyRender():null}}var qm=function(e){function ErrorBoundary(){return e.apply(this,arguments)||this}xh()(ErrorBoundary,e);var _=ErrorBoundary.prototype;return _.componentDidCatch=function componentDidCatch(e,_){var k={name:this.props.name,version:this.props.version,errorName:null==e?void 0:e.name,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,componentStack:null==_?void 0:_.componentStack,url:window.location.href};throw(0,Ge.v4)("ibu_component_usage_onerror",JSON.stringify(k)),e},_.render=function render(){return this.props.children},ErrorBoundary}(he.Component),zm=function track(e){if(Ym()){var _=Object.assign({},e,{url:Jm()});(0,Ge.v4)("ibu_component_usage_onload",JSON.stringify(_))}},Ym=function reportOrNot(){var e=100*Math.random()<10;try{return!!window.location.href.includes("forceToReport=true")||e}catch(_){return e}},Jm=function getUrl(){var e,_=null==(e=window.location.href.split("?"))?void 0:e[0];return _.length>0&&"/"===_[_.length-1]&&(_=_.substring(0,_.length-1)),_},Xm=function(e){function ErrorBoundary(){return e.apply(this,arguments)||this}xh()(ErrorBoundary,e);var _=ErrorBoundary.prototype;return _.componentDidCatch=function componentDidCatch(e,_){var k={name:this.props.name,version:this.props.version,errorName:null==e?void 0:e.name,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,componentStack:null==_?void 0:_.componentStack,url:window.location.href};throw(0,Ge.v4)("ibu_component_usage_onerror",JSON.stringify(k)),e},_.render=function render(){return this.props.children},ErrorBoundary}(he.Component),Qm=function track(e){if(eg()){var _=Object.assign({},e,{url:tg()});(0,Ge.v4)("ibu_component_usage_onload",JSON.stringify(_))}},eg=function reportOrNot(){var e=100*Math.random()<10;try{return!!window.location.href.includes("forceToReport=true")||e}catch(_){return e}},tg=function getUrl(){var e,_=null==(e=window.location.href.split("?"))?void 0:e[0];return _.length>0&&"/"===_[_.length-1]&&(_=_.substring(0,_.length-1)),_},ng=k(57590),rg={errorMsg:"Regist Service Worker Fail."},og=function getSubscription(e,_){return void 0!==window.navigator.serviceWorker?((0,lp.d8)("ibu_webpush_scope",encodeURIComponent(_),7,function getHost(){return new RegExp("(tripcorp|tripqate)").test(window.location.host)?window.location.host.replace(/\w+.\w+.qa.nt./,""):"trip.com"}(),"/"),navigator.serviceWorker.register("/m/webpush/sw.js",_?{scope:_}:void 0).then((function(_){return _.update().then(function(){var _=qh()(Yh().mark((function _callee2(_){return Yh().wrap((function _callee2$(k){for(;;)switch(k.prev=k.next){case 0:if(!_||!_.pushManager){k.next=2;break}return k.abrupt("return",_.pushManager.getSubscription().then(function(){var k=qh()(Yh().mark((function _callee(k){return Yh().wrap((function _callee$(I){for(;;)switch(I.prev=I.next){case 0:if(!k){I.next=2;break}return I.abrupt("return",k);case 2:return I.abrupt("return",_.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}));case 3:case"end":return I.stop()}}),_callee)})));return function(e){return k.apply(this,arguments)}}()));case 2:throw Error("Update Service Worker Failed.");case 3:case"end":return k.stop()}}),_callee2)})));return function(e){return _.apply(this,arguments)}}())})).then((function(e){return e})).catch((function(e){return rg}))):Promise.resolve(rg)},ig=k(31968),ag={granted:"SUBSCRIBE",denied:"UNSUBSCRIBE",default:"UNKNOWN"},lg=function reportPermission(e){return e},sg=function getPermission(){if("undefined"!=typeof window&&window.Notification&&window.Notification.requestPermission)try{return Notification.requestPermission().then(lg)}catch(e){if(e instanceof TypeError){return function notificationRequestPermission(){return new Promise(Notification.requestPermission)}().then(lg)}return Promise.resolve("default")}return Promise.resolve("default")};const cg=function AnalyticsWrapper(e,_,k){return void 0===k&&(k=!1),function(I){return(0,he.useEffect)((function(){Qm(_)}),[]),e.displayName=_.name+":"+_.version,k?fe().createElement(Xm,{name:_.name,version:_.version},fe().createElement(e,I)):fe().createElement(e,I)}}((function WebPush(e){var _=e.meta,k=_.page,I=_.productLine,C=_.platform,R=_.channel,j=e.scope,B=void 0===j?"/":j,H=(0,pt.N)().locale,U=function getPublicKey(){var e=(0,he.useState)(!1),_=e[0],k=e[1],I=(0,he.useState)(""),C=I[0],R=I[1];return(0,he.useEffect)((function(){"undefined"==typeof window||window.navigator&&window.navigator.userAgent&&!(0,lp.i7)(window.navigator.userAgent)||void 0!==window.navigator.serviceWorker&&(0,ng.k)("scopedVariable")("/m/webpush/publicKey").then((function(e){k(!0),R(e.publicKey)})).catch((function(e){k(!1),R("")}))}),[]),{publicKey:C,isInitPublicKey:_}}(),V=U.publicKey,G=U.isInitPublicKey,q=(0,he.useCallback)((function(){return{locale:H,page:k,productLine:I,platform:C,channel:R}}),[H,k,I,C,R]);return(0,he.useEffect)((function(){G&&V&&Promise.all([sg(),og(V,B)]).then((function(e){var _=e[0],k=e[1];k.errorMsg||(0,Ge.lR)().then((function(e){(function subscribe(e,_,k,I){var C=(0,mf.wK)(),R=C.aid,j=C.sid,B=(0,mf.vz)(),H=B.aid,U=B.sid;return(0,ig.W)({url:"/m/webpush/subscribe",method:"POST",data:{aid:R||H,sid:j||U,subscription:e,meta:I,vid:_,userAgent:"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",webNotification:k&&ag[k]?ag[k]:"UNKNOWN"}}).then((function(e){return e}))})(k,""+e.vid,_,q()).then((function(e){return!0}))}))}))}),[G,V]),null}),{name:"@ctrip/trip-component-platform-webpush",version:"1.0.9"});var ug={appId:"330153"},dg="ibu_online_permission_cls_ct",pg="ibu_online_permission_cls_gap",hg="key_pre_permission_popup_title",fg="key_pre_permission_popup_subtitle",mg="key_pre_permission_btn",gg=function getHost(){return new RegExp("(tripcorp|tripqate)").test(window.location.host)?window.location.host.replace(/\w+.\w+.qa.nt./,""):"trip.com"},vg=function useInitStatus(){var e=(0,he.useState)(!1),_=e[0],k=e[1],I=(0,he.useState)(!1),C=I[0],R=I[1],j=(0,he.useState)(""),B=j[0],H=j[1];return(0,he.useEffect)((function(){"undefined"==typeof window||window.navigator&&window.navigator.userAgent&&!(0,lp.i7)(window.navigator.userAgent)||_||setTimeout((function(){var e=function visibleStatus(){var e=(new Date).getTime(),_="",k=!0;return(0,lp.ej)(dg)&&parseInt((0,lp.ej)(dg),10)>=3?(_="times_limit",k=!1):(0,lp.ej)(pg)&&e-parseInt((0,lp.ej)(pg),10)<=1728e5?(_="interval_limit",k=!1):"undefined"!=typeof window&&window.Notification&&"default"!==window.Notification.permission&&(_="subscriptionstatus",k=!1),{displayFailureReason:_,show:k}}(),_=e.displayFailureReason;e.show?(R(!0),function shownRecord(){var e=(new Date).getTime(),_=(0,lp.ej)(dg)?parseInt((0,lp.ej)(dg),10):0;(0,lp.d8)(dg,""+(_+1),365,gg(),"/"),(0,lp.d8)(pg,""+e,365,gg(),"/")}()):(R(!1),H(_)),k(!0)}),500)}),[]),{isInit:_,show:C,hideReason:B,setShow:R}};const yg=function AnalyticsWrapper(e,_,k){return void 0===k&&(k=!1),function(I){return(0,he.useEffect)((function(){zm(_)}),[]),e.displayName=_.name+":"+_.version,k?fe().createElement(qm,{name:_.name,version:_.version},fe().createElement(e,I)):fe().createElement(e,I)}}((function OnlineLoginPopup(e){var _=e.meta,k=e.onClose,I=e.onVisibleChangeByPriority,C=e.onVisibleChange,R=(0,pt.N)().locale,j=(0,he.useState)(""),B=j[0],H=j[1],U=(0,he.useState)(!1),V=U[0],G=U[1],q=vg(),z=q.show,J=q.setShow,Q=q.isInit,ee=q.hideReason,te=function useText(){var e=(0,et.Q)(ug),_=(0,he.useState)(""),k=_[0],I=_[1],C=(0,he.useState)(""),R=C[0],j=C[1],B=(0,he.useState)(""),H=B[0],U=B[1];return(0,he.useEffect)((function(){I(e[hg]||"Allow notifications"),j(e[fg]||"Don't miss out! Allow notifications so you're always the first to know."),U(e[mg]||"Allow")}),[]),{title:k,subTitle:R,btnTxt:H}}(),ne=te.title,re=te.subTitle,oe=te.btnTxt;!function useExposure(e,_,k,I){(0,he.useEffect)((function(){if(e){if(!_&&!k)return;(0,Ge.lR)().then((function(e){(0,Ge.v4)("ibu_mkt_online_webnotification_pre_permission_exposure",JSON.stringify({displayStatus:_?"success":"faillure",displayFailureReason:k,displayTimes:(0,lp.ej)(dg),vid:e.vid,exposureTime:(new Date).toString(),locale:I}))}))}}),[e,_,k,I])}(Q,z,ee,R),(0,he.useEffect)((function(){Q&&(!z&&I&&I(),C&&C(z))}),[Q,z,I,C]);var ie=(0,he.useCallback)((function(e){(0,Ge.lR)().then((function(_){(0,Ge.v4)("ibu_mkt_online_webnotification_pre_permission_action",JSON.stringify({action:e,vid:_.vid,actionTime:(new Date).toString(),locale:R}))}))}),[R]);return fe().createElement("div",{className:"online-prepermission-popup "+(z?"show":"hide")+" "+B},fe().createElement("div",{className:"popup-logo"}),fe().createElement("i",{className:"close-icon fi fi-close",onClick:function onClick(){!function onClose(){J(!1),H("closed"),ie("close"),k&&k()}()}}),fe().createElement("div",{className:"content-con"},ne&&fe().createElement("div",{className:"popup-title",dangerouslySetInnerHTML:{__html:ne}}),re&&fe().createElement("div",{className:"popup-subtitle",dangerouslySetInnerHTML:{__html:re}}),oe&&fe().createElement("div",{className:"popup-btn",onClick:function onPrimaryClick(){J(!1),H("closed"),ie("allow"),G(!0)},dangerouslySetInnerHTML:{__html:oe}})),V&&fe().createElement(cg,{meta:_,scope:"/"}))}),{name:"@ctrip/trip-component-platform-online-prepermission-popup",version:"1.0.10"});var bg=k(67294);class webPush_WebPush extends webPush_view_View{constructor(e){super(e),this.webpushListener=null,this.webPushFuction=()=>{const{show:e}=this.state,_=document.getElementById("gg_prompt_parent_id");"hidden"===document.visibilityState&&!e&&this.setState({show:!(null==_?void 0:_.innerHTML)})},this.verifyRequest=e=>{this.timeout&&window.clearTimeout(this.timeout),this.timeout=window.setTimeout((()=>{this.setState({show:!0})}),Number(e))},this.state={show:!1},this.countDown=!0}componentDidMount(){this.webpushListener=document.addEventListener("visibilitychange",this.webPushFuction)}componentWillUnmount(){this.webpushListener&&document.removeListener("visibilitychange",this.webPushFuction),this.webpushListener=null,this.timeout&&window.clearTimeout(this.timeout)}componentDidUpdate(e){const{show:_}=this.state;e.countDown&&!_&&this.verifyRequest(e.countDown)}verifyRender(){const e=(0,Le.zQ)(),{show:_}=this.state,{countDown:k}=this.props,I={locale:H.default.getByKey("cargo.locale")||"",page:e,productLine:"HOTEL",platform:"ONLINE_SITE",channel:"TRIP"};return k&&!_&&this.verifyRequest(k),_?bg.createElement(yg,{meta:I}):null}}class NonActionListener extends se.default{constructor(e){super(e),this.ubtMapping={allpageNonAction:Xs.rB},this.counter=()=>{this.count=this.count+1e3},this.nonActionListener=(0,Ie.P2)((()=>{const e=this.count/1e3;this.count=0,e>=60&&this.$safeLog("allpageNonAction",e)}),1e3),this.addNonActionListener=()=>{this.timer=setInterval(this.counter,1e3),document.addEventListener("scroll",this.nonActionListener)},this.removeNonActionListener=()=>{this.timer&&clearInterval(this.timer),document.removeEventListener("scroll",this.nonActionListener)},this.count=0,this.timer}componentDidMount(){this.addNonActionListener()}componentWillUnmount(){this.$safeLog("allpageNonAction",this.count/1e3),this.removeNonActionListener()}render(){return null}}const _g=0,wg=2,Eg=3,mapType=e=>{switch(e){case _g:return 0;case wg:return 1;case Eg:return 2;default:return""}},Sg={loginSuccess:e=>({logKey:"ibu_htl_allpage_edm_login_success",actionType:"click",logValue:{pageName:(0,pa.h8)(),type:mapType(e)},keyId:"188672"}),dialogShow:e=>({logKey:"ibu_htl_allpage_edm_window_show",actionType:"load",logValue:{pageName:(0,pa.h8)(),type:mapType(e)},keyId:"188678"}),dialogClose:e=>({logKey:"ibu_htl_allpage_edm_window_close_click",actionType:"click",logValue:{pageName:(0,pa.h8)(),type:mapType(e)},keyId:"188682"}),activeButtonClick:e=>({logKey:"ibu_htl_allpage_edm_window_click",actionType:"click",logValue:{pageName:(0,pa.h8)(),type:mapType(e)},keyId:"188681"})};var Og=k(39621).default,Tg=k(48467).default,kg=k(35425).default,Ig=k(24367).default;function edmDialog_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function edmDialog_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?edmDialog_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):edmDialog_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const Cg=0,Pg=1,Lg=2,Ng=3,Dg="showLogin",Ag="register",Rg="toMember",xg="hasInvokedUserPropertyEDM";const jg=class EdmDialog extends Og{constructor(e){super(e),this.ubtMapping=edmDialog_objectSpread(edmDialog_objectSpread({},Sg),{},{logToastShow:U.cQ}),this.fetchApi=async()=>{var e;const{edmHotelData:_,utoken:k}=this.state;let I=await Tg({url:"/userPropertyGet",data:{edmHotelData:_,utoken:k},silence:!0});if(!(null===(e=I.data)||void 0===e?void 0:e.edmLoginGuide))return;ke.y7.setDirect(xg,"1");let{edmLoginGuide:{edmUserStatus:C}={}}=I.data||{};switch(C){case Pg:kg({content:this.$translate("key.hotel.detail.membership.success"),fclass:""}),this.$safeLog("logToastShow",19,this.$translate("key.hotel.detail.membership.success"),ne.Oc.MEMBERSHIP_SUCCESS_KEY);break;default:this.handleNotLogin(I.data)}},this.handleNotLogin=e=>{let{edmLoginGuide:{text:_,buttonText:k,tagText:I,email:C,edmUserStatus:R}={}}=e||{};this.$safeLog("dialogShow",R),Ig.show({Child:popMask_GoldenMask,data:{title:this.$translate("key.hotel.homepage.gold.membership.free.trial.popup"),subTitle:_,btnMsg:k,label:{memberType:7,memberName:I,customerClass:"edm-discount-member"},onClick:()=>{this.gotoLogin(R,C)}},header:"close",animation:!0,callback:e=>{"CLOSE"===e&&this.$safeLog("dialogClose",R)},fclass:"goldenInfo edm-discount"})},this.getType=e=>{switch(e){case Cg:return Dg;case Lg:return Ag;case Ng:return Rg;default:return""}},this.gotoLogin=(e,_)=>{let k=this.getType(e);const{onLoginSuccess:I}=this.props,{edmHotelData:C}=this.state;this.$safeLog("activeButtonClick",e),this.$component("Account").action(k,{paramObj:{username:_},successCallback:()=>{this.$safeLog("loginSuccess",e),I&&I(C),kg({content:this.$translate("key.hotel.detail.membership.success"),fclass:""}),this.$safeLog("logToastShow",19,this.$translate("key.hotel.detail.membership.success"),ne.Oc.MEMBERSHIP_SUCCESS_KEY)},failcallback:()=>{}})};let _=(0,ii.WH)("edmHotelData"),k=(0,ii.WH)("utoken");this.state={edmHotelData:_,utoken:k}}componentDidMount(){let e=ke.y7.get(xg);const{edmHotelData:_}=this.state;_&&!e&&this.fetchApi()}render(){return null}};var Bg=k(39621).default,Mg=k(67294);class view_FlightCountDown extends Bg{constructor(e){super(e)}renderBody(){var e,_;const{getReward:k=!1,countDown:I=0,showCountDown:C=!1}=this.state,{flightTaskTripCoins:R={}}=this.props,{subText:j="",tripCoins:H=0,listMainText:U=""}=R,V=ke.y7.get("getTripCoins_flightCross")||!1;return Mg.createElement("div",{className:"flightCountDown",style:{display:C&&!V?"block":"none"}},k?Mg.createElement("div",{className:"getTripConis"},Mg.createElement("div",{className:"showTripCoins"},Mg.createElement(B.Z,{type:"ic_get"}),Mg.createElement("span",{className:"tripCoins"},"+"+H))):Mg.createElement("div",{className:"startCountDown"},Mg.createElement("div",{className:"tripCoinsReward"},Mg.createElement("span",{className:"tripCoins"},"+"+H)),Mg.createElement("div",{className:"progress-bar",id:"progressBar"},Mg.createElement("div",{className:"progress-bg",id:"progressBg",style:{animation:"progressMove ".concat(null==R?void 0:R.countDown,"s linear")}})),Mg.createElement("div",{className:"countDown"},Mg.createElement("span",{className:"timer"},I+"s"))),k?Mg.createElement("div",{className:"toolTipsLayer_1",style:{display:(null===(e=this.state)||void 0===e?void 0:e.getTripcoinsShow)?"block":"none"}},Mg.createElement("span",{className:"arrow"}),Mg.createElement(B.Z,{className:"close",type:"close",onClick:this.closeTripcoinsLayer}),Mg.createElement("div",{className:"content"},Mg.createElement("div",{className:"getTripConisLayer"},Mg.createElement("div",{className:"getTripConisLayer_coins"},Mg.createElement(ColorIcon,{className:"tripcoins-icon",type:"ic_new_trip_coins"}),Mg.createElement("span",null,U)),Mg.createElement("div",{className:"getTripConisLayer_text"},this.$translate("key.hotel.online.crosssell.component.browsetask.awarddesc"))))):Mg.createElement("div",{className:"toolTipsLayer_2",style:{display:(null===(_=this.state)||void 0===_?void 0:_.startCountShow)?"block":"none"}},Mg.createElement("span",{className:"arrow"}),Mg.createElement("div",{className:"content"},Mg.createElement("div",{className:"startCountDownLayer"},Mg.createElement("span",{className:"startCountDownLayer_text"},j)))))}getFatherDOM(){if(Ce.Z){const _=document.getElementById("mod_back_top");var e;if(_&&_.firstChild)return null===(e=_.firstChild)||void 0===e?void 0:e.firstChild}return null}render(){let e=this.getFatherDOM();return e?Nt().createPortal(this.renderBody(),e):null}}var Fg=k(48467).default;class FlightCountDown extends view_FlightCountDown{constructor(e){super(e),this.closeTripcoinsLayer=()=>{this.setState({getTripcoinsShow:!1})},this.state={getReward:!1,countDown:0,startCountShow:!0,getTripcoinsShow:!0,showCountDown:!1}}componentDidMount(){const{flightTaskTripCoins:e={}}=this.props;1==ke.y7.get("flightTaskTripCoins")&&this.setState({countDown:(null==e?void 0:e.countDown)||0,showCountDown:!0});const _=document.getElementById("progressBg"),k=ke.y7.get("getTripCoins_flightCross");if(_&&!k){let _=setInterval((()=>{var k,I;this.setState({countDown:(null===(k=this.state)||void 0===k?void 0:k.countDown)-1}),0==(null===(I=this.state)||void 0===I?void 0:I.countDown)&&(clearInterval(_),Fg({url:"/notifyTaskActionCompleted",singleton:!0,silence:!0,data:{actionCompleteInfo:{userTaskActionId:(null==e?void 0:e.userTaskActionId)||0,actionId:(null==e?void 0:e.actionId)||0}},success:e=>{var _;200==(null==e||null===(_=e.result)||void 0===_?void 0:_.code)&&(this.setState({getReward:!0}),setTimeout((()=>{ke.y7.set("getTripCoins_flightCross",!0)}),5e3))}}))}),1e3);setTimeout((()=>{this.setState({startCountShow:!1})}),5e3)}else this.setState({getReward:!0})}}const Hg={10320668147:"ibu_htl_detailpage_messenger_",10320668268:"ibu_htl_metapage_messenger_"},Kg={logRetainShow:e=>({keyId:"202172",actionType:"load",logKey:"".concat(Hg[e],"load")}),logRetainClick:e=>({keyId:"202176",actionType:"click",logKey:"".concat(Hg[e],"click")})};var Ug=k(82430),Zg=k(77031),Vg=k(61656),Wg=k(39621).default,Gg=k(67294);const $g="hide-facebook-messenger-retain",shouldRenderFbRetainPop=e=>{var _,k,I;const C=(0,H.getGData)(),R=(0,xu.ZP)(),j=null!=ke.Xb.get($g),B=null===(_=C.qconfigData)||void 0===_?void 0:_.facebookMessengerRetain,U=C.cargo,V=[{aid:"15214",sid:"1209572"},{aid:"15214",sid:"1209581"},{aid:"870102",sid:"2082012"}].some((e=>e.aid==R.AllianceID&&e.sid==R.SID));if(!["10320668268","10320668147"].includes(e)||!B||!U||j||!V)return!1;return null===(k=B.locale)||void 0===k?void 0:k.includes(null===(I=U.locale)||void 0===I?void 0:I.replace("-","_"))};class FacebookMessenger extends Wg{constructor(e){var _;super(e),_=this,this.translation={"key.hotel.detailpage.popup.title.fbmes":this.$translate("key.hotel.detailpage.popup.title.fbmes"),"key.hotel.detailpage.popup.content.fbms":this.$translate("key.hotel.detailpage.popup.content.fbms"),"key.hotel.detailpage.popup.title.fbmes.suc":this.$translate("key.hotel.detailpage.popup.title.fbmes.suc")},this.handleMouseLeave=(0,Ie.Ds)((()=>{this.setState({retainMouseShow:!0})}),500),this.clearRetainInterval=()=>{this.retainTimer&&clearInterval(this.retainTimer)},this.closeRetainPop=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?ke.Xb.set($g,!0,{timeout:(new Date).setSeconds(86400)}):ke.Xb.set($g,!0,{timeout:(new Date).setSeconds(31536e3)}),_.clearRetainInterval(),_.mouseEventHandler&&window.document.removeEventListener(_.mouseEventHandler),_.setState({retainClose:!0})},this.ubtMapping={logRetainShow:Kg.logRetainShow,logRetainClick:Kg.logRetainClick},this.container=null,this.mouseEventHandler=null,this.timer=null,this.retainTimer=null,this.retainCountDown=3,this.cacheMarkupResult=null,this.state={init:!1,rendered:!1,retainMouseShow:!1,retainClose:!1,retainIsLogin:!1,retainCountdownTime:3,hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidMount(){const{pageId:e}=this.props;shouldRenderFbRetainPop(e)&&(this.createPortalContainer(),this.setFbAsyncInit(),this.loadSdkAsynchronously(),this.mouseEventHandler=window.document.addEventListener("mouseleave",(e=>{e.pageY<0&&this.handleMouseLeave()})),this.setState({init:!0}))}shouldComponentUpdate(e,_){return!(0,Zg.w)(this.state,_)||!(0,Zg.w)(this.props,e)}componentWillUnmount(){this.clearRetainInterval(),this.mouseEventHandler&&window.document.removeEventListener(this.mouseEventHandler)}createPortalContainer(){this.container=document.createElement("div"),this.container.id="facebook-messanger-container",document.body.appendChild(this.container)}setFbAsyncInit(){var e,_;const k=null===(e=(0,H.getGData)().qconfigData)||void 0===e?void 0:e.facebookMessenger,I=null===(_=(0,H.getGData)())||void 0===_?void 0:_.pageId;window.fbAsyncInit=()=>{FB.init({appId:k.appId,xfbml:!0,autoLogAppEvents:!0,version:k.version}),FB.Event.subscribe("send_to_messenger",(e=>{e&&("rendered"===e.event?(this.$safeLog("logRetainShow",I),this.setState({rendered:!0})):"clicked"===e.event?this.$safeLog("logRetainClick",I):"opt_in"===e.event&&(this.setState({retainIsLogin:!0}),this.retainTimer=setInterval((()=>{this.setState({retainCountdownTime:this.state.retainCountdownTime-1},(()=>{this.state.retainCountdownTime<=0&&(this.clearRetainInterval(),this.closeRetainPop())}))}),1e3)))}))}}loadSdkAsynchronously(){var e;if(document.getElementById("facebook-jssdk"))return;const _=null===(e=(0,H.getGData)().qconfigData)||void 0===e?void 0:e.facebookMessenger,k=document.createElement("script");k.src=_.sdk,k.type="text/javascript",k.async=!0,k.defer=!0,k.crossOrigin="anonymous",k.id="facebook-js-sdk";const I=document.getElementsByTagName("script")[0];I.parentNode.insertBefore(k,I)}createMarkup(){var e,_;if(this.cacheMarkupResult)return this.cacheMarkupResult;const k=(0,H.getGData)(),I=null===(e=k.qconfigData)||void 0===e?void 0:e.facebookMessenger,C=(0,xu.ZP)(),R=(0,ii.u0)(void 0,!0)||{},j={Allianceid:C.AllianceID,Sid:C.SID,Device:"H5",Hotelid:R.hotelid||R.hotel,CityId:R.cityid||R.city,Locale:null==k||null===(_=k.cargo)||void 0===_?void 0:_.locale,Checkin:R.checkin||R.startdate||R.ci,Checkout:R.checkout||R.depdate||R.co,Adults:R.adult,Children:R.children,PageId:null==k?void 0:k.pageId};let B=window.btoa(JSON.stringify(j));return B.length>250&&(this.$safeLog("logExceedLength",{length:B.length,data:j}),delete j.Adults,delete j.Children,B=window.btoa(JSON.stringify(j))),this.cacheMarkupResult={__html:'\n                <div\n                    class="fb-send-to-messenger"\n                    messenger_app_id='.concat((0,Ug.Xv)(I.appId),"\n                    page_id=").concat((0,Ug.Xv)(I.page_id),"\n                    data-ref=").concat(B,'\n                    color="blue"\n                    size="xlarge"\n                    enforce_login="false"\n                    cta_text="').concat((0,Ug.Xv)(I.cta_text),'"\n                ></div>\n            ')},this.cacheMarkupResult}render(){if(!this.state.init||this.state.hasError)return null;const e=this.translation["key.hotel.detailpage.popup.title.fbmes"],_=this.translation["key.hotel.detailpage.popup.content.fbms"],{rendered:k,retainClose:I,retainMouseShow:C}=this.state;return(0,Lt.createPortal)(Gg.createElement("div",{className:j()("facebook-messenger-retain-pop",{show:k&&!I&&C})},Gg.createElement("div",{className:"facebook-messenger-retain-pop_body"},Gg.createElement(Vg.ZP,{platform:Vg.iw.PC,title:this.state.retainIsLogin?this.translation["key.hotel.detailpage.popup.title.fbmes.suc"]:e,content:this.state.retainIsLogin?this.$translate("key.hotel.detailpage.popup.content.fbms.suc",this.state.retainCountdownTime):_,renderIcon:()=>Gg.createElement(Ee.Z,{type:"close"}),ctaInnerHtml:this.createMarkup(),handleCloseClick:()=>{this.closeRetainPop(!0)}}))),this.container)}}FacebookMessenger.defaultProps={pageId:""};const qg=FacebookMessenger;var zg=k(67928),Yg=k(69877);const formatListDeepLink=e=>{const _=e?e.state.tripQuery:(0,ii.u0)(null,!0);let k="ctripglobal://hotel/hotellist?";return Object.keys(_).forEach((e=>{switch(e.toLocaleLowerCase()){case"city":case"cityid":k+="city=".concat(_[e],"&");break;case"province":case"provinceid":k+="province=".concat(_[e],"&");break;case"country":case"countryid":k+="country=".concat(_[e],"&");break;case"listfilters":k+="filters=".concat(JSON.stringify((0,si.Qb)(_[e])),"&");break;case"lat":k+="nearby=".concat(_[e],",").concat(_.lng||_.lon,"&");break;case"optiontype":switch(_[e].toLocaleLowerCase()){case"airport":k+="a=".concat(_.optionId,"&");break;case"railwaystation":k+="r=".concat(_.optionId,"&");break;case"markland":k+="m=".concat(_.optionId,"&");break;case"location":k+="lo=".concat(_.optionId,"&");break;case"zone":k+="zon=".concat(_.optionId,"&");break;case"cityhotelbrand":k+="brand=".concat(_.optionId,"&");break;case"hotel":k+="hid=".concat(_.optionId,"&")}break;case"starlist":k+="star=".concat(_[e],"&");break;case"checkin":case"cin":k+="cin=".concat(_[e].replace("/","-"),"&");break;case"checkout":case"cout":k+="cout=".concat(_[e].replace("/","-"),"&");break;case"barcurr":k+="cur=".concat(_[e],"&");break;case"adult":k+="adt=".concat(_[e],"&");break;case"children":k+="chd=".concat(_[e],"&");break;case"age":k+="ages=[".concat(_[e],"]&")}})),k};var Jg,Xg=k(39621).default;class bed_view_View extends Xg{constructor(e){super(e)}render(){let{renderFilterShowAllHtml:e,renderFilterTypes:_}=this.props;return e.call(this,_.isRadio,"Bed")}}function changeDialogStyle(e){if(e?Th.Z.freeze():Th.Z.unfreeze(),(0,mo.hJ)()){let _=document.querySelector(".map-filter");_&&(_.style.overflowY=e?"visible":"auto")}}function scrollToTitle(e){e&&(window.scrollBy(0,1),setTimeout((()=>{if(document.getElementsByClassName(e).length){let _=0;document.getElementsByClassName("fixedSortV8").length&&(_=document.getElementsByClassName("fixedSortV8")[0].getBoundingClientRect().top+document.getElementsByClassName("fixedSortV8")[0].getBoundingClientRect().height),document.getElementsByClassName(e)[0].getBoundingClientRect().top<_?window.scrollBy({top:document.getElementsByClassName(e)[0].getBoundingClientRect().top-_-1,behavior:"smooth"}):window.scrollBy({top:-1,behavior:"smooth"})}}),0))}let Qg=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[4]||{list:[]},popularFilters:e.renderFilters.quickFilters})),{updateBedType:updateBedType,updateQuickFilters:updateQuickFilters,updateGeneralFilters:updateGeneralFilters})(Jg=decorators(Jg=class Bed extends bed_view_View{constructor(e){var _;super(e),this.show=()=>{sendFilterShowAllTrace({filtertype:"4",filtertypename:this.props.data.title}),this.setState({showStatus:!this.state||!this.state.showStatus},(()=>{this.state.showStatus||scrollToTitle("".concat(this.options.name,"-container"))}))},this.onChange=(0,ed.P2)((e=>{var _;null===(_=this.props)||void 0===_||_._onChange.call(this,[e])}),500),this.clearSelected=()=>{var e;null===(e=this.props._clearSelected)||void 0===e||e.call(this)},this.ubtMapping={logListpageBedChoice:U.O7},this.options={key:"bedTypes_",isQuickFilter:!0,actionType:"BED_UPDATE",actionFun:e.updateBedType,ubtLogName:"logListpageBedChoice",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"BED_UPDATE",filterTypeBFF:"4",name:"bed",isSingle:!0,sequence:(null===(_=this.props)||void 0===_?void 0:_.sequence)||""}}})||Jg)||Jg;function changingPriceRangeFilter(e){return{type:"PRICERANGE_CHANGING",payload:e}}var ev=k(39621).default;function tip_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function tip_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?tip_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):tip_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class Tip extends ev{constructor(e){super(e),this.tipRef=fe().createRef()}componentDidMount(){this.calcTooltipPosition(this.tipRef.current)}getDomBound(e){if(!e)return null;return{x:e.getBoundingClientRect().left,width:e.offsetWidth}}calcTooltipPosition(e){const _=this.getDomBound(e);if(!_)return{width:40};const{x:k,width:I}=_;return{width:I,x:k}}render(){let e=this.props.show?{display:"block"}:{visibility:"hidden"};const{width:_}=this.calcTooltipPosition(this.tipRef.current),k=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx)),I=k?{right:"-".concat(_/2-10,"px")}:{left:"-".concat(_/2-10,"px")},C=k?{right:"".concat(_/2-7,"px")}:{left:"".concat(_/2-7,"px")};return fe().createElement("div",{className:"price-tooltip",style:tip_objectSpread(tip_objectSpread({},e),I),ref:this.tipRef},this.props.content,fe().createElement("div",{className:"price-tooltip-arrow bottom",style:tip_objectSpread({},C)}))}}var tv=k(39621).default;let bar_noop=()=>{};class Bar extends tv{constructor(e){super(e),this.onMouseOver=e=>{1==e?this.setState({isHoverLeft:!0,isHoverRight:!1,curPosition:1}):2==e&&this.setState({isHoverRight:!0,isHoverLeft:!1,curPosition:2})},this.onMouseOut=()=>{this.setState({isHoverLeft:!1,isHoverRight:!1})},this.ceilRef=fe().createRef(),this.floorRef=fe().createRef(),this.trackRef=fe().createRef(),this.barRef=fe().createRef(),this.clickRef=fe().createRef(),this.isHover=!1,this.state={isHoverLeft:!1,isHoverRight:!1,curPosition:1}}render(){const{priceHigh:e,priceLow:_,priceBarMin:k,priceBarMax:I,priceBarStep:C,onTouchStart:R,onTouchMove:B,onTouchEnd:U,onMouseDown:V,onMouseUp:G,onClick:q}=this.props,z=233,Q=-1===e||e>I?I+C:e,ee=_>I?I:_;let te=(0,li.zC)();const ne=_>I?(0,So.formatCurrency)(te,I,{digitTop:0,zeroNeedCurrency:!0}):(0,So.formatCurrency)(te,_,{digitTop:0,zeroNeedCurrency:!0}),re=-1===e||e>I?(0,So.formatCurrency)(te,I,{digitTop:0,zeroNeedCurrency:!0})+"+":(0,So.formatCurrency)(te,e,{digitTop:0,zeroNeedCurrency:!0});let oe=(ee-k)/(I+C-k)*z-1,ie=(Q-ee)/(I+C-k)*z;ie=ie>z?z:ie;let ae=1==this.state.curPosition&&(this.state.isHoverLeft||this.props.showPriceTip),le=2==this.state.curPosition&&(this.state.isHoverRight||this.props.showPriceTip);const se=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx)),ce=se?{right:"".concat(oe,"px"),width:"".concat(ie,"px")}:{left:"".concat(oe,"px"),width:"".concat(ie,"px")};let ue=se?{right:"".concat(ae?oe-4:oe,"px")}:{left:"".concat(ae?oe-4:oe,"px")},de=se?{right:"".concat(le?oe+ie-4:oe+ie,"px")}:{left:"".concat(le?oe+ie-4:oe+ie,"px")};return fe().createElement("div",{ref:this.barRef,className:"price-range-bar"},fe().createElement("div",{ref:this.trackRef,className:"price-range-track",style:ce}),fe().createElement("div",{className:j()("price-range-floor",{big:1==this.state.curPosition&&(this.state.isHoverLeft||this.props.showPriceTip)}),ref:this.floorRef,style:ue,onTouchStart:R||bar_noop,onTouchMove:B||bar_noop,onTouchEnd:U||bar_noop,onMouseDown:V||bar_noop,onMouseUp:G||bar_noop,onMouseOver:e=>{this.onMouseOver(1,e)},onMouseOut:this.onMouseOut},fe().createElement(Tip,{content:ne,left:oe,show:1==this.state.curPosition&&(this.state.isHoverLeft||this.state.isHoverRight||this.props.showPriceTip)})),fe().createElement("div",{className:j()("price-range-ceil",{big:2==this.state.curPosition&&(this.state.isHoverRight||this.props.showPriceTip)}),ref:this.ceilRef,style:de,onTouchStart:R||bar_noop,onTouchMove:B||bar_noop,onTouchEnd:U||bar_noop,onMouseDown:V||bar_noop,onMouseUp:G||bar_noop,onMouseOver:e=>{this.onMouseOver(2,e)},onMouseOut:this.onMouseOut},fe().createElement(Tip,{content:re,left:oe,show:2==this.state.curPosition&&(this.state.isHoverLeft||this.state.isHoverRight||this.props.showPriceTip)})),fe().createElement("div",{className:"price-range-click",ref:this.clickRef,onClick:q||bar_noop}))}}const nv="CLEAR_PRICE_RANGE";var rv=k(80027),ov=k(39621).default,iv=k(67294);class PriceInput extends ov{constructor(e){super(e),this.onChange=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";var C,R;if(I=I.replace(/\D/g,""),"low"===e)this.setState({low:I}),I=(null==_||null===(C=_.target)||void 0===C?void 0:C.value)||"",""===(null==_||null===(R=_.target)||void 0===R?void 0:R.value)&&this.setState({startLow:"finish"});else if("high"===e){var j,B;this.setState({high:I}),I=(null==_||null===(j=_.target)||void 0===j?void 0:j.value)||"",""===(null==_||null===(B=_.target)||void 0===B?void 0:B.value)&&this.setState({startHigh:"finish"})}},this.handleHighFocus=e=>{var _;let k=(null==e||null===(_=e.target)||void 0===_?void 0:_.value)||"";k=k.replace(/\D/g,""),this.setState({high:k})},this.ubtMapping={logListpagePriceinputClick:U.d6},this.checkPriceInput=(e,_,k,I)=>{let C=!1,R=!1;return(e=""!==e?Number(e):0)>=(_=""!==_?Number(_):-1)&&-1!==_&&("low"===I?C=!0:"high"===I&&(R=!0)),"init"===I?this.state={lowError:C,highError:R,low:e,high:_,max:k}:this.setState({lowError:C,highError:R,startLow:"init",startHigh:"init",low:e,high:_,max:k}),C||R||e===this.preLow&&_===this.preHigh&&k===this.preMax?null:(this.preLow=e,this.preHigh=_,this.preMax=k,{low:e,high:_,max:k})},this.handleEnterKey=e=>_=>{if(13===_.nativeEvent.keyCode){var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";I=I.replace(/\D/g,"");let C=null;if("low"===e?C=this.checkPriceInput(I,this.state.high,this.state.max,e):"high"===e&&(C=this.checkPriceInput(this.state.low,I,this.state.max,e)),C){let e=Object.assign({},this.props,{priceLow:C.low,priceHigh:C.high});this.props.onChange(e)}}},this.handleBlur=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";I=I.replace(/\D/g,"");let C=null;if("low"===e?C=this.checkPriceInput(I,this.state.high,this.state.max,e):"high"===e&&(C=this.checkPriceInput(this.state.low,I,this.state.max,e)),C){let e=Object.assign({},this.props,{priceLow:C.low,priceHigh:C.high});this.props.onChange(e),"finish"===this.state.startLow&&this.setState({startLow:"init"}),"finish"===this.state.startHigh&&this.setState({startHigh:"init"})}this.$safeLog("logListpagePriceinputClick",I)};const{priceLow:_,priceHigh:k,priceBarMax:I}=this.props,{low:C,high:R,max:j}=this.checkPriceInput(_,k,I,"init")||{};this.currency=(0,li.zC)(),this.preLow=C,this.preHigh=R,this.preMax=j}componentDidUpdate(e){this.props.priceHigh===e.priceHigh&&this.props.priceLow===e.priceLow&&this.props.priceBarMax===e.priceBarMax||this.checkPriceInput(this.props.priceLow,this.props.priceHigh,this.props.priceBarMax,"bar")}render(){const{lowError:e,highError:_,low:k,high:I,max:C}=this.state;return iv.createElement("div",{className:"price-range-input"},iv.createElement("input",{type:"text",className:"price-range-input-low".concat(e?" price-range-input-err":""),value:0==k&&"finish"===this.state.startLow?"":(0,So.formatCurrency)(this.currency,k,{digitTop:0,zeroNeedCurrency:!0}),autoComplete:"off",onChange:this.onChange("low"),onBlur:this.handleBlur("low"),onKeyPress:this.handleEnterKey("low")}),iv.createElement("span",{className:"price-range-input-split"}),iv.createElement("input",{type:"text",className:"price-range-input-high".concat(_?" price-range-input-err":""),value:-1===I?"".concat((0,So.formatCurrency)(this.currency,C,{digitTop:0,zeroNeedCurrency:!0}),"+"):0==I?"finish"===this.state.startHigh?"":0:(0,So.formatCurrency)(this.currency,I,{digitTop:0,zeroNeedCurrency:!0}),autoComplete:"off",onChange:this.onChange("high"),onBlur:this.handleBlur("high"),onFocus:this.handleHighFocus,onKeyPress:this.handleEnterKey("high")}),iv.createElement("span",{className:"price-range-input-overflow"}))}}var av,lv,sv=k(39621).default,cv=k(67294);let uv=(0,Ni.$j)((e=>{var _;return{alteringPriceRange:e.renderFilters.priceFilter,priceFilter:null==e||null===(_=e.renderFilters)||void 0===_?void 0:_.priceFilter}}),{changingPriceRangeFilter:changingPriceRangeFilter})(((lv=class View extends sv{constructor(e){super(e),this.init=()=>{this.barRef=cv.createRef(),this.selectedHandle=0,this.state={changingPrice:null,showPriceTip:!1},this.ismoving=!1},this.getMousePosition=e=>e.pageX,this.getHandleCenterPosition=e=>{const _=e.getBoundingClientRect();return window.pageXOffset+_.left+.5*_.width},this.getTouchPosition=e=>e.touches[0].pageX,this.pauseEvent=e=>{e.stopPropagation(),e.preventDefault()},this.getBarStart=()=>this.barRef.current.barRef.current.getBoundingClientRect().left+window.pageXOffset,this.getBarLength=()=>{const e=this.barRef.current.barRef.current;if(!e)return 0;return e.getBoundingClientRect().width},this.isCeil=e=>e.target===this.barRef.current.ceilRef.current,this.moveTo=(e,_,k)=>{if(0===this.selectedHandle)return;this.pauseEvent(e);let I=this.calcValueByPos(_);this.setState({changingPrice:I},(()=>{k()}))},this.onChange=e=>{this.props.onChange(e)},this.calcValueByPos=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=this.getBarLength();let R=Math.abs(Math.max(e,0)/C);R=R>1?1:R<0?0:R;let j=R*(k+I-_)+_;if(I){j=I*this.getRangeStep(Math.round((j-_)/I))+_}return this.isArab?(j=k+I-j,j=this.getOrderedValue(j),j>k&&2===this.selectedHandle?j=-1:j>k&&1===this.selectedHandle&&(j=k)):(j=this.getOrderedValue(j),j>k&&2===this.selectedHandle?j=-1:j>k&&1===this.selectedHandle&&(j=k)),j},this.getRangeStep=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=Math.abs((k-_)/I)+1;return e<0?0:e>C?C:e},this.getOrderedValue=e=>{const{priceLow:_,priceHigh:k,priceBarStep:I,priceBarMax:C}=this.props;return 1===this.selectedHandle&&this.PassCeil(e,k)?-1===k?C:k-I:2===this.selectedHandle&&e<=_?_+I:e},this.getCeilPositon=()=>{const{priceHigh:e,priceLow:_,priceBarMin:k,priceBarMax:I,priceBarStep:C}=this.props,R=244,j=_>I?I:_;let B=(j-k)/(I+C-k)*R-1,H=((-1===e||e>I?I+C:e)-j)/(I+C-k)*R;H=H>R?R:H;let U=B+H;return this.isArab&&([B,U]=[U,B]),{left:B,right:U}},this.PassCeil=(e,_)=>e>=(-1!==_?_:this.props.priceBarMax+this.props.priceBarStep),this.onMouseDown=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentMouseEvents(),this.setState({showPriceTip:!0})},this.onTouchStart=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentTouchEvents(),this.setState({showPriceTip:!0})},this.onMouseMove=(0,Ie.P2)((e=>{this.ismoving=!0;const _=this.getMousePosition(e),k=this.getBarStart();this.moveTo(e,_-k,this.updateTempPriceRange)}),10),this.onTouchMove=(0,Ie.P2)((e=>{this.ismoving=!0;const _=e.changedTouches[0].pageX,k=this.getBarStart();this.moveTo(e,_-k,this.updateTempPriceRange)}),10),this.addEventListener=(e,_,k)=>e&&e.addEventListener?(e.addEventListener(_,k),{remove(){e.removeEventListener(_,k)}}):null,this.addDocumentTouchEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onTouchMoveListener=this.addEventListener(document,"touchmove",this.onTouchMove),this.onTouchEndListener=this.addEventListener(document,"touchend",this.onMouseUp)},this.addDocumentMouseEvents=()=>{this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.onMouseMoveListener=this.addEventListener(document,"mousemove",this.onMouseMove),this.onMouseUpListener=this.addEventListener(document,"mouseup",this.onMouseUp)},this.onMouseUp=()=>{this.ismoving=!1,this.setState({showPriceTip:!1}),null!==this.state.changingPrice?(this.updatePriceRange(),this.removeDocumentEvents(),this.$safeLog("logListpagePriceSlide")):this.removeDocumentEvents()},this.ubtMapping={logListpagePriceSlide:U.Pc},this.onClick=e=>{this.ismoving=!1;const _=this.getMousePosition(e),k=this.getBarStart(),{left:I,right:C}=this.getCeilPositon();this.selectedHandle=_-k-I<=C-_+k?1:2,this.isArab&&(this.selectedHandle=_-k-I>=C-_+k?1:2),this.moveTo(e,_-k,this.updatePriceRange)},this.updateTempPriceRange=()=>{let e=Object.assign({},this.props.alteringPriceRange);2===this.selectedHandle&&null!=this.state.changingPrice&&e.priceHigh!==this.state.changingPrice?e.priceHigh=this.state.changingPrice:1===this.selectedHandle&&null!=this.state.changingPrice&&e.priceLow!==this.state.changingPrice&&(e.priceLow=this.state.changingPrice),this.props.changingPriceRangeFilter(e)},this.updatePriceRange=()=>{let e=!1,_=Object.assign({},this.props);2===this.selectedHandle&&null!=this.state.changingPrice&&_.priceHigh!==this.state.changingPrice?(_.priceHigh=this.state.changingPrice,e=!0):1===this.selectedHandle&&null!=this.state.changingPrice&&_.priceLow!==this.state.changingPrice&&(_.priceLow=this.state.changingPrice,e=!0),e&&(this.props.changingPriceRangeFilter(_),this.onChange(_)),this.setState({changingPrice:null})},this.removeDocumentEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.selectedHandle=0},this.showClear=()=>{const{priceHigh:e,priceLow:_}=this.props;return-1!==e||0!==_},this.clearPriceRange=()=>{let e=Object.assign({},this.props);e.priceHigh=-1,e.priceLow=0,setTimeout((()=>{this.onChange(e)}),0)},this.init()}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),this.removeDocumentEvents()}componentDidMount(){this.$event.on(nv,this.clearPriceRange)}UNSAFE_componentWillMount(){this.isArab=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx))}render(){var e,_;let{priceHigh:k,priceLow:I,alteringPriceRange:R}=this.props;this.ismoving&&(k=R.priceHigh,I=R.priceLow);let j={priceHigh:k,priceLow:I};const B=1===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:I,H=2===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:k,U={onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,priceLow:B,priceHigh:H,onChange:this.onChange,onClick:this.onClick},V=(null===(e=this.props.priceFilter)||void 0===e||null===(_=e.priceRangeList)||void 0===_?void 0:_.length)>0;return cv.createElement("div",{className:"price-range-wrapper"},cv.createElement(Bar,(0,C.Z)({ref:this.barRef},this.props,U,{showPriceTip:this.state.showPriceTip})),V?cv.createElement(rv.Z,(0,C.Z)({},this.props,j)):cv.createElement(PriceInput,(0,C.Z)({},this.props,j)))}}).propTypes={priceHigh:_e().number,priceLow:_e().number,priceBarMin:_e().number,priceBarMax:_e().number,priceBarStep:_e().number},lv.defaultProps={priceHigh:1,priceLow:0,priceBarMin:0,priceBarMax:0,priceBarStep:0},av=lv))||av;var dv=k(78172),pv=k(67294);let hv=null;class panel_Selector extends dv.X{constructor(e){super(e),hv=this}handleChange(e){this.state.selectedId!==e.value&&this.setState({selectedId:e.value},(()=>{super.getOptions().callback(e)}))}render(){const{data:e,selectedId:_,showItemSelectedIcon:k,fclass:I}=this.state;if(!e)return null;const C=super._render(),itemRender=(e,I)=>{const C=_===e.value;return pv.createElement("li",{key:I,className:j()("panel-item-v8",{"panel-item-selected":C}),onMouseDown:this.handleChange.bind(this,e)},pv.createElement("span",null,e.text),k&&C&&pv.createElement(B.Z,{type:"check"}))};let R=[];if(e[0]&&void 0===e[0].value)for(let _=0,k=e.length;_<k;_++)if(void 0===e[_].value){let k={};k.title=e[_].title||"",k.content=[],R.push(k)}else{R[R.length-1].content.push(e[_])}else R=R.concat(e);return pv.createElement(C,{isstoppropagation:!0,fclass:I},R.map(((e,_)=>e.title?pv.createElement("section",{key:_},pv.createElement("h2",null,e.title),pv.createElement("ul",null,e.content.map(((e,_)=>itemRender(e,_))))):itemRender(e,_))))}}const fv={show:async function show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null===hv?(hv=e,await _o.w.push(panel_Selector),hv.show(e)):hv.show(e)},hide:function hide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!==hv&&hv.hide(e)}};k(39621).default,k(67294);var mv=k(39621).default,gv=k(67294);class view_Input extends mv{constructor(e){super(e)}render(){const{allowClear:e,errorMsg:_,errorStatus:k,className:I,helper:C,label:R,placeholder:H,width:U,disabled:V,noBorder:G=""}=this.props,{focused:q,value:z}=this.state;return gv.createElement("div",{className:j()("m-inputBox",I,{error:(_||k)&&!q}),style:{width:U}},R&&gv.createElement("span",{className:"m-inputBox_label"},R),gv.createElement("span",{className:G?"inputWrapperNoBorder":"inputWrapper"},gv.createElement("input",{ref:this.setRef,placeholder:H,onBlur:this.onBlur,onFocus:this.onFocus,onChange:this.onChange,onClick:this.onClick,disabled:V,value:z,readOnly:!0}),e&&z&&q&&gv.createElement(B.Z,{type:"ic_new_delete",onMouseDown:this.onClear})),C&&q&&gv.createElement("div",{className:"m-inputBox_helper"},C),_&&!q&&gv.createElement("div",{className:"m-inputBox_error"},gv.createElement("span",{className:"errorText"},_),gv.createElement(B.Z,{type:"ic_new_warning_line"})))}}class lineBox_Input extends view_Input{constructor(e){super(e),this.setRef=e=>{this.inputRef=e,this.props.inputRef&&this.props.inputRef(e)},this.onBlur=e=>{this.props.onBlur&&this.props.onBlur(e),this.setState({focused:!1})},this.onFocus=e=>{this.props.onFocus&&this.props.onFocus(e),this.setState({focused:!0})},this.onChange=e=>{const{onChange:_}=this.props;_&&_(e),this.setState({value:e&&e.target.value})},this.onClear=e=>{e.preventDefault();const{onChange:_}=this.props;_&&_(e),this.setState({value:""}),this.inputRef.focus()},this.onClick=e=>{e.stopPropagation();const{onClick:_}=this.props;_&&_(e)},this.state={focused:!1,value:e.value||e.defaultValue||""}}static getDerivedStateFromProps(e){return"value"in e?{value:e.value||""}:null}}var vv=k(67294);class Single extends vv.Component{constructor(e){super(e),this.state={selectedItem:this.getDefaultSelectedItem(),isFocus:!1}}componentDidMount(){const{offset:e,onChange:_,width:k,filterChange:I}=this.props,C="".concat(this.selectorInput.offsetWidth,"px")||0;this.controller=new dv.Q({minWidth:C,panelList:[fv],offset:e||{y:4,x:0},callback:e=>{this.setState({selectedItem:e},(()=>{I&&I(e),_&&_(e),this.selectorInput.blur()}))}})}componentDidUpdate(e){this.props.defaultValue!==e.defaultValue&&this.setState({selectedItem:this.getDefaultSelectedItem()})}getDefaultSelectedItem(){const{data:e=[],defaultValue:_}=this.props;return e.filter((e=>e.value===_))[0]||{}}handleClick(){this.selectorInput.click&&this.selectorInput.click(),this.selectorInput.focus&&this.selectorInput.focus()}handleFocus(e){const{data:_,showItemSelectedIcon:k,onFocus:I,width:C,fclass:R,styleType:j,className:B,portal:H,portalStyle:U}=this.props,V="line"===j?"panel-line-v8":R;if(this.state.isFocus)return this.controller.dispatch({type:"blur"}),void this.selectorInput.blur();this.setState({isFocus:!0}),e.persist();const{selectedItem:G}=this.state;this.controller.dispatch({minWidth:"".concat(this.selectorInput.offsetWidth,"px")||0,selectedId:G.value,event:e,type:"focus",data:()=>_,panelId:0,fclass:V+" "+B,showItemSelectedIcon:k,portal:H,portalStyle:U}),I&&I()}handleBlur(e){this.setState({isFocus:!1}),e.persist();const{onBlur:_}=this.props;this.controller.dispatch({event:e}),_&&_()}render(){const{selectedItem:e,isFocus:_}=this.state,{width:k,className:I,placeholder:C,errorMsg:R,errorStatus:H,styleType:U,label:V,onMouseOut:G,onMouseOver:q,sortBy:z,noBorder:J}=this.props;return vv.createElement("span",{style:{width:k||"auto"},className:j()("selector-wrapper",I)},V&&vv.createElement("div",{className:"selector-label"},V),vv.createElement("span",{className:j()("single-selector-input",{"selector-line":"line"===U},{placeholder:!e.text},{focus:_},{error:!!this.props.errorMsg||H}),onMouseOver:q,onMouseOut:G},vv.createElement("div",{className:"displayContent"},z||"",e.text?e.text:C),vv.createElement(lineBox_Input,{inputRef:e=>{this.selectorInput=e},value:e.text||"",readOnly:!0,onBlur:this.handleBlur.bind(this),onClick:this.handleFocus.bind(this),noBorder:J}),vv.createElement(B.Z,{type:_?"arrowLineUp":"arrowLineDown",onClick:this.handleClick.bind(this)})),R&&vv.createElement("div",{className:"single-selector_error"},vv.createElement("span",{className:"errorText"},R),vv.createElement(B.Z,{type:"ic_new_warning_line"})))}}var yv,bv,_v=k(39621).default,wv=k(67294);let Ev=(0,Ni.$j)((e=>({searchCondition:e.searchCondition})))(((bv=class View extends _v{constructor(e){super(e),this.updatePriceType=()=>{var e=this.props.list.find((e=>1===e.status));e&&e.value>=0&&e.value!=this.state.currType&&this.setState({currType:e.value})},this.onChange=e=>{let _=ae()(this.props.list).map((_=>(_.value===e.value?_.status=1:_.status=0,_))),k={list:_},I=getFactor(_,this.state.currType,this.props.searchCondition);this.props.onChange(k,I)},this.state={}}componentDidMount(){this.updatePriceType()}componentDidUpdate(){this.updatePriceType()}render(){const{list:e,isNewMap:_}=this.props,k=e.find((e=>e&&1===e.status)),I={defaultValue:k&&k.value||0,width:"246px",showItemSelectedIcon:!0,fclass:"single-selector-price-panel-v8"};return wv.createElement("div",{className:"price-type-wrapper"},!!e.length&&wv.createElement(Single,(0,C.Z)({onChange:this.onChange,data:e,className:"price-type-selector ".concat(_&&"isNewMap"),noBorder:!0},I)))}}).propTypes={list:_e().arrayOf(_e().object)},bv.defaultProps={list:[]},yv=bv))||yv;var Sv,Ov=k(39621).default,Tv=k(67294);class price_view_View extends Ov{constructor(e){super(e)}render(){const e=(0,li.zC)(this.ctx),{priceRange:{priceHigh:_,priceLow:k,priceBarMax:I}={},isNewMap:R}=this.props;return Tv.createElement("div",{className:j()("price-wrapper-v8 ",{"no-border-radius":(0,q.Ch)(this)})},Tv.createElement("div",{className:"price-container"},Tv.createElement("div",{className:"price-title"},Tv.createElement("div",{className:"price-title-range"},Tv.createElement("span",{className:"price-main-title"},this.props.priceRange.title),Tv.createElement("span",{className:"price-title-local"},"(".concat((0,rv.D)(k,_,I,e,this.ctx),")"))),(-1!==_||0!==k)&&Tv.createElement("span",{className:"price-range-clear",onClick:this.clearPriceRange},this.props.sharkInfo.clear)),R?Tv.createElement(Ev,(0,C.Z)({},this.props.priceType,{isNewMap:R,onChange:this.onPriceTypeChange})):null,Tv.createElement(uv,(0,C.Z)({},this.props.priceType,this.props.priceRange,{onChange:this.onPriceRangeChange,isNewMap:R}))))}}let kv=decorators(Sv=(0,Ni.$j)((e=>({renderFilters:e.renderFilters,priceRange:e.renderFilters.priceFilter,priceType:e.renderFilters.generalFilters[80]})),{updateGeneralFilters:updateGeneralFilters,updatePriceFilter:updatePriceFilter})(Sv=class Price extends price_view_View{constructor(e){super(e),this.onPriceRangeChange=e=>{const{priceLow:_,priceHigh:k}=e;this.props.updatePriceFilter({priceHigh:k,priceLow:_})},this.onPriceTypeChange=(e,_)=>{var k,I,C,R;const j=[];e.list.forEach((e=>{1==e.status&&j.push(e)})),null===(k=this.props)||void 0===k||k.emitUpdate({filters:j,type:"80"},this.props.updateGeneralFilters,"ibu_htl_listpage_price_type");let{priceHigh:B,priceLow:H}=this.props.priceRange;this.props.updatePriceFilter({priceHigh:B,priceLow:H,factor:_}),this.$safeLog("logListpagePriceChoiceType",e,this.props),ke.y7.set("price_type",null==e||null===(I=e.list)||void 0===I||null===(C=I.filter((e=>1===(null==e?void 0:e.status))))||void 0===C||null===(R=C[0])||void 0===R?void 0:R.value)},this.ubtMapping={logListpagePriceChoiceType:U.O3,logListpagePriceChoiceRange:U.Fc},this.clearPriceRange=()=>{let e=Object.assign({},this.props.priceRange);e.priceHigh=-1,e.priceLow=0,setTimeout((()=>{this.onPriceRangeChange(e)}),0)},this.state={noBorderRadius:(0,q.K8)(this,"240318_IBU_jdsx:B")}}componentDidMount(){this.$event.on(nv,this.clearPriceRange)}})||Sv)||Sv;var Iv=k(48467).default,Cv=k(67294);let Pv=null;const Lv=(e=>{let _=null;return function(k,I){_&&(clearTimeout(_),_=null),_=setTimeout((function(){I(k)}),e)}})(500);const Nv=function FilterProperty(){const e=(0,Ni.I0)(),{searchBarData:_,renderFilters:k}=(0,Ni.v9)((e=>({searchBarData:e.searchBarData,renderFilters:e.renderFilters}))),I=(0,he.useRef)(),C=(0,he.useRef)(),R=(0,he.useRef)(),{$translate:B,ctx:U}=(0,he.useContext)(pe.P),[V,G]=(0,he.useState)(!1),[z,J]=(0,he.useState)(null==k?void 0:k.filterProperty),[Q,ee]=(0,he.useState)([]),[te,ne]=(0,he.useState)(!1),[re,oe]=(0,he.useState)(!1),[ie,ae]=(0,he.useState)(!!(null==z?void 0:z.resultWord)),[le,se]=(0,he.useState)(!1),ce=(0,q.oG)(U),initState=()=>{se(!1),G(!1),ee([]),ne(!1),oe(!1),ae(!1)},logExpoure=(e,_)=>{var k,I,C,R;(0,pa.NW)("htl_t_online_list_query_assoc_aword_exposure",{locale:H.default.getByKey("cargo.locale"),frompage:H.default.getByKey("pageId"),keyword:_,association_tracelogid:null==e||null===(k=e.data)||void 0===k||null===(I=k.ubtInfo)||void 0===I?void 0:I.traceLogId,page:H.default.getByKey("pageId"),associative_word_attribute:null==e||null===(C=e.data)||void 0===C||null===(R=C.keyWordSearchResults)||void 0===R?void 0:R.map(((e,_)=>{var k,I;return{location:null==e?void 0:e.newContent,wordid:null==e?void 0:e.code,word:null==e?void 0:e.resultWord,wordtypeid:null==e||null===(k=e.data)||void 0===k?void 0:k.wordtypeid,cityid:null==e||null===(I=e.city)||void 0===I?void 0:I.geoCode,index:"".concat(_)}}))})},getParams=e=>{var k,I;let C={keyWord:null!==(k=null==e?void 0:e.trim())&&void 0!==k?k:""};const{city:R,province:j,country:B}=null!==(I=null==_?void 0:_.search)&&void 0!==I?I:{};return(null==R?void 0:R.geoCode)>0&&(C.cityId=null==R?void 0:R.geoCode),(null==j?void 0:j.geoCode)>0&&(C.provinceId=null==j?void 0:j.geoCode),(null==B?void 0:B.geoCode)>0&&(C.countryId=null==B?void 0:B.geoCode),C},onSelectedResut=_=>{(null==_?void 0:_.resultType)&&(J(_),e(function updateSearchHotelProperty(e){return{type:xa.zR,payload:e}}(_)),(e=>{var _,k;(0,pa.NW)("htl_t_online_list_query_assoc_aword_click",{locale:H.default.getByKey("cargo.locale"),frompage:H.default.getByKey("pageId"),page:H.default.getByKey("pageId"),associative_word_attribute:[{location:null==e?void 0:e.newContent,wordid:null==e?void 0:e.code,word:null==e?void 0:e.resultWord,wordtypeid:null==e||null===(_=e.data)||void 0===_?void 0:_.wordtypeid,cityid:null==e||null===(k=e.city)||void 0===k?void 0:k.geoCode}]})})(_),se(!1))},clearResut=()=>{J(void 0),initState(),(null==C?void 0:C.current)&&(C.current.value=""),z&&e(function removeSearchHotelProperty(){return{type:xa.uB}}())};return(0,he.useEffect)((()=>{var e;"undefined"!=typeof document&&(null===(e=document)||void 0===e||e.addEventListener("click",(e=>{var _;(null==I?void 0:I.current)&&!(null==I||null===(_=I.current)||void 0===_?void 0:_.contains(null==e?void 0:e.target))&&se(!1)})))}),[le]),(0,he.useEffect)((()=>{var e;(null==C?void 0:C.current)&&(C.current.value=null!==(e=null==z?void 0:z.resultWord)&&void 0!==e?e:"")}),[null==z?void 0:z.resultWord]),(0,he.useEffect)((()=>{(null==k?void 0:k.filterProperty)||(J(void 0),initState())}),[k]),ce?function renderMain(){var e;return Cv.createElement("div",{ref:I,className:"search-property-wrapper"},Cv.createElement("div",{className:"title-wrap"},Cv.createElement("p",null,B("key.88801001.searchtitle"))),Cv.createElement("div",{className:"input-wrap"},Cv.createElement("div",{className:"search-box"},Cv.createElement("i",{type:"search",className:"u-icon u-icon-search search-icon"}),Cv.createElement("input",{ref:C,type:"text",className:"input-dom",onChange:e=>{var _;Lv(null==e||null===(_=e.target)||void 0===_?void 0:_.value,(function(e){var _,k,I;_=e,initState(),""!==(null==_?void 0:_.trim())&&(ae(!0),(null===(k=Pv)||void 0===k?void 0:k.abort)&&(null===(I=Pv)||void 0===I||I.abort()),Pv=Iv({url:"/getFilterProperty",abort:!0,data:getParams(_),silence:!0,genk:!0,bff:!0,bffV3:!0,bffCode:28537}).then((e=>{var k,I,C,R,j;(null==e||null===(k=e.data)||void 0===k||null===(I=k.keyWordSearchResults)||void 0===I?void 0:I.length)?(G(!1),ee(null==e||null===(C=e.data)||void 0===C?void 0:C.keyWordSearchResults),oe((null==e||null===(R=e.data)||void 0===R||null===(j=R.keyWordSearchResults)||void 0===j?void 0:j.length)>5)):(G(!0),ee([]),oe(!1)),logExpoure(e,null==_?void 0:_.trim())})).catch((()=>{G(!0),ee([]),oe(!1),logExpoure(void 0,null==_?void 0:_.trim())})).finally((()=>{se(!0)})))}))},onFocus:e=>{var _,k;""!==(null==e||null===(_=e.target)||void 0===_||null===(k=_.value)||void 0===k?void 0:k.trim())&&((null==Q?void 0:Q.length)||V)&&se(!0)},placeholder:B("key.88801001.searchforname"),autoComplete:"off"}),(null==C||null===(e=C.current)||void 0===e?void 0:e.value)&&ie?Cv.createElement("i",{onClick:()=>{clearResut(),C&&C.current&&(C.current.value="")},type:"ic_bestir_clear",className:"u-icon u-icon-ic_bestir_clear search-clear-icon"}):null),Cv.createElement("div",{ref:R,className:j()("result-box",le?"":"hide")},function getRenderResult(){return(null==Q?void 0:Q.length)?Cv.createElement(Cv.Fragment,null,Cv.createElement("p",{className:"title"},B("key.88801001.online.searchfilter.hotels")),Cv.createElement("div",{className:"list-wrap"},null==Q?void 0:Q.map(((e,_)=>{var k;if(_>4&&!te)return null;let I=null==e?void 0:e.resultWord;if(null==e||null===(k=e.highLightWords)||void 0===k?void 0:k.length){var C;let _;I=null==e||null===(C=e.highLightWords)||void 0===C?void 0:C.reduce(((e,k)=>(_=new RegExp("(".concat(k,")"),"gi"),e.replace(_,"<strong>$1</strong>"))),I)}return Cv.createElement("div",{className:"hotel-item",key:_,onClick:()=>{onSelectedResut(e)}},Cv.createElement("div",{className:"main"},Cv.createElement("i",{type:"ic_new_group",className:"u-icon u-icon-ic_new_group"}),Cv.createElement("h4",{dangerouslySetInnerHTML:{__html:I}})))})),Cv.createElement("p",{className:"more",style:{display:re?"":"none"},onClick:()=>{ne(!0),oe(!1)}},B("key.88801001.online.searchfilter.showall")," (",null==Q?void 0:Q.length,")"))):null}(),function getRenderNoResult(){return V?Cv.createElement("div",{className:"no-result-wrap"},Cv.createElement("p",{className:"title"},B("key.88801001.propertysearch")),Cv.createElement("p",{className:"content"},B("key.88801001.noresultsearch"))):null}())))}():null};var Dv=k(39621).default;class amenties_view_View extends Dv{constructor(e){super(e)}render(){let{renderDialogFilterShowAllHtml:e}=this.props;return e?e.call(this,!1,"amenties"):null}}const Av="HEALTH_UPDATE_BFF";function bookableUpdate(e){return{type:"UPDATE_BOOKABLE",payload:e}}function facilityUpdate(e){return{type:"FACILITY_UPDATE",payload:e}}var Rv;let xv=decorators(Rv=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[3]||{list:[]}})),{updateAmenities:updateAmenities,facilityUpdate:facilityUpdate,updateGeneralFilters:updateGeneralFilters})(Rv=class Amenties extends amenties_view_View{constructor(e){var _;super(e),_=this,this.onChange=function(e){var k;let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=arguments.length>2?arguments[2]:void 0;null===(k=_.props)||void 0===k||k._onChangeDialog.call(_,e,I,C)},this.onChangeItem=(0,ed.P2)((e=>{var _;null===(_=this.props)||void 0===_||_._onChange.call(this,e)}),500),this.show=()=>{sendFilterShowAllTrace({filtertype:"3",filtertypename:this.props.data.title}),setTimeout((()=>{this.setState({showStatus:!this.state||!this.state.showStatus},(()=>{this.state.showStatus||scrollToTitle("".concat(this.options.scope,"-container"))}))}),0),this.$safeLog("logListpageFilterItemAction",this.options.scope)},this.clearSelected=()=>{var e;null===(e=this.props)||void 0===e||e._clearSelected.call(this)},this.ubtMapping={logListpageFilterItemAction:U.mn,logListpageFacilityChoice:U.eQ},this.options={actionType:"amenties",actionFun:e.updateAmenities,ubtLogName:"logListpageFacilityChoice",scope:"amenty",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"FACILITY_UPDATE",filterTypeBFF:"3"}}componentDidMount(){}})||Rv)||Rv;var jv,Bv=k(39621).default;class bookable_view_View extends Bv{constructor(e){super(e)}render(){let{renderFilterHtml:e,renderFilterTypes:_}=this.props;return e.call(this,_.isRadio,"Bookable")}}(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[159]||{list:[]}})),{updateBookable:function updateBookable(e){return{type:"BOOKABLE_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters,bookableUpdate:bookableUpdate})(jv=decorators(jv=class Bookable extends bookable_view_View{constructor(e){super(e),this.onChange=(0,ed.P2)((e=>{var _;null===(_=this.props._onChange)||void 0===_||_.call(this,[e])}),500),this.clearSelected=()=>{var e;null===(e=this.props)||void 0===e||e._clearSelected.call(this)},this.ubtMapping={logListpageBookableChoice:U.mI},this.options={name:"bookable",actionType:"BOOKABLE_UPDATE",actionFun:e.updateBookable,actionTypeClear:"BOOKABLE_CLEAR",ubtLogName:"logListpageBookableChoice",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"UPDATE_BOOKABLE",filterTypeBFF:"159"}}})||jv);var Mv,Fv=k(39621).default;class brand_view_View extends Fv{constructor(e){super(e)}render(){var e;return null===(e=this.props)||void 0===e?void 0:e.renderDialogFilterShowAllHtml.call(this,!0,"Brand")}}let Hv=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[2]||{list:[]}})),{updateBrand:function updateBrand(e){return{type:"BRAND_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters})(Mv=decorators(Mv=class Brand extends brand_view_View{constructor(e){var _;super(e),_=this,this.onChange=function(e){let k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=arguments.length>2?arguments[2]:void 0;_.props._onChangeDialog.call(_,e,k,I)},this.onChangeItem=(0,ed.P2)(((e,_)=>{var k;null===(k=this.props)||void 0===k||k._onChange.call(this,e,_)}),500),this.clearSelected=()=>{var e;null===(e=this.props._clearSelected)||void 0===e||e.call(this)},this.show=()=>{this.setState({showDialog:!0},(()=>{changeDialogStyle(this.state.showDialog)})),this.$safeLog("logListpageFilterItemAction",this.options.scope),sendFilterShowAllTrace({filtertype:"2",filtertypename:this.props.data.title})},this.ubtMapping={logListpageFilterItemAction:U.mn,logListpageBrandChoice:U.J9},this.options={actionType:"brand",actionFun:e.updateBrand,ubtLogName:"logListpageBrandChoice",scope:"brand",isStrictEqual:!0,actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"UPDATE_BRAND",filterTypeBFF:"2"}}})||Mv)||Mv;var Kv,Uv=k(39621).default;class category_view_View extends Uv{constructor(e){super(e)}render(){var e;return null===(e=this.props)||void 0===e?void 0:e.renderDialogFilterShowAllHtml.call(this,!1,"Category")}}let Zv=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[75]||{list:[]}})),{updateCategorys:function updateCategorys(e){return{type:"CATEGORYS_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters})(Kv=decorators(Kv=class Category extends category_view_View{constructor(e){var _;super(e),_=this,this.onChange=function(e){var k;let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=arguments.length>2?arguments[2]:void 0;null===(k=_.props)||void 0===k||k._onChangeDialog.call(_,e,I,C)},this.onChangeItem=(0,ed.P2)(((e,_)=>{var k;null===(k=this.props)||void 0===k||k._onChange.call(this,e,_)}),500),this.clearSelected=()=>{var e;null===(e=this.props._clearSelected)||void 0===e||e.call(this)},this.show=()=>{this.setState({showStatus:!this.state||!this.state.showStatus},(()=>{this.state.showStatus||scrollToTitle("".concat(this.options.scope,"-container"))})),this.$safeLog("logListpageFilterItemAction",this.options.scope),sendFilterShowAllTrace({filtertype:"75",filtertypename:this.props.data.title})},this.ubtMapping={logListpageFilterItemAction:U.mn,logListpageStayTypeChoice:U.jE},this.options={selectVal:[],curVal:"",actionType:"category",actionFun:e.updateCategorys,ubtLogName:"logListpageStayTypeChoice",scope:"category",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"UPDATE_CATEGORYS",filterTypeBFF:"75"}}})||Kv)||Kv;var Vv,Wv=k(39621).default;class discount_view_View extends Wv{constructor(e){super(e)}render(){let{renderFilterHtml:e,renderFilterTypes:_}=this.props;return e.call(this,_.isCheckBox,"Discount")}}let Gv=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[83]||{list:[]},popularFilters:e.renderFilters.quickFilters})),{updateDiscounts:updateDiscounts,updatePopularFilters:updatePopularFilters,updateGeneralFilters:updateGeneralFilters})(Vv=decorators(Vv=class Discount extends discount_view_View{constructor(e){super(e),this.onChange=(0,ed.P2)((e=>{var _;null===(_=this.props)||void 0===_||_._onChange.call(this,e)}),500),this.clearSelected=()=>{var e;null===(e=this.props)||void 0===e||e._clearSelected.call(this)},this.ubtMapping={logListpageFilterItemShow:U.zy,logListpageDiscountChoice:U.Wj},this.options={key:"discount_",actionType:"DISCOUNTS_UPDATE",actionFun:e.updateDiscounts,ubtLogName:"logListpageDiscountChoice",name:"discount",ref:"discountRef",isQuickFilter:!0,actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"UPDATE_DISCOUNT",filterTypeBFF:"83"},this.scrollFunction=null}componentDidMount(){var e;this.scrollFunction=scrollOnScreen({target:null===(e=this.discountRef)||void 0===e?void 0:e.current,judgeType:3,callBack:()=>{this.$safeLog("logListpageFilterItemShow")}})}componentWillUnmount(){this.scrollFunction&&removeScroll(this.scrollFunction)}})||Vv)||Vv;var $v,qv=k(39621).default;class features_view_View extends qv{constructor(e){super(e)}render(){var e;return null===(e=this.props)||void 0===e?void 0:e.renderDialogFilterShowAllHtml.call(this,!1,"Features")}}let zv=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[1]||{list:[]}})),{updateFeatures:function updateFeatures(e){return{type:"FEATURES_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters,removeFilter:removeFilter,updateQuickFilters:updateQuickFilters})($v=decorators($v=class Features extends features_view_View{constructor(e){var _;super(e),_=this,this.onChange=function(e){var k;let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=arguments.length>2?arguments[2]:void 0;null===(k=_.props)||void 0===k||k._onChangeDialog.call(_,e,I,C)},this.onChangeItem=(0,ed.P2)(((e,_)=>{var k;null===(k=this.props)||void 0===k||k._onChange.call(this,e,_)}),500),this.clearSelected=()=>{var e;ke.y7.remove("feature"),null===(e=this.props._clearSelected)||void 0===e||e.call(this)},this.show=()=>{this.setState({showStatus:!this.state||!this.state.showStatus},(()=>{this.state.showStatus||scrollToTitle("".concat(this.options.scope,"-container"))})),this.$safeLog("logListpageFilterItemAction",this.options.scope),sendFilterShowAllTrace({filtertype:"1",filtertypename:this.props.data.title})},this.ubtMapping={logListpageFilterItemAction:U.mn,logListpageThemeHotelChoice:U.W3},this.options={actionType:"features",actionFun:e.updateFeatures,ubtLogName:"logListpageThemeHotelChoice",scope:"feature",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"FEATURE_UPDATE",filterTypeBFF:"1"}}})||$v)||$v;var Yv,Jv=k(39621).default,Xv=k(67294);class guestRating_view_View extends Jv{constructor(e){super(e)}render(){this.setSelectVal();let{data:{list:e,title:_},selectVal:k,showClear:I,clear:C}=this.options;return Xv.createElement("div",{className:"guest-rating-wrap-v8"},e.length?Xv.createElement("div",{className:"guest-rating-container"},Xv.createElement("div",{className:"guest-rating-title"},Xv.createElement("p",null,_),I&&Xv.createElement("span",{onClick:this.clearSelected.bind(this)},C)),Xv.createElement("div",{className:"guest-rating-content"},Xv.createElement("ul",{className:"gr-btn-ul"},e.map(((e,_)=>{let I=k.includes(e.value)?"gr-btn-li gr-checked":"gr-btn-li",C=e.text.match(/[\d]|[,]|[.]/g).join(""),R=2*Number(C.replace(",",".")),j=e.text.replace(C,R);return Xv.createElement("li",{key:_,className:I,onClick:this.onChange.bind(this,e,_)},Xv.createElement("span",null,(0,q.rq)(this)?j:e.text))}))))):null)}}let Qv=(0,Ni.$j)((e=>({rateFilter:e.renderFilters.generalFilters[6]||{list:[]}})),{updateGuestRating:function updateGuestRating(e){return{type:"GuestRating_UPDATE",payload:e}},ratingUpdate:function ratingUpdate(e){return{type:"RATING_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters})(Yv=decorators(Yv=class GuestRating extends guestRating_view_View{constructor(e){super(e),this.init=()=>{let{rateFilter:e,sharkInfo:{clear:_}}=this.props;Object.assign(this.options,{data:e,clear:_}),this.options.selectVal=e.list.filter((e=>e.status)),this.options.showClear=!!this.options.selectVal.length},this.clearSelected=()=>{let{rateFilter:e}=this.props;this.props.emitUpdate&&this.props.emitUpdate({filters:[],type:"6"},this.props.updateGeneralFilters,"RATING_UPDATE"),this.resetSelect(),this.$safeLog("logListpageCommentScoreChoice",(null==e?void 0:e.list)||[])},this.ubtMapping={logListpageCommentScoreChoice:U.T9},this.options={selectVal:[],curVal:"",showClear:!1},this.init()}componentDidMount(){var e,_;const k=null===(e=this.options)||void 0===e||null===(_=e.data)||void 0===_?void 0:_.list;for(let e=0;e<k.length;e++){const _=JSON.parse(sendFilterShowTrace({filter:k[e],rank:e,is_layer:"F",filtertypename:""})),{ubtKey:I,data:C}=_;(0,Le.Uz)(I,C)}}handleChange(e){let _=e.filter((e=>1==e.status))[0],k={filterId:_.filterId,type:_.type,value:_.value,subType:_.subType};this.props.updateFilters(k)}onChange(e,_){let{selectVal:k}=this.options,{rateFilter:{list:I}}=this.props;if(k.length&&k.includes(e.value)&&Math.min(...k)>=e.value)return!1;this.options.selectVal=I.filter((_=>_.value==e.value)).map((e=>e.value));let C=I.filter((_=>_.value==e.value));this.props.emitUpdate&&this.props.emitUpdate({filters:C,type:"6"},this.props.updateGeneralFilters,"RATING_UPDATE"),this.$safeLog("logListpageCommentScoreChoice",I),sendFilterClickTrace({filterid:e.filterId,filtertype:e.type,filtername:e.text,filterrank:_,is_layer:"F",filterselectstatus:e.status?0:1,filtertypename:""})}setSelectVal(){let{rateFilter:e}=this.props,_=e.list.find((e=>e.status))||{value:100},k=e.list.filter((e=>e.value==_.value)).map((e=>e.value)),I=!!k.length;return Object.assign(this.options,{selectVal:k,showClear:I,data:e}),this.options}resetSelect(){this.options.selectVal=[]}componentDidMount(){}})||Yv)||Yv;var ey=k(39621).default;class Dialog extends ey{constructor(e){super(e),this.extraCityType="cityId"}render(){let{show:e,title:_,clear:k,apply:I,isLeftFilters:C=!1}=this.state;this.refresh();let{loadingCity:R=!1}=this.options,{leftTabs:H,tabContent:{list:U,toolTip:V,lines:G=[],stations:q=[],isMult:z=!1}}=this.options;G.length&&(U=q);return fe().createElement("div",{className:j()({"m-dialogMult-wrap-v8":e,isLeftFilters:C}),onClick:this.close.bind(this)},e&&fe().createElement("div",{className:"dialogMult-info",onClick:e=>e.stopPropagation()},fe().createElement("div",{className:"dialogMult-title"},fe().createElement("p",null,_),fe().createElement("span",{onClick:this.close.bind(this)},fe().createElement(B.Z,{type:"close",className:"close"}))),fe().createElement("div",{className:"dialogMult-content-wrap"},(()=>{H=R?H.filter((e=>e.type===this.extraCityType)):H;let getKey=e=>"".concat("list");return H.filter((e=>{var _;return(null===(_=e[getKey(e.type)])||void 0===_?void 0:_.filter((e=>e.status)).length)&&!e.status})).length&&H.map((e=>{if(e.type===this.extraCityType)return e;e.list.filter((e=>e.status)).length&&e.status&&(e.isConfirmed=!1)})),H.length?fe().createElement("div",{className:"dialogMult-tabs"},fe().createElement("ul",{className:"tabs-ul"},H.map(((e,_)=>{var k;let I="tabs-li ".concat(e.status?"tabs-li-checked":"");I+=" ".concat(e.isChecked?"tabs-li-selected":"");let C=null===(k=e[getKey(e.type)])||void 0===k?void 0:k.filter((e=>e.status)).length;return fe().createElement("li",{key:_,onClick:this.onLeftTabCLick.bind(this,e),className:I},fe().createElement("p",{style:{position:"relative"}},e.title,fe().createElement("span",{className:C&&e.isConfirmed?"dialog-circle":""})))})),R&&fe().createElement("li",{className:"tab-loading"}))):null})(),(()=>G.length?fe().createElement(fe().Fragment,null,fe().createElement("div",{className:"dialog-line-tabs"},fe().createElement("ul",{className:"tabs-line-ul"},G.map(((e,_)=>{let k="tabs-line-li ".concat(e.status?"tabs-line-li-checked":"");return k+=" ".concat(e.isChecked?"tabs-line-li-selected":""),fe().createElement("li",{key:_,onClick:this.onLineTabCLick.bind(this,e),className:k},fe().createElement("p",null,e.title))})))),fe().createElement("div",{className:"dialog-tab-split"})):null)(),fe().createElement("div",{className:"dialogMult-content"},fe().createElement("ul",{className:"dialogMult-ul-items"},U.map(((e,_)=>{let k=(U.length%2>0?_===U.length-1:_>=U.length-2)?" item-border":"";return fe().createElement("li",{key:_,className:"dialogMult-li-item ".concat(e.status?"item-checked":"").concat(k),onClick:this.clickHandler.bind(this,e,!e.status,_)},fe().createElement("div",{className:"li-item-info"},z&&fe().createElement(B.Z,{type:"checkbox",className:"icon-check"}),!z&&fe().createElement(B.Z,{type:e.status?"ic_new_check":"radiobox",className:"icon-self"}),e.icon&&fe().createElement(B.Z,{type:"ic_new_fa_wifi",className:"dialogMult-icon"}),fe().createElement("span",{className:"span-font ".concat(e.occupancy?"occupancy":"")},e.text),e.occupancy&&"0.00%"!==e.content&&fe().createElement("span",{className:"li-span",onMouseOut:this.onMouseOut&&this.onMouseOut.bind(this,e,V),onMouseOver:this.onMouseOver&&this.onMouseOver.bind(this,e,V)},e.content,fe().createElement(B.Z,{type:"ic_new_user_line",className:"icon-left"}))))}))))),fe().createElement("div",{className:"dialogMult-action"},fe().createElement("div",{className:"action-clear"},fe().createElement(Buttons,{type:"outline",onClick:!R&&this.onClear.bind(this),className:"btn-clear"},k)),fe().createElement("div",{className:"action-apply"},fe().createElement(Buttons,{type:"primary",onClick:!R&&this.applySelect.bind(this),className:"btn-primary"},I)))))}}class DialogMult extends Dialog{constructor(e){super(e),this.options={currentSelect:[],hasSelected:[],leftTabs:[],tabContent:{list:[]},data:this.props.data||null,type:""},this.state={show:!1,data:{},title:"",clear:"",apply:"",tabContent:{},loadingCity:!1,isLeftFilters:!1},this.init(e)}init(e){let{data:_,onChange:k,type:I,title:C,clear:R,apply:j,loadingCity:B=!1,show:H=!1,keys:U,isLeftFilters:V}=e||{};Object.assign(this.options,{data:_,type:I,onChange:k,title:C,clear:R,apply:j,loadingCity:B,keys:U}),this.initTabs();let{tabContent:G}=this.options;this.state={show:H,data:_,title:C,clear:R,apply:j,tabContent:G||{},loadingCity:B,isLeftFilters:V},this.initCurrentChoosedFilter()}initCurrentChoosedFilter(){var e;const{data:_={}}=this.props;let k=[];null===(e=Object.keys(_))||void 0===e||e.forEach((e=>{var I,C,R,j;"metros"==e?(null===(I=_[e].lineList)||void 0===I?void 0:I.length)&&(null===(C=_[e].lineList)||void 0===C||C.forEach((e=>{var _,I;(null==e||null===(_=e.siteList)||void 0===_?void 0:_.length)&&(null==e||null===(I=e.siteList)||void 0===I||I.forEach((e=>{e.status&&k.push(e)})))}))):(null===(R=_[e].list)||void 0===R?void 0:R.length)&&(null===(j=_[e].list)||void 0===j||j.forEach((e=>{e.status&&k.push(e)})))})),k.length&&Object.assign(this.options,{currentSelect:k})}refresh(){let{data:e,onChange:_,title:k,clear:I,apply:C,loadingCity:R=!1}=this.props||{};if(Object.assign(this.options,{data:e,onChange:_,title:k,clear:I,apply:C,loadingCity:R}),"metros"!==this.options.type&&"tabClick"!==this.options.clickType){this.initTabs();let{currentSelect:e,tabContent:_}=this.options;_.list.map((_=>{e.map((e=>e.value)).includes(_.value)&&(_.status=1)}))}}componentWillReceiveProps(e){e.show!==this.state.show&&this.setState({show:e.show,isLeftFilters:e.isLeftFilters})}componentDidMount(){this.sendExposure()}componentDidUpdate(e,_){_.tabContent.title!==this.state.tabContent.title&&this.sendExposure()}close(){this.setState({show:!1}),changeDialogStyle(!1),this.options.onChange(this.options.currentSelect,this.options.type,!1,"close")}initTabs(){let{data:e,type:_,keys:k}=this.options;if(this.options.initType=_,!e)return!1;let I=(k||[]).filter((_=>((e[_]||{list:[]})["".concat("metros"===_?"lineList":"list")]||[]).length)).map((k=>{let I=e[k];if(I.lineList){let e=I.lineList.findIndex((e=>e.status)),C=-1===e?0:e;return{title:I.title,lines:I.lineList.map((e=>({title:e.title,status:e.status}))),status:-1!==e,isChecked:k===_,isConfirmed:-1!==e,type:k,isMult:!1,list:I.lineList,lineList:I.lineList,stations:(I.lineList[C].siteList||[]).map((e=>(e.lineTitle=I.lineList[C].title,e)))}}return{title:I.title,status:I.list.filter((e=>e.status)).length,isChecked:k===_,isConfirmed:I.list.filter((e=>e.status)).length>0,list:e[k].list,type:k,isMult:"zones"===k}})),C=I.find((e=>e.isChecked))||{list:[]};Object.assign(this.options,{leftTabs:I,tabContent:C})}onLeftTabCLick(e){let _=document.getElementsByClassName("dialogMult-content");_.length&&_[0].scrollTo?_[0].scrollTo(0,0):_[0].scrollTop=0;let{leftTabs:k}=this.options;Object.assign(this.options,{type:e.type}),this.options.clickType="tabClick",k.map((_=>(_.isChecked=!1,_.title===e.title&&(_.isChecked=!0),_)));let I=k.find((e=>e.isChecked))||{list:[]};if("metros"===e.type){!I.lineList.find((e=>e.status))&&(I.lineList[0].status=1)&&I.lines.map((e=>{e.status=!1,e.isChecked=!1}))&&(I.lines[0].status=1)}Object.assign(this.options,{leftTabs:k,tabContent:I}),this.setState({tabContent:I}),this.options.onChange(e,this.options.type,!1,"tab_update")}onLineTabCLick(e){let{tabContent:_}=this.options;this.options.clickType="tabClick",_.lines.map((_=>(_.status=_.isChecked=!1,_.title===e.title&&(_.status=_.isChecked=!0),_)));let k=_.list.find((_=>_.title===e.title))||{};_.stations=(k.siteList||[]).map((_=>(_.lineTitle=e.title,_))),Object.assign(this.options,{tabContent:_}),this.setState({tabContent:_}),this.options.onChange(e,this.options.type,!1,"line_update"),this.sendExposure()}clickHandler(e,_,k){let{tabContent:{isMult:I=!1}}=this.state,{leftTabs:C,type:R,tabContent:{list:j,stations:B=[]}}=this.options;if(this.options.clickType=null,!I&&!_)return;C.map((e=>{"cityId"!==e.type&&!e.isChecked&&(e.lineList||e.list||[]).map((e=>{e.status=!1,(e.siteList||[]).map((e=>{e.status=!1}))}))}));let H=B.length?B:j;H.map((k=>(!I&&(k.status=0)&&(k.isConfirmed=!1),k.value===e.value&&(k.status=+_)&&(k.isConfirmed=!0),k))),C.map((e=>{"cityId"!==e.type&&(e.isConfirmed=!1),e.type===R&&(e.isConfirmed=_)}));let U=H.filter((e=>e.status));Object.assign(this.options,{currentSelect:U}),B.length&&Object.assign(this.options.tabContent,{stations:H});let{tabContent:V,type:G}=this.options;this.setState({tabContent:V}),this.options.onChange(U,G,!1,"update");const{title:q}=V;sendFilterClickTrace({filterid:e.filterId,filtertype:e.type,filtername:e.text,filterrank:k,is_layer:"T",filterselectstatus:e.status?0:1,filtertypename:q})}onClear(){let{tabContent:{list:e,stations:_=[]}}=this.state;e.map((e=>(e.status=0,e))),_.map((e=>(e.status=0,e))),_.length&&Object.assign(this.options.tabContent,{stations:_});let{leftTabs:k=[]}=this.options;this.cleanedTypes=k.filter((e=>e.status)).map((e=>e.type)),k.map((e=>{e.status=0,e.lineList&&e.lineList.map((e=>{e.status=0,e.siteList.map((e=>{e.status=0}))})),e.list&&e.list.map((e=>{e.status=0}))})),this.setState({tabContent:this.options.tabContent}),this.options.currentSelect=[],this.options.onChange([],this.options.type,!1,"clear"),this.options.type=this.props.type,this.options.title=this.props.title}applySelect(){const{currentSelect:e}=this.options;this.options.hasSelected=e,this.setState({show:!1}),changeDialogStyle(!1);let _=this.options.leftTabs.filter((e=>"cityId"===e.type)).find((e=>e.status))||null;_=_?_.list.find((e=>e.status)):null,_&&e.map((e=>{e.cityId=_.value})),this.options.onChange(e,this.options.type,!0,"apply",this.cleanedTypes||[])}onMouseOver(e,_,k){const I=this.$component("ToolTip"),C={target:k.target,content:e.occupancy,zIndex:1001,isFixed:!0};I&&I.action("show",C)}onMouseOut(){const e=this.$component("ToolTip");e&&e.action("hide")}sendExposure(){const e=this.state.tabContent;let{list:_,title:k,stations:I=[],lines:C=[]}=e;C.length&&(_=I);for(let e=0;e<_.length;e++){const I=JSON.parse(sendFilterShowTrace({filter:_[e],rank:e,is_layer:"T",filtertypename:k})),{ubtKey:C,data:R}=I;(0,Le.Uz)(C,R)}}}var ty=k(39621).default,ny=k(67294);class Radiobox extends ty{constructor(e){super(e)}render(){const{data:e,className:_,errorMsg:k,isShowAll:I=!1,bottomText:C="",isExposure:R=!1,showAll:H,iconType:U,iconClassName:V}=this.props;return!e||e.length<1?null:ny.createElement("ul",{className:j()("m-radiobox-v8",_)},e.map(((e,_)=>{let k=e.value===this.state.value;return e.filterId&&(k=e.filterId===this.state.value),ny.createElement("li",{key:_,className:j()("m-radiobox_item",{active:k}),onClick:this.handleClick.bind(this,e,_)},k&&U?ny.createElement(B.Z,{type:U,className:k&&"iconClassName iconActiveType"}):ny.createElement(B.Z,{type:"radiobox",className:"iconStyle"}),ny.createElement("span",{className:"radioboxTxt"},e.text))})),R?ny.createElement("li",{id:"showAll",className:I?"circle-point":"",onClick:()=>H(!1,!1,R),style:{position:"relative"}},ny.createElement("span",null,C)):null,k&&ny.createElement("div",{className:"error"},k))}}function radiobox_filter_v8_logUbtMapping_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function radiobox_filter_v8_logUbtMapping_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?radiobox_filter_v8_logUbtMapping_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):radiobox_filter_v8_logUbtMapping_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const ibu_htl_c_online_list_filter_click=(e,_,k)=>{var I,C,R,j;const B=H.default.getByKey("pageId");let U=(0,ii.WH)("cityName");for(;U.indexOf("%20")>-1;)U=U.replace("%20"," ");const V={page:B,cityid:null===(I=H.default.getByKey("initData"))||void 0===I||null===(C=I.searchCondition)||void 0===C?void 0:C.cityId,cityname:U||(null===(R=H.default.getByKey("initData"))||void 0===R||null===(j=R.searchCondition)||void 0===j?void 0:j.cityName)},G=k||"",q=e.map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{filtertype:e.type,filtername:e.text,filtertitle:_,filtersubtype:e.subType,filterid:e.filterId,filtervalue:e.value,filterselectstate:e.status,filterPosition:G}}));return{logKey:"ibu_htl_c_online_list_filter_click",actionType:"Trace",logValue:radiobox_filter_v8_logUbtMapping_objectSpread(radiobox_filter_v8_logUbtMapping_objectSpread({},V),{},{filterlist:q})}};class RadioBox extends Radiobox{constructor(e){super(e),this.ubtMapping={ibu_htl_c_online_list_filter_click:ibu_htl_c_online_list_filter_click},this.state={value:this.props.value||this.props.defaultValue}}componentDidUpdate(e){e.value!==this.props.value&&(this.setState({value:this.props.value}),this.$safeLog("ibu_htl_c_online_list_filter_click",this.props.data,this.props.filterType,this.props.sequence||""))}componentDidMount(){try{const e=this.props.data||[];for(let _=0;_<(null==e?void 0:e.length);_++){const k=JSON.parse(sendFilterShowTrace({filter:e[_],rank:_,is_layer:"F",filtertypename:""})),{ubtKey:I,data:C}=k;(0,Le.Uz)(I,C)}}catch(e){}}handleClick(e,_){const{onChange:k}=this.props;let I=this.state.value;e.filterId?(I=I==e.filterId?void 0:e.filterId,this.setState({value:I}),k&&k(I,e)):(I=I==e.value?void 0:e.value,this.setState({value:I}),k&&k(I,e)),sendFilterClickTrace({filterid:e.filterId,filtertype:e.type,filtername:e.text,filterrank:_,is_layer:"F",filterselectstatus:e.status?0:1,filtertypename:""})}}var ry=k(39621).default,oy=k(67294);function location_view_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function location_view_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?location_view_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):location_view_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class location_view_View extends ry{constructor(e){var _;super(e),_=this,this.onChange=async function(e){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",I=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3?arguments[3]:void 0,R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];Ce.Z&&(window.mapSearchAction="location");let j={},B=C?"".concat(k,"_").concat(C):"".concat(k,"_update"),{dispatch:H,key:U}=_.props.getDispatchInfoByType(k),V=["tab_update","line_update"],G=_.options.curCityId?_.init_CityFreshData():JSON.parse(JSON.stringify(_.getData())),q=JSON.parse(JSON.stringify(G[k]));if(I&&e.map((e=>{var _;return e.cityId&&e.cityId===e.value&&(e.value=(null===(_=q.list.find((e=>e.status)))||void 0===_?void 0:_.value)||e.value),e})),["close","apply"].includes(C)&&_.setState({showDialog:!1}),["apply"].includes(C)&&((null==e?void 0:e.find((e=>{var k,I,C,R,j;return e.filterId==(null==_||null===(k=_.props)||void 0===k||null===(I=k.searchBarData)||void 0===I||null===(C=I.search)||void 0===C||null===(R=C.item)||void 0===R||null===(j=R.data)||void 0===j?void 0:j.filterId)})))||_.props.dispatch({type:"SEARCHBARDATA_CLEAR_KEYWORD"})),H&&U&&(j[U]=location_view_objectSpread({},q),_.props.logUserBehavies(B,j),"locations_update"===B&&_.$safeLog("logListpageDistrictChoice",e),"metros_update"===B&&_.$safeLog("logListpageMetroChoice",e),"airportTrainstations_update"===B&&_.$safeLog("logListpageTrafficepointChoice",e),"landmarks_update"===B&&_.$safeLog("logListpageLandmarkChoice",e),"zones_update"===B&&_.$safeLog("logListpageZoneChoice",e),"cityId_update"===B&&_.$safeLog("logListpageCityChoice",e),"hotArea_update"===B&&_.$safeLog("logListpageHotAreaChoice",e)),B.includes("clear")){_.$safeLog("logListpageLocationLayerClickClean");let e=_.getData();if(e.cityId&&e.cityId.list.length>0)return _.options.curCityId=null,_.show(!1,!0),!1}if(B.includes("close"))return _.options.curCityId=null,_.$safeLog("logListpageLocationLayerActionClose",_.state.data.title),locationLayerCloseTrace(),!1;if(C.includes("tab_update")&&_.$safeLog("logListpageLocationLayerClickTab",k),C.includes("line_update")&&_.$safeLog("logListpageLocationFilterItemAction",k,e),!V.includes(C)){if("metros"===k)q=_.props.updateMetroState(q,e);else{let _=e.map((e=>e.value));q.list.map((e=>{e.status=0,_.includes(e.value)&&(e.status=1)}))}if(I&&_.props.dispatch(H(j)),"apply"==C)switch(k){case"areas":_.props.dispatch(updateGeneralFilters({filters:e,type:"139"}));break;case"metros":_.props.dispatch(updateGeneralFilters({filters:e,type:"41"}));break;case"zones":_.props.dispatch(updateGeneralFilters({filters:e,type:"8"}));break;case"landmarks":_.props.dispatch(updateGeneralFilters({filters:e,type:"18"}));break;case"airportTrainstations":_.props.dispatch(updateGeneralFilters({filters:e,type:"10"}));break;case"hotArea":_.props.dispatch(updateGeneralFilters({filters:e,type:"50"}))}}if(I){const k=_.props.needDeleteKeyword,I=1===(0,ci.Z)(_.props,"searchCondition.directSearch",0);I&&!k||(_.props.dispatch(clearKeyword()),_.props.dispatch(toggleDirectSearchSwitch(!1)));if(!(new OptionType).isProvinceDistrict()&&(I&&!k||tools_optionInfo_resetOptionInfo(),1===e.length)){let k=(0,ci.Z)(e[0],"lat",0),I=(0,ci.Z)(e[0],"lng",0);_.props.dispatch(updatePosition({lat:k,lng:I}))}}B.includes("apply")&&(_.$safeLog("logListpageLocationLayerActionClose",_.state.data.title),_.$safeLog("logListpageLocationLayerClickShowResult",j,_.props.stateTree,U)),R.filter((e=>e!==k)).map((e=>{let{dispatch:k,key:I}=_.props.getDispatchInfoByType(e),C=_.options.curCityId?_.init_CityFreshData():JSON.parse(JSON.stringify(_.getData())),R=JSON.parse(JSON.stringify(C[e]));(R.list||lineList).map((e=>{e.status=0}));let j={};j[I]=location_view_objectSpread({},R),_.props.dispatch(k(j))}))}}render(){const{data:{title:e},showDialog:_=!1}=this.state,k=this.isShow(),{sharkInfo:{showall:I,clear:C}}=this.props,{isShow:R,isClear:j}=this.isShowAll(),{data:{hotArea:{list:B=[]}={}}={}}=this.options;let H=this.getSelectVal();const U=B.length>3;return oy.createElement("div",{className:"location-wrap-v8"},k?oy.createElement("div",{className:"location-container"},oy.createElement("div",{className:"location-title  title-empty"},oy.createElement("p",null,e),j&&oy.createElement("span",{onClick:this.onClear},C)),oy.createElement("div",{className:"location-content"},oy.createElement(RadioBox,{data:B.slice(0,3),value:H,onChange:this.onChangeItem,iconClassName:"location-radiobox",iconType:"ic_new_check",isShowAll:R,bottomText:this.$translatePlural(I,B.length),isExposure:U,showAll:()=>this.show(!1,!1,U)}))):null,_&&Nt().createPortal(this.renderDialogMult(_,DialogMult),document.body))}}const iy={logListpageHotAreaChoice:e=>(e=e||[],{logKey:"ibu_htl_"+(0,Le.h8)()+"_hot_area_choice",logDesc:"hot_area_choice",logValue:{hotareas:e.map((e=>({uniquekey:e.value,text:e.text})))}}),logListpageMetroChoice:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_metro_choice",logDesc:"The subway filter",logValue:{maglev:null,linename:e[0].lineTitle||null,stationname:e[0].text||null}}),logListpageLocationLayerClickClean:()=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_locationlayer_click_clean",logDesc:"Position filter floating layer click clear"})},ay={logListpageLocationLayerClickShowResult:(e,_,k)=>{let I=["zone","metro","landmark","location","airportTrainstation","cityId","hotArea"],getPropName=e=>"metro"===e?"lineList":"list",C={};I.filter((e=>e!==k)).map((e=>{let k=getPropName(e);C[e]=(_.filterCondition[e][k]||[]).map((e=>(e.status=0,e)))||[]})),C[k]=e[k][getPropName(k)];let{zone:R,landmark:j,airportTrainstation:B}=C,{metro:H,location:U,cityId:V,hotArea:G}=C,q="";R.forEach((e=>{1!==e.status&&!0!==e.status||(q+=q?", "+e.text:e.text)}));let z="";j.forEach((e=>{1!==e.status&&!0!==e.status||(z=e.text)}));let J="",Q="";B.forEach((e=>{1!==e.status&&!0!==e.status||(J=e.type,Q=e.text)}));let ee="",te="";H.forEach((e=>{if(1===e.status||!0===e.status){ee=e.title;for(let _=0;_<H.length;_++)1!==e.siteList[_].status&&!0!==e.siteList[_].status||(te=e.siteList[_].text)}}));let ne="";U.forEach((e=>{1!==e.status&&!0!==e.status||(ne=e.text)}));let re="";V.forEach((e=>{1!==e.status&&!0!==e.status||(re=e.text)})),G=G.find((e=>e.status))||{};let oe=new Map([["zone","commercialareas"],["metro","metrofilter"],["landmark","landmarks"],["location","districts"],["airportTranstation","trafficpointfilter"],["cityId","citys"]]),ie={distance:null,commercialareas:q||null,landmarks:z||null,trafficpointfilter:{traffictype:J||null,name:Q||null},metrofilter:{maglev:null,linename:ee||null,stationname:te||null},districts:ne||null,citys:re||null};if(Object.keys(e).some((e=>I.includes(e))))switch(Object.keys(e)[0]){case"zone":ie[oe.get(Object.keys(e)[0])]=Object.values(e)[0].list.filter((e=>e.status)).map((e=>e.text)).join(",");break;case"cityId":case"location":case"landmark":ie[oe.get(Object.keys(e)[0])]=Object.values(e)[0].list.find((e=>e.status)).text;break;case"airportTranstation":ie[oe.get(Object.keys(e)[0])]={traffictype:Object.values(e)[0].list.find((e=>e.status)).type||null,name:Object.values(e)[0].list.find((e=>e.status)).text||null};break;case"metro":{let _="",k="";e.metro.lineList.forEach((e=>{if(1===e.status||!0===e.status){_=e.title;for(let _=0;_<H.length;_++)1!==e.siteList[_].status&&!0!==e.siteList[_].status||(k=e.siteList[_].text)}})),ie[oe.get(Object.keys(e)[0])]={maglev:null,linename:_||null,stationname:k||null};break}case"hotArea":ie.hotArea={text:G.text||"",uniquekey:G.value||""}}return{logKey:"ibu_htl_"+(0,Le.h8)()+"_locationlayer_click",logValue:ie,logDesc:"position filter floating layer click to display the results"}},logListpageCityChoice:e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_=e.text)})),{logKey:"ibu_htl_"+(0,Le.h8)()+"_city_choice",logDesc:"filter city",logValue:{citys:_||null}}},logListpageDistrictChoice:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_district_choice",logDesc:"regional filter",logValue:{districts:e[0].text||null}}),logListpageHotAreaChoice:iy.logListpageHotAreaChoice,logListpageMetroChoice:iy.logListpageMetroChoice,logListpageTrafficepointChoice:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_trafficpoint_choice",logDesc:"Traffic point filtration",logValue:{traffictype:e[0].type||null,trafficname:e[0].text||null}}),logListpageLandmarkChoice:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_landmark_choice",logDesc:"Landmark filter",logValue:{landmarks:e[0].text||null}}),logListpageZoneChoice:e=>{let _="";return e.forEach((e=>{1!==e.status&&!0!==e.status||(_+=_?", "+e.text:e.text)})),{logKey:"ibu_htl_"+(0,Le.h8)()+"_commercialarea_choice",logDesc:"Business filtering",logValue:{commercialareas:_||null}}},logListpageLocationLayerClickTab:e=>("cityId"===e?e="city":"metros"===e?e="metro":"locations"===e?e="location":"landmarks"===e?e="landmark":"zones"===e?e="commercialarea":"airportTrainstations"===e?e="trafficpoint":"hotArea"===e&&(e="hotarea"),{logKey:"ibu_htl_"+(0,Le.h8)()+"_locationlayer_click_tab",logValue:{tabname:e.toLowerCase()},logDesc:"Position filter floating layer click TAB"}),logListpageLocationFilterItemAction:(e,_)=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_locationfilteritem_action",logValue:{tabname:e.toLowerCase(),itemname:_.title,action:"expand"},logDesc:"Position filter floating layer operation"}),logListpageLocationLayerAction:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_locationlayer_action",logValue:{position:e||null,action:"open"},logDesc:"Position filter floating layer operation"}),logListpageLocationLayerActionClose:e=>({logKey:"ibu_htl_"+(0,Le.h8)()+"_locationlayer_action",logValue:{position:e||null,action:"close"},logDesc:"Position filter floating layer operation"}),logListpageLocationLayerClickClean:iy.logListpageLocationLayerClickClean},updateCityRefresh=e=>({type:"CITYREFRESH_UPDATE",payload:e});function help_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}let ly={getProKey:e=>"metros"===e?"lineList":"list",resetDataState:e=>(Object.keys(e).map((_=>{e[_][ly.getProKey(_)].map((e=>{e.status=0,e.siteList&&e.siteList.map((e=>{e.status=0}))}))})),e),getCurType:(e,_)=>{let k=Object.keys(e),I=k.filter((_=>{let k={};return k[ly.getProKey(_)]=[],e[_]=e[_]||k,(e[_]&&e[_].list||e[_].lineList).filter((e=>e.status)).length>0}));return!I.length&&(I=k.filter((_=>(e[_].list||e[_].lineList).length>0))),["cityId","hotArea","zones","landmarks","airportTrainstations","metros","locations","areas"].find((e=>-1!==I.indexOf(e)&&(_=e))),_},dispatchKeyWord:(e,_)=>{let k={_cityId:e[0].value,id:e[0].value,displayName:e[0].text,word:e[0].text,type:SEARCH_TYPES.IntlCity,lat:0,lon:0};_(actionCreator_updateSearchInputKeyword(k.word)),_(actionCreator_updateKeyword(k))},syncOtherStateByCity:(e,_,k)=>{let{zones:C,landmarks:R,airportTrainstations:j,metros:B,locations:H,brands:U,amenties:V,categorys:G,features:q,hotArea:z}=e,J={cityId:_,zones:C,landmarks:R,airportTrainstations:j,metros:B,locations:H,brand:U,amenty:V,category:G,feature:q,hotArea:z},Q=Object.assign({},function help_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?help_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):help_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}({},J));k(updateCityRefresh(Q))},resetOtherCityFilter:(e,_,k)=>{let{cityRefresh:I,filterCondition:C}=k,R={};["amenty","brand","category","feature"].forEach((e=>{let _=C[e].list.filter((e=>e.status)).map((e=>e.value))||[];R[e]=I[e]||{list:[]},R[e].list.map((e=>{_.includes(e.value)&&(e.status=1)}))})),_(e(R))},checkisSelected:e=>Object.keys(e).filter((_=>(e[_]=e[_]||{list:[],lineList:[]},(e[_].list||e[_].lineList).filter((e=>e.status)).length>0))).length>0,ubtMapping:()=>ay};const sy=ly,cy={cityId:{list:[]},zones:{list:[]},landmarks:{list:[]},airportTrainstations:{list:[]},metros:{lineList:[]},locations:{list:[]},removeDispatch:null},uy="23|10",dy="4|2",py="4|1",hy="23|5";var fy,my=k(13863),gy=k(67294);let vy=decorators(fy=(0,Ni.$j)((e=>{let{cityRefresh:_,filterCondition:k,initData:I,searchCondition:C,longList:R,renderFilters:j,searchBarData:B}=e;return{stateTree:e,needDeleteKeyword:(R.directSearchFilter||{}).needDeleteKeyword,cityRefresh:_,filterCondition:k,initData:I,searchCondition:C,zones:j.generalFilters[8]||{list:[]},landmarks:j.generalFilters[18]||{list:[]},airportTrainstations:j.generalFilters[10]||{list:[]},metros:j.generalFilters[41]||{list:[]},locations:j.generalFilters[9]||{list:[]},hotArea:j.generalFilters[50]||{list:[]},areas:j.generalFilters[139]||{list:[]},searchBarData:B}}),(e=>({dispatch:e,updateCityRefresh:_=>e(updateCityRefresh(_)),areasUpdate:_=>e(function areasUpdate(e){return{type:"UPDATE_AREAS",payload:e}}(_))})))(fy=class Location extends location_view_View{constructor(e){var _;super(e),_=this,this.init=()=>{var e;let{sharkInfo:{location:_,clear:k,apply:I},isNewMap:C}=this.props,R=this.getData();Object.assign(this.options,{data:R,title:_,clear:k,apply:I,isLeftFilters:C});let j=Object.keys(R).some((e=>R[e]&&R[e][sy.getProKey(e)]&&R[e][sy.getProKey(e)].length>0)),B=R.locations;this.options.selectVal=null==B||null===(e=B.list)||void 0===e?void 0:e.filter((e=>e.status)).map((e=>e.value)),this.state={data:{title:_},showDialog:!1,refresh:!1,show:j}},this.getData=e=>{let{zones:_,landmarks:k,airportTrainstations:I,metros:C,locations:R,hotArea:j,areas:B}=e||this.props,H={hotArea:j,zones:_,landmarks:k,airportTrainstations:I,metros:C,locations:R,areas:B};return(0,my.I)(H)},this.isShow=()=>{let e=this.getData();return Object.assign(this.options,{data:e}),Object.keys(e).some((_=>e[_]&&e[_][sy.getProKey(_)]&&e[_][sy.getProKey(_)].length>0))},this.init_CityFreshData=()=>this.props.cityRefresh?this.props.cityRefresh:Object.assign(cy,{cityId:this.props.filterCondition.cityId}),this.show=function(e){var k;let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=arguments.length>2?arguments[2]:void 0;_.setState({showDialog:!0,isCityChange:e,isClear:I},(()=>{changeDialogStyle(_.state.showDialog)})),e||(C?_.$safeLog("logListpageOnemoreClick"):_.$safeLog("logListpageLocationLayerAction",_.state.data.title)),sendFilterShowAllTrace({filtertype:"",filtertypename:null===(k=_.props.data)||void 0===k?void 0:k.title})},this.renderDialogMult=(e,_)=>{let{type:k,clear:I,apply:C,title:R,loadingCity:j,isLeftFilters:B}=this.options,{isCityChange:H=!1,isClear:U=!1}=this.state,V=H?this.getData(this.init_CityFreshData()):this.getData();U&&(V=sy.resetDataState(V)),k=sy.getCurType(V,k);let G={data:JSON.parse(JSON.stringify(V)),keys:["cityId","hotArea","zones","landmarks","airportTrainstations","metros","locations","areas"],type:k,title:R,loadingCity:j,clear:I,apply:C,onChange:this.onChange.bind(this),show:e,isLeftFilters:B};return gy.createElement(_,G)},this.ubtMapping=sy.ubtMapping(),this.checkisSelected=()=>sy.checkisSelected(this.getData()),this.getSelectVal=()=>{let e;const{data:{hotArea:_={}}={}}=this.options;return(_.list||[]).forEach((_=>{1==_.status&&(e=_.filterId)})),e},this.isShowAll=()=>{let e=!1,_=!1;const{data:k}=this.options;return Object.keys(k).forEach((I=>{const C=k[I];"hotArea"==I?((C.list||[]).slice(0,3).find((e=>1==e.status))&&(_=!0),(C.list||[]).slice(3).find((e=>1==e.status))&&(e=!0,_=!0)):"metros"==I?(C.lineList||[]).find((e=>!!(e.siteList||[]).find((e=>1==e.status))))&&(e=!0,_=!0):(C.list||[]).find((e=>1==e.status))&&(e=!0,_=!0)})),{isShow:e,isClear:_}},this.onChangeItem=(0,ed.P2)((e=>{let _=JSON.parse(JSON.stringify(this.getData())),k=JSON.parse(JSON.stringify(_.hotArea)).list.filter((_=>(_.status=0,!(!e||!e.includes(_.filterId))&&(_.status=1,!0))));this.onChange(k,"hotArea",!0,"apply")}),500),this.onClear=()=>{const{data:e}=this.options;let _="hotArea";Object.keys(e).forEach((k=>{const I=e[k];"metros"==k?(I.lineList||[]).find((e=>!!(e.siteList||[]).find((e=>1==e.status))))&&(_=k):(I.list||[]).find((e=>1==e.status))&&(_=k)})),this.onChange([],_,!0,"apply")},this.options={selectVal:[],curVal:"",title:"",clear:"",apply:"",curCityId:null,loadingCity:!1,type:""},this.init()}})||fy)||fy;var yy,by=k(39621).default;class payment_view_View extends by{constructor(e){super(e)}render(){let{renderFilterHtml:e,renderFilterTypes:_}=this.props;return e.call(this,_.isRadio,"Payment")}}let _y=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[7]||{list:[]}})),{updatePayment:function updatePayment(e){return{type:"PAYMENT_UPDATE",payload:e}},payTypeUpdate:function payTypeUpdate(e){return{type:"PAY_TYPE_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters})(yy=decorators(yy=class Payment extends payment_view_View{constructor(e){super(e),this.onChange=(0,ed.P2)((e=>{var _;null===(_=this.props)||void 0===_||_._onChange.call(this,[e])}),500),this.clearSelected=()=>{var e;null===(e=this.props)||void 0===e||e._clearSelected.call(this)},this.ubtMapping={logListpagePaytypeChoice:U.t9},this.options={actionType:"BOOKPOLICY_UPDATE",ubtLogName:"logListpagePaytypeChoice",actionFun:e.updatePayment,name:"payment",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"PAY_TYPE_UPDATE",filterTypeBFF:"7"}}})||yy)||yy;var wy,Ey=k(39621).default,Sy=k(67294);let Oy=(0,Ni.$j)((e=>({longList:e.longList,metaHotel:e.metaHotel,filters:e.filters,renderFilters:e.renderFilters})))(wy=class MapFilter extends Ey{constructor(e){super(e),this.onClickMapButton=()=>{this.setState({showLoadingIcon:!0},(()=>{this.redirectMap()}))},this.redirectMap=()=>{let e,_=/&?lat=((-?\d+)(\.\d+)|(-?\d+))/gi,k=/&?lon=((-?\d+)(\.\d+)|(-?\d+))/gi,I=~location.pathname.toLowerCase().indexOf("/searchresults"),C="hotel"===(0,Ne.Z)("optionType").toLowerCase();if(I||C)try{const{metaHotel:C,longList:{hotelList:R}}=this.props;let j=location.search.replace(_,"").replace(k,"");e="//".concat(location.host,"/hotels/map").concat(j,"&lat=").concat(I?C.card.position.lat:R.list[0].position.lat,"&lon=").concat(I?C.card.position.lng:R.list[0].position.lng,"&").concat(I?"isMeta=1":"")}catch(I){let C=location.search.replace(_,"").replace(k,"");e="//".concat(location.host,"/hotels/map").concat(C,"&lat=0&lon=0")}else e="//".concat(location.host,"/hotels/map").concat(location.search);const R=(0,ii.u0)(e);if(R.crossPromotionId||R.crossPriceConsistencyLog){R.crossPromotionId&&delete R.crossPromotionId,R.crossPriceConsistencyLog&&delete R.crossPriceConsistencyLog;const _=(0,ii.B7)(R).slice(1);e="//".concat(location.host,"/hotels/map?").concat(_)}this.$safeLog("logListpageShowMap"),ke.y7.set("listToMapClickTime",+new Date),ke.y7.set("firstMapPageList",this.props.longList.hotelList),location.href=e+"&fromList=1"},this.ubtMapping={logListpageShowMap:U.M3},this.options={},this.state={showLoadingIcon:!1}}render(){const{curWidth:e="",curHeight:_="",title:k=this.$translate("key.hotel.list.map.show.on.map"),isQuickly:I=!1}=this.props;return Sy.createElement("div",{className:"mapfilter-wrap-v8"},Sy.createElement("div",{className:"mapfilter-container".concat(I?" float":""),style:{width:e,height:_},onClick:this.onClickMapButton},Sy.createElement(Ea.Z,{src:"//aw-s.tripcdn.com/modules/ibu/ibu-hotel-online/es/image/bg_mapV8.87d8e59989a401c2ce2bc772fea4a32a.png",className:"mapfilter-background",ssr:!0}),Sy.createElement("div",{className:"map-item"},Sy.createElement(ri,{is_icon_rotate:!1,className:"map-item-button",loading:this.state.showLoadingIcon,loadingAutoSize:!1},k))))}})||wy;var Ty=k(39621).default,ky=k(67294);class view_Checkbox extends Ty{constructor(e){super(e)}render(){const{data:e,className:_,isShowAll:k="",bottomText:I="",showAll:C,isMoreThanThree:R=!0}=this.props;let H=""!==I;return!e||e.length<1?null:ky.createElement("ul",{className:j()("m-checkbox-v8",_)},e.map(((e,_)=>ky.createElement("li",{key:_,className:j()("m-checkbox_item",{active:this.state.value.indexOf(e.filterId)>-1}),onClick:this.handleClick.bind(this,e,_)},ky.createElement(B.Z,{type:"checkbox",className:"iconClassName iconType"}),ky.createElement("span",{className:"checkboxTxt",dangerouslySetInnerHTML:{__html:e.text}})))),H&&R?ky.createElement("li",{id:"showAll",className:k,onClick:()=>C(this),style:{position:"relative"}},ky.createElement("span",null,I)):null)}}function checkbox_filter_v8_logUbtMapping_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function checkbox_filter_v8_logUbtMapping_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?checkbox_filter_v8_logUbtMapping_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):checkbox_filter_v8_logUbtMapping_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const logV8ListpageFilterShow=(e,_)=>{var k,I,C,R;const j=H.default.getByKey("pageId");let B=(0,ii.WH)("cityName");for(;(null===(U=B)||void 0===U?void 0:U.indexOf("%20"))>-1;){var U;B=B.replace("%20"," ")}const V={page:j,cityid:null===(k=H.default.getByKey("initData"))||void 0===k||null===(I=k.searchCondition)||void 0===I?void 0:I.cityId,cityname:B||(null===(C=H.default.getByKey("initData"))||void 0===C||null===(R=C.searchCondition)||void 0===R?void 0:R.cityName)},G=e.map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{filtertype:e.type,filtername:e.text,filtertitle:_,filtersubtype:e.subType,filterid:e.filterId,filtervalue:e.value}}));let q;switch(_){case"Bed":q="10320668268"==j?"P0326_SP0000_M0001_ID0001_exposure":"P0104_SP0000_M0007_ID0001_exposure";break;case"Category":q="10320668268"==j?"P0326_SP0000_M0001_ID0003_exposure":"P0104_SP0000_M0007_ID0003_exposure";break;case"Features":q="10320668268"==j?"P0326_SP0000_M0001_ID0002_exposure":"P0104_SP0000_M0007_ID0002_exposure";break;case"Brand":q="10320668268"==j?"P0326_SP0000_M0001_ID0004_exposure":"P0104_SP0000_M0007_ID0004_exposure"}return{logKey:q,actionType:"show",logValue:checkbox_filter_v8_logUbtMapping_objectSpread(checkbox_filter_v8_logUbtMapping_objectSpread({},V),{},{filterlist:G})}},logV8ListpageFilterClick=(e,_)=>{var k,I,C,R;const j=H.default.getByKey("pageId");let B=(0,ii.WH)("cityName");for(;(null===(U=B)||void 0===U?void 0:U.indexOf("%20"))>-1;){var U;B=B.replace("%20"," ")}const V={page:j,cityid:null===(k=H.default.getByKey("initData"))||void 0===k||null===(I=k.searchCondition)||void 0===I?void 0:I.cityId,cityname:B||(null===(C=H.default.getByKey("initData"))||void 0===C||null===(R=C.searchCondition)||void 0===R?void 0:R.cityName)},G=e.map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{filtertype:e.type,filtername:e.text,filtertitle:_,filtersubtype:e.subType,filterid:e.filterId,filtervalue:e.value,filterselectstate:e.status}}));let q;switch(_){case"Bed":q="10320668268"==j?"P0326_SP0000_M0001_ID0001_click":"P0104_SP0000_M0007_ID0001_click";break;case"Category":q="10320668268"==j?"P0326_SP0000_M0001_ID0003_click":"P0104_SP0000_M0007_ID0003_click";break;case"Features":q="10320668268"==j?"P0326_SP0000_M0001_ID0002_click":"P0104_SP0000_M0007_ID0002_click";break;case"Brand":q="10320668268"==j?"P0326_SP0000_M0001_ID0004_click":"P0104_SP0000_M0007_ID0004_click"}return{logKey:q,actionType:"click",logValue:checkbox_filter_v8_logUbtMapping_objectSpread(checkbox_filter_v8_logUbtMapping_objectSpread({},V),{},{filterlist:G})}},logUbtMapping_ibu_htl_c_online_list_filter_click=(e,_)=>{var k,I,C,R;const j=H.default.getByKey("pageId");let B=(0,ii.WH)("cityName");for(;(null===(U=B)||void 0===U?void 0:U.indexOf("%20"))>-1;){var U;B=B.replace("%20"," ")}const V={page:j,cityid:null===(k=H.default.getByKey("initData"))||void 0===k||null===(I=k.searchCondition)||void 0===I?void 0:I.cityId,cityname:B||(null===(C=H.default.getByKey("initData"))||void 0===C||null===(R=C.searchCondition)||void 0===R?void 0:R.cityName)},G=(null==e?void 0:e.sequence)||"",q=e.map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{filtertype:e.type,filtername:e.text,filtertitle:_,filtersubtype:e.subType,filterid:e.filterId,filtervalue:e.value,filterselectstate:e.status,filterPosition:G}}));return{logKey:"ibu_htl_c_online_list_filter_click",actionType:"Trace",logValue:checkbox_filter_v8_logUbtMapping_objectSpread(checkbox_filter_v8_logUbtMapping_objectSpread({},V),{},{filterlist:q})}};class checkbox_filter_v8_CheckBox extends view_Checkbox{constructor(e){super(e),this.ubtMapping={logV8ListpageFilterShow:logV8ListpageFilterShow,logV8ListpageFilterClick:logV8ListpageFilterClick,ibu_htl_c_online_list_filter_click:logUbtMapping_ibu_htl_c_online_list_filter_click},this.state={value:this.props.value||this.props.defaultValue||[]}}componentDidMount(){if(this.props.filterType){this.$safeLog("logV8ListpageFilterShow",this.props.data,this.props.filterType);try{var e;const _=null!==(e=this.props.data)&&void 0!==e?e:[];for(let e=0;e<(null==_?void 0:_.length);e++){const k=JSON.parse(sendFilterShowTrace({filter:_[e],rank:e,is_layer:"F",filtertypename:""})),{ubtKey:I,data:C}=k;(0,Le.Uz)(I,C)}}catch(e){}}}componentDidUpdate(e){void 0!==this.props.value&&e.value!==this.props.value&&this.setState({value:this.props.value,sequence:this.props.sequence}),this.props.filterType&&JSON.stringify(e.data)!=JSON.stringify(this.props.data)&&(this.$safeLog("logV8ListpageFilterClick",this.props.data,this.props.filterType),this.$safeLog("ibu_htl_c_online_list_filter_click",this.props.data,this.props.filterType,this.props.sequence||""))}handleClick(e,_){const{onChange:k}=this.props;let I=this.state.value;e&&"1189"==(null==e?void 0:e.value)&&(0==(null==e?void 0:e.status)?ke.y7.set("feature",e):ke.y7.remove("feature")),e.filterId?(this.state.value.indexOf(e.filterId)>-1?I.splice(I.indexOf(e.filterId),1):"4"==e.type?(I.map(((e,_)=>{"4"===(null==e?void 0:e.split("|")[0])&&I.splice(_,1)})),I.push(e.filterId)):I.push(e.filterId),this.setState({value:I}),k&&k(I,e)):(this.state.value.indexOf(e.value)>-1?I.splice(I.indexOf(e.value),1):I.push(e.filterId),this.setState({value:I}),k&&k(I)),sendFilterClickTrace({filterid:e.filterId,filtertype:e.type,filtername:e.text,filterrank:_,is_layer:"F",filterselectstatus:e.status?0:1,filtertypename:""})}}var Iy,Cy=k(39621).default,Py=k(67294);let Ly=(0,Ni.$j)((e=>({popularFilters:e.renderFilters.quickFilters||{list:[]},bookPolicy:e.renderFilters.generalFilters[94]||{list:[]},breakfast:e.renderFilters.generalFilters[5]||{list:[]},bedType:e.renderFilters.generalFilters[4]||{list:[]},discount:e.renderFilters.generalFilters[83]||{list:[]},filterCondition:e.filterCondition,bookable:e.filterCondition.bookable})),(e=>({dispatch:e,updateQuickFilters:_=>e(updateQuickFilters(_)),updateGeneralFilters:_=>e(updateGeneralFilters(_)),updatePopularFilters:_=>e(updatePopularFilters(_)),updateBookingPolicy:_=>e(function updateBookingPolicy(e){return{type:"BOOKPOLICY_UPDATE",payload:e}}(_)),updateMeals:_=>e(function updateMeals(e){return{type:"MEALS_UPDATE",payload:e}}(_)),updateBedType:_=>e(updateBedType(_)),bookableUpdate:_=>e(bookableUpdate(_)),breakfastUpdate:_=>e(function breakfastUpdate(e){return{type:"BREAKFAST_UPDATE",payload:e}}(_)),bookPolicyUpdate:_=>e(function bookPolicyUpdate(e){return{type:"BOOKPOLICIES_UPDATE",payload:e}}(_)),discountUpdate:_=>e(function discountUpdate(e){return{type:"UPDATE_DISCOUNT",payload:e}}(_)),bedUpdate:_=>e(function bedUpdate(e){return{type:"BED_UPDATE",payload:e}}(_)),popularUpdate:_=>e(function popularUpdate(e){return{type:"UPDATE_POPULAR",payload:e}}(_)),removeFilter:_=>e(removeFilter(_))})))(Iy=decorators(Iy=class PopularFilter extends Cy{constructor(e){super(e),this.ubtMapping={logListpageQuickfilterChoice:U.bQ,logListpagePopularfiltersClick:U.of},this.getSyncInfo=()=>{let{bookPolicy:e,breakfast:_,bedType:k,updateBookingPolicy:I,updateMeals:C,updateBedType:R,discount:j}=this.props;return{bookPolicies:{list:e.list,dispatch:I,propKey:"bookPolicy",name:"BOOKPOLICY_UPDATE",filterTypeBFF:"94"},breakfasts:{list:_.list,dispatch:C,propKey:"breakfast",name:"BREAKFASTS_UPDATE",filterTypeBFF:"5"},bedTypes:{list:k.list,dispatch:R,propKey:"bedType",name:"BEDTYPES_UPDATE",filterTypeBFF:"4"},discount:{list:j.list,dispatch:updateDiscounts,propKey:"dicount",name:"DISCOUNT_UPDATE",filterTypeBFF:"83"}}},this.getfilterSelectedItem=e=>{let _=[dy,py];if(e.length>=2&&e.includes(dy)&&e.includes(py)){let k=e.findIndex((e=>"4|2"===e)),I=e.findIndex((e=>"4|1"===e)),C=null;C=k>I?k:I,e=e.filter((e=>!_.includes(e))).concat(e[C])}return e},this.onChange=(0,ed.P2)((e=>{var _,k,I,C,R,j,B,H,U;const V={5:"breakfasts",4:"bedTypes",83:"discount"};let{popularFilters:G}=this.props;G=ae()(G);const{list:q}=G||{};e=this.getfilterSelectedItem(e);let z=null===(_=G)||void 0===_||null===(k=_.list)||void 0===k?void 0:k.filter((e=>e.status)).map((e=>e.filterId));null===(I=G)||void 0===I||null===(C=I.list)||void 0===C||C.map((_=>(_.status=0,e.includes(_.filterId)&&(_.status=1),_)));let J=this.getSyncInfo(),Q={},ee=Array.from(new Set(e.concat(z)));ee.includes(dy)&&ee.includes(py)&&(ee=e),ee.map((e=>q.find((_=>_.filterId===e)))).forEach((_=>{let k=_.type,I=_.filterId,C=!e.includes(_.filterId);return _.filterId==uy||_.filterId==hy?(J.bookPolicies.list.map((e=>{e.filterId==I&&(e.status=C?0:1)})),Q.bookPolicies=J.bookPolicies,!1):C&&V[k]?(J[V[k]].list.map((e=>{e.status=0})),Q[V[k]]=J[V[k]],!1):void(V[k]&&(Q[V[k]]=J[V[k]],Q[V[k]].list=J[V[k]].list.map((e=>("bedTypes"===V[k]&&(e.status=0),e.filterId===I&&(e.status=1),e)))))}));let te=null===(R=G)||void 0===R||null===(j=R.list)||void 0===j?void 0:j.filter((e=>1==e.status));this.props.emitUpdate({filters:te},this.props.updateQuickFilters,"POPULARFILTER_UPDATE"),Object.keys(Q).forEach((e=>{let{list:_,name:k,filterTypeBFF:I}=Q[e],C=_.filter((e=>1==e.status));this.props.emitUpdate({filters:C,type:I},this.props.updateGeneralFilters,k)}));const ne=["1|1184"];(null===(B=G)||void 0===B||null===(H=B.list)||void 0===H?void 0:H.filter((e=>ne.includes(e.filterId)))).forEach((e=>{0==e.status&&this.props.removeFilter({filter:e,type:e.type}),1==e.status&&this.props.updateGeneralFilters({filters:[e],type:e.type})}));var re=e[(null===(U=e)||void 0===U?void 0:U.length)>0?e.length-1:0];if(re){var oe,ie,le=null===(oe=G)||void 0===oe||null===(ie=oe.list)||void 0===ie?void 0:ie.find((e=>e.filterId==re));this.$safeLog("logListpagePopularfiltersClick",le.text)}}),500),this.clearSelected=()=>{var e;let{popularFilters:{list:_}}=this.props;_=ae()(_);let k=_.map((e=>e.filterId)),I=this.getSyncInfo();Object.keys(I).map((e=>{I[e].list.map((e=>{k.includes(e.filterId)&&(e.status=0)}))})),_.map((e=>{e.status=0})),this.props.emitUpdate({filters:[]},this.props.updateQuickFilters,"POPULARFILTER_UPDATE"),Object.keys(I).forEach((e=>{let{list:_,name:k,filterTypeBFF:C}=I[e],R=_.filter((e=>1==e.status));this.props.emitUpdate({filters:R,type:C},this.props.updateGeneralFilters,k)}));const C=["1|1184"];(null===(e=_)||void 0===e?void 0:e.filter((e=>C.includes(e.filterId)))).forEach((e=>{0==e.status&&this.props.removeFilter({filter:e,type:e.type})}))}}render(){var e,_;const{sharkInfo:k,popularFilters:I={}}=this.props;var C;I&&(null==I?void 0:I.list)&&(I.list=(null==I||null===(C=I.list)||void 0===C?void 0:C.filter((e=>""!==e.text)))||[]);const R=(null==I||null===(e=I.list)||void 0===e?void 0:e.filter((e=>!!e.status)).map((e=>e.filterId)))||[];return Py.createElement("div",{className:"popularFilter-wrap-v8"},Py.createElement("div",{className:"popularFilter-container"},Py.createElement("div",{className:"popularFilter-title"},Py.createElement("p",{className:"popularFilter-main-title"},this.$translate("PopularFilters_ListPage")),!!(null==R?void 0:R.length)&&Py.createElement("span",{onClick:this.clearSelected.bind(this,I)},k.clear)),Py.createElement(checkbox_filter_v8_CheckBox,{data:null==I||null===(_=I.list)||void 0===_?void 0:_.filter((e=>"23|2"!=e.filterId)),value:R,onChange:this.onChange.bind(this),iconClassName:"icon-top",filterType:"popularFilters",sequence:this.props.sequence})))}})||Iy)||Iy;var Ny=k(39621).default,Dy=k(67294);class quickFilter_view_View extends Ny{constructor(e){super(e),this.renderIcon=(e,_)=>{const k="Diamond"===_;let I=new Array(Number(e)).fill("");return Dy.createElement(Dy.Fragment,null,I.map(((e,_)=>Dy.createElement(B.Z,{key:_,type:k?"ic_new_diamond":"ic_new_star"}))))}}render(){let{dispatch:e,sharkInfo:_,renderFilters:k}=this.props,I=initFilterData(k);const C=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx));return Dy.createElement("div",{className:"quickfilter-v8",ref:this.quickFilterRef},C?null:Dy.createElement(Oy,{curHeight:"100px",isQuickly:!0}),Dy.createElement(Ly,{list:I,sharkInfo:_,isQuickFilter:!0}),!!(null==I?void 0:I.length)&&Dy.createElement("div",{className:"q-filter-v8"},Dy.createElement("div",{className:"choosen selected"},Dy.createElement("div",{className:"choosen-title"},Dy.createElement("p",null,_.selected),Dy.createElement("span",{onClick:this.clearAllSelected.bind(this,I)},_.clear)),I.map(((_,k)=>{const I="6"===_.type;let C=_.text;if(I&&(0,q.rq)(this)){let e=_.text.match(/[\d]|[,]|[.]/g).join(""),k=2*Number(e.replace(",","."));C=_.text.replace(e,k)}return"16"===_.type&&(C=this.renderIcon(_.value,_.iconType)),Dy.createElement(Pa,{dispatch:e,key:k,name:C,data:_})})))))}}var Ay,Ry=k(67294);let xy=(0,Ni.$j)((e=>({filterCondition:e.filterCondition,renderFilters:e.renderFilters})))(Ay=class QuickFilter extends quickFilter_view_View{constructor(e){super(e),this.clearAllSelected=e=>{const{dispatch:_}=this.props;_(function removeALLFilters(e){return{type:"ALLFILTERS_REMOVE",payload:e}}()),e.forEach((e=>{_(e.removeDispatch([e])),"1"===(0,Ne.Z)("directSearch")&&(_(clearKeyword()),e.isHitDirectSearch&&_(updateSeachConditionDirectSearch(0)))})),_(updatePosition({lat:0,lng:0})),_(toggleRecommendLastPage(!1))},this.quickFilterRef=Ry.createRef()}})||Ay;var jy=k(39621).default,By=k(67294);class starRating_view_View extends jy{constructor(e){super(e)}render(){let{data:{list:e,title:_,type:k},selectVal:I,showClear:C,clear:R}=this.setSelectVal();if(!I.length){var j;const e=ke.Xb.get(fi.Mb)||[];if(e.length&&(null===(j=e[0].star)||void 0===j?void 0:j.length)){let _=ae()(e[0]);_.star=[],e.unshift(_),e.pop(),ke.Xb.setDirect(fi.Mb,e)}}return By.createElement("div",{className:"starrating-wrap-v8"},e.length?By.createElement("div",{className:"starrating-container"},By.createElement("div",{className:"starrating-title"},By.createElement("p",null,"Diamond"===k?this.$translate("key.hotel.filter.diamond.title"):_,By.createElement(B.Z,{type:"ic_new_question_line",className:"ic_question",onClick:()=>this.activeHelpModal()})),C&&By.createElement("span",{onClick:this.clearSelected.bind(this)},R)),By.createElement("div",{className:"starrating-content"},By.createElement("ul",{className:"sr-ul"},e.map(((e,_)=>{let C=I.includes(e.value)?"sr-li sr-checked":"sr-li";return By.createElement("li",{key:_,className:C,onClick:this.onChange.bind(this,e,_)},By.createElement("span",{className:"sr-checkbox"},2==e.value?"≤2":e.value),By.createElement("span",{className:"sr-level"},By.createElement(kl.Z,{num:1,type:null==k?void 0:k.toLowerCase(),iconStyle:{color:"#ffb400"}})))}))))):null)}}var My,Fy=k(24499).default,Hy=k(67294);let Ky=decorators(My=(0,Ni.$j)((e=>{var _;return{calendar:(null===(_=e.searchBarData)||void 0===_?void 0:_.calendar)||{},starFilter:e.renderFilters.generalFilters[16]||{list:[]}}}),{updateGeneralFilters:updateGeneralFilters})(My=class StarRating extends starRating_view_View{constructor(e){super(e),this.init=()=>{var e;const{starFilter:_,sharkInfo:{clear:k}}=this.props;Object.assign(this.options,{data:_,clear:k}),this.options.selectVal=null==_||null===(e=_.list)||void 0===e?void 0:e.filter((e=>e.status)),this.options.showClear=!!this.options.selectVal.length},this.activeHelpModal=()=>{const e=H.default.getByKey("initData.starInfo",this.ctx,{});Fy.show({className:"help-modal-width-v8",title:e.title,content:this.renderHelpModal(e.categoryInfoList),button:[],close:!0,maskClosable:!0})},this.renderHelpModal=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Hy.createElement("div",{className:"help-modal-content"},Hy.createElement("ul",null,e.map((e=>{var _;return Hy.createElement("li",{key:e.title,className:"categoryInfoItem"},Hy.createElement("div",{className:"categoryInfoItemTitle"},Hy.createElement(Ea.Z,{src:e.icon,imgSize:"contain",width:"unset",className:"categoryInfoItemTitleIcon"}),Hy.createElement("span",null,e.title)),Hy.createElement("div",{className:"categoryInfoItemDesc"},e.desc),Hy.createElement("ul",null,(null!==(_=e.items)&&void 0!==_?_:[]).map((e=>Hy.createElement("li",{key:e.name,className:"categoryInfoItemItems"},Hy.createElement("div",{className:"itemsItemName"},Hy.createElement("span",null,e.name),Hy.createElement(Ea.Z,{src:e.icon,imgSize:"contain",width:"unset",className:"itemsItemNameIcon"})),Hy.createElement("div",{className:"itemsItemDesc"},e.desc))))))}))))},this.onChange=(e,_)=>{var k,I;let{selectVal:C,data:{list:R}}=this.options,{starFilter:j,calendar:B}=this.props,H=ae()(j);if(1===C.length&&C.includes(e.value)){C=[],Object.assign(this.options,{selectVal:C}),H.list.map((_=>(e.value===_.value&&(_.status=0),_)));let _=H.list.filter((e=>1==e.status));return this.props.emitUpdate({filters:_,type:"16"},this.props.updateGeneralFilters,"UPDATE_STAR_RATING"),void this.$safeLog("logListpageStarChoice",R)}if(C.includes(e.value)){let _=C.findIndex((_=>_===e.value));C.splice(_,1)}else{let _=C.concat(e.value),k=Math.max(..._),I=Math.min(..._);C=C.length?R.filter((e=>e.value>=I&&e.value<=k)).map((e=>e.value)):[e.value]}this.options.selectVal=C,H.list.map((e=>(e.status=0,this.options.selectVal.includes(e.value)&&(e.status=1),e)));let U=H.list.filter((e=>1==e.status));this.props.emitUpdate({filters:U,type:"16"},this.props.updateGeneralFilters,"UPDATE_STAR_RATING"),this.$safeLog("logListpageStarChoice",R),sendFilterClickTrace({filterid:e.filterId,filtertype:e.type,filtername:e.value,filterrank:_,is_layer:"F",filterselectstatus:e.status?0:1,filtertypename:"",checkin:null==B||null===(k=B.checkIn)||void 0===k?void 0:k.replace(/\//g,"-"),checkout:null==B||null===(I=B.checkOut)||void 0===I?void 0:I.replace(/\//g,"-")})},this.clearSelected=()=>{var e;this.props.emitUpdate&&this.props.emitUpdate({filters:[],type:"16"},this.props.updateGeneralFilters,"UPDATE_STAR_RATING"),this.resetSelected(),this.$safeLog("logListpageStarChoice",(null===(e=this.props.starFilter)||void 0===e?void 0:e.list)||[])},this.ubtMapping={logListpageStarChoice:U.OH},this.options={selectVal:[],curVal:"",showClear:!1},this.init()}setSelectVal(){let{starFilter:e}=this.props,{selectVal:_,showClear:k}=this.options;return _=e.list.filter((e=>e.status)).map((e=>e.value)),k=!!_.length,Object.assign(this.options,{selectVal:_,showClear:k,data:e}),this.options}resetSelected(){this.options.selectVal=[]}componentDidMount(){var e,_;const k=null===(e=this.options)||void 0===e||null===(_=e.data)||void 0===_?void 0:_.list;for(let e=0;e<k.length;e++){const _=JSON.parse(sendFilterShowTrace({filter:k[e],rank:e,is_layer:"F",filtertypename:""})),{ubtKey:I,data:C}=_;(0,Le.Uz)(I,C)}}})||My)||My;var Uy,Zy=k(39621).default;class health_view_View extends Zy{constructor(e){super(e)}render(){const{renderFilterHtml:e,renderFilterTypes:_}=this.props;return e.call(this,_.isRadio,"Health")}}let Vy=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[90]||{list:[]}})),{updateHealth:function updateHealth(e){return{type:Ga,payload:e}},healthUpdateBFF:function healthUpdateBFF(e){return{type:Av,payload:e}},updateGeneralFilters:updateGeneralFilters})(Uy=decorators(Uy=class Health extends health_view_View{constructor(e){super(e),this.onChange=(0,ed.P2)((e=>{var _;null===(_=this.props._onChange)||void 0===_||_.call(this,[e])}),500),this.clearSelected=()=>{var e;null===(e=this.props._clearSelected)||void 0===e||e.call(this)},this.options={name:"health",actionFun:e.updateHealth,actionType:Ga,actionFunBFF:e.updateGeneralFilters,actionTypeBFF:Av,filterTypeBFF:"90"}}})||Uy)||Uy;var Wy,Gy=k(39621).default;class roomType_view_View extends Gy{constructor(e){super(e)}render(){let{renderDialogFilterShowAllHtml:e}=this.props;return e?e.call(this,!1,"RoomType"):null}}let $y=decorators(Wy=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[77]||{list:[]}})),{updateAmenities:updateAmenities,facilityUpdate:facilityUpdate,updateGeneralFilters:updateGeneralFilters})(Wy=class RoomType extends roomType_view_View{constructor(e){var _;super(e),_=this,this.onChange=function(e){var k;let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=arguments.length>2?arguments[2]:void 0;null===(k=_.props)||void 0===k||k._onChangeDialog.call(_,e,I,C)},this.onChangeItem=(0,ed.P2)((e=>{var _;null===(_=this.props)||void 0===_||_._onChange.call(this,e)}),500),this.show=()=>{this.setState({showStatus:!this.state||!this.state.showStatus},(()=>{this.state.showStatus||scrollToTitle("".concat(this.options.scope,"-container"))})),this.$safeLog("logListpageFilterItemAction",this.options.scope),sendFilterShowAllTrace({filtertype:"77",filtertypename:this.props.data.title})},this.clearSelected=()=>{var e;null===(e=this.props)||void 0===e||e._clearSelected.call(this)},this.ubtMapping={logListpageFilterItemAction:U.mn,logListpageFacilityChoice:U.eQ},this.options={actionType:"roomtype",actionFun:e.updateAmenities,ubtLogName:"",scope:"roomtype",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"ROOMTYPE_UPDATE",filterTypeBFF:"77"}}componentDidMount(){}})||Wy)||Wy;var qy,zy=k(39621).default;class roomFacility_view_View extends zy{constructor(e){super(e)}render(){let{renderFilterShowAllHtml:e,renderFilterTypes:_}=this.props;return e.call(this,_.isRadio,"RoomFacility")}}let Yy=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[81]||{list:[]}})),{updateRoomFacility:function updateRoomFacility(e){return{type:"ROOMFACILITY_UPDATE",payload:e}},roomFacilityUpdate:function roomFacilityUpdate(e){return{type:"ROOM_FACILITY_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters})(qy=decorators(qy=class RoomFacility extends roomFacility_view_View{constructor(e){super(e),this.onChange=(0,ed.P2)((e=>{var _;null===(_=this.props)||void 0===_||_._onChange.call(this,[e])}),500),this.clearSelected=()=>{var e;null===(e=this.props)||void 0===e||e._clearSelected.call(this)},this.show=()=>{this.setState({showStatus:!this.state||!this.state.showStatus},(()=>{this.state.showStatus||scrollToTitle("".concat(this.options.scope,"-container"))})),sendFilterShowAllTrace({filtertype:"81",filtertypename:this.props.data.title})},this.ubtMapping={logListpagePaytypeChoice:U.t9},this.options={actionType:"BOOKPOLICY_UPDATE",ubtLogName:"",actionFun:e.updateRoomFacility,name:"roomFacility",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"ROOM_FACILITY_UPDATE",filterTypeBFF:"81"}}})||qy)||qy;var Jy,Xy=k(39621).default;class roomNum_view_View extends Xy{constructor(e){super(e)}render(){let{renderFilterHtml:e,renderFilterTypes:_}=this.props;return e.call(this,_.isRadio,"RoomNum")}}let Qy=(0,Ni.$j)((e=>({data:e.renderFilters.generalFilters[66]||{list:[]}})),{updateRoomNum:function updateRoomNum(e){return{type:"ROOMNUM_UPDATE",payload:e}},updateGeneralFilters:updateGeneralFilters})(Jy=decorators(Jy=class RoomNum extends roomNum_view_View{constructor(e){super(e),this.onChange=(0,ed.P2)((e=>{var _;null===(_=this.props)||void 0===_||_._onChange.call(this,[e])}),500),this.clearSelected=()=>{var e;null===(e=this.props)||void 0===e||e._clearSelected.call(this)},this.ubtMapping={logListpageRoomNumChoice:U.T2},this.options={name:"roomNum",actionType:"ROOMNUM_UPDATE",actionFun:e.updateRoomNum,actionTypeClear:"ROOMNUM_REMOVE",ubtLogName:"logListpageBookableChoice",actionFunBFF:e.updateGeneralFilters,actionTypeBFF:"ROOM_NUM_UPDATE",filterTypeBFF:"66"}}})||Jy)||Jy;var eb=k(39621).default,tb=k(67294);class view_Dialog extends eb{constructor(e){super(e)}render(){let{data:{list:e,title:_},show:k,isLeftFilters:I=!1}=this.state;const{isSingle:C=!1,clear:R,apply:H}=this.options;return!e||e.length<1?null:tb.createElement("div",{className:j()({"m-dialog-wrap-v8":k,isLeftFilters:I}),onClick:this.close.bind(this)},k&&tb.createElement("div",{className:"dialog-info",onClick:e=>e.stopPropagation()},tb.createElement("div",{className:"dialog-title"},tb.createElement("p",null,_),tb.createElement("span",{onClick:this.close.bind(this)},tb.createElement(B.Z,{type:"close",className:"close"}))),tb.createElement("div",{className:"dialog-types"}),tb.createElement("div",{className:"dialog-content"},tb.createElement("ul",{className:"dialog-ul-items"},e.map(((e,_)=>{let k=C?e.status?"success":"radiobox":"checkbox";return tb.createElement("li",{key:_,className:"dialog-li-item ".concat(e.status?"item-checked":""),onClick:this.clickHandler.bind(this,e,!e.status)},tb.createElement(B.Z,{type:k,className:"item-checkbox"}),e.icon&&tb.createElement(B.Z,{type:e.icon,className:"dialog-icon"}),tb.createElement("span",{className:"checkboxTxt"},e.text))})))),tb.createElement("div",{className:"dialog-action"},tb.createElement("div",{className:"action-clear"}," ",tb.createElement(Buttons,{type:"outline",onClick:this.onClear.bind(this),className:"btn-clear"},R)),tb.createElement("div",{className:"action-apply"},tb.createElement(Buttons,{type:"primary",onClick:this.applySelect.bind(this),className:"btn-primary"},H)))))}}class dialog_v8_Dialog extends view_Dialog{constructor(e){super(e),this.options={currentSelect:[],hasSelected:[],isSingle:!1},this.init(e)}init(e){var _;let{data:k,onChange:I,isSingle:C=!1,clear:R,apply:j,type:B="",show:H=!1,isLeftFilters:U}=e||{},V=null==k||null===(_=k.list)||void 0===_?void 0:_.filter((e=>e.status));Object.assign(this.options,{onChange:I,isSingle:C,clear:R,apply:j,type:B,currentSelect:V,hasSelected:V&&JSON.parse(JSON.stringify(V))}),this.state={show:H,data:k||{list:[],title:""},isLeftFilters:U}}close(){this.options.currentSelect=this.options.hasSelected,changeDialogStyle(!1),this.setState({show:!1}),this.options.onChange(this.options.hasSelected,!1,"close")}clickHandler(e,_){let{isSingle:k,type:I}=this.options;if(k&&!_)return!1;e.status=_;let{data:{list:C,title:R}}=this.state;C.map((C=>{k&&(C.status=0),"brand"===I?C.type===e.type&&C.value===e.value&&(C.status=_?1:0):C.value===e.value&&(C.status=_?1:0)}));let j=C.filter((e=>e.status));Object.assign(this.options,{currentSelect:j}),this.setState({data:Object.assign({},{list:C,title:R})}),this.options.onChange(j)}onClear(){let{data:{list:e,title:_}}=this.state;e.map((e=>(e.status=0,e))),Object.assign(this.options,{currentSelect:[],hasSelected:[]}),this.setState({data:{list:e,title:_}}),this.options.onChange([],!1,"clear")}applySelect(){let{currentSelect:e}=this.options;this.options.hasSelected=e;let _=!1,k={};e.map((e=>{"1189"==e.value&&(_=!0,k=e)})),_?ke.y7.set("feature",k):ke.y7.remove("feature"),this.options.onChange(e,!0,"apply"),changeDialogStyle(!1),this.setState({show:!1,data:{}})}componentWillReceiveProps(e){e.show!==this.state.show&&this.setState({show:e.show,isLeftFilters:e.isLeftFilters})}}var nb=k(67294);const rb={isRadio:1,isCheckBox:2,isDialog:3,isDialogMult:4};function renderFilterHtml(e){var _;let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",I=!1,C="";switch(e){case rb.isRadio:C=RadioBox,I=!0;break;case rb.isCheckBox:C=checkbox_filter_v8_CheckBox}if(!C)return null;let{data:{list:R,title:j},selectVal:B,showClear:H,clear:U}=null===(_=this.props)||void 0===_?void 0:_.initData.call(this,I),{name:V,ref:G}=this.options;if(R.length<1)return nb.createElement("div",{style:{display:"none"}});const q=JSON.stringify({ubtKey:"htl_t_online_list_filter_exposure",data:{}});return nb.createElement("div",{className:"".concat(V,"-wrap-v8"),ref:G?this[G]:null,"data-exposure":q},R.length?nb.createElement("div",{className:"".concat(V,"-container")},nb.createElement("div",{className:"".concat(V,"-title")},nb.createElement("p",null,j),H&&nb.createElement("span",{onClick:this.clearSelected.bind(this)},U)),nb.createElement("div",{className:"".concat(V,"-content")},nb.createElement(C,{data:R,value:B,onChange:this.onChange,iconClassName:"".concat(V,"-radiobox"),iconType:"ic_new_check",sequence:this.props.sequence,filterType:k}))):null)}function renderFilterShowAllHtml(e){var _;let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{sharkInfo:{showall:I="",showless:C=""}={}}=this.props,{showStatus:R=!1}=this.state||{};let j=!1,B="";switch(e){case rb.isRadio:B=RadioBox,j=!0;break;case rb.isCheckBox:B=checkbox_filter_v8_CheckBox}if(!B)return null;let{data:{list:H,title:U},selectVal:V,showClear:G,clear:q,isShowAll:z}=null===(_=this.props)||void 0===_?void 0:_.initData.call(this,j),{name:J,ref:Q}=this.options;return H.length<1?nb.createElement("div",{style:{display:"none"}}):nb.createElement("div",{className:"".concat(J,"-wrap-v8"),ref:Q?this[Q]:null},H.length?nb.createElement("div",{className:"".concat(J,"-container")},nb.createElement("div",{className:"".concat(J,"-title")},nb.createElement("p",null,U),G&&nb.createElement("span",{onClick:this.clearSelected.bind(this)},q)),nb.createElement("div",{className:"".concat(J,"-content")},nb.createElement(B,{data:H.slice(0,R?H.length:3),value:V,onChange:this.onChange,iconClassName:"".concat(J,"-radiobox"),iconType:"ic_new_check",isShowAll:R?"":z,bottomText:R?C:this.$translatePlural(I,H.length),isExposure:H.length>3,showAll:this.show.bind(this),sequence:this.props.sequence,filterType:k}))):null)}function renderDialogFilterHtml(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{showDialog:_=!1}=this.state||{},{data:{title:k,list:I},showDot:C}=this.props.initData.call(this)||{};let{scope:R}=this.options;return I.length<1?nb.createElement("div",{style:{display:"none"}}):nb.createElement("div",{className:"".concat(R,"-wrap")},I.length?nb.createElement("div",{className:"".concat(R,"-container")},nb.createElement("div",{className:"".concat(R,"-title"),onClick:this.show.bind(this)},nb.createElement("p",{className:C,style:{position:"relative"}},k),nb.createElement("span",null,nb.createElement(B.Z,{type:"arrowRight"})))):null,_&&Nt().createPortal(this.props.renderDialog(_,dialog_v8_Dialog,this,e&&"brandFilter"),document.body))}function renderDialogFilterShowAllHtml(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{showDialog:k=!1,showStatus:I=!1}=this.state||{},{data:{title:C,list:R},isShowAll:j,selectVal:B,showClear:H}=this.props.initData.call(this)||{};let{scope:U}=this.options;const{sharkInfo:{showall:V="",showless:G="",clear:q=""}={}}=this.props;return R.length<1?nb.createElement("div",{style:{display:"none"}}):(R&&R.length>0&&"Features"===_&&ke.y7.get("feature")&&R.forEach((e=>{e.value==ke.y7.get("feature").value&&(e.status=1)})),nb.createElement("div",{className:"".concat(U,"-wrap-v8")},R.length?nb.createElement("div",{className:"".concat(U,"-container")},nb.createElement("div",{className:"".concat(U,"-title")},nb.createElement("p",{style:{position:"relative"}},C),H&&nb.createElement("span",{onClick:this.clearSelected},q)),nb.createElement("div",{className:"".concat(U,"-content")},nb.createElement(checkbox_filter_v8_CheckBox,{data:R.slice(0,I?R.length:3),value:B,onChange:this.onChangeItem,iconClassName:"".concat(U,"-radiobox"),iconType:"ic_new_check",isShowAll:I?"":j,isMoreThanThree:R.length>3,bottomText:I?G:this.$translatePlural(V,R.length),showAll:this.show.bind(this),filterType:_,sequence:this.props.sequence}))):null,k&&e&&Nt().createPortal(this.props.renderDialog(k,dialog_v8_Dialog,this,e&&"brandFilter"),document.body)))}var ob,ib=k(39621).default;let ab=(0,Ni.$j)((e=>e),{updateGeneralFilters:actionCreator_updateGeneralFilters,removeFilter:actionCreator_removeFilter,updateQuickFilters:function actionCreator_updateQuickFilters(e){return{type:xa.lK,payload:e}}})(ob=class FilterV8 extends ib{constructor(e){var _;super(e),this.scrollCheck=()=>{var e,_,k,I,C;(null===(e=this.currentFilterContainerRef)||void 0===e||null===(_=e.current)||void 0===_||null===(k=_.getBoundingClientRect())||void 0===k?void 0:k.top)<=(null===(I=document.getElementsByClassName("searchBox-v8"))||void 0===I||null===(C=I[0])||void 0===C?void 0:C.clientHeight)?this.setState({fixed:!0}):this.setState({fixed:!1})},this.ubtMapping={load:filterLoad},this.initData=function(){var e;let _=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{sharkInfo:{clear:k,apply:I},data:C}=this.props,R=!1,{ref:j,scope:B}=this.options;j&&(this[j]=fe().createRef()),Object.assign(this.options,{clear:k,apply:I});let H=((null===(e=C)||void 0===e?void 0:e.list)||[]).filter((e=>e.status)).map((e=>e.filterId));return _&&(H=H.length?H[0]:0),C=C||{list:[],title:"",lineList:[]},"amenty"==B&&(C.list||[]).forEach(((e,_)=>{H.includes(e.value)&&_>2&&(R=!0)})),(C.list||[]).forEach(((e,_)=>{H.length>0&&H.includes(e.filterId)&&_>2&&(R=!0)})),{data:C,selectVal:H,showClear:_?!!H:!!H.length,clear:k,apply:I,showDot:(_?H:H.length)?"circle-point":"",isShowAll:R?"circle-point":""}},this._onChange=function(e){let{data:{list:_=[]},syncQuickFilter:k}=this.props||{};_=ae()(_);let{ubtLogName:I,isQuickFilter:C=!1,filterTypeBFF:R}=this.options||{};if("discount"==R){let k=[];_.forEach((e=>{e.status&&k.push(e.filterId)}));let I=-1!=k.indexOf("83|9999"),C=-1!==e.indexOf("83|9999"),R=-1!==e.indexOf("83|9999")&&1===e.length;I&&!R?_.map((_=>{"83|9999"==_.filterId?_.status=0:(_.status=0,e.includes(_.filterId)&&(_.status=1))})):!I&&C?_.map((e=>{"83|9999"==e.filterId?e.status=1:e.status=0})):_.map((_=>{_.status=0,e.includes(_.filterId)&&(_.status=1)}))}else _.map((_=>{_.status=0,e.includes(_.filterId)&&(_.status=1)}));let j=_.filter((e=>1==e.status));this.props.updateGeneralFilters({filters:j,type:R}),C&&k(this.props,_),I&&I.split(",").forEach((e=>{this.$safeLog(e,_)}))},this._onChangeDialog=function(e){let _=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=arguments.length>2?arguments[2]:void 0,{data:{list:I},propertyName:C,emitUpdate:R,syncQuickFilter:j}=this.props,{actionType:B,ubtLogName:H,isStrictEqual:U=!1,isQuickFilter:V,actionFunBFF:G,filterTypeBFF:q}=this.options||{};I=JSON.parse(JSON.stringify(I));let z=e.map((e=>e.value));I.map((_=>{_.status=0,U?e.find((e=>e.filterId===_.filterId&&e.value===_.value))&&(_.status=1):z.includes(_.value)&&(_.status=1)}));let J=I.filter((e=>1==e.status));if(!C)return null;let Q="".concat(B,"_").concat(k||"update");if(["close","apply"].includes(k)&&this.setState({showDialog:!1}),R({filters:J,type:q},G,Q,!0,_),"apply"==k){var ee;const e=["1|1184"];(null===(ee=I)||void 0===ee?void 0:ee.filter((_=>e.includes(_.filterId)))).forEach((e=>{0==e.status&&this.props.removeFilter({filter:e,type:e.type}),1==e.status&&this.props.updateQuickFilters({filters:[e],type:e.type})}))}V&&_&&j(this.props,e,C),!k&&this.$safeLog(H,I)},this._clearSelected=function(e){let{list:_}=this.props.data||e;_=ae()(_);let{propertyName:k,emitUpdate:I,syncQuickFilter:C}=this.props||{},{actionType:R,actionTypeClear:j,ubtLogName:B,isQuickFilter:H=!1,filterTypeBFF:U,actionFunBFF:V}=this.options||{};R=j||R,_.map((e=>{e.status=0}));I({filters:[],type:U},V,R),H&&C(this.props,[],k),B&&this.$safeLog(B,_)},this.renderFilterHtml=renderFilterHtml,this.renderFilterTypes=rb,this.$safeLog("load"),this.modules={};const k={Map:Oy,FilterProperty:Nv,Price:kv,POPULARFILTER:Ly,STARRATING:Ky,GuestRating:Qv,HEALTH:Vy,LOCATION:vy,CATEGORYS:Zv,BEDTYPE:Qg,AMENITIES:xv,PAYMENT:_y,DISCOUNTS:Gv,ROOMFACILITY:Yy,ROOMTYPE:$y,ROOMNUM:Qy,FEATURES:zv,BRAND:Hv,POPULARFILTERS:xy};null===(_=e.modules)||void 0===_||_.forEach((e=>{this.modules[e]=k[e]})),this.state={fixed:!1},this.currentFilterContainerRef=fe().createRef()}componentDidMount(){const{needSticky:e=!1,openListScrollSwitch:_}=this.props;!e||_&&(0,q.tS)(this)||(document.addEventListener("scroll",this.scrollCheck),document.addEventListener("resize",this.scrollCheck))}componentWillUnmount(){const{needSticky:e=!1}=this.props;e&&(document.removeEventListener("scroll",this.scrollCheck),document.removeEventListener("resize",this.scrollCheck))}render(){this.$translatePlural("key.hotel.online.list.showall.items");const e={location:this.$translate("key.hotel.list.page.filter.location"),clear:this.$translate("key.hotel.list.page.filter.clear.all"),selected:this.$translate("key.hotel.list.page.filter.selected"),apply:this.$translate("key.hotel.list.page.filter.clear.apply"),showall:"key.hotel.online.list.showall.items",showless:this.$translate("key.hotel.online.list.showless.items")},{needSticky:_=!1}=this.props,{fixed:k=!1}=this.state;return fe().createElement(fe().Fragment,null,fe().createElement("div",{ref:this.currentFilterContainerRef,className:"filter-box ".concat(_&&"needSticky"," ").concat(k&&_?"fixed":"invisible"),onClick:()=>{(0,Le.ap)("htl_t_online_list_filter_click",{triggerTime:Date.now(),page:"10320668148"})}},(()=>Object.keys(this.modules).map(((_,k)=>{let I=this.modules[_],C=zd.Wj[_];return fe().createElement(I,{key:k,sharkInfo:e,paramHandler:list,initState:this.initState,propertyName:C,_onChange:this._onChange,_onChangeDialog:this._onChangeDialog,_clearSelected:this._clearSelected,initData:this.initData,renderFilterHtml:this.renderFilterHtml,renderFilterTypes:this.renderFilterTypes,renderDialogFilterHtml:renderDialogFilterHtml,renderDialogFilterShowAllHtml:renderDialogFilterShowAllHtml,renderFilterShowAllHtml:renderFilterShowAllHtml,sequence:k})})))()))}})||ob;var lb=k(94499),sb=k(38494),cb=k(67294);const ub=(0,he.memo)((e=>{let{visible:_,children:k}=e;return cb.createElement(sb.Z,{in:_,timeout:400,classNames:"fade-in",unmountOnExit:!0},k)}));var db=k(67294);const pb=(0,he.memo)((e=>{let{visible:_,children:k,onClose:I,baseClass:C,contentClass:R,titleClass:j,showClose:H=!0,maskTransparency:U=.6,title:V=""}=e;return db.createElement("div",{className:"modal ".concat(C||"")},db.createElement(ub,{visible:_},db.createElement("div",{className:"modal-mask",style:{backgroundColor:"rgba(0, 0, 0, ".concat(U,")")},onClick:I})),db.createElement(ub,{visible:_},db.createElement("div",{className:"modal-cont ".concat(R||"")},db.createElement("div",{className:"modal-title"},db.createElement("h3",{className:"".concat(j||"hd-tit")},V),H&&db.createElement("span",{onClick:I},db.createElement(B.Z,{type:"close",className:"close"}))),k)))}));var hb=k(67294);const unit_checkbox=e=>{let{active:_,custDom:k,text:I,onClick:C,data:R,idx:H}=e;return hb.createElement("div",{className:j()("m-checkbox_item",{active:_}),onClick:C.bind(null,R,H)},hb.createElement(B.Z,{type:"checkbox",className:"icon-self"}),k||hb.createElement("span",{className:"radioboxTxt form-label-text"},I))};var fb=k(67294);const unit_radio=e=>{let{active:_,custDom:k,text:I,onClick:C,data:R,idx:H}=e;return fb.createElement("div",{className:j()("m-radiobox_item",{active:_}),onClick:C.bind(null,R,H)},fb.createElement(B.Z,{type:_?"ic_new_check":"radiobox",className:"".concat(_?"active":""," icon-self")}),k||fb.createElement("span",{className:"radioboxTxt form-label-text"},I))};var mb=k(67294);function moreFilterModal_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function moreFilterModal_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?moreFilterModal_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):moreFilterModal_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const{getSimplifyItem:gb,getRawFilterItems:vb,ifFilterIdInItems:yb}=dm.Z,bb=(0,se.asyncComponent)("ToolTip"),ifSelectFilter=e=>{var _;let{firstTab:k,listItem:I,selectedFilters:C}=e;return!!k&&((null==I||null===(_=I.list)||void 0===_?void 0:_.length)?null==I?void 0:I.list.some((e=>ifSelectFilter({firstTab:!0,listItem:e,selectedFilters:C}))):C.some((e=>e.filterId===I.filterId)))},InfoTipsDom=e=>{let{extraInfo:_}=e;const{withoutBraces:k,insideBraces:I}=(e=>{const _=e.match(/\{([^}]+)\}/);let k=null,I=e;return _&&(k=_[1],I=e.replace(/\{|\}/g,"")),{insideBraces:k,withoutBraces:I.trim()}})(_),C=(0,he.useCallback)(((e,_)=>{const k={content:mb.createElement("div",null,_),target:e.target,triPlacement:"middle"};bb.action("show",k)}),[]),R=(0,he.useCallback)((()=>{bb.action("hide")}),[]);return _?mb.createElement("span",{className:"tips-dom",onMouseOver:e=>{C(e,k)},onMouseOut:R},I," ",mb.createElement(B.Z,{type:"ic_new_user_line",className:"icon-left"})):null},ModalContent=e=>{let{visible:_,onClose:k,onSelect:I,getChangedSelected:R,originFilters:j,originFilterMap:B,selectedFilterList:H,filterItem:U,sharkInfo:V}=e;const G=(0,he.useRef)(ae()(H)),[q,z]=(0,he.useState)(ae()(U)),J=(e=>{if(!e||0===e.length)return 0;const findDepth=e=>{if(!e.list||0===e.list.length)return 1;let _=0;for(let k of e.list)_=Math.max(_,findDepth(k));return _+1};let _=0;for(let k of e)_=Math.max(_,findDepth(k));return _})(null==q?void 0:q.list),Q=(0,he.useMemo)((()=>{var e,_;const k=G.current.filter((e=>yb({targetFilterId:e.filterId,filterItem:U}))),{paths:I}=B[null===(e=k[0])||void 0===e?void 0:e.filterId]||{};return null==I||null===(_=I[0])||void 0===_?void 0:_.slice(2)}),[]),[ee,te]=(0,he.useState)(J-1>0?Q||new Array(J-1).fill(0):[]),ne=(0,he.useMemo)((()=>{var e;return vb({targetFilterId:U.filterId,filterListData:null==j||null===(e=j[0])||void 0===e?void 0:e.subItems})}),[]),[re,oe]=(0,he.useState)(!1),handleChange=e=>{const _=R({value:e,defaultSelected:G.current}),k=gb(ne,_);G.current=_,z(k)};return mb.createElement(pb,{visible:_,contentClass:"more-filter-modal ".concat(re?"single-form-modal":""),onClose:k,title:q.title},mb.createElement("div",{className:"modal-body"},mb.createElement("div",{className:"modal-content"},(()=>{const e=(e=>{let{filterItem:_,activeList:k,selectedFilters:I}=e;const C=function getLeavelList(e){var _;let R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const B=e[0];if((null==B||null===(_=B.list)||void 0===_?void 0:_.length)>0){const _=k[R];j=[...j,e.map(((e,k)=>moreFilterModal_objectSpread(moreFilterModal_objectSpread({},e),{},{list:[],hasFilterIdSelect:ifSelectFilter({firstTab:0===R,listItem:e,selectedFilters:I}),active:k===_})))];const B=e[k[R]].list;return C(B,R+1,j)}return[...j,e]};return C(null==_?void 0:_.list)})({filterItem:q,activeList:ee,selectedFilters:G.current}),_=1===e.length;return _!==re&&oe(_),e.map(((_,k)=>{if(k===e.length-1){const{mode:e}=(null==_?void 0:_[0])||{},k=1===e?unit_radio:unit_checkbox,I=_.map((e=>moreFilterModal_objectSpread(moreFilterModal_objectSpread({},e),{},{custDom:e.extraInfo?mb.createElement(mb.Fragment,null,mb.createElement("span",{className:"span-font occupancy"},e.title),mb.createElement(InfoTipsDom,{extraInfo:e.extraInfo})):null})));return mb.createElement("div",{className:"filter-form-wrap ".concat(I.length%2==0?"odd-form":"even-form")},mb.createElement("div",{className:"m-select-box"},I.map(((e,_)=>mb.createElement(k,(0,C.Z)({onClick:handleChange,key:e.filterId,active:1===e.status,idx:_,data:e},e))))))}return mb.createElement("div",{className:"filter-tab-wrap"},_.map(((e,_)=>mb.createElement("div",{className:"filter-tab-item  ".concat(e.active?"active":""," ").concat(e.hasFilterIdSelect?"has-filter-selected":""),onClick:()=>(e=>{let{idx:_,subIdx:k}=e;te(ee.map(((e,I)=>I<_?e:I===_?k:0)))})({idx:k,subIdx:_})},mb.createElement("div",{className:"tab-title"},e.title)))))}))})())),mb.createElement("div",{className:"modal-action"},mb.createElement("div",{className:"action-clear action-btn"}," ",mb.createElement(Buttons,{type:"outline",onClick:()=>{const e=G.current.filter((e=>!yb({targetFilterId:e.filterId,filterItem:U}))),_=gb(ne,e);G.current=e,z(_)},className:"btn-clear"},V.clear)),mb.createElement("div",{className:"action-apply action-btn"},mb.createElement(Buttons,{type:"primary",onClick:()=>I(G.current),className:"btn-primary"},V.apply))))},useGetModalShark=()=>{const{$translate:e,$translatePlural:_}=(0,he.useContext)(pe.P),k=(0,he.useMemo)((()=>({location:e("key.hotel.list.page.filter.location"),clear:e("key.hotel.list.page.filter.clear.all"),selected:e("key.hotel.list.page.filter.selected"),apply:e("key.hotel.list.page.filter.clear.apply"),showall:"key.hotel.online.list.showall.items",showless:e("key.hotel.online.list.showless.items")})),[e]);return{sharkInfo:k,getShowAllLengthStr:e=>_(k.showall,e)}},useFilterModal=e=>{let{realList:_,filterItem:k}=e;const[I,R]=(0,he.useState)(!1),{sharkInfo:j}=useGetModalShark(),{selectedFilterList:B,getChangedSelected:H,replaceAllSelected:U}=(0,he.useContext)(Di.fo),V=(0,Ni.v9)((e=>{var _;const{filters:k,filterMap:I}=(null===(_=e.initData)||void 0===_?void 0:_.originFilterData)||{};return{originFilters:k,originFilterMap:I}}));return{toggleShowAll:async()=>{const{originFilters:e,originFilterMap:G}=V;if(k.filterId===sl.z.BRAND||k.filterId===sl.z.LOCATION||(null==_?void 0:_.length)>30){const _=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,J.Fy)({renderHiddenComponent:_=>{let{onSelect:k,onClose:I,div:R}=_;return Nt().render(mb.createElement(ModalContent,(0,C.Z)({visible:!1,onSelect:k,onClose:I},e)),R)},renderShownComponent:_=>{let{onSelect:k,onClose:I,div:R}=_;return Nt().render(mb.createElement(ModalContent,(0,C.Z)({visible:!0,onSelect:k,onClose:I},e)),R)}})}({selectedFilterList:B,getChangedSelected:H,filterItem:k,originFilters:e,originFilterMap:G,sharkInfo:j});_&&U(_)}else R(!I)},expand:I}},{ifFilterIdInItems:_b}=dm.Z,getAllSubitems=e=>e.reduce(((e,_)=>{var k;return(null===(k=_.list)||void 0===k?void 0:k.length)>0?e=e.concat(getAllSubitems(_.list)):e.push(_),e}),[]),useOuterView=e=>{let{filterItem:_}=e;const{onChange:k,selectedFilterList:I,clearCurTypeFilter:C}=(0,he.useContext)(Di.fo),{mode:R,list:j,filterId:B}=_,H=(0,he.useMemo)((()=>getAllSubitems(j)),[]),{expand:U,toggleShowAll:V}=useFilterModal({realList:H,filterItem:_}),{sharkInfo:G,getShowAllLengthStr:q}=useGetModalShark(),z=1===R,J=(0,he.useMemo)((()=>sl.z.POPULAR!==B&&H.length>3),[]),Q=z?RadioBox:checkbox_filter_v8_CheckBox,ee=J&&!U?H.slice(0,3):H,te=(0,he.useMemo)((()=>J?H>30?q(H.length):U?G.showless:q(H.length):""),[U]),hasExtraSelected=e=>e.some((e=>-1===ee.findIndex((_=>_.filterId===e)))),ne=C.bind(null,{curFilterItem:_}),re=(()=>{const e=I.reduce(((e,k)=>_b({targetFilterId:k.filterId,filterItem:_})?[...e,k.filterId]:e),[]);return z?null==e?void 0:e[0]:e})(),oe=(()=>{const{clear:e}=G;return z?re?e:null:(null==re?void 0:re.length)?e:null})(),ie=(()=>{if(z)return!!re&&hasExtraSelected([re]);if(!(null==re?void 0:re.length))return"";return hasExtraSelected(re)?"circle-point":""})();return{TempComp:Q,outerList:ee,bottomText:te,showText:oe,selectedValue:re,expand:U,hasMoreBtn:J,isShowAll:ie,handleOnChange:(e,_)=>{k({value:_,groupValue:e})},toggleShowAll:V,clearCurAll:ne}};var wb=k(67294);const Eb="common-filter",renderFilterDom=e=>{let{filterItem:_}=e;const{TempComp:k,outerList:I,bottomText:C,showText:R,isShowAll:j,selectedValue:B,handleOnChange:H,clearCurAll:U,hasMoreBtn:V,toggleShowAll:G}=useOuterView({filterItem:_});return wb.createElement("div",{className:"".concat(Eb,"-wrap-v8 ").concat(V?"has-more":"")},wb.createElement("div",{className:"".concat(Eb,"-container")},wb.createElement("div",{className:"".concat(Eb,"-title")},wb.createElement("p",null,_.title),R&&wb.createElement("span",{onClick:U},R)),wb.createElement("div",{className:"".concat(Eb,"-content")},wb.createElement(k,{data:I,value:B,onChange:H,iconClassName:"".concat(Eb,"-radiobox"),iconType:"ic_new_check",isExposure:V,bottomText:C,showAll:G,isShowAll:j}))))};var Sb=k(39621).default,Ob=k(67294);function price_tip_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function price_tip_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?price_tip_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):price_tip_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}class tip_Tip extends Sb{constructor(e){super(e),this.tipRef=Ob.createRef()}componentDidMount(){this.calcTooltipPosition(this.tipRef.current)}getDomBound(e){if(!e)return null;return{x:e.getBoundingClientRect().left,width:e.offsetWidth}}calcTooltipPosition(e){const _=this.getDomBound(e);if(!_)return{width:40};const{x:k,width:I}=_;return{width:I,x:k}}render(){let e=this.props.show?{display:"block"}:{visibility:"hidden"};const{width:_}=this.calcTooltipPosition(this.tipRef.current),k=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx)),I=k?{right:"-".concat(_/2-10,"px")}:{left:"-".concat(_/2-10,"px")},C=k?{right:"".concat(_/2-7,"px")}:{left:"".concat(_/2-7,"px")};return Ob.createElement("div",{className:"price-tooltip",style:price_tip_objectSpread(price_tip_objectSpread({},e),I),ref:this.tipRef},this.props.content,Ob.createElement("div",{className:"price-tooltip-arrow bottom",style:price_tip_objectSpread({},C)}))}}var Tb=k(39621).default,kb=k(67294);let price_bar_noop=()=>{};class bar_Bar extends Tb{constructor(e){super(e),this.onMouseOver=e=>{1==e?this.setState({isHoverLeft:!0,isHoverRight:!1,curPosition:1}):2==e&&this.setState({isHoverRight:!0,isHoverLeft:!1,curPosition:2})},this.onMouseOut=()=>{this.setState({isHoverLeft:!1,isHoverRight:!1})},this.ceilRef=kb.createRef(),this.floorRef=kb.createRef(),this.trackRef=kb.createRef(),this.barRef=kb.createRef(),this.clickRef=kb.createRef(),this.isHover=!1,this.state={isHoverLeft:!1,isHoverRight:!1,curPosition:1}}render(){const{priceHigh:e,priceLow:_,priceBarMin:k,priceBarMax:I,priceBarStep:C,onTouchStart:R,onTouchMove:B,onTouchEnd:U,onMouseDown:V,onMouseUp:G,onClick:q}=this.props,z=233,Q=-1===e||e>I?I+C:e,ee=_>I?I:_;let te=(0,li.zC)();const ne=_>I?(0,So.formatCurrency)(te,I,{digitTop:0,zeroNeedCurrency:!0}):(0,So.formatCurrency)(te,_,{digitTop:0,zeroNeedCurrency:!0}),re=-1===e||e>I?(0,So.formatCurrency)(te,I,{digitTop:0,zeroNeedCurrency:!0})+"+":(0,So.formatCurrency)(te,e,{digitTop:0,zeroNeedCurrency:!0});let oe=(ee-k)/(I+C-k)*z-1,ie=(Q-ee)/(I+C-k)*z;ie=ie>z?z:ie;let ae=1==this.state.curPosition&&(this.state.isHoverLeft||this.props.showPriceTip),le=2==this.state.curPosition&&(this.state.isHoverRight||this.props.showPriceTip);const se=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx)),ce=se?{right:"".concat(oe,"px"),width:"".concat(ie,"px")}:{left:"".concat(oe,"px"),width:"".concat(ie,"px")};let ue=se?{right:"".concat(ae?oe-4:oe,"px")}:{left:"".concat(ae?oe-4:oe,"px")},de=se?{right:"".concat(le?oe+ie-4:oe+ie,"px")}:{left:"".concat(le?oe+ie-4:oe+ie,"px")};return kb.createElement("div",{ref:this.barRef,className:"price-range-bar"},kb.createElement("div",{ref:this.trackRef,className:"price-range-track",style:ce}),kb.createElement("div",{className:j()("price-range-floor",{big:1==this.state.curPosition&&(this.state.isHoverLeft||this.props.showPriceTip)}),ref:this.floorRef,style:ue,onTouchStart:R||price_bar_noop,onTouchMove:B||price_bar_noop,onTouchEnd:U||price_bar_noop,onMouseDown:V||price_bar_noop,onMouseUp:G||price_bar_noop,onMouseOver:e=>{this.onMouseOver(1,e)},onMouseOut:this.onMouseOut},kb.createElement(tip_Tip,{content:ne,left:oe,show:1==this.state.curPosition&&(this.state.isHoverLeft||this.state.isHoverRight||this.props.showPriceTip)})),kb.createElement("div",{className:j()("price-range-ceil",{big:2==this.state.curPosition&&(this.state.isHoverRight||this.props.showPriceTip)}),ref:this.ceilRef,style:de,onTouchStart:R||price_bar_noop,onTouchMove:B||price_bar_noop,onTouchEnd:U||price_bar_noop,onMouseDown:V||price_bar_noop,onMouseUp:G||price_bar_noop,onMouseOver:e=>{this.onMouseOver(2,e)},onMouseOut:this.onMouseOut},kb.createElement(tip_Tip,{content:re,left:oe,show:2==this.state.curPosition&&(this.state.isHoverLeft||this.state.isHoverRight||this.props.showPriceTip)})),kb.createElement("div",{className:"price-range-click",ref:this.clickRef,onClick:q||price_bar_noop}))}}var Ib,Cb=k(39621).default,Pb=k(67294);const{getPriceRange:Lb}=dm.Z;let Nb=(0,Ni.$j)((e=>({searchCondition:e.searchCondition,originPriceInfo:e.initData.originPriceInfo})))(Ib=class priceQuickChoose extends Cb{constructor(e){var _;super(e),this.getPriceRangeList=()=>{const{factor:e}=this.props.priceFilter;return this.state.priceRange.map((_=>{var k;const I=_.minPriceRange*e,C=-1===_.maxPriceRange?-1:_.maxPriceRange*e,R=null===(k=this.props.priceFilter)||void 0===k?void 0:k.priceBarMax;return{minPriceRange:I,maxPriceRange:C,priceRangeShow:Lb(I,C,R,this.ctx)}}))},this.getSelectedPriceRange=e=>{const _=e||this.state.priceRange,{priceLow:k,priceHigh:I,factor:C}=this.props.priceFilter;return _.findIndex((e=>{const{minPriceRange:_,maxPriceRange:R}=e;return _*C===k&&(R>=0?R*C:-1)===I}))},this.priceRangeClick=e=>{const{selectedBtn:_,priceRange:k}=this.state,{factor:I}=this.props.priceFilter,C=e!==_;this.setState({selectedBtn:C?e:-1});const R=k[e].minPriceRange*I,j=k[e].maxPriceRange*I;var B,U;(this.props.onChange({priceLow:C?R:0,priceHigh:C?j:-1}),C)&&(0,Le.NW)("htl_t_online_list_filter_pricerange_click",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId"),cityid:null!==(B=null===(U=this.props.searchCondition)||void 0===U?void 0:U.cityId)&&void 0!==B?B:-1,minPrice:R,max_price:j,position:this.getPositionName(H.default.getByKey("pageName"))})};const k=null===(_=this.props.priceFilter)||void 0===_?void 0:_.priceRangeList;this.state={priceRange:k||[],selectedBtn:this.getSelectedPriceRange(k)||-1}}componentDidUpdate(e){const{factor:_,priceLow:k,priceHigh:I}=this.props.priceFilter,{factor:C,priceLow:R,priceHigh:j}=e.priceFilter;_===C&&k===R&&I===j||this.setState({selectedBtn:this.getSelectedPriceRange()})}getPositionName(e){return"mapPage"===e?"map":"mapNewPage"===e?"maplayer":"list"}render(){const{priceRange:e,selectedBtn:_}=this.state,k=this.getPriceRangeList();return Pb.createElement(Pb.Fragment,null,(null==e?void 0:e.length)>0?Pb.createElement("div",{className:"price-quick-choose"},k.map(((e,k)=>Pb.createElement("div",{key:k,className:j()("price-quick-choose-btn",{"btn-select":k===_}),onClick:()=>this.priceRangeClick(k)},e.priceRangeShow)))):null)}})||Ib;var Db=k(39621).default,Ab=k(67294);class priceInput_PriceInput extends Db{constructor(e){super(e),this.onChange=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";var C,R;if(I=I.replace(/\D/g,""),"low"===e)this.setState({low:I}),I=(null==_||null===(C=_.target)||void 0===C?void 0:C.value)||"",""===(null==_||null===(R=_.target)||void 0===R?void 0:R.value)&&this.setState({startLow:"finish"});else if("high"===e){var j,B;this.setState({high:I}),I=(null==_||null===(j=_.target)||void 0===j?void 0:j.value)||"",""===(null==_||null===(B=_.target)||void 0===B?void 0:B.value)&&this.setState({startHigh:"finish"})}},this.handleHighFocus=e=>{var _;let k=(null==e||null===(_=e.target)||void 0===_?void 0:_.value)||"";k=k.replace(/\D/g,""),this.setState({high:k})},this.ubtMapping={logListpagePriceinputClick:U.d6},this.checkPriceInput=(e,_,k,I)=>{let C=!1,R=!1;return(e=""!==e?Number(e):0)>=(_=""!==_?Number(_):-1)&&-1!==_&&("low"===I?C=!0:"high"===I&&(R=!0)),"init"===I?this.state={lowError:C,highError:R,low:e,high:_,max:k}:this.setState({lowError:C,highError:R,startLow:"init",startHigh:"init",low:e,high:_,max:k}),C||R||e===this.preLow&&_===this.preHigh&&k===this.preMax?null:(this.preLow=e,this.preHigh=_,this.preMax=k,{low:e,high:_,max:k})},this.handleEnterKey=e=>_=>{if(13===_.nativeEvent.keyCode){var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";I=I.replace(/\D/g,"");let C=null;if("low"===e?C=this.checkPriceInput(I,this.state.high,this.state.max,e):"high"===e&&(C=this.checkPriceInput(this.state.low,I,this.state.max,e)),C){let e=Object.assign({},this.props,{priceLow:C.low,priceHigh:C.high});this.props.onChange(e)}}},this.handleBlur=e=>_=>{var k;let I=(null==_||null===(k=_.target)||void 0===k?void 0:k.value)||"";I=I.replace(/\D/g,"");let C=null;if("low"===e?C=this.checkPriceInput(I,this.state.high,this.state.max,e):"high"===e&&(C=this.checkPriceInput(this.state.low,I,this.state.max,e)),C){let e=Object.assign({},this.props,{priceLow:C.low,priceHigh:C.high});this.props.onChange(e),"finish"===this.state.startLow&&this.setState({startLow:"init"}),"finish"===this.state.startHigh&&this.setState({startHigh:"init"})}this.$safeLog("logListpagePriceinputClick",I)};const{priceLow:_,priceHigh:k,priceBarMax:I}=this.props,{low:C,high:R,max:j}=this.checkPriceInput(_,k,I,"init")||{};this.currency=(0,li.zC)(),this.preLow=C,this.preHigh=R,this.preMax=j}componentDidUpdate(e){this.props.priceHigh===e.priceHigh&&this.props.priceLow===e.priceLow&&this.props.priceBarMax===e.priceBarMax||this.checkPriceInput(this.props.priceLow,this.props.priceHigh,this.props.priceBarMax,"bar")}render(){const{lowError:e,highError:_,low:k,high:I,max:C}=this.state;return Ab.createElement("div",{className:"price-range-input"},Ab.createElement("input",{type:"text",className:"price-range-input-low".concat(e?" price-range-input-err":""),value:0==k&&"finish"===this.state.startLow?"":(0,So.formatCurrency)(this.currency,k,{digitTop:0,zeroNeedCurrency:!0}),autoComplete:"off",onChange:this.onChange("low"),onBlur:this.handleBlur("low"),onKeyPress:this.handleEnterKey("low")}),Ab.createElement("span",{className:"price-range-input-split"}),Ab.createElement("input",{type:"text",className:"price-range-input-high".concat(_?" price-range-input-err":""),value:-1===I?"".concat((0,So.formatCurrency)(this.currency,C,{digitTop:0,zeroNeedCurrency:!0}),"+"):0==I?"finish"===this.state.startHigh?"":0:(0,So.formatCurrency)(this.currency,I,{digitTop:0,zeroNeedCurrency:!0}),autoComplete:"off",onChange:this.onChange("high"),onBlur:this.handleBlur("high"),onFocus:this.handleHighFocus,onKeyPress:this.handleEnterKey("high")}),Ab.createElement("span",{className:"price-range-input-overflow"}))}}var Rb,xb,jb=k(39621).default,Bb=k(67294);let Mb=(0,Ni.$j)((()=>null),{changingPriceRangeFilter:changingPriceRangeFilter})(((xb=class View extends jb{constructor(e){super(e),this.init=()=>{this.barRef=Bb.createRef(),this.selectedHandle=0,this.state={changingPrice:null,showPriceTip:!1},this.ismoving=!1},this.getMousePosition=e=>e.pageX,this.getHandleCenterPosition=e=>{const _=e.getBoundingClientRect();return window.pageXOffset+_.left+.5*_.width},this.getTouchPosition=e=>e.touches[0].pageX,this.pauseEvent=e=>{e.stopPropagation(),e.preventDefault()},this.getBarStart=()=>this.barRef.current.barRef.current.getBoundingClientRect().left+window.pageXOffset,this.getBarLength=()=>{const e=this.barRef.current.barRef.current;if(!e)return 0;return e.getBoundingClientRect().width},this.isCeil=e=>e.target===this.barRef.current.ceilRef.current,this.moveTo=(e,_,k)=>{if(0===this.selectedHandle)return;this.pauseEvent(e);let I=this.calcValueByPos(_);this.setState({changingPrice:I},(()=>{k()}))},this.onChange=e=>{this.props.onChange(e)},this.calcValueByPos=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=this.getBarLength();let R=Math.abs(Math.max(e,0)/C);R=R>1?1:R<0?0:R;let j=R*(k+I-_)+_;if(I){j=I*this.getRangeStep(Math.round((j-_)/I))+_}return this.isArab?(j=k+I-j,j=this.getOrderedValue(j),j>k&&2===this.selectedHandle?j=-1:j>k&&1===this.selectedHandle&&(j=k)):(j=this.getOrderedValue(j),j>k&&2===this.selectedHandle?j=-1:j>k&&1===this.selectedHandle&&(j=k)),j},this.getRangeStep=e=>{const{priceBarMin:_,priceBarMax:k,priceBarStep:I}=this.props,C=Math.abs((k-_)/I)+1;return e<0?0:e>C?C:e},this.getOrderedValue=e=>{const{priceLow:_,priceHigh:k,priceBarStep:I,priceBarMax:C}=this.props;return 1===this.selectedHandle&&this.PassCeil(e,k)?-1===k?C:k-I:2===this.selectedHandle&&e<=_?_+I:e},this.getCeilPositon=()=>{const{priceHigh:e,priceLow:_,priceBarMin:k,priceBarMax:I,priceBarStep:C}=this.props,R=244,j=_>I?I:_;let B=(j-k)/(I+C-k)*R-1,H=((-1===e||e>I?I+C:e)-j)/(I+C-k)*R;H=H>R?R:H;let U=B+H;return this.isArab&&([B,U]=[U,B]),{left:B,right:U}},this.PassCeil=(e,_)=>e>=(-1!==_?_:this.props.priceBarMax+this.props.priceBarStep),this.onMouseDown=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentMouseEvents(),this.setState({showPriceTip:!0})},this.onTouchStart=e=>{this.selectedHandle=this.isCeil(e)?2:1,this.addDocumentTouchEvents(),this.setState({showPriceTip:!0})},this.onMouseMove=(0,Ie.P2)((e=>{this.ismoving=!0;const _=this.getMousePosition(e),k=this.getBarStart();this.moveTo(e,_-k,this.updateTempPriceRange)}),10),this.onTouchMove=(0,Ie.P2)((e=>{this.ismoving=!0;const _=e.changedTouches[0].pageX,k=this.getBarStart();this.moveTo(e,_-k,this.updateTempPriceRange)}),10),this.addEventListener=(e,_,k)=>e&&e.addEventListener?(e.addEventListener(_,k),{remove(){e.removeEventListener(_,k)}}):null,this.addDocumentTouchEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onTouchMoveListener=this.addEventListener(document,"touchmove",this.onTouchMove),this.onTouchEndListener=this.addEventListener(document,"touchend",this.onMouseUp)},this.addDocumentMouseEvents=()=>{this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.onMouseMoveListener=this.addEventListener(document,"mousemove",this.onMouseMove),this.onMouseUpListener=this.addEventListener(document,"mouseup",this.onMouseUp)},this.onMouseUp=()=>{this.ismoving=!1,this.setState({showPriceTip:!1}),null!==this.state.changingPrice?(this.updatePriceRange(),this.removeDocumentEvents(),this.$safeLog("logListpagePriceSlide")):this.removeDocumentEvents()},this.ubtMapping={logListpagePriceSlide:U.Pc},this.onClick=e=>{this.ismoving=!1;const _=this.getMousePosition(e),k=this.getBarStart(),{left:I,right:C}=this.getCeilPositon();this.selectedHandle=_-k-I<=C-_+k?1:2,this.isArab&&(this.selectedHandle=_-k-I>=C-_+k?1:2),this.moveTo(e,_-k,this.updatePriceRange)},this.updateTempPriceRange=()=>{let e=Object.assign({},this.props.priceRange);2===this.selectedHandle&&null!=this.state.changingPrice&&e.priceHigh!==this.state.changingPrice?e.priceHigh=this.state.changingPrice:1===this.selectedHandle&&null!=this.state.changingPrice&&e.priceLow!==this.state.changingPrice&&(e.priceLow=this.state.changingPrice),this.props.changingPriceRangeFilter(e)},this.updatePriceRange=()=>{let e=!1,_=Object.assign({},this.props);2===this.selectedHandle&&null!=this.state.changingPrice&&_.priceHigh!==this.state.changingPrice?(_.priceHigh=this.state.changingPrice,e=!0):1===this.selectedHandle&&null!=this.state.changingPrice&&_.priceLow!==this.state.changingPrice&&(_.priceLow=this.state.changingPrice,e=!0),e&&(this.props.changingPriceRangeFilter(_),this.onChange(_)),this.setState({changingPrice:null})},this.removeDocumentEvents=()=>{this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchEndListener&&this.onTouchEndListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove(),this.selectedHandle=0},this.showClear=()=>{const{priceHigh:e,priceLow:_}=this.props;return-1!==e||0!==_},this.clearPriceRange=()=>{let e=Object.assign({},this.props);e.priceHigh=-1,e.priceLow=0,setTimeout((()=>{this.onChange(e)}),0)},this.init()}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),this.removeDocumentEvents()}componentDidMount(){this.$event.on("CLEAR_PRICE_RANGE",this.clearPriceRange)}UNSAFE_componentWillMount(){this.isArab=(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx))}render(){var e,_;let{priceHigh:k,priceLow:I,alteringPriceRange:R}=this.props;this.ismoving&&(k=R.priceHigh,I=R.priceLow);let j={priceHigh:k,priceLow:I};const B=1===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:I,H=2===this.selectedHandle&&null!==this.state.changingPrice?this.state.changingPrice:k,U={onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,priceLow:B,priceHigh:H,onChange:this.onChange,onClick:this.onClick},V=(null===(e=this.props)||void 0===e||null===(_=e.priceRangeList)||void 0===_?void 0:_.length)>0;return Bb.createElement("div",{className:"price-range-wrapper"},Bb.createElement(bar_Bar,(0,C.Z)({ref:this.barRef},this.props,U,{showPriceTip:this.state.showPriceTip})),V?Bb.createElement(Nb,(0,C.Z)({},this.props,j,{priceFilter:R})):Bb.createElement(priceInput_PriceInput,(0,C.Z)({},this.props,j)))}}).propTypes={priceHigh:_e().number,priceLow:_e().number,priceBarMin:_e().number,priceBarMax:_e().number,priceBarStep:_e().number},xb.defaultProps={priceHigh:1,priceLow:0,priceBarMin:0,priceBarMax:0,priceBarStep:0},Rb=xb))||Rb;var Fb,Hb,Kb=k(39621).default,Ub=k(67294);let Zb=(0,Ni.$j)((e=>({searchCondition:e.searchCondition})))(((Hb=class View extends Kb{constructor(e){super(e),this.updatePriceType=()=>{var e=this.props.list.find((e=>1===e.status));e&&e.value>=0&&e.value!=this.state.currType&&this.setState({currType:e.value})},this.onChange=e=>{let _=ae()(this.props.list).map((_=>(_.value===e.value?_.status=1:_.status=0,_))),k={list:_},I=((e,_,k)=>{if(k&&k.checkIn&&k.checkOut&&k.roomNum){let I=new Date(k.checkIn),C=(new Date(k.checkOut)-I)/864e5*k.roomNum,R=e.find((e=>1===e.status)),j=R&&R.value;if([1,3].includes(Number(_))&&[0,2].includes(Number(j)))return 1/C;if([1,3].includes(Number(j))&&[0,2].includes(Number(_)))return C}return 1})(_,this.state.currType,this.props.searchCondition);this.props.onChange(k,I)},this.state={}}componentDidMount(){this.updatePriceType()}componentDidUpdate(){this.updatePriceType()}render(){const{list:e,isNewMap:_}=this.props,k=e.find((e=>e&&1===e.status)),I={defaultValue:k&&k.value||0,width:"246px",showItemSelectedIcon:!0,fclass:"single-selector-price-panel-v8"};return Ub.createElement("div",{className:"price-type-wrapper"},!!e.length&&Ub.createElement(Single,(0,C.Z)({onChange:this.onChange,data:e,className:"price-type-selector ".concat(_&&"isNewMap"),noBorder:!0},I)))}}).propTypes={list:_e().arrayOf(_e().object)},Hb.defaultProps={list:[]},Fb=Hb))||Fb;var Vb=k(39621).default,Wb=k(67294);const{getPriceRange:Gb}=dm.Z;class filterItems_price_view_View extends Vb{constructor(e){super(e)}render(){const{isNewMap:e}=this.props,{priceFilter:_}=this.props,{priceHigh:k,priceLow:I,priceBarMax:R}=_||{};return Wb.createElement("div",{className:j()("price-wrapper-v8 ",{"no-border-radius":(0,q.Ch)(this)})},Wb.createElement("div",{className:"price-container"},Wb.createElement("div",{className:"price-title"},Wb.createElement("div",{className:"price-title-range"},Wb.createElement("span",{className:"price-main-title"},null==_?void 0:_.title),Wb.createElement("span",{className:"price-title-local"},"(".concat(Gb(I,k,R,this.ctx),")"))),(-1!==k||0!==I)&&Wb.createElement("span",{className:"price-range-clear",onClick:this.clearPriceRange},this.props.sharkInfo.clear)),e?Wb.createElement(Zb,{isNewMap:e,onChange:this.onPriceTypeChange}):null,Wb.createElement(Mb,(0,C.Z)({},this.props.priceType,_,{onChange:this.onPriceRangeChange,isNewMap:e,alteringPriceRange:_}))))}}var $b;let qb=decorators($b=(0,Di.zy)((e=>{let{onChange:_}=e;return{provideValueChange:_}}))($b=(0,Ni.$j)((()=>({})),{updateGeneralFilters:updateGeneralFilters,updatePriceFilter:updatePriceFilter})($b=class Price extends filterItems_price_view_View{constructor(e){super(e),this.onPriceRangeChange=e=>{const{priceLow:_,priceHigh:k}=e;this.props.provideValueChange({type:sl.j.PRICE,value:{priceLow:_,priceHigh:k>=0?k:-1}})},this.onPriceTypeChange=(e,_)=>{var k,I,C,R;const j=[];e.list.forEach((e=>{1==e.status&&j.push(e)})),null===(k=this.props)||void 0===k||k.emitUpdate({filters:j,type:"80"},this.props.updateGeneralFilters,"ibu_htl_listpage_price_type");let{priceHigh:B,priceLow:H}=this.props.priceFilter;this.props.updatePriceFilter({priceHigh:B,priceLow:H,factor:_}),this.$safeLog("logListpagePriceChoiceType",e,this.props),ke.y7.set("price_type",null==e||null===(I=e.list)||void 0===I||null===(C=I.filter((e=>1===(null==e?void 0:e.status))))||void 0===C||null===(R=C[0])||void 0===R?void 0:R.value)},this.ubtMapping={logListpagePriceChoiceType:U.O3,logListpagePriceChoiceRange:U.Fc},this.clearPriceRange=()=>{let e=Object.assign({},this.props.priceFilter);e.priceHigh=-1,e.priceLow=0,setTimeout((()=>{this.onPriceRangeChange(e)}),0)},this.state={noBorderRadius:(0,q.K8)(this,"240318_IBU_jdsx:B")}}componentDidMount(){this.$event.on(nv,this.clearPriceRange)}})||$b)||$b)||$b;var zb=k(67294);function btnStyleSelect_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function btnStyleSelect_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?btnStyleSelect_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):btnStyleSelect_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const btnStyleSelect=e=>{var _;let{filterItem:k,level:I=!1,transFn:C}=e;const{searchBarData:R}=(0,Ni.v9)((e=>({searchBarData:e.searchBarData}))),{onChange:j}=(0,he.useContext)(Di.fo),{showText:B,clearCurAll:H}=useOuterView({filterItem:k}),{calendar:U}=R||{},btnSelectedChange=e=>{let{item:_,index:k,active:C}=e;j({value:_}),(e=>{let{item:_,index:k,active:C}=e,R={filterid:_.filterId,filtertype:_.type,filtername:_.text,filterrank:k,is_layer:"F",filterselectstatus:C?0:1,filtertypename:_.title};var j,B;I&&(R=btnStyleSelect_objectSpread(btnStyleSelect_objectSpread({},R),{},{checkin:null==U||null===(j=U.checkIn)||void 0===j?void 0:j.replace(/\//g,"-"),checkout:null==U||null===(B=U.checkOut)||void 0===B?void 0:B.replace(/\//g,"-")})),sendFilterClickTrace(R)})({item:_,index:k,active:C})};return zb.createElement("div",{className:"common-filter-wrap-v8 btn-style ".concat(B?"has-more":"")},zb.createElement("div",{className:"common-filter-container"},zb.createElement("div",{className:"common-filter-title"},zb.createElement("p",null,k.title),B&&zb.createElement("span",{onClick:H},B)),zb.createElement("div",{className:"common-filter-content"},zb.createElement("div",{className:"btn-style-selected-wrap"},null===(_=k.list)||void 0===_?void 0:_.map(((e,_)=>zb.createElement("div",{key:e.filterId,className:"btn-style-item ".concat(1===e.status?"active":""),onClick:()=>btnSelectedChange({item:e,index:_,active:1===e.status})},zb.createElement("span",{className:"sr-checkbox"},"function"==typeof C?C(e):null==e?void 0:e.title),I?zb.createElement("span",{className:"sr-level"},zb.createElement(kl.Z,{num:1,type:"star"===k.starType?"star":"diamond",iconStyle:{color:"#ffb400"}})):null)))))))};var Yb=k(67294);const filterItems=e=>{let{isArab:_}=e;const{renderViewFilters:k}=(0,he.useContext)(lb.Z)||{},{ctx:I}=(0,he.useContext)(pe.P),{generalFilters:C=[]}=k||{},{sharkInfo:R}=useGetModalShark(),getGuestRatingText=e=>{var _,k;const C=(null==e||null===(_=e.text)||void 0===_?void 0:_.match(/[\d]|[,]|[.]/g).join(""))||"",R=2*Number(C.replace(",",".")),j=null==e||null===(k=e.text)||void 0===k?void 0:k.replace(C,R);return(0,q.H$)(I)?j:null==e?void 0:e.text};return(0,he.useEffect)((()=>{(0,Le.ap)("ibu_htl_online_list_new_filter_wrap_exposure",{locale:H.default.getByKey("cargo.locale")})}),[]),Yb.createElement("div",{className:"filter-wrap"},!_&&Yb.createElement(Oy,null),Yb.createElement(Nv,null),null==C?void 0:C.map((e=>(e=>{if(H.default.data){const _="exposed-".concat(e.filterId);window[_]||((0,Le.ap)("ibu_htl_online_list_new_filter_item_exposure",{filterId:null==e?void 0:e.filterId,title:null==e?void 0:e.title,locale:H.default.getByKey("cargo.locale")}),window[_]=!0)}return e.filterId===sl.z.PRICE?Yb.createElement(qb,{priceFilter:e,sharkInfo:R}):e.filterId===sl.z.RATE?Yb.createElement(btnStyleSelect,{filterItem:e,sharkInfo:R,transFn:getGuestRatingText}):e.filterId===sl.z.STAR?Yb.createElement(btnStyleSelect,{filterItem:e,sharkInfo:R,level:!0}):Yb.createElement(renderFilterDom,{filterItem:e})})(e))))};var Jb,Xb=k(20192),Qb=k(39600),e_=k(39621).default,t_=k(67294);let n_=(0,Qb.Z)(Jb=class RecentHotels extends e_{constructor(e){super(e),this.renderItem=(e,_)=>{const k=Object.assign({},e,{isOffLazyLoad:!1,direction:"row",callback:()=>{const{type:_,masterHotelId:k,searchBarData:I}=this.props,{cityUrlName:C,hotelUrlName:R,cityId:j,hotelId:B,hoteluniquekey:H}=e||{},{calendar:U,roomGuest:V,travel:G}=I||{},{checkIn:q,checkOut:z}=U||{},{adults:J=1,children:Q=0,rooms:ee=1,childAges:te}=V||{},ne=(0,ii.WH)("edmHotelData"),re=(0,Uu.getDetailUrl)({style:"S",data:{cityEnName:C,hotelEnName:R,cityId:j,hotelId:B,checkIn:q,checkOut:z,adult:J,children:Q,crn:ee,ages:(te||[]).join(","),travelpurpose:G?1:0,hoteluniquekey:H,edmHotelData:ne}});re&&window.open(re),this.$safeLog("logViewdHotelClick",{type:_,masterHotelId:k,clickHotelId:e?e.hotelId:""})}});return t_.createElement(Xb.Z,(0,C.Z)({},k,{key:_}))},this.ubtMapping={logViewdHotelClick:U.PH}}componentDidMount(){}render(){const{hotelHistory:e,type:_}=this.props;let k=e||[];return"listpage"===_&&(k=k.slice(0,3)),k.length?t_.createElement("div",{className:j()("m-recentHotels-v8",_)},t_.createElement("h3",{className:"m-recentHotels_title"},this.$translate("key.hotel.online.homepage.viewed.hotels")),t_.createElement("div",{className:"m-recentHotels_box"},k.map(((e,_)=>this.renderItem(e,_))))):null}})||Jb;var r_=function(e){function ErrorBoundary(){return e.apply(this,arguments)||this}xh()(ErrorBoundary,e);var _=ErrorBoundary.prototype;return _.componentDidCatch=function componentDidCatch(e,_){var k={name:this.props.name,version:this.props.version,errorName:null==e?void 0:e.name,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,componentStack:null==_?void 0:_.componentStack,url:window.location.href};throw"undefined"!=typeof window&&(0,Ge.v4)("ibu_component_usage_onerror",JSON.stringify(k)),e},_.render=function render(){return this.props.children},ErrorBoundary}(he.Component),o_=function track(e){if(i_()){var _=Object.assign({},e,{url:a_()});(0,Ge.v4)("ibu_component_usage_onload",JSON.stringify(_))}},i_=function reportOrNot(){var e=100*Math.random()<10;try{return!!window.location.href.includes("forceToReport=true")||e}catch(_){return e}},a_=function getUrl(){var e,_=null==(e=window.location.href.split("?"))?void 0:e[0];return _.length>0&&"/"===_[_.length-1]&&(_=_.substring(0,_.length-1)),_},l_=k(9830),s_="ibulocale",c_="cookiePricesDisplayed",u_="ibu_h5_local",d_="ibu_h5_curr";var p_=function isMobileAgent(){var e=window.location.pathname;return/^\/m\//.test(e)||function isH5ByUserAgent(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent.toLowerCase();return/(ctrip|android|iphone|mobile|webos)/.test(e)&&!/(ipad|pad)/.test(e)}()},h_=function getCookie(e){if("undefined"==typeof document)return"";var _=document.cookie,k=new RegExp("".concat(e,"=([^;]+);?")),I=_.match(k);return I?I[1]:""};function getOnlineH5Cookie(e,_,k){if("undefined"==typeof document)return k;var I=p_();return h_(I?_:e)||k}function context_typeof(e){return(context_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function context_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function context_defineProperty(e,_,k){return(_=function _toPropertyKey(e){var _=function _toPrimitive(e,_){if("object"!==context_typeof(e)||null===e)return e;var k=e[Symbol.toPrimitive];if(void 0!==k){var I=k.call(e,_||"default");if("object"!==context_typeof(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"===context_typeof(_)?_:String(_)}(_))in e?Object.defineProperty(e,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):e[_]=k,e}var f_="undefined"!=typeof window,m_=function createTripContextValue(e){return e.locale=(0,Xh.FF)(e.locale,"aa-BB"),function context_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?context_ownKeys(Object(k),!0).forEach((function(_){context_defineProperty(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):context_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}({lang:(0,Xh.Md)(e.locale),site:(0,Xh.PB)(e.locale)},e)}({env:f_?(0,l_.U)():"prod",currency:f_?function getCurrency(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CNY";return getOnlineH5Cookie(c_,d_,e)}():"CNY",locale:f_?function getLocale(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_us";return getOnlineH5Cookie(s_,u_,e)}():"en-US",group:f_?(0,l_.ex)():"trip",refresh:function noop(){}}),g_=(0,he.createContext)(m_),v_=(g_.Provider,g_.Consumer,function Rate(e){var _=e.isAradLocale,k=e.value,I=e.color;return fe().createElement("div",{className:"h5-usp-rate "+(_?"isArad":"")},[1,2,3,4,5].map((function(e){var _=k-(e-1);return _=Math.max(0,_),_=Math.min(1,_),_=Math.floor(100*_),fe().createElement("div",{className:"h5-usp-rate__item",key:e},fe().createElement("div",{className:"h5-usp-rate__item__bg"},fe().createElement("i",{className:"icon fi fi-star"})),fe().createElement("div",{className:"h5-usp-rate__item__fr",style:{width:_+"%",color:""+I}},fe().createElement("i",{className:"icon fi fi-star"})))})))});const y_=function Rating(e){var _=e.isAradLocale,k=e.ratingList,I=e.stylePrefix;return fe().createElement("div",{className:I+"-rating "+(_?"isArad":"")},k.map((function(e,k){return fe().createElement("div",{className:I+"-rating__item "+(_?"isArad":""),key:k},fe().createElement("div",{className:"icon "+I+"-rating__item__icon",style:{backgroundImage:"url("+e.icon+")"}}),fe().createElement("div",{className:I+"-rating__item__text"},fe().createElement("div",{className:I+"-rating__item__text__line1"},fe().createElement("div",{className:I+"-rating__item__text__line1__mark"},e.score,fe().createElement("span",{className:I+"-rating__item__text__line1__mark__total"},"/5")),fe().createElement(v_,{isAradLocale:_,value:parseFloat(parseFloat(e.score).toFixed(1)),color:e.starColor})),fe().createElement("div",{className:I+"-rating__item__text__NoRvs"},e.reviewNum)))})))};var b_=function toRedirect(e){var _=document.createElement("A");_.setAttribute("href",e),_.setAttribute("target","_self"),_.style.display="none",document.body.appendChild(_),_.click()};const w_=function TextBox(e){var _,k,I,C,R,j=e.config,B=e.stylePrefix,H=e.mode,U=e.pageId,V=e.isAradLocale,G=function redirectTrack(){return(0,ef.v4)("ibu_pub_online_uspmodule_click",JSON.stringify({moduletype:H,topic:j.themeType,pageid:U}))};return fe().createElement("div",{className:B+"-text "+(V?"isArad":"")},fe().createElement("div",{className:B+"-text__icon",style:{backgroundImage:"url("+j.icon+")"},key:j.icon+"_"+j.themeType}),fe().createElement("div",{className:B+"-text__textContainer"},fe().createElement("span",{className:B+"-text__textContainer__title","data-redirect":!("simple"!==H||!(null!=(_=j.deepLinkText)&&_.deepLink||j.deepLink)),onClick:function onClick(){G().then((function(){var e,_;return"simple"===H&&(null!=(e=j.deepLinkText)&&e.deepLink||j.deepLink)?b_(j.deepLink||(null==j||null==(_=j.deepLinkText)?void 0:_.deepLink)||""):null}))}},(null==(k=j.titlePackageInfo)?void 0:k.text)||j.title),fe().createElement("div",{className:B+"-text__textContainer__subtitle"},(null==(I=j.subTitlePackageInfo)?void 0:I.text)||j.subTitle,null!=(C=j.deepLinkText)&&C.deepLink||j.deepLink?fe().createElement("span",{onClick:function onClick(){G().then((function(){var e;return b_(j.deepLink||(null==j||null==(e=j.deepLinkText)?void 0:e.deepLink)||"")}))},className:"learn-more"},(null==j||null==(R=j.deepLinkText)?void 0:R.text)||" Learn More"):null)))};const E_=function Skeleton(e){return fe().createElement("div",{className:"skeleton simple-skeleton-container",style:{height:"complex"===e.renderStyleType?62:53}},fe().createElement("div",{className:"simple-skeleton-container__item"}))};var S_=k(75963),O_={group:"trip",source:"Online",locale:"en-XX"},T_="ibu_pub_online_uspmodule_exposure",k_=function useGetUspConfig(e,_,k,I,C){var R=(0,he.useState)(null),j=R[0],B=R[1],H=(0,he.useState)(null),U=H[0],V=H[1],G=(0,he.useState)(!0),q=G[0],z=G[1];return(0,he.useEffect)((function(){if(I&&(O_.locale=I),function isWindow(){return"undefined"!=typeof window}())try{Qh.W.post("/restapi/soa2/13909/getUspInfo",{pageId:e,popOverJsonStr:null==C?void 0:C.orderId,filterInfo:{productLine:_||"",scene:k||""},head:Object.assign({},O_)},{cache:!1}).then((function(e){if(e){var _=e.mode,k=e.title,I=e.richTitle,C=e.deepLink,R=e.deepLinkText,j=e.backgroundColor,H=e.uspInfoList,U=e.scoreUspList;0!==(null==H?void 0:H.length)||0!==(null==U?void 0:U.length)?(B({mode:_,title:k,richTitle:I,deepLink:C,deepLinkText:R,backgroundColor:j,uspInfoList:H}),V((function(){return 0!==(null==U?void 0:U.length)?U:null})),z(!0)):z(!1)}else z(!1)}))}catch(e){}}),[I,k,e,_]),{isShowUsp:q,uspConfig:j,scoreConfig:U}};const I_=function AnalyticsWrapper(e,_,k){return void 0===k&&(k=!1),function(I){return(0,he.useEffect)((function(){o_(_)}),[]),e.displayName=_.name+":"+_.version,k?fe().createElement(r_,{name:_.name,version:_.version},fe().createElement(e,I)):fe().createElement(e,I)}}((function UspOnline(e){var _,k,I,C,R=e.renderMode,j=e.meta,B=(e.alignStyle,e.scene),H=void 0===B?"":B,U=e.onDataChange,V=e.customParams,G=j.pageId,q=j.locale,z=j.productLine,J=(0,Xh.FF)(q||function useTripContext(){return(0,he.useContext)(g_)}().locale,"aa-BB"),Q={scene:H,pageId:G,renderStyle:R,locale:J,productLine:z,customParams:V,onDataChange:U},ee="h5-usp-"+R,te=(0,he.useRef)(null),ne=function useUSPInit(e,_){var k=e.scene,I=e.pageId,C=e.renderStyle,R=e.locale,j=e.productLine,B=e.customParams,H=e.onDataChange,U=(0,he.useState)(!1),V=U[0],G=U[1],q=(0,he.useState)(!1),z=q[0],J=q[1],Q=(0,S_.D)(_).isInit,ee=k_(I.toString(),j,k,R,B),te=ee.isShowUsp,ne=ee.uspConfig,re=ee.scoreConfig;return(0,he.useEffect)((function(){if(H&&H(Object.assign({},ne,{scoreConfig:re})),te&&(J(!0),!V&&Q)){var e=[].concat(((null==ne?void 0:ne.uspInfoList)||[]).map((function(e){return e.themeType})));re&&0!==re.length&&e.push("Trustworthiness, review");var _={moduletype:C,topic:e.toString(),isSubexposure:"0",pageid:I,position:k};(0,ef.v4)(T_,JSON.stringify(_)).then((function(){G(!0)}))}}),[te,ne,re,z]),{isShowUsp:te,uspConfig:ne,scoreConfig:re,isInit:z}}(Q,te.current),re=ne.isShowUsp,oe=ne.scoreConfig,ie=ne.uspConfig,ae=ne.isInit,le=["ar-XX","ar-SA","ar-AE"].includes(J);return re&&ae?fe().createElement("div",{className:ee+" "+(le?"isArad":""),ref:te},"verticalList"===R&&!(null==ie||!ie.title)&&fe().createElement("div",{className:ee+"-head"},fe().createElement("span",{style:null!=ie&&null!=(_=ie.richTitle)&&_.color?{color:ie.richTitle.color+" "}:{}},null!=ie&&null!=(k=ie.richTitle)&&k.text?ie.richTitle.text:ie.title)),"complex"===R&&oe&&0!==oe.length&&fe().createElement(y_,{renderMode:R,isAradLocale:le,ratingList:oe,stylePrefix:ee}),0!==(null==ie||null==(I=ie.uspInfoList)?void 0:I.length)&&(null==ie||null==(C=ie.uspInfoList)?void 0:C.map((function(e,_){return fe().createElement(w_,{key:_,isAradLocale:le,config:e,pageId:G.toString(),stylePrefix:ee,mode:R})}))),"complex"!==R&&oe&&0!==oe.length?fe().createElement(y_,{renderMode:R,isAradLocale:le,ratingList:oe,stylePrefix:ee}):null):re?fe().createElement(E_,{renderStyleType:R}):null}),{name:"@ctrip/trip-component-platform-online-usp",version:"3.0.0"}),C_=JSON.parse('{"u2":"@ctrip/trip-component-platform-online-trustpilot","i8":"1.0.2"}');const P_=function Horizontal(e){var _=e.theme,k=(0,pt.N)().locale;return fe().createElement("div",{className:"trustpilot-widget horizontal","data-locale":(0,Jh.formatLocale)(k,"aa-BB"),"data-template-id":"5406e65db0d04a09e042d5fc","data-businessunit-id":"5a0462cf0000ff0005affcce","data-style-height":"28px","data-style-width":"100%","data-theme":_},fe().createElement("a",{href:"https://www.trustpilot.com/review/trip.com",target:"_blank",rel:"noopener noreferrer"}))};const L_=function MicroCombo(e){var _=e.theme,k=(0,pt.N)().locale;return fe().createElement("div",{className:"trustpilot-widget micro-combo","data-locale":(0,Jh.formatLocale)(k,"aa-BB"),"data-template-id":"5419b6ffb0d04a076446a9af","data-businessunit-id":"5a0462cf0000ff0005affcce","data-style-height":"20px","data-style-width":"100%","data-theme":_},fe().createElement("a",{href:"https://www.trustpilot.com/review/trip.com",target:"_blank",rel:"noopener noreferrer"}))};const N_=function MicroStar(e){var _=e.theme,k=(0,pt.N)().locale;return fe().createElement("div",{className:"trustpilot-widget micro-star","data-locale":(0,Jh.formatLocale)(k,"aa-BB"),"data-template-id":"5419b732fbfb950b10de65e5","data-businessunit-id":"5a0462cf0000ff0005affcce","data-style-height":"24px","data-style-width":"100%","data-theme":_},fe().createElement("a",{href:"https://www.trustpilot.com/review/trip.com",target:"_blank",rel:"noopener noreferrer"}))};var D_=k(93231),A_={platform:"Online",componentType:"online-trustpilot",version:C_.i8};const R_=function TrustPilot(e){var _=e.backgroundColor,k=function useComponent(e){var _=e.pageId,k=(0,pt.N)(),I=k.locale,C=k.currency,R=(0,D_.ZR)({tcpCacheKey:"__agc_online-trustpilot",params:Object.assign({},A_,{head:{locale:I,currency:C},pageId:_}),defaultContent:{}}),j=R.rawConfig;return{config:R.config,rawConfig:j}}(e).config,I=k.mode,C=k.content,R=C.show,j=C.theme;return(0,he.useEffect)((function(){R&&(0,lp.D7)("https://widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js")}),[R]),fe().createElement("div",{className:"trust-pilot-wrapper "+I,style:{backgroundColor:_}},"Horizontal"===I&&R&&fe().createElement(P_,{theme:j}),"MicroCombo"===I&&R&&fe().createElement(L_,{theme:j}),"MicroStar"===I&&R&&fe().createElement(N_,{theme:j}))},x_=(0,Fe.K)(R_,{name:C_.u2,version:C_.i8});var j_=k(39621).default,B_=k(67294);class filterBox_view_View extends j_{render(){const{openListScrollSwitch:e,isArab:_,isSwitchNewFilter:k}=this.props,I=k?filterItems:ab,C=_?["FilterProperty","Price","POPULARFILTER","STARRATING","GuestRating","HEALTH","LOCATION","CATEGORYS","BEDTYPE","ROOMNUM","AMENITIES","PAYMENT","DISCOUNTS","ROOMFACILITY","ROOMTYPE","FEATURES","BRAND"]:["Map","FilterProperty","Price","POPULARFILTER","STARRATING","GuestRating","HEALTH","LOCATION","CATEGORYS","BEDTYPE","ROOMNUM","AMENITIES","PAYMENT","DISCOUNTS","ROOMFACILITY","ROOMTYPE","FEATURES","BRAND"];return B_.createElement("div",{className:j()("filter-wrap",{filterWrapFixed:e&&(0,q.tS)(this)}),ref:this.filterBarRef},B_.createElement(I,{openListScrollSwitch:e,filter:this.props.filterCondition,modules:C,isArab:_}),B_.createElement(n_,{type:"listpage",searchBarData:this.props.searchBarData}),B_.createElement(I_,{renderMode:"verticalList",meta:{productLine:"hotels",pageId:H.default.getByKey("pageId")||""},scene:"isbrg"}),B_.createElement(x_,{pageId:"10320668148"}),!(e&&(0,q.tS)(this))&&!k&&B_.createElement(I,{needSticky:!0,filter:this.props.filterCondition,modules:["POPULARFILTERS"]}))}}var M_,F_=k(67294);let H_=(0,Ni.$j)((e=>({isSwitchNewFilter:e.initData.isSwitchNewFilter,searchBarData:e.searchBarData,filterCondition:e.filterCondition,lastPage:e.lastPage})))(M_=class FilterBox extends filterBox_view_View{constructor(e){super(e),this.componentWillUnmount=()=>{const{openListScrollSwitch:e}=this.props;if(!e||!(0,q.tS)(this))return;const _=this.filterBarRef.current;window.removeEventListener("scroll",this.scrollFix),window.removeEventListener("resize",(()=>{this.scrollFix(),this.observePageBottomShow()})),this.dynamicBottomObserver&&this.dynamicBottomObserver.unobserve(document.getElementById("ibu_hotel_footer")),_.removeEventListener("scroll",this.filterBarHandleScroll)},this.scrollFix=(0,Ie.P2)((()=>{var e,_,k;const I=this.$instance("SearchBoxV8").action("getSearchBarFixed"),C=this.filterBarRef.current,R=(null===(e=document.querySelector(".searchBox-v8"))||void 0===e?void 0:e.offsetHeight)||0,j=document.querySelector(".searchBox-v8"),B=(null==j||null===(_=j.getBoundingClientRect())||void 0===_?void 0:_.bottom)-(null==j||null===(k=j.getBoundingClientRect())||void 0===k?void 0:k.top)||0,H=window.innerHeight-B;this.footerShow||(C.style.maxHeight="".concat(H,"px")),I?(C.style.position="fixed",C.style.top="".concat(R+16,"px")):(C.style.position="relative",C.style.top="0px",C.style.maxHeight="",this.footerShow=!1)}),0),this.state={sideFixed:!1},this.filterBarRef=F_.createRef(),this.footerShow=!1,this.filterBarHasScroll=!1}componentDidMount(){var e;const{openListScrollSwitch:_,lastPage:k}=this.props;if(!_||!(0,q.tS)(this))return;const I=this.filterBarRef.current;window.addEventListener("scroll",this.scrollFix),window.addEventListener("resize",(()=>{this.scrollFix(),this.observePageBottomShow()})),(null==k?void 0:k.recommendLastPage)||(null===(e=H.default.getByKey("initData.firstPageList.hotelList"))||void 0===e?void 0:e.length)<1?document.getElementById("ibu_hotel_footer").style.display="block":document.getElementById("ibu_hotel_footer").style.display="none",this.observePageBottomShow(),null==I||I.addEventListener("scroll",this.filterBarHandleScroll)}UNSAFE_componentWillReceiveProps(e){var _,k;const{openListScrollSwitch:I}=this.props;I&&(0,q.tS)(this)&&((null==e||null===(_=e.lastPage)||void 0===_?void 0:_.recommendLastPage)||(null===(k=H.default.getByKey("initData.firstPageList.hotelList"))||void 0===k?void 0:k.length)<1)&&(document.getElementById("ibu_hotel_footer").style.display="block")}filterBarHandleScroll(){this.filterBarHasScroll||((0,pa.NW)("htl_t_online_list_filter_slide",{locale:H.default.getByKey("cargo.locale"),page:H.default.getByKey("pageId")}),this.filterBarHasScroll=!0)}observePageBottomShow(){this.dynamicBottomObserver=new IntersectionObserver((e=>{e.forEach((e=>{var _,k,I,C;if(!(null===(_=this.props.lastPage)||void 0===_?void 0:_.recommendLastPage)&&(null===(k=H.default.getByKey("initData.firstPageList.hotelList"))||void 0===k?void 0:k.length)>0)return;const R=this.filterBarRef.current,j=document.querySelector(".searchBox-v8"),B=(null==j||null===(I=j.getBoundingClientRect())||void 0===I?void 0:I.bottom)-(null==j||null===(C=j.getBoundingClientRect())||void 0===C?void 0:C.top)||0;if(e.isIntersecting){this.footerShow=!0;const _=e.intersectionRect.height;if(R){const e=window.innerHeight-B-_;R.style.maxHeight="".concat(e,"px")}}else if(R&&window.scrollY>0){this.footerShow=!1;const e=window.innerHeight-B;R.style.maxHeight="".concat(e,"px")}}))}),{threshold:[0,.01,.1,.25,.5,.75,.8,.9,.95,1],rootMargin:"0px 0px 0px 0px"}),this.dynamicBottomObserver.observe(document.getElementById("ibu_hotel_footer"))}})||M_;var K_=k(39621).default,U_=k(67294);const Z_=asyncComponent("listNewMapView"),V_=asyncComponent("listNewGoogleOneTap"),W_=asyncComponent("listNewSafariOneTap");class listNewPage_view_View extends K_{constructor(e){super(e)}renderMain(){var e,_,k;const{ajaxLoad:I={},openListScrollSwitch:C}=this.props,{breathing:R=!1}=I,{crossBanner:j={},bannerLoaded:B,isArab:H}=this.state;return U_.createElement("section",{className:"main-container main-content"},U_.createElement("div",{className:"filter-mask",onClick:this.hideFilter}),U_.createElement(H_,{openListScrollSwitch:C,isArab:H}),U_.createElement(wm,{breathing:R,toggleShowMap:this.toggleShowMap,researchHotels:this.researchHotels.bind(this),displayKeyword:this.displayKeyword.bind(this),crossBanner:j,bannerLoaded:B,hasCticket:null===(e=this.props)||void 0===e?void 0:e.hasCticket,popCommonLoginComponentAction:this.popCommonLoginComponentAction.bind(this),commonBannerSsrData:null===(_=this.props)||void 0===_?void 0:_.commonBannerSsrData,showCma:null===(k=this.props)||void 0===k?void 0:k.showCma}))}render(){var e,_,k;const{showMap:I,card:C,lat:R=0,lng:B=0,flightTaskTripCoins:U={},popCommonLoginComponent:V=!1,isArab:G=!1}=this.state,{initData:{isSwitchNewFilter:z}}=this.props,{type:J="gg",url:Q}=(null===(e=this.props.initData)||void 0===e?void 0:e.mapInfo)||{},ee=(0,ii.WH)("city",this.ctx,0)||(0,ii.WH)("cityId",this.ctx,0),te=(0,q.Lf)(this);return U_.createElement("div",{className:j()("hotel-list-page",{"list-fs-b":te}),dir:G?"rtl":""},U_.createElement("div",{className:"fixMaskOnLocale"}),Bm.isSawadee&&U_.createElement(Partner,Bm.sawadeeConfig),U_.createElement(Di.ZP,{isSwitchNewFilter:z,changeProvideSelectedFilter:this.changeProvideSelectedFilter},U_.createElement(jm,null),z?U_.createElement(Dm,null):U_.createElement(Cm,null),U_.createElement(Bi,{searchResize:null,ref:this.listSearchRef}),this.renderMain()),I&&Z_&&U_.createElement(Z_,{mapType:J,mapUrl:Q,mapProps:{width:"100%",height:"100%",zoom:13,center:"gg"===J?"".concat(R,", ").concat(B):"".concat(B,", ").concat(R)},initData:C,toggleShowMap:this.toggleShowMap,isCallMapApi:!0}),U_.createElement(CookieBannerComponent,null),(0,zg.continueBookVisible)(this)?null:U_.createElement(U_.Fragment,null,V_&&U_.createElement(V_,null),W_&&U_.createElement(W_,null),G?null:U_.createElement(webPush_WebPush,{countDown:(null===(_=this.props.longList)||void 0===_||null===(k=_.webPushCount)||void 0===k?void 0:k.countDown)||H.default.getByKey("webPushCountDown",this.ctx)})),(0,Pe.xb)(U)?null:U_.createElement(FlightCountDown,{flightTaskTripCoins:U}),U_.createElement(NonActionListener,null),U_.createElement(jg,{onLoginSuccess:this.refreshHotelSearch}),shouldRenderFbRetainPop(H.default.getByKey("pageId",this.ctx))&&U_.createElement(qg,{pageId:H.default.getByKey("pageId",this.ctx)}),U_.createElement(Yg.Z,{pageId:H.default.getByKey("pageId",this.ctx),visible:V,onClose:()=>{this.setState({popCommonLoginComponent:!1})},deeplink:formatListDeepLink(this.ctx),customParams:{customParam1:ee.toString()},customId:"macauPop"}))}}var G_=k(41200),$_=k(42955),q_=k(43900);var z_=k(51905);var Y_=k(97740);function searchInputKeyword_actionCreator_updateSearchInputKeyword(e){return{type:Y_.A,data:e}}var J_=k(67108),X_=k(47801);var Q_=k(64528);function meta_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function meta_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?meta_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):meta_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const ew={fgt:"",hotelId:"",priceToleranceData:"",priceToleranceDataValidationCode:"",mpRoom:[],hotelUniqueKey:"",shoppingid:"",minPrice:"",minCurr:""},getMpRoom=e=>e?e.split(/,|_/):[];var tw=k(94084);const actionCreator_toggleFromMetaToMain=e=>({type:tw.L,payload:e}),listMapRequestParam_list=e=>{let{sortInfo:_,filterCondition:k,pageNo:I,isRecommend:C,edmHotelData:R}=e;k=(0,Js.MA)(k);let j,{poi:B,filterParam:H,noSelectedFilter:U}=(e=>{let _={},k={lat:0,lng:0};return(0,Oo.Z)("optionId")||(k={lat:(0,Oo.Z)("lat"),lng:(0,Oo.Z)("lon")}),Object.keys(e).map((I=>{if(I===Zu.Wj.PRICERANGE)return void(_[I]={lowPrice:e[I].priceLow,highPrice:e[I].priceHigh,curr:(0,Oo.Z)("barCurr")||(0,Js.zC)()});if(~[Zu.Wj.GuestRating,Zu.Wj.PRICETYPE].indexOf(I)){const k=(0,Ui.Z)(e[I],"list",[]);return void(_[I]=(e=>{let _="";return e&&e[0]&&(_=e[0].value),_})(k))}if(I===Zu.Wj.BRAND){let k=(0,Ui.Z)(e[I],"list",[]);return void(_[I]=k.map((e=>({value:e.value,type:e.type}))))}if(I===Zu.Wj.DISCOUNTS){let k=(0,Ui.Z)(e[I],"list",[]);return void(_[I]=k.map((e=>({value:e.value,discountValue:e.discountValue}))))}if(I===Zu.Wj.AIRPORTANDRAILWAYSTATION){let C=(0,Ui.Z)(e[I],"list",[]);return void(_[I]=C.map((e=>{if(e.status)return(k.lat=e.lat)&&(k.lng=e.lng),{value:e.value,type:e.type}})))}if(I===Zu.Wj.HOTAREA){let C=(0,Ui.Z)(e[I],"list",[]);return void(_[I]=C.map((e=>{let{value:_,type:I,lat:C=0,lng:R=0}=e;return k.lat=C,k.lng=R,{value:_,type:I}})))}if(~[Zu.Wj.ZONES,Zu.Wj.LANDMARKS,Zu.Wj.AIRPORTANDRAILWAYSTATION,Zu.Wj.METROS,Zu.Wj.LOCATION].indexOf(I)){let _=I===Zu.Wj.METROS,C=I===Zu.Wj.ZONES,R=(0,Ui.Z)(e[I],"".concat(_?"lineList":"list"),[]),j=R.filter((e=>e.status));_?R.filter((e=>e.status)).forEach((e=>{let _=e.siteList.find((e=>e.status));_&&(k.lat=_.lat)&&(k.lng=_.lng)})):C?1===j.length&&(k.lat=j[0].lat)&&(k.lng=j[0].lng):j.length&&(k.lat=j[0].lat)&&(k.lng=j[0].lng)}const C=e[I].list;C&&(_[I]=C.map((e=>e.value)))})),{filterParam:_,poi:k,noSelectedFilter:!k.lat&&!k.lng||!1}})(k),V=hotelSearchSearchCondition(Object.assign({},e,{poi:B}),U);((e,_)=>{let k=!0;return Object.keys(e).map((_=>{let I=e[_],C=null==I?void 0:I.list;_!==Zu.Wj.PRICETYPE&&C&&C.length&&(k=!1)})),_.list.forEach((e=>{e.status&&_.userChanged&&(k=!1)})),k})(k,_)?(j=(e=>{const _=Q_.Z.getState().ajaxLoad;let k,I,C;if(Ce.Z){const e=(0,Oo.Z)("stand");C={fgt:(0,Oo.Z)("fgt"),hotelId:(0,Oo.Z)("hotelid"),priceToleranceData:e,priceToleranceDataValidationCode:(0,Oo.Z)("stdcode"),mpRoom:getMpRoom((0,Oo.Z)("mproom")),hotelUniqueKey:e||(0,Oo.Z)("hotelUniqueKey"),shoppingid:(0,Oo.Z)("shoppingid")},k=(0,Oo.Z)("minprice"),I=(0,Oo.Z)("mincurr")}else{const _=(0,Ui.Z)(e,"stand",""),R=(0,Ui.Z)(e,"hotelUniqueKey","");C={fgt:(0,Ui.Z)(e,"fgt",""),hotelId:(0,Ui.Z)(e,"hotelid",""),priceToleranceData:_,priceToleranceDataValidationCode:(0,Ui.Z)(e,"stdcode",""),mpRoom:getMpRoom((0,Ui.Z)(e,"mproom","")),hotelUniqueKey:_||R,shoppingid:(0,Ui.Z)(e,"shoppingid","")},k=(0,Ui.Z)(e,"minprice",""),I=(0,Ui.Z)(e,"mincurr","")}return"NORMAL"===_.type?meta_objectSpread(meta_objectSpread({},C),{},{minPrice:k,minCurr:I}):meta_objectSpread({},C)})(),Q_.Z.dispatch(actionCreator_toggleFromMetaToMain(!1))):(j=ew,Q_.Z.dispatch(actionCreator_toggleFromMetaToMain(!0)));let G=(e=>{let{isRecommend:_,store:k,pageNo:I,filterParam:C,searchParam:R}=e;_&&(C.bookable=[1]);const j=(0,Ui.Z)(k.getState(),"seqId.normalSeqId",""),B=(0,Ui.Z)(k.getState(),"seqId.recommendSeqId","");return{seqid:I>1?_?B:j:"",deduplication:getDeduplication({pageNo:I,isRecommend:_,store:k}),filterCondition:C,searchCondition:R}})({isRecommend:C,store:Q_.Z,pageNo:I,filterParam:H,searchParam:V});return R&&(G.edmHotelData=R),Object.assign({},G,{meta:j})};var nw=k(33481),rw=k(24499).default,ow=k(67294),iw=k(48467).default;const aw=(()=>{let e=!1;const flightDiscountShow=e=>{let _=setTimeout((()=>{document.querySelector(".m-confirm-flight-mask .content_img").style.transform="scale(0)",clearTimeout(_)}),1500);(e=>{(0,te.fU)({logKey:"ibu_htl_c_online_alert_show",actionType:"show",logDesc:"Alert_shows",logValue:{locale:H.default.getByKey("cargo.locale")||"",pageid:H.default.getByKey("pageId"),message:e,type:33,pop_scenes:ne.Lh.CHECK_CLAIMED,title:""}})})(e.$translate("key.hotel.online.crosssell.claim.animation.message")),rw.show({title:null,content:ow.createElement("div",null,ow.createElement("div",{className:"content_img"}),ow.createElement("span",{className:"content_txt"},e.$translate("key.hotel.online.crosssell.claim.animation.message"))),button:[],close:!1,maskClosable:!1,className:"m-confirm-flight-mask",maskClassName:"m-confirm-flight"});let k=setTimeout((()=>{var _;rw.hide();const I=e.$component("ToolTip"),C={content:ow.createElement("span",{style:{wordBreak:"break-word"}},e.$translate("key.hotel.online.hotellist.crosssell.price.popover")),target:null===(_=document.getElementsByClassName("underline")[0])||void 0===_?void 0:_.parentNode,triPlacement:"middle",dark:!1,maxWidth:220,className:"m-tooltip-flight-discount"};I.action("show",C);let R=setTimeout((()=>{I.action("hide"),clearTimeout(R)}),5e3);clearTimeout(k)}),2500)};return{claimShow(_){let k=[];"1"==(0,Oo.Z)("flightTaskTripCoins")&&(ke.y7.set("flightTaskTripCoins",1),window.history.replaceState(null,"",window.location.href.replace("&flightTaskTripCoins=1","")));const I=1==ke.y7.get("flightTaskTripCoins");k.push({tagDataType:"ENABLE_AUTO_ACTIVITY",tagDataValue:"T"}),k.push({tagDataType:"OPEN_NEW_CORSS_NEW_BANNER",tagDataValue:"T"}),I&&k.push({tagDataType:"DOUBLE_CALL_FLOW_ACTIVITY",tagDataValue:"T"}),Ce.Z&&!e&&(e=!0,"SUCCESS"===(0,Oo.Z)("isClaimedSuccess")?(flightDiscountShow(_),window.history.replaceState(null,"",window.location.href.replace("&isClaimedSuccess=SUCCESS","")),iw({url:"/getMarketInfo",bff:!0,data:{searchTags:k},silence:!0}).then((e=>{const{data:k}=e;(null==k?void 0:k.isShowCrossBanner)||!(0,Pe.xb)(null==k?void 0:k.normalBannerInfo)?_.setState({crossBanner:k||{},bannerLoaded:!0}):_.setState({bannerLoaded:!0}),(null==k?void 0:k.isShowCountDown)&&_.setState({flightTaskTripCoins:(null==k?void 0:k.flightTaskTripCoins)||{}})}))):"FAIL"===(0,Oo.Z)("isClaimedSuccess")?((e=>{(0,te.fU)({logKey:"ibu_htl_c_online_toast_show",logValue:{page:H.default.getByKey("pageId")||"",locale:H.default.getByKey("cargo.locale")||"",popType:23,pop_msg:e.$translate("key.hotel.online.crosssell.component.bookcta.claim.failed"),pop_scenes:ne.Oc.CLAIM_FAILED_KEY}})})(_),window.history.replaceState(null,"",window.location.href.replace("&isClaimedSuccess=FAIL","")),iw({url:"/getMarketInfo",bff:!0,data:{searchTags:k},silence:!0}).then((e=>{const{data:k}=e;(null==k?void 0:k.isShowCrossBanner)||!(0,Pe.xb)(null==k?void 0:k.normalBannerInfo)?_.setState({crossBanner:k||{},bannerLoaded:!0}):_.setState({bannerLoaded:!0}),(null==k?void 0:k.isShowCountDown)&&_.setState({flightTaskTripCoins:(null==k?void 0:k.flightTaskTripCoins)||{}})}))):iw({url:"/getMarketInfo",bff:!0,data:{searchTags:[{tagDataType:"OPEN_NEW_CORSS_NEW_BANNER",tagDataValue:"T"},{tagDataType:"ENABLE_AUTO_ACTIVITY",tagDataValue:"T"}]},silence:!0}).then((e=>{var k;const{data:I}=e;let C=!(0,Pe.xb)(null==I?void 0:I.normalBannerInfo)&&(null==I||null===(k=I.authInfo)||void 0===k?void 0:k.isLogin);var R;"newUser"===(null==I?void 0:I.sceneType)&&(C=(null==I||null===(R=I.authInfo)||void 0===R?void 0:R.isMember)||isShowListNewBanner(I)||!1);I.isRechargeSuccessful&&(flightDiscountShow(_),window.location.reload()),C?_.setState({crossBanner:I||{},bannerLoaded:!0}):_.setState({bannerLoaded:!0}),(null==I?void 0:I.isShowCountDown)&&_.setState({flightTaskTripCoins:(null==I?void 0:I.flightTaskTripCoins)||{}})})).catch((e=>{_.setState({bannerLoaded:!0})})))}}})();var lw,sw=k(24499).default,cw=k(67294),uw=k(24367).default,dw=k(48467).default;function listNewPage_ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function listNewPage_objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?listNewPage_ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):listNewPage_ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}let pw=(0,Ni.$j)((e=>e))(lw=class listNewPage extends listNewPage_view_View{constructor(e){var _,k,I;super(e),this.getCrossBannerData=e=>{if((0,Pe.xb)(e))return{};const{normalBannerInfo:_,authInfo:k,sceneType:I}=e;let C=!(0,Pe.xb)(_)&&(null==k?void 0:k.isLogin);return"newUser"===I&&(C=(null==k?void 0:k.isMember)||isShowListNewBanner(e)||!1),C?e:{}},this.getRefs=()=>{this.longList||(this.longList=document.getElementsByClassName("long-list")[0]),this.sort||(this.sort=document.getElementById("list_hotel_sort"));const e=this.filterRef.current;return{longList:this.longList,side:this.sideRef.current,sideScrollTab:this.sideScrollTabRef.current,filterRef:null==e?void 0:e.filterRef.current,sort:this.sort,vFilterRef:e}},this.componentDidMount=()=>{var e,_;Ce.Z&&(null===(e=history)||void 0===e?void 0:e.scrollRestoration)&&(history.scrollRestoration="manual"),window.addEventListener("beforeunload",this.beforeunload),window.LISTPAGE_READY_TIME=Date.now(),go.Z.set("oldLocale",H.default.getByKey("cargo.locale")),this.handleUrlPriceRangeParams();const{firstPageList:k,searchCondition:I,getHotelListTraceLogID:C,ssrPriceEncrypt:R}=this.props.initData||{};var j;R?this.getHotelListPrices(k,I,C):this.$safeLog("hotelListCardRendered",null===ha.Z||void 0===ha.Z||null===(j=ha.Z.timing)||void 0===j?void 0:j.navigationStart,!0);(0,Wu.ZP)($a.Z,!0);const{experienceMemberReward:B={}}=this.props.longList||{};this.scrollToContainer(),ke.y7.remove("list_hotel_info");const U="T"===(null===(_=this.props)||void 0===_?void 0:_.hasCticket);if(ke.y7.setDirect("hasCticket",U),this.needShowGoldenMask(B)&&this.showMask&&this.showGoldenMask(B.desc),this.isMetaPage){var V,G,q;const e=null===(V=this.props.metaHotel)||void 0===V||null===(G=V.card)||void 0===G||null===(q=G.base)||void 0===q?void 0:q.hotelId;ke.y7.setDirect("META_HOTEL_ID",e);ke.y7.get("unAvailableRoomInfo")&&ke.y7.remove("unAvailableRoomInfo")}setTimeout((()=>{this.showDateBoxBlink()}),1e3),this.researchHotelsByBatchRefresh(),this.startDynamicMetaRefresh(),document.onvisibilitychange=()=>{var e;if(H.default.getByKey("initData.enableDynamicRefresh"))if("visible"===document.visibilityState)clearTimeout(null===(e=window)||void 0===e?void 0:e.dynamicRefreshTimers),this.dynamicRefresh();else if("hidden"===document.visibilityState){var _;clearTimeout(null===(_=window)||void 0===_?void 0:_.dynamicRefreshTimers)}},(0,z.init)({ubtKey:"list page",pageId:H.default.getByKey("pageId",this.ctx),threshold:.5}),this.logNoHotel()},this.changeProvideSelectedFilter=e=>this.setState({providerSelectedFilters:e}),this.getSelectedFilter=()=>{const{initData:{isSwitchNewFilter:e},renderFilters:_}=this.props||{initData:{}},{providerSelectedFilters:k}=this.state;return e?k:(0,J.hZ)(_)},this.handleUrlPriceRangeParams=()=>{if(!("T"===H.default.getByKey("qconfigData.resetPriceRangeForCurr")))return;const e=(0,Oo.Z)("barCurr");if(Ce.Z&&""!==e&&e!==H.default.getByKey("cargo.currency")){var _,k,I;let e=(0,Oo.Z)("listFilters");e=(null===(_=e)||void 0===_||null===(k=_.split(","))||void 0===k||null===(I=k.filter((e=>!e.includes("15~Range"))))||void 0===I?void 0:I.join(","))||[],window.history.replaceState(null,"",replaceParamUrl({lowPrice:"",highPrice:"",barMax:"",listFilters:e}))}},this.execBatchReq=()=>{var e;const{ssrHotelSearch:_}=this.props.initData||{},{hotelList:k=[],preBatchRefresh:I,batchRefreshPolicy:C}=this.props.longList||{},R=(0,Oo.Z)("featureValue");let j=Object.assign({},this.baseParam({pageNo:1,isRecommend:!1}));j.filters=this.getSelectedFilter(),j.resetWholePage=!0,j.queryTag=Zu.L7.normal,j.topHotelIds=(0,Oo.Z)("topHotelIds")||"",j.searchCondition.keyword=R,j.ssrHotelSearch=_,j.batchRefreshHotelIds=k.map((e=>({id:e.hotelBasicInfo.hotelId})))||[],j.batchRefreshpolicy=I,clearTimeout(null===(e=window)||void 0===e?void 0:e.batchReqTimers),window.batchReqTimers=setTimeout((()=>{this.props.dispatch(updataBatchParams({isBatch:!0})),this.props.dispatch(updateLongList(j)).then((e=>{this.props.dispatch(updataBatchParams({isBatch:!1})),this.$safeLog("logUbtHotelListBatchRefresh",{res:e,preList:k,param:j,preBatchRefresh:I})}))}),+C.nextBatchTime)},this.researchHotelsByBatchRefresh=()=>{const{batchRefreshPolicy:e={},isNeedRecommend:_,hotelList:k=[],fontColor:I}=this.props.longList||{};var C;H.default.getByKey("initData.enableDynamicRefresh")?(clearTimeout(null===(C=window)||void 0===C?void 0:C.dynamicRefreshTimers),window.dynamicRefreshTimers=setTimeout((()=>{this.dynamicRefresh()}),im())):(null==e?void 0:e.nextBatchTime)&&+e.nextBatchTime>0&&!this.isMetaPage&&"T"!==_&&Ce.Z&&"labelColor"===I&&(null==k?void 0:k.length)&&"T"==H.default.getByKey("qconfigData.enableBatchRefreshPolicy")&&this.execBatchReq()},this.showDateBoxBlink=()=>{const e=document.getElementsByClassName("list-calendar")[0],_="1"===(0,Oo.Z)("fromCloseHotel");_&&e&&e.classList.add("animation"),_&&window.history.replaceState(null,"",window.location.href.replace("&fromCloseHotel=1",""))},this.flightDiscountShow=()=>{let e=setTimeout((()=>{document.querySelector(".m-confirm-listpage-flight-mask .content_img").style.transform="scale(0)",clearTimeout(e)}),1500);sw.show({title:null,content:cw.createElement("div",null,cw.createElement("div",{className:"content_img"}),cw.createElement("span",{className:"content_txt"},this.$translate("key.hotel.online.crosssell.claim.animation.message"))),button:[],close:!1,maskClosable:!1,className:"m-confirm-listpage-flight-mask",maskClassName:"m-confirm-listpage-flight"});let _=setTimeout((()=>{var e;sw.hide();const k=this.$component("ToolTip"),I={content:cw.createElement("span",{style:{wordBreak:"break-all"}},this.$translate("key.hotel.online.hotellist.crosssell.price.popover")),target:null===(e=document.getElementsByClassName("underline")[0])||void 0===e?void 0:e.parentNode,triPlacement:"middle",dark:!1,maxWidth:220,className:"m-tooltip-listpage-flight-discount"};k.action("show",I);let C=setTimeout((()=>{k.action("hide"),clearTimeout(C)}),5e3);clearTimeout(_)}),2500)},this.needShowGoldenMask=e=>!(0,Pe.xb)(e)&&(null==e?void 0:e.desc),this.baseParam=e=>{let{pageNo:_=1,isRecommend:k}=e;const{searchCondition:I,filterCondition:C,sortInfo:R,initData:j}=this.props;return listMapRequestParam_list({initData:j,searchCondition:I,filterCondition:C,sortInfo:R,pageNo:_,isRecommend:k,edmHotelData:(0,Oo.Z)("edmHotelData")})},this.displayKeyword=()=>{const{searchCondition:e={}}=this.props.initData||{};let _=(0,$_.ek)();const k=(0,Oo.Z)("featureValue");let I=H.default.getByKey("initData.searchCondition.keyword",this.ctx);_=listNewPage_objectSpread(listNewPage_objectSpread({},_),{word:k,displayName:k,_cityId:e.cityId,countryId:e.countryId,lat:e.lat,lon:e.lng}),this.props.dispatch((0,G_.kG)(_)),I||this.props.dispatch(searchInputKeyword_actionCreator_updateSearchInputKeyword(k))},this.researchHotels=()=>{const{ssrHotelSearch:e}=this.props.initData||{},_=(0,Oo.Z)("featureValue");let k=this.baseParam({pageNo:1,isRecommend:!1});k.filters=this.getSelectedFilter(),k.breathing=!0,k.resetWholePage=!0,k.queryTag=Zu.L7.normal,k.topHotelIds=(0,Oo.Z)("topHotelIds")||"",k.searchCondition.keyword=_,k.ssrHotelSearch=e,this.props.dispatch(updateLongList(k)).then((e=>{this.$safeLog("logUbtHotelList",e,k.queryTag),e&&e.metaHotel&&this.$safeLog("logUbtMetaHotel",e.metaHotel)}))},this.popCommonLoginComponentAction=()=>{this.setState({popCommonLoginComponent:!0})},this.flightCross=()=>{var e,_,k;const I=(null===(e=this.props)||void 0===e||null===(_=e.loginStatus)||void 0===_?void 0:_.isLogin)||!1;1==ke.y7.get("flightTaskTripCoins")&&!I&&this.$component("Account").action("showLogin",{paramObj:{username:""},successCallback:()=>{window.location.reload()},failcallback:()=>{}}),(0,Pe.xb)(this.props.crossBanner)&&aw.claimShow(this),(null===(k=this.props.crossBanner)||void 0===k?void 0:k.isRechargeSuccessful)&&window.location.reload()},this.asynCookies=()=>{if(Ce.Z){var e;let _=location.origin.match(/[^.]+\.com/gi);_=_?_[0]:"",document.cookie="IBU_showtotalamt=;path=/;expires="+new Date(0).toUTCString(),document.cookie="IBU_showtotalamt=;path=/;domain="+_+";expires="+new Date(0).toUTCString();const k=this.getSelectedFilter()||[],I=null==k||null===(e=k.find((e=>"80"===e.type)))||void 0===e?void 0:e.value;go.Z.set("IBU_showtotalamt",I,{expires:7})}},this.hideFilter=()=>{let[e]=document.getElementsByClassName("filter-wrap"),[_]=document.getElementsByClassName("filter-mask"),[k]=document.getElementsByClassName("mapfilter-wrap-v8"),[I]=document.getElementsByClassName("quickfilter"),[C]=document.getElementsByClassName("m-recentHotels");_&&(_.style.display="none"),e&&(e.style.display="none")&&(e.className="filter-wrap"),k&&(k.style.display="block"),I&&(I.className="quickfilter")&&(I.style=""),C&&(C.style.marginBottom="0")},this.toggleShowMap=e=>{let{showMap:_=!1}=this.state,k={showMap:!_};if(-1===e&&Th.Z.unfreeze(),e&&"object"==typeof e){let _=H.default.getByKey("initData.mapInfo.type",this.ctx);const{latitude:I=0,longitude:C=0}=(0,nw.ZL)(_,(0,ci.Z)(e,"positionInfo.mapCoordinate",[]));Object.assign(k,{point:{lat:I,lng:C},card:e})}this.setState(k)},this.showGoldenMask=e=>{let _={title:this.$translate("key.hotel.homepage.gold.membership.free.trial.pop-up"),subTitle:e,btnMsg:this.$translate("key.hotel.book.goldtrial.button"),page:Ce.Z&&window.location.href.match(/searchresults/gi)?"meta":"list"};Ce.Z&&uw.show({Child:GoldenMask,data:_,header:"close",animation:!0,fclass:"goldenInfo",callback:()=>{this.showMask=!1}})},this.refreshHotelSearch=()=>{window.location.reload()},this.fixToggle=e=>{var _;const k=(null===(_=document.querySelector(".list-search-container"))||void 0===_?void 0:_.offsetHeight)||0;this.$instance("Filter").action("filterFixed",{needFixed:e,searchHeight:k})},this.searchResize=e=>{if(this.$instance("Filter").action("changeFixTop",e),this.state.sideFixed){const{left:e}=this.sideEmptyRef.current.getBoundingClientRect()||{};this.setState({sideLeft:e})}},this.dynamicRefresh=()=>{var e;const{ssrHotelSearch:_}=this.props.initData||{},k=(0,Oo.Z)("featureValue");let I=this.baseParam({pageNo:1,isRecommend:!1});I.filters=this.getSelectedFilter(),I.queryTag=Zu.L7.normal,I.topHotelIds=(0,Oo.Z)("topHotelIds")||"",I.searchCondition.keyword=k,I.ssrHotelSearch=_,clearTimeout(null===(e=window)||void 0===e?void 0:e.dynamicRefreshTimers),refreshList(I)},this.dynamicMetaRefresh=async()=>{if(!H.default.getByKey("initData.enableDynamicRefreshMeta")||!this.isMetaPage)return;const{searchCondition:e,searchBarData:_,filterCondition:k,sortInfo:I,initData:C,dispatch:R}=this.props;refreshMetaList({searchCondition:e,searchBarData:_,filterCondition:k,sortInfo:I,initData:C,dispatch:R,filters:this.getSelectedFilter()})},this.startDynamicMetaRefresh=()=>{const e=im(Date.now(),"qconfigData.dynamicRefreshMetaTimerConf");window.dynamicRefreshMetaTimers=setTimeout((()=>{this.dynamicMetaRefresh()}),e)},this.logNoHotel=()=>{if(this.isMetaPage){var e;const _=H.default.getByKey("initData.firstPageList.metaError");H.default.getByKey("initData.firstPageList.metaHotel")||Qf({position:"metahotel",reason:_?2:1});const k=H.default.getByKey("initData.firstPageList");(null==k||null===(e=k.hotelList)||void 0===e?void 0:e.length)<1&&Qf({position:"recommend",reason:0===(null==k?void 0:k.ErrorCode)?1:2,traceLogId:H.default.getByKey("initData.getHotelListTraceLogID")})}else{var _,k,I;const e=H.default.getByKey("initData.searchBarData"),C="H"===(null==e||null===(_=e.search)||void 0===_?void 0:_.resultType)&&""!==(null==e||null===(k=e.search)||void 0===k?void 0:k.resultWord),R=H.default.getByKey("initData.firstPageList");(null==R||null===(I=R.hotelList)||void 0===I?void 0:I.length)<1&&Qf({position:C?"singlesearch":"list",reason:0===(null==R?void 0:R.ErrorCode)?1:2,traceLogId:H.default.getByKey("initData.getHotelListTraceLogID"),pageindex:1})}},this.state={sideFixed:!1,sideTop:0,sideLeft:0,crossBanner:this.getCrossBannerData(e.crossBanner),bannerLoaded:!(0,Pe.xb)(e.crossBanner),flightTaskTripCoins:(null===(_=e.crossBanner)||void 0===_?void 0:_.isShowCountDown)&&!(0,Pe.xb)(null===(k=e.crossBanner)||void 0===k?void 0:k.flightTaskTripCoins)?e.crossBanner.flightTaskTripCoins:{},isArab:(0,J.KG)(H.default.getByKey("cargo.locale",this.ctx)),providerSelectedFilters:(null==e||null===(I=e.renderFilters)||void 0===I?void 0:I.urlChoosedFilters)||[]},this.sideScrollMax=0,this.filterRef=cw.createRef(),this.sideRef=cw.createRef(),this.sideScrollTabRef=cw.createRef(),this.sideEmptyRef=cw.createRef(),this.listSearchRef=cw.createRef(),this.longList=null,this.showMask=!0,this.isMetaPage="10320668268"===H.default.getByKey("pageId",this.ctx),this.ubtMapping={load:load,hotelListCardRendered:hotelListCardRendered,logUbtHotelListBatchRefresh:logUbtHotelListBatchRefresh},"T"!==H.default.getByKey("qconfigData.DisEnableUpateListPageQid")&&(null==e?void 0:e.Qid)&&(0,Ti.gS)(e.Qid)}componentWillUnmount(){window.removeEventListener("beforeunload",this.beforeunload),ke.y7.get("detail_query_id")&&ke.y7.remove("detail_query_id")}beforeunload(){ke.y7.get("list_exposure_query_id")&&ke.y7.remove("list_exposure_query_id"),(0,Ti.gS)(),(0,Ti.s2)()}scrollToContainer(){let e=ke.y7.get("needScroll");this.isMetaPage&&!1!==e&&(window.scrollTo(0,document.getElementById("ibu_hotel_container").offsetTop),ke.y7.setDirect("needScroll",!1))}getHotelListPrices(e,_,k){var I,C,R,j;let{hotelList:B=[],isSSR:U}=e;if(!B.length||!U)return;let V={head:{traceLogID:k||""},checkIn:null==_||null===(I=_.checkIn)||void 0===I?void 0:I.replace(/-/g,""),checkOut:null==_||null===(C=_.checkOut)||void 0===C?void 0:C.replace(/-/g,""),list:[],needTagMerge:"T"};B.forEach((e=>{const{hotelBasicInfo:_={}}=e;V.list.push({realPrice:_.price,hotelId:_.hotelId,deletePrice:_.originPrice})}));const G="T"===H.default.getByKey("qconfigData.openSpiderV2")&&!0===H.default.getByKey("isSpiderV2")&&(null===(R=H.default.getByKey("qconfigData.newSpiderPage"))||void 0===R?void 0:R.includes(null===H.default||void 0===H.default?void 0:H.default.getByKey("pageId")))||!1;dw({url:"/getHotelListPrices",data:V,genk:!0,genkV2:G,checkReferer:!0,silence:!0,currency:(0,Js.zC)(),bff:!0,genKeyParam:{a:0,b:null==_?void 0:_.checkIn,c:null==_?void 0:_.checkOut,d:null===(j=H.default.getByKey("cargo.locale",this.ctx))||void 0===j?void 0:j.toLocaleLowerCase(),e:2}}).then((e=>{let{data:_}=e;const{hotelList:k,fontColor:I}=_;this.props.dispatch(function decodeListPrice(e){return{type:qf.l6,payload:e}}({hotelList:k,fontColor:I}))}))}afterAsync(){const{ssrHotelSearch:e,_duration:_,firstPageList:k,userInfo:I,needHotelResearch:C,searchCondition:R}=this.props.initData||{};var j;H.default.getByKey("initParams")&&(this.props.dispatch((0,G_.BH)((0,$_.So)())),this.props.dispatch((0,G_.kG)((0,$_.ek)())),this.props.dispatch(searchInputKeyword_actionCreator_updateSearchInputKeyword(H.default.getByKey("initData.searchCondition.keyword"))),this.props.dispatch(function actionCreator_updateAllSearchContion(e){return{type:q_.qV,payload:e}}(H.default.getByKey("initData.searchCondition"))),this.props.dispatch(function updateSortInfo(e){return{type:z_.W,payload:e}}(H.default.getByKey("initData.newSortInfo"))),this.props.dispatch((0,J_.Of)(H.default.getByKey("initData.filterInfo"))),this.props.dispatch((j=H.default.getByKey("initData"),{type:X_.w,payload:j}))),this.displayKeyword(),C&&this.researchHotels(),this.$safeLog("load",this.props);let B=H.default.getByKey("initData.searchCondition.cityName")||"";void 0!==window.dataLayer&&window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({"productProvince ":B,event:"applyProvince"}),(0,tu.lU)(null==I?void 0:I.login),this.asynCookies(),this.flightCross(),(0,Dc.$w)({key:pa.sP,isMultiSSR:e,initTime:_,listTime:k&&k._duration}),this.isMetaPage&&!ke.y7.get("isMetaFirstTimeLanding")&&(null==R?void 0:R.checkIn)&&(null==R?void 0:R.checkOut)&&(this.popCommonLoginComponentAction(),ke.y7.setDirect("isMetaFirstTimeLanding",!0)),(0,Le.pE)({pageId:H.default.getByKey("pageId",this.ctx),locale:H.default.getByKey("cargo.locale",this.ctx)}),(0,Le.c)({pageId:H.default.getByKey("pageId",this.ctx),locale:H.default.getByKey("cargo.locale",this.ctx)});const U=H.default.getByKey("fetchServiceLogs");U&&U.length>0&&U.map((e=>(0,Le.vC)(e))),(0,J.Zx)(),ke.y7.set("240509_IBU_oldh_is_b_version",(0,q.TL)())}})||lw;withHooksHOC(pw);(0,Wu.ZP)($a.Z,!0),(0,_u.Z)(withHooksHOC(pw),Ni.zt,$a.Z)},3438:function(e,_,k){"use strict";k.d(_,{p:function(){return I}});const I="UPDATE_BATCH_PARAMS"},91245:function(e,_,k){"use strict";k.d(_,{Z:function(){return batchParams}});var I=k(96156),C=k(3438);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const R={isBatch:!1};function batchParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I={}}=_;switch(k){case C.p:return _objectSpread(_objectSpread({},e),I);default:return e}}},66811:function(e,_,k){"use strict";k.d(_,{V:function(){return I}});const I="UPDATE_FRESH_TIME"},15345:function(e,_,k){"use strict";k.d(_,{Z:function(){return dynamicRefreshTimers}});var I=k(66811);function dynamicRefreshTimers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;switch(k){case I.V:return C;default:return e}}},79409:function(e,_,k){"use strict";k.d(_,{u:function(){return I}});const I="RESET_FOLD_STATUS"},43149:function(e,_,k){"use strict";k.d(_,{p:function(){return C}});var I=k(79409);const C=function foldInitStatus(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.u?C:e}},24713:function(e,_,k){"use strict";k.d(_,{L:function(){return I}});const I="TOGGLE_FROM_META_TO_MAIN"},679:function(e,_,k){"use strict";k.d(_,{z:function(){return C}});var I=k(24713);const C=function fromMetaToMain(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;switch(k){case I.L:return C;default:return e}}},58831:function(e,_,k){"use strict";k.d(_,{O:function(){return I}});const I="UPDATE_AD_HOTEL_ID"},15675:function(e,_,k){"use strict";k.d(_,{Z:function(){return hotelAdIds}});var I=k(96156),C=k(58831);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function hotelAdIds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I=[]}=_;switch(k){case C.O:return _objectSpread(_objectSpread({},e),{},{ids:I});default:return e}}},88960:function(e,_,k){"use strict";k.d(_,{y:function(){return I}});const I="UPDATE_MIDDLE_POI_FILTERS"},46454:function(e,_,k){"use strict";k.d(_,{$:function(){return R}});var I=k(88960);const C={poiFilters:[]},R=function hotelAdditionInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:R}=_;return k===I.y?Object.assign({},e,{poiFilters:R}):e}},87881:function(e,_,k){"use strict";k.d(_,{yr:function(){return I},N0:function(){return C},K2:function(){return R},wk:function(){return j},a3:function(){return B},F7:function(){return H},sj:function(){return U}});const I="TOGGLE_AJAX_LOADING",C="TOGGLE_AJAX_PENDING",R="TOGGLE_AJAX_BREATHING",j="ADD_AJAX_PAGENO",B="RESET_AJAX_PAGENO",H="TOGGLE_MAP_LOADING",U="TOGGLE_AJAX_LOAD_TYPE"},3650:function(e,_,k){"use strict";k.d(_,{V:function(){return getInitAjaxLoad},Z:function(){return ajaxLoad}});var I=k(96156),C=k(87881),R=k(24567),j=k(47419);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const getInitAjaxLoad=()=>{const e=j.default.getByKey("initData.ssrHotelSearch");return{loading:!1,pending:!e,breathing:!e,normalPageNo:e?2:1,recommendPageNo:1,type:"T"===j.default.getByKey("initData.firstPageList.isNeedRecommend")?R.L7.recommend:R.L7.normal}};function ajaxLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;switch(k){case C.yr:return Object.assign({},e,{loading:I});case C.N0:return Object.assign({},e,{pending:I});case C.K2:return Object.assign({},e,{breathing:I});case C.wk:{const{key:_}=I;return Object.assign({},e,{[_]:++e[_]})}case C.a3:{const{key:_,pageNo:k}=I;return Object.assign({},e,{[_]:k})}case C.F7:return _objectSpread(_objectSpread({},e),{},{mapLoading:I});case C.sj:return _objectSpread(_objectSpread({},e),{},{type:I});default:return e}}},75990:function(e,_,k){"use strict";k.d(_,{B9:function(){return I},Pn:function(){return C},a9:function(){return R},ji:function(){return j},Jd:function(){return B},o4:function(){return H},zV:function(){return U},ck:function(){return V},Zz:function(){return G},AO:function(){return q},l6:function(){return z},u7:function(){return J},ww:function(){return Q}});const I="UPDATE_NORMAL_LIST_DATA",C="UPDATE_RECOMMEND_LIST_DATA",R="RESET_RECOMMEND_LIST_DATA",j="RESET_LONG_LIST_DATA",B="CHANGE_LONG_LIST_LOADING_STATUS",H="UPDATE_CONTROLLER_UBTTRACELOGID",U="REFRESH_FIRSTHOTELLIST",V="UPDATE_TRIPCOINS",G="UPDATE_EXPERIENCE_MEMBER_REWARD",q="UPDATE_WEB_PUSH_COUNT",z="DECODE_LIST_PRICE",J="BATCH_FIRSTHOTELLIST",Q="REFRESH_LONG_LIST_DATA"},65240:function(e,_,k){"use strict";k.d(_,{X:function(){return j}});var I=k(96156),C=k(75990),R=k(72427);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const j=function longList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;switch(k){case C.B9:{const _=(0,R.Z)(e,"moreHotel",{}),k=(0,R.Z)(e,"hotelList",[]),C=(0,R.Z)(e,"resultTitle",{});if(I.resultTitle=C,I.moreHotel=_,I.hotelListDeduplicateSwitch&&(null==k?void 0:k.length)<30)try{var j;const e=[...k||[]];null===(j=I.hotelList)||void 0===j||j.forEach((_=>{var I;(null==_||null===(I=_.hotelBasicInfo)||void 0===I?void 0:I.hotelId)&&!(null==k?void 0:k.find((e=>{var k,I;return(null==e||null===(k=e.hotelBasicInfo)||void 0===k?void 0:k.hotelId)===(null==_||null===(I=_.hotelBasicInfo)||void 0===I?void 0:I.hotelId)})))&&e.push(_)})),I.hotelList=e}catch(e){I.hotelList=[...k||[],...I.hotelList||[]]}else I.hotelList=[...k||[],...I.hotelList||[]];return e.encourage&&e.encourage.description&&(I.encourage=e.encourage),I.hotelList.length&&"None"===I.hotelList.type&&(I.hotelList.type=k.type),Object.assign({},e,_objectSpread({},I))}case C.Pn:{var B;const _=(0,R.Z)(e,"hotelList",{});I.hotelList=_,I.resultTitle=I.resultTitle?I.resultTitle:e.resultTitle;const k=(0,R.Z)(e,"moreHotel.list",[]),C=(0,R.Z)(I,"moreHotel.list",[]);I.moreHotel=I.moreHotel||{},I.moreHotel.list=[...k,...C],(null===(B=I.hotelListAddtionInfo)||void 0===B?void 0:B.hotelTotalNum)&&(I.hotelListAddtionInfo.hotelTotalNum=(0,R.Z)(e,"hotelListAddtionInfo.hotelTotalNum",0));const j=(0,R.Z)(e,"moreHotel.title",""),H=(0,R.Z)(I,"moreHotel.title","");return I.moreHotel.title=H||j,e.encourage&&e.encourage.description&&(I.encourage=e.encourage),Object.assign({},e,_objectSpread({},I))}case C.a9:return Object.assign({},e,{moreHotel:I.moreHotel,seqid:I.seqid});case C.ji:return I;case C.Jd:return _objectSpread(_objectSpread({},e),{},{loading:I});case C.Zz:return _objectSpread(_objectSpread({},e),{},{experienceMemberReward:I});case C.ck:return _objectSpread(_objectSpread({},e),{},{tripcoinsReward:I});case C.o4:return _objectSpread(_objectSpread({},e),{},{controllerUbtTraceLogId:I});case C.zV:{var H,U;const{response:_}=I,k=(0,R.Z)(_,"hotelList.list",[]),C=(0,R.Z)(e,"hotelList",{});if(!(null==_||null===(H=_.batchSearchInfo)||void 0===H?void 0:H.batchId)||!k.length||!(null==C||null===(U=C.list)||void 0===U?void 0:U.length))return e;const j=_objectSpread(_objectSpread({},C),{},{list:C.list.map((e=>{const _=k.find((_=>{var k,I;return(null==_||null===(k=_.base)||void 0===k?void 0:k.hotelId)===(null==e||null===(I=e.base)||void 0===I?void 0:I.hotelId)}));return _?(_.banner=e.banner,_):e}))});return _objectSpread(_objectSpread({},e),{},{hotelList:j})}case C.u7:{const{res:_}=I,k=(0,R.Z)(_,"hotelList",[]);return _objectSpread(_objectSpread({},e),{},{hotelList:k})}case C.AO:return _objectSpread(_objectSpread({},e),{},{webPushCount:I});case C.l6:{const _=e.hotelList||[],{hotelList:k=[],fontColor:C}=I;return _.length&&k.length?(_.map((e=>{let{hotelBasicInfo:_={}}=e;const I=k.find((e=>e.hotelId===_.hotelId));I&&(_.originPrice=I.deletePrice||"",_.price=I.realPrice||"")})),_objectSpread(_objectSpread({},e),{},{fontColor:C,hotelList:_})):e}case C.ww:{const _=(0,R.Z)(I,"hotelList",[]);if(!_.length)return e;const k=(0,R.Z)(e,"hotelList",[]),C=new Map;return k.forEach(((e,_)=>{C.set(e.hotelBasicInfo.hotelId,_)})),_.forEach((e=>{const _=C.get(e.hotelBasicInfo.hotelId);if(void 0!==_){var I,R,j,B,H,U,V,G,q,z,J,Q,ee,te,ne,re;const C=k[_],oe=Object.assign({},e,{extensions:_objectSpread(_objectSpread({},e.extensions),{},{dispatchId:null==C||null===(I=C.extensions)||void 0===I?void 0:I.dispatchId}),commentInfo:null==C?void 0:C.commentInfo,positionInfo:null==C?void 0:C.positionInfo,hotelDecorateInfo:null==C?void 0:C.hotelDecorateInfo,hotelBasicInfo:_objectSpread(_objectSpread({},null==C?void 0:C.hotelBasicInfo),{},{price:null==e||null===(R=e.hotelBasicInfo)||void 0===R?void 0:R.price,originPrice:null==e||null===(j=e.hotelBasicInfo)||void 0===j?void 0:j.originPrice,hidePrice:null==e||null===(B=e.hotelBasicInfo)||void 0===B?void 0:B.hidePrice,isPriceMask:null==e||null===(H=e.hotelBasicInfo)||void 0===H?void 0:H.isPriceMask,additionTexts:null==e||null===(U=e.hotelBasicInfo)||void 0===U?void 0:U.additionTexts,isFullRoom:null==e||null===(V=e.hotelBasicInfo)||void 0===V?void 0:V.isFullRoom,lastBookingTimeRemark:null==e||null===(G=e.hotelBasicInfo)||void 0===G?void 0:G.lastBookingTimeRemark,payAtHotelTax:null==e||null===(q=e.hotelBasicInfo)||void 0===q?void 0:q.payAtHotelTax,payAtHotelTaxText:null==e||null===(z=e.hotelBasicInfo)||void 0===z?void 0:z.payAtHotelTaxText,payType:null==e||null===(J=e.hotelBasicInfo)||void 0===J?void 0:J.payType,priceExplanation:null==e||null===(Q=e.hotelBasicInfo)||void 0===Q?void 0:Q.priceExplanation,signInNote:null==e||null===(ee=e.hotelBasicInfo)||void 0===ee?void 0:ee.signInNote,decorator:null==e||null===(te=e.hotelBasicInfo)||void 0===te?void 0:te.decorator,showwithtaxpriceinfo:null==e||null===(ne=e.hotelBasicInfo)||void 0===ne?void 0:ne.showwithtaxpriceinfo,guestInfoEntity:null==e||null===(re=e.hotelBasicInfo)||void 0===re?void 0:re.guestInfoEntity}),roomInfo:null==e?void 0:e.roomInfo,saleRoom:null==e?void 0:e.saleRoom});k[_]=oe}})),_objectSpread(_objectSpread({},e),{},{hotelList:k})}default:return e}}},21915:function(e,_,k){"use strict";k.d(_,{M:function(){return I}});const I="UPDATE_AD_HOTEL_ID"},4095:function(e,_,k){"use strict";k.d(_,{Z:function(){return singleRecommendHotelInfo}});var I=k(96156),C=k(21915);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function singleRecommendHotelInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I=[]}=_;switch(k){case C.M:return _objectSpread(_objectSpread({},e),{},{singleHotelInfo:I});default:return e}}},17169:function(e,_,k){"use strict";k.d(_,{h:function(){return I}});const I="UPDATE_RECOMMEND_TIMES"},63234:function(e,_,k){"use strict";k.d(_,{N:function(){return R}});var I=k(17169);const C={times:0},R=function recommendTimes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:R}=_;return k===I.h?Object.assign({},e,{times:R}):e}},38484:function(e,_,k){"use strict";k.d(_,{N:function(){return updataSearchSessionId},F:function(){return updateHotelAllNum}});var I=k(67174);function updataSearchSessionId(e){return{type:I.g,payload:e}}function updateHotelAllNum(e){return{type:I.p,payload:e}}},67174:function(e,_,k){"use strict";k.d(_,{g:function(){return I},p:function(){return C}});const I="UPDATE_SEARCH_SESSIONID",C="UPDATE_ALL_HOTEL_NUM"},5649:function(e,_,k){"use strict";k.d(_,{LT:function(){return getSearchSessionId},C0:function(){return j}});var I=k(78768),C=k(63732),R=k(38484);const getSearchSessionId=e=>{var _,k;return Number((null==e?void 0:e.pageNo)||0)>1?null===(_=I.Z.getState())||void 0===_||null===(k=_.searchSession)||void 0===k?void 0:k.searchSessionId:(0,C.uG)()},j=function getSearchHotelNum(){var e,_;let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=0,{loading:j=!1,breathing:B}=(null===(e=I.Z.getState())||void 0===e?void 0:e.ajaxLoad)||{},H=(null===(_=I.Z.getState().batchParams)||void 0===_?void 0:_.isBatch)||!1;var U,V,G;Number(k.pageNo)>1||"NORMAL"!==k.queryTag||H||B||j?C=(null===(U=I.Z.getState().searchSession)||void 0===U?void 0:U.hotelTotalNum)||0:(C=(null===(V=I.Z.getState().longList)||void 0===V||null===(G=V.hotelListAddtionInfo)||void 0===G?void 0:G.hotelTotalNum)||0,I.Z.dispatch((0,R.F)({hotelTotalNum:C})));return C}},9777:function(e,_,k){"use strict";k.d(_,{Z:function(){return searchSession}});var I=k(96156),C=k(67174),R=k(47419),j=k(63732);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const B={searchSessionId:R.default.getByKey("initData.searchSessionId")||(0,j.uG)(),hotelTotalNum:R.default.getByKey("initData.firstPageList.hotelListAddtionInfo.hotelTotalNum")||0,cityName:R.default.getByKey("initData.firstPageList.hotelListAddtionInfo.cityName")||0};function searchSession(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I={}}=_;switch(k){case C.g:return _objectSpread(_objectSpread({},e),{},{searchSessionId:I.searchSessionId});case C.p:return _objectSpread(_objectSpread({},e),{},{hotelTotalNum:I.hotelTotalNum});default:return e}}},65662:function(e,_,k){"use strict";k.d(_,{X:function(){return I},F:function(){return C}});const I="UPDATE_NORMAL_SEQID",C="UPDATE_RECOMMEND_SEQID"},39287:function(e,_,k){"use strict";k.d(_,{H:function(){return R}});var I=k(65662);const C={normalSeqId:"",recommendSeqId:""},R=function seqId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:R}=_;return k===I.X?Object.assign({},e,{normalSeqId:R}):k===I.F?Object.assign({},e,{recommendSeqId:R}):e}},28063:function(e,_,k){"use strict";k.d(_,{K:function(){return I}});const I="TOGGLE_SHOULD_REPLACE_URL"},52288:function(e,_,k){"use strict";k.d(_,{G:function(){return C}});var I=k(28063);const C=function shouldReplaceUrl(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;switch(k){case I.K:return C;default:return e}}},61191:function(e,_,k){"use strict";k.d(_,{p:function(){return I}});const I="UPDATE_SOLDOUT_INFO"},71442:function(e,_,k){"use strict";k.d(_,{Z:function(){return soldOutInfo}});var I=k(96156),C=k(61191);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function soldOutInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,{payload:k,type:I}=_;switch(I){case C.p:return _objectSpread(_objectSpread({},e),k);default:return e}}},78768:function(e,_,k){"use strict";k.d(_,{Z:function(){return ke}});var I=k(14890),C=k(47419),R=k(24801),j=k(50030),B=k(3516),H=k(47054),U=k(56636),V=k(13550),G=k(16134),q=k(73964),z=k(45556),J=k(3650),Q=k(76895),ee=k(8178),te=k(32281),ne=k(19114),re=k(50956),oe=k(98469),ie=k(85320),ae=k(65240),le=k(43149),se=k(39287),ce=k(63234),ue=k(679),de=k(52288),pe=k(52765),he=k(71442),fe=k(15675),me=k(9777),ge=k(4095),ve=k(33682),ye=k(54547),be=k(91245),_e=k(15345),we=k(46454);const Ee=(0,I.UY)({lastPage:Q.Z,ajaxLoad:J.Z,searchBarData:V.ZP,sortInfo:z.Z,searchInputKeyword:G.Z,searchCondition:q.Z,filterCondition:ee.a,filters:te.u,longList:ae.X,initData:H.F,cityRefresh:ne._,metaHotel:re.G,bookableVisible:oe.W,foldInitStatus:le.p,seqId:se.H,fromMetaToMain:ue.z,shouldReplaceUrl:de.G,directSearch:ie.T,soldoutInfo:he.Z,detention:pe.L,hotelAdIds:fe.Z,priceRange:ve.G,searchSession:me.Z,singleRecommendHotelInfo:ge.Z,ubtTraceInfo:U.Z,renderFilters:ye.B,recommendTimes:ce.N,batchParams:be.Z,dynamicRefreshTime:_e.Z,hotelAdditionInfo:we.$});let Se=(0,j.fp)().result,Oe=(0,j.fp)().filters_result;const Te={preHotelCount:0,preHotelIds:[],searchCondition:C.default.getByKey("initData.searchCondition")||{},searchBarData:C.default.getByKey("initData.searchBarData")||{},longList:C.default.getByKey("initData.firstPageList")||{},searchInputKeyword:C.default.getByKey("initData.searchCondition.keyword")||"",initData:C.default.getByKey("initData"),cityRefresh:!1,filterCondition:Se,filters:Oe,ajaxLoad:(0,J.V)(),metaHotel:C.default.getByKey("initData.firstPageList.metaHotel"),sortInfo:C.default.getByKey("initData.newSortInfo")||{list:[]},lastPage:{normalLastPage:"T"===C.default.getByKey("initData.firstPageList.isNeedRecommend"),recommendLastPage:!1},seqId:{normalSeqId:C.default.getByKey("initData.firstPageList.seqid"),recommendSeqId:""},hotelAdditionInfo:{poiFilters:[],inboundBanner:C.default.getByKey("initData.firstPageList.hotelListAddtionInfo.inboundBanner")||{}},detention:{},hotelAdIds:{ids:[]},priceRange:Se.priceRange,renderFilters:C.default.getByKey("initData.renderFilters")||(0,B.x)(),batchParams:{},dynamicRefreshTime:Date.now()},ke=(0,R.Z)(Ee,Te)},84768:function(e,_,k){"use strict";k.d(_,{e:function(){return I}});const I="UPDATE_ALL_UBTTRACEINFO"},56636:function(e,_,k){"use strict";k.d(_,{Z:function(){return ubtTraceInfo}});var I=k(84768);let C={hotel_result_show_methodid:""};function ubtTraceInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:R}=_;return k===I.e?Object.assign({},e,R):e}},76151:function(e,_,k){"use strict";k.d(_,{Z:function(){return Stars}});var I=k(36245),C=k(39621).default,R=k(67294);class Stars extends C{render(){const{num:e,iconStyle:_,type:k}=this.props,C=new Array(e).fill("");return e?R.createElement("div",{className:"more-star-repeat"},C.map(((e,C)=>R.createElement(I.Z,{style:_,key:C,type:"ic_new_".concat(k),className:"own-star"})))):null}}},61059:function(e,_,k){"use strict";k.d(_,{u:function(){return I}});const I="RESET_FOLD_STATUS"},74571:function(e,_,k){"use strict";k.d(_,{p:function(){return C}});var I=k(61059);const C=function foldInitStatus(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;return k===I.u?C:e}},94084:function(e,_,k){"use strict";k.d(_,{L:function(){return I}});const I="TOGGLE_FROM_META_TO_MAIN"},55705:function(e,_,k){"use strict";k.d(_,{z:function(){return C}});var I=k(94084);const C=function fromMetaToMain(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;switch(k){case I.L:return C;default:return e}}},36165:function(e,_,k){"use strict";k.d(_,{O:function(){return I}});const I="UPDATE_AD_HOTEL_ID"},91068:function(e,_,k){"use strict";k.d(_,{Z:function(){return hotelAdIds}});var I=k(96156),C=k(36165);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function hotelAdIds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I=[]}=_;switch(k){case C.O:return _objectSpread(_objectSpread({},e),{},{ids:I});default:return e}}},44601:function(e,_,k){"use strict";k.d(_,{yr:function(){return I},N0:function(){return C},K2:function(){return R},wk:function(){return j},a3:function(){return B},F7:function(){return H},sj:function(){return U}});const I="TOGGLE_AJAX_LOADING",C="TOGGLE_AJAX_PENDING",R="TOGGLE_AJAX_BREATHING",j="ADD_AJAX_PAGENO",B="RESET_AJAX_PAGENO",H="TOGGLE_MAP_LOADING",U="TOGGLE_AJAX_LOAD_TYPE"},26210:function(e,_,k){"use strict";k.d(_,{V:function(){return getInitAjaxLoad},Z:function(){return ajaxLoad}});var I=k(96156),C=k(44601),R=k(31903),j=k(47419);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const getInitAjaxLoad=()=>{const e=j.default.getByKey("initData.ssrHotelSearch");return{loading:!1,pending:!e,breathing:!e,normalPageNo:e?2:1,recommendPageNo:1,type:j.default.getByKey("initData.firstPageList.isNeedRecommend")?R.L7.recommend:R.L7.normal}};function ajaxLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;switch(k){case C.yr:return Object.assign({},e,{loading:I});case C.N0:return Object.assign({},e,{pending:I});case C.K2:return Object.assign({},e,{breathing:I});case C.wk:{const{key:_}=I;return Object.assign({},e,{[_]:++e[_]})}case C.a3:{const{key:_,pageNo:k}=I;return Object.assign({},e,{[_]:k})}case C.F7:return _objectSpread(_objectSpread({},e),{},{mapLoading:I});case C.sj:return _objectSpread(_objectSpread({},e),{},{type:I});default:return e}}},21078:function(e,_,k){"use strict";k.d(_,{B9:function(){return I},Pn:function(){return C},a9:function(){return R},ji:function(){return j},Jd:function(){return B},o4:function(){return H},zV:function(){return U},ck:function(){return V},Zz:function(){return G},AO:function(){return q}});const I="UPDATE_NORMAL_LIST_DATA",C="UPDATE_RECOMMEND_LIST_DATA",R="RESET_RECOMMEND_LIST_DATA",j="RESET_LONG_LIST_DATA",B="CHANGE_LONG_LIST_LOADING_STATUS",H="UPDATE_CONTROLLER_UBTTRACELOGID",U="REFRESH_FIRSTHOTELLIST",V="UPDATE_TRIPCOINS",G="UPDATE_EXPERIENCE_MEMBER_REWARD",q="UPDATE_WEB_PUSH_COUNT"},11178:function(e,_,k){"use strict";k.d(_,{X:function(){return j}});var I=k(96156),C=k(21078),R=k(3479);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}const j=function longList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:I}=_;switch(k){case C.B9:{var j;const _=(0,R.Z)(e,"moreHotel",{}),k=(0,R.Z)(e,"hotelList",{}),C=(0,R.Z)(e,"resultTitle","");return I.resultTitle=C,I.moreHotel=_,I.hotelList=I.hotelList||{},I.hotelList.list=[...k.list||[],...I.hotelList.list||[]],e.encourage&&e.encourage.description&&(I.encourage=e.encourage),(null===(j=I.hotelList.list)||void 0===j?void 0:j.length)&&"None"===I.hotelList.type&&(I.hotelList.type=k.type),Object.assign({},e,_objectSpread({},I))}case C.Pn:{const _=(0,R.Z)(e,"hotelList",{});I.hotelList=_,I.resultTitle=I.resultTitle?I.resultTitle:e.resultTitle;const k=(0,R.Z)(e,"moreHotel.list",[]),C=(0,R.Z)(I,"moreHotel.list",[]);I.moreHotel=I.moreHotel||{},I.moreHotel.list=[...k,...C];const j=(0,R.Z)(e,"moreHotel.title",""),B=(0,R.Z)(I,"moreHotel.title","");return I.moreHotel.title=B||j,e.encourage&&e.encourage.description&&(I.encourage=e.encourage),Object.assign({},e,_objectSpread({},I))}case C.a9:return Object.assign({},e,{moreHotel:I.moreHotel,seqid:I.seqid});case C.ji:return I;case C.Jd:return _objectSpread(_objectSpread({},e),{},{loading:I});case C.Zz:return _objectSpread(_objectSpread({},e),{},{experienceMemberReward:playload});case C.ck:return _objectSpread(_objectSpread({},e),{},{tripcoinsReward:I});case C.o4:return _objectSpread(_objectSpread({},e),{},{controllerUbtTraceLogId:I});case C.zV:{var B,H;const{response:_}=I,k=(0,R.Z)(_,"hotelList.list",[]),C=(0,R.Z)(e,"hotelList",{});if(!(null==_||null===(B=_.batchSearchInfo)||void 0===B?void 0:B.batchId)||!k.length||!(null==C||null===(H=C.list)||void 0===H?void 0:H.length))return e;const j=_objectSpread(_objectSpread({},C),{},{list:C.list.map((e=>{const _=k.find((_=>{var k,I;return(null==_||null===(k=_.base)||void 0===k?void 0:k.hotelId)===(null==e||null===(I=e.base)||void 0===I?void 0:I.hotelId)}));return _?(_.banner=e.banner,_):e}))});return _objectSpread(_objectSpread({},e),{},{hotelList:j})}case C.AO:return _objectSpread(_objectSpread({},e),{},{webPushCount:I});default:return e}}},17959:function(e,_,k){"use strict";k.d(_,{X:function(){return I},F:function(){return C}});const I="UPDATE_NORMAL_SEQID",C="UPDATE_RECOMMEND_SEQID"},15245:function(e,_,k){"use strict";k.d(_,{H:function(){return R}});var I=k(17959);const C={normalSeqId:"",recommendSeqId:""},R=function seqId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:R}=_;return k===I.X?Object.assign({},e,{normalSeqId:R}):k===I.F?Object.assign({},e,{recommendSeqId:R}):e}},57178:function(e,_,k){"use strict";k.d(_,{K:function(){return I}});const I="TOGGLE_SHOULD_REPLACE_URL"},1489:function(e,_,k){"use strict";k.d(_,{G:function(){return C}});var I=k(57178);const C=function shouldReplaceUrl(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=arguments.length>1?arguments[1]:void 0;const{type:k,payload:C}=_;switch(k){case I.K:return C;default:return e}}},37881:function(e,_,k){"use strict";k.d(_,{p:function(){return I}});const I="UPDATE_SOLDOUT_INFO"},4325:function(e,_,k){"use strict";k.d(_,{Z:function(){return soldOutInfo}});var I=k(96156),C=k(37881);function ownKeys(e,_){var k=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);_&&(I=I.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),k.push.apply(k,I)}return k}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var k=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(k),!0).forEach((function(_){(0,I.Z)(e,_,k[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(k)):ownKeys(Object(k)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(k,_))}))}return e}function soldOutInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,{payload:k,type:I}=_;switch(I){case C.p:return _objectSpread(_objectSpread({},e),k);default:return e}}},64528:function(e,_,k){"use strict";k.d(_,{Z:function(){return me}});var I=k(14890),C=k(47419),R=k(47843),j=k(13601),B=k(34482),H=k(42955),U=k(82719),V=k(40582),G=k(58186),q=k(26210),z=k(358),J=k(15734),Q=k(26965),ee=k(31347),te=k(1797),ne=k(29238),re=k(11178),oe=k(74571),ie=k(15245),ae=k(55705),le=k(1489),se=k(73396),ce=k(4325),ue=k(91068),de=k(33682);const pe=(0,I.UY)({lastPage:z.Z,ajaxLoad:q.Z,searchBarData:H.ZP,sortInfo:G.Z,searchInputKeyword:U.Z,searchCondition:V.Z,filterCondition:J.a,longList:re.X,initData:B.F,cityRefresh:Q._,metaHotel:ee.G,bookableVisible:te.W,foldInitStatus:oe.p,seqId:ie.H,fromMetaToMain:ae.z,shouldReplaceUrl:le.G,directSearch:ne.T,soldoutInfo:ce.Z,detention:se.L,hotelAdIds:ue.Z,priceRange:de.G});let he=(0,j.f)();const fe={searchCondition:C.default.getByKey("initData.searchCondition")||{},longList:C.default.getByKey("initData.firstPageList")||{},searchInputKeyword:C.default.getByKey("initData.searchCondition.keyword")||"",initData:C.default.getByKey("initData"),cityRefresh:!1,filterCondition:he,ajaxLoad:(0,q.V)(),metaHotel:C.default.getByKey("initData.firstPageList.metaHotel"),sortInfo:C.default.getByKey("initData.newSortInfo")||{list:[]},lastPage:{normalLastPage:"T"===C.default.getByKey("initData.firstPageList.isNeedRecommend"),recommendLastPage:!1},seqId:{normalSeqId:C.default.getByKey("initData.firstPageList.seqid"),recommendSeqId:""},detention:{},hotelAdIds:{ids:[]},priceRange:he.priceRange},me=(0,R.Z)(pe,fe)},33481:function(e,_,k){"use strict";k.d(_,{ZL:function(){return C}});var I=k(92118);const C=function getMapPoi(){let e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e="gg"!==_?k.find((e=>2===e.coordinateType||"GAODE"===e.coordinateType)):k.find((e=>1===e.coordinateType||"GOOGLE"===e.coordinateType)),e||{}};Number((0,I.Z)("city"))||(0,I.Z)("cityId")}},__webpack_module_cache__={},inProgress,dataWebpackPrefix,loadStylesheet,installedCssChunks;function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var _=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(_.exports,_,_.exports,__webpack_require__),_.loaded=!0,_.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(e){var _=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=function(e,_){for(var k in _)__webpack_require__.o(_,k)&&!__webpack_require__.o(e,k)&&Object.defineProperty(e,k,{enumerable:!0,get:_[k]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(_,k){return __webpack_require__.f[k](e,_),_}),[]))},__webpack_require__.u=function(e){return{1:"detailPage/mapview",101:"detailPage/recentHotels",582:"listNewPage/mapview",608:"detailPage/hotelInfo",646:"detailPage/reviewList",933:"listNewPage/async"}[e]+"."+{1:"0daff5578ab024d6605b",101:"ae0f309c6b7bfa2035b5",582:"6e031614ed0044b7b3d2",608:"80ddaf9cb2bb8c11537d",646:"c156a9047a90a4046357",933:"6f2e8c7c962dda959e71"}[e]+".js"},__webpack_require__.miniCssF=function(e){return 840===e?"smart/smart.291e829e4323f2c2dacf.css":503===e?"listNewPage/index.undefined.css":{1:"detailPage/mapview",101:"detailPage/recentHotels",582:"listNewPage/mapview",608:"detailPage/hotelInfo",646:"detailPage/reviewList",933:"listNewPage/async"}[e]+"."+{1:"dce67069d6c887939fec",101:"f94dd0453526f26538c5",582:"0ebb4ef00098050aeea0",608:"98664308188dd11e7f1b",646:"82e12d832b8a16310bbc",933:"9c58028398c85d756c92"}[e]+".css"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__webpack_require__.o=function(e,_){return Object.prototype.hasOwnProperty.call(e,_)},inProgress={},dataWebpackPrefix="smart:",__webpack_require__.l=function(e,_,k){if(inProgress[e])inProgress[e].push(_);else{var I,C;if(void 0!==k)for(var R=document.getElementsByTagName("script"),j=0;j<R.length;j++){var B=R[j];if(B.getAttribute("src")==e||B.getAttribute("data-webpack")==dataWebpackPrefix+k){I=B;break}}I||(C=!0,(I=document.createElement("script")).charset="utf-8",I.timeout=120,__webpack_require__.nc&&I.setAttribute("nonce",__webpack_require__.nc),I.setAttribute("data-webpack",dataWebpackPrefix+k),I.src=e),inProgress[e]=[_];var onScriptComplete=function(_,k){I.onerror=I.onload=null,clearTimeout(H);var C=inProgress[e];if(delete inProgress[e],I.parentNode&&I.parentNode.removeChild(I),C&&C.forEach((function(e){return e(k)})),_)return _(k)},H=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:I}),12e4);I.onerror=onScriptComplete.bind(null,I.onerror),I.onload=onScriptComplete.bind(null,I.onload),C&&document.head.appendChild(I)}},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.j=503,function(){var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var _=__webpack_require__.g.document;if(!e&&_&&(_.currentScript&&(e=_.currentScript.src),!e)){var k=_.getElementsByTagName("script");k.length&&(e=k[k.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e+"../"}(),loadStylesheet=function(e){return new Promise((function(_,k){var I=__webpack_require__.miniCssF(e),C=__webpack_require__.p+I;if(function(e,_){for(var k=document.getElementsByTagName("link"),I=0;I<k.length;I++){var C=(j=k[I]).getAttribute("data-href")||j.getAttribute("href");if("stylesheet"===j.rel&&(C===e||C===_))return j}var R=document.getElementsByTagName("style");for(I=0;I<R.length;I++){var j;if((C=(j=R[I]).getAttribute("data-href"))===e||C===_)return j}}(I,C))return _();!function(e,_,k,I){var C=document.createElement("link");C.rel="stylesheet",C.type="text/css",C.onerror=C.onload=function(R){if(C.onerror=C.onload=null,"load"===R.type)k();else{var j=R&&("load"===R.type?"missing":R.type),B=R&&R.target&&R.target.href||_,H=new Error("Loading CSS chunk "+e+" failed.\n("+B+")");H.code="CSS_CHUNK_LOAD_FAILED",H.type=j,H.request=B,C.parentNode.removeChild(C),I(H)}},C.href=_,document.head.appendChild(C)}(e,C,_,k)}))},installedCssChunks={503:0},__webpack_require__.f.miniCss=function(e,_){installedCssChunks[e]?_.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{1:1,101:1,582:1,608:1,646:1,933:1}[e]&&_.push(installedCssChunks[e]=loadStylesheet(e).then((function(){installedCssChunks[e]=0}),(function(_){throw delete installedCssChunks[e],_})))},function(){var e={503:0},_=[[77979,840],[5024,840],[80140,840],[19765,840],[26635,840]];__webpack_require__.f.j=function(_,k){var I=__webpack_require__.o(e,_)?e[_]:void 0;if(0!==I)if(I)k.push(I[2]);else{var C=new Promise((function(k,C){I=e[_]=[k,C]}));k.push(I[2]=C);var R=__webpack_require__.p+__webpack_require__.u(_),j=new Error;__webpack_require__.l(R,(function(k){if(__webpack_require__.o(e,_)&&(0!==(I=e[_])&&(e[_]=void 0),I)){var C=k&&("load"===k.type?"missing":k.type),R=k&&k.target&&k.target.src;j.message="Loading chunk "+_+" failed.\n("+C+": "+R+")",j.name="ChunkLoadError",j.type=C,j.request=R,I[1](j)}}),"chunk-"+_)}};var checkDeferredModules=function(){};function checkDeferredModulesImpl(){for(var k,I=0;I<_.length;I++){for(var C=_[I],R=!0,j=1;j<C.length;j++){var B=C[j];0!==e[B]&&(R=!1)}R&&(_.splice(I--,1),k=__webpack_require__(__webpack_require__.s=C[0]))}return 0===_.length&&(__webpack_require__.x(),__webpack_require__.x=function(){}),k}__webpack_require__.x=function(){__webpack_require__.x=function(){},k=k.slice();for(var e=0;e<k.length;e++)webpackJsonpCallback(k[e]);return(checkDeferredModules=checkDeferredModulesImpl)()};var webpackJsonpCallback=function(k){for(var C,R,[j,B,H,U]=k,V=0,G=[];V<j.length;V++)R=j[V],__webpack_require__.o(e,R)&&e[R]&&G.push(e[R][0]),e[R]=0;for(C in B)__webpack_require__.o(B,C)&&(__webpack_require__.m[C]=B[C]);for(H&&H(__webpack_require__),I(k);G.length;)G.shift()();return U&&_.push.apply(_,U),checkDeferredModules()},k=self.webpackChunksmart=self.webpackChunksmart||[],I=k.push.bind(k);k.push=webpackJsonpCallback}(),__webpack_require__.x()})();
//# sourceMappingURL=https://sourcemap.ares.tripws.com/modules/ibu/ibu-hotel-online/es/listNewPage/index.686fbad60d17d57ffc25.js.map